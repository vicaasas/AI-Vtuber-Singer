var xl=Object.defineProperty;var _l=(_e,_,et)=>_ in _e?xl(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:et}):_e[_]=et;var ln=(_e,_,et)=>_l(_e,typeof _!="symbol"?_+"":_,et);function _mergeNamespaces(_e,_){for(var et=0;et<_.length;et++){const tt=_[et];if(typeof tt!="string"&&!Array.isArray(tt)){for(const rt in tt)if(rt!=="default"&&!(rt in _e)){const nt=Object.getOwnPropertyDescriptor(tt,rt);nt&&Object.defineProperty(_e,rt,nt.get?nt:{enumerable:!0,get:()=>tt[rt]})}}}return Object.freeze(Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}))}(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const rt of document.querySelectorAll('link[rel="modulepreload"]'))tt(rt);new MutationObserver(rt=>{for(const nt of rt)if(nt.type==="childList")for(const ot of nt.addedNodes)ot.tagName==="LINK"&&ot.rel==="modulepreload"&&tt(ot)}).observe(document,{childList:!0,subtree:!0});function et(rt){const nt={};return rt.integrity&&(nt.integrity=rt.integrity),rt.referrerPolicy&&(nt.referrerPolicy=rt.referrerPolicy),rt.crossOrigin==="use-credentials"?nt.credentials="include":rt.crossOrigin==="anonymous"?nt.credentials="omit":nt.credentials="same-origin",nt}function tt(rt){if(rt.ep)return;rt.ep=!0;const nt=et(rt);fetch(rt.href,nt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}function getAugmentedNamespace(_e){if(_e.__esModule)return _e;var _=_e.default;if(typeof _=="function"){var et=function tt(){return this instanceof tt?Reflect.construct(_,arguments,this.constructor):_.apply(this,arguments)};et.prototype=_.prototype}else et={};return Object.defineProperty(et,"__esModule",{value:!0}),Object.keys(_e).forEach(function(tt){var rt=Object.getOwnPropertyDescriptor(_e,tt);Object.defineProperty(et,tt,rt.get?rt:{enumerable:!0,get:function(){return _e[tt]}})}),et}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(_e){return _e===null||typeof _e!="object"?null:(_e=z$2&&_e[z$2]||_e["@@iterator"],typeof _e=="function"?_e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(_e,_,et){this.props=_e,this.context=_,this.refs=D$1,this.updater=et||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(_e,_){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,_,"setState")};E$1.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(_e,_,et){this.props=_e,this.context=_,this.refs=D$1,this.updater=et||B$1}var H$2=G$1.prototype=new F;H$2.constructor=G$1;C$1(H$2,E$1.prototype);H$2.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(_e,_,et){var tt,rt={},nt=null,ot=null;if(_!=null)for(tt in _.ref!==void 0&&(ot=_.ref),_.key!==void 0&&(nt=""+_.key),_)J.call(_,tt)&&!L$1.hasOwnProperty(tt)&&(rt[tt]=_[tt]);var at=arguments.length-2;if(at===1)rt.children=et;else if(1<at){for(var lt=Array(at),ct=0;ct<at;ct++)lt[ct]=arguments[ct+2];rt.children=lt}if(_e&&_e.defaultProps)for(tt in at=_e.defaultProps,at)rt[tt]===void 0&&(rt[tt]=at[tt]);return{$$typeof:l$3,type:_e,key:nt,ref:ot,props:rt,_owner:K$1.current}}function N$2(_e,_){return{$$typeof:l$3,type:_e.type,key:_,ref:_e.ref,props:_e.props,_owner:_e._owner}}function O$1(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===l$3}function escape$1(_e){var _={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(et){return _[et]})}var P$1=/\/+/g;function Q$1(_e,_){return typeof _e=="object"&&_e!==null&&_e.key!=null?escape$1(""+_e.key):_.toString(36)}function R$1(_e,_,et,tt,rt){var nt=typeof _e;(nt==="undefined"||nt==="boolean")&&(_e=null);var ot=!1;if(_e===null)ot=!0;else switch(nt){case"string":case"number":ot=!0;break;case"object":switch(_e.$$typeof){case l$3:case n$3:ot=!0}}if(ot)return ot=_e,rt=rt(ot),_e=tt===""?"."+Q$1(ot,0):tt,I$1(rt)?(et="",_e!=null&&(et=_e.replace(P$1,"$&/")+"/"),R$1(rt,_,et,"",function(ct){return ct})):rt!=null&&(O$1(rt)&&(rt=N$2(rt,et+(!rt.key||ot&&ot.key===rt.key?"":(""+rt.key).replace(P$1,"$&/")+"/")+_e)),_.push(rt)),1;if(ot=0,tt=tt===""?".":tt+":",I$1(_e))for(var at=0;at<_e.length;at++){nt=_e[at];var lt=tt+Q$1(nt,at);ot+=R$1(nt,_,et,lt,rt)}else if(lt=A$2(_e),typeof lt=="function")for(_e=lt.call(_e),at=0;!(nt=_e.next()).done;)nt=nt.value,lt=tt+Q$1(nt,at++),ot+=R$1(nt,_,et,lt,rt);else if(nt==="object")throw _=String(_e),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return ot}function S$2(_e,_,et){if(_e==null)return _e;var tt=[],rt=0;return R$1(_e,tt,"","",function(nt){return _.call(et,nt,rt++)}),tt}function T$1(_e){if(_e._status===-1){var _=_e._result;_=_(),_.then(function(et){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=et)},function(et){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=et)}),_e._status===-1&&(_e._status=0,_e._result=_)}if(_e._status===1)return _e._result.default;throw _e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(_e,_,et){S$2(_e,function(){_.apply(this,arguments)},et)},count:function(_e){var _=0;return S$2(_e,function(){_++}),_},toArray:function(_e){return S$2(_e,function(_){return _})||[]},only:function(_e){if(!O$1(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};react_production_min.Component=E$1;react_production_min.Fragment=p$4;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(_e,_,et){if(_e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_e+".");var tt=C$1({},_e.props),rt=_e.key,nt=_e.ref,ot=_e._owner;if(_!=null){if(_.ref!==void 0&&(nt=_.ref,ot=K$1.current),_.key!==void 0&&(rt=""+_.key),_e.type&&_e.type.defaultProps)var at=_e.type.defaultProps;for(lt in _)J.call(_,lt)&&!L$1.hasOwnProperty(lt)&&(tt[lt]=_[lt]===void 0&&at!==void 0?at[lt]:_[lt])}var lt=arguments.length-2;if(lt===1)tt.children=et;else if(1<lt){at=Array(lt);for(var ct=0;ct<lt;ct++)at[ct]=arguments[ct+2];tt.children=at}return{$$typeof:l$3,type:_e.type,key:rt,ref:nt,props:tt,_owner:ot}};react_production_min.createContext=function(_e){return _e={$$typeof:u$1,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_e.Provider={$$typeof:t$2,_context:_e},_e.Consumer=_e};react_production_min.createElement=M$2;react_production_min.createFactory=function(_e){var _=M$2.bind(null,_e);return _.type=_e,_};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_e){return{$$typeof:v$3,render:_e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(_e){return{$$typeof:y$2,_payload:{_status:-1,_result:_e},_init:T$1}};react_production_min.memo=function(_e,_){return{$$typeof:x$2,type:_e,compare:_===void 0?null:_}};react_production_min.startTransition=function(_e){var _=V$1.transition;V$1.transition={};try{_e()}finally{V$1.transition=_}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(_e,_){return U$1.current.useCallback(_e,_)};react_production_min.useContext=function(_e){return U$1.current.useContext(_e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_e){return U$1.current.useDeferredValue(_e)};react_production_min.useEffect=function(_e,_){return U$1.current.useEffect(_e,_)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(_e,_,et){return U$1.current.useImperativeHandle(_e,_,et)};react_production_min.useInsertionEffect=function(_e,_){return U$1.current.useInsertionEffect(_e,_)};react_production_min.useLayoutEffect=function(_e,_){return U$1.current.useLayoutEffect(_e,_)};react_production_min.useMemo=function(_e,_){return U$1.current.useMemo(_e,_)};react_production_min.useReducer=function(_e,_,et){return U$1.current.useReducer(_e,_,et)};react_production_min.useRef=function(_e){return U$1.current.useRef(_e)};react_production_min.useState=function(_e){return U$1.current.useState(_e)};react_production_min.useSyncExternalStore=function(_e,_,et){return U$1.current.useSyncExternalStore(_e,_,et)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$2=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$2=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$1(_e,_,et){var tt,rt={},nt=null,ot=null;et!==void 0&&(nt=""+et),_.key!==void 0&&(nt=""+_.key),_.ref!==void 0&&(ot=_.ref);for(tt in _)m$3.call(_,tt)&&!p$3.hasOwnProperty(tt)&&(rt[tt]=_[tt]);if(_e&&_e.defaultProps)for(tt in _=_e.defaultProps,_)rt[tt]===void 0&&(rt[tt]=_[tt]);return{$$typeof:k$2,type:_e,key:nt,ref:ot,props:rt,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_e){function _(Nt,Bt){var Ut=Nt.length;Nt.push(Bt);e:for(;0<Ut;){var Vt=Ut-1>>>1,Jt=Nt[Vt];if(0<rt(Jt,Bt))Nt[Vt]=Bt,Nt[Ut]=Jt,Ut=Vt;else break e}}function et(Nt){return Nt.length===0?null:Nt[0]}function tt(Nt){if(Nt.length===0)return null;var Bt=Nt[0],Ut=Nt.pop();if(Ut!==Bt){Nt[0]=Ut;e:for(var Vt=0,Jt=Nt.length,lr=Jt>>>1;Vt<lr;){var nr=2*(Vt+1)-1,ir=Nt[nr],cr=nr+1,hr=Nt[cr];if(0>rt(ir,Ut))cr<Jt&&0>rt(hr,ir)?(Nt[Vt]=hr,Nt[cr]=Ut,Vt=cr):(Nt[Vt]=ir,Nt[nr]=Ut,Vt=nr);else if(cr<Jt&&0>rt(hr,Ut))Nt[Vt]=hr,Nt[cr]=Ut,Vt=cr;else break e}}return Bt}function rt(Nt,Bt){var Ut=Nt.sortIndex-Bt.sortIndex;return Ut!==0?Ut:Nt.id-Bt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var nt=performance;_e.unstable_now=function(){return nt.now()}}else{var ot=Date,at=ot.now();_e.unstable_now=function(){return ot.now()-at}}var lt=[],ct=[],dt=1,st=null,it=3,ut=!1,ht=!1,ft=!1,gt=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,yt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function bt(Nt){for(var Bt=et(ct);Bt!==null;){if(Bt.callback===null)tt(ct);else if(Bt.startTime<=Nt)tt(ct),Bt.sortIndex=Bt.expirationTime,_(lt,Bt);else break;Bt=et(ct)}}function vt(Nt){if(ft=!1,bt(Nt),!ht)if(et(lt)!==null)ht=!0,Mt(xt);else{var Bt=et(ct);Bt!==null&&Dt(vt,Bt.startTime-Nt)}}function xt(Nt,Bt){ht=!1,ft&&(ft=!1,mt(Et),Et=-1),ut=!0;var Ut=it;try{for(bt(Bt),st=et(lt);st!==null&&(!(st.expirationTime>Bt)||Nt&&!Rt());){var Vt=st.callback;if(typeof Vt=="function"){st.callback=null,it=st.priorityLevel;var Jt=Vt(st.expirationTime<=Bt);Bt=_e.unstable_now(),typeof Jt=="function"?st.callback=Jt:st===et(lt)&&tt(lt),bt(Bt)}else tt(lt);st=et(lt)}if(st!==null)var lr=!0;else{var nr=et(ct);nr!==null&&Dt(vt,nr.startTime-Bt),lr=!1}return lr}finally{st=null,it=Ut,ut=!1}}var wt=!1,St=null,Et=-1,_t=5,Tt=-1;function Rt(){return!(_e.unstable_now()-Tt<_t)}function Ot(){if(St!==null){var Nt=_e.unstable_now();Tt=Nt;var Bt=!0;try{Bt=St(!0,Nt)}finally{Bt?At():(wt=!1,St=null)}}else wt=!1}var At;if(typeof yt=="function")At=function(){yt(Ot)};else if(typeof MessageChannel<"u"){var Ct=new MessageChannel,$t=Ct.port2;Ct.port1.onmessage=Ot,At=function(){$t.postMessage(null)}}else At=function(){gt(Ot,0)};function Mt(Nt){St=Nt,wt||(wt=!0,At())}function Dt(Nt,Bt){Et=gt(function(){Nt(_e.unstable_now())},Bt)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(Nt){Nt.callback=null},_e.unstable_continueExecution=function(){ht||ut||(ht=!0,Mt(xt))},_e.unstable_forceFrameRate=function(Nt){0>Nt||125<Nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_t=0<Nt?Math.floor(1e3/Nt):5},_e.unstable_getCurrentPriorityLevel=function(){return it},_e.unstable_getFirstCallbackNode=function(){return et(lt)},_e.unstable_next=function(Nt){switch(it){case 1:case 2:case 3:var Bt=3;break;default:Bt=it}var Ut=it;it=Bt;try{return Nt()}finally{it=Ut}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(Nt,Bt){switch(Nt){case 1:case 2:case 3:case 4:case 5:break;default:Nt=3}var Ut=it;it=Nt;try{return Bt()}finally{it=Ut}},_e.unstable_scheduleCallback=function(Nt,Bt,Ut){var Vt=_e.unstable_now();switch(typeof Ut=="object"&&Ut!==null?(Ut=Ut.delay,Ut=typeof Ut=="number"&&0<Ut?Vt+Ut:Vt):Ut=Vt,Nt){case 1:var Jt=-1;break;case 2:Jt=250;break;case 5:Jt=1073741823;break;case 4:Jt=1e4;break;default:Jt=5e3}return Jt=Ut+Jt,Nt={id:dt++,callback:Bt,priorityLevel:Nt,startTime:Ut,expirationTime:Jt,sortIndex:-1},Ut>Vt?(Nt.sortIndex=Ut,_(ct,Nt),et(lt)===null&&Nt===et(ct)&&(ft?(mt(Et),Et=-1):ft=!0,Dt(vt,Ut-Vt))):(Nt.sortIndex=Jt,_(lt,Nt),ht||ut||(ht=!0,Mt(xt))),Nt},_e.unstable_shouldYield=Rt,_e.unstable_wrapCallback=function(Nt){var Bt=it;return function(){var Ut=it;it=Bt;try{return Nt.apply(this,arguments)}finally{it=Ut}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(_e){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+_e,et=1;et<arguments.length;et++)_+="&args[]="+encodeURIComponent(arguments[et]);return"Minified React error #"+_e+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_e,_){ha(_e,_),ha(_e+"Capture",_)}function ha(_e,_){for(ea[_e]=_,_e=0;_e<_.length;_e++)da.add(_[_e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_e){return ja.call(ma,_e)?!0:ja.call(la,_e)?!1:ka.test(_e)?ma[_e]=!0:(la[_e]=!0,!1)}function pa(_e,_,et,tt){if(et!==null&&et.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return tt?!1:et!==null?!et.acceptsBooleans:(_e=_e.toLowerCase().slice(0,5),_e!=="data-"&&_e!=="aria-");default:return!1}}function qa(_e,_,et,tt){if(_===null||typeof _>"u"||pa(_e,_,et,tt))return!0;if(tt)return!1;if(et!==null)switch(et.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function v$2(_e,_,et,tt,rt,nt,ot){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=tt,this.attributeNamespace=rt,this.mustUseProperty=et,this.propertyName=_e,this.type=_,this.sanitizeURL=nt,this.removeEmptyString=ot}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_e){z$1[_e]=new v$2(_e,0,!1,_e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_e){var _=_e[0];z$1[_]=new v$2(_,1,!1,_e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_e){z$1[_e]=new v$2(_e,2,!1,_e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_e){z$1[_e]=new v$2(_e,2,!1,_e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_e){z$1[_e]=new v$2(_e,3,!1,_e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_e){z$1[_e]=new v$2(_e,3,!0,_e,null,!1,!1)});["capture","download"].forEach(function(_e){z$1[_e]=new v$2(_e,4,!1,_e,null,!1,!1)});["cols","rows","size","span"].forEach(function(_e){z$1[_e]=new v$2(_e,6,!1,_e,null,!1,!1)});["rowSpan","start"].forEach(function(_e){z$1[_e]=new v$2(_e,5,!1,_e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_e){return _e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$2(_,1,!1,_e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$2(_,1,!1,_e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$2(_,1,!1,_e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_e){z$1[_e]=new v$2(_e,1,!1,_e.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_e){z$1[_e]=new v$2(_e,1,!1,_e.toLowerCase(),null,!0,!0)});function ta(_e,_,et,tt){var rt=z$1.hasOwnProperty(_)?z$1[_]:null;(rt!==null?rt.type!==0:tt||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(qa(_,et,rt,tt)&&(et=null),tt||rt===null?oa(_)&&(et===null?_e.removeAttribute(_):_e.setAttribute(_,""+et)):rt.mustUseProperty?_e[rt.propertyName]=et===null?rt.type===3?!1:"":et:(_=rt.attributeName,tt=rt.attributeNamespace,et===null?_e.removeAttribute(_):(rt=rt.type,et=rt===3||rt===4&&et===!0?"":""+et,tt?_e.setAttributeNS(tt,_,et):_e.setAttribute(_,et))))}var ua$1=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_e){return _e===null||typeof _e!="object"?null:(_e=Ja&&_e[Ja]||_e["@@iterator"],typeof _e=="function"?_e:null)}var A$1=Object.assign,La;function Ma(_e){if(La===void 0)try{throw Error()}catch(et){var _=et.stack.trim().match(/\n( *(at )?)/);La=_&&_[1]||""}return`
`+La+_e}var Na=!1;function Oa(_e,_){if(!_e||Na)return"";Na=!0;var et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(ct){var tt=ct}Reflect.construct(_e,[],_)}else{try{_.call()}catch(ct){tt=ct}_e.call(_.prototype)}else{try{throw Error()}catch(ct){tt=ct}_e()}}catch(ct){if(ct&&tt&&typeof ct.stack=="string"){for(var rt=ct.stack.split(`
`),nt=tt.stack.split(`
`),ot=rt.length-1,at=nt.length-1;1<=ot&&0<=at&&rt[ot]!==nt[at];)at--;for(;1<=ot&&0<=at;ot--,at--)if(rt[ot]!==nt[at]){if(ot!==1||at!==1)do if(ot--,at--,0>at||rt[ot]!==nt[at]){var lt=`
`+rt[ot].replace(" at new "," at ");return _e.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",_e.displayName)),lt}while(1<=ot&&0<=at);break}}}finally{Na=!1,Error.prepareStackTrace=et}return(_e=_e?_e.displayName||_e.name:"")?Ma(_e):""}function Pa(_e){switch(_e.tag){case 5:return Ma(_e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _e=Oa(_e.type,!1),_e;case 11:return _e=Oa(_e.type.render,!1),_e;case 1:return _e=Oa(_e.type,!0),_e;default:return""}}function Qa(_e){if(_e==null)return null;if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e;switch(_e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _e=="object")switch(_e.$$typeof){case Ca:return(_e.displayName||"Context")+".Consumer";case Ba:return(_e._context.displayName||"Context")+".Provider";case Da:var _=_e.render;return _e=_e.displayName,_e||(_e=_.displayName||_.name||"",_e=_e!==""?"ForwardRef("+_e+")":"ForwardRef"),_e;case Ga:return _=_e.displayName||null,_!==null?_:Qa(_e.type)||"Memo";case Ha:_=_e._payload,_e=_e._init;try{return Qa(_e(_))}catch{}}return null}function Ra(_e){var _=_e.type;switch(_e.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _e=_.render,_e=_e.displayName||_e.name||"",_.displayName||(_e!==""?"ForwardRef("+_e+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_);case 8:return _===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function Sa(_e){switch(typeof _e){case"boolean":case"number":case"string":case"undefined":return _e;case"object":return _e;default:return""}}function Ta(_e){var _=_e.type;return(_e=_e.nodeName)&&_e.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Ua(_e){var _=Ta(_e)?"checked":"value",et=Object.getOwnPropertyDescriptor(_e.constructor.prototype,_),tt=""+_e[_];if(!_e.hasOwnProperty(_)&&typeof et<"u"&&typeof et.get=="function"&&typeof et.set=="function"){var rt=et.get,nt=et.set;return Object.defineProperty(_e,_,{configurable:!0,get:function(){return rt.call(this)},set:function(ot){tt=""+ot,nt.call(this,ot)}}),Object.defineProperty(_e,_,{enumerable:et.enumerable}),{getValue:function(){return tt},setValue:function(ot){tt=""+ot},stopTracking:function(){_e._valueTracker=null,delete _e[_]}}}}function Va(_e){_e._valueTracker||(_e._valueTracker=Ua(_e))}function Wa(_e){if(!_e)return!1;var _=_e._valueTracker;if(!_)return!0;var et=_.getValue(),tt="";return _e&&(tt=Ta(_e)?_e.checked?"true":"false":_e.value),_e=tt,_e!==et?(_.setValue(_e),!0):!1}function Xa(_e){if(_e=_e||(typeof document<"u"?document:void 0),typeof _e>"u")return null;try{return _e.activeElement||_e.body}catch{return _e.body}}function Ya(_e,_){var et=_.checked;return A$1({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:et??_e._wrapperState.initialChecked})}function Za(_e,_){var et=_.defaultValue==null?"":_.defaultValue,tt=_.checked!=null?_.checked:_.defaultChecked;et=Sa(_.value!=null?_.value:et),_e._wrapperState={initialChecked:tt,initialValue:et,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function ab(_e,_){_=_.checked,_!=null&&ta(_e,"checked",_,!1)}function bb(_e,_){ab(_e,_);var et=Sa(_.value),tt=_.type;if(et!=null)tt==="number"?(et===0&&_e.value===""||_e.value!=et)&&(_e.value=""+et):_e.value!==""+et&&(_e.value=""+et);else if(tt==="submit"||tt==="reset"){_e.removeAttribute("value");return}_.hasOwnProperty("value")?cb(_e,_.type,et):_.hasOwnProperty("defaultValue")&&cb(_e,_.type,Sa(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(_e.defaultChecked=!!_.defaultChecked)}function db(_e,_,et){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var tt=_.type;if(!(tt!=="submit"&&tt!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+_e._wrapperState.initialValue,et||_===_e.value||(_e.value=_),_e.defaultValue=_}et=_e.name,et!==""&&(_e.name=""),_e.defaultChecked=!!_e._wrapperState.initialChecked,et!==""&&(_e.name=et)}function cb(_e,_,et){(_!=="number"||Xa(_e.ownerDocument)!==_e)&&(et==null?_e.defaultValue=""+_e._wrapperState.initialValue:_e.defaultValue!==""+et&&(_e.defaultValue=""+et))}var eb=Array.isArray;function fb(_e,_,et,tt){if(_e=_e.options,_){_={};for(var rt=0;rt<et.length;rt++)_["$"+et[rt]]=!0;for(et=0;et<_e.length;et++)rt=_.hasOwnProperty("$"+_e[et].value),_e[et].selected!==rt&&(_e[et].selected=rt),rt&&tt&&(_e[et].defaultSelected=!0)}else{for(et=""+Sa(et),_=null,rt=0;rt<_e.length;rt++){if(_e[rt].value===et){_e[rt].selected=!0,tt&&(_e[rt].defaultSelected=!0);return}_!==null||_e[rt].disabled||(_=_e[rt])}_!==null&&(_.selected=!0)}}function gb(_e,_){if(_.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$1({},_,{value:void 0,defaultValue:void 0,children:""+_e._wrapperState.initialValue})}function hb(_e,_){var et=_.value;if(et==null){if(et=_.children,_=_.defaultValue,et!=null){if(_!=null)throw Error(p$2(92));if(eb(et)){if(1<et.length)throw Error(p$2(93));et=et[0]}_=et}_==null&&(_=""),et=_}_e._wrapperState={initialValue:Sa(et)}}function ib(_e,_){var et=Sa(_.value),tt=Sa(_.defaultValue);et!=null&&(et=""+et,et!==_e.value&&(_e.value=et),_.defaultValue==null&&_e.defaultValue!==et&&(_e.defaultValue=et)),tt!=null&&(_e.defaultValue=""+tt)}function jb(_e){var _=_e.textContent;_===_e._wrapperState.initialValue&&_!==""&&_!==null&&(_e.value=_)}function kb(_e){switch(_e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_e,_){return _e==null||_e==="http://www.w3.org/1999/xhtml"?kb(_):_e==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":_e}var mb,nb=function(_e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,et,tt,rt){MSApp.execUnsafeLocalFunction(function(){return _e(_,et,tt,rt)})}:_e}(function(_e,_){if(_e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _e)_e.innerHTML=_;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=mb.firstChild;_e.firstChild;)_e.removeChild(_e.firstChild);for(;_.firstChild;)_e.appendChild(_.firstChild)}});function ob(_e,_){if(_){var et=_e.firstChild;if(et&&et===_e.lastChild&&et.nodeType===3){et.nodeValue=_;return}}_e.textContent=_}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_e){qb.forEach(function(_){_=_+_e.charAt(0).toUpperCase()+_e.substring(1),pb[_]=pb[_e]})});function rb(_e,_,et){return _==null||typeof _=="boolean"||_===""?"":et||typeof _!="number"||_===0||pb.hasOwnProperty(_e)&&pb[_e]?(""+_).trim():_+"px"}function sb(_e,_){_e=_e.style;for(var et in _)if(_.hasOwnProperty(et)){var tt=et.indexOf("--")===0,rt=rb(et,_[et],tt);et==="float"&&(et="cssFloat"),tt?_e.setProperty(et,rt):_e[et]=rt}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_e,_){if(_){if(tb[_e]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(p$2(137,_e));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(p$2(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(p$2(61))}if(_.style!=null&&typeof _.style!="object")throw Error(p$2(62))}}function vb(_e,_){if(_e.indexOf("-")===-1)return typeof _.is=="string";switch(_e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_e){return _e=_e.target||_e.srcElement||window,_e.correspondingUseElement&&(_e=_e.correspondingUseElement),_e.nodeType===3?_e.parentNode:_e}var yb=null,zb=null,Ab=null;function Bb(_e){if(_e=Cb(_e)){if(typeof yb!="function")throw Error(p$2(280));var _=_e.stateNode;_&&(_=Db(_),yb(_e.stateNode,_e.type,_))}}function Eb(_e){zb?Ab?Ab.push(_e):Ab=[_e]:zb=_e}function Fb(){if(zb){var _e=zb,_=Ab;if(Ab=zb=null,Bb(_e),_)for(_e=0;_e<_.length;_e++)Bb(_[_e])}}function Gb(_e,_){return _e(_)}function Hb(){}var Ib=!1;function Jb(_e,_,et){if(Ib)return _e(_,et);Ib=!0;try{return Gb(_e,_,et)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_e,_){var et=_e.stateNode;if(et===null)return null;var tt=Db(et);if(tt===null)return null;et=tt[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(tt=!tt.disabled)||(_e=_e.type,tt=!(_e==="button"||_e==="input"||_e==="select"||_e==="textarea")),_e=!tt;break e;default:_e=!1}if(_e)return null;if(et&&typeof et!="function")throw Error(p$2(231,_,typeof et));return et}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_e,_,et,tt,rt,nt,ot,at,lt){var ct=Array.prototype.slice.call(arguments,3);try{_.apply(et,ct)}catch(dt){this.onError(dt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_e){Ob=!0,Pb=_e}};function Tb(_e,_,et,tt,rt,nt,ot,at,lt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_e,_,et,tt,rt,nt,ot,at,lt){if(Tb.apply(this,arguments),Ob){if(Ob){var ct=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=ct)}}function Vb(_e){var _=_e,et=_e;if(_e.alternate)for(;_.return;)_=_.return;else{_e=_;do _=_e,_.flags&4098&&(et=_.return),_e=_.return;while(_e)}return _.tag===3?et:null}function Wb(_e){if(_e.tag===13){var _=_e.memoizedState;if(_===null&&(_e=_e.alternate,_e!==null&&(_=_e.memoizedState)),_!==null)return _.dehydrated}return null}function Xb(_e){if(Vb(_e)!==_e)throw Error(p$2(188))}function Yb(_e){var _=_e.alternate;if(!_){if(_=Vb(_e),_===null)throw Error(p$2(188));return _!==_e?null:_e}for(var et=_e,tt=_;;){var rt=et.return;if(rt===null)break;var nt=rt.alternate;if(nt===null){if(tt=rt.return,tt!==null){et=tt;continue}break}if(rt.child===nt.child){for(nt=rt.child;nt;){if(nt===et)return Xb(rt),_e;if(nt===tt)return Xb(rt),_;nt=nt.sibling}throw Error(p$2(188))}if(et.return!==tt.return)et=rt,tt=nt;else{for(var ot=!1,at=rt.child;at;){if(at===et){ot=!0,et=rt,tt=nt;break}if(at===tt){ot=!0,tt=rt,et=nt;break}at=at.sibling}if(!ot){for(at=nt.child;at;){if(at===et){ot=!0,et=nt,tt=rt;break}if(at===tt){ot=!0,tt=nt,et=rt;break}at=at.sibling}if(!ot)throw Error(p$2(189))}}if(et.alternate!==tt)throw Error(p$2(190))}if(et.tag!==3)throw Error(p$2(188));return et.stateNode.current===et?_e:_}function Zb(_e){return _e=Yb(_e),_e!==null?$b(_e):null}function $b(_e){if(_e.tag===5||_e.tag===6)return _e;for(_e=_e.child;_e!==null;){var _=$b(_e);if(_!==null)return _;_e=_e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(_e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,_e,void 0,(_e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_e){return _e>>>=0,_e===0?32:31-(pc(_e)/qc|0)|0}var rc=64,sc=4194304;function tc(_e){switch(_e&-_e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _e}}function uc(_e,_){var et=_e.pendingLanes;if(et===0)return 0;var tt=0,rt=_e.suspendedLanes,nt=_e.pingedLanes,ot=et&268435455;if(ot!==0){var at=ot&~rt;at!==0?tt=tc(at):(nt&=ot,nt!==0&&(tt=tc(nt)))}else ot=et&~rt,ot!==0?tt=tc(ot):nt!==0&&(tt=tc(nt));if(tt===0)return 0;if(_!==0&&_!==tt&&!(_&rt)&&(rt=tt&-tt,nt=_&-_,rt>=nt||rt===16&&(nt&4194240)!==0))return _;if(tt&4&&(tt|=et&16),_=_e.entangledLanes,_!==0)for(_e=_e.entanglements,_&=tt;0<_;)et=31-oc(_),rt=1<<et,tt|=_e[et],_&=~rt;return tt}function vc(_e,_){switch(_e){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_e,_){for(var et=_e.suspendedLanes,tt=_e.pingedLanes,rt=_e.expirationTimes,nt=_e.pendingLanes;0<nt;){var ot=31-oc(nt),at=1<<ot,lt=rt[ot];lt===-1?(!(at&et)||at&tt)&&(rt[ot]=vc(at,_)):lt<=_&&(_e.expiredLanes|=at),nt&=~at}}function xc(_e){return _e=_e.pendingLanes&-1073741825,_e!==0?_e:_e&1073741824?1073741824:0}function yc(){var _e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_e}function zc(_e){for(var _=[],et=0;31>et;et++)_.push(_e);return _}function Ac(_e,_,et){_e.pendingLanes|=_,_!==536870912&&(_e.suspendedLanes=0,_e.pingedLanes=0),_e=_e.eventTimes,_=31-oc(_),_e[_]=et}function Bc(_e,_){var et=_e.pendingLanes&~_;_e.pendingLanes=_,_e.suspendedLanes=0,_e.pingedLanes=0,_e.expiredLanes&=_,_e.mutableReadLanes&=_,_e.entangledLanes&=_,_=_e.entanglements;var tt=_e.eventTimes;for(_e=_e.expirationTimes;0<et;){var rt=31-oc(et),nt=1<<rt;_[rt]=0,tt[rt]=-1,_e[rt]=-1,et&=~nt}}function Cc(_e,_){var et=_e.entangledLanes|=_;for(_e=_e.entanglements;et;){var tt=31-oc(et),rt=1<<tt;rt&_|_e[tt]&_&&(_e[tt]|=_),et&=~rt}}var C=0;function Dc(_e){return _e&=-_e,1<_e?4<_e?_e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_e,_){switch(_e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_.pointerId)}}function Tc(_e,_,et,tt,rt,nt){return _e===null||_e.nativeEvent!==nt?(_e={blockedOn:_,domEventName:et,eventSystemFlags:tt,nativeEvent:nt,targetContainers:[rt]},_!==null&&(_=Cb(_),_!==null&&Fc(_)),_e):(_e.eventSystemFlags|=tt,_=_e.targetContainers,rt!==null&&_.indexOf(rt)===-1&&_.push(rt),_e)}function Uc(_e,_,et,tt,rt){switch(_){case"focusin":return Lc=Tc(Lc,_e,_,et,tt,rt),!0;case"dragenter":return Mc=Tc(Mc,_e,_,et,tt,rt),!0;case"mouseover":return Nc=Tc(Nc,_e,_,et,tt,rt),!0;case"pointerover":var nt=rt.pointerId;return Oc.set(nt,Tc(Oc.get(nt)||null,_e,_,et,tt,rt)),!0;case"gotpointercapture":return nt=rt.pointerId,Pc.set(nt,Tc(Pc.get(nt)||null,_e,_,et,tt,rt)),!0}return!1}function Vc(_e){var _=Wc(_e.target);if(_!==null){var et=Vb(_);if(et!==null){if(_=et.tag,_===13){if(_=Wb(et),_!==null){_e.blockedOn=_,Ic(_e.priority,function(){Gc(et)});return}}else if(_===3&&et.stateNode.current.memoizedState.isDehydrated){_e.blockedOn=et.tag===3?et.stateNode.containerInfo:null;return}}}_e.blockedOn=null}function Xc(_e){if(_e.blockedOn!==null)return!1;for(var _=_e.targetContainers;0<_.length;){var et=Yc(_e.domEventName,_e.eventSystemFlags,_[0],_e.nativeEvent);if(et===null){et=_e.nativeEvent;var tt=new et.constructor(et.type,et);wb=tt,et.target.dispatchEvent(tt),wb=null}else return _=Cb(et),_!==null&&Fc(_),_e.blockedOn=et,!1;_.shift()}return!0}function Zc(_e,_,et){Xc(_e)&&et.delete(_)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_e,_){_e.blockedOn===_&&(_e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_e){function _(rt){return ad(rt,_e)}if(0<Kc.length){ad(Kc[0],_e);for(var et=1;et<Kc.length;et++){var tt=Kc[et];tt.blockedOn===_e&&(tt.blockedOn=null)}}for(Lc!==null&&ad(Lc,_e),Mc!==null&&ad(Mc,_e),Nc!==null&&ad(Nc,_e),Oc.forEach(_),Pc.forEach(_),et=0;et<Qc.length;et++)tt=Qc[et],tt.blockedOn===_e&&(tt.blockedOn=null);for(;0<Qc.length&&(et=Qc[0],et.blockedOn===null);)Vc(et),et.blockedOn===null&&Qc.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(_e,_,et,tt){var rt=C,nt=cd.transition;cd.transition=null;try{C=1,fd(_e,_,et,tt)}finally{C=rt,cd.transition=nt}}function gd(_e,_,et,tt){var rt=C,nt=cd.transition;cd.transition=null;try{C=4,fd(_e,_,et,tt)}finally{C=rt,cd.transition=nt}}function fd(_e,_,et,tt){if(dd){var rt=Yc(_e,_,et,tt);if(rt===null)hd(_e,_,tt,id,et),Sc(_e,tt);else if(Uc(rt,_e,_,et,tt))tt.stopPropagation();else if(Sc(_e,tt),_&4&&-1<Rc.indexOf(_e)){for(;rt!==null;){var nt=Cb(rt);if(nt!==null&&Ec(nt),nt=Yc(_e,_,et,tt),nt===null&&hd(_e,_,tt,id,et),nt===rt)break;rt=nt}rt!==null&&tt.stopPropagation()}else hd(_e,_,tt,null,et)}}var id=null;function Yc(_e,_,et,tt){if(id=null,_e=xb(tt),_e=Wc(_e),_e!==null)if(_=Vb(_e),_===null)_e=null;else if(et=_.tag,et===13){if(_e=Wb(_),_e!==null)return _e;_e=null}else if(et===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;_e=null}else _!==_e&&(_e=null);return id=_e,null}function jd(_e){switch(_e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _e,_=ld,et=_.length,tt,rt="value"in kd?kd.value:kd.textContent,nt=rt.length;for(_e=0;_e<et&&_[_e]===rt[_e];_e++);var ot=et-_e;for(tt=1;tt<=ot&&_[et-tt]===rt[nt-tt];tt++);return md=rt.slice(_e,1<tt?1-tt:void 0)}function od(_e){var _=_e.keyCode;return"charCode"in _e?(_e=_e.charCode,_e===0&&_===13&&(_e=13)):_e=_,_e===10&&(_e=13),32<=_e||_e===13?_e:0}function pd(){return!0}function qd(){return!1}function rd(_e){function _(et,tt,rt,nt,ot){this._reactName=et,this._targetInst=rt,this.type=tt,this.nativeEvent=nt,this.target=ot,this.currentTarget=null;for(var at in _e)_e.hasOwnProperty(at)&&(et=_e[at],this[at]=et?et(nt):nt[at]);return this.isDefaultPrevented=(nt.defaultPrevented!=null?nt.defaultPrevented:nt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var et=this.nativeEvent;et&&(et.preventDefault?et.preventDefault():typeof et.returnValue!="unknown"&&(et.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var et=this.nativeEvent;et&&(et.stopPropagation?et.stopPropagation():typeof et.cancelBubble!="unknown"&&(et.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_e){return _e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_e){return _e.relatedTarget===void 0?_e.fromElement===_e.srcElement?_e.toElement:_e.fromElement:_e.relatedTarget},movementX:function(_e){return"movementX"in _e?_e.movementX:(_e!==yd&&(yd&&_e.type==="mousemove"?(wd=_e.screenX-yd.screenX,xd=_e.screenY-yd.screenY):xd=wd=0,yd=_e),wd)},movementY:function(_e){return"movementY"in _e?_e.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(_e){return"clipboardData"in _e?_e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_e){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(_e):(_e=Od[_e])?!!_[_e]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(_e){if(_e.key){var _=Md[_e.key]||_e.key;if(_!=="Unidentified")return _}return _e.type==="keypress"?(_e=od(_e),_e===13?"Enter":String.fromCharCode(_e)):_e.type==="keydown"||_e.type==="keyup"?Nd[_e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_e){return _e.type==="keypress"?od(_e):0},keyCode:function(_e){return _e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0},which:function(_e){return _e.type==="keypress"?od(_e):_e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(_e){return"deltaX"in _e?_e.deltaX:"wheelDeltaX"in _e?-_e.wheelDeltaX:0},deltaY:function(_e){return"deltaY"in _e?_e.deltaY:"wheelDeltaY"in _e?-_e.wheelDeltaY:"wheelDelta"in _e?-_e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(_e,_){switch(_e){case"keyup":return $d.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(_e){return _e=_e.detail,typeof _e=="object"&&"data"in _e?_e.data:null}var ie=!1;function je(_e,_){switch(_e){case"compositionend":return he(_);case"keypress":return _.which!==32?null:(fe=!0,ee);case"textInput":return _e=_.data,_e===ee&&fe?null:_e;default:return null}}function ke(_e,_){if(ie)return _e==="compositionend"||!ae&&ge(_e,_)?(_e=nd(),md=ld=kd=null,ie=!1,_e):null;switch(_e){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return de&&_.locale!=="ko"?null:_.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(_e){var _=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return _==="input"?!!le[_e.type]:_==="textarea"}function ne(_e,_,et,tt){Eb(tt),_=oe(_,"onChange"),0<_.length&&(et=new td("onChange","change",null,et,tt),_e.push({event:et,listeners:_}))}var pe=null,qe=null;function re(_e){se(_e,0)}function te(_e){var _=ue(_e);if(Wa(_))return _e}function ve(_e,_){if(_e==="change")return _}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(_e){if(_e.propertyName==="value"&&te(qe)){var _=[];ne(_,qe,_e,xb(_e)),Jb(re,_)}}function Ce(_e,_,et){_e==="focusin"?(Ae(),pe=_,qe=et,pe.attachEvent("onpropertychange",Be)):_e==="focusout"&&Ae()}function De(_e){if(_e==="selectionchange"||_e==="keyup"||_e==="keydown")return te(qe)}function Ee(_e,_){if(_e==="click")return te(_)}function Fe(_e,_){if(_e==="input"||_e==="change")return te(_)}function Ge(_e,_){return _e===_&&(_e!==0||1/_e===1/_)||_e!==_e&&_!==_}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(_e,_){if(He(_e,_))return!0;if(typeof _e!="object"||_e===null||typeof _!="object"||_===null)return!1;var et=Object.keys(_e),tt=Object.keys(_);if(et.length!==tt.length)return!1;for(tt=0;tt<et.length;tt++){var rt=et[tt];if(!ja.call(_,rt)||!He(_e[rt],_[rt]))return!1}return!0}function Je(_e){for(;_e&&_e.firstChild;)_e=_e.firstChild;return _e}function Ke(_e,_){var et=Je(_e);_e=0;for(var tt;et;){if(et.nodeType===3){if(tt=_e+et.textContent.length,_e<=_&&tt>=_)return{node:et,offset:_-_e};_e=tt}e:{for(;et;){if(et.nextSibling){et=et.nextSibling;break e}et=et.parentNode}et=void 0}et=Je(et)}}function Le(_e,_){return _e&&_?_e===_?!0:_e&&_e.nodeType===3?!1:_&&_.nodeType===3?Le(_e,_.parentNode):"contains"in _e?_e.contains(_):_e.compareDocumentPosition?!!(_e.compareDocumentPosition(_)&16):!1:!1}function Me(){for(var _e=window,_=Xa();_ instanceof _e.HTMLIFrameElement;){try{var et=typeof _.contentWindow.location.href=="string"}catch{et=!1}if(et)_e=_.contentWindow;else break;_=Xa(_e.document)}return _}function Ne(_e){var _=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return _&&(_==="input"&&(_e.type==="text"||_e.type==="search"||_e.type==="tel"||_e.type==="url"||_e.type==="password")||_==="textarea"||_e.contentEditable==="true")}function Oe(_e){var _=Me(),et=_e.focusedElem,tt=_e.selectionRange;if(_!==et&&et&&et.ownerDocument&&Le(et.ownerDocument.documentElement,et)){if(tt!==null&&Ne(et)){if(_=tt.start,_e=tt.end,_e===void 0&&(_e=_),"selectionStart"in et)et.selectionStart=_,et.selectionEnd=Math.min(_e,et.value.length);else if(_e=(_=et.ownerDocument||document)&&_.defaultView||window,_e.getSelection){_e=_e.getSelection();var rt=et.textContent.length,nt=Math.min(tt.start,rt);tt=tt.end===void 0?nt:Math.min(tt.end,rt),!_e.extend&&nt>tt&&(rt=tt,tt=nt,nt=rt),rt=Ke(et,nt);var ot=Ke(et,tt);rt&&ot&&(_e.rangeCount!==1||_e.anchorNode!==rt.node||_e.anchorOffset!==rt.offset||_e.focusNode!==ot.node||_e.focusOffset!==ot.offset)&&(_=_.createRange(),_.setStart(rt.node,rt.offset),_e.removeAllRanges(),nt>tt?(_e.addRange(_),_e.extend(ot.node,ot.offset)):(_.setEnd(ot.node,ot.offset),_e.addRange(_)))}}for(_=[],_e=et;_e=_e.parentNode;)_e.nodeType===1&&_.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof et.focus=="function"&&et.focus(),et=0;et<_.length;et++)_e=_[et],_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(_e,_,et){var tt=et.window===et?et.document:et.nodeType===9?et:et.ownerDocument;Te||Qe==null||Qe!==Xa(tt)||(tt=Qe,"selectionStart"in tt&&Ne(tt)?tt={start:tt.selectionStart,end:tt.selectionEnd}:(tt=(tt.ownerDocument&&tt.ownerDocument.defaultView||window).getSelection(),tt={anchorNode:tt.anchorNode,anchorOffset:tt.anchorOffset,focusNode:tt.focusNode,focusOffset:tt.focusOffset}),Se&&Ie(Se,tt)||(Se=tt,tt=oe(Re,"onSelect"),0<tt.length&&(_=new td("onSelect","select",null,_,et),_e.push({event:_,listeners:tt}),_.target=Qe)))}function Ve(_e,_){var et={};return et[_e.toLowerCase()]=_.toLowerCase(),et["Webkit"+_e]="webkit"+_,et["Moz"+_e]="moz"+_,et}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(_e){if(Xe[_e])return Xe[_e];if(!We[_e])return _e;var _=We[_e],et;for(et in _)if(_.hasOwnProperty(et)&&et in Ye)return Xe[_e]=_[et];return _e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_e,_){df.set(_e,_),fa(_,[_e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_e,_,et){var tt=_e.type||"unknown-event";_e.currentTarget=et,Ub(tt,_,void 0,_e),_e.currentTarget=null}function se(_e,_){_=(_&4)!==0;for(var et=0;et<_e.length;et++){var tt=_e[et],rt=tt.event;tt=tt.listeners;e:{var nt=void 0;if(_)for(var ot=tt.length-1;0<=ot;ot--){var at=tt[ot],lt=at.instance,ct=at.currentTarget;if(at=at.listener,lt!==nt&&rt.isPropagationStopped())break e;nf(rt,at,ct),nt=lt}else for(ot=0;ot<tt.length;ot++){if(at=tt[ot],lt=at.instance,ct=at.currentTarget,at=at.listener,lt!==nt&&rt.isPropagationStopped())break e;nf(rt,at,ct),nt=lt}}}if(Qb)throw _e=Rb,Qb=!1,Rb=null,_e}function D(_e,_){var et=_[of];et===void 0&&(et=_[of]=new Set);var tt=_e+"__bubble";et.has(tt)||(pf(_,_e,2,!1),et.add(tt))}function qf(_e,_,et){var tt=0;_&&(tt|=4),pf(et,_e,tt,_)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_e){if(!_e[rf]){_e[rf]=!0,da.forEach(function(et){et!=="selectionchange"&&(mf.has(et)||qf(et,!1,_e),qf(et,!0,_e))});var _=_e.nodeType===9?_e:_e.ownerDocument;_===null||_[rf]||(_[rf]=!0,qf("selectionchange",!1,_))}}function pf(_e,_,et,tt){switch(jd(_)){case 1:var rt=ed;break;case 4:rt=gd;break;default:rt=fd}et=rt.bind(null,_,et,_e),rt=void 0,!Lb||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(rt=!0),tt?rt!==void 0?_e.addEventListener(_,et,{capture:!0,passive:rt}):_e.addEventListener(_,et,!0):rt!==void 0?_e.addEventListener(_,et,{passive:rt}):_e.addEventListener(_,et,!1)}function hd(_e,_,et,tt,rt){var nt=tt;if(!(_&1)&&!(_&2)&&tt!==null)e:for(;;){if(tt===null)return;var ot=tt.tag;if(ot===3||ot===4){var at=tt.stateNode.containerInfo;if(at===rt||at.nodeType===8&&at.parentNode===rt)break;if(ot===4)for(ot=tt.return;ot!==null;){var lt=ot.tag;if((lt===3||lt===4)&&(lt=ot.stateNode.containerInfo,lt===rt||lt.nodeType===8&&lt.parentNode===rt))return;ot=ot.return}for(;at!==null;){if(ot=Wc(at),ot===null)return;if(lt=ot.tag,lt===5||lt===6){tt=nt=ot;continue e}at=at.parentNode}}tt=tt.return}Jb(function(){var ct=nt,dt=xb(et),st=[];e:{var it=df.get(_e);if(it!==void 0){var ut=td,ht=_e;switch(_e){case"keypress":if(od(et)===0)break e;case"keydown":case"keyup":ut=Rd;break;case"focusin":ht="focus",ut=Fd;break;case"focusout":ht="blur",ut=Fd;break;case"beforeblur":case"afterblur":ut=Fd;break;case"click":if(et.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ut=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ut=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ut=Vd;break;case $e:case af:case bf:ut=Hd;break;case cf:ut=Xd;break;case"scroll":ut=vd;break;case"wheel":ut=Zd;break;case"copy":case"cut":case"paste":ut=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ut=Td}var ft=(_&4)!==0,gt=!ft&&_e==="scroll",mt=ft?it!==null?it+"Capture":null:it;ft=[];for(var yt=ct,bt;yt!==null;){bt=yt;var vt=bt.stateNode;if(bt.tag===5&&vt!==null&&(bt=vt,mt!==null&&(vt=Kb(yt,mt),vt!=null&&ft.push(tf(yt,vt,bt)))),gt)break;yt=yt.return}0<ft.length&&(it=new ut(it,ht,null,et,dt),st.push({event:it,listeners:ft}))}}if(!(_&7)){e:{if(it=_e==="mouseover"||_e==="pointerover",ut=_e==="mouseout"||_e==="pointerout",it&&et!==wb&&(ht=et.relatedTarget||et.fromElement)&&(Wc(ht)||ht[uf]))break e;if((ut||it)&&(it=dt.window===dt?dt:(it=dt.ownerDocument)?it.defaultView||it.parentWindow:window,ut?(ht=et.relatedTarget||et.toElement,ut=ct,ht=ht?Wc(ht):null,ht!==null&&(gt=Vb(ht),ht!==gt||ht.tag!==5&&ht.tag!==6)&&(ht=null)):(ut=null,ht=ct),ut!==ht)){if(ft=Bd,vt="onMouseLeave",mt="onMouseEnter",yt="mouse",(_e==="pointerout"||_e==="pointerover")&&(ft=Td,vt="onPointerLeave",mt="onPointerEnter",yt="pointer"),gt=ut==null?it:ue(ut),bt=ht==null?it:ue(ht),it=new ft(vt,yt+"leave",ut,et,dt),it.target=gt,it.relatedTarget=bt,vt=null,Wc(dt)===ct&&(ft=new ft(mt,yt+"enter",ht,et,dt),ft.target=bt,ft.relatedTarget=gt,vt=ft),gt=vt,ut&&ht)t:{for(ft=ut,mt=ht,yt=0,bt=ft;bt;bt=vf(bt))yt++;for(bt=0,vt=mt;vt;vt=vf(vt))bt++;for(;0<yt-bt;)ft=vf(ft),yt--;for(;0<bt-yt;)mt=vf(mt),bt--;for(;yt--;){if(ft===mt||mt!==null&&ft===mt.alternate)break t;ft=vf(ft),mt=vf(mt)}ft=null}else ft=null;ut!==null&&wf(st,it,ut,ft,!1),ht!==null&&gt!==null&&wf(st,gt,ht,ft,!0)}}e:{if(it=ct?ue(ct):window,ut=it.nodeName&&it.nodeName.toLowerCase(),ut==="select"||ut==="input"&&it.type==="file")var xt=ve;else if(me(it))if(we)xt=Fe;else{xt=De;var wt=Ce}else(ut=it.nodeName)&&ut.toLowerCase()==="input"&&(it.type==="checkbox"||it.type==="radio")&&(xt=Ee);if(xt&&(xt=xt(_e,ct))){ne(st,xt,et,dt);break e}wt&&wt(_e,it,ct),_e==="focusout"&&(wt=it._wrapperState)&&wt.controlled&&it.type==="number"&&cb(it,"number",it.value)}switch(wt=ct?ue(ct):window,_e){case"focusin":(me(wt)||wt.contentEditable==="true")&&(Qe=wt,Re=ct,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(st,et,dt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(st,et,dt)}var St;if(ae)e:{switch(_e){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else ie?ge(_e,et)&&(Et="onCompositionEnd"):_e==="keydown"&&et.keyCode===229&&(Et="onCompositionStart");Et&&(de&&et.locale!=="ko"&&(ie||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&ie&&(St=nd()):(kd=dt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),wt=oe(ct,Et),0<wt.length&&(Et=new Ld(Et,_e,null,et,dt),st.push({event:Et,listeners:wt}),St?Et.data=St:(St=he(et),St!==null&&(Et.data=St)))),(St=ce?je(_e,et):ke(_e,et))&&(ct=oe(ct,"onBeforeInput"),0<ct.length&&(dt=new Ld("onBeforeInput","beforeinput",null,et,dt),st.push({event:dt,listeners:ct}),dt.data=St))}se(st,_)})}function tf(_e,_,et){return{instance:_e,listener:_,currentTarget:et}}function oe(_e,_){for(var et=_+"Capture",tt=[];_e!==null;){var rt=_e,nt=rt.stateNode;rt.tag===5&&nt!==null&&(rt=nt,nt=Kb(_e,et),nt!=null&&tt.unshift(tf(_e,nt,rt)),nt=Kb(_e,_),nt!=null&&tt.push(tf(_e,nt,rt))),_e=_e.return}return tt}function vf(_e){if(_e===null)return null;do _e=_e.return;while(_e&&_e.tag!==5);return _e||null}function wf(_e,_,et,tt,rt){for(var nt=_._reactName,ot=[];et!==null&&et!==tt;){var at=et,lt=at.alternate,ct=at.stateNode;if(lt!==null&&lt===tt)break;at.tag===5&&ct!==null&&(at=ct,rt?(lt=Kb(et,nt),lt!=null&&ot.unshift(tf(et,lt,at))):rt||(lt=Kb(et,nt),lt!=null&&ot.push(tf(et,lt,at)))),et=et.return}ot.length!==0&&_e.push({event:_,listeners:ot})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_e){return(typeof _e=="string"?_e:""+_e).replace(xf,`
`).replace(yf,"")}function Af(_e,_,et){if(_=zf(_),zf(_e)!==_&&et)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(_e,_){return _e==="textarea"||_e==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_e){return Hf.resolve(null).then(_e).catch(If)}:Ff;function If(_e){setTimeout(function(){throw _e})}function Kf(_e,_){var et=_,tt=0;do{var rt=et.nextSibling;if(_e.removeChild(et),rt&&rt.nodeType===8)if(et=rt.data,et==="/$"){if(tt===0){_e.removeChild(rt),bd(_);return}tt--}else et!=="$"&&et!=="$?"&&et!=="$!"||tt++;et=rt}while(et);bd(_)}function Lf(_e){for(;_e!=null;_e=_e.nextSibling){var _=_e.nodeType;if(_===1||_===3)break;if(_===8){if(_=_e.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return _e}function Mf(_e){_e=_e.previousSibling;for(var _=0;_e;){if(_e.nodeType===8){var et=_e.data;if(et==="$"||et==="$!"||et==="$?"){if(_===0)return _e;_--}else et==="/$"&&_++}_e=_e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_e){var _=_e[Of];if(_)return _;for(var et=_e.parentNode;et;){if(_=et[uf]||et[Of]){if(et=_.alternate,_.child!==null||et!==null&&et.child!==null)for(_e=Mf(_e);_e!==null;){if(et=_e[Of])return et;_e=Mf(_e)}return _}_e=et,et=_e.parentNode}return null}function Cb(_e){return _e=_e[Of]||_e[uf],!_e||_e.tag!==5&&_e.tag!==6&&_e.tag!==13&&_e.tag!==3?null:_e}function ue(_e){if(_e.tag===5||_e.tag===6)return _e.stateNode;throw Error(p$2(33))}function Db(_e){return _e[Pf]||null}var Sf=[],Tf=-1;function Uf(_e){return{current:_e}}function E(_e){0>Tf||(_e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(_e,_){Tf++,Sf[Tf]=_e.current,_e.current=_}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_e,_){var et=_e.type.contextTypes;if(!et)return Vf;var tt=_e.stateNode;if(tt&&tt.__reactInternalMemoizedUnmaskedChildContext===_)return tt.__reactInternalMemoizedMaskedChildContext;var rt={},nt;for(nt in et)rt[nt]=_[nt];return tt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=_,_e.__reactInternalMemoizedMaskedChildContext=rt),rt}function Zf(_e){return _e=_e.childContextTypes,_e!=null}function $f(){E(Wf),E(H$1)}function ag(_e,_,et){if(H$1.current!==Vf)throw Error(p$2(168));G(H$1,_),G(Wf,et)}function bg(_e,_,et){var tt=_e.stateNode;if(_=_.childContextTypes,typeof tt.getChildContext!="function")return et;tt=tt.getChildContext();for(var rt in tt)if(!(rt in _))throw Error(p$2(108,Ra(_e)||"Unknown",rt));return A$1({},et,tt)}function cg(_e){return _e=(_e=_e.stateNode)&&_e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G(H$1,_e),G(Wf,Wf.current),!0}function dg(_e,_,et){var tt=_e.stateNode;if(!tt)throw Error(p$2(169));et?(_e=bg(_e,_,Xf),tt.__reactInternalMemoizedMergedChildContext=_e,E(Wf),E(H$1),G(H$1,_e)):E(Wf),G(Wf,et)}var eg=null,fg=!1,gg=!1;function hg(_e){eg===null?eg=[_e]:eg.push(_e)}function ig(_e){fg=!0,hg(_e)}function jg(){if(!gg&&eg!==null){gg=!0;var _e=0,_=C;try{var et=eg;for(C=1;_e<et.length;_e++){var tt=et[_e];do tt=tt(!0);while(tt!==null)}eg=null,fg=!1}catch(rt){throw eg!==null&&(eg=eg.slice(_e+1)),ac(fc,jg),rt}finally{C=_,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_e,_){kg[lg++]=ng,kg[lg++]=mg,mg=_e,ng=_}function ug(_e,_,et){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_e;var tt=rg;_e=sg;var rt=32-oc(tt)-1;tt&=~(1<<rt),et+=1;var nt=32-oc(_)+rt;if(30<nt){var ot=rt-rt%5;nt=(tt&(1<<ot)-1).toString(32),tt>>=ot,rt-=ot,rg=1<<32-oc(_)+rt|et<<rt|tt,sg=nt+_e}else rg=1<<nt|et<<rt|tt,sg=_e}function vg(_e){_e.return!==null&&(tg(_e,1),ug(_e,1,0))}function wg(_e){for(;_e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(_e,_){var et=Bg(5,null,null,0);et.elementType="DELETED",et.stateNode=_,et.return=_e,_=_e.deletions,_===null?(_e.deletions=[et],_e.flags|=16):_.push(et)}function Cg(_e,_){switch(_e.tag){case 5:var et=_e.type;return _=_.nodeType!==1||et.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(_e.stateNode=_,xg=_e,yg=Lf(_.firstChild),!0):!1;case 6:return _=_e.pendingProps===""||_.nodeType!==3?null:_,_!==null?(_e.stateNode=_,xg=_e,yg=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(et=qg!==null?{id:rg,overflow:sg}:null,_e.memoizedState={dehydrated:_,treeContext:et,retryLane:1073741824},et=Bg(18,null,null,0),et.stateNode=_,et.return=_e,_e.child=et,xg=_e,yg=null,!0):!1;default:return!1}}function Dg(_e){return(_e.mode&1)!==0&&(_e.flags&128)===0}function Eg(_e){if(I){var _=yg;if(_){var et=_;if(!Cg(_e,_)){if(Dg(_e))throw Error(p$2(418));_=Lf(et.nextSibling);var tt=xg;_&&Cg(_e,_)?Ag(tt,et):(_e.flags=_e.flags&-4097|2,I=!1,xg=_e)}}else{if(Dg(_e))throw Error(p$2(418));_e.flags=_e.flags&-4097|2,I=!1,xg=_e}}}function Fg(_e){for(_e=_e.return;_e!==null&&_e.tag!==5&&_e.tag!==3&&_e.tag!==13;)_e=_e.return;xg=_e}function Gg(_e){if(_e!==xg)return!1;if(!I)return Fg(_e),I=!0,!1;var _;if((_=_e.tag!==3)&&!(_=_e.tag!==5)&&(_=_e.type,_=_!=="head"&&_!=="body"&&!Ef(_e.type,_e.memoizedProps)),_&&(_=yg)){if(Dg(_e))throw Hg(),Error(p$2(418));for(;_;)Ag(_e,_),_=Lf(_.nextSibling)}if(Fg(_e),_e.tag===13){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(p$2(317));e:{for(_e=_e.nextSibling,_=0;_e;){if(_e.nodeType===8){var et=_e.data;if(et==="/$"){if(_===0){yg=Lf(_e.nextSibling);break e}_--}else et!=="$"&&et!=="$!"&&et!=="$?"||_++}_e=_e.nextSibling}yg=null}}else yg=xg?Lf(_e.stateNode.nextSibling):null;return!0}function Hg(){for(var _e=yg;_e;)_e=Lf(_e.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(_e){zg===null?zg=[_e]:zg.push(_e)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(_e,_,et){if(_e=et.ref,_e!==null&&typeof _e!="function"&&typeof _e!="object"){if(et._owner){if(et=et._owner,et){if(et.tag!==1)throw Error(p$2(309));var tt=et.stateNode}if(!tt)throw Error(p$2(147,_e));var rt=tt,nt=""+_e;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===nt?_.ref:(_=function(ot){var at=rt.refs;ot===null?delete at[nt]:at[nt]=ot},_._stringRef=nt,_)}if(typeof _e!="string")throw Error(p$2(284));if(!et._owner)throw Error(p$2(290,_e))}return _e}function Mg(_e,_){throw _e=Object.prototype.toString.call(_),Error(p$2(31,_e==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":_e))}function Ng(_e){var _=_e._init;return _(_e._payload)}function Og(_e){function _(mt,yt){if(_e){var bt=mt.deletions;bt===null?(mt.deletions=[yt],mt.flags|=16):bt.push(yt)}}function et(mt,yt){if(!_e)return null;for(;yt!==null;)_(mt,yt),yt=yt.sibling;return null}function tt(mt,yt){for(mt=new Map;yt!==null;)yt.key!==null?mt.set(yt.key,yt):mt.set(yt.index,yt),yt=yt.sibling;return mt}function rt(mt,yt){return mt=Pg(mt,yt),mt.index=0,mt.sibling=null,mt}function nt(mt,yt,bt){return mt.index=bt,_e?(bt=mt.alternate,bt!==null?(bt=bt.index,bt<yt?(mt.flags|=2,yt):bt):(mt.flags|=2,yt)):(mt.flags|=1048576,yt)}function ot(mt){return _e&&mt.alternate===null&&(mt.flags|=2),mt}function at(mt,yt,bt,vt){return yt===null||yt.tag!==6?(yt=Qg(bt,mt.mode,vt),yt.return=mt,yt):(yt=rt(yt,bt),yt.return=mt,yt)}function lt(mt,yt,bt,vt){var xt=bt.type;return xt===ya?dt(mt,yt,bt.props.children,vt,bt.key):yt!==null&&(yt.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===Ha&&Ng(xt)===yt.type)?(vt=rt(yt,bt.props),vt.ref=Lg(mt,yt,bt),vt.return=mt,vt):(vt=Rg(bt.type,bt.key,bt.props,null,mt.mode,vt),vt.ref=Lg(mt,yt,bt),vt.return=mt,vt)}function ct(mt,yt,bt,vt){return yt===null||yt.tag!==4||yt.stateNode.containerInfo!==bt.containerInfo||yt.stateNode.implementation!==bt.implementation?(yt=Sg(bt,mt.mode,vt),yt.return=mt,yt):(yt=rt(yt,bt.children||[]),yt.return=mt,yt)}function dt(mt,yt,bt,vt,xt){return yt===null||yt.tag!==7?(yt=Tg(bt,mt.mode,vt,xt),yt.return=mt,yt):(yt=rt(yt,bt),yt.return=mt,yt)}function st(mt,yt,bt){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return yt=Qg(""+yt,mt.mode,bt),yt.return=mt,yt;if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:return bt=Rg(yt.type,yt.key,yt.props,null,mt.mode,bt),bt.ref=Lg(mt,null,yt),bt.return=mt,bt;case wa:return yt=Sg(yt,mt.mode,bt),yt.return=mt,yt;case Ha:var vt=yt._init;return st(mt,vt(yt._payload),bt)}if(eb(yt)||Ka(yt))return yt=Tg(yt,mt.mode,bt,null),yt.return=mt,yt;Mg(mt,yt)}return null}function it(mt,yt,bt,vt){var xt=yt!==null?yt.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number")return xt!==null?null:at(mt,yt,""+bt,vt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case va:return bt.key===xt?lt(mt,yt,bt,vt):null;case wa:return bt.key===xt?ct(mt,yt,bt,vt):null;case Ha:return xt=bt._init,it(mt,yt,xt(bt._payload),vt)}if(eb(bt)||Ka(bt))return xt!==null?null:dt(mt,yt,bt,vt,null);Mg(mt,bt)}return null}function ut(mt,yt,bt,vt,xt){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return mt=mt.get(bt)||null,at(yt,mt,""+vt,xt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case va:return mt=mt.get(vt.key===null?bt:vt.key)||null,lt(yt,mt,vt,xt);case wa:return mt=mt.get(vt.key===null?bt:vt.key)||null,ct(yt,mt,vt,xt);case Ha:var wt=vt._init;return ut(mt,yt,bt,wt(vt._payload),xt)}if(eb(vt)||Ka(vt))return mt=mt.get(bt)||null,dt(yt,mt,vt,xt,null);Mg(yt,vt)}return null}function ht(mt,yt,bt,vt){for(var xt=null,wt=null,St=yt,Et=yt=0,_t=null;St!==null&&Et<bt.length;Et++){St.index>Et?(_t=St,St=null):_t=St.sibling;var Tt=it(mt,St,bt[Et],vt);if(Tt===null){St===null&&(St=_t);break}_e&&St&&Tt.alternate===null&&_(mt,St),yt=nt(Tt,yt,Et),wt===null?xt=Tt:wt.sibling=Tt,wt=Tt,St=_t}if(Et===bt.length)return et(mt,St),I&&tg(mt,Et),xt;if(St===null){for(;Et<bt.length;Et++)St=st(mt,bt[Et],vt),St!==null&&(yt=nt(St,yt,Et),wt===null?xt=St:wt.sibling=St,wt=St);return I&&tg(mt,Et),xt}for(St=tt(mt,St);Et<bt.length;Et++)_t=ut(St,mt,Et,bt[Et],vt),_t!==null&&(_e&&_t.alternate!==null&&St.delete(_t.key===null?Et:_t.key),yt=nt(_t,yt,Et),wt===null?xt=_t:wt.sibling=_t,wt=_t);return _e&&St.forEach(function(Rt){return _(mt,Rt)}),I&&tg(mt,Et),xt}function ft(mt,yt,bt,vt){var xt=Ka(bt);if(typeof xt!="function")throw Error(p$2(150));if(bt=xt.call(bt),bt==null)throw Error(p$2(151));for(var wt=xt=null,St=yt,Et=yt=0,_t=null,Tt=bt.next();St!==null&&!Tt.done;Et++,Tt=bt.next()){St.index>Et?(_t=St,St=null):_t=St.sibling;var Rt=it(mt,St,Tt.value,vt);if(Rt===null){St===null&&(St=_t);break}_e&&St&&Rt.alternate===null&&_(mt,St),yt=nt(Rt,yt,Et),wt===null?xt=Rt:wt.sibling=Rt,wt=Rt,St=_t}if(Tt.done)return et(mt,St),I&&tg(mt,Et),xt;if(St===null){for(;!Tt.done;Et++,Tt=bt.next())Tt=st(mt,Tt.value,vt),Tt!==null&&(yt=nt(Tt,yt,Et),wt===null?xt=Tt:wt.sibling=Tt,wt=Tt);return I&&tg(mt,Et),xt}for(St=tt(mt,St);!Tt.done;Et++,Tt=bt.next())Tt=ut(St,mt,Et,Tt.value,vt),Tt!==null&&(_e&&Tt.alternate!==null&&St.delete(Tt.key===null?Et:Tt.key),yt=nt(Tt,yt,Et),wt===null?xt=Tt:wt.sibling=Tt,wt=Tt);return _e&&St.forEach(function(Ot){return _(mt,Ot)}),I&&tg(mt,Et),xt}function gt(mt,yt,bt,vt){if(typeof bt=="object"&&bt!==null&&bt.type===ya&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case va:e:{for(var xt=bt.key,wt=yt;wt!==null;){if(wt.key===xt){if(xt=bt.type,xt===ya){if(wt.tag===7){et(mt,wt.sibling),yt=rt(wt,bt.props.children),yt.return=mt,mt=yt;break e}}else if(wt.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===Ha&&Ng(xt)===wt.type){et(mt,wt.sibling),yt=rt(wt,bt.props),yt.ref=Lg(mt,wt,bt),yt.return=mt,mt=yt;break e}et(mt,wt);break}else _(mt,wt);wt=wt.sibling}bt.type===ya?(yt=Tg(bt.props.children,mt.mode,vt,bt.key),yt.return=mt,mt=yt):(vt=Rg(bt.type,bt.key,bt.props,null,mt.mode,vt),vt.ref=Lg(mt,yt,bt),vt.return=mt,mt=vt)}return ot(mt);case wa:e:{for(wt=bt.key;yt!==null;){if(yt.key===wt)if(yt.tag===4&&yt.stateNode.containerInfo===bt.containerInfo&&yt.stateNode.implementation===bt.implementation){et(mt,yt.sibling),yt=rt(yt,bt.children||[]),yt.return=mt,mt=yt;break e}else{et(mt,yt);break}else _(mt,yt);yt=yt.sibling}yt=Sg(bt,mt.mode,vt),yt.return=mt,mt=yt}return ot(mt);case Ha:return wt=bt._init,gt(mt,yt,wt(bt._payload),vt)}if(eb(bt))return ht(mt,yt,bt,vt);if(Ka(bt))return ft(mt,yt,bt,vt);Mg(mt,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"?(bt=""+bt,yt!==null&&yt.tag===6?(et(mt,yt.sibling),yt=rt(yt,bt),yt.return=mt,mt=yt):(et(mt,yt),yt=Qg(bt,mt.mode,vt),yt.return=mt,mt=yt),ot(mt)):et(mt,yt)}return gt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(_e){var _=Wg.current;E(Wg),_e._currentValue=_}function bh(_e,_,et){for(;_e!==null;){var tt=_e.alternate;if((_e.childLanes&_)!==_?(_e.childLanes|=_,tt!==null&&(tt.childLanes|=_)):tt!==null&&(tt.childLanes&_)!==_&&(tt.childLanes|=_),_e===et)break;_e=_e.return}}function ch(_e,_){Xg=_e,Zg=Yg=null,_e=_e.dependencies,_e!==null&&_e.firstContext!==null&&(_e.lanes&_&&(dh=!0),_e.firstContext=null)}function eh(_e){var _=_e._currentValue;if(Zg!==_e)if(_e={context:_e,memoizedValue:_,next:null},Yg===null){if(Xg===null)throw Error(p$2(308));Yg=_e,Xg.dependencies={lanes:0,firstContext:_e}}else Yg=Yg.next=_e;return _}var fh=null;function gh(_e){fh===null?fh=[_e]:fh.push(_e)}function hh(_e,_,et,tt){var rt=_.interleaved;return rt===null?(et.next=et,gh(_)):(et.next=rt.next,rt.next=et),_.interleaved=et,ih(_e,tt)}function ih(_e,_){_e.lanes|=_;var et=_e.alternate;for(et!==null&&(et.lanes|=_),et=_e,_e=_e.return;_e!==null;)_e.childLanes|=_,et=_e.alternate,et!==null&&(et.childLanes|=_),et=_e,_e=_e.return;return et.tag===3?et.stateNode:null}var jh=!1;function kh(_e){_e.updateQueue={baseState:_e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(_e,_){_e=_e.updateQueue,_.updateQueue===_e&&(_.updateQueue={baseState:_e.baseState,firstBaseUpdate:_e.firstBaseUpdate,lastBaseUpdate:_e.lastBaseUpdate,shared:_e.shared,effects:_e.effects})}function mh(_e,_){return{eventTime:_e,lane:_,tag:0,payload:null,callback:null,next:null}}function nh(_e,_,et){var tt=_e.updateQueue;if(tt===null)return null;if(tt=tt.shared,K&2){var rt=tt.pending;return rt===null?_.next=_:(_.next=rt.next,rt.next=_),tt.pending=_,ih(_e,et)}return rt=tt.interleaved,rt===null?(_.next=_,gh(tt)):(_.next=rt.next,rt.next=_),tt.interleaved=_,ih(_e,et)}function oh(_e,_,et){if(_=_.updateQueue,_!==null&&(_=_.shared,(et&4194240)!==0)){var tt=_.lanes;tt&=_e.pendingLanes,et|=tt,_.lanes=et,Cc(_e,et)}}function ph(_e,_){var et=_e.updateQueue,tt=_e.alternate;if(tt!==null&&(tt=tt.updateQueue,et===tt)){var rt=null,nt=null;if(et=et.firstBaseUpdate,et!==null){do{var ot={eventTime:et.eventTime,lane:et.lane,tag:et.tag,payload:et.payload,callback:et.callback,next:null};nt===null?rt=nt=ot:nt=nt.next=ot,et=et.next}while(et!==null);nt===null?rt=nt=_:nt=nt.next=_}else rt=nt=_;et={baseState:tt.baseState,firstBaseUpdate:rt,lastBaseUpdate:nt,shared:tt.shared,effects:tt.effects},_e.updateQueue=et;return}_e=et.lastBaseUpdate,_e===null?et.firstBaseUpdate=_:_e.next=_,et.lastBaseUpdate=_}function qh(_e,_,et,tt){var rt=_e.updateQueue;jh=!1;var nt=rt.firstBaseUpdate,ot=rt.lastBaseUpdate,at=rt.shared.pending;if(at!==null){rt.shared.pending=null;var lt=at,ct=lt.next;lt.next=null,ot===null?nt=ct:ot.next=ct,ot=lt;var dt=_e.alternate;dt!==null&&(dt=dt.updateQueue,at=dt.lastBaseUpdate,at!==ot&&(at===null?dt.firstBaseUpdate=ct:at.next=ct,dt.lastBaseUpdate=lt))}if(nt!==null){var st=rt.baseState;ot=0,dt=ct=lt=null,at=nt;do{var it=at.lane,ut=at.eventTime;if((tt&it)===it){dt!==null&&(dt=dt.next={eventTime:ut,lane:0,tag:at.tag,payload:at.payload,callback:at.callback,next:null});e:{var ht=_e,ft=at;switch(it=_,ut=et,ft.tag){case 1:if(ht=ft.payload,typeof ht=="function"){st=ht.call(ut,st,it);break e}st=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=ft.payload,it=typeof ht=="function"?ht.call(ut,st,it):ht,it==null)break e;st=A$1({},st,it);break e;case 2:jh=!0}}at.callback!==null&&at.lane!==0&&(_e.flags|=64,it=rt.effects,it===null?rt.effects=[at]:it.push(at))}else ut={eventTime:ut,lane:it,tag:at.tag,payload:at.payload,callback:at.callback,next:null},dt===null?(ct=dt=ut,lt=st):dt=dt.next=ut,ot|=it;if(at=at.next,at===null){if(at=rt.shared.pending,at===null)break;it=at,at=it.next,it.next=null,rt.lastBaseUpdate=it,rt.shared.pending=null}}while(!0);if(dt===null&&(lt=st),rt.baseState=lt,rt.firstBaseUpdate=ct,rt.lastBaseUpdate=dt,_=rt.shared.interleaved,_!==null){rt=_;do ot|=rt.lane,rt=rt.next;while(rt!==_)}else nt===null&&(rt.shared.lanes=0);rh|=ot,_e.lanes=ot,_e.memoizedState=st}}function sh(_e,_,et){if(_e=_.effects,_.effects=null,_e!==null)for(_=0;_<_e.length;_++){var tt=_e[_],rt=tt.callback;if(rt!==null){if(tt.callback=null,tt=et,typeof rt!="function")throw Error(p$2(191,rt));rt.call(tt)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(_e){if(_e===th)throw Error(p$2(174));return _e}function yh(_e,_){switch(G(wh,_),G(vh,_e),G(uh,th),_e=_.nodeType,_e){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:lb(null,"");break;default:_e=_e===8?_.parentNode:_,_=_e.namespaceURI||null,_e=_e.tagName,_=lb(_,_e)}E(uh),G(uh,_)}function zh(){E(uh),E(vh),E(wh)}function Ah(_e){xh(wh.current);var _=xh(uh.current),et=lb(_,_e.type);_!==et&&(G(vh,_e),G(uh,et))}function Bh(_e){vh.current===_e&&(E(uh),E(vh))}var L=Uf(0);function Ch(_e){for(var _=_e;_!==null;){if(_.tag===13){var et=_.memoizedState;if(et!==null&&(et=et.dehydrated,et===null||et.data==="$?"||et.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===_e)break;for(;_.sibling===null;){if(_.return===null||_.return===_e)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Dh=[];function Eh(){for(var _e=0;_e<Dh.length;_e++)Dh[_e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua$1.ReactCurrentDispatcher,Gh=ua$1.ReactCurrentBatchConfig,Hh=0,M$1=null,N$1=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p$2(321))}function Mh(_e,_){if(_===null)return!1;for(var et=0;et<_.length&&et<_e.length;et++)if(!He(_e[et],_[et]))return!1;return!0}function Nh(_e,_,et,tt,rt,nt){if(Hh=nt,M$1=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Fh.current=_e===null||_e.memoizedState===null?Oh:Ph,_e=et(tt,rt),Jh){nt=0;do{if(Jh=!1,Kh=0,25<=nt)throw Error(p$2(301));nt+=1,O=N$1=null,_.updateQueue=null,Fh.current=Qh,_e=et(tt,rt)}while(Jh)}if(Fh.current=Rh,_=N$1!==null&&N$1.next!==null,Hh=0,O=N$1=M$1=null,Ih=!1,_)throw Error(p$2(300));return _e}function Sh(){var _e=Kh!==0;return Kh=0,_e}function Th(){var _e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M$1.memoizedState=O=_e:O=O.next=_e,O}function Uh(){if(N$1===null){var _e=M$1.alternate;_e=_e!==null?_e.memoizedState:null}else _e=N$1.next;var _=O===null?M$1.memoizedState:O.next;if(_!==null)O=_,N$1=_e;else{if(_e===null)throw Error(p$2(310));N$1=_e,_e={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O===null?M$1.memoizedState=O=_e:O=O.next=_e}return O}function Vh(_e,_){return typeof _=="function"?_(_e):_}function Wh(_e){var _=Uh(),et=_.queue;if(et===null)throw Error(p$2(311));et.lastRenderedReducer=_e;var tt=N$1,rt=tt.baseQueue,nt=et.pending;if(nt!==null){if(rt!==null){var ot=rt.next;rt.next=nt.next,nt.next=ot}tt.baseQueue=rt=nt,et.pending=null}if(rt!==null){nt=rt.next,tt=tt.baseState;var at=ot=null,lt=null,ct=nt;do{var dt=ct.lane;if((Hh&dt)===dt)lt!==null&&(lt=lt.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),tt=ct.hasEagerState?ct.eagerState:_e(tt,ct.action);else{var st={lane:dt,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};lt===null?(at=lt=st,ot=tt):lt=lt.next=st,M$1.lanes|=dt,rh|=dt}ct=ct.next}while(ct!==null&&ct!==nt);lt===null?ot=tt:lt.next=at,He(tt,_.memoizedState)||(dh=!0),_.memoizedState=tt,_.baseState=ot,_.baseQueue=lt,et.lastRenderedState=tt}if(_e=et.interleaved,_e!==null){rt=_e;do nt=rt.lane,M$1.lanes|=nt,rh|=nt,rt=rt.next;while(rt!==_e)}else rt===null&&(et.lanes=0);return[_.memoizedState,et.dispatch]}function Xh(_e){var _=Uh(),et=_.queue;if(et===null)throw Error(p$2(311));et.lastRenderedReducer=_e;var tt=et.dispatch,rt=et.pending,nt=_.memoizedState;if(rt!==null){et.pending=null;var ot=rt=rt.next;do nt=_e(nt,ot.action),ot=ot.next;while(ot!==rt);He(nt,_.memoizedState)||(dh=!0),_.memoizedState=nt,_.baseQueue===null&&(_.baseState=nt),et.lastRenderedState=nt}return[nt,tt]}function Yh(){}function Zh(_e,_){var et=M$1,tt=Uh(),rt=_(),nt=!He(tt.memoizedState,rt);if(nt&&(tt.memoizedState=rt,dh=!0),tt=tt.queue,$h(ai.bind(null,et,tt,_e),[_e]),tt.getSnapshot!==_||nt||O!==null&&O.memoizedState.tag&1){if(et.flags|=2048,bi(9,ci.bind(null,et,tt,rt,_),void 0,null),Q===null)throw Error(p$2(349));Hh&30||di(et,_,rt)}return rt}function di(_e,_,et){_e.flags|=16384,_e={getSnapshot:_,value:et},_=M$1.updateQueue,_===null?(_={lastEffect:null,stores:null},M$1.updateQueue=_,_.stores=[_e]):(et=_.stores,et===null?_.stores=[_e]:et.push(_e))}function ci(_e,_,et,tt){_.value=et,_.getSnapshot=tt,ei(_)&&fi(_e)}function ai(_e,_,et){return et(function(){ei(_)&&fi(_e)})}function ei(_e){var _=_e.getSnapshot;_e=_e.value;try{var et=_();return!He(_e,et)}catch{return!0}}function fi(_e){var _=ih(_e,1);_!==null&&gi(_,_e,1,-1)}function hi(_e){var _=Th();return typeof _e=="function"&&(_e=_e()),_.memoizedState=_.baseState=_e,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:_e},_.queue=_e,_e=_e.dispatch=ii.bind(null,M$1,_e),[_.memoizedState,_e]}function bi(_e,_,et,tt){return _e={tag:_e,create:_,destroy:et,deps:tt,next:null},_=M$1.updateQueue,_===null?(_={lastEffect:null,stores:null},M$1.updateQueue=_,_.lastEffect=_e.next=_e):(et=_.lastEffect,et===null?_.lastEffect=_e.next=_e:(tt=et.next,et.next=_e,_e.next=tt,_.lastEffect=_e)),_e}function ji(){return Uh().memoizedState}function ki(_e,_,et,tt){var rt=Th();M$1.flags|=_e,rt.memoizedState=bi(1|_,et,void 0,tt===void 0?null:tt)}function li(_e,_,et,tt){var rt=Uh();tt=tt===void 0?null:tt;var nt=void 0;if(N$1!==null){var ot=N$1.memoizedState;if(nt=ot.destroy,tt!==null&&Mh(tt,ot.deps)){rt.memoizedState=bi(_,et,nt,tt);return}}M$1.flags|=_e,rt.memoizedState=bi(1|_,et,nt,tt)}function mi(_e,_){return ki(8390656,8,_e,_)}function $h(_e,_){return li(2048,8,_e,_)}function ni(_e,_){return li(4,2,_e,_)}function oi(_e,_){return li(4,4,_e,_)}function pi(_e,_){if(typeof _=="function")return _e=_e(),_(_e),function(){_(null)};if(_!=null)return _e=_e(),_.current=_e,function(){_.current=null}}function qi(_e,_,et){return et=et!=null?et.concat([_e]):null,li(4,4,pi.bind(null,_,_e),et)}function ri(){}function si(_e,_){var et=Uh();_=_===void 0?null:_;var tt=et.memoizedState;return tt!==null&&_!==null&&Mh(_,tt[1])?tt[0]:(et.memoizedState=[_e,_],_e)}function ti(_e,_){var et=Uh();_=_===void 0?null:_;var tt=et.memoizedState;return tt!==null&&_!==null&&Mh(_,tt[1])?tt[0]:(_e=_e(),et.memoizedState=[_e,_],_e)}function ui(_e,_,et){return Hh&21?(He(et,_)||(et=yc(),M$1.lanes|=et,rh|=et,_e.baseState=!0),_):(_e.baseState&&(_e.baseState=!1,dh=!0),_e.memoizedState=et)}function vi(_e,_){var et=C;C=et!==0&&4>et?et:4,_e(!0);var tt=Gh.transition;Gh.transition={};try{_e(!1),_()}finally{C=et,Gh.transition=tt}}function wi(){return Uh().memoizedState}function xi(_e,_,et){var tt=yi(_e);if(et={lane:tt,action:et,hasEagerState:!1,eagerState:null,next:null},zi(_e))Ai(_,et);else if(et=hh(_e,_,et,tt),et!==null){var rt=R();gi(et,_e,tt,rt),Bi(et,_,tt)}}function ii(_e,_,et){var tt=yi(_e),rt={lane:tt,action:et,hasEagerState:!1,eagerState:null,next:null};if(zi(_e))Ai(_,rt);else{var nt=_e.alternate;if(_e.lanes===0&&(nt===null||nt.lanes===0)&&(nt=_.lastRenderedReducer,nt!==null))try{var ot=_.lastRenderedState,at=nt(ot,et);if(rt.hasEagerState=!0,rt.eagerState=at,He(at,ot)){var lt=_.interleaved;lt===null?(rt.next=rt,gh(_)):(rt.next=lt.next,lt.next=rt),_.interleaved=rt;return}}catch{}finally{}et=hh(_e,_,rt,tt),et!==null&&(rt=R(),gi(et,_e,tt,rt),Bi(et,_,tt))}}function zi(_e){var _=_e.alternate;return _e===M$1||_!==null&&_===M$1}function Ai(_e,_){Jh=Ih=!0;var et=_e.pending;et===null?_.next=_:(_.next=et.next,et.next=_),_e.pending=_}function Bi(_e,_,et){if(et&4194240){var tt=_.lanes;tt&=_e.pendingLanes,et|=tt,_.lanes=et,Cc(_e,et)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(_e,_){return Th().memoizedState=[_e,_===void 0?null:_],_e},useContext:eh,useEffect:mi,useImperativeHandle:function(_e,_,et){return et=et!=null?et.concat([_e]):null,ki(4194308,4,pi.bind(null,_,_e),et)},useLayoutEffect:function(_e,_){return ki(4194308,4,_e,_)},useInsertionEffect:function(_e,_){return ki(4,2,_e,_)},useMemo:function(_e,_){var et=Th();return _=_===void 0?null:_,_e=_e(),et.memoizedState=[_e,_],_e},useReducer:function(_e,_,et){var tt=Th();return _=et!==void 0?et(_):_,tt.memoizedState=tt.baseState=_,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_e,lastRenderedState:_},tt.queue=_e,_e=_e.dispatch=xi.bind(null,M$1,_e),[tt.memoizedState,_e]},useRef:function(_e){var _=Th();return _e={current:_e},_.memoizedState=_e},useState:hi,useDebugValue:ri,useDeferredValue:function(_e){return Th().memoizedState=_e},useTransition:function(){var _e=hi(!1),_=_e[0];return _e=vi.bind(null,_e[1]),Th().memoizedState=_e,[_,_e]},useMutableSource:function(){},useSyncExternalStore:function(_e,_,et){var tt=M$1,rt=Th();if(I){if(et===void 0)throw Error(p$2(407));et=et()}else{if(et=_(),Q===null)throw Error(p$2(349));Hh&30||di(tt,_,et)}rt.memoizedState=et;var nt={value:et,getSnapshot:_};return rt.queue=nt,mi(ai.bind(null,tt,nt,_e),[_e]),tt.flags|=2048,bi(9,ci.bind(null,tt,nt,et,_),void 0,null),et},useId:function(){var _e=Th(),_=Q.identifierPrefix;if(I){var et=sg,tt=rg;et=(tt&~(1<<32-oc(tt)-1)).toString(32)+et,_=":"+_+"R"+et,et=Kh++,0<et&&(_+="H"+et.toString(32)),_+=":"}else et=Lh++,_=":"+_+"r"+et.toString(32)+":";return _e.memoizedState=_},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var _=Uh();return ui(_,N$1.memoizedState,_e)},useTransition:function(){var _e=Wh(Vh)[0],_=Uh().memoizedState;return[_e,_]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var _=Uh();return N$1===null?_.memoizedState=_e:ui(_,N$1.memoizedState,_e)},useTransition:function(){var _e=Xh(Vh)[0],_=Uh().memoizedState;return[_e,_]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(_e,_){if(_e&&_e.defaultProps){_=A$1({},_),_e=_e.defaultProps;for(var et in _e)_[et]===void 0&&(_[et]=_e[et]);return _}return _}function Di(_e,_,et,tt){_=_e.memoizedState,et=et(tt,_),et=et==null?_:A$1({},_,et),_e.memoizedState=et,_e.lanes===0&&(_e.updateQueue.baseState=et)}var Ei={isMounted:function(_e){return(_e=_e._reactInternals)?Vb(_e)===_e:!1},enqueueSetState:function(_e,_,et){_e=_e._reactInternals;var tt=R(),rt=yi(_e),nt=mh(tt,rt);nt.payload=_,et!=null&&(nt.callback=et),_=nh(_e,nt,rt),_!==null&&(gi(_,_e,rt,tt),oh(_,_e,rt))},enqueueReplaceState:function(_e,_,et){_e=_e._reactInternals;var tt=R(),rt=yi(_e),nt=mh(tt,rt);nt.tag=1,nt.payload=_,et!=null&&(nt.callback=et),_=nh(_e,nt,rt),_!==null&&(gi(_,_e,rt,tt),oh(_,_e,rt))},enqueueForceUpdate:function(_e,_){_e=_e._reactInternals;var et=R(),tt=yi(_e),rt=mh(et,tt);rt.tag=2,_!=null&&(rt.callback=_),_=nh(_e,rt,tt),_!==null&&(gi(_,_e,tt,et),oh(_,_e,tt))}};function Fi(_e,_,et,tt,rt,nt,ot){return _e=_e.stateNode,typeof _e.shouldComponentUpdate=="function"?_e.shouldComponentUpdate(tt,nt,ot):_.prototype&&_.prototype.isPureReactComponent?!Ie(et,tt)||!Ie(rt,nt):!0}function Gi(_e,_,et){var tt=!1,rt=Vf,nt=_.contextType;return typeof nt=="object"&&nt!==null?nt=eh(nt):(rt=Zf(_)?Xf:H$1.current,tt=_.contextTypes,nt=(tt=tt!=null)?Yf(_e,rt):Vf),_=new _(et,nt),_e.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ei,_e.stateNode=_,_._reactInternals=_e,tt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=rt,_e.__reactInternalMemoizedMaskedChildContext=nt),_}function Hi(_e,_,et,tt){_e=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(et,tt),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(et,tt),_.state!==_e&&Ei.enqueueReplaceState(_,_.state,null)}function Ii(_e,_,et,tt){var rt=_e.stateNode;rt.props=et,rt.state=_e.memoizedState,rt.refs={},kh(_e);var nt=_.contextType;typeof nt=="object"&&nt!==null?rt.context=eh(nt):(nt=Zf(_)?Xf:H$1.current,rt.context=Yf(_e,nt)),rt.state=_e.memoizedState,nt=_.getDerivedStateFromProps,typeof nt=="function"&&(Di(_e,_,nt,et),rt.state=_e.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof rt.getSnapshotBeforeUpdate=="function"||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(_=rt.state,typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount(),_!==rt.state&&Ei.enqueueReplaceState(rt,rt.state,null),qh(_e,et,rt,tt),rt.state=_e.memoizedState),typeof rt.componentDidMount=="function"&&(_e.flags|=4194308)}function Ji(_e,_){try{var et="",tt=_;do et+=Pa(tt),tt=tt.return;while(tt);var rt=et}catch(nt){rt=`
Error generating stack: `+nt.message+`
`+nt.stack}return{value:_e,source:_,stack:rt,digest:null}}function Ki(_e,_,et){return{value:_e,source:null,stack:et??null,digest:_??null}}function Li(_e,_){try{console.error(_.value)}catch(et){setTimeout(function(){throw et})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(_e,_,et){et=mh(-1,et),et.tag=3,et.payload={element:null};var tt=_.value;return et.callback=function(){Oi||(Oi=!0,Pi=tt),Li(_e,_)},et}function Qi(_e,_,et){et=mh(-1,et),et.tag=3;var tt=_e.type.getDerivedStateFromError;if(typeof tt=="function"){var rt=_.value;et.payload=function(){return tt(rt)},et.callback=function(){Li(_e,_)}}var nt=_e.stateNode;return nt!==null&&typeof nt.componentDidCatch=="function"&&(et.callback=function(){Li(_e,_),typeof tt!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var ot=_.stack;this.componentDidCatch(_.value,{componentStack:ot!==null?ot:""})}),et}function Si(_e,_,et){var tt=_e.pingCache;if(tt===null){tt=_e.pingCache=new Mi;var rt=new Set;tt.set(_,rt)}else rt=tt.get(_),rt===void 0&&(rt=new Set,tt.set(_,rt));rt.has(et)||(rt.add(et),_e=Ti.bind(null,_e,_,et),_.then(_e,_e))}function Ui(_e){do{var _;if((_=_e.tag===13)&&(_=_e.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return _e;_e=_e.return}while(_e!==null);return null}function Vi(_e,_,et,tt,rt){return _e.mode&1?(_e.flags|=65536,_e.lanes=rt,_e):(_e===_?_e.flags|=65536:(_e.flags|=128,et.flags|=131072,et.flags&=-52805,et.tag===1&&(et.alternate===null?et.tag=17:(_=mh(-1,1),_.tag=2,nh(et,_,1))),et.lanes|=1),_e)}var Wi=ua$1.ReactCurrentOwner,dh=!1;function Xi(_e,_,et,tt){_.child=_e===null?Vg(_,null,et,tt):Ug(_,_e.child,et,tt)}function Yi(_e,_,et,tt,rt){et=et.render;var nt=_.ref;return ch(_,rt),tt=Nh(_e,_,et,tt,nt,rt),et=Sh(),_e!==null&&!dh?(_.updateQueue=_e.updateQueue,_.flags&=-2053,_e.lanes&=~rt,Zi(_e,_,rt)):(I&&et&&vg(_),_.flags|=1,Xi(_e,_,tt,rt),_.child)}function $i(_e,_,et,tt,rt){if(_e===null){var nt=et.type;return typeof nt=="function"&&!aj(nt)&&nt.defaultProps===void 0&&et.compare===null&&et.defaultProps===void 0?(_.tag=15,_.type=nt,bj(_e,_,nt,tt,rt)):(_e=Rg(et.type,null,tt,_,_.mode,rt),_e.ref=_.ref,_e.return=_,_.child=_e)}if(nt=_e.child,!(_e.lanes&rt)){var ot=nt.memoizedProps;if(et=et.compare,et=et!==null?et:Ie,et(ot,tt)&&_e.ref===_.ref)return Zi(_e,_,rt)}return _.flags|=1,_e=Pg(nt,tt),_e.ref=_.ref,_e.return=_,_.child=_e}function bj(_e,_,et,tt,rt){if(_e!==null){var nt=_e.memoizedProps;if(Ie(nt,tt)&&_e.ref===_.ref)if(dh=!1,_.pendingProps=tt=nt,(_e.lanes&rt)!==0)_e.flags&131072&&(dh=!0);else return _.lanes=_e.lanes,Zi(_e,_,rt)}return cj(_e,_,et,tt,rt)}function dj(_e,_,et){var tt=_.pendingProps,rt=tt.children,nt=_e!==null?_e.memoizedState:null;if(tt.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=et;else{if(!(et&1073741824))return _e=nt!==null?nt.baseLanes|et:et,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:_e,cachePool:null,transitions:null},_.updateQueue=null,G(ej,fj),fj|=_e,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt=nt!==null?nt.baseLanes:et,G(ej,fj),fj|=tt}else nt!==null?(tt=nt.baseLanes|et,_.memoizedState=null):tt=et,G(ej,fj),fj|=tt;return Xi(_e,_,rt,et),_.child}function gj(_e,_){var et=_.ref;(_e===null&&et!==null||_e!==null&&_e.ref!==et)&&(_.flags|=512,_.flags|=2097152)}function cj(_e,_,et,tt,rt){var nt=Zf(et)?Xf:H$1.current;return nt=Yf(_,nt),ch(_,rt),et=Nh(_e,_,et,tt,nt,rt),tt=Sh(),_e!==null&&!dh?(_.updateQueue=_e.updateQueue,_.flags&=-2053,_e.lanes&=~rt,Zi(_e,_,rt)):(I&&tt&&vg(_),_.flags|=1,Xi(_e,_,et,rt),_.child)}function hj(_e,_,et,tt,rt){if(Zf(et)){var nt=!0;cg(_)}else nt=!1;if(ch(_,rt),_.stateNode===null)ij(_e,_),Gi(_,et,tt),Ii(_,et,tt,rt),tt=!0;else if(_e===null){var ot=_.stateNode,at=_.memoizedProps;ot.props=at;var lt=ot.context,ct=et.contextType;typeof ct=="object"&&ct!==null?ct=eh(ct):(ct=Zf(et)?Xf:H$1.current,ct=Yf(_,ct));var dt=et.getDerivedStateFromProps,st=typeof dt=="function"||typeof ot.getSnapshotBeforeUpdate=="function";st||typeof ot.UNSAFE_componentWillReceiveProps!="function"&&typeof ot.componentWillReceiveProps!="function"||(at!==tt||lt!==ct)&&Hi(_,ot,tt,ct),jh=!1;var it=_.memoizedState;ot.state=it,qh(_,tt,ot,rt),lt=_.memoizedState,at!==tt||it!==lt||Wf.current||jh?(typeof dt=="function"&&(Di(_,et,dt,tt),lt=_.memoizedState),(at=jh||Fi(_,et,at,tt,it,lt,ct))?(st||typeof ot.UNSAFE_componentWillMount!="function"&&typeof ot.componentWillMount!="function"||(typeof ot.componentWillMount=="function"&&ot.componentWillMount(),typeof ot.UNSAFE_componentWillMount=="function"&&ot.UNSAFE_componentWillMount()),typeof ot.componentDidMount=="function"&&(_.flags|=4194308)):(typeof ot.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=tt,_.memoizedState=lt),ot.props=tt,ot.state=lt,ot.context=ct,tt=at):(typeof ot.componentDidMount=="function"&&(_.flags|=4194308),tt=!1)}else{ot=_.stateNode,lh(_e,_),at=_.memoizedProps,ct=_.type===_.elementType?at:Ci(_.type,at),ot.props=ct,st=_.pendingProps,it=ot.context,lt=et.contextType,typeof lt=="object"&&lt!==null?lt=eh(lt):(lt=Zf(et)?Xf:H$1.current,lt=Yf(_,lt));var ut=et.getDerivedStateFromProps;(dt=typeof ut=="function"||typeof ot.getSnapshotBeforeUpdate=="function")||typeof ot.UNSAFE_componentWillReceiveProps!="function"&&typeof ot.componentWillReceiveProps!="function"||(at!==st||it!==lt)&&Hi(_,ot,tt,lt),jh=!1,it=_.memoizedState,ot.state=it,qh(_,tt,ot,rt);var ht=_.memoizedState;at!==st||it!==ht||Wf.current||jh?(typeof ut=="function"&&(Di(_,et,ut,tt),ht=_.memoizedState),(ct=jh||Fi(_,et,ct,tt,it,ht,lt)||!1)?(dt||typeof ot.UNSAFE_componentWillUpdate!="function"&&typeof ot.componentWillUpdate!="function"||(typeof ot.componentWillUpdate=="function"&&ot.componentWillUpdate(tt,ht,lt),typeof ot.UNSAFE_componentWillUpdate=="function"&&ot.UNSAFE_componentWillUpdate(tt,ht,lt)),typeof ot.componentDidUpdate=="function"&&(_.flags|=4),typeof ot.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof ot.componentDidUpdate!="function"||at===_e.memoizedProps&&it===_e.memoizedState||(_.flags|=4),typeof ot.getSnapshotBeforeUpdate!="function"||at===_e.memoizedProps&&it===_e.memoizedState||(_.flags|=1024),_.memoizedProps=tt,_.memoizedState=ht),ot.props=tt,ot.state=ht,ot.context=lt,tt=ct):(typeof ot.componentDidUpdate!="function"||at===_e.memoizedProps&&it===_e.memoizedState||(_.flags|=4),typeof ot.getSnapshotBeforeUpdate!="function"||at===_e.memoizedProps&&it===_e.memoizedState||(_.flags|=1024),tt=!1)}return jj(_e,_,et,tt,nt,rt)}function jj(_e,_,et,tt,rt,nt){gj(_e,_);var ot=(_.flags&128)!==0;if(!tt&&!ot)return rt&&dg(_,et,!1),Zi(_e,_,nt);tt=_.stateNode,Wi.current=_;var at=ot&&typeof et.getDerivedStateFromError!="function"?null:tt.render();return _.flags|=1,_e!==null&&ot?(_.child=Ug(_,_e.child,null,nt),_.child=Ug(_,null,at,nt)):Xi(_e,_,at,nt),_.memoizedState=tt.state,rt&&dg(_,et,!0),_.child}function kj(_e){var _=_e.stateNode;_.pendingContext?ag(_e,_.pendingContext,_.pendingContext!==_.context):_.context&&ag(_e,_.context,!1),yh(_e,_.containerInfo)}function lj(_e,_,et,tt,rt){return Ig(),Jg(rt),_.flags|=256,Xi(_e,_,et,tt),_.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(_e){return{baseLanes:_e,cachePool:null,transitions:null}}function oj(_e,_,et){var tt=_.pendingProps,rt=L.current,nt=!1,ot=(_.flags&128)!==0,at;if((at=ot)||(at=_e!==null&&_e.memoizedState===null?!1:(rt&2)!==0),at?(nt=!0,_.flags&=-129):(_e===null||_e.memoizedState!==null)&&(rt|=1),G(L,rt&1),_e===null)return Eg(_),_e=_.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null)?(_.mode&1?_e.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(ot=tt.children,_e=tt.fallback,nt?(tt=_.mode,nt=_.child,ot={mode:"hidden",children:ot},!(tt&1)&&nt!==null?(nt.childLanes=0,nt.pendingProps=ot):nt=pj(ot,tt,0,null),_e=Tg(_e,tt,et,null),nt.return=_,_e.return=_,nt.sibling=_e,_.child=nt,_.child.memoizedState=nj(et),_.memoizedState=mj,_e):qj(_,ot));if(rt=_e.memoizedState,rt!==null&&(at=rt.dehydrated,at!==null))return rj(_e,_,ot,tt,at,rt,et);if(nt){nt=tt.fallback,ot=_.mode,rt=_e.child,at=rt.sibling;var lt={mode:"hidden",children:tt.children};return!(ot&1)&&_.child!==rt?(tt=_.child,tt.childLanes=0,tt.pendingProps=lt,_.deletions=null):(tt=Pg(rt,lt),tt.subtreeFlags=rt.subtreeFlags&14680064),at!==null?nt=Pg(at,nt):(nt=Tg(nt,ot,et,null),nt.flags|=2),nt.return=_,tt.return=_,tt.sibling=nt,_.child=tt,tt=nt,nt=_.child,ot=_e.child.memoizedState,ot=ot===null?nj(et):{baseLanes:ot.baseLanes|et,cachePool:null,transitions:ot.transitions},nt.memoizedState=ot,nt.childLanes=_e.childLanes&~et,_.memoizedState=mj,tt}return nt=_e.child,_e=nt.sibling,tt=Pg(nt,{mode:"visible",children:tt.children}),!(_.mode&1)&&(tt.lanes=et),tt.return=_,tt.sibling=null,_e!==null&&(et=_.deletions,et===null?(_.deletions=[_e],_.flags|=16):et.push(_e)),_.child=tt,_.memoizedState=null,tt}function qj(_e,_){return _=pj({mode:"visible",children:_},_e.mode,0,null),_.return=_e,_e.child=_}function sj(_e,_,et,tt){return tt!==null&&Jg(tt),Ug(_,_e.child,null,et),_e=qj(_,_.pendingProps.children),_e.flags|=2,_.memoizedState=null,_e}function rj(_e,_,et,tt,rt,nt,ot){if(et)return _.flags&256?(_.flags&=-257,tt=Ki(Error(p$2(422))),sj(_e,_,ot,tt)):_.memoizedState!==null?(_.child=_e.child,_.flags|=128,null):(nt=tt.fallback,rt=_.mode,tt=pj({mode:"visible",children:tt.children},rt,0,null),nt=Tg(nt,rt,ot,null),nt.flags|=2,tt.return=_,nt.return=_,tt.sibling=nt,_.child=tt,_.mode&1&&Ug(_,_e.child,null,ot),_.child.memoizedState=nj(ot),_.memoizedState=mj,nt);if(!(_.mode&1))return sj(_e,_,ot,null);if(rt.data==="$!"){if(tt=rt.nextSibling&&rt.nextSibling.dataset,tt)var at=tt.dgst;return tt=at,nt=Error(p$2(419)),tt=Ki(nt,tt,void 0),sj(_e,_,ot,tt)}if(at=(ot&_e.childLanes)!==0,dh||at){if(tt=Q,tt!==null){switch(ot&-ot){case 4:rt=2;break;case 16:rt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:rt=32;break;case 536870912:rt=268435456;break;default:rt=0}rt=rt&(tt.suspendedLanes|ot)?0:rt,rt!==0&&rt!==nt.retryLane&&(nt.retryLane=rt,ih(_e,rt),gi(tt,_e,rt,-1))}return tj(),tt=Ki(Error(p$2(421))),sj(_e,_,ot,tt)}return rt.data==="$?"?(_.flags|=128,_.child=_e.child,_=uj.bind(null,_e),rt._reactRetry=_,null):(_e=nt.treeContext,yg=Lf(rt.nextSibling),xg=_,I=!0,zg=null,_e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_e.id,sg=_e.overflow,qg=_),_=qj(_,tt.children),_.flags|=4096,_)}function vj(_e,_,et){_e.lanes|=_;var tt=_e.alternate;tt!==null&&(tt.lanes|=_),bh(_e.return,_,et)}function wj(_e,_,et,tt,rt){var nt=_e.memoizedState;nt===null?_e.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:tt,tail:et,tailMode:rt}:(nt.isBackwards=_,nt.rendering=null,nt.renderingStartTime=0,nt.last=tt,nt.tail=et,nt.tailMode=rt)}function xj(_e,_,et){var tt=_.pendingProps,rt=tt.revealOrder,nt=tt.tail;if(Xi(_e,_,tt.children,et),tt=L.current,tt&2)tt=tt&1|2,_.flags|=128;else{if(_e!==null&&_e.flags&128)e:for(_e=_.child;_e!==null;){if(_e.tag===13)_e.memoizedState!==null&&vj(_e,et,_);else if(_e.tag===19)vj(_e,et,_);else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===_)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===_)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}tt&=1}if(G(L,tt),!(_.mode&1))_.memoizedState=null;else switch(rt){case"forwards":for(et=_.child,rt=null;et!==null;)_e=et.alternate,_e!==null&&Ch(_e)===null&&(rt=et),et=et.sibling;et=rt,et===null?(rt=_.child,_.child=null):(rt=et.sibling,et.sibling=null),wj(_,!1,rt,et,nt);break;case"backwards":for(et=null,rt=_.child,_.child=null;rt!==null;){if(_e=rt.alternate,_e!==null&&Ch(_e)===null){_.child=rt;break}_e=rt.sibling,rt.sibling=et,et=rt,rt=_e}wj(_,!0,et,null,nt);break;case"together":wj(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function ij(_e,_){!(_.mode&1)&&_e!==null&&(_e.alternate=null,_.alternate=null,_.flags|=2)}function Zi(_e,_,et){if(_e!==null&&(_.dependencies=_e.dependencies),rh|=_.lanes,!(et&_.childLanes))return null;if(_e!==null&&_.child!==_e.child)throw Error(p$2(153));if(_.child!==null){for(_e=_.child,et=Pg(_e,_e.pendingProps),_.child=et,et.return=_;_e.sibling!==null;)_e=_e.sibling,et=et.sibling=Pg(_e,_e.pendingProps),et.return=_;et.sibling=null}return _.child}function yj(_e,_,et){switch(_.tag){case 3:kj(_),Ig();break;case 5:Ah(_);break;case 1:Zf(_.type)&&cg(_);break;case 4:yh(_,_.stateNode.containerInfo);break;case 10:var tt=_.type._context,rt=_.memoizedProps.value;G(Wg,tt._currentValue),tt._currentValue=rt;break;case 13:if(tt=_.memoizedState,tt!==null)return tt.dehydrated!==null?(G(L,L.current&1),_.flags|=128,null):et&_.child.childLanes?oj(_e,_,et):(G(L,L.current&1),_e=Zi(_e,_,et),_e!==null?_e.sibling:null);G(L,L.current&1);break;case 19:if(tt=(et&_.childLanes)!==0,_e.flags&128){if(tt)return xj(_e,_,et);_.flags|=128}if(rt=_.memoizedState,rt!==null&&(rt.rendering=null,rt.tail=null,rt.lastEffect=null),G(L,L.current),tt)break;return null;case 22:case 23:return _.lanes=0,dj(_e,_,et)}return Zi(_e,_,et)}var zj,Aj,Bj,Cj;zj=function(_e,_){for(var et=_.child;et!==null;){if(et.tag===5||et.tag===6)_e.appendChild(et.stateNode);else if(et.tag!==4&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===_)break;for(;et.sibling===null;){if(et.return===null||et.return===_)return;et=et.return}et.sibling.return=et.return,et=et.sibling}};Aj=function(){};Bj=function(_e,_,et,tt){var rt=_e.memoizedProps;if(rt!==tt){_e=_.stateNode,xh(uh.current);var nt=null;switch(et){case"input":rt=Ya(_e,rt),tt=Ya(_e,tt),nt=[];break;case"select":rt=A$1({},rt,{value:void 0}),tt=A$1({},tt,{value:void 0}),nt=[];break;case"textarea":rt=gb(_e,rt),tt=gb(_e,tt),nt=[];break;default:typeof rt.onClick!="function"&&typeof tt.onClick=="function"&&(_e.onclick=Bf)}ub(et,tt);var ot;et=null;for(ct in rt)if(!tt.hasOwnProperty(ct)&&rt.hasOwnProperty(ct)&&rt[ct]!=null)if(ct==="style"){var at=rt[ct];for(ot in at)at.hasOwnProperty(ot)&&(et||(et={}),et[ot]="")}else ct!=="dangerouslySetInnerHTML"&&ct!=="children"&&ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&ct!=="autoFocus"&&(ea.hasOwnProperty(ct)?nt||(nt=[]):(nt=nt||[]).push(ct,null));for(ct in tt){var lt=tt[ct];if(at=rt!=null?rt[ct]:void 0,tt.hasOwnProperty(ct)&&lt!==at&&(lt!=null||at!=null))if(ct==="style")if(at){for(ot in at)!at.hasOwnProperty(ot)||lt&&lt.hasOwnProperty(ot)||(et||(et={}),et[ot]="");for(ot in lt)lt.hasOwnProperty(ot)&&at[ot]!==lt[ot]&&(et||(et={}),et[ot]=lt[ot])}else et||(nt||(nt=[]),nt.push(ct,et)),et=lt;else ct==="dangerouslySetInnerHTML"?(lt=lt?lt.__html:void 0,at=at?at.__html:void 0,lt!=null&&at!==lt&&(nt=nt||[]).push(ct,lt)):ct==="children"?typeof lt!="string"&&typeof lt!="number"||(nt=nt||[]).push(ct,""+lt):ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&(ea.hasOwnProperty(ct)?(lt!=null&&ct==="onScroll"&&D("scroll",_e),nt||at===lt||(nt=[])):(nt=nt||[]).push(ct,lt))}et&&(nt=nt||[]).push("style",et);var ct=nt;(_.updateQueue=ct)&&(_.flags|=4)}};Cj=function(_e,_,et,tt){et!==tt&&(_.flags|=4)};function Dj(_e,_){if(!I)switch(_e.tailMode){case"hidden":_=_e.tail;for(var et=null;_!==null;)_.alternate!==null&&(et=_),_=_.sibling;et===null?_e.tail=null:et.sibling=null;break;case"collapsed":et=_e.tail;for(var tt=null;et!==null;)et.alternate!==null&&(tt=et),et=et.sibling;tt===null?_||_e.tail===null?_e.tail=null:_e.tail.sibling=null:tt.sibling=null}}function S$1(_e){var _=_e.alternate!==null&&_e.alternate.child===_e.child,et=0,tt=0;if(_)for(var rt=_e.child;rt!==null;)et|=rt.lanes|rt.childLanes,tt|=rt.subtreeFlags&14680064,tt|=rt.flags&14680064,rt.return=_e,rt=rt.sibling;else for(rt=_e.child;rt!==null;)et|=rt.lanes|rt.childLanes,tt|=rt.subtreeFlags,tt|=rt.flags,rt.return=_e,rt=rt.sibling;return _e.subtreeFlags|=tt,_e.childLanes=et,_}function Ej(_e,_,et){var tt=_.pendingProps;switch(wg(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(_),null;case 1:return Zf(_.type)&&$f(),S$1(_),null;case 3:return tt=_.stateNode,zh(),E(Wf),E(H$1),Eh(),tt.pendingContext&&(tt.context=tt.pendingContext,tt.pendingContext=null),(_e===null||_e.child===null)&&(Gg(_)?_.flags|=4:_e===null||_e.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(_e,_),S$1(_),null;case 5:Bh(_);var rt=xh(wh.current);if(et=_.type,_e!==null&&_.stateNode!=null)Bj(_e,_,et,tt,rt),_e.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!tt){if(_.stateNode===null)throw Error(p$2(166));return S$1(_),null}if(_e=xh(uh.current),Gg(_)){tt=_.stateNode,et=_.type;var nt=_.memoizedProps;switch(tt[Of]=_,tt[Pf]=nt,_e=(_.mode&1)!==0,et){case"dialog":D("cancel",tt),D("close",tt);break;case"iframe":case"object":case"embed":D("load",tt);break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D(lf[rt],tt);break;case"source":D("error",tt);break;case"img":case"image":case"link":D("error",tt),D("load",tt);break;case"details":D("toggle",tt);break;case"input":Za(tt,nt),D("invalid",tt);break;case"select":tt._wrapperState={wasMultiple:!!nt.multiple},D("invalid",tt);break;case"textarea":hb(tt,nt),D("invalid",tt)}ub(et,nt),rt=null;for(var ot in nt)if(nt.hasOwnProperty(ot)){var at=nt[ot];ot==="children"?typeof at=="string"?tt.textContent!==at&&(nt.suppressHydrationWarning!==!0&&Af(tt.textContent,at,_e),rt=["children",at]):typeof at=="number"&&tt.textContent!==""+at&&(nt.suppressHydrationWarning!==!0&&Af(tt.textContent,at,_e),rt=["children",""+at]):ea.hasOwnProperty(ot)&&at!=null&&ot==="onScroll"&&D("scroll",tt)}switch(et){case"input":Va(tt),db(tt,nt,!0);break;case"textarea":Va(tt),jb(tt);break;case"select":case"option":break;default:typeof nt.onClick=="function"&&(tt.onclick=Bf)}tt=rt,_.updateQueue=tt,tt!==null&&(_.flags|=4)}else{ot=rt.nodeType===9?rt:rt.ownerDocument,_e==="http://www.w3.org/1999/xhtml"&&(_e=kb(et)),_e==="http://www.w3.org/1999/xhtml"?et==="script"?(_e=ot.createElement("div"),_e.innerHTML="<script><\/script>",_e=_e.removeChild(_e.firstChild)):typeof tt.is=="string"?_e=ot.createElement(et,{is:tt.is}):(_e=ot.createElement(et),et==="select"&&(ot=_e,tt.multiple?ot.multiple=!0:tt.size&&(ot.size=tt.size))):_e=ot.createElementNS(_e,et),_e[Of]=_,_e[Pf]=tt,zj(_e,_,!1,!1),_.stateNode=_e;e:{switch(ot=vb(et,tt),et){case"dialog":D("cancel",_e),D("close",_e),rt=tt;break;case"iframe":case"object":case"embed":D("load",_e),rt=tt;break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D(lf[rt],_e);rt=tt;break;case"source":D("error",_e),rt=tt;break;case"img":case"image":case"link":D("error",_e),D("load",_e),rt=tt;break;case"details":D("toggle",_e),rt=tt;break;case"input":Za(_e,tt),rt=Ya(_e,tt),D("invalid",_e);break;case"option":rt=tt;break;case"select":_e._wrapperState={wasMultiple:!!tt.multiple},rt=A$1({},tt,{value:void 0}),D("invalid",_e);break;case"textarea":hb(_e,tt),rt=gb(_e,tt),D("invalid",_e);break;default:rt=tt}ub(et,rt),at=rt;for(nt in at)if(at.hasOwnProperty(nt)){var lt=at[nt];nt==="style"?sb(_e,lt):nt==="dangerouslySetInnerHTML"?(lt=lt?lt.__html:void 0,lt!=null&&nb(_e,lt)):nt==="children"?typeof lt=="string"?(et!=="textarea"||lt!=="")&&ob(_e,lt):typeof lt=="number"&&ob(_e,""+lt):nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&nt!=="autoFocus"&&(ea.hasOwnProperty(nt)?lt!=null&&nt==="onScroll"&&D("scroll",_e):lt!=null&&ta(_e,nt,lt,ot))}switch(et){case"input":Va(_e),db(_e,tt,!1);break;case"textarea":Va(_e),jb(_e);break;case"option":tt.value!=null&&_e.setAttribute("value",""+Sa(tt.value));break;case"select":_e.multiple=!!tt.multiple,nt=tt.value,nt!=null?fb(_e,!!tt.multiple,nt,!1):tt.defaultValue!=null&&fb(_e,!!tt.multiple,tt.defaultValue,!0);break;default:typeof rt.onClick=="function"&&(_e.onclick=Bf)}switch(et){case"button":case"input":case"select":case"textarea":tt=!!tt.autoFocus;break e;case"img":tt=!0;break e;default:tt=!1}}tt&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return S$1(_),null;case 6:if(_e&&_.stateNode!=null)Cj(_e,_,_e.memoizedProps,tt);else{if(typeof tt!="string"&&_.stateNode===null)throw Error(p$2(166));if(et=xh(wh.current),xh(uh.current),Gg(_)){if(tt=_.stateNode,et=_.memoizedProps,tt[Of]=_,(nt=tt.nodeValue!==et)&&(_e=xg,_e!==null))switch(_e.tag){case 3:Af(tt.nodeValue,et,(_e.mode&1)!==0);break;case 5:_e.memoizedProps.suppressHydrationWarning!==!0&&Af(tt.nodeValue,et,(_e.mode&1)!==0)}nt&&(_.flags|=4)}else tt=(et.nodeType===9?et:et.ownerDocument).createTextNode(tt),tt[Of]=_,_.stateNode=tt}return S$1(_),null;case 13:if(E(L),tt=_.memoizedState,_e===null||_e.memoizedState!==null&&_e.memoizedState.dehydrated!==null){if(I&&yg!==null&&_.mode&1&&!(_.flags&128))Hg(),Ig(),_.flags|=98560,nt=!1;else if(nt=Gg(_),tt!==null&&tt.dehydrated!==null){if(_e===null){if(!nt)throw Error(p$2(318));if(nt=_.memoizedState,nt=nt!==null?nt.dehydrated:null,!nt)throw Error(p$2(317));nt[Of]=_}else Ig(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;S$1(_),nt=!1}else zg!==null&&(Fj(zg),zg=null),nt=!0;if(!nt)return _.flags&65536?_:null}return _.flags&128?(_.lanes=et,_):(tt=tt!==null,tt!==(_e!==null&&_e.memoizedState!==null)&&tt&&(_.child.flags|=8192,_.mode&1&&(_e===null||L.current&1?T===0&&(T=3):tj())),_.updateQueue!==null&&(_.flags|=4),S$1(_),null);case 4:return zh(),Aj(_e,_),_e===null&&sf(_.stateNode.containerInfo),S$1(_),null;case 10:return ah(_.type._context),S$1(_),null;case 17:return Zf(_.type)&&$f(),S$1(_),null;case 19:if(E(L),nt=_.memoizedState,nt===null)return S$1(_),null;if(tt=(_.flags&128)!==0,ot=nt.rendering,ot===null)if(tt)Dj(nt,!1);else{if(T!==0||_e!==null&&_e.flags&128)for(_e=_.child;_e!==null;){if(ot=Ch(_e),ot!==null){for(_.flags|=128,Dj(nt,!1),tt=ot.updateQueue,tt!==null&&(_.updateQueue=tt,_.flags|=4),_.subtreeFlags=0,tt=et,et=_.child;et!==null;)nt=et,_e=tt,nt.flags&=14680066,ot=nt.alternate,ot===null?(nt.childLanes=0,nt.lanes=_e,nt.child=null,nt.subtreeFlags=0,nt.memoizedProps=null,nt.memoizedState=null,nt.updateQueue=null,nt.dependencies=null,nt.stateNode=null):(nt.childLanes=ot.childLanes,nt.lanes=ot.lanes,nt.child=ot.child,nt.subtreeFlags=0,nt.deletions=null,nt.memoizedProps=ot.memoizedProps,nt.memoizedState=ot.memoizedState,nt.updateQueue=ot.updateQueue,nt.type=ot.type,_e=ot.dependencies,nt.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext}),et=et.sibling;return G(L,L.current&1|2),_.child}_e=_e.sibling}nt.tail!==null&&B()>Gj&&(_.flags|=128,tt=!0,Dj(nt,!1),_.lanes=4194304)}else{if(!tt)if(_e=Ch(ot),_e!==null){if(_.flags|=128,tt=!0,et=_e.updateQueue,et!==null&&(_.updateQueue=et,_.flags|=4),Dj(nt,!0),nt.tail===null&&nt.tailMode==="hidden"&&!ot.alternate&&!I)return S$1(_),null}else 2*B()-nt.renderingStartTime>Gj&&et!==1073741824&&(_.flags|=128,tt=!0,Dj(nt,!1),_.lanes=4194304);nt.isBackwards?(ot.sibling=_.child,_.child=ot):(et=nt.last,et!==null?et.sibling=ot:_.child=ot,nt.last=ot)}return nt.tail!==null?(_=nt.tail,nt.rendering=_,nt.tail=_.sibling,nt.renderingStartTime=B(),_.sibling=null,et=L.current,G(L,tt?et&1|2:et&1),_):(S$1(_),null);case 22:case 23:return Hj(),tt=_.memoizedState!==null,_e!==null&&_e.memoizedState!==null!==tt&&(_.flags|=8192),tt&&_.mode&1?fj&1073741824&&(S$1(_),_.subtreeFlags&6&&(_.flags|=8192)):S$1(_),null;case 24:return null;case 25:return null}throw Error(p$2(156,_.tag))}function Ij(_e,_){switch(wg(_),_.tag){case 1:return Zf(_.type)&&$f(),_e=_.flags,_e&65536?(_.flags=_e&-65537|128,_):null;case 3:return zh(),E(Wf),E(H$1),Eh(),_e=_.flags,_e&65536&&!(_e&128)?(_.flags=_e&-65537|128,_):null;case 5:return Bh(_),null;case 13:if(E(L),_e=_.memoizedState,_e!==null&&_e.dehydrated!==null){if(_.alternate===null)throw Error(p$2(340));Ig()}return _e=_.flags,_e&65536?(_.flags=_e&-65537|128,_):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(_.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(_e,_){var et=_e.ref;if(et!==null)if(typeof et=="function")try{et(null)}catch(tt){W(_e,_,tt)}else et.current=null}function Mj(_e,_,et){try{et()}catch(tt){W(_e,_,tt)}}var Nj=!1;function Oj(_e,_){if(Cf=dd,_e=Me(),Ne(_e)){if("selectionStart"in _e)var et={start:_e.selectionStart,end:_e.selectionEnd};else e:{et=(et=_e.ownerDocument)&&et.defaultView||window;var tt=et.getSelection&&et.getSelection();if(tt&&tt.rangeCount!==0){et=tt.anchorNode;var rt=tt.anchorOffset,nt=tt.focusNode;tt=tt.focusOffset;try{et.nodeType,nt.nodeType}catch{et=null;break e}var ot=0,at=-1,lt=-1,ct=0,dt=0,st=_e,it=null;t:for(;;){for(var ut;st!==et||rt!==0&&st.nodeType!==3||(at=ot+rt),st!==nt||tt!==0&&st.nodeType!==3||(lt=ot+tt),st.nodeType===3&&(ot+=st.nodeValue.length),(ut=st.firstChild)!==null;)it=st,st=ut;for(;;){if(st===_e)break t;if(it===et&&++ct===rt&&(at=ot),it===nt&&++dt===tt&&(lt=ot),(ut=st.nextSibling)!==null)break;st=it,it=st.parentNode}st=ut}et=at===-1||lt===-1?null:{start:at,end:lt}}else et=null}et=et||{start:0,end:0}}else et=null;for(Df={focusedElem:_e,selectionRange:et},dd=!1,V=_;V!==null;)if(_=V,_e=_.child,(_.subtreeFlags&1028)!==0&&_e!==null)_e.return=_,V=_e;else for(;V!==null;){_=V;try{var ht=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(ht!==null){var ft=ht.memoizedProps,gt=ht.memoizedState,mt=_.stateNode,yt=mt.getSnapshotBeforeUpdate(_.elementType===_.type?ft:Ci(_.type,ft),gt);mt.__reactInternalSnapshotBeforeUpdate=yt}break;case 3:var bt=_.stateNode.containerInfo;bt.nodeType===1?bt.textContent="":bt.nodeType===9&&bt.documentElement&&bt.removeChild(bt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(vt){W(_,_.return,vt)}if(_e=_.sibling,_e!==null){_e.return=_.return,V=_e;break}V=_.return}return ht=Nj,Nj=!1,ht}function Pj(_e,_,et){var tt=_.updateQueue;if(tt=tt!==null?tt.lastEffect:null,tt!==null){var rt=tt=tt.next;do{if((rt.tag&_e)===_e){var nt=rt.destroy;rt.destroy=void 0,nt!==void 0&&Mj(_,et,nt)}rt=rt.next}while(rt!==tt)}}function Qj(_e,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var et=_=_.next;do{if((et.tag&_e)===_e){var tt=et.create;et.destroy=tt()}et=et.next}while(et!==_)}}function Rj(_e){var _=_e.ref;if(_!==null){var et=_e.stateNode;switch(_e.tag){case 5:_e=et;break;default:_e=et}typeof _=="function"?_(_e):_.current=_e}}function Sj(_e){var _=_e.alternate;_!==null&&(_e.alternate=null,Sj(_)),_e.child=null,_e.deletions=null,_e.sibling=null,_e.tag===5&&(_=_e.stateNode,_!==null&&(delete _[Of],delete _[Pf],delete _[of],delete _[Qf],delete _[Rf])),_e.stateNode=null,_e.return=null,_e.dependencies=null,_e.memoizedProps=null,_e.memoizedState=null,_e.pendingProps=null,_e.stateNode=null,_e.updateQueue=null}function Tj(_e){return _e.tag===5||_e.tag===3||_e.tag===4}function Uj(_e){e:for(;;){for(;_e.sibling===null;){if(_e.return===null||Tj(_e.return))return null;_e=_e.return}for(_e.sibling.return=_e.return,_e=_e.sibling;_e.tag!==5&&_e.tag!==6&&_e.tag!==18;){if(_e.flags&2||_e.child===null||_e.tag===4)continue e;_e.child.return=_e,_e=_e.child}if(!(_e.flags&2))return _e.stateNode}}function Vj(_e,_,et){var tt=_e.tag;if(tt===5||tt===6)_e=_e.stateNode,_?et.nodeType===8?et.parentNode.insertBefore(_e,_):et.insertBefore(_e,_):(et.nodeType===8?(_=et.parentNode,_.insertBefore(_e,et)):(_=et,_.appendChild(_e)),et=et._reactRootContainer,et!=null||_.onclick!==null||(_.onclick=Bf));else if(tt!==4&&(_e=_e.child,_e!==null))for(Vj(_e,_,et),_e=_e.sibling;_e!==null;)Vj(_e,_,et),_e=_e.sibling}function Wj(_e,_,et){var tt=_e.tag;if(tt===5||tt===6)_e=_e.stateNode,_?et.insertBefore(_e,_):et.appendChild(_e);else if(tt!==4&&(_e=_e.child,_e!==null))for(Wj(_e,_,et),_e=_e.sibling;_e!==null;)Wj(_e,_,et),_e=_e.sibling}var X=null,Xj=!1;function Yj(_e,_,et){for(et=et.child;et!==null;)Zj(_e,_,et),et=et.sibling}function Zj(_e,_,et){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,et)}catch{}switch(et.tag){case 5:U||Lj(et,_);case 6:var tt=X,rt=Xj;X=null,Yj(_e,_,et),X=tt,Xj=rt,X!==null&&(Xj?(_e=X,et=et.stateNode,_e.nodeType===8?_e.parentNode.removeChild(et):_e.removeChild(et)):X.removeChild(et.stateNode));break;case 18:X!==null&&(Xj?(_e=X,et=et.stateNode,_e.nodeType===8?Kf(_e.parentNode,et):_e.nodeType===1&&Kf(_e,et),bd(_e)):Kf(X,et.stateNode));break;case 4:tt=X,rt=Xj,X=et.stateNode.containerInfo,Xj=!0,Yj(_e,_,et),X=tt,Xj=rt;break;case 0:case 11:case 14:case 15:if(!U&&(tt=et.updateQueue,tt!==null&&(tt=tt.lastEffect,tt!==null))){rt=tt=tt.next;do{var nt=rt,ot=nt.destroy;nt=nt.tag,ot!==void 0&&(nt&2||nt&4)&&Mj(et,_,ot),rt=rt.next}while(rt!==tt)}Yj(_e,_,et);break;case 1:if(!U&&(Lj(et,_),tt=et.stateNode,typeof tt.componentWillUnmount=="function"))try{tt.props=et.memoizedProps,tt.state=et.memoizedState,tt.componentWillUnmount()}catch(at){W(et,_,at)}Yj(_e,_,et);break;case 21:Yj(_e,_,et);break;case 22:et.mode&1?(U=(tt=U)||et.memoizedState!==null,Yj(_e,_,et),U=tt):Yj(_e,_,et);break;default:Yj(_e,_,et)}}function ak(_e){var _=_e.updateQueue;if(_!==null){_e.updateQueue=null;var et=_e.stateNode;et===null&&(et=_e.stateNode=new Kj),_.forEach(function(tt){var rt=bk.bind(null,_e,tt);et.has(tt)||(et.add(tt),tt.then(rt,rt))})}}function ck(_e,_){var et=_.deletions;if(et!==null)for(var tt=0;tt<et.length;tt++){var rt=et[tt];try{var nt=_e,ot=_,at=ot;e:for(;at!==null;){switch(at.tag){case 5:X=at.stateNode,Xj=!1;break e;case 3:X=at.stateNode.containerInfo,Xj=!0;break e;case 4:X=at.stateNode.containerInfo,Xj=!0;break e}at=at.return}if(X===null)throw Error(p$2(160));Zj(nt,ot,rt),X=null,Xj=!1;var lt=rt.alternate;lt!==null&&(lt.return=null),rt.return=null}catch(ct){W(rt,_,ct)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)dk(_,_e),_=_.sibling}function dk(_e,_){var et=_e.alternate,tt=_e.flags;switch(_e.tag){case 0:case 11:case 14:case 15:if(ck(_,_e),ek(_e),tt&4){try{Pj(3,_e,_e.return),Qj(3,_e)}catch(ft){W(_e,_e.return,ft)}try{Pj(5,_e,_e.return)}catch(ft){W(_e,_e.return,ft)}}break;case 1:ck(_,_e),ek(_e),tt&512&&et!==null&&Lj(et,et.return);break;case 5:if(ck(_,_e),ek(_e),tt&512&&et!==null&&Lj(et,et.return),_e.flags&32){var rt=_e.stateNode;try{ob(rt,"")}catch(ft){W(_e,_e.return,ft)}}if(tt&4&&(rt=_e.stateNode,rt!=null)){var nt=_e.memoizedProps,ot=et!==null?et.memoizedProps:nt,at=_e.type,lt=_e.updateQueue;if(_e.updateQueue=null,lt!==null)try{at==="input"&&nt.type==="radio"&&nt.name!=null&&ab(rt,nt),vb(at,ot);var ct=vb(at,nt);for(ot=0;ot<lt.length;ot+=2){var dt=lt[ot],st=lt[ot+1];dt==="style"?sb(rt,st):dt==="dangerouslySetInnerHTML"?nb(rt,st):dt==="children"?ob(rt,st):ta(rt,dt,st,ct)}switch(at){case"input":bb(rt,nt);break;case"textarea":ib(rt,nt);break;case"select":var it=rt._wrapperState.wasMultiple;rt._wrapperState.wasMultiple=!!nt.multiple;var ut=nt.value;ut!=null?fb(rt,!!nt.multiple,ut,!1):it!==!!nt.multiple&&(nt.defaultValue!=null?fb(rt,!!nt.multiple,nt.defaultValue,!0):fb(rt,!!nt.multiple,nt.multiple?[]:"",!1))}rt[Pf]=nt}catch(ft){W(_e,_e.return,ft)}}break;case 6:if(ck(_,_e),ek(_e),tt&4){if(_e.stateNode===null)throw Error(p$2(162));rt=_e.stateNode,nt=_e.memoizedProps;try{rt.nodeValue=nt}catch(ft){W(_e,_e.return,ft)}}break;case 3:if(ck(_,_e),ek(_e),tt&4&&et!==null&&et.memoizedState.isDehydrated)try{bd(_.containerInfo)}catch(ft){W(_e,_e.return,ft)}break;case 4:ck(_,_e),ek(_e);break;case 13:ck(_,_e),ek(_e),rt=_e.child,rt.flags&8192&&(nt=rt.memoizedState!==null,rt.stateNode.isHidden=nt,!nt||rt.alternate!==null&&rt.alternate.memoizedState!==null||(fk=B())),tt&4&&ak(_e);break;case 22:if(dt=et!==null&&et.memoizedState!==null,_e.mode&1?(U=(ct=U)||dt,ck(_,_e),U=ct):ck(_,_e),ek(_e),tt&8192){if(ct=_e.memoizedState!==null,(_e.stateNode.isHidden=ct)&&!dt&&_e.mode&1)for(V=_e,dt=_e.child;dt!==null;){for(st=V=dt;V!==null;){switch(it=V,ut=it.child,it.tag){case 0:case 11:case 14:case 15:Pj(4,it,it.return);break;case 1:Lj(it,it.return);var ht=it.stateNode;if(typeof ht.componentWillUnmount=="function"){tt=it,et=it.return;try{_=tt,ht.props=_.memoizedProps,ht.state=_.memoizedState,ht.componentWillUnmount()}catch(ft){W(tt,et,ft)}}break;case 5:Lj(it,it.return);break;case 22:if(it.memoizedState!==null){gk(st);continue}}ut!==null?(ut.return=it,V=ut):gk(st)}dt=dt.sibling}e:for(dt=null,st=_e;;){if(st.tag===5){if(dt===null){dt=st;try{rt=st.stateNode,ct?(nt=rt.style,typeof nt.setProperty=="function"?nt.setProperty("display","none","important"):nt.display="none"):(at=st.stateNode,lt=st.memoizedProps.style,ot=lt!=null&&lt.hasOwnProperty("display")?lt.display:null,at.style.display=rb("display",ot))}catch(ft){W(_e,_e.return,ft)}}}else if(st.tag===6){if(dt===null)try{st.stateNode.nodeValue=ct?"":st.memoizedProps}catch(ft){W(_e,_e.return,ft)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===_e)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===_e)break e;for(;st.sibling===null;){if(st.return===null||st.return===_e)break e;dt===st&&(dt=null),st=st.return}dt===st&&(dt=null),st.sibling.return=st.return,st=st.sibling}}break;case 19:ck(_,_e),ek(_e),tt&4&&ak(_e);break;case 21:break;default:ck(_,_e),ek(_e)}}function ek(_e){var _=_e.flags;if(_&2){try{e:{for(var et=_e.return;et!==null;){if(Tj(et)){var tt=et;break e}et=et.return}throw Error(p$2(160))}switch(tt.tag){case 5:var rt=tt.stateNode;tt.flags&32&&(ob(rt,""),tt.flags&=-33);var nt=Uj(_e);Wj(_e,nt,rt);break;case 3:case 4:var ot=tt.stateNode.containerInfo,at=Uj(_e);Vj(_e,at,ot);break;default:throw Error(p$2(161))}}catch(lt){W(_e,_e.return,lt)}_e.flags&=-3}_&4096&&(_e.flags&=-4097)}function hk(_e,_,et){V=_e,ik(_e)}function ik(_e,_,et){for(var tt=(_e.mode&1)!==0;V!==null;){var rt=V,nt=rt.child;if(rt.tag===22&&tt){var ot=rt.memoizedState!==null||Jj;if(!ot){var at=rt.alternate,lt=at!==null&&at.memoizedState!==null||U;at=Jj;var ct=U;if(Jj=ot,(U=lt)&&!ct)for(V=rt;V!==null;)ot=V,lt=ot.child,ot.tag===22&&ot.memoizedState!==null?jk(rt):lt!==null?(lt.return=ot,V=lt):jk(rt);for(;nt!==null;)V=nt,ik(nt),nt=nt.sibling;V=rt,Jj=at,U=ct}kk(_e)}else rt.subtreeFlags&8772&&nt!==null?(nt.return=rt,V=nt):kk(_e)}}function kk(_e){for(;V!==null;){var _=V;if(_.flags&8772){var et=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:U||Qj(5,_);break;case 1:var tt=_.stateNode;if(_.flags&4&&!U)if(et===null)tt.componentDidMount();else{var rt=_.elementType===_.type?et.memoizedProps:Ci(_.type,et.memoizedProps);tt.componentDidUpdate(rt,et.memoizedState,tt.__reactInternalSnapshotBeforeUpdate)}var nt=_.updateQueue;nt!==null&&sh(_,nt,tt);break;case 3:var ot=_.updateQueue;if(ot!==null){if(et=null,_.child!==null)switch(_.child.tag){case 5:et=_.child.stateNode;break;case 1:et=_.child.stateNode}sh(_,ot,et)}break;case 5:var at=_.stateNode;if(et===null&&_.flags&4){et=at;var lt=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":lt.autoFocus&&et.focus();break;case"img":lt.src&&(et.src=lt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var ct=_.alternate;if(ct!==null){var dt=ct.memoizedState;if(dt!==null){var st=dt.dehydrated;st!==null&&bd(st)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U||_.flags&512&&Rj(_)}catch(it){W(_,_.return,it)}}if(_===_e){V=null;break}if(et=_.sibling,et!==null){et.return=_.return,V=et;break}V=_.return}}function gk(_e){for(;V!==null;){var _=V;if(_===_e){V=null;break}var et=_.sibling;if(et!==null){et.return=_.return,V=et;break}V=_.return}}function jk(_e){for(;V!==null;){var _=V;try{switch(_.tag){case 0:case 11:case 15:var et=_.return;try{Qj(4,_)}catch(lt){W(_,et,lt)}break;case 1:var tt=_.stateNode;if(typeof tt.componentDidMount=="function"){var rt=_.return;try{tt.componentDidMount()}catch(lt){W(_,rt,lt)}}var nt=_.return;try{Rj(_)}catch(lt){W(_,nt,lt)}break;case 5:var ot=_.return;try{Rj(_)}catch(lt){W(_,ot,lt)}}}catch(lt){W(_,_.return,lt)}if(_===_e){V=null;break}var at=_.sibling;if(at!==null){at.return=_.return,V=at;break}V=_.return}}var lk=Math.ceil,mk=ua$1.ReactCurrentDispatcher,nk=ua$1.ReactCurrentOwner,ok=ua$1.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(_e){return _e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(_e=C,_e!==0||(_e=window.event,_e=_e===void 0?16:jd(_e.type)),_e):1}function gi(_e,_,et,tt){if(50<yk)throw yk=0,zk=null,Error(p$2(185));Ac(_e,et,tt),(!(K&2)||_e!==Q)&&(_e===Q&&(!(K&2)&&(qk|=et),T===4&&Ck(_e,Z)),Dk(_e,tt),et===1&&K===0&&!(_.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(_e,_){var et=_e.callbackNode;wc(_e,_);var tt=uc(_e,_e===Q?Z:0);if(tt===0)et!==null&&bc(et),_e.callbackNode=null,_e.callbackPriority=0;else if(_=tt&-tt,_e.callbackPriority!==_){if(et!=null&&bc(et),_===1)_e.tag===0?ig(Ek.bind(null,_e)):hg(Ek.bind(null,_e)),Jf(function(){!(K&6)&&jg()}),et=null;else{switch(Dc(tt)){case 1:et=fc;break;case 4:et=gc;break;case 16:et=hc;break;case 536870912:et=jc;break;default:et=hc}et=Fk(et,Gk.bind(null,_e))}_e.callbackPriority=_,_e.callbackNode=et}}function Gk(_e,_){if(Ak=-1,Bk=0,K&6)throw Error(p$2(327));var et=_e.callbackNode;if(Hk()&&_e.callbackNode!==et)return null;var tt=uc(_e,_e===Q?Z:0);if(tt===0)return null;if(tt&30||tt&_e.expiredLanes||_)_=Ik(_e,tt);else{_=tt;var rt=K;K|=2;var nt=Jk();(Q!==_e||Z!==_)&&(uk=null,Gj=B()+500,Kk(_e,_));do try{Lk();break}catch(at){Mk(_e,at)}while(!0);$g(),mk.current=nt,K=rt,Y!==null?_=0:(Q=null,Z=0,_=T)}if(_!==0){if(_===2&&(rt=xc(_e),rt!==0&&(tt=rt,_=Nk(_e,rt))),_===1)throw et=pk,Kk(_e,0),Ck(_e,tt),Dk(_e,B()),et;if(_===6)Ck(_e,tt);else{if(rt=_e.current.alternate,!(tt&30)&&!Ok(rt)&&(_=Ik(_e,tt),_===2&&(nt=xc(_e),nt!==0&&(tt=nt,_=Nk(_e,nt))),_===1))throw et=pk,Kk(_e,0),Ck(_e,tt),Dk(_e,B()),et;switch(_e.finishedWork=rt,_e.finishedLanes=tt,_){case 0:case 1:throw Error(p$2(345));case 2:Pk(_e,tk,uk);break;case 3:if(Ck(_e,tt),(tt&130023424)===tt&&(_=fk+500-B(),10<_)){if(uc(_e,0)!==0)break;if(rt=_e.suspendedLanes,(rt&tt)!==tt){R(),_e.pingedLanes|=_e.suspendedLanes&rt;break}_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),_);break}Pk(_e,tk,uk);break;case 4:if(Ck(_e,tt),(tt&4194240)===tt)break;for(_=_e.eventTimes,rt=-1;0<tt;){var ot=31-oc(tt);nt=1<<ot,ot=_[ot],ot>rt&&(rt=ot),tt&=~nt}if(tt=rt,tt=B()-tt,tt=(120>tt?120:480>tt?480:1080>tt?1080:1920>tt?1920:3e3>tt?3e3:4320>tt?4320:1960*lk(tt/1960))-tt,10<tt){_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),tt);break}Pk(_e,tk,uk);break;case 5:Pk(_e,tk,uk);break;default:throw Error(p$2(329))}}}return Dk(_e,B()),_e.callbackNode===et?Gk.bind(null,_e):null}function Nk(_e,_){var et=sk;return _e.current.memoizedState.isDehydrated&&(Kk(_e,_).flags|=256),_e=Ik(_e,_),_e!==2&&(_=tk,tk=et,_!==null&&Fj(_)),_e}function Fj(_e){tk===null?tk=_e:tk.push.apply(tk,_e)}function Ok(_e){for(var _=_e;;){if(_.flags&16384){var et=_.updateQueue;if(et!==null&&(et=et.stores,et!==null))for(var tt=0;tt<et.length;tt++){var rt=et[tt],nt=rt.getSnapshot;rt=rt.value;try{if(!He(nt(),rt))return!1}catch{return!1}}}if(et=_.child,_.subtreeFlags&16384&&et!==null)et.return=_,_=et;else{if(_===_e)break;for(;_.sibling===null;){if(_.return===null||_.return===_e)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Ck(_e,_){for(_&=~rk,_&=~qk,_e.suspendedLanes|=_,_e.pingedLanes&=~_,_e=_e.expirationTimes;0<_;){var et=31-oc(_),tt=1<<et;_e[et]=-1,_&=~tt}}function Ek(_e){if(K&6)throw Error(p$2(327));Hk();var _=uc(_e,0);if(!(_&1))return Dk(_e,B()),null;var et=Ik(_e,_);if(_e.tag!==0&&et===2){var tt=xc(_e);tt!==0&&(_=tt,et=Nk(_e,tt))}if(et===1)throw et=pk,Kk(_e,0),Ck(_e,_),Dk(_e,B()),et;if(et===6)throw Error(p$2(345));return _e.finishedWork=_e.current.alternate,_e.finishedLanes=_,Pk(_e,tk,uk),Dk(_e,B()),null}function Qk(_e,_){var et=K;K|=1;try{return _e(_)}finally{K=et,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(_e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var _=K;K|=1;var et=ok.transition,tt=C;try{if(ok.transition=null,C=1,_e)return _e()}finally{C=tt,ok.transition=et,K=_,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(_e,_){_e.finishedWork=null,_e.finishedLanes=0;var et=_e.timeoutHandle;if(et!==-1&&(_e.timeoutHandle=-1,Gf(et)),Y!==null)for(et=Y.return;et!==null;){var tt=et;switch(wg(tt),tt.tag){case 1:tt=tt.type.childContextTypes,tt!=null&&$f();break;case 3:zh(),E(Wf),E(H$1),Eh();break;case 5:Bh(tt);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(tt.type._context);break;case 22:case 23:Hj()}et=et.return}if(Q=_e,Y=_e=Pg(_e.current,null),Z=fj=_,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(_=0;_<fh.length;_++)if(et=fh[_],tt=et.interleaved,tt!==null){et.interleaved=null;var rt=tt.next,nt=et.pending;if(nt!==null){var ot=nt.next;nt.next=rt,tt.next=ot}et.pending=tt}fh=null}return _e}function Mk(_e,_){do{var et=Y;try{if($g(),Fh.current=Rh,Ih){for(var tt=M$1.memoizedState;tt!==null;){var rt=tt.queue;rt!==null&&(rt.pending=null),tt=tt.next}Ih=!1}if(Hh=0,O=N$1=M$1=null,Jh=!1,Kh=0,nk.current=null,et===null||et.return===null){T=1,pk=_,Y=null;break}e:{var nt=_e,ot=et.return,at=et,lt=_;if(_=Z,at.flags|=32768,lt!==null&&typeof lt=="object"&&typeof lt.then=="function"){var ct=lt,dt=at,st=dt.tag;if(!(dt.mode&1)&&(st===0||st===11||st===15)){var it=dt.alternate;it?(dt.updateQueue=it.updateQueue,dt.memoizedState=it.memoizedState,dt.lanes=it.lanes):(dt.updateQueue=null,dt.memoizedState=null)}var ut=Ui(ot);if(ut!==null){ut.flags&=-257,Vi(ut,ot,at,nt,_),ut.mode&1&&Si(nt,ct,_),_=ut,lt=ct;var ht=_.updateQueue;if(ht===null){var ft=new Set;ft.add(lt),_.updateQueue=ft}else ht.add(lt);break e}else{if(!(_&1)){Si(nt,ct,_),tj();break e}lt=Error(p$2(426))}}else if(I&&at.mode&1){var gt=Ui(ot);if(gt!==null){!(gt.flags&65536)&&(gt.flags|=256),Vi(gt,ot,at,nt,_),Jg(Ji(lt,at));break e}}nt=lt=Ji(lt,at),T!==4&&(T=2),sk===null?sk=[nt]:sk.push(nt),nt=ot;do{switch(nt.tag){case 3:nt.flags|=65536,_&=-_,nt.lanes|=_;var mt=Ni(nt,lt,_);ph(nt,mt);break e;case 1:at=lt;var yt=nt.type,bt=nt.stateNode;if(!(nt.flags&128)&&(typeof yt.getDerivedStateFromError=="function"||bt!==null&&typeof bt.componentDidCatch=="function"&&(Ri===null||!Ri.has(bt)))){nt.flags|=65536,_&=-_,nt.lanes|=_;var vt=Qi(nt,at,_);ph(nt,vt);break e}}nt=nt.return}while(nt!==null)}Sk(et)}catch(xt){_=xt,Y===et&&et!==null&&(Y=et=et.return);continue}break}while(!0)}function Jk(){var _e=mk.current;return mk.current=Rh,_e===null?Rh:_e}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(_e,_){var et=K;K|=2;var tt=Jk();(Q!==_e||Z!==_)&&(uk=null,Kk(_e,_));do try{Tk();break}catch(rt){Mk(_e,rt)}while(!0);if($g(),K=et,mk.current=tt,Y!==null)throw Error(p$2(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(_e){var _=Vk(_e.alternate,_e,fj);_e.memoizedProps=_e.pendingProps,_===null?Sk(_e):Y=_,nk.current=null}function Sk(_e){var _=_e;do{var et=_.alternate;if(_e=_.return,_.flags&32768){if(et=Ij(et,_),et!==null){et.flags&=32767,Y=et;return}if(_e!==null)_e.flags|=32768,_e.subtreeFlags=0,_e.deletions=null;else{T=6,Y=null;return}}else if(et=Ej(et,_,fj),et!==null){Y=et;return}if(_=_.sibling,_!==null){Y=_;return}Y=_=_e}while(_!==null);T===0&&(T=5)}function Pk(_e,_,et){var tt=C,rt=ok.transition;try{ok.transition=null,C=1,Wk(_e,_,et,tt)}finally{ok.transition=rt,C=tt}return null}function Wk(_e,_,et,tt){do Hk();while(wk!==null);if(K&6)throw Error(p$2(327));et=_e.finishedWork;var rt=_e.finishedLanes;if(et===null)return null;if(_e.finishedWork=null,_e.finishedLanes=0,et===_e.current)throw Error(p$2(177));_e.callbackNode=null,_e.callbackPriority=0;var nt=et.lanes|et.childLanes;if(Bc(_e,nt),_e===Q&&(Y=Q=null,Z=0),!(et.subtreeFlags&2064)&&!(et.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),nt=(et.flags&15990)!==0,et.subtreeFlags&15990||nt){nt=ok.transition,ok.transition=null;var ot=C;C=1;var at=K;K|=4,nk.current=null,Oj(_e,et),dk(et,_e),Oe(Df),dd=!!Cf,Df=Cf=null,_e.current=et,hk(et),dc(),K=at,C=ot,ok.transition=nt}else _e.current=et;if(vk&&(vk=!1,wk=_e,xk=rt),nt=_e.pendingLanes,nt===0&&(Ri=null),mc(et.stateNode),Dk(_e,B()),_!==null)for(tt=_e.onRecoverableError,et=0;et<_.length;et++)rt=_[et],tt(rt.value,{componentStack:rt.stack,digest:rt.digest});if(Oi)throw Oi=!1,_e=Pi,Pi=null,_e;return xk&1&&_e.tag!==0&&Hk(),nt=_e.pendingLanes,nt&1?_e===zk?yk++:(yk=0,zk=_e):yk=0,jg(),null}function Hk(){if(wk!==null){var _e=Dc(xk),_=ok.transition,et=C;try{if(ok.transition=null,C=16>_e?16:_e,wk===null)var tt=!1;else{if(_e=wk,wk=null,xk=0,K&6)throw Error(p$2(331));var rt=K;for(K|=4,V=_e.current;V!==null;){var nt=V,ot=nt.child;if(V.flags&16){var at=nt.deletions;if(at!==null){for(var lt=0;lt<at.length;lt++){var ct=at[lt];for(V=ct;V!==null;){var dt=V;switch(dt.tag){case 0:case 11:case 15:Pj(8,dt,nt)}var st=dt.child;if(st!==null)st.return=dt,V=st;else for(;V!==null;){dt=V;var it=dt.sibling,ut=dt.return;if(Sj(dt),dt===ct){V=null;break}if(it!==null){it.return=ut,V=it;break}V=ut}}}var ht=nt.alternate;if(ht!==null){var ft=ht.child;if(ft!==null){ht.child=null;do{var gt=ft.sibling;ft.sibling=null,ft=gt}while(ft!==null)}}V=nt}}if(nt.subtreeFlags&2064&&ot!==null)ot.return=nt,V=ot;else e:for(;V!==null;){if(nt=V,nt.flags&2048)switch(nt.tag){case 0:case 11:case 15:Pj(9,nt,nt.return)}var mt=nt.sibling;if(mt!==null){mt.return=nt.return,V=mt;break e}V=nt.return}}var yt=_e.current;for(V=yt;V!==null;){ot=V;var bt=ot.child;if(ot.subtreeFlags&2064&&bt!==null)bt.return=ot,V=bt;else e:for(ot=yt;V!==null;){if(at=V,at.flags&2048)try{switch(at.tag){case 0:case 11:case 15:Qj(9,at)}}catch(xt){W(at,at.return,xt)}if(at===ot){V=null;break e}var vt=at.sibling;if(vt!==null){vt.return=at.return,V=vt;break e}V=at.return}}if(K=rt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,_e)}catch{}tt=!0}return tt}finally{C=et,ok.transition=_}}return!1}function Xk(_e,_,et){_=Ji(et,_),_=Ni(_e,_,1),_e=nh(_e,_,1),_=R(),_e!==null&&(Ac(_e,1,_),Dk(_e,_))}function W(_e,_,et){if(_e.tag===3)Xk(_e,_e,et);else for(;_!==null;){if(_.tag===3){Xk(_,_e,et);break}else if(_.tag===1){var tt=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof tt.componentDidCatch=="function"&&(Ri===null||!Ri.has(tt))){_e=Ji(et,_e),_e=Qi(_,_e,1),_=nh(_,_e,1),_e=R(),_!==null&&(Ac(_,1,_e),Dk(_,_e));break}}_=_.return}}function Ti(_e,_,et){var tt=_e.pingCache;tt!==null&&tt.delete(_),_=R(),_e.pingedLanes|=_e.suspendedLanes&et,Q===_e&&(Z&et)===et&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(_e,0):rk|=et),Dk(_e,_)}function Yk(_e,_){_===0&&(_e.mode&1?(_=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_=1);var et=R();_e=ih(_e,_),_e!==null&&(Ac(_e,_,et),Dk(_e,et))}function uj(_e){var _=_e.memoizedState,et=0;_!==null&&(et=_.retryLane),Yk(_e,et)}function bk(_e,_){var et=0;switch(_e.tag){case 13:var tt=_e.stateNode,rt=_e.memoizedState;rt!==null&&(et=rt.retryLane);break;case 19:tt=_e.stateNode;break;default:throw Error(p$2(314))}tt!==null&&tt.delete(_),Yk(_e,et)}var Vk;Vk=function(_e,_,et){if(_e!==null)if(_e.memoizedProps!==_.pendingProps||Wf.current)dh=!0;else{if(!(_e.lanes&et)&&!(_.flags&128))return dh=!1,yj(_e,_,et);dh=!!(_e.flags&131072)}else dh=!1,I&&_.flags&1048576&&ug(_,ng,_.index);switch(_.lanes=0,_.tag){case 2:var tt=_.type;ij(_e,_),_e=_.pendingProps;var rt=Yf(_,H$1.current);ch(_,et),rt=Nh(null,_,tt,_e,rt,et);var nt=Sh();return _.flags|=1,typeof rt=="object"&&rt!==null&&typeof rt.render=="function"&&rt.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Zf(tt)?(nt=!0,cg(_)):nt=!1,_.memoizedState=rt.state!==null&&rt.state!==void 0?rt.state:null,kh(_),rt.updater=Ei,_.stateNode=rt,rt._reactInternals=_,Ii(_,tt,_e,et),_=jj(null,_,tt,!0,nt,et)):(_.tag=0,I&&nt&&vg(_),Xi(null,_,rt,et),_=_.child),_;case 16:tt=_.elementType;e:{switch(ij(_e,_),_e=_.pendingProps,rt=tt._init,tt=rt(tt._payload),_.type=tt,rt=_.tag=Zk(tt),_e=Ci(tt,_e),rt){case 0:_=cj(null,_,tt,_e,et);break e;case 1:_=hj(null,_,tt,_e,et);break e;case 11:_=Yi(null,_,tt,_e,et);break e;case 14:_=$i(null,_,tt,Ci(tt.type,_e),et);break e}throw Error(p$2(306,tt,""))}return _;case 0:return tt=_.type,rt=_.pendingProps,rt=_.elementType===tt?rt:Ci(tt,rt),cj(_e,_,tt,rt,et);case 1:return tt=_.type,rt=_.pendingProps,rt=_.elementType===tt?rt:Ci(tt,rt),hj(_e,_,tt,rt,et);case 3:e:{if(kj(_),_e===null)throw Error(p$2(387));tt=_.pendingProps,nt=_.memoizedState,rt=nt.element,lh(_e,_),qh(_,tt,null,et);var ot=_.memoizedState;if(tt=ot.element,nt.isDehydrated)if(nt={element:tt,isDehydrated:!1,cache:ot.cache,pendingSuspenseBoundaries:ot.pendingSuspenseBoundaries,transitions:ot.transitions},_.updateQueue.baseState=nt,_.memoizedState=nt,_.flags&256){rt=Ji(Error(p$2(423)),_),_=lj(_e,_,tt,et,rt);break e}else if(tt!==rt){rt=Ji(Error(p$2(424)),_),_=lj(_e,_,tt,et,rt);break e}else for(yg=Lf(_.stateNode.containerInfo.firstChild),xg=_,I=!0,zg=null,et=Vg(_,null,tt,et),_.child=et;et;)et.flags=et.flags&-3|4096,et=et.sibling;else{if(Ig(),tt===rt){_=Zi(_e,_,et);break e}Xi(_e,_,tt,et)}_=_.child}return _;case 5:return Ah(_),_e===null&&Eg(_),tt=_.type,rt=_.pendingProps,nt=_e!==null?_e.memoizedProps:null,ot=rt.children,Ef(tt,rt)?ot=null:nt!==null&&Ef(tt,nt)&&(_.flags|=32),gj(_e,_),Xi(_e,_,ot,et),_.child;case 6:return _e===null&&Eg(_),null;case 13:return oj(_e,_,et);case 4:return yh(_,_.stateNode.containerInfo),tt=_.pendingProps,_e===null?_.child=Ug(_,null,tt,et):Xi(_e,_,tt,et),_.child;case 11:return tt=_.type,rt=_.pendingProps,rt=_.elementType===tt?rt:Ci(tt,rt),Yi(_e,_,tt,rt,et);case 7:return Xi(_e,_,_.pendingProps,et),_.child;case 8:return Xi(_e,_,_.pendingProps.children,et),_.child;case 12:return Xi(_e,_,_.pendingProps.children,et),_.child;case 10:e:{if(tt=_.type._context,rt=_.pendingProps,nt=_.memoizedProps,ot=rt.value,G(Wg,tt._currentValue),tt._currentValue=ot,nt!==null)if(He(nt.value,ot)){if(nt.children===rt.children&&!Wf.current){_=Zi(_e,_,et);break e}}else for(nt=_.child,nt!==null&&(nt.return=_);nt!==null;){var at=nt.dependencies;if(at!==null){ot=nt.child;for(var lt=at.firstContext;lt!==null;){if(lt.context===tt){if(nt.tag===1){lt=mh(-1,et&-et),lt.tag=2;var ct=nt.updateQueue;if(ct!==null){ct=ct.shared;var dt=ct.pending;dt===null?lt.next=lt:(lt.next=dt.next,dt.next=lt),ct.pending=lt}}nt.lanes|=et,lt=nt.alternate,lt!==null&&(lt.lanes|=et),bh(nt.return,et,_),at.lanes|=et;break}lt=lt.next}}else if(nt.tag===10)ot=nt.type===_.type?null:nt.child;else if(nt.tag===18){if(ot=nt.return,ot===null)throw Error(p$2(341));ot.lanes|=et,at=ot.alternate,at!==null&&(at.lanes|=et),bh(ot,et,_),ot=nt.sibling}else ot=nt.child;if(ot!==null)ot.return=nt;else for(ot=nt;ot!==null;){if(ot===_){ot=null;break}if(nt=ot.sibling,nt!==null){nt.return=ot.return,ot=nt;break}ot=ot.return}nt=ot}Xi(_e,_,rt.children,et),_=_.child}return _;case 9:return rt=_.type,tt=_.pendingProps.children,ch(_,et),rt=eh(rt),tt=tt(rt),_.flags|=1,Xi(_e,_,tt,et),_.child;case 14:return tt=_.type,rt=Ci(tt,_.pendingProps),rt=Ci(tt.type,rt),$i(_e,_,tt,rt,et);case 15:return bj(_e,_,_.type,_.pendingProps,et);case 17:return tt=_.type,rt=_.pendingProps,rt=_.elementType===tt?rt:Ci(tt,rt),ij(_e,_),_.tag=1,Zf(tt)?(_e=!0,cg(_)):_e=!1,ch(_,et),Gi(_,tt,rt),Ii(_,tt,rt,et),jj(null,_,tt,!0,_e,et);case 19:return xj(_e,_,et);case 22:return dj(_e,_,et)}throw Error(p$2(156,_.tag))};function Fk(_e,_){return ac(_e,_)}function $k(_e,_,et,tt){this.tag=_e,this.key=et,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=tt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_e,_,et,tt){return new $k(_e,_,et,tt)}function aj(_e){return _e=_e.prototype,!(!_e||!_e.isReactComponent)}function Zk(_e){if(typeof _e=="function")return aj(_e)?1:0;if(_e!=null){if(_e=_e.$$typeof,_e===Da)return 11;if(_e===Ga)return 14}return 2}function Pg(_e,_){var et=_e.alternate;return et===null?(et=Bg(_e.tag,_,_e.key,_e.mode),et.elementType=_e.elementType,et.type=_e.type,et.stateNode=_e.stateNode,et.alternate=_e,_e.alternate=et):(et.pendingProps=_,et.type=_e.type,et.flags=0,et.subtreeFlags=0,et.deletions=null),et.flags=_e.flags&14680064,et.childLanes=_e.childLanes,et.lanes=_e.lanes,et.child=_e.child,et.memoizedProps=_e.memoizedProps,et.memoizedState=_e.memoizedState,et.updateQueue=_e.updateQueue,_=_e.dependencies,et.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},et.sibling=_e.sibling,et.index=_e.index,et.ref=_e.ref,et}function Rg(_e,_,et,tt,rt,nt){var ot=2;if(tt=_e,typeof _e=="function")aj(_e)&&(ot=1);else if(typeof _e=="string")ot=5;else e:switch(_e){case ya:return Tg(et.children,rt,nt,_);case za:ot=8,rt|=8;break;case Aa:return _e=Bg(12,et,_,rt|2),_e.elementType=Aa,_e.lanes=nt,_e;case Ea:return _e=Bg(13,et,_,rt),_e.elementType=Ea,_e.lanes=nt,_e;case Fa:return _e=Bg(19,et,_,rt),_e.elementType=Fa,_e.lanes=nt,_e;case Ia:return pj(et,rt,nt,_);default:if(typeof _e=="object"&&_e!==null)switch(_e.$$typeof){case Ba:ot=10;break e;case Ca:ot=9;break e;case Da:ot=11;break e;case Ga:ot=14;break e;case Ha:ot=16,tt=null;break e}throw Error(p$2(130,_e==null?_e:typeof _e,""))}return _=Bg(ot,et,_,rt),_.elementType=_e,_.type=tt,_.lanes=nt,_}function Tg(_e,_,et,tt){return _e=Bg(7,_e,tt,_),_e.lanes=et,_e}function pj(_e,_,et,tt){return _e=Bg(22,_e,tt,_),_e.elementType=Ia,_e.lanes=et,_e.stateNode={isHidden:!1},_e}function Qg(_e,_,et){return _e=Bg(6,_e,null,_),_e.lanes=et,_e}function Sg(_e,_,et){return _=Bg(4,_e.children!==null?_e.children:[],_e.key,_),_.lanes=et,_.stateNode={containerInfo:_e.containerInfo,pendingChildren:null,implementation:_e.implementation},_}function al(_e,_,et,tt,rt){this.tag=_,this.containerInfo=_e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=tt,this.onRecoverableError=rt,this.mutableSourceEagerHydrationData=null}function bl(_e,_,et,tt,rt,nt,ot,at,lt){return _e=new al(_e,_,et,at,lt),_===1?(_=1,nt===!0&&(_|=8)):_=0,nt=Bg(3,null,null,_),_e.current=nt,nt.stateNode=_e,nt.memoizedState={element:tt,isDehydrated:et,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(nt),_e}function cl(_e,_,et){var tt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:tt==null?null:""+tt,children:_e,containerInfo:_,implementation:et}}function dl(_e){if(!_e)return Vf;_e=_e._reactInternals;e:{if(Vb(_e)!==_e||_e.tag!==1)throw Error(p$2(170));var _=_e;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Zf(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(p$2(171))}if(_e.tag===1){var et=_e.type;if(Zf(et))return bg(_e,et,_)}return _}function el(_e,_,et,tt,rt,nt,ot,at,lt){return _e=bl(et,tt,!0,_e,rt,nt,ot,at,lt),_e.context=dl(null),et=_e.current,tt=R(),rt=yi(et),nt=mh(tt,rt),nt.callback=_??null,nh(et,nt,rt),_e.current.lanes=rt,Ac(_e,rt,tt),Dk(_e,tt),_e}function fl(_e,_,et,tt){var rt=_.current,nt=R(),ot=yi(rt);return et=dl(et),_.context===null?_.context=et:_.pendingContext=et,_=mh(nt,ot),_.payload={element:_e},tt=tt===void 0?null:tt,tt!==null&&(_.callback=tt),_e=nh(rt,_,ot),_e!==null&&(gi(_e,rt,ot,nt),oh(_e,rt,ot)),ot}function gl(_e){if(_e=_e.current,!_e.child)return null;switch(_e.child.tag){case 5:return _e.child.stateNode;default:return _e.child.stateNode}}function hl(_e,_){if(_e=_e.memoizedState,_e!==null&&_e.dehydrated!==null){var et=_e.retryLane;_e.retryLane=et!==0&&et<_?et:_}}function il(_e,_){hl(_e,_),(_e=_e.alternate)&&hl(_e,_)}var kl=typeof reportError=="function"?reportError:function(_e){console.error(_e)};function ll(_e){this._internalRoot=_e}ml.prototype.render=ll.prototype.render=function(_e){var _=this._internalRoot;if(_===null)throw Error(p$2(409));fl(_e,_,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var _e=this._internalRoot;if(_e!==null){this._internalRoot=null;var _=_e.containerInfo;Rk(function(){fl(null,_e,null,null)}),_[uf]=null}};function ml(_e){this._internalRoot=_e}ml.prototype.unstable_scheduleHydration=function(_e){if(_e){var _=Hc();_e={blockedOn:null,target:_e,priority:_};for(var et=0;et<Qc.length&&_!==0&&_<Qc[et].priority;et++);Qc.splice(et,0,_e),et===0&&Vc(_e)}};function nl(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11)}function ol(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11&&(_e.nodeType!==8||_e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(_e,_,et,tt,rt){if(rt){if(typeof tt=="function"){var nt=tt;tt=function(){var ct=gl(ot);nt.call(ct)}}var ot=el(_,tt,_e,0,null,!1,!1,"",pl);return _e._reactRootContainer=ot,_e[uf]=ot.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(),ot}for(;rt=_e.lastChild;)_e.removeChild(rt);if(typeof tt=="function"){var at=tt;tt=function(){var ct=gl(lt);at.call(ct)}}var lt=bl(_e,0,!1,null,null,!1,!1,"",pl);return _e._reactRootContainer=lt,_e[uf]=lt.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(function(){fl(_,lt,et,tt)}),lt}function rl(_e,_,et,tt,rt){var nt=et._reactRootContainer;if(nt){var ot=nt;if(typeof rt=="function"){var at=rt;rt=function(){var lt=gl(ot);at.call(lt)}}fl(_,ot,_e,rt)}else ot=ql(et,_,_e,rt,tt);return gl(ot)}Ec=function(_e){switch(_e.tag){case 3:var _=_e.stateNode;if(_.current.memoizedState.isDehydrated){var et=tc(_.pendingLanes);et!==0&&(Cc(_,et|1),Dk(_,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var tt=ih(_e,1);if(tt!==null){var rt=R();gi(tt,_e,1,rt)}}),il(_e,1)}};Fc=function(_e){if(_e.tag===13){var _=ih(_e,134217728);if(_!==null){var et=R();gi(_,_e,134217728,et)}il(_e,134217728)}};Gc=function(_e){if(_e.tag===13){var _=yi(_e),et=ih(_e,_);if(et!==null){var tt=R();gi(et,_e,_,tt)}il(_e,_)}};Hc=function(){return C};Ic=function(_e,_){var et=C;try{return C=_e,_()}finally{C=et}};yb=function(_e,_,et){switch(_){case"input":if(bb(_e,et),_=et.name,et.type==="radio"&&_!=null){for(et=_e;et.parentNode;)et=et.parentNode;for(et=et.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<et.length;_++){var tt=et[_];if(tt!==_e&&tt.form===_e.form){var rt=Db(tt);if(!rt)throw Error(p$2(90));Wa(tt),bb(tt,rt)}}}break;case"textarea":ib(_e,et);break;case"select":_=et.value,_!=null&&fb(_e,!!et.multiple,_,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(_e){return _e=Zb(_e),_e===null?null:_e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(_e,_){var et=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(_))throw Error(p$2(200));return cl(_e,_,null,et)};reactDom_production_min.createRoot=function(_e,_){if(!nl(_e))throw Error(p$2(299));var et=!1,tt="",rt=kl;return _!=null&&(_.unstable_strictMode===!0&&(et=!0),_.identifierPrefix!==void 0&&(tt=_.identifierPrefix),_.onRecoverableError!==void 0&&(rt=_.onRecoverableError)),_=bl(_e,1,!1,null,null,et,!1,tt,rt),_e[uf]=_.current,sf(_e.nodeType===8?_e.parentNode:_e),new ll(_)};reactDom_production_min.findDOMNode=function(_e){if(_e==null)return null;if(_e.nodeType===1)return _e;var _=_e._reactInternals;if(_===void 0)throw typeof _e.render=="function"?Error(p$2(188)):(_e=Object.keys(_e).join(","),Error(p$2(268,_e)));return _e=Zb(_),_e=_e===null?null:_e.stateNode,_e};reactDom_production_min.flushSync=function(_e){return Rk(_e)};reactDom_production_min.hydrate=function(_e,_,et){if(!ol(_))throw Error(p$2(200));return rl(null,_e,_,!0,et)};reactDom_production_min.hydrateRoot=function(_e,_,et){if(!nl(_e))throw Error(p$2(405));var tt=et!=null&&et.hydratedSources||null,rt=!1,nt="",ot=kl;if(et!=null&&(et.unstable_strictMode===!0&&(rt=!0),et.identifierPrefix!==void 0&&(nt=et.identifierPrefix),et.onRecoverableError!==void 0&&(ot=et.onRecoverableError)),_=el(_,null,_e,1,et??null,rt,!1,nt,ot),_e[uf]=_.current,sf(_e),tt)for(_e=0;_e<tt.length;_e++)et=tt[_e],rt=et._getVersion,rt=rt(et._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[et,rt]:_.mutableSourceEagerHydrationData.push(et,rt);return new ml(_)};reactDom_production_min.render=function(_e,_,et){if(!ol(_))throw Error(p$2(200));return rl(null,_e,_,!1,et)};reactDom_production_min.unmountComponentAtNode=function(_e){if(!ol(_e))throw Error(p$2(40));return _e._reactRootContainer?(Rk(function(){rl(null,null,_e,!1,function(){_e._reactRootContainer=null,_e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_e,_,et,tt){if(!ol(et))throw Error(p$2(200));if(_e==null||_e._reactInternals===void 0)throw Error(p$2(38));return rl(_e,_,et,!1,tt)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_e){console.error(_e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m$2=reactDomExports;createRoot=m$2.createRoot,m$2.hydrateRoot;const cx=(..._e)=>_e.filter(Boolean).map(_=>_.trim()).join(" ");function getErrorMessage$1(_e,_){return`${_e} returned \`undefined\`. Seems you forgot to wrap component within ${_}`}function createContext$1(_e={}){const{name:_,strict:et=!0,hookName:tt="useContext",providerName:rt="Provider",errorMessage:nt,defaultValue:ot}=_e,at=reactExports.createContext(ot);at.displayName=_;function lt(){var dt;const ct=reactExports.useContext(at);if(!ct&&et){const st=new Error(nt??getErrorMessage$1(tt,rt));throw st.name="ContextError",(dt=Error.captureStackTrace)==null||dt.call(Error,st,lt),st}return ct}return[at.Provider,lt,at]}function callAll$1(..._e){return function(...et){_e.forEach(tt=>tt==null?void 0:tt(...et))}}const clsx$1=(..._e)=>_e.map(_=>{var et;return(et=_==null?void 0:_.trim)==null?void 0:et.call(_)}).filter(Boolean).join(" "),eventRegex=/^on[A-Z]/;function mergeProps$1(..._e){let _={};for(let et of _e){for(let tt in _){if(eventRegex.test(tt)&&typeof _[tt]=="function"&&typeof et[tt]=="function"){_[tt]=callAll$1(_[tt],et[tt]);continue}if(tt==="className"||tt==="class"){_[tt]=clsx$1(_[tt],et[tt]);continue}if(tt==="style"){_[tt]=Object.assign({},_[tt]??{},et[tt]??{});continue}_[tt]=et[tt]!==void 0?et[tt]:_[tt]}for(let tt in et)_[tt]===void 0&&(_[tt]=et[tt])}return _}const EMPTY_STYLES=Object.freeze({}),EMPTY_SLOT_STYLES=Object.freeze({});function memoize(_e){var _=Object.create(null);return function(et){return _[et]===void 0&&(_[et]=_e(et)),_[et]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid$1=memoize(function(_e){return reactPropsRegex.test(_e)||_e.charCodeAt(0)===111&&_e.charCodeAt(1)===110&&_e.charCodeAt(2)<91}),isDevelopment$1=!1;function sheetForTag(_e){if(_e.sheet)return _e.sheet;for(var _=0;_<document.styleSheets.length;_++)if(document.styleSheets[_].ownerNode===_e)return document.styleSheets[_]}function createStyleElement(_e){var _=document.createElement("style");return _.setAttribute("data-emotion",_e.key),_e.nonce!==void 0&&_.setAttribute("nonce",_e.nonce),_.appendChild(document.createTextNode("")),_.setAttribute("data-s",""),_}var StyleSheet=function(){function _e(et){var tt=this;this._insertTag=function(rt){var nt;tt.tags.length===0?tt.insertionPoint?nt=tt.insertionPoint.nextSibling:tt.prepend?nt=tt.container.firstChild:nt=tt.before:nt=tt.tags[tt.tags.length-1].nextSibling,tt.container.insertBefore(rt,nt),tt.tags.push(rt)},this.isSpeedy=et.speedy===void 0?!isDevelopment$1:et.speedy,this.tags=[],this.ctr=0,this.nonce=et.nonce,this.key=et.key,this.container=et.container,this.prepend=et.prepend,this.insertionPoint=et.insertionPoint,this.before=null}var _=_e.prototype;return _.hydrate=function(tt){tt.forEach(this._insertTag)},_.insert=function(tt){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var rt=this.tags[this.tags.length-1];if(this.isSpeedy){var nt=sheetForTag(rt);try{nt.insertRule(tt,nt.cssRules.length)}catch{}}else rt.appendChild(document.createTextNode(tt));this.ctr++},_.flush=function(){this.tags.forEach(function(tt){var rt;return(rt=tt.parentNode)==null?void 0:rt.removeChild(tt)}),this.tags=[],this.ctr=0},_e}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs$2=Math.abs,from=String.fromCharCode,assign$1=Object.assign;function hash(_e,_){return charat(_e,0)^45?(((_<<2^charat(_e,0))<<2^charat(_e,1))<<2^charat(_e,2))<<2^charat(_e,3):0}function trim(_e){return _e.trim()}function match$3(_e,_){return(_e=_.exec(_e))?_e[0]:_e}function replace$1(_e,_,et){return _e.replace(_,et)}function indexof(_e,_){return _e.indexOf(_)}function charat(_e,_){return _e.charCodeAt(_)|0}function substr(_e,_,et){return _e.slice(_,et)}function strlen(_e){return _e.length}function sizeof(_e){return _e.length}function append(_e,_){return _.push(_e),_e}function combine$1(_e,_){return _e.map(_).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(_e,_,et,tt,rt,nt,ot){return{value:_e,root:_,parent:et,type:tt,props:rt,children:nt,line,column,length:ot,return:""}}function copy(_e,_){return assign$1(node("",null,null,"",null,null,0),_e,{length:-_e.length},_)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(_e,_){return substr(characters,_e,_)}function token(_e){switch(_e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(_e){return line=column=1,length=strlen(characters=_e),position=0,[]}function dealloc(_e){return characters="",_e}function delimit(_e){return trim(slice(position-1,delimiter(_e===91?_e+2:_e===40?_e+1:_e)))}function whitespace(_e){for(;(character=peek())&&character<33;)next();return token(_e)>2||token(character)>3?"":" "}function escaping(_e,_){for(;--_&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(_e,caret()+(_<6&&peek()==32&&next()==32))}function delimiter(_e){for(;next();)switch(character){case _e:return position;case 34:case 39:_e!==34&&_e!==39&&delimiter(character);break;case 40:_e===41&&delimiter(_e);break;case 92:next();break}return position}function commenter(_e,_){for(;next()&&_e+character!==57;)if(_e+character===84&&peek()===47)break;return"/*"+slice(_,position-1)+"*"+from(_e===47?_e:next())}function identifier(_e){for(;!token(peek());)next();return slice(_e,position)}function compile(_e){return dealloc(parse$3("",null,null,null,[""],_e=alloc(_e),0,[0],_e))}function parse$3(_e,_,et,tt,rt,nt,ot,at,lt){for(var ct=0,dt=0,st=ot,it=0,ut=0,ht=0,ft=1,gt=1,mt=1,yt=0,bt="",vt=rt,xt=nt,wt=tt,St=bt;gt;)switch(ht=yt,yt=next()){case 40:if(ht!=108&&charat(St,st-1)==58){indexof(St+=replace$1(delimit(yt),"&","&\f"),"&\f")!=-1&&(mt=-1);break}case 34:case 39:case 91:St+=delimit(yt);break;case 9:case 10:case 13:case 32:St+=whitespace(ht);break;case 92:St+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),_,et),lt);break;default:St+="/"}break;case 123*ft:at[ct++]=strlen(St)*mt;case 125*ft:case 59:case 0:switch(yt){case 0:case 125:gt=0;case 59+dt:mt==-1&&(St=replace$1(St,/\f/g,"")),ut>0&&strlen(St)-st&&append(ut>32?declaration(St+";",tt,et,st-1):declaration(replace$1(St," ","")+";",tt,et,st-2),lt);break;case 59:St+=";";default:if(append(wt=ruleset(St,_,et,ct,dt,rt,at,bt,vt=[],xt=[],st),nt),yt===123)if(dt===0)parse$3(St,_,wt,wt,vt,nt,st,at,xt);else switch(it===99&&charat(St,3)===110?100:it){case 100:case 108:case 109:case 115:parse$3(_e,wt,wt,tt&&append(ruleset(_e,wt,wt,0,0,rt,at,bt,rt,vt=[],st),xt),rt,xt,st,at,tt?vt:xt);break;default:parse$3(St,wt,wt,wt,[""],xt,0,at,xt)}}ct=dt=ut=0,ft=mt=1,bt=St="",st=ot;break;case 58:st=1+strlen(St),ut=ht;default:if(ft<1){if(yt==123)--ft;else if(yt==125&&ft++==0&&prev()==125)continue}switch(St+=from(yt),yt*ft){case 38:mt=dt>0?1:(St+="\f",-1);break;case 44:at[ct++]=(strlen(St)-1)*mt,mt=1;break;case 64:peek()===45&&(St+=delimit(next())),it=peek(),dt=st=strlen(bt=St+=identifier(caret())),yt++;break;case 45:ht===45&&strlen(St)==2&&(ft=0)}}return nt}function ruleset(_e,_,et,tt,rt,nt,ot,at,lt,ct,dt){for(var st=rt-1,it=rt===0?nt:[""],ut=sizeof(it),ht=0,ft=0,gt=0;ht<tt;++ht)for(var mt=0,yt=substr(_e,st+1,st=abs$2(ft=ot[ht])),bt=_e;mt<ut;++mt)(bt=trim(ft>0?it[mt]+" "+yt:replace$1(yt,/&\f/g,it[mt])))&&(lt[gt++]=bt);return node(_e,_,et,rt===0?RULESET:at,lt,ct,dt)}function comment(_e,_,et){return node(_e,_,et,COMMENT,from(char()),substr(_e,2,-2),0)}function declaration(_e,_,et,tt){return node(_e,_,et,DECLARATION,substr(_e,0,tt),substr(_e,tt+1,-1),tt)}function serialize$1(_e,_){for(var et="",tt=sizeof(_e),rt=0;rt<tt;rt++)et+=_(_e[rt],rt,_e,_)||"";return et}function stringify$2(_e,_,et,tt){switch(_e.type){case LAYER:if(_e.children.length)break;case IMPORT:case DECLARATION:return _e.return=_e.return||_e.value;case COMMENT:return"";case KEYFRAMES:return _e.return=_e.value+"{"+serialize$1(_e.children,tt)+"}";case RULESET:_e.value=_e.props.join(",")}return strlen(et=serialize$1(_e.children,tt))?_e.return=_e.value+"{"+et+"}":""}function middleware(_e){var _=sizeof(_e);return function(et,tt,rt,nt){for(var ot="",at=0;at<_;at++)ot+=_e[at](et,tt,rt,nt)||"";return ot}}function rulesheet(_e){return function(_){_.root||(_=_.return)&&_e(_)}}var identifierWithPointTracking=function(_,et,tt){for(var rt=0,nt=0;rt=nt,nt=peek(),rt===38&&nt===12&&(et[tt]=1),!token(nt);)next();return slice(_,position)},toRules=function(_,et){var tt=-1,rt=44;do switch(token(rt)){case 0:rt===38&&peek()===12&&(et[tt]=1),_[tt]+=identifierWithPointTracking(position-1,et,tt);break;case 2:_[tt]+=delimit(rt);break;case 4:if(rt===44){_[++tt]=peek()===58?"&\f":"",et[tt]=_[tt].length;break}default:_[tt]+=from(rt)}while(rt=next());return _},getRules=function(_,et){return dealloc(toRules(alloc(_),et))},fixedElements=new WeakMap,compat=function(_){if(!(_.type!=="rule"||!_.parent||_.length<1)){for(var et=_.value,tt=_.parent,rt=_.column===tt.column&&_.line===tt.line;tt.type!=="rule";)if(tt=tt.parent,!tt)return;if(!(_.props.length===1&&et.charCodeAt(0)!==58&&!fixedElements.get(tt))&&!rt){fixedElements.set(_,!0);for(var nt=[],ot=getRules(et,nt),at=tt.props,lt=0,ct=0;lt<ot.length;lt++)for(var dt=0;dt<at.length;dt++,ct++)_.props[ct]=nt[lt]?ot[lt].replace(/&\f/g,at[dt]):at[dt]+" "+ot[lt]}}},removeLabel=function(_){if(_.type==="decl"){var et=_.value;et.charCodeAt(0)===108&&et.charCodeAt(2)===98&&(_.return="",_.value="")}};function prefix(_e,_){switch(hash(_e,_)){case 5103:return WEBKIT+"print-"+_e+_e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+_e+_e;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+_e+MOZ+_e+MS+_e+_e;case 6828:case 4268:return WEBKIT+_e+MS+_e+_e;case 6165:return WEBKIT+_e+MS+"flex-"+_e+_e;case 5187:return WEBKIT+_e+replace$1(_e,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+_e;case 5443:return WEBKIT+_e+MS+"flex-item-"+replace$1(_e,/flex-|-self/,"")+_e;case 4675:return WEBKIT+_e+MS+"flex-line-pack"+replace$1(_e,/align-content|flex-|-self/,"")+_e;case 5548:return WEBKIT+_e+MS+replace$1(_e,"shrink","negative")+_e;case 5292:return WEBKIT+_e+MS+replace$1(_e,"basis","preferred-size")+_e;case 6060:return WEBKIT+"box-"+replace$1(_e,"-grow","")+WEBKIT+_e+MS+replace$1(_e,"grow","positive")+_e;case 4554:return WEBKIT+replace$1(_e,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+_e;case 6187:return replace$1(replace$1(replace$1(_e,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),_e,"")+_e;case 5495:case 3959:return replace$1(_e,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace$1(replace$1(_e,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+_e+_e;case 4095:case 3583:case 4068:case 2532:return replace$1(_e,/(.+)-inline(.+)/,WEBKIT+"$1$2")+_e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(_e)-1-_>6)switch(charat(_e,_+1)){case 109:if(charat(_e,_+4)!==45)break;case 102:return replace$1(_e,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(_e,_+3)==108?"$3":"$2-$3"))+_e;case 115:return~indexof(_e,"stretch")?prefix(replace$1(_e,"stretch","fill-available"),_)+_e:_e}break;case 4949:if(charat(_e,_+1)!==115)break;case 6444:switch(charat(_e,strlen(_e)-3-(~indexof(_e,"!important")&&10))){case 107:return replace$1(_e,":",":"+WEBKIT)+_e;case 101:return replace$1(_e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(_e,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+_e}break;case 5936:switch(charat(_e,_+11)){case 114:return WEBKIT+_e+MS+replace$1(_e,/[svh]\w+-[tblr]{2}/,"tb")+_e;case 108:return WEBKIT+_e+MS+replace$1(_e,/[svh]\w+-[tblr]{2}/,"tb-rl")+_e;case 45:return WEBKIT+_e+MS+replace$1(_e,/[svh]\w+-[tblr]{2}/,"lr")+_e}return WEBKIT+_e+MS+_e+_e}return _e}var prefixer=function(_,et,tt,rt){if(_.length>-1&&!_.return)switch(_.type){case DECLARATION:_.return=prefix(_.value,_.length);break;case KEYFRAMES:return serialize$1([copy(_,{value:replace$1(_.value,"@","@"+WEBKIT)})],rt);case RULESET:if(_.length)return combine$1(_.props,function(nt){switch(match$3(nt,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize$1([copy(_,{props:[replace$1(nt,/:(read-\w+)/,":"+MOZ+"$1")]})],rt);case"::placeholder":return serialize$1([copy(_,{props:[replace$1(nt,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(_,{props:[replace$1(nt,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(_,{props:[replace$1(nt,/:(plac\w+)/,MS+"input-$1")]})],rt)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(_){var et=_.key;if(et==="css"){var tt=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(tt,function(ft){var gt=ft.getAttribute("data-emotion");gt.indexOf(" ")!==-1&&(document.head.appendChild(ft),ft.setAttribute("data-s",""))})}var rt=_.stylisPlugins||defaultStylisPlugins,nt={},ot,at=[];ot=_.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+et+' "]'),function(ft){for(var gt=ft.getAttribute("data-emotion").split(" "),mt=1;mt<gt.length;mt++)nt[gt[mt]]=!0;at.push(ft)});var lt,ct=[compat,removeLabel];{var dt,st=[stringify$2,rulesheet(function(ft){dt.insert(ft)})],it=middleware(ct.concat(rt,st)),ut=function(gt){return serialize$1(compile(gt),it)};lt=function(gt,mt,yt,bt){dt=yt,ut(gt?gt+"{"+mt.styles+"}":mt.styles),bt&&(ht.inserted[mt.name]=!0)}}var ht={key:et,sheet:new StyleSheet({key:et,container:ot,nonce:_.nonce,speedy:_.speedy,prepend:_.prepend,insertionPoint:_.insertionPoint}),nonce:_.nonce,inserted:nt,registered:{},insert:lt};return ht.sheet.hydrate(at),ht},reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=typeof Symbol=="function"&&Symbol.for,c$1=b$1?Symbol.for("react.element"):60103,d$1=b$1?Symbol.for("react.portal"):60106,e$1=b$1?Symbol.for("react.fragment"):60107,f$1=b$1?Symbol.for("react.strict_mode"):60108,g$1=b$1?Symbol.for("react.profiler"):60114,h$1=b$1?Symbol.for("react.provider"):60109,k$1=b$1?Symbol.for("react.context"):60110,l$1=b$1?Symbol.for("react.async_mode"):60111,m$1=b$1?Symbol.for("react.concurrent_mode"):60111,n$1=b$1?Symbol.for("react.forward_ref"):60112,p$1=b$1?Symbol.for("react.suspense"):60113,q=b$1?Symbol.for("react.suspense_list"):60120,r$1=b$1?Symbol.for("react.memo"):60115,t$1=b$1?Symbol.for("react.lazy"):60116,v$1=b$1?Symbol.for("react.block"):60121,w$1=b$1?Symbol.for("react.fundamental"):60117,x$1=b$1?Symbol.for("react.responder"):60118,y$1=b$1?Symbol.for("react.scope"):60119;function z(_e){if(typeof _e=="object"&&_e!==null){var _=_e.$$typeof;switch(_){case c$1:switch(_e=_e.type,_e){case l$1:case m$1:case e$1:case g$1:case f$1:case p$1:return _e;default:switch(_e=_e&&_e.$$typeof,_e){case k$1:case n$1:case t$1:case r$1:case h$1:return _e;default:return _}}case d$1:return _}}}function A(_e){return z(_e)===m$1}reactIs_production_min.AsyncMode=l$1;reactIs_production_min.ConcurrentMode=m$1;reactIs_production_min.ContextConsumer=k$1;reactIs_production_min.ContextProvider=h$1;reactIs_production_min.Element=c$1;reactIs_production_min.ForwardRef=n$1;reactIs_production_min.Fragment=e$1;reactIs_production_min.Lazy=t$1;reactIs_production_min.Memo=r$1;reactIs_production_min.Portal=d$1;reactIs_production_min.Profiler=g$1;reactIs_production_min.StrictMode=f$1;reactIs_production_min.Suspense=p$1;reactIs_production_min.isAsyncMode=function(_e){return A(_e)||z(_e)===l$1};reactIs_production_min.isConcurrentMode=A;reactIs_production_min.isContextConsumer=function(_e){return z(_e)===k$1};reactIs_production_min.isContextProvider=function(_e){return z(_e)===h$1};reactIs_production_min.isElement=function(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===c$1};reactIs_production_min.isForwardRef=function(_e){return z(_e)===n$1};reactIs_production_min.isFragment=function(_e){return z(_e)===e$1};reactIs_production_min.isLazy=function(_e){return z(_e)===t$1};reactIs_production_min.isMemo=function(_e){return z(_e)===r$1};reactIs_production_min.isPortal=function(_e){return z(_e)===d$1};reactIs_production_min.isProfiler=function(_e){return z(_e)===g$1};reactIs_production_min.isStrictMode=function(_e){return z(_e)===f$1};reactIs_production_min.isSuspense=function(_e){return z(_e)===p$1};reactIs_production_min.isValidElementType=function(_e){return typeof _e=="string"||typeof _e=="function"||_e===e$1||_e===m$1||_e===g$1||_e===f$1||_e===p$1||_e===q||typeof _e=="object"&&_e!==null&&(_e.$$typeof===t$1||_e.$$typeof===r$1||_e.$$typeof===h$1||_e.$$typeof===k$1||_e.$$typeof===n$1||_e.$$typeof===w$1||_e.$$typeof===x$1||_e.$$typeof===y$1||_e.$$typeof===v$1)};reactIs_production_min.typeOf=z;reactIs$1.exports=reactIs_production_min;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser$1=!0;function getRegisteredStyles(_e,_,et){var tt="";return et.split(" ").forEach(function(rt){_e[rt]!==void 0?_.push(_e[rt]+";"):rt&&(tt+=rt+" ")}),tt}var registerStyles=function(_,et,tt){var rt=_.key+"-"+et.name;(tt===!1||isBrowser$1===!1)&&_.registered[rt]===void 0&&(_.registered[rt]=et.styles)},insertStyles=function(_,et,tt){registerStyles(_,et,tt);var rt=_.key+"-"+et.name;if(_.inserted[et.name]===void 0){var nt=et;do _.insert(et===nt?"."+rt:"",nt,_.sheet,!0),nt=nt.next;while(nt!==void 0)}};function murmur2(_e){for(var _=0,et,tt=0,rt=_e.length;rt>=4;++tt,rt-=4)et=_e.charCodeAt(tt)&255|(_e.charCodeAt(++tt)&255)<<8|(_e.charCodeAt(++tt)&255)<<16|(_e.charCodeAt(++tt)&255)<<24,et=(et&65535)*1540483477+((et>>>16)*59797<<16),et^=et>>>24,_=(et&65535)*1540483477+((et>>>16)*59797<<16)^(_&65535)*1540483477+((_>>>16)*59797<<16);switch(rt){case 3:_^=(_e.charCodeAt(tt+2)&255)<<16;case 2:_^=(_e.charCodeAt(tt+1)&255)<<8;case 1:_^=_e.charCodeAt(tt)&255,_=(_&65535)*1540483477+((_>>>16)*59797<<16)}return _^=_>>>13,_=(_&65535)*1540483477+((_>>>16)*59797<<16),((_^_>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(_){return _.charCodeAt(1)===45},isProcessableValue=function(_){return _!=null&&typeof _!="boolean"},processStyleName=memoize(function(_e){return isCustomProperty(_e)?_e:_e.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(_,et){switch(_){case"animation":case"animationName":if(typeof et=="string")return et.replace(animationRegex,function(tt,rt,nt){return cursor$1={name:rt,styles:nt,next:cursor$1},rt})}return unitlessKeys[_]!==1&&!isCustomProperty(_)&&typeof et=="number"&&et!==0?et+"px":et};function handleInterpolation(_e,_,et){if(et==null)return"";var tt=et;if(tt.__emotion_styles!==void 0)return tt;switch(typeof et){case"boolean":return"";case"object":{var rt=et;if(rt.anim===1)return cursor$1={name:rt.name,styles:rt.styles,next:cursor$1},rt.name;var nt=et;if(nt.styles!==void 0){var ot=nt.next;if(ot!==void 0)for(;ot!==void 0;)cursor$1={name:ot.name,styles:ot.styles,next:cursor$1},ot=ot.next;var at=nt.styles+";";return at}return createStringFromObject(_e,_,et)}case"function":{if(_e!==void 0){var lt=cursor$1,ct=et(_e);return cursor$1=lt,handleInterpolation(_e,_,ct)}break}}var dt=et;if(_==null)return dt;var st=_[dt];return st!==void 0?st:dt}function createStringFromObject(_e,_,et){var tt="";if(Array.isArray(et))for(var rt=0;rt<et.length;rt++)tt+=handleInterpolation(_e,_,et[rt])+";";else for(var nt in et){var ot=et[nt];if(typeof ot!="object"){var at=ot;_!=null&&_[at]!==void 0?tt+=nt+"{"+_[at]+"}":isProcessableValue(at)&&(tt+=processStyleName(nt)+":"+processStyleValue(nt,at)+";")}else if(Array.isArray(ot)&&typeof ot[0]=="string"&&(_==null||_[ot[0]]===void 0))for(var lt=0;lt<ot.length;lt++)isProcessableValue(ot[lt])&&(tt+=processStyleName(nt)+":"+processStyleValue(nt,ot[lt])+";");else{var ct=handleInterpolation(_e,_,ot);switch(nt){case"animation":case"animationName":{tt+=processStyleName(nt)+":"+ct+";";break}default:tt+=nt+"{"+ct+"}"}}}return tt}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor$1;function serializeStyles(_e,_,et){if(_e.length===1&&typeof _e[0]=="object"&&_e[0]!==null&&_e[0].styles!==void 0)return _e[0];var tt=!0,rt="";cursor$1=void 0;var nt=_e[0];if(nt==null||nt.raw===void 0)tt=!1,rt+=handleInterpolation(et,_,nt);else{var ot=nt;rt+=ot[0]}for(var at=1;at<_e.length;at++)if(rt+=handleInterpolation(et,_,_e[at]),tt){var lt=nt;rt+=lt[at]}labelPattern.lastIndex=0;for(var ct="",dt;(dt=labelPattern.exec(rt))!==null;)ct+="-"+dt[1];var st=murmur2(rt)+ct;return{name:st,styles:rt,next:cursor$1}}var syncFallback=function(_){return _()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,isDevelopment=!1,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(_){return reactExports.forwardRef(function(et,tt){var rt=reactExports.useContext(EmotionCacheContext);return _(et,rt,tt)})},ThemeContext=reactExports.createContext({}),hasOwn$2={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(_,et){var tt={};for(var rt in et)hasOwn$2.call(et,rt)&&(tt[rt]=et[rt]);return tt[typePropName]=_,tt},Insertion$1=function(_){var et=_.cache,tt=_.serialized,rt=_.isStringTag;return registerStyles(et,tt,rt),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(et,tt,rt)}),null},Emotion=withEmotionCache(function(_e,_,et){var tt=_e.css;typeof tt=="string"&&_.registered[tt]!==void 0&&(tt=_.registered[tt]);var rt=_e[typePropName],nt=[tt],ot="";typeof _e.className=="string"?ot=getRegisteredStyles(_.registered,nt,_e.className):_e.className!=null&&(ot=_e.className+" ");var at=serializeStyles(nt,void 0,reactExports.useContext(ThemeContext));ot+=_.key+"-"+at.name;var lt={};for(var ct in _e)hasOwn$2.call(_e,ct)&&ct!=="css"&&ct!==typePropName&&!isDevelopment&&(lt[ct]=_e[ct]);return lt.className=ot,et&&(lt.ref=et),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$1,{cache:_,serialized:at,isStringTag:typeof rt=="string"}),reactExports.createElement(rt,lt))}),Emotion$1=Emotion,jsx=function(_,et){var tt=arguments;if(et==null||!hasOwn$2.call(et,"css"))return reactExports.createElement.apply(void 0,tt);var rt=tt.length,nt=new Array(rt);nt[0]=Emotion$1,nt[1]=createEmotionProps(_,et);for(var ot=2;ot<rt;ot++)nt[ot]=tt[ot];return reactExports.createElement.apply(null,nt)};(function(_e){var _;_||(_=_e.JSX||(_e.JSX={}))})(jsx);var Global=withEmotionCache(function(_e,_){var et=_e.styles,tt=serializeStyles([et],void 0,reactExports.useContext(ThemeContext)),rt=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var nt=_.key+"-global",ot=new _.sheet.constructor({key:nt,nonce:_.sheet.nonce,container:_.sheet.container,speedy:_.sheet.isSpeedy}),at=!1,lt=document.querySelector('style[data-emotion="'+nt+" "+tt.name+'"]');return _.sheet.tags.length&&(ot.before=_.sheet.tags[0]),lt!==null&&(at=!0,lt.setAttribute("data-emotion",nt),ot.hydrate([lt])),rt.current=[ot,at],function(){ot.flush()}},[_]),useInsertionEffectWithLayoutFallback(function(){var nt=rt.current,ot=nt[0],at=nt[1];if(at){nt[1]=!1;return}if(tt.next!==void 0&&insertStyles(_,tt.next,!0),ot.tags.length){var lt=ot.tags[ot.tags.length-1].nextElementSibling;ot.before=lt,ot.flush()}_.insert("",tt,ot,!1)},[_,tt.name]),null});function assignRef(_e,_){if(_e!=null){if(typeof _e=="function"){_e(_);return}try{_e.current=_}catch{throw new Error(`Cannot assign value '${_}' to ref '${_e}'`)}}}function mergeRefs(..._e){return _=>{_e.forEach(et=>{assignRef(et,_)})}}function compact$3(_e){const _=Object.assign({},_e);for(let et in _)_[et]===void 0&&delete _[et];return _}function interopDefault(_e){return _e.default||_e}const[ChakraContextProvider,useChakraContext]=createContext$1({name:"ChakraContext",strict:!0,providerName:"<ChakraProvider />"});function ChakraProvider(_e){const{value:_,children:et}=_e;return jsxRuntimeExports.jsxs(ChakraContextProvider,{value:_,children:[!_._config.disableLayers&&jsxRuntimeExports.jsx(Global,{styles:_.layers.atRule}),jsxRuntimeExports.jsx(Global,{styles:[_.getPreflightCss(),_.getGlobalCss(),_.getTokenCss()]}),et]})}const splitProps=(_e,_)=>{const et=Object.getOwnPropertyDescriptors(_e),tt=Object.keys(et),rt=ot=>{const at={};for(let lt=0;lt<ot.length;lt++){const ct=ot[lt];et[ct]&&(Object.defineProperty(at,ct,et[ct]),delete et[ct])}return at},nt=ot=>rt(Array.isArray(ot)?ot:tt.filter(ot));return[_].map(nt).concat(rt(tt))};function useResolvedProps(_e,_,et){const{css:tt,isValidProperty:rt}=useChakraContext(),{children:nt,...ot}=_e,at=reactExports.useMemo(()=>{const[it,ut]=splitProps(ot,["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]),[ht,ft]=splitProps(ut,vt=>et(vt,_.variantKeys)),[gt,mt]=splitProps(ft,_.variantKeys),[yt,bt]=splitProps(mt,rt);return{htmlProps:getHtmlProps(it),forwardedProps:ht,variantProps:gt,styleProps:yt,elementProps:bt}},[_.variantKeys,et,ot,rt]),{css:lt,...ct}=at.styleProps,dt=reactExports.useMemo(()=>_(at.variantProps),[_,at.variantProps]);return{styles:reactExports.useMemo(()=>tt(dt,...toArray$1(lt),ct),[tt,dt,lt,ct]),props:{...at.forwardedProps,...at.elementProps,...at.htmlProps,children:nt}}}const getHtmlProps=_e=>{const _={};for(const et in _e)et.startsWith("html")&&(_[et.replace("html","").toLowerCase()]=_e[et]);return _},toArray$1=_e=>(Array.isArray(_e)?_e:[_e]).filter(Boolean).flat(),isPropValid=interopDefault(isPropValid$1),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=_e=>_e!=="theme",composeShouldForwardProps=(_e,_,et)=>{let tt;if(_){const rt=_.shouldForwardProp;tt=_e.__emotion_forwardProp&&rt?nt=>_e.__emotion_forwardProp(nt)&&rt(nt):rt}return typeof tt!="function"&&et&&(tt=_e.__emotion_forwardProp),tt};let isBrowser=typeof document<"u";const Insertion=({cache:_e,serialized:_,isStringTag:et})=>{registerStyles(_e,_,et);const tt=useInsertionEffectAlwaysWithSyncFallback(()=>insertStyles(_e,_,et));if(!isBrowser&&tt!==void 0){let rt=_.name,nt=_.next;for(;nt!==void 0;)rt=cx(rt,nt.name),nt=nt.next;return jsxRuntimeExports.jsx("style",{"data-emotion":cx(_e.key,rt),dangerouslySetInnerHTML:{__html:tt},nonce:_e.sheet.nonce})}return null},createStyled=(_e,_={},et={})=>{const tt=_e.__emotion_real===_e,rt=tt&&_e.__emotion_base||_e;let nt,ot;et!==void 0&&(nt=et.label,ot=et.target);let at=[];const lt=withEmotionCache((ct,dt,st)=>{var Ct;const{cva:it,isValidProperty:ut}=useChakraContext(),ht=_.__cva__?_:it(_),ft=mergeCva$1(_e.__emotion_cva,ht),gt=$t=>(Mt,Dt)=>$t.includes(Mt)?!0:!(Dt!=null&&Dt.includes(Mt))&&!ut(Mt);!et.shouldForwardProp&&et.forwardProps&&(et.shouldForwardProp=gt(et.forwardProps));const mt=($t,Mt)=>{const Dt=typeof _e=="string"&&_e.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent,Nt=!(Mt!=null&&Mt.includes($t))&&!ut($t);return Dt($t)&&Nt},yt=composeShouldForwardProps(_e,et,tt)||mt,bt=reactExports.useMemo(()=>Object.assign({},et.defaultProps,compact$3(ct)),[ct]),{props:vt,styles:xt}=useResolvedProps(bt,ft,yt);let wt="",St=[xt],Et=vt;if(vt.theme==null){Et={};for(let $t in vt)Et[$t]=vt[$t];Et.theme=reactExports.useContext(ThemeContext)}typeof vt.className=="string"?wt=getRegisteredStyles(dt.registered,St,vt.className):vt.className!=null&&(wt=cx(wt,vt.className));const _t=serializeStyles(at.concat(St),dt.registered,Et);wt=cx(wt,`${dt.key}-${_t.name}`),ot!==void 0&&(wt=cx(wt,ot));const Tt=!yt("as");let Rt=Tt&&vt.as||rt,Ot={};for(let $t in vt)Tt&&$t==="as"||yt($t)&&(Ot[$t]=vt[$t]);Ot.className=wt.trim(),Ot.ref=st;const At=et.forwardAsChild||((Ct=et.forwardProps)==null?void 0:Ct.includes("asChild"));if(vt.asChild&&!At){const $t=reactExports.Children.only(vt.children);Rt=$t.type,Ot.children=null,Reflect.deleteProperty(Ot,"asChild"),Ot=mergeProps$1(Ot,$t.props),Ot.ref=mergeRefs(st,$t.ref)}return Ot.as&&At?(Ot.as=void 0,jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Insertion,{cache:dt,serialized:_t,isStringTag:typeof Rt=="string"}),jsxRuntimeExports.jsx(Rt,{asChild:!0,...Ot,children:jsxRuntimeExports.jsx(vt.as,{children:Ot.children})})]})):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Insertion,{cache:dt,serialized:_t,isStringTag:typeof Rt=="string"}),jsxRuntimeExports.jsx(Rt,{...Ot})]})});return lt.displayName=nt!==void 0?nt:`Styled(${typeof rt=="string"?rt:rt.displayName||rt.name||"Component"})`,lt.__emotion_real=lt,lt.__emotion_base=rt,lt.__emotion_forwardProp=et.shouldForwardProp,lt.__emotion_cva=_,Object.defineProperty(lt,"toString",{value(){return`.${ot}`}}),lt},styledFn=createStyled.bind(),cache=new Map,chakraImpl=new Proxy(styledFn,{apply(_e,_,et){return styledFn(...et)},get(_e,_){return cache.has(_)||cache.set(_,styledFn(_)),cache.get(_)}}),chakra=chakraImpl,mergeCva$1=(_e,_)=>_e&&!_?_e:!_e&&_?_:_e.merge(_);function useRecipe(_e){const{key:_,recipe:et}=_e,tt=useChakraContext();return reactExports.useMemo(()=>{const rt=et||(_!=null?tt.getRecipe(_):{});return tt.cva(structuredClone(rt))},[_,et,tt])}const upperFirst$1=_e=>_e.charAt(0).toUpperCase()+_e.slice(1);function createRecipeContext(_e){const{key:_,recipe:et}=_e,tt=upperFirst$1(_||et.className||"Component"),[rt,nt]=createContext$1({strict:!1,name:`${tt}PropsContext`,providerName:`${tt}PropsContext`});function ot(ct){const{unstyled:dt,...st}=ct,it=useRecipe({key:_,recipe:st.recipe||et}),[ut,ht]=it.splitVariantProps(st);return{styles:dt?EMPTY_STYLES:it(ut),className:it.className,props:ht}}const at=(ct,dt)=>{const st=chakra(ct,{},dt),it=reactExports.forwardRef((ut,ht)=>{const ft=mergeProps$1(nt(),ut),{styles:gt,className:mt,props:yt}=ot(ft);return jsxRuntimeExports.jsx(st,{...yt,ref:ht,css:[gt,ft.css],className:cx(mt,ft.className)})});return it.displayName=ct.displayName||ct.name,it};function lt(){return rt}return{withContext:at,PropsProvider:rt,withPropsProvider:lt,usePropsContext:nt,useRecipeResult:ot}}var dataAttr$1=_e=>_e?"":void 0,ariaAttr=_e=>_e?"true":void 0,MAX_Z_INDEX=2147483647,ELEMENT_NODE=1,DOCUMENT_NODE=9,DOCUMENT_FRAGMENT_NODE=11,isObject$4=_e=>typeof _e=="object"&&_e!==null,isHTMLElement$1=_e=>isObject$4(_e)&&_e.nodeType===ELEMENT_NODE&&typeof _e.nodeName=="string",isDocument=_e=>isObject$4(_e)&&_e.nodeType===DOCUMENT_NODE,isWindow=_e=>isObject$4(_e)&&_e===_e.window,getNodeName$1=_e=>isHTMLElement$1(_e)?_e.localName||"":"#document";function isRootElement(_e){return["html","body","#document"].includes(getNodeName$1(_e))}var isNode$1=_e=>isObject$4(_e)&&_e.nodeType!==void 0,isShadowRoot$1=_e=>isNode$1(_e)&&_e.nodeType===DOCUMENT_FRAGMENT_NODE&&"host"in _e;function contains(_e,_){return!_e||!_||!isHTMLElement$1(_e)||!isHTMLElement$1(_)?!1:_e===_||_e.contains(_)}function getDocument(_e){return isDocument(_e)?_e:isWindow(_e)?_e.document:(_e==null?void 0:_e.ownerDocument)??document}function getDocumentElement$1(_e){return getDocument(_e).documentElement}function getWindow$2(_e){var _;return isShadowRoot$1(_e)?getWindow$2(_e.host):isDocument(_e)?_e.defaultView??window:isHTMLElement$1(_e)?((_=_e.ownerDocument)==null?void 0:_.defaultView)??window:window}function getActiveElement(_e){let _=_e.activeElement;for(;_!=null&&_.shadowRoot;){const et=_.shadowRoot.activeElement;if(et===_)break;_=et}return _}var isDom=()=>typeof document<"u";function getPlatform(){const _e=navigator.userAgentData;return(_e==null?void 0:_e.platform)??navigator.platform}var pt=_e=>isDom()&&_e.test(getPlatform()),ua=_e=>isDom()&&_e.test(navigator.userAgent),vn=_e=>isDom()&&_e.test(navigator.vendor),isMac=()=>pt(/^Mac/),isSafari=()=>isApple()&&vn(/apple/i),isFirefox=()=>ua(/firefox\//i),isApple=()=>pt(/mac|iphone|ipad|ipod/i),isIos=()=>pt(/iP(hone|ad|od)|iOS/);function getComposedPath(_e){var _,et,tt;return((_=_e.composedPath)==null?void 0:_.call(_e))??((tt=(et=_e.nativeEvent)==null?void 0:et.composedPath)==null?void 0:tt.call(et))}function getEventTarget(_e){const _=getComposedPath(_e);return(_==null?void 0:_[0])??_e.target}var isSelfTarget=_e=>contains(_e.currentTarget,getEventTarget(_e));function isComposingEvent(_e){var _;return((_=_e.nativeEvent)==null?void 0:_.isComposing)??_e.isComposing}var defaultItemToId=_e=>_e.id;function itemById(_e,_,et=defaultItemToId){return _e.find(tt=>et(tt)===_)}function indexOfId(_e,_,et=defaultItemToId){const tt=itemById(_e,_,et);return tt?_e.indexOf(tt):-1}function nextById(_e,_,et=!0){let tt=indexOfId(_e,_);return tt=et?(tt+1)%_e.length:Math.min(tt+1,_e.length-1),_e[tt]}function prevById(_e,_,et=!0){let tt=indexOfId(_e,_);return tt===-1?et?_e[_e.length-1]:null:(tt=et?(tt-1+_e.length)%_e.length:Math.max(0,tt-1),_e[tt])}var sanitize=_e=>_e.split("").map(_=>{const et=_.charCodeAt(0);return et>0&&et<128?_:et>=128&&et<=255?`/x${et.toString(16)}`.replace("/","\\"):""}).join("").trim(),getValueText=_e=>{var _;return sanitize(((_=_e.dataset)==null?void 0:_.valuetext)??_e.textContent??"")},match$2=(_e,_)=>_e.trim().toLowerCase().startsWith(_.toLowerCase()),wrap$3=(_e,_)=>_e.map((et,tt)=>_e[(Math.max(_,0)+tt)%_e.length]);function getByText(_e,_,et,tt=defaultItemToId){const rt=et?indexOfId(_e,et,tt):-1;let nt=et?wrap$3(_e,rt):_e;return _.length===1&&(nt=nt.filter(at=>tt(at)!==et)),nt.find(at=>match$2(getValueText(at),_))}function getByTypeaheadImpl(_e,_){const{state:et,activeId:tt,key:rt,timeout:nt=350,itemToId:ot}=_,at=et.keysSoFar+rt,ct=at.length>1&&Array.from(at).every(ht=>ht===at[0])?at[0]:at;let dt=_e.slice();const st=getByText(dt,ct,tt,ot);function it(){clearTimeout(et.timer),et.timer=-1}function ut(ht){et.keysSoFar=ht,it(),ht!==""&&(et.timer=+setTimeout(()=>{ut(""),it()},nt))}return ut(at),st}var getByTypeahead=Object.assign(getByTypeaheadImpl,{defaultOptions:{keysSoFar:"",timer:-1},isValidEvent:isValidTypeaheadEvent});function isValidTypeaheadEvent(_e){return _e.key.length===1&&!_e.ctrlKey&&!_e.metaKey}var styleCache=new WeakMap;function getComputedStyle$2(_e){return styleCache.has(_e)||styleCache.set(_e,getWindow$2(_e).getComputedStyle(_e)),styleCache.get(_e)}function getParentNode$2(_e){if(getNodeName$1(_e)==="html")return _e;const _=_e.assignedSlot||_e.parentNode||isShadowRoot$1(_e)&&_e.host||getDocumentElement$1(_e);return isShadowRoot$1(_)?_.host:_}var isHTMLElement2=_e=>typeof _e=="object"&&_e!==null&&_e.nodeType===1,isFrame=_e=>isHTMLElement2(_e)&&_e.tagName==="IFRAME";function isVisible(_e){return isHTMLElement2(_e)?_e.offsetWidth>0||_e.offsetHeight>0||_e.getClientRects().length>0:!1}function hasNegativeTabIndex(_e){return parseInt(_e.getAttribute("tabindex")||"0",10)<0}var focusableSelector="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",getFocusables=(_e,_=!1)=>{if(!_e)return[];const et=Array.from(_e.querySelectorAll(focusableSelector));(_==!0||_=="if-empty"&&et.length===0)&&isHTMLElement2(_e)&&isFocusable$1(_e)&&et.unshift(_e);const rt=et.filter(isFocusable$1);return rt.forEach((nt,ot)=>{if(isFrame(nt)&&nt.contentDocument){const at=nt.contentDocument.body;rt.splice(ot,1,...getFocusables(at))}}),rt};function isFocusable$1(_e){return!_e||_e.closest("[inert]")?!1:_e.matches(focusableSelector)&&isVisible(_e)}function getTabbables(_e,_){if(!_e)return[];const tt=Array.from(_e.querySelectorAll(focusableSelector)).filter(isTabbable$1);return tt.forEach((rt,nt)=>{if(isFrame(rt)&&rt.contentDocument){const ot=rt.contentDocument.body,at=getTabbables(ot);tt.splice(nt,1,...at)}}),tt.length,tt}function isTabbable$1(_e){return _e!=null&&_e.tabIndex>0?!0:isFocusable$1(_e)&&!hasNegativeTabIndex(_e)}function getTabbableEdges(_e,_){const et=getTabbables(_e,_),tt=et[0]||null,rt=et[et.length-1]||null;return[tt,rt]}function getInitialFocus(_e){const{root:_,getInitialEl:et,filter:tt,enabled:rt=!0}=_e;if(!rt)return;let nt=null;if(nt||(nt=typeof et=="function"?et():et),nt||(nt=_==null?void 0:_.querySelector("[data-autofocus],[autofocus]")),!nt){const ot=getTabbables(_);nt=tt?ot.filter(tt)[0]:ot[0]}return nt||_||void 0}function isValidTabEvent(_e){const _=_e.currentTarget;if(!_)return!1;const[et,tt]=getTabbableEdges(_),rt=_.ownerDocument||document;return!(rt.activeElement===et&&_e.shiftKey||rt.activeElement===tt&&!_e.shiftKey||!et&&!tt)}function isEditableElement(_e){if(_e==null||!isHTMLElement$1(_e))return!1;try{const _=getWindow$2(_e);return _e instanceof _.HTMLInputElement&&_e.selectionStart!=null||/(textarea|select)/.test(_e.localName)||_e.isContentEditable}catch{return!1}}var OVERFLOW_RE=/auto|scroll|overlay|hidden|clip/;function isOverflowElement$1(_e){const _=getWindow$2(_e),{overflow:et,overflowX:tt,overflowY:rt,display:nt}=_.getComputedStyle(_e);return OVERFLOW_RE.test(et+rt+tt)&&!["inline","contents"].includes(nt)}function nextTick(_e){const _=new Set;function et(tt){const rt=globalThis.requestAnimationFrame(tt);_.add(()=>globalThis.cancelAnimationFrame(rt))}return et(()=>et(_e)),function(){_.forEach(rt=>rt())}}function raf$1(_e){const _=globalThis.requestAnimationFrame(_e);return()=>{globalThis.cancelAnimationFrame(_)}}function observeAttributesImpl(_e,_){if(!_e)return;const{attributes:et,callback:tt}=_,rt=_e.ownerDocument.defaultView||window,nt=new rt.MutationObserver(ot=>{for(const at of ot)at.type==="attributes"&&at.attributeName&&et.includes(at.attributeName)&&tt(at)});return nt.observe(_e,{attributes:!0,attributeFilter:et}),()=>nt.disconnect()}function observeAttributes(_e,_){const{defer:et}=_,tt=et?raf$1:nt=>nt(),rt=[];return rt.push(tt(()=>{const nt=typeof _e=="function"?_e():_e;rt.push(observeAttributesImpl(nt,_))})),()=>{rt.forEach(nt=>nt==null?void 0:nt())}}function getNearestOverflowAncestor$1(_e){const _=getParentNode$2(_e);return isRootElement(_)?getDocument(_).body:isHTMLElement$1(_)&&isOverflowElement$1(_)?_:getNearestOverflowAncestor$1(_)}function getOverflowAncestors$1(_e,_=[]){const et=getNearestOverflowAncestor$1(_e),tt=et===_e.ownerDocument.body,rt=getWindow$2(et);return tt?_.concat(rt,rt.visualViewport||[],isOverflowElement$1(et)?et:[]):_.concat(et,getOverflowAncestors$1(et,[]))}function queryAll(_e,_){return Array.from((_e==null?void 0:_e.querySelectorAll(_))??[])}function query(_e,_){return(_e==null?void 0:_e.querySelector(_))??null}function createScope(_e){const _={getRootNode:et=>{var tt;return((tt=et.getRootNode)==null?void 0:tt.call(et))??document},getDoc:et=>getDocument(_.getRootNode(et)),getWin:et=>_.getDoc(et).defaultView??window,getActiveElement:et=>getActiveElement(_.getRootNode(et)),isActiveElement:(et,tt)=>tt===_.getActiveElement(et),getById:(et,tt)=>_.getRootNode(et).getElementById(tt),setValue:(et,tt)=>{if(et==null||tt==null)return;const rt=tt.toString();et.value!==rt&&(et.value=tt.toString())}};return{..._,..._e}}function isScrollable(_e){return _e.scrollHeight>_e.clientHeight||_e.scrollWidth>_e.clientWidth}function scrollIntoView(_e,_){const{rootEl:et,...tt}=_;!_e||!et||!isOverflowElement$1(et)||!isScrollable(et)||_e.scrollIntoView(tt)}var cleanups=new WeakMap;function set$5(_e,_,et){cleanups.has(_e)||cleanups.set(_e,new Map);const tt=cleanups.get(_e),rt=tt.get(_);if(!rt)return tt.set(_,et()),()=>{var at;(at=tt.get(_))==null||at(),tt.delete(_)};const nt=et(),ot=()=>{nt(),rt(),tt.delete(_)};return tt.set(_,ot),()=>{tt.get(_)===ot&&(nt(),tt.set(_,rt))}}function setStyle(_e,_){return _e?set$5(_e,"style",()=>{const tt=_e.style.cssText;return Object.assign(_e.style,_),()=>{_e.style.cssText=tt}}):()=>{}}var visuallyHiddenStyle={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"},fps=1e3/60;function waitForElement(_e,_){const et=_e();if(isHTMLElement$1(et)&&et.isConnected)return _(et),()=>{};{const tt=setInterval(()=>{const rt=_e();isHTMLElement$1(rt)&&rt.isConnected&&(_(rt),clearInterval(tt))},fps);return()=>clearInterval(tt)}}function waitForElements(_e,_){const et=[];return _e==null||_e.forEach(tt=>{const rt=waitForElement(tt,_);et.push(rt)}),()=>{et.forEach(tt=>tt())}}function getErrorMessage(_e,_){return`${_e} returned \`undefined\`. Seems you forgot to wrap component within ${_}`}function createContext(_e={}){const{name:_,strict:et=!0,hookName:tt="useContext",providerName:rt="Provider",errorMessage:nt,defaultValue:ot}=_e,at=reactExports.createContext(ot);at.displayName=_;function lt(){var dt;const ct=reactExports.useContext(at);if(!ct&&et){const st=new Error(nt??getErrorMessage(tt,rt));throw st.name="ContextError",(dt=Error.captureStackTrace)==null||dt.call(Error,st,lt),st}return ct}return[at.Provider,lt,at]}const[LocaleContextProvider,useLocaleContext]=createContext({name:"LocaleContext",hookName:"useLocaleContext",providerName:"<LocaleProvider />",strict:!1,defaultValue:{dir:"ltr",locale:"en-US"}});function useCallbackRef(_e,_=[]){const et=reactExports.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return reactExports.useInsertionEffect(()=>{et.current=_e}),reactExports.useCallback((...tt)=>{var rt;return(rt=et.current)==null?void 0:rt.call(et,...tt)},_)}function useDisclosure(_e={}){const{onClose:_,onOpen:et,open:tt}=_e,rt=useCallbackRef(et),nt=useCallbackRef(_),[ot,at]=reactExports.useState(_e.defaultOpen||!1),lt=tt!==void 0?tt:ot,ct=tt!==void 0,dt=reactExports.useCallback(()=>{ct||at(!1),nt==null||nt()},[ct,nt]),st=reactExports.useCallback(()=>{ct||at(!0),rt==null||rt()},[ct,rt]),it=reactExports.useCallback(()=>{lt?dt():st()},[lt,st,dt]);return{open:lt,onOpen:st,onClose:dt,onToggle:it}}const colorMix=(_e,_)=>{var lt;if(!_e||typeof _e!="string")return{invalid:!0,value:_e};const[et,tt]=_e.split("/");if(!et||!tt||et==="currentBg")return{invalid:!0,value:et};const rt=_(`colors.${et}`),nt=(lt=_.raw(`opacity.${tt}`))==null?void 0:lt.value;if(!nt&&isNaN(Number(tt)))return{invalid:!0,value:et};const ot=nt?Number(nt)*100+"%":`${tt}%`,at=rt??et;return{invalid:!1,color:at,value:`color-mix(in srgb, ${at} ${ot}, transparent)`}},createColorMixTransform=_e=>(_,et)=>{const tt=et.utils.colorMix(_);if(tt.invalid)return{[_e]:_};const rt="--mix-"+_e;return{[rt]:tt.value,[_e]:`var(${rt}, ${tt.color})`}};function clone$1(_e){if(_e===null||typeof _e!="object")return _e;if(Array.isArray(_e))return _e.map(et=>clone$1(et));const _=Object.create(Object.getPrototypeOf(_e));for(const et of Object.keys(_e))_[et]=clone$1(_e[et]);return _}const isObject$3=_e=>_e!=null&&typeof _e=="object"&&!Array.isArray(_e),isString$2=_e=>typeof _e=="string",isFunction$2=_e=>typeof _e=="function";function merge$1(_e,_){if(_==null)return _e;for(const et of Object.keys(_))if(!(_[et]===void 0||et==="__proto__"))if(!isObject$3(_e[et])&&isObject$3(_[et]))Object.assign(_e,{[et]:_[et]});else if(_e[et]&&isObject$3(_[et]))merge$1(_e[et],_[et]);else if(Array.isArray(_[et])&&Array.isArray(_e[et])){let tt=0;for(;tt<_[et].length;tt++)isObject$3(_e[et][tt])&&isObject$3(_[et][tt])?merge$1(_e[et][tt],_[et][tt]):_e[et][tt]=_[et][tt]}else Object.assign(_e,{[et]:_[et]});return _e}function mergeWith(_e,..._){for(const et of _)merge$1(_e,et);return _e}const defineConditions=_e=>_e,defineRecipe=_e=>_e,defineSlotRecipe=_e=>_e,defineKeyframes=_e=>_e,defineGlobalStyles=_e=>_e,defineStyle=_e=>_e,defineTextStyles=_e=>_e,defineAnimationStyles=_e=>_e,defineLayerStyles=_e=>_e;function createProxy$2(){const _e=_=>_;return new Proxy(_e,{get(){return _e}})}const defineTokens=createProxy$2(),defineSemanticTokens=createProxy$2(),defineConfig=_e=>_e,mergeConfigs=(..._e)=>mergeWith({},..._e.map(clone$1)),escRegex=/[^a-zA-Z0-9_\u0081-\uffff-]/g;function esc$1(_e){return`${_e}`.replace(escRegex,_=>`\\${_}`)}const dashCaseRegex=/[A-Z]/g;function dashCase(_e){return _e.replace(dashCaseRegex,_=>`-${_.toLowerCase()}`)}function cssVar(_e,_={}){const{fallback:et="",prefix:tt=""}=_,rt=dashCase(["-",tt,esc$1(_e)].filter(Boolean).join("-"));return{var:rt,ref:`var(${rt}${et?`, ${et}`:""})`}}const isCssVar=_e=>/^var\(--.+\)$/.test(_e),wrap$2=(_e,_)=>_!=null?`${_e}(${_})`:_,deg=_e=>{if(isCssVar(_e)||_e==null)return _e;const _=typeof _e=="string"&&!_e.endsWith("deg");return typeof _e=="number"||_?`${_e}deg`:_e},createFocusRing=_e=>({values:["outside","inside","mixed","none"],transform(_,{token:et}){const tt=et("colors.colorPalette.focusRing");return{inside:{"--focus-ring-color":tt,[_e]:{outlineOffset:"0px",outlineWidth:"var(--focus-ring-width, 1px)",outlineColor:"var(--focus-ring-color)",outlineStyle:"var(--focus-ring-style, solid)",borderColor:"var(--focus-ring-color)"}},outside:{"--focus-ring-color":tt,[_e]:{outlineWidth:"var(--focus-ring-width, 2px)",outlineOffset:"var(--focus-ring-offset, 2px)",outlineStyle:"var(--focus-ring-style, solid)",outlineColor:"var(--focus-ring-color)"}},mixed:{"--focus-ring-color":tt,[_e]:{outlineWidth:"var(--focus-ring-width, 3px)",outlineStyle:"var(--focus-ring-style, solid)",outlineColor:"color-mix(in srgb, var(--focus-ring-color), transparent 60%)",borderColor:"var(--focus-ring-color)"}},none:{"--focus-ring-color":tt,[_e]:{outline:"none"}}}[_]??{}}}),divideColor=createColorMixTransform("borderColor"),createTransition=_e=>({transition:_e,transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"150ms"}),defaultConditions=defineConditions({hover:["@media (hover: hover)","&:is(:hover, [data-hover]):not(:disabled, [data-disabled])"],active:"&:is(:active, [data-active]):not(:disabled, [data-disabled], [data-state=open])",focus:"&:is(:focus, [data-focus])",focusWithin:"&:is(:focus-within, [data-focus-within])",focusVisible:"&:is(:focus-visible, [data-focus-visible])",disabled:"&:is(:disabled, [disabled], [data-disabled], [aria-disabled=true])",visited:"&:visited",target:"&:target",readOnly:"&:is([data-readonly], [aria-readonly=true], [readonly])",readWrite:"&:read-write",empty:"&:is(:empty, [data-empty])",checked:"&:is(:checked, [data-checked], [aria-checked=true], [data-state=checked])",enabled:"&:enabled",expanded:"&:is([aria-expanded=true], [data-expanded], [data-state=expanded])",highlighted:"&[data-highlighted]",complete:"&[data-complete]",incomplete:"&[data-incomplete]",dragging:"&[data-dragging]",before:"&::before",after:"&::after",firstLetter:"&::first-letter",firstLine:"&::first-line",marker:"&::marker",selection:"&::selection",file:"&::file-selector-button",backdrop:"&::backdrop",first:"&:first-of-type",last:"&:last-of-type",notFirst:"&:not(:first-of-type)",notLast:"&:not(:last-of-type)",only:"&:only-child",even:"&:nth-of-type(even)",odd:"&:nth-of-type(odd)",peerFocus:".peer:is(:focus, [data-focus]) ~ &",peerHover:".peer:is(:hover, [data-hover]):not(:disabled, [data-disabled]) ~ &",peerActive:".peer:is(:active, [data-active]):not(:disabled, [data-disabled]) ~ &",peerFocusWithin:".peer:focus-within ~ &",peerFocusVisible:".peer:is(:focus-visible, [data-focus-visible]) ~ &",peerDisabled:".peer:is(:disabled, [disabled], [data-disabled]) ~ &",peerChecked:".peer:is(:checked, [data-checked], [aria-checked=true], [data-state=checked]) ~ &",peerInvalid:".peer:is(:invalid, [data-invalid], [aria-invalid=true]) ~ &",peerExpanded:".peer:is([aria-expanded=true], [data-expanded], [data-state=expanded]) ~ &",peerPlaceholderShown:".peer:placeholder-shown ~ &",groupFocus:".group:is(:focus, [data-focus]) &",groupHover:".group:is(:hover, [data-hover]):not(:disabled, [data-disabled]) &",groupActive:".group:is(:active, [data-active]):not(:disabled, [data-disabled]) &",groupFocusWithin:".group:focus-within &",groupFocusVisible:".group:is(:focus-visible, [data-focus-visible]) &",groupDisabled:".group:is(:disabled, [disabled], [data-disabled]) &",groupChecked:".group:is(:checked, [data-checked], [aria-checked=true], [data-state=checked]) &",groupExpanded:".group:is([aria-expanded=true], [data-expanded], [data-state=expanded]) &",groupInvalid:".group:invalid &",indeterminate:"&:is(:indeterminate, [data-indeterminate], [aria-checked=mixed], [data-state=indeterminate])",required:"&:is([data-required], [aria-required=true])",valid:"&:is([data-valid], [data-state=valid])",invalid:"&:is([data-invalid], [aria-invalid=true], [data-state=invalid])",autofill:"&:autofill",inRange:"&:is(:in-range, [data-in-range])",outOfRange:"&:is(:out-of-range, [data-outside-range])",placeholder:"&::placeholder, &[data-placeholder]",placeholderShown:"&:is(:placeholder-shown, [data-placeholder-shown])",pressed:"&:is([aria-pressed=true], [data-pressed])",selected:"&:is([aria-selected=true], [data-selected])",grabbed:"&:is([aria-grabbed=true], [data-grabbed])",underValue:"&[data-state=under-value]",overValue:"&[data-state=over-value]",atValue:"&[data-state=at-value]",default:"&:default",optional:"&:optional",open:"&:is([open], [data-open], [data-state=open])",closed:"&:is([closed], [data-closed], [data-state=closed])",fullscreen:"&is(:fullscreen, [data-fullscreen])",loading:"&:is([data-loading], [aria-busy=true])",hidden:"&:is([hidden], [data-hidden])",current:"&[data-current]",currentPage:"&[aria-current=page]",currentStep:"&[aria-current=step]",today:"&[data-today]",unavailable:"&[data-unavailable]",rangeStart:"&[data-range-start]",rangeEnd:"&[data-range-end]",now:"&[data-now]",topmost:"&[data-topmost]",motionReduce:"@media (prefers-reduced-motion: reduce)",motionSafe:"@media (prefers-reduced-motion: no-preference)",print:"@media print",landscape:"@media (orientation: landscape)",portrait:"@media (orientation: portrait)",dark:".dark &, .dark .chakra-theme:not(.light) &",light:":root &, .light &",osDark:"@media (prefers-color-scheme: dark)",osLight:"@media (prefers-color-scheme: light)",highContrast:"@media (forced-colors: active)",lessContrast:"@media (prefers-contrast: less)",moreContrast:"@media (prefers-contrast: more)",ltr:"[dir=ltr] &",rtl:"[dir=rtl] &",scrollbar:"&::-webkit-scrollbar",scrollbarThumb:"&::-webkit-scrollbar-thumb",scrollbarTrack:"&::-webkit-scrollbar-track",horizontal:"&[data-orientation=horizontal]",vertical:"&[data-orientation=vertical]",icon:"& :where(svg)",starting:"@starting-style"}),currentBgVar=cssVar("bg-currentcolor"),isCurrentBgVar=_e=>_e===currentBgVar.ref||_e==="currentBg",colorValues=_e=>({..._e("colors"),currentBg:currentBgVar}),defaultBaseConfig=defineConfig({conditions:defaultConditions,utilities:{background:{values:colorValues,shorthand:["bg"],transform(_e,_){if(isCurrentBgVar(_.raw))return{background:currentBgVar.ref};const et=createColorMixTransform("background")(_e,_);return{...et,[currentBgVar.var]:et==null?void 0:et.background}}},backgroundColor:{values:colorValues,shorthand:["bgColor"],transform(_e,_){if(isCurrentBgVar(_.raw))return{backgroundColor:currentBgVar.ref};const et=createColorMixTransform("backgroundColor")(_e,_);return{...et,[currentBgVar.var]:et==null?void 0:et.backgroundColor}}},backgroundSize:{shorthand:["bgSize"]},backgroundPosition:{shorthand:["bgPos"]},backgroundRepeat:{shorthand:["bgRepeat"]},backgroundAttachment:{shorthand:["bgAttachment"]},backgroundClip:{shorthand:["bgClip"],values:["text"],transform(_e){return _e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:_e}}},backgroundGradient:{shorthand:["bgGradient"],values(_e){return{..._e("gradients"),"to-t":"linear-gradient(to top, var(--gradient))","to-tr":"linear-gradient(to top right, var(--gradient))","to-r":"linear-gradient(to right, var(--gradient))","to-br":"linear-gradient(to bottom right, var(--gradient))","to-b":"linear-gradient(to bottom, var(--gradient))","to-bl":"linear-gradient(to bottom left, var(--gradient))","to-l":"linear-gradient(to left, var(--gradient))","to-tl":"linear-gradient(to top left, var(--gradient))"}},transform(_e){return{"--gradient-stops":"var(--gradient-from), var(--gradient-to)","--gradient":"var(--gradient-via-stops, var(--gradient-stops))",backgroundImage:_e}}},gradientFrom:{values:colorValues,transform:createColorMixTransform("--gradient-from")},gradientTo:{values:colorValues,transform:createColorMixTransform("--gradient-to")},gradientVia:{values:colorValues,transform(_e,_){return{...createColorMixTransform("--gradient-via")(_e,_),"--gradient-via-stops":"var(--gradient-from), var(--gradient-via), var(--gradient-to)"}}},backgroundImage:{values:"gradients",shorthand:["bgImg","bgImage"]},border:{values:"borders"},borderTop:{values:"borders"},borderLeft:{values:"borders"},borderBlockStart:{values:"borders"},borderRight:{values:"borders"},borderInlineEnd:{values:"borders"},borderBottom:{values:"borders"},borderBlockEnd:{values:"borders"},borderInlineStart:{values:"borders",shorthand:["borderStart"]},borderInline:{values:"borders",shorthand:["borderX"]},borderBlock:{values:"borders",shorthand:["borderY"]},borderColor:{values:colorValues,transform:createColorMixTransform("borderColor")},borderTopColor:{values:colorValues,transform:createColorMixTransform("borderTopColor")},borderBlockStartColor:{values:colorValues,transform:createColorMixTransform("borderBlockStartColor")},borderBottomColor:{values:colorValues,transform:createColorMixTransform("borderBottomColor")},borderBlockEndColor:{values:colorValues,transform:createColorMixTransform("borderBlockEndColor")},borderLeftColor:{values:colorValues,transform:createColorMixTransform("borderLeftColor")},borderInlineStartColor:{values:colorValues,shorthand:["borderStartColor"],transform:createColorMixTransform("borderInlineStartColor")},borderRightColor:{values:colorValues,transform:createColorMixTransform("borderRightColor")},borderInlineEndColor:{values:colorValues,shorthand:["borderEndColor"],transform:createColorMixTransform("borderInlineEndColor")},borderStyle:{values:"borderStyles"},borderTopStyle:{values:"borderStyles"},borderBlockStartStyle:{values:"borderStyles"},borderBottomStyle:{values:"borderStyles"},borderBlockEndStyle:{values:"borderStyles"},borderInlineStartStyle:{values:"borderStyles",shorthand:["borderStartStyle"]},borderInlineEndStyle:{values:"borderStyles",shorthand:["borderEndStyle"]},borderLeftStyle:{values:"borderStyles"},borderRightStyle:{values:"borderStyles"},borderRadius:{values:"radii",shorthand:["rounded"]},borderTopLeftRadius:{values:"radii",shorthand:["roundedTopLeft"]},borderStartStartRadius:{values:"radii",shorthand:["roundedStartStart","borderTopStartRadius"]},borderEndStartRadius:{values:"radii",shorthand:["roundedEndStart","borderBottomStartRadius"]},borderTopRightRadius:{values:"radii",shorthand:["roundedTopRight"]},borderStartEndRadius:{values:"radii",shorthand:["roundedStartEnd","borderTopEndRadius"]},borderEndEndRadius:{values:"radii",shorthand:["roundedEndEnd","borderBottomEndRadius"]},borderBottomLeftRadius:{values:"radii",shorthand:["roundedBottomLeft"]},borderBottomRightRadius:{values:"radii",shorthand:["roundedBottomRight"]},borderInlineStartRadius:{values:"radii",property:"borderRadius",shorthand:["roundedStart","borderStartRadius"],transform:_e=>({borderStartStartRadius:_e,borderEndStartRadius:_e})},borderInlineEndRadius:{values:"radii",property:"borderRadius",shorthand:["roundedEnd","borderEndRadius"],transform:_e=>({borderStartEndRadius:_e,borderEndEndRadius:_e})},borderTopRadius:{values:"radii",property:"borderRadius",shorthand:["roundedTop"],transform:_e=>({borderTopLeftRadius:_e,borderTopRightRadius:_e})},borderBottomRadius:{values:"radii",property:"borderRadius",shorthand:["roundedBottom"],transform:_e=>({borderBottomLeftRadius:_e,borderBottomRightRadius:_e})},borderLeftRadius:{values:"radii",property:"borderRadius",shorthand:["roundedLeft"],transform:_e=>({borderTopLeftRadius:_e,borderBottomLeftRadius:_e})},borderRightRadius:{values:"radii",property:"borderRadius",shorthand:["roundedRight"],transform:_e=>({borderTopRightRadius:_e,borderBottomRightRadius:_e})},borderWidth:{values:"borderWidths"},borderBlockStartWidth:{values:"borderWidths"},borderTopWidth:{values:"borderWidths"},borderBottomWidth:{values:"borderWidths"},borderBlockEndWidth:{values:"borderWidths"},borderRightWidth:{values:"borderWidths"},borderInlineWidth:{values:"borderWidths",shorthand:["borderXWidth"]},borderInlineStartWidth:{values:"borderWidths",shorthand:["borderStartWidth"]},borderInlineEndWidth:{values:"borderWidths",shorthand:["borderEndWidth"]},borderLeftWidth:{values:"borderWidths"},borderBlockWidth:{values:"borderWidths",shorthand:["borderYWidth"]},color:{values:colorValues,transform:createColorMixTransform("color")},fill:{values:colorValues,transform:createColorMixTransform("fill")},stroke:{values:colorValues,transform:createColorMixTransform("stroke")},accentColor:{values:colorValues,transform:createColorMixTransform("accentColor")},divideX:{values:{type:"string"},transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderInlineStartWidth:_e,borderInlineEndWidth:"0px"}}}},divideY:{values:{type:"string"},transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderTopWidth:_e,borderBottomWidth:"0px"}}}},divideColor:{values:colorValues,transform(_e,_){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":divideColor(_e,_)}}},divideStyle:{property:"borderStyle",transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderStyle:_e}}}},boxShadow:{values:"shadows",shorthand:["shadow"]},boxShadowColor:{values:colorValues,transform:createColorMixTransform("--shadow-color"),shorthand:["shadowColor"]},mixBlendMode:{shorthand:["blendMode"]},backgroundBlendMode:{shorthand:["bgBlendMode"]},opacity:{values:"opacity"},filter:{transform(_e){return _e!=="auto"?{filter:_e}:{filter:"var(--blur) var(--brightness) var(--contrast) var(--grayscale) var(--hue-rotate) var(--invert) var(--saturate) var(--sepia) var(--drop-shadow)"}}},blur:{values:"blurs",transform:_e=>({"--blur":wrap$2("blur",_e)})},brightness:{transform:_e=>({"--brightness":wrap$2("brightness",_e)})},contrast:{transform:_e=>({"--contrast":wrap$2("contrast",_e)})},grayscale:{transform:_e=>({"--grayscale":wrap$2("grayscale",_e)})},hueRotate:{transform:_e=>({"--hue-rotate":wrap$2("hue-rotate",deg(_e))})},invert:{transform:_e=>({"--invert":wrap$2("invert",_e)})},saturate:{transform:_e=>({"--saturate":wrap$2("saturate",_e)})},sepia:{transform:_e=>({"--sepia":wrap$2("sepia",_e)})},dropShadow:{transform:_e=>({"--drop-shadow":wrap$2("drop-shadow",_e)})},backdropFilter:{transform(_e){return _e!=="auto"?{backdropFilter:_e}:{backdropFilter:"var(--backdrop-blur) var(--backdrop-brightness) var(--backdrop-contrast) var(--backdrop-grayscale) var(--backdrop-hue-rotate) var(--backdrop-invert) var(--backdrop-opacity) var(--backdrop-saturate) var(--backdrop-sepia)"}}},backdropBlur:{values:"blurs",transform:_e=>({"--backdrop-blur":wrap$2("blur",_e)})},backdropBrightness:{transform:_e=>({"--backdrop-brightness":wrap$2("brightness",_e)})},backdropContrast:{transform:_e=>({"--backdrop-contrast":wrap$2("contrast",_e)})},backdropGrayscale:{transform:_e=>({"--backdrop-grayscale":wrap$2("grayscale",_e)})},backdropHueRotate:{transform:_e=>({"--backdrop-hue-rotate":wrap$2("hue-rotate",deg(_e))})},backdropInvert:{transform:_e=>({"--backdrop-invert":wrap$2("invert",_e)})},backdropOpacity:{transform:_e=>({"--backdrop-opacity":wrap$2("opacity",_e)})},backdropSaturate:{transform:_e=>({"--backdrop-saturate":wrap$2("saturate",_e)})},backdropSepia:{transform:_e=>({"--backdrop-sepia":wrap$2("sepia",_e)})},flexBasis:{values:"sizes"},gap:{values:"spacing"},rowGap:{values:"spacing",shorthand:["gapY"]},columnGap:{values:"spacing",shorthand:["gapX"]},flexDirection:{shorthand:["flexDir"]},gridGap:{values:"spacing"},gridColumnGap:{values:"spacing"},gridRowGap:{values:"spacing"},outlineColor:{values:colorValues,transform:createColorMixTransform("outlineColor")},focusRing:createFocusRing("&:is(:focus, [data-focus])"),focusVisibleRing:createFocusRing("&:is(:focus-visible, [data-focus-visible])"),focusRingColor:{values:colorValues,transform:createColorMixTransform("--focus-ring-color")},focusRingOffset:{values:"spacing",transform:_e=>({"--focus-ring-offset":_e})},focusRingWidth:{values:"borderWidths",property:"outlineWidth",transform:_e=>({"--focus-ring-width":_e})},focusRingStyle:{values:"borderStyles",property:"outlineStyle",transform:_e=>({"--focus-ring-style":_e})},aspectRatio:{values:"aspectRatios"},width:{values:"sizes",shorthand:["w"]},inlineSize:{values:"sizes"},height:{values:"sizes",shorthand:["h"]},blockSize:{values:"sizes"},boxSize:{values:"sizes",property:"width",transform:_e=>({width:_e,height:_e})},minWidth:{values:"sizes",shorthand:["minW"]},minInlineSize:{values:"sizes"},minHeight:{values:"sizes",shorthand:["minH"]},minBlockSize:{values:"sizes"},maxWidth:{values:"sizes",shorthand:["maxW"]},maxInlineSize:{values:"sizes"},maxHeight:{values:"sizes",shorthand:["maxH"]},maxBlockSize:{values:"sizes"},hideFrom:{values:"breakpoints",transform:(_e,{raw:_,token:et})=>({[et.raw(`breakpoints.${_}`)?`@breakpoint ${_}`:`@media screen and (min-width: ${_e})`]:{display:"none"}})},hideBelow:{values:"breakpoints",transform(_e,{raw:_,token:et}){return{[et.raw(`breakpoints.${_}`)?`@breakpoint ${_}Down`:`@media screen and (max-width: ${_e})`]:{display:"none"}}}},overscrollBehavior:{shorthand:["overscroll"]},overscrollBehaviorX:{shorthand:["overscrollX"]},overscrollBehaviorY:{shorthand:["overscrollY"]},scrollbar:{values:["visible","hidden"],transform(_e){switch(_e){case"visible":return{msOverflowStyle:"auto",scrollbarWidth:"auto","&::-webkit-scrollbar":{display:"block"}};case"hidden":return{msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}};default:return{}}}},scrollbarColor:{values:colorValues,transform:createColorMixTransform("scrollbarColor")},scrollbarGutter:{values:"spacing"},scrollbarWidth:{values:"sizes"},scrollMargin:{values:"spacing"},scrollMarginTop:{values:"spacing"},scrollMarginBottom:{values:"spacing"},scrollMarginLeft:{values:"spacing"},scrollMarginRight:{values:"spacing"},scrollMarginX:{values:"spacing",transform:_e=>({scrollMarginLeft:_e,scrollMarginRight:_e})},scrollMarginY:{values:"spacing",transform:_e=>({scrollMarginTop:_e,scrollMarginBottom:_e})},scrollPadding:{values:"spacing"},scrollPaddingTop:{values:"spacing"},scrollPaddingBottom:{values:"spacing"},scrollPaddingLeft:{values:"spacing"},scrollPaddingRight:{values:"spacing"},scrollPaddingInline:{values:"spacing",shorthand:["scrollPaddingX"]},scrollPaddingBlock:{values:"spacing",shorthand:["scrollPaddingY"]},scrollSnapType:{values:{none:"none",x:"x var(--scroll-snap-strictness)",y:"y var(--scroll-snap-strictness)",both:"both var(--scroll-snap-strictness)"}},scrollSnapStrictness:{values:["mandatory","proximity"],transform:_e=>({"--scroll-snap-strictness":_e})},scrollSnapMargin:{values:"spacing"},scrollSnapMarginTop:{values:"spacing"},scrollSnapMarginBottom:{values:"spacing"},scrollSnapMarginLeft:{values:"spacing"},scrollSnapMarginRight:{values:"spacing"},listStylePosition:{shorthand:["listStylePos"]},listStyleImage:{shorthand:["listStyleImg"]},position:{shorthand:["pos"]},zIndex:{values:"zIndex"},inset:{values:"spacing"},insetInline:{values:"spacing",shorthand:["insetX"]},insetBlock:{values:"spacing",shorthand:["insetY"]},top:{values:"spacing"},insetBlockStart:{values:"spacing"},bottom:{values:"spacing"},insetBlockEnd:{values:"spacing"},left:{values:"spacing"},right:{values:"spacing"},insetInlineStart:{values:"spacing",shorthand:["insetStart"]},insetInlineEnd:{values:"spacing",shorthand:["insetEnd"]},ring:{transform(_e){return{"--ring-offset-shadow":"var(--ring-inset) 0 0 0 var(--ring-offset-width) var(--ring-offset-color)","--ring-shadow":"var(--ring-inset) 0 0 0 calc(var(--ring-width) + var(--ring-offset-width)) var(--ring-color)","--ring-width":_e,boxShadow:"var(--ring-offset-shadow), var(--ring-shadow), var(--shadow, 0 0 #0000)"}}},ringColor:{values:colorValues,transform:createColorMixTransform("--ring-color")},ringOffset:{transform:_e=>({"--ring-offset-width":_e})},ringOffsetColor:{values:colorValues,transform:createColorMixTransform("--ring-offset-color")},ringInset:{transform:_e=>({"--ring-inset":_e})},margin:{values:"spacing",shorthand:["m"]},marginTop:{values:"spacing",shorthand:["mt"]},marginBlockStart:{values:"spacing",shorthand:["mt"]},marginRight:{values:"spacing",shorthand:["mr"]},marginBottom:{values:"spacing",shorthand:["mb"]},marginBlockEnd:{values:"spacing"},marginLeft:{values:"spacing",shorthand:["ml"]},marginInlineStart:{values:"spacing",shorthand:["ms","marginStart"]},marginInlineEnd:{values:"spacing",shorthand:["me","marginEnd"]},marginInline:{values:"spacing",shorthand:["mx","marginX"]},marginBlock:{values:"spacing",shorthand:["my","marginY"]},padding:{values:"spacing",shorthand:["p"]},paddingTop:{values:"spacing",shorthand:["pt"]},paddingRight:{values:"spacing",shorthand:["pr"]},paddingBottom:{values:"spacing",shorthand:["pb"]},paddingBlockStart:{values:"spacing"},paddingBlockEnd:{values:"spacing"},paddingLeft:{values:"spacing",shorthand:["pl"]},paddingInlineStart:{values:"spacing",shorthand:["ps","paddingStart"]},paddingInlineEnd:{values:"spacing",shorthand:["pe","paddingEnd"]},paddingInline:{values:"spacing",shorthand:["px","paddingX"]},paddingBlock:{values:"spacing",shorthand:["py","paddingY"]},textDecoration:{shorthand:["textDecor"]},textDecorationColor:{values:colorValues,transform:createColorMixTransform("textDecorationColor")},textShadow:{values:"shadows"},transform:{transform:_e=>{let _=_e;return _e==="auto"&&(_="translateX(var(--translate-x, 0)) translateY(var(--translate-y, 0)) rotate(var(--rotate, 0)) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1)) skewX(var(--skew-x, 0)) skewY(var(--skew-y, 0))"),_e==="auto-gpu"&&(_="translate3d(var(--translate-x, 0), var(--translate-y, 0), 0) rotate(var(--rotate, 0)) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1)) skewX(var(--skew-x, 0)) skewY(var(--skew-y, 0))"),{transform:_}}},skewX:{transform:_e=>({"--skew-x":deg(_e)})},skewY:{transform:_e=>({"--skew-y":deg(_e)})},scaleX:{transform:_e=>({"--scale-x":_e})},scaleY:{transform:_e=>({"--scale-y":_e})},scale:{transform(_e){return _e!=="auto"?{scale:_e}:{scale:"var(--scale-x, 1) var(--scale-y, 1)"}}},spaceXReverse:{values:{type:"boolean"},transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-x-reverse":_e?"1":void 0}}}},spaceX:{property:"marginInlineStart",values:"spacing",transform:_e=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-x-reverse":"0",marginInlineStart:`calc(${_e} * calc(1 - var(--space-x-reverse)))`,marginInlineEnd:`calc(${_e} * var(--space-x-reverse))`}})},spaceYReverse:{values:{type:"boolean"},transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-y-reverse":_e?"1":void 0}}}},spaceY:{property:"marginTop",values:"spacing",transform:_e=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-y-reverse":"0",marginTop:`calc(${_e} * calc(1 - var(--space-y-reverse)))`,marginBottom:`calc(${_e} * var(--space-y-reverse))`}})},rotate:{transform(_e){return _e!=="auto"?{rotate:deg(_e)}:{rotate:"var(--rotate-x, 0) var(--rotate-y, 0) var(--rotate-z, 0)"}}},rotateX:{transform(_e){return{"--rotate-x":deg(_e)}}},rotateY:{transform(_e){return{"--rotate-y":deg(_e)}}},translate:{transform(_e){return _e!=="auto"?{translate:_e}:{translate:"var(--translate-x) var(--translate-y)"}}},translateX:{values:"spacing",transform:_e=>({"--translate-x":_e})},translateY:{values:"spacing",transform:_e=>({"--translate-y":_e})},transition:{values:["all","common","colors","opacity","position","backgrounds","size","shadow","transform"],transform(_e){switch(_e){case"all":return createTransition("all");case"position":return createTransition("left, right, top, bottom, inset-inline, inset-block");case"colors":return createTransition("color, background-color, border-color, text-decoration-color, fill, stroke");case"opacity":return createTransition("opacity");case"shadow":return createTransition("box-shadow");case"transform":return createTransition("transform");case"size":return createTransition("width, height");case"backgrounds":return createTransition("background, background-color, background-image, background-position");case"common":return createTransition("color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter");default:return{transition:_e}}}},transitionDuration:{values:"durations"},transitionProperty:{values:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, translate, transform",colors:"background-color, border-color, color, fill, stroke",size:"width, height",position:"left, right, top, bottom, inset-inline, inset-block",background:"background, background-color, background-image, background-position"}},transitionTimingFunction:{values:"easings"},animation:{values:"animations"},animationDuration:{values:"durations"},animationDelay:{values:"durations"},animationTimingFunction:{values:"easings"},fontFamily:{values:"fonts"},fontSize:{values:"fontSizes"},fontWeight:{values:"fontWeights"},lineHeight:{values:"lineHeights"},letterSpacing:{values:"letterSpacings"},textIndent:{values:"spacing"},truncate:{values:{type:"boolean"},transform(_e){return _e===!0?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}:{}}},lineClamp:{transform(_e){return _e==="none"?{WebkitLineClamp:"unset"}:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:_e,WebkitBoxOrient:"vertical",textWrap:"wrap"}}},srOnly:{values:{type:"boolean"},transform(_e){return srMapping[_e]||{}}},debug:{values:{type:"boolean"},transform(_e){return _e?{outline:"1px solid blue !important","& > *":{outline:"1px solid red !important"}}:{}}},caretColor:{values:colorValues,transform:createColorMixTransform("caretColor")},cursor:{values:"cursor"}}}),srMapping={true:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},false:{position:"static",width:"auto",height:"auto",padding:"0",margin:"0",overflow:"visible",clip:"auto",whiteSpace:"normal"}};var userGeneratedStr="",userGenerated=userGeneratedStr.split(","),cssPropertiesStr="WebkitAppearance,WebkitBorderBefore,WebkitBorderBeforeColor,WebkitBorderBeforeStyle,WebkitBorderBeforeWidth,WebkitBoxReflect,WebkitLineClamp,WebkitMask,WebkitMaskAttachment,WebkitMaskClip,WebkitMaskComposite,WebkitMaskImage,WebkitMaskOrigin,WebkitMaskPosition,WebkitMaskPositionX,WebkitMaskPositionY,WebkitMaskRepeat,WebkitMaskRepeatX,WebkitMaskRepeatY,WebkitMaskSize,WebkitOverflowScrolling,WebkitTapHighlightColor,WebkitTextFillColor,WebkitTextStroke,WebkitTextStrokeColor,WebkitTextStrokeWidth,WebkitTouchCallout,WebkitUserModify,accentColor,alignContent,alignItems,alignSelf,alignTracks,all,animation,animationComposition,animationDelay,animationDirection,animationDuration,animationFillMode,animationIterationCount,animationName,animationPlayState,animationRange,animationRangeEnd,animationRangeStart,animationTimingFunction,animationTimeline,appearance,aspectRatio,azimuth,backdropFilter,backfaceVisibility,background,backgroundAttachment,backgroundBlendMode,backgroundClip,backgroundColor,backgroundImage,backgroundOrigin,backgroundPosition,backgroundPositionX,backgroundPositionY,backgroundRepeat,backgroundSize,blockSize,border,borderBlock,borderBlockColor,borderBlockStyle,borderBlockWidth,borderBlockEnd,borderBlockEndColor,borderBlockEndStyle,borderBlockEndWidth,borderBlockStart,borderBlockStartColor,borderBlockStartStyle,borderBlockStartWidth,borderBottom,borderBottomColor,borderBottomLeftRadius,borderBottomRightRadius,borderBottomStyle,borderBottomWidth,borderCollapse,borderColor,borderEndEndRadius,borderEndStartRadius,borderImage,borderImageOutset,borderImageRepeat,borderImageSlice,borderImageSource,borderImageWidth,borderInline,borderInlineEnd,borderInlineColor,borderInlineStyle,borderInlineWidth,borderInlineEndColor,borderInlineEndStyle,borderInlineEndWidth,borderInlineStart,borderInlineStartColor,borderInlineStartStyle,borderInlineStartWidth,borderLeft,borderLeftColor,borderLeftStyle,borderLeftWidth,borderRadius,borderRight,borderRightColor,borderRightStyle,borderRightWidth,borderSpacing,borderStartEndRadius,borderStartStartRadius,borderStyle,borderTop,borderTopColor,borderTopLeftRadius,borderTopRightRadius,borderTopStyle,borderTopWidth,borderWidth,bottom,boxAlign,boxDecorationBreak,boxDirection,boxFlex,boxFlexGroup,boxLines,boxOrdinalGroup,boxOrient,boxPack,boxShadow,boxSizing,breakAfter,breakBefore,breakInside,captionSide,caret,caretColor,caretShape,clear,clip,clipPath,color,colorScheme,columnCount,columnFill,columnGap,columnRule,columnRuleColor,columnRuleStyle,columnRuleWidth,columnSpan,columnWidth,columns,contain,containIntrinsicSize,containIntrinsicBlockSize,containIntrinsicHeight,containIntrinsicInlineSize,containIntrinsicWidth,container,containerName,containerType,content,contentVisibility,counterIncrement,counterReset,counterSet,cursor,direction,display,emptyCells,filter,flex,flexBasis,flexDirection,flexFlow,flexGrow,flexShrink,flexWrap,float,font,fontFamily,fontFeatureSettings,fontKerning,fontLanguageOverride,fontOpticalSizing,fontPalette,fontVariationSettings,fontSize,fontSizeAdjust,fontSmooth,fontStretch,fontStyle,fontSynthesis,fontSynthesisPosition,fontSynthesisSmallCaps,fontSynthesisStyle,fontSynthesisWeight,fontVariant,fontVariantAlternates,fontVariantCaps,fontVariantEastAsian,fontVariantEmoji,fontVariantLigatures,fontVariantNumeric,fontVariantPosition,fontWeight,forcedColorAdjust,gap,grid,gridArea,gridAutoColumns,gridAutoFlow,gridAutoRows,gridColumn,gridColumnEnd,gridColumnGap,gridColumnStart,gridGap,gridRow,gridRowEnd,gridRowGap,gridRowStart,gridTemplate,gridTemplateAreas,gridTemplateColumns,gridTemplateRows,hangingPunctuation,height,hyphenateCharacter,hyphenateLimitChars,hyphens,imageOrientation,imageRendering,imageResolution,imeMode,initialLetter,initialLetterAlign,inlineSize,inputSecurity,inset,insetBlock,insetBlockEnd,insetBlockStart,insetInline,insetInlineEnd,insetInlineStart,isolation,justifyContent,justifyItems,justifySelf,justifyTracks,left,letterSpacing,lineBreak,lineClamp,lineHeight,lineHeightStep,listStyle,listStyleImage,listStylePosition,listStyleType,margin,marginBlock,marginBlockEnd,marginBlockStart,marginBottom,marginInline,marginInlineEnd,marginInlineStart,marginLeft,marginRight,marginTop,marginTrim,mask,maskBorder,maskBorderMode,maskBorderOutset,maskBorderRepeat,maskBorderSlice,maskBorderSource,maskBorderWidth,maskClip,maskComposite,maskImage,maskMode,maskOrigin,maskPosition,maskRepeat,maskSize,maskType,masonryAutoFlow,mathDepth,mathShift,mathStyle,maxBlockSize,maxHeight,maxInlineSize,maxLines,maxWidth,minBlockSize,minHeight,minInlineSize,minWidth,mixBlendMode,objectFit,objectPosition,offset,offsetAnchor,offsetDistance,offsetPath,offsetPosition,offsetRotate,opacity,order,orphans,outline,outlineColor,outlineOffset,outlineStyle,outlineWidth,overflow,overflowAnchor,overflowBlock,overflowClipBox,overflowClipMargin,overflowInline,overflowWrap,overflowX,overflowY,overlay,overscrollBehavior,overscrollBehaviorBlock,overscrollBehaviorInline,overscrollBehaviorX,overscrollBehaviorY,padding,paddingBlock,paddingBlockEnd,paddingBlockStart,paddingBottom,paddingInline,paddingInlineEnd,paddingInlineStart,paddingLeft,paddingRight,paddingTop,page,pageBreakAfter,pageBreakBefore,pageBreakInside,paintOrder,perspective,perspectiveOrigin,placeContent,placeItems,placeSelf,pointerEvents,position,printColorAdjust,quotes,resize,right,rotate,rowGap,rubyAlign,rubyMerge,rubyPosition,scale,scrollbarColor,scrollbarGutter,scrollbarWidth,scrollBehavior,scrollMargin,scrollMarginBlock,scrollMarginBlockStart,scrollMarginBlockEnd,scrollMarginBottom,scrollMarginInline,scrollMarginInlineStart,scrollMarginInlineEnd,scrollMarginLeft,scrollMarginRight,scrollMarginTop,scrollPadding,scrollPaddingBlock,scrollPaddingBlockStart,scrollPaddingBlockEnd,scrollPaddingBottom,scrollPaddingInline,scrollPaddingInlineStart,scrollPaddingInlineEnd,scrollPaddingLeft,scrollPaddingRight,scrollPaddingTop,scrollSnapAlign,scrollSnapCoordinate,scrollSnapDestination,scrollSnapPointsX,scrollSnapPointsY,scrollSnapStop,scrollSnapType,scrollSnapTypeX,scrollSnapTypeY,scrollTimeline,scrollTimelineAxis,scrollTimelineName,shapeImageThreshold,shapeMargin,shapeOutside,tabSize,tableLayout,textAlign,textAlignLast,textCombineUpright,textDecoration,textDecorationColor,textDecorationLine,textDecorationSkip,textDecorationSkipInk,textDecorationStyle,textDecorationThickness,textEmphasis,textEmphasisColor,textEmphasisPosition,textEmphasisStyle,textIndent,textJustify,textOrientation,textOverflow,textRendering,textShadow,textSizeAdjust,textTransform,textUnderlineOffset,textUnderlinePosition,textWrap,timelineScope,top,touchAction,transform,transformBox,transformOrigin,transformStyle,transition,transitionBehavior,transitionDelay,transitionDuration,transitionProperty,transitionTimingFunction,translate,unicodeBidi,userSelect,verticalAlign,viewTimeline,viewTimelineAxis,viewTimelineInset,viewTimelineName,viewTransitionName,visibility,whiteSpace,whiteSpaceCollapse,widows,width,willChange,wordBreak,wordSpacing,wordWrap,writingMode,zIndex,zoom,alignmentBaseline,baselineShift,clipRule,colorInterpolation,colorRendering,dominantBaseline,fill,fillOpacity,fillRule,floodColor,floodOpacity,glyphOrientationVertical,lightingColor,marker,markerEnd,markerMid,markerStart,shapeRendering,stopColor,stopOpacity,stroke,strokeDasharray,strokeDashoffset,strokeLinecap,strokeLinejoin,strokeMiterlimit,strokeOpacity,strokeWidth,textAnchor,vectorEffect",allCssProperties=cssPropertiesStr.split(",").concat(userGenerated),properties=new Map(allCssProperties.map(_e=>[_e,!0]));function memo$1(_e){const _=Object.create(null);return et=>(_[et]===void 0&&(_[et]=_e(et)),_[et])}var cssPropertySelectorRegex=/&|@/,isCssProperty=memo$1(_e=>properties.has(_e)||_e.startsWith("--")||cssPropertySelectorRegex.test(_e));const isNotNullish=_e=>_e!=null;function walkObject(_e,_,et={}){const{stop:tt,getKey:rt}=et;function nt(ot,at=[]){if(isObject$3(ot)||Array.isArray(ot)){const lt={};for(const[ct,dt]of Object.entries(ot)){const st=(rt==null?void 0:rt(ct,dt))??ct,it=[...at,st];if(tt!=null&&tt(ot,it))return _(ot,at);const ut=nt(dt,it);isNotNullish(ut)&&(lt[st]=ut)}return lt}return _(ot,at)}return nt(_e)}function mapObject(_e,_){return Array.isArray(_e)?_e.map(et=>_(et)):isObject$3(_e)?walkObject(_e,et=>_(et)):_e!=null?_(_e):_e}function flatten(_e,_){const et={};return walkObject(_e,(tt,rt)=>{tt&&(et[rt.join(".")]=tt.value)},{stop:_}),et}const memo=_e=>{const _=Object.create(null);function et(...tt){const rt=JSON.stringify(tt);return _[rt]===void 0&&(_[rt]=_e(...tt)),_[rt]}return et},BASE_FONT_SIZE=16,UNIT_PX="px",UNIT_EM="em",UNIT_REM="rem";function getUnit(_e=""){const _=new RegExp(String.raw`-?\d+(?:\.\d+|\d*)`),et=new RegExp(`${UNIT_PX}|${UNIT_EM}|${UNIT_REM}`),tt=_e.match(new RegExp(`${_.source}(${et.source})`));return tt==null?void 0:tt[1]}function toPx(_e=""){if(typeof _e=="number")return`${_e}px`;const _=getUnit(_e);if(!_||_===UNIT_PX)return _e;if(_===UNIT_EM||_===UNIT_REM)return`${parseFloat(_e)*BASE_FONT_SIZE}${UNIT_PX}`}function toRem(_e=""){const _=getUnit(_e);if(!_||_===UNIT_REM)return _e;if(_===UNIT_EM)return`${parseFloat(_e)}${UNIT_REM}`;if(_===UNIT_PX)return`${parseFloat(_e)/BASE_FONT_SIZE}${UNIT_REM}`}const capitalize=_e=>_e.charAt(0).toUpperCase()+_e.slice(1);function createBreakpoints(_e){const _=sort(_e),et=Object.fromEntries(_);function tt(it){return et[it]}function rt(it){return build(tt(it))}function nt(){const it=Object.keys(et),ut=getPermutations(it),ht=it.flatMap(ft=>{const gt=tt(ft),mt=[`${ft}Down`,build({max:adjust(gt.min)})],yt=[ft,build({min:gt.min})],bt=[`${ft}Only`,rt(ft)];return[yt,bt,mt]}).filter(([,ft])=>ft!=="").concat(ut.map(([ft,gt])=>{const mt=tt(ft),yt=tt(gt);return[`${ft}To${capitalize(gt)}`,build({min:mt.min,max:adjust(yt.min)})]}));return Object.fromEntries(ht)}function ot(){const it=nt();return Object.fromEntries(Object.entries(it))}const at=ot(),lt=it=>at[it];function ct(){return["base",...Object.keys(et)]}function dt(it){return build({min:tt(it).min})}function st(it){return build({max:adjust(tt(it).min)})}return{values:Object.values(et),only:rt,keys:ct,conditions:at,getCondition:lt,up:dt,down:st}}function adjust(_e){const _=parseFloat(toPx(_e)??"")-.04;return toRem(`${_}px`)}function sort(_e){return Object.entries(_e).sort(([,et],[,tt])=>parseInt(et,10)<parseInt(tt,10)?-1:1).map(([et,tt],rt,nt)=>{var at;let ot=null;return rt<=nt.length-1&&(ot=(at=nt[rt+1])==null?void 0:at[1]),ot!=null&&(ot=adjust(ot)),[et,{name:et,min:toRem(tt),max:ot}]})}function getPermutations(_e){const _=[];return _e.forEach((et,tt)=>{let rt=tt;rt++;let nt=_e[rt];for(;nt;)_.push([et,nt]),rt++,nt=_e[rt]}),_}function build({min:_e,max:_}){return _e==null&&_==null?"":["@media screen",_e&&`(min-width: ${_e})`,_&&`(max-width: ${_})`].filter(Boolean).join(" and ")}const mapEntries$1=(_e,_)=>Object.fromEntries(Object.entries(_e).map(([et,tt])=>_(et,tt))),createConditions=_e=>{const{breakpoints:_,conditions:et={}}=_e,tt=mapEntries$1(et,(dt,st)=>[`_${dt}`,st]),rt=Object.assign({},tt,_.conditions);function nt(){return Object.keys(rt)}function ot(dt){return nt().includes(dt)||/^@|&|&$/.test(dt)||dt.startsWith("_")}function at(dt){return dt.filter(st=>st!=="base").sort((st,it)=>{const ut=ot(st),ht=ot(it);return ut&&!ht?1:!ut&&ht?-1:0})}function lt(dt){return dt.startsWith("@breakpoint")?_.getCondition(dt.replace("@breakpoint ","")):dt}function ct(dt){return Reflect.get(rt,dt)||dt}return{keys:nt,sort:at,has:ot,resolve:ct,breakpoints:_.keys(),expandAtRule:lt}},createMediaQueryRegex=_e=>({minMax:new RegExp(`(!?\\(\\s*min(-device-)?-${_e})(.|
)+\\(\\s*max(-device)?-${_e}`,"i"),min:new RegExp(`\\(\\s*min(-device)?-${_e}`,"i"),maxMin:new RegExp(`(!?\\(\\s*max(-device)?-${_e})(.|
)+\\(\\s*min(-device)?-${_e}`,"i"),max:new RegExp(`\\(\\s*max(-device)?-${_e}`,"i")}),widthRegex=createMediaQueryRegex("width"),heightRegex=createMediaQueryRegex("height"),createQueryTester=_e=>({isMin:_testQuery(_e.minMax,_e.maxMin,_e.min),isMax:_testQuery(_e.maxMin,_e.minMax,_e.max)}),{isMin:isMinWidth,isMax:isMaxWidth}=createQueryTester(widthRegex),{isMin:isMinHeight,isMax:isMaxHeight}=createQueryTester(heightRegex),isPrint=/print/i,isPrintOnly=/^print$/i,isLength=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/,lengthExec=/(\d)/,maxValue=Number.MAX_VALUE,multipliers={ch:8.8984375,em:16,rem:16,ex:8.296875,px:1};function getQueryLength(_e){const _=isLength.exec(_e)||(isMinWidth(_e)||isMinHeight(_e)?lengthExec.exec(_e):null);if(!_)return maxValue;if(_[0]==="0")return 0;const et=parseFloat(_[1]),tt=_[2];return et*(multipliers[tt]||1)}function _testQuery(_e,_,et){return tt=>_e.test(tt)||!_.test(tt)&&et.test(tt)}function _testIsPrint(_e,_){const et=isPrint.test(_e),tt=isPrintOnly.test(_e),rt=isPrint.test(_),nt=isPrintOnly.test(_);return et&&rt?!tt&&nt?1:tt&&!nt?-1:_e.localeCompare(_):et?1:rt?-1:null}const sortAtParams=memo((_e,_)=>{const et=_testIsPrint(_e,_);if(et!==null)return et;const tt=isMinWidth(_e)||isMinHeight(_e),rt=isMaxWidth(_e)||isMaxHeight(_e),nt=isMinWidth(_)||isMinHeight(_),ot=isMaxWidth(_)||isMaxHeight(_);if(tt&&ot)return-1;if(rt&&nt)return 1;const at=getQueryLength(_e),lt=getQueryLength(_);return at===maxValue&&lt===maxValue?_e.localeCompare(_):at===maxValue?1:lt===maxValue?-1:at!==lt?at>lt?rt?-1:1:rt?1:-1:_e.localeCompare(_)});function sortQueries(_e){return _e.sort(([_],[et])=>sortAtParams(_,et))}function sortAtRules(_e){const _=[],et=[],tt={};for(const[ot,at]of Object.entries(_e))ot.startsWith("@media")?_.push([ot,at]):ot.startsWith("@container")?et.push([ot,at]):isObject$3(at)?tt[ot]=sortAtRules(at):tt[ot]=at;const rt=sortQueries(_),nt=sortQueries(et);return{...tt,...Object.fromEntries(rt),...Object.fromEntries(nt)}}const importantRegex=/\s*!(important)?/i,isImportant=_e=>isString$2(_e)?importantRegex.test(_e):!1,withoutImportant=_e=>isString$2(_e)?_e.replace(importantRegex,"").trim():_e;function createCssFn(_e){const{transform:_,conditions:et,normalize:tt}=_e,rt=mergeCss(_e);return memo((...nt)=>{const ot=rt(...nt),at=tt(ot),lt=Object.create(null);return walkObject(at,(ct,dt)=>{const st=isImportant(ct);if(ct==null)return;const[it,...ut]=et.sort(dt).map(et.resolve);st&&(ct=withoutImportant(ct));let ht=_(it,ct)??Object.create(null);ht=walkObject(ht,ft=>isString$2(ft)&&st?`${ft} !important`:ft,{getKey:ft=>et.expandAtRule(ft)}),mergeByPath(lt,ut.flat(),ht)}),sortAtRules(lt)})}function mergeByPath(_e,_,et){let tt=_e;for(const rt of _)rt&&(tt[rt]||(tt[rt]=Object.create(null)),tt=tt[rt]);mergeWith(tt,et)}function compactFn(..._e){return _e.filter(_=>isObject$3(_)&&Object.keys(compact$3(_)).length>0)}function mergeCss(_e){function _(et){const tt=compactFn(...et);return tt.length===1?tt:tt.map(rt=>_e.normalize(rt))}return memo((...et)=>mergeWith({},..._(et)))}function omit(_e,_=[]){const et=Object.assign({},_e);for(const tt of _)tt in et&&delete et[tt];return et}const uniq=(..._e)=>{const _=_e.filter(Boolean);return Array.from(new Set(_))},defaults$2=_e=>({base:{},variants:{},defaultVariants:{},compoundVariants:[],..._e});function createRecipeFn(_e){const{css:_,conditions:et,normalize:tt,layers:rt}=_e;function nt(at={}){const{base:lt,variants:ct,defaultVariants:dt,compoundVariants:st}=defaults$2(at),it=createCssFn({conditions:et,normalize:tt,transform(yt,bt){var vt;return(vt=ct[yt])==null?void 0:vt[bt]}}),ut=(yt={})=>{const bt=tt({...dt,...compact$3(yt)});let vt={...lt};mergeWith(vt,it(bt));const xt=ot(st,bt);return rt.wrap("recipes",_(vt,xt))},ht=Object.keys(ct),ft=yt=>{const bt=omit(yt,["recipe"]),[vt,xt]=splitProps(bt,ht);return ht.includes("colorPalette")||(vt.colorPalette=yt.colorPalette||dt.colorPalette),ht.includes("orientation")&&(xt.orientation=yt.orientation),[vt,xt]},gt=Object.fromEntries(Object.entries(ct).map(([yt,bt])=>[yt,Object.keys(bt)]));return Object.assign(yt=>_(ut(yt)),{className:at.className,__cva__:!0,variantMap:gt,variantKeys:ht,raw:ut,config:at,splitVariantProps:ft,merge(yt){return nt(mergeCva(_e)(this,yt))}})}function ot(at,lt){let ct={};return at.forEach(dt=>{Object.entries(dt).every(([it,ut])=>it==="css"?!0:(Array.isArray(ut)?ut:[ut]).some(ft=>lt[it]===ft))&&(ct=_(ct,dt.css))}),ct}return nt}function mergeCva(_e){const{css:_}=_e;return function(tt,rt){const nt=defaults$2(rt.config),ot=uniq(tt.variantKeys,Object.keys(rt.variants)),at=_(tt.base,nt.base),lt=Object.fromEntries(ot.map(it=>[it,_(tt.config.variants[it],nt.variants[it])])),ct=mergeWith(tt.config.defaultVariants,nt.defaultVariants),dt=[...tt.compoundVariants,...nt.compoundVariants];return{className:cx(tt.className,rt.className),base:at,variants:lt,defaultVariants:ct,compoundVariants:dt}}}const defaultLayers={reset:"reset",base:"base",tokens:"tokens",recipes:"recipes"},layerOrder={reset:0,base:1,tokens:2,recipes:3};function createLayers(_e){const _=_e.layers??defaultLayers,tt=Object.values(_).sort((rt,nt)=>layerOrder[rt]-layerOrder[nt]);return{names:tt,atRule:`@layer ${tt.join(", ")};`,wrap(rt,nt){return _e.disableLayers?nt:{[`@layer ${_[rt]}`]:nt}}}}function createNormalizeFn(_e){const{utility:_,normalize:et}=_e,{hasShorthand:tt,resolveShorthand:rt}=_;return function(nt){return walkObject(nt,et,{stop:ot=>Array.isArray(ot),getKey:tt?rt:void 0})}}function createPreflight(_e){const{preflight:_}=_e;if(!_)return{};const{scope:et="",level:tt="parent"}=isObject$3(_)?_:{};let rt="";et&&tt==="parent"?rt=`${et} `:et&&tt==="element"&&(rt=`&${et}`);const nt={"*":{margin:"0px",padding:"0px",font:"inherit",wordWrap:"break-word",WebkitTapHighlightColor:"transparent"},"*, *::before, *::after, *::backdrop":{boxSizing:"border-box",borderWidth:"0px",borderStyle:"solid",borderColor:"var(--global-color-border, currentColor)"},hr:{height:"0px",color:"inherit",borderTopWidth:"1px"},body:{minHeight:"100dvh",position:"relative"},img:{borderStyle:"none"},"img, svg, video, canvas, audio, iframe, embed, object":{display:"block",verticalAlign:"middle"},iframe:{border:"none"},"img, video":{maxWidth:"100%",height:"auto"},"p, h1, h2, h3, h4, h5, h6":{overflowWrap:"break-word"},"ol, ul":{listStyle:"none"},"code, kbd, pre, samp":{fontSize:"1em"},"button, [type='button'], [type='reset'], [type='submit']":{WebkitAppearance:"button",backgroundColor:"transparent",backgroundImage:"none"},"button, input, optgroup, select, textarea":{color:"inherit"},"button, select":{textTransform:"none"},table:{textIndent:"0px",borderColor:"inherit",borderCollapse:"collapse"},"*::placeholder":{opacity:"unset",color:"#9ca3af",userSelect:"none"},textarea:{resize:"vertical"},summary:{display:"list-item"},small:{fontSize:"80%"},"sub, sup":{fontSize:"75%",lineHeight:0,position:"relative",verticalAlign:"baseline"},sub:{bottom:"-0.25em"},sup:{top:"-0.5em"},dialog:{padding:"0px"},a:{color:"inherit",textDecoration:"inherit"},"abbr:where([title])":{textDecoration:"underline dotted"},"b, strong":{fontWeight:"bolder"},"code, kbd, samp, pre":{fontSize:"1em","--font-mono-fallback":"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New'",fontFamily:"var(--global-font-mono, var(--font-mono-fallback))"},'input[type="text"], input[type="email"], input[type="search"], input[type="password"]':{WebkitAppearance:"none",MozAppearance:"none"},"input[type='search']":{WebkitAppearance:"textfield",outlineOffset:"-2px"},"::-webkit-search-decoration, ::-webkit-search-cancel-button":{WebkitAppearance:"none"},"::-webkit-file-upload-button":{WebkitAppearance:"button",font:"inherit"},'input[type="number"]::-webkit-inner-spin-button, input[type="number"]::-webkit-outer-spin-button':{height:"auto"},"input[type='number']":{MozAppearance:"textfield"},":-moz-ui-invalid":{boxShadow:"none"},":-moz-focusring":{outline:"auto"},"[hidden]:where(:not([hidden='until-found']))":{display:"none !important"}},ot={[et||"html"]:{lineHeight:1.5,"--font-fallback":"ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'",WebkitTextSizeAdjust:"100%",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",touchAction:"manipulation",MozTabSize:"4",tabSize:"4",fontFamily:"var(--global-font-body, var(--font-fallback))"}};if(tt==="element"){const at=Object.entries(nt).reduce((lt,[ct,dt])=>(lt[ct]={[rt]:dt},lt),{});Object.assign(ot,at)}else rt?ot[rt]=nt:Object.assign(ot,nt);return ot}function createSerializeFn(_e){const{conditions:_,isValidProperty:et}=_e;return function(rt){return walkObject(rt,nt=>nt,{getKey:(nt,ot)=>isObject$3(ot)&&!_.has(nt)&&!et(nt)?parseSelectors(nt).map(at=>"&"+at).join(", "):nt})}}function parseSelectors(_e){const _=[];let et=0,tt="",rt=!1;for(let nt=0;nt<_e.length;nt++){const ot=_e[nt];if(ot==="\\"&&!rt){rt=!0,tt+=ot;continue}if(rt){rt=!1,tt+=ot;continue}ot==="("?et++:ot===")"&&et--,ot===","&&et===0?(_.push(tt.trim()),tt=""):tt+=ot}return tt&&_.push(tt.trim()),_}const getSlotRecipes=(_e={})=>{const _=rt=>{var nt;return{base:((nt=_e.base)==null?void 0:nt[rt])??{},variants:{},defaultVariants:_e.defaultVariants??{},compoundVariants:_e.compoundVariants?getSlotCompoundVariant(_e.compoundVariants,rt):[]}},tt=(_e.slots??[]).map(rt=>[rt,_(rt)]);for(const[rt,nt]of Object.entries(_e.variants??{}))for(const[ot,at]of Object.entries(nt))tt.forEach(([lt,ct])=>{var dt;(dt=ct.variants)[rt]??(dt[rt]={}),ct.variants[rt][ot]=at[lt]??{}});return Object.fromEntries(tt)},getSlotCompoundVariant=(_e,_)=>_e.filter(et=>et.css[_]).map(et=>({...et,css:et.css[_]}));function createSlotRecipeFn(_e){const{cva:_}=_e;return function(tt={}){const rt=Object.entries(getSlotRecipes(tt)).map(([st,it])=>[st,_(it)]);function nt(st){const it=rt.map(([ut,ht])=>[ut,ht(st)]);return Object.fromEntries(it)}const ot=tt.variants??{},at=Object.keys(ot);function lt(st){var ft;const it=omit(st,["recipe"]),[ut,ht]=splitProps(it,at);return at.includes("colorPalette")||(ut.colorPalette=st.colorPalette||((ft=tt.defaultVariants)==null?void 0:ft.colorPalette)),at.includes("orientation")&&(ht.orientation=st.orientation),[ut,ht]}const ct=Object.fromEntries(Object.entries(ot).map(([st,it])=>[st,Object.keys(it)]));let dt={};return tt.className&&(dt=Object.fromEntries(tt.slots.map(st=>[st,`${tt.className}__${st}`]))),Object.assign(nt,{variantMap:ct,variantKeys:at,splitVariantProps:lt,classNameMap:dt})}}const createProps$1=()=>_e=>Array.from(new Set(_e)),rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|^-|[^\x80-\uFFFF\w-]/g,fcssescape=function(_e,_){return _?_e==="\0"?"":_e==="-"&&_e.length===1?"\\-":_e.slice(0,-1)+"\\"+_e.charCodeAt(_e.length-1).toString(16):"\\"+_e},esc=_e=>(_e+"").replace(rcssescape,fcssescape),expandTokenReferences=(_e,_)=>{let et="",tt=0,rt="char",nt="",ot="";const at=[];for(;tt<_e.length;){const lt=_e[tt];if(lt==="{"){const dt=_e.indexOf("}",tt);if(dt===-1)break;const st=_e.slice(tt+1,dt),it=_(st);et+=it??st,tt=dt+1;continue}if(rt==="token"&&lt===","){_e[tt]===""&&tt++,rt="fallback",at.push(rt);const dt=_(nt);dt!=null&&dt.endsWith(")")&&(et+=dt.slice(0,-1)),nt="",ot="";continue}if(rt==="fallback"&&ot+lt===", var("){const it=cssVarParser(_e.slice(tt+1))+tt+1,ut=_e.slice(tt+1,it);if(it===-1)break;et+=", var("+ut+")",tt=it+1,rt=at.pop()??rt,ot="";continue}if(rt==="token"||rt==="fallback"){if(tt++,lt===")"){rt=at.pop()??rt??"char",ot+=lt;const dt=nt&&(_(nt)??esc(nt));if(ot){if(ot=ot.slice(1).trim(),!ot.startsWith("token(")&&ot.endsWith(")")&&(ot=ot.slice(0,-1)),ot.includes("token(")){const it=expandTokenReferences(ot,_);it&&(ot=it.slice(0,-1))}else if(ot){const it=_(ot);it&&(ot=it)}}const st=et.at(-1);ot?st!=null&&st.trim()?et+=dt.slice(0,-1)+(", "+ot+")"):et+=ot:et+=dt||")",nt="",ot="",rt="char";continue}rt==="token"&&(nt+=lt),rt==="fallback"&&(ot+=lt);continue}const ct=_e.indexOf("token(",tt);if(ct!==-1){const dt=ct+6;et+=_e.slice(tt,ct),tt=dt,rt="token",at.push(rt);continue}et+=lt,tt++}return et},cssVarParser=_e=>{let _=0;const et=["("];for(;_<_e.length;){const tt=_e[_];if(tt==="(")et.push(tt);else if(tt===")"&&(et.pop(),et.length===0))return _;_++}return _};function mapToJson(_e){const _={};return _e.forEach((et,tt)=>{et instanceof Map?_[tt]=Object.fromEntries(et):_[tt]=et}),_}const REFERENCE_REGEX=/({([^}]*)})/g,CURLY_REGEX=/[{}]/g,TOKEN_PATH_REGEX=/\w+\.\w+/,getReferences=_e=>{if(!isString$2(_e))return[];const _=_e.match(REFERENCE_REGEX);return _?_.map(et=>et.replace(CURLY_REGEX,"")).map(et=>et.trim()):[]},hasReference=_e=>REFERENCE_REGEX.test(_e);function expandReferences(_e){var et,tt,rt;if(!((et=_e.extensions)!=null&&et.references))return((rt=(tt=_e.extensions)==null?void 0:tt.cssVar)==null?void 0:rt.ref)??_e.value;const _=_e.extensions.references??{};return _e.value=Object.keys(_).reduce((nt,ot)=>{const at=_[ot];if(at.extensions.conditions)return nt;const lt=expandReferences(at);return nt.replace(`{${ot}}`,lt)},_e.value),delete _e.extensions.references,_e.value}function resolveReference(_e){return isObject$3(_e)&&_e.reference?_e.reference:String(_e)}const toExpression=(_e,..._)=>_.map(resolveReference).join(` ${_e} `).replace(/calc/g,""),add$1=(..._e)=>`calc(${toExpression("+",..._e)})`,subtract=(..._e)=>`calc(${toExpression("-",..._e)})`,multiply=(..._e)=>`calc(${toExpression("*",..._e)})`,divide=(..._e)=>`calc(${toExpression("/",..._e)})`,negate=_e=>{const _=resolveReference(_e);return _!=null&&!Number.isNaN(parseFloat(_))?String(_).startsWith("-")?String(_).slice(1):`-${_}`:multiply(_,-1)},calc=Object.assign(_e=>({add:(..._)=>calc(add$1(_e,..._)),subtract:(..._)=>calc(subtract(_e,..._)),multiply:(..._)=>calc(multiply(_e,..._)),divide:(..._)=>calc(divide(_e,..._)),negate:()=>calc(negate(_e)),toString:()=>_e.toString()}),{add:add$1,subtract,multiply,divide,negate}),addNegativeTokens={enforce:"pre",transform(_e){const{prefix:_,allTokens:et,formatCssVar:tt,formatTokenName:rt,registerToken:nt}=_e;et.filter(({extensions:at})=>at.category==="spacing").forEach(at=>{const lt=at.path.slice(),ct=tt(lt,_);if(isString$2(at.value)&&at.value==="0rem")return;const dt=structuredClone(at);Object.assign(dt.extensions,{negative:!0,prop:`-${at.extensions.prop}`,originalPath:lt}),dt.value=calc.negate(ct.ref);const st=dt.path[dt.path.length-1];st!=null&&(dt.path[dt.path.length-1]=`-${st}`),dt.path&&(dt.name=rt(dt.path)),nt(dt)})}},units=new Set(["spacing","sizes","borderWidths","fontSizes","radii"]),addPixelUnit={enforce:"post",transform(_e){_e.allTokens.filter(et=>units.has(et.extensions.category)&&!et.extensions.negative).forEach(et=>{Object.assign(et.extensions,{pixelValue:toPx(et.value)})})}},addVirtualPalette={enforce:"post",transform(_e){const{allTokens:_,registerToken:et,formatTokenName:tt}=_e,rt=_.filter(({extensions:at})=>at.category==="colors"),nt=new Map,ot=new Map;rt.forEach(at=>{const{colorPalette:lt}=at.extensions;lt&&(lt.keys.forEach(ct=>{nt.set(tt(ct),ct)}),lt.roots.forEach(ct=>{var it;const dt=tt(ct),st=ot.get(dt)||[];if(st.push(at),ot.set(dt,st),at.extensions.default&&ct.length===1){const ut=(it=lt.keys[0])==null?void 0:it.filter(Boolean);if(!ut.length)return;const ht=ct.concat(ut);nt.set(tt(ht),[])}}))}),nt.forEach(at=>{const lt=["colors","colorPalette",...at].filter(Boolean),ct=tt(lt),dt=tt(lt.slice(1));et({name:ct,value:ct,originalValue:ct,path:lt,extensions:{condition:"base",originalPath:lt,category:"colors",prop:dt,virtual:!0}},"pre")})}},removeEmptyTokens={enforce:"post",transform(_e){_e.allTokens=_e.allTokens.filter(_=>_.value!=="")}},tokenMiddlewares=[addNegativeTokens,addVirtualPalette,addPixelUnit,removeEmptyTokens],addCssVariables={type:"extensions",enforce:"pre",name:"tokens/css-var",transform(_e,_){const{prefix:et,formatCssVar:tt}=_,{negative:rt,originalPath:nt}=_e.extensions,ot=rt?nt:_e.path;return{cssVar:tt(ot.filter(Boolean),et)}}},addConditionalCssVariables={enforce:"post",type:"value",name:"tokens/conditionals",transform(_e,_){const{prefix:et,formatCssVar:tt}=_,rt=getReferences(_e.value);return rt.length&&rt.forEach(nt=>{const ot=tt(nt.split("."),et);_e.value=_e.value.replace(`{${ot.ref}}`,ot)}),_e.value}},addColorPalette={type:"extensions",enforce:"pre",name:"tokens/colors/colorPalette",match(_e){return _e.extensions.category==="colors"&&!_e.extensions.virtual},transform(_e,_){let et=_e.path.slice();if(et.pop(),et.shift(),et.length===0){const at=[..._e.path];at.shift(),et=at}if(et.length===0)return{};const tt=et.reduce((at,lt,ct,dt)=>{const st=dt.slice(0,ct+1);return at.push(st),at},[]),rt=et[0],nt=_.formatTokenName(et),ot=_e.path.slice(_e.path.indexOf(rt)+1).reduce((at,lt,ct,dt)=>(at.push(dt.slice(ct)),at),[]);return ot.length===0&&ot.push([""]),{colorPalette:{value:nt,roots:tt,keys:ot}}}},tokenTransforms=[addCssVariables,addConditionalCssVariables,addColorPalette],isToken=_e=>isObject$3(_e)&&Object.prototype.hasOwnProperty.call(_e,"value");function expandBreakpoints(_e){return _e?{breakpoints:mapObject(_e,_=>({value:_})),sizes:Object.fromEntries(Object.entries(_e).map(([_,et])=>[`breakpoint-${_}`,{value:et}]))}:{breakpoints:{},sizes:{}}}function createTokenDictionary(_e){const{prefix:_="",tokens:et={},semanticTokens:tt={},breakpoints:rt={}}=_e,nt=Zt=>Zt.join("."),ot=(Zt,Qt)=>cssVar(Zt.join("-"),{prefix:Qt}),at=[],lt=new Map,ct=new Map,dt=new Map,st=new Map,it=new Map,ut=new Map,ht=new Map,ft=new Map,gt=[];function mt(Zt,Qt){at.push(Zt),lt.set(Zt.name,Zt),Qt&&ft.forEach(rr=>{rr.enforce===Qt&&Ut(rr,Zt)})}const yt=expandBreakpoints(rt),bt=compact$3({...et,breakpoints:yt.breakpoints,sizes:{...et.sizes,...yt.sizes}});function vt(){walkObject(bt,(Zt,Qt)=>{const rr=Qt.includes("DEFAULT");Qt=filterDefault(Qt);const ar=Qt[0],pr=nt(Qt),ur=isString$2(Zt)?{value:Zt}:Zt,mr={value:ur.value,originalValue:ur.value,name:pr,path:Qt,extensions:{condition:"base",originalPath:Qt,category:ar,prop:nt(Qt.slice(1))}};rr&&(mr.extensions.default=!0),mt(mr)},{stop:isToken}),walkObject(tt,(Zt,Qt)=>{const rr=Qt.includes("DEFAULT");Qt=filterBaseCondition(filterDefault(Qt));const ar=Qt[0],pr=nt(Qt),ur=isString$2(Zt.value)?{value:{base:Zt.value}}:Zt,mr={value:ur.value.base||"",originalValue:ur.value.base||"",name:pr,path:Qt,extensions:{originalPath:Qt,category:ar,conditions:ur.value,condition:"base",prop:nt(Qt.slice(1))}};rr&&(mr.extensions.default=!0),mt(mr)},{stop:isToken})}function xt(Zt){return lt.get(Zt)}function wt(Zt){const{condition:Qt}=Zt.extensions;Qt&&(ct.has(Qt)||ct.set(Qt,new Set),ct.get(Qt).add(Zt))}function St(Zt){const{category:Qt,prop:rr}=Zt.extensions;Qt&&(ht.has(Qt)||ht.set(Qt,new Map),ht.get(Qt).set(rr,Zt))}function Et(Zt){const{condition:Qt,negative:rr,virtual:ar,cssVar:pr}=Zt.extensions;rr||ar||!Qt||!pr||(dt.has(Qt)||dt.set(Qt,new Map),dt.get(Qt).set(pr.var,Zt.value))}function _t(Zt){const{category:Qt,prop:rr,cssVar:ar,negative:pr}=Zt.extensions;if(!Qt)return;ut.has(Qt)||ut.set(Qt,new Map);const ur=pr?Zt.extensions.conditions?Zt.originalValue:Zt.value:ar.ref;ut.get(Qt).set(rr,ur),it.set([Qt,rr].join("."),ur)}function Tt(Zt){const{colorPalette:Qt,virtual:rr,default:ar}=Zt.extensions;!Qt||rr||Qt.roots.forEach(pr=>{var Br;const ur=nt(pr);st.has(ur)||st.set(ur,new Map);const mr=replaceRootWithColorPalette([...Zt.path],[...pr]),Or=nt(mr),$r=xt(Or);if(!$r||!$r.extensions.cssVar)return;const{var:Gr}=$r.extensions.cssVar;if(st.get(ur).set(Gr,Zt.extensions.cssVar.ref),ar&&pr.length===1){const Jr=nt(["colors","colorPalette"]),Wr=xt(Jr);if(!Wr)return;const Hr=nt(Zt.path),Mr=xt(Hr);if(!Mr)return;const Ur=(Br=Qt.keys[0])==null?void 0:Br.filter(Boolean);if(!Ur.length)return;const Xr=nt(pr.concat(Ur));st.has(Xr)||st.set(Xr,new Map),st.get(Xr).set(Wr.extensions.cssVar.var,Mr.extensions.cssVar.ref)}})}let Rt={};function Ot(){at.forEach(Zt=>{wt(Zt),St(Zt),Et(Zt),_t(Zt),Tt(Zt)}),Rt=mapToJson(ut)}const At=(Zt,Qt)=>{var $r;if(!Zt||typeof Zt!="string")return{invalid:!0,value:Zt};const[rr,ar]=Zt.split("/");if(!rr||!ar)return{invalid:!0,value:rr};const pr=Qt(rr),ur=($r=xt(`opacity.${ar}`))==null?void 0:$r.value;if(!ur&&isNaN(Number(ar)))return{invalid:!0,value:rr};const mr=ur?Number(ur)*100+"%":`${ar}%`,Or=pr??rr;return{invalid:!1,color:Or,value:`color-mix(in srgb, ${Or} ${mr}, transparent)`}},Ct=memo((Zt,Qt)=>it.get(Zt)??Qt),$t=memo(Zt=>Rt[Zt]||null),Mt=memo(Zt=>expandTokenReferences(Zt,Qt=>{if(!Qt)return;if(Qt.includes("/")){const ar=At(Qt,pr=>Ct(pr));if(ar.invalid)throw new Error("Invalid color mix at "+Qt+": "+ar.value);return ar.value}const rr=Ct(Qt);return rr||(TOKEN_PATH_REGEX.test(Qt)?esc(Qt):Qt)})),Dt={prefix:_,allTokens:at,tokenMap:lt,registerToken:mt,getByName:xt,formatTokenName:nt,formatCssVar:ot,flatMap:it,cssVarMap:dt,categoryMap:ht,colorPaletteMap:st,getVar:Ct,getCategoryValues:$t,expandReferenceInValue:Mt};function Nt(...Zt){Zt.forEach(Qt=>{ft.set(Qt.name,Qt)})}function Bt(...Zt){gt.push(...Zt)}function Ut(Zt,Qt){if(Qt.extensions.references||isFunction$2(Zt.match)&&!Zt.match(Qt))return;const ar=(pr=>Zt.transform(pr,Dt))(Qt);switch(!0){case Zt.type==="extensions":Object.assign(Qt.extensions,ar);break;case Zt.type==="value":Qt.value=ar;break;default:Qt[Zt.type]=ar;break}}function Vt(Zt){gt.forEach(Qt=>{Qt.enforce===Zt&&Qt.transform(Dt)})}function Jt(Zt){ft.forEach(Qt=>{Qt.enforce===Zt&&at.forEach(rr=>{Ut(Qt,rr)})})}function lr(){at.forEach(Zt=>{const Qt=getConditionalTokens(Zt);!Qt||Qt.length===0||Qt.forEach(rr=>{mt(rr)})})}function nr(Zt){return getReferences(Zt).map(rr=>xt(rr)).filter(Boolean)}function ir(){at.forEach(Zt=>{if(!hasReference(Zt.value))return;const Qt=nr(Zt.value);Zt.extensions.references=Qt.reduce((rr,ar)=>(rr[ar.name]=ar,rr),{})})}function cr(){at.forEach(Zt=>{expandReferences(Zt)})}function hr(){Vt("pre"),Jt("pre"),lr(),ir(),cr(),Vt("post"),Jt("post"),Ot()}return vt(),Nt(...tokenTransforms),Bt(...tokenMiddlewares),hr(),Dt}function filterDefault(_e){return _e[0]==="DEFAULT"?_e:_e.filter(_=>_!=="DEFAULT")}function filterBaseCondition(_e){return _e.filter(_=>_!=="base")}function getConditionalTokens(_e){if(!_e.extensions.conditions)return;const{conditions:_}=_e.extensions,et=[];return walkObject(_,(tt,rt)=>{const nt=filterBaseCondition(rt);if(!nt.length)return;const ot=structuredClone(_e);ot.value=tt,ot.extensions.condition=nt.join(":"),et.push(ot)}),et}function replaceRootWithColorPalette(_e,_){const et=_e.findIndex((tt,rt)=>_.every((nt,ot)=>_e[rt+ot]===nt));return et===-1||(_e.splice(et,_.length),_e.splice(et,0,"colorPalette")),_e}createProps$1()(["aspectRatios","zIndex","opacity","colors","fonts","fontSizes","fontWeights","lineHeights","letterSpacings","sizes","shadows","spacing","radii","cursor","borders","borderWidths","borderStyles","durations","easings","animations","blurs","gradients","breakpoints","assets"]);function normalize(_e){return _e}function normalizeConfig(_e){return Object.fromEntries(Object.entries(_e).map(([_,et])=>[_,et]))}function createUtility(_e){const _=normalizeConfig(_e.config),et=_e.tokens,tt=new Map,rt=new Map;function nt(Et,_t){_[Et]=_t,ot(Et,_t)}const ot=(Et,_t)=>{const Tt=ft(_t);Tt&&(rt.set(Et,Tt),st(Et,_t))},at=()=>{for(const[Et,_t]of Object.entries(_))_t&&ot(Et,_t)},lt=()=>{for(const[Et,_t]of Object.entries(_)){const{shorthand:Tt}=_t??{};if(!Tt)continue;(Array.isArray(Tt)?Tt:[Tt]).forEach(Ot=>tt.set(Ot,Et))}},ct=()=>{const Et=mapToJson(et.colorPaletteMap);nt("colorPalette",{values:Object.keys(Et),transform:memo(_t=>Et[_t])})},dt=new Map,st=(Et,_t)=>{if(!_t)return;const Tt=ft(_t,Ot=>`type:Tokens["${Ot}"]`);if(typeof Tt=="object"&&Tt.type){dt.set(Et,new Set([`type:${Tt.type}`]));return}if(Tt){const Ot=new Set(Object.keys(Tt));dt.set(Et,Ot)}const Rt=dt.get(Et)??new Set;_t.property&&dt.set(Et,Rt.add(`CssProperties["${_t.property}"]`))},it=()=>{for(const[Et,_t]of Object.entries(_))_t&&st(Et,_t)},ut=(Et,_t)=>{const Tt=dt.get(Et)??new Set;dt.set(Et,new Set([...Tt,..._t]))},ht=()=>{const Et=new Map;for(const[_t,Tt]of dt.entries()){if(Tt.size===0){Et.set(_t,["string"]);continue}const Rt=Array.from(Tt).map(Ot=>Ot.startsWith("CssProperties")?Ot:Ot.startsWith("type:")?Ot.replace("type:",""):JSON.stringify(Ot));Et.set(_t,Rt)}return Et},ft=(Et,_t)=>{const{values:Tt}=Et,Rt=Ot=>{const At=_t==null?void 0:_t(Ot);return At?{[At]:At}:void 0};return isString$2(Tt)?(Rt==null?void 0:Rt(Tt))??et.getCategoryValues(Tt)??{}:Array.isArray(Tt)?Tt.reduce((Ot,At)=>(Ot[At]=At,Ot),{}):isFunction$2(Tt)?Tt(_t?Rt:et.getCategoryValues):Tt},gt=memo((Et,_t)=>({[Et]:Et.startsWith("--")?et.getVar(_t,_t):_t})),mt=Object.assign(et.getVar,{raw:Et=>et.getByName(Et)}),yt=memo((Et,_t)=>{var Ct;const Tt=xt(Et);isString$2(_t)&&!_t.includes("_EMO_")&&(_t=et.expandReferenceInValue(_t));const Rt=_[Tt];if(!Rt)return gt(Tt,_t);const Ot=(Ct=rt.get(Tt))==null?void 0:Ct[_t];if(!Rt.transform)return gt(Et,Ot??_t);const At=$t=>colorMix($t,mt);return Rt.transform(Ot??_t,{raw:_t,token:mt,utils:{colorMix:At}})});function bt(){lt(),ct(),at(),it()}bt();const vt=tt.size>0,xt=memo(Et=>tt.get(Et)??Et);return{keys:()=>[...Array.from(tt.keys()),...Object.keys(_)],hasShorthand:vt,transform:yt,shorthands:tt,resolveShorthand:xt,register:nt,getTypes:ht,addPropertyType:ut}}function createSystem(..._e){const _=mergeConfigs(..._e),{theme:et={},utilities:tt={},globalCss:rt={},cssVarsRoot:nt=":where(:root, :host)",cssVarsPrefix:ot="chakra",preflight:at}=_,lt=createLayers(_),ct=createTokenDictionary({breakpoints:et.breakpoints,tokens:et.tokens,semanticTokens:et.semanticTokens,prefix:ot}),dt=createBreakpoints(et.breakpoints??{}),st=createConditions({conditions:_.conditions??{},breakpoints:dt}),it=createUtility({config:tt,tokens:ct});function ut(){const{textStyles:Dt,layerStyles:Nt,animationStyles:Bt}=et,Ut=compact$3({textStyle:Dt,layerStyle:Nt,animationStyle:Bt});for(const[Vt,Jt]of Object.entries(Ut)){const lr=flatten(Jt??{},nr=>isObject$3(nr)&&"value"in nr);it.register(Vt,{values:Object.keys(lr),transform(nr){return bt(lr[nr])}})}}ut(),it.addPropertyType("animationName",Object.keys(et.keyframes??{}));const ht=new Set(["css",...it.keys(),...st.keys()]),ft=memo(Dt=>ht.has(Dt)||isCssProperty(Dt)),gt=Dt=>Array.isArray(Dt)?Dt.reduce((Nt,Bt,Ut)=>{const Vt=st.breakpoints[Ut];return Bt!=null&&(Nt[Vt]=Bt),Nt},{}):Dt,mt=createNormalizeFn({utility:it,normalize:gt}),yt=createSerializeFn({conditions:st,isValidProperty:ft}),bt=createCssFn({transform:it.transform,conditions:st,normalize:mt}),vt=createRecipeFn({css:bt,conditions:st,normalize:mt,layers:lt}),xt=createSlotRecipeFn({cva:vt});function wt(){const Dt={};for(const[Nt,Bt]of ct.cssVarMap.entries()){const Ut=Object.fromEntries(Bt);if(Object.keys(Ut).length===0)continue;const Vt=Nt==="base"?nt:st.resolve(Nt),Jt=bt(yt({[Vt]:Ut}));mergeWith(Dt,Jt)}return lt.wrap("tokens",Dt)}function St(){const Dt=Object.fromEntries(Object.entries(et.keyframes??{}).map(([Bt,Ut])=>[`@keyframes ${Bt}`,Ut])),Nt=Object.assign({},Dt,bt(yt(rt)));return lt.wrap("base",Nt)}function Et(Dt){return splitProps(Dt,ft)}function _t(){const Dt=createPreflight({preflight:at});return lt.wrap("reset",Dt)}const Tt=getTokenMap(ct),Rt=(Dt,Nt)=>{var Bt;return((Bt=Tt.get(Dt))==null?void 0:Bt.value)||Nt};Rt.var=(Dt,Nt)=>{var Bt;return((Bt=Tt.get(Dt))==null?void 0:Bt.variable)||Nt};function Ot(Dt,Nt){var Bt;return((Bt=et.recipes)==null?void 0:Bt[Dt])??Nt}function At(Dt,Nt){var Bt;return((Bt=et.slotRecipes)==null?void 0:Bt[Dt])??Nt}function Ct(Dt){return Object.hasOwnProperty.call(et.recipes??{},Dt)}function $t(Dt){return Object.hasOwnProperty.call(et.slotRecipes??{},Dt)}function Mt(Dt){return Ct(Dt)||$t(Dt)}return{$$chakra:!0,_config:_,breakpoints:dt,tokens:ct,conditions:st,utility:it,token:Rt,properties:ht,layers:lt,isValidProperty:ft,splitCssProps:Et,normalizeValue:gt,getTokenCss:wt,getGlobalCss:St,getPreflightCss:_t,css:bt,cva:vt,sva:xt,getRecipe:Ot,getSlotRecipe:At,hasRecipe:Mt,isRecipe:Ct,isSlotRecipe:$t}}function getTokenMap(_e){const _=new Map;return _e.allTokens.forEach(et=>{const{cssVar:tt,virtual:rt,conditions:nt}=et.extensions,ot=nt||rt?tt.ref:et.value;_.set(et.name,{value:ot,variable:tt.ref})}),_}const breakpoints={sm:"480px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},empty="var(--chakra-empty,/*!*/ /*!*/)",globalCss=defineGlobalStyles({"*":{fontFeatureSettings:'"cv11"',"--ring-inset":empty,"--ring-offset-width":"0px","--ring-offset-color":"#fff","--ring-color":"rgba(66, 153, 225, 0.6)","--ring-offset-shadow":"0 0 #0000","--ring-shadow":"0 0 #0000",...Object.fromEntries(["brightness","contrast","grayscale","hue-rotate","invert","saturate","sepia","drop-shadow"].map(_e=>[`--${_e}`,empty])),...Object.fromEntries(["blur","brightness","contrast","grayscale","hue-rotate","invert","opacity","saturate","sepia"].map(_e=>[`--backdrop-${_e}`,empty])),"--global-font-mono":"fonts.mono","--global-font-body":"fonts.body","--global-color-border":"colors.border"},html:{color:"fg",bg:"bg",lineHeight:"1.5",colorPalette:"gray"},"*::placeholder":{color:"fg.muted/80"},"*::selection":{bg:"colorPalette.muted/80"}}),layerStyles=defineLayerStyles({"fill.muted":{value:{background:"colorPalette.muted",color:"colorPalette.fg"}},"fill.subtle":{value:{background:"colorPalette.subtle",color:"colorPalette.fg"}},"fill.surface":{value:{background:"colorPalette.subtle",color:"colorPalette.fg",boxShadow:"0 0 0px 1px var(--shadow-color)",boxShadowColor:"colorPalette.muted"}},"fill.solid":{value:{background:"colorPalette.solid",color:"colorPalette.contrast"}},"outline.subtle":{value:{color:"colorPalette.fg",boxShadow:"inset 0 0 0px 1px var(--shadow-color)",boxShadowColor:"colorPalette.subtle"}},"outline.solid":{value:{borderWidth:"1px",borderColor:"colorPalette.solid",color:"colorPalette.fg"}},"indicator.bottom":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",bottom:"var(--indicator-offset-y, 0)",insetInline:"var(--indicator-offset-x, 0)",height:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.top":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",top:"var(--indicator-offset-y, 0)",insetInline:"var(--indicator-offset-x, 0)",height:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.start":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",insetInlineStart:"var(--indicator-offset-x, 0)",insetBlock:"var(--indicator-offset-y, 0)",width:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.end":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",insetInlineEnd:"var(--indicator-offset-x, 0)",insetBlock:"var(--indicator-offset-y, 0)",width:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},disabled:{value:{opacity:"0.5",cursor:"not-allowed"}},none:{value:{}}}),animationStyles=defineAnimationStyles({"slide-fade-in":{value:{transformOrigin:"var(--transform-origin)","&[data-placement^=top]":{animationName:"slide-from-bottom, fade-in"},"&[data-placement^=bottom]":{animationName:"slide-from-top, fade-in"},"&[data-placement^=left]":{animationName:"slide-from-right, fade-in"},"&[data-placement^=right]":{animationName:"slide-from-left, fade-in"}}},"slide-fade-out":{value:{transformOrigin:"var(--transform-origin)","&[data-placement^=top]":{animationName:"slide-to-bottom, fade-out"},"&[data-placement^=bottom]":{animationName:"slide-to-top, fade-out"},"&[data-placement^=left]":{animationName:"slide-to-right, fade-out"},"&[data-placement^=right]":{animationName:"slide-to-left, fade-out"}}},"scale-fade-in":{value:{transformOrigin:"var(--transform-origin)",animationName:"scale-in, fade-in"}},"scale-fade-out":{value:{transformOrigin:"var(--transform-origin)",animationName:"scale-out, fade-out"}}}),badgeRecipe=defineRecipe({className:"chakra-badge",base:{display:"inline-flex",alignItems:"center",borderRadius:"l2",gap:"1",fontWeight:"medium",fontVariantNumeric:"tabular-nums",whiteSpace:"nowrap",userSelect:"none"},variants:{variant:{solid:{bg:"colorPalette.solid",color:"colorPalette.contrast"},subtle:{bg:"colorPalette.subtle",color:"colorPalette.fg"},outline:{color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},surface:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},plain:{color:"colorPalette.fg"}},size:{xs:{textStyle:"2xs",px:"1",minH:"4"},sm:{textStyle:"xs",px:"1.5",minH:"5"},md:{textStyle:"sm",px:"2",minH:"6"},lg:{textStyle:"sm",px:"2.5",minH:"7"}}},defaultVariants:{variant:"subtle",size:"sm"}}),buttonRecipe=defineRecipe({className:"chakra-button",base:{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",borderRadius:"l2",whiteSpace:"nowrap",verticalAlign:"middle",borderWidth:"1px",borderColor:"transparent",cursor:"button",flexShrink:"0",outline:"0",lineHeight:"1.2",isolation:"isolate",fontWeight:"medium",transitionProperty:"common",transitionDuration:"moderate",focusVisibleRing:"outside",_disabled:{layerStyle:"disabled"},_icon:{flexShrink:"0"}},variants:{size:{"2xs":{h:"6",minW:"6",textStyle:"xs",px:"2",gap:"1",_icon:{width:"3.5",height:"3.5"}},xs:{h:"8",minW:"8",textStyle:"xs",px:"2.5",gap:"1",_icon:{width:"4",height:"4"}},sm:{h:"9",minW:"9",px:"3.5",textStyle:"sm",gap:"2",_icon:{width:"4",height:"4"}},md:{h:"10",minW:"10",textStyle:"sm",px:"4",gap:"2",_icon:{width:"5",height:"5"}},lg:{h:"11",minW:"11",textStyle:"md",px:"5",gap:"3",_icon:{width:"5",height:"5"}},xl:{h:"12",minW:"12",textStyle:"md",px:"5",gap:"2.5",_icon:{width:"5",height:"5"}},"2xl":{h:"16",minW:"16",textStyle:"lg",px:"7",gap:"3",_icon:{width:"6",height:"6"}}},variant:{solid:{bg:"colorPalette.solid",color:"colorPalette.contrast",_hover:{bg:"colorPalette.solid/90"},_expanded:{bg:"colorPalette.solid/90"}},subtle:{bg:"colorPalette.subtle",color:"colorPalette.fg",_hover:{bg:"colorPalette.muted"},_expanded:{bg:"colorPalette.muted"}},surface:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted",_hover:{bg:"colorPalette.muted"},_expanded:{bg:"colorPalette.muted"}},outline:{borderWidth:"1px",borderColor:"colorPalette.muted",color:"colorPalette.fg",_hover:{bg:"colorPalette.subtle"},_expanded:{bg:"colorPalette.subtle"}},ghost:{color:"colorPalette.fg",_hover:{bg:"colorPalette.subtle"},_expanded:{bg:"colorPalette.subtle"}},plain:{color:"colorPalette.fg"}}},defaultVariants:{size:"md",variant:"solid"}}),checkmarkRecipe=defineRecipe({className:"chakra-checkmark",base:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0",color:"white",borderWidth:"1px",borderColor:"transparent",borderRadius:"l1",focusVisibleRing:"outside",_icon:{boxSize:"full"},_invalid:{colorPalette:"red",borderColor:"border.error"},_disabled:{opacity:"0.5"}},variants:{size:{xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5",p:"0.5"},lg:{boxSize:"6",p:"0.5"}},variant:{solid:{borderColor:"border","&:is([data-state=checked], [data-state=indeterminate])":{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},outline:{borderColor:"border","&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg",borderColor:"colorPalette.solid"}},subtle:{bg:"colorPalette.muted",borderColor:"colorPalette.muted","&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg"}},plain:{"&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg"}},inverted:{borderColor:"border",color:"colorPalette.fg","&:is([data-state=checked], [data-state=indeterminate])":{borderColor:"colorPalette.solid"}}}},defaultVariants:{variant:"solid",size:"md"}}),{variants:variants$1,defaultVariants:defaultVariants$1}=badgeRecipe,codeRecipe=defineRecipe({className:"chakra-code",base:{fontFamily:"mono",alignItems:"center",display:"inline-flex",borderRadius:"l2"},variants:variants$1,defaultVariants:defaultVariants$1}),colorSwatchRecipe=defineRecipe({className:"color-swatch",base:{boxSize:"var(--swatch-size)",shadow:"inset 0 0 0 1px rgba(0, 0, 0, 0.1)","--checker-size":"8px","--checker-bg":"colors.bg","--checker-fg":"colors.bg.emphasized",background:"linear-gradient(var(--color), var(--color)), repeating-conic-gradient(var(--checker-fg) 0%, var(--checker-fg) 25%, var(--checker-bg) 0%, var(--checker-bg) 50%) 0% 50% / var(--checker-size) var(--checker-size) !important",display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0"},variants:{size:{"2xs":{"--swatch-size":"sizes.3.5"},xs:{"--swatch-size":"sizes.4"},sm:{"--swatch-size":"sizes.4.5"},md:{"--swatch-size":"sizes.5"},lg:{"--swatch-size":"sizes.6"},xl:{"--swatch-size":"sizes.7"},"2xl":{"--swatch-size":"sizes.8"},inherit:{"--swatch-size":"inherit"},full:{"--swatch-size":"100%"}},shape:{square:{borderRadius:"none"},circle:{borderRadius:"full"},rounded:{borderRadius:"l1"}}},defaultVariants:{size:"md",shape:"rounded"}}),containerRecipe=defineRecipe({className:"chakra-container",base:{position:"relative",maxWidth:"8xl",w:"100%",mx:"auto",px:{base:"4",md:"6",lg:"8"}},variants:{centerContent:{true:{display:"flex",flexDirection:"column",alignItems:"center"}},fluid:{true:{maxWidth:"full"}}}}),headingRecipe=defineRecipe({className:"chakra-heading",base:{fontFamily:"heading",fontWeight:"semibold"},variants:{size:{xs:{textStyle:"xs"},sm:{textStyle:"sm"},md:{textStyle:"md"},lg:{textStyle:"lg"},xl:{textStyle:"xl"},"2xl":{textStyle:"2xl"},"3xl":{textStyle:"3xl"},"4xl":{textStyle:"4xl"},"5xl":{textStyle:"5xl"},"6xl":{textStyle:"6xl"},"7xl":{textStyle:"7xl"}}},defaultVariants:{size:"xl"}}),iconRecipe=defineRecipe({className:"chakra-icon",base:{display:"inline-block",lineHeight:"1em",flexShrink:"0",color:"currentcolor",verticalAlign:"middle",width:"var(--icon-size)",height:"var(--icon-size)"},variants:{size:{inherit:{"--icon-size":"1em"},xs:{"--icon-size":"sizes.3"},sm:{"--icon-size":"sizes.4"},md:{"--icon-size":"sizes.5"},lg:{"--icon-size":"sizes.6"},xl:{"--icon-size":"sizes.7"},"2xl":{"--icon-size":"sizes.8"}}},defaultVariants:{size:"inherit"}}),inputRecipe=defineRecipe({className:"chakra-input",base:{width:"100%",minWidth:"0",outline:"0",position:"relative",appearance:"none",textAlign:"start",borderRadius:"l2",_disabled:{layerStyle:"disabled"},height:"var(--input-height)",minW:"var(--input-height)","--focus-color":"colors.colorPalette.focusRing","--error-color":"colors.border.error",_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"}},variants:{size:{"2xs":{textStyle:"xs",px:"2","--input-height":"sizes.7"},xs:{textStyle:"xs",px:"2","--input-height":"sizes.8"},sm:{textStyle:"sm",px:"2.5","--input-height":"sizes.9"},md:{textStyle:"sm",px:"3","--input-height":"sizes.10"},lg:{textStyle:"md",px:"4","--input-height":"sizes.11"},xl:{textStyle:"md",px:"4.5","--input-height":"sizes.12"},"2xl":{textStyle:"lg",px:"5","--input-height":"sizes.16"}},variant:{outline:{bg:"transparent",borderWidth:"1px",borderColor:"border",focusVisibleRing:"inside"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted",focusVisibleRing:"inside"},flushed:{bg:"transparent",borderBottomWidth:"1px",borderBottomColor:"border",borderRadius:"0",px:"0",_focusVisible:{borderColor:"var(--focus-color)",boxShadow:"0px 1px 0px 0px var(--focus-color)"}}}},defaultVariants:{size:"md",variant:"outline"}}),inputAddonRecipe=defineRecipe({className:"chakra-input-addon",base:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap",alignSelf:"stretch",borderRadius:"l2"},variants:{size:inputRecipe.variants.size,variant:{outline:{borderWidth:"1px",borderColor:"border",bg:"bg.muted"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.emphasized"},flushed:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}},defaultVariants:{size:"md",variant:"outline"}}),kbdRecipe=defineRecipe({className:"chakra-kbd",base:{display:"inline-flex",alignItems:"center",fontWeight:"medium",fontFamily:"mono",flexShrink:"0",whiteSpace:"nowrap",wordSpacing:"-0.5em",userSelect:"none",px:"1",borderRadius:"l2"},variants:{variant:{raised:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderWidth:"1px",borderBottomWidth:"2px",borderColor:"colorPalette.muted"},outline:{borderWidth:"1px",color:"colorPalette.fg"},subtle:{bg:"colorPalette.muted",color:"colorPalette.fg"},plain:{color:"colorPalette.fg"}},size:{sm:{textStyle:"xs",height:"4.5"},md:{textStyle:"sm",height:"5"},lg:{textStyle:"md",height:"6"}}},defaultVariants:{size:"md",variant:"raised"}}),linkRecipe=defineRecipe({className:"chakra-link",base:{display:"inline-flex",alignItems:"center",outline:"none",gap:"1.5",cursor:"pointer",borderRadius:"l1",focusRing:"outside"},variants:{variant:{underline:{color:"colorPalette.fg",textDecoration:"underline",textUnderlineOffset:"3px",textDecorationColor:"currentColor/20"},plain:{color:"colorPalette.fg",_hover:{textDecoration:"underline",textUnderlineOffset:"3px",textDecorationColor:"currentColor/20"}}}},defaultVariants:{variant:"plain"}}),markRecipe=defineRecipe({className:"chakra-mark",base:{bg:"transparent",color:"inherit",whiteSpace:"nowrap"},variants:{variant:{subtle:{bg:"colorPalette.subtle",color:"inherit"},solid:{bg:"colorPalette.solid",color:"colorPalette.contrast"},text:{fontWeight:"medium"},plain:{}}}}),radiomarkRecipe=defineRecipe({className:"chakra-radiomark",base:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,verticalAlign:"top",color:"white",borderWidth:"1px",borderColor:"transparent",borderRadius:"full",cursor:"radio",_focusVisible:{outline:"2px solid",outlineColor:"colorPalette.focusRing",outlineOffset:"2px"},_invalid:{colorPalette:"red",borderColor:"red.500"},_disabled:{opacity:"0.5",cursor:"disabled"},"& .dot":{height:"100%",width:"100%",borderRadius:"full",bg:"currentColor",scale:"0.4"}},variants:{variant:{solid:{borderWidth:"1px",borderColor:"border",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},subtle:{borderWidth:"1px",bg:"colorPalette.muted",borderColor:"colorPalette.muted",color:"transparent",_checked:{color:"colorPalette.fg"}},outline:{borderWidth:"1px",borderColor:"inherit",_checked:{color:"colorPalette.fg",borderColor:"colorPalette.solid"},"& .dot":{scale:"0.6"}},inverted:{bg:"bg",borderWidth:"1px",borderColor:"inherit",_checked:{color:"colorPalette.solid",borderColor:"currentcolor"}}},size:{xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5"},lg:{boxSize:"6"}}},defaultVariants:{variant:"solid",size:"md"}}),separatorRecipe=defineRecipe({className:"chakra-separator",base:{display:"block",borderColor:"border"},variants:{variant:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"},dotted:{borderStyle:"dotted"}},orientation:{vertical:{height:"100%",borderInlineStartWidth:"var(--separator-thickness)"},horizontal:{width:"100%",borderTopWidth:"var(--separator-thickness)"}},size:{xs:{"--separator-thickness":"0.5px"},sm:{"--separator-thickness":"1px"},md:{"--separator-thickness":"2px"},lg:{"--separator-thickness":"3px"}}},defaultVariants:{size:"sm",variant:"solid",orientation:"horizontal"}}),skeletonRecipe=defineRecipe({className:"chakra-skeleton",base:{},variants:{loading:{true:{borderRadius:"l2",boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none",flexShrink:"0","&::before, &::after, *":{visibility:"hidden"}},false:{background:"unset",animation:"fade-in var(--fade-duration, 0.1s) ease-out !important"}},variant:{pulse:{background:"bg.emphasized",animation:"pulse",animationDuration:"var(--duration, 1.2s)"},shine:{"--animate-from":"200%","--animate-to":"-200%","--start-color":"colors.bg.muted","--end-color":"colors.bg.emphasized",backgroundImage:"linear-gradient(270deg,var(--start-color),var(--end-color),var(--end-color),var(--start-color))",backgroundSize:"400% 100%",animation:"bg-position var(--duration, 5s) ease-in-out infinite"},none:{animation:"none"}}},defaultVariants:{variant:"pulse",loading:!0}}),skipNavLinkRecipe=defineRecipe({className:"chakra-skip-nav",base:{display:"inline-flex",bg:"bg.panel",padding:"2.5",borderRadius:"l2",fontWeight:"semibold",focusVisibleRing:"outside",textStyle:"sm",userSelect:"none",border:"0",height:"1px",width:"1px",margin:"-1px",outline:"0",overflow:"hidden",position:"absolute",clip:"rect(0 0 0 0)",_focusVisible:{clip:"auto",width:"auto",height:"auto",position:"fixed",top:"6",insetStart:"6"}}}),spinnerRecipe=defineRecipe({className:"chakra-spinner",base:{display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderWidth:"2px",borderRadius:"full",width:"var(--spinner-size)",height:"var(--spinner-size)",animation:"spin",animationDuration:"slowest","--spinner-track-color":"transparent",borderBottomColor:"var(--spinner-track-color)",borderInlineStartColor:"var(--spinner-track-color)"},variants:{size:{inherit:{"--spinner-size":"1em"},xs:{"--spinner-size":"sizes.3"},sm:{"--spinner-size":"sizes.4"},md:{"--spinner-size":"sizes.5"},lg:{"--spinner-size":"sizes.8"},xl:{"--spinner-size":"sizes.10"}}},defaultVariants:{size:"md"}}),textareaRecipe=defineRecipe({className:"chakra-textarea",base:{width:"100%",minWidth:"0",outline:"0",position:"relative",appearance:"none",textAlign:"start",borderRadius:"l2",_disabled:{layerStyle:"disabled"},"--focus-color":"colors.colorPalette.focusRing","--error-color":"colors.border.error",_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"}},variants:{size:{xs:{textStyle:"xs",px:"2",py:"1.5",scrollPaddingBottom:"1.5"},sm:{textStyle:"sm",px:"2.5",py:"2",scrollPaddingBottom:"2"},md:{textStyle:"sm",px:"3",py:"2",scrollPaddingBottom:"2"},lg:{textStyle:"md",px:"4",py:"3",scrollPaddingBottom:"3"},xl:{textStyle:"md",px:"4.5",py:"3.5",scrollPaddingBottom:"3.5"}},variant:{outline:{bg:"transparent",borderWidth:"1px",borderColor:"border",focusVisibleRing:"inside"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted",focusVisibleRing:"inside"},flushed:{bg:"transparent",borderBottomWidth:"1px",borderBottomColor:"border",borderRadius:"0",px:"0",_focusVisible:{borderColor:"var(--focus-color)",boxShadow:"0px 1px 0px 0px var(--focus-color)"}}}},defaultVariants:{size:"md",variant:"outline"}}),recipes={badge:badgeRecipe,button:buttonRecipe,code:codeRecipe,container:containerRecipe,heading:headingRecipe,input:inputRecipe,inputAddon:inputAddonRecipe,kbd:kbdRecipe,link:linkRecipe,mark:markRecipe,separator:separatorRecipe,skeleton:skeletonRecipe,skipNavLink:skipNavLinkRecipe,spinner:spinnerRecipe,textarea:textareaRecipe,icon:iconRecipe,checkmark:checkmarkRecipe,radiomark:radiomarkRecipe,colorSwatch:colorSwatchRecipe},semanticColors=defineSemanticTokens.colors({bg:{DEFAULT:{value:{_light:"{colors.white}",_dark:"{colors.black}"}},subtle:{value:{_light:"{colors.gray.50}",_dark:"{colors.gray.950}"}},muted:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},emphasized:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},inverted:{value:{_light:"{colors.black}",_dark:"{colors.white}"}},panel:{value:{_light:"{colors.white}",_dark:"{colors.gray.950}"}},error:{value:{_light:"{colors.red.50}",_dark:"{colors.red.950}"}},warning:{value:{_light:"{colors.orange.50}",_dark:"{colors.orange.950}"}},success:{value:{_light:"{colors.green.50}",_dark:"{colors.green.950}"}},info:{value:{_light:"{colors.blue.50}",_dark:"{colors.blue.950}"}}},fg:{DEFAULT:{value:{_light:"{colors.black}",_dark:"{colors.gray.50}"}},muted:{value:{_light:"{colors.gray.600}",_dark:"{colors.gray.400}"}},subtle:{value:{_light:"{colors.gray.400}",_dark:"{colors.gray.500}"}},inverted:{value:{_light:"{colors.gray.50}",_dark:"{colors.black}"}},error:{value:{_light:"{colors.red.500}",_dark:"{colors.red.400}"}},warning:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.300}"}},success:{value:{_light:"{colors.green.600}",_dark:"{colors.green.300}"}},info:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.300}"}}},border:{DEFAULT:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},muted:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},subtle:{value:{_light:"{colors.gray.50}",_dark:"{colors.gray.950}"}},emphasized:{value:{_light:"{colors.gray.300}",_dark:"{colors.gray.700}"}},inverted:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}},error:{value:{_light:"{colors.red.500}",_dark:"{colors.red.400}"}},warning:{value:{_light:"{colors.orange.500}",_dark:"{colors.orange.400}"}},success:{value:{_light:"{colors.green.500}",_dark:"{colors.green.400}"}},info:{value:{_light:"{colors.blue.500}",_dark:"{colors.blue.400}"}}},gray:{contrast:{value:{_light:"{colors.white}",_dark:"{colors.black}"}},fg:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}},subtle:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},muted:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},emphasized:{value:{_light:"{colors.gray.300}",_dark:"{colors.gray.700}"}},solid:{value:{_light:"{colors.gray.900}",_dark:"{colors.white}"}},focusRing:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}}},red:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.red.700}",_dark:"{colors.red.300}"}},subtle:{value:{_light:"{colors.red.100}",_dark:"{colors.red.900}"}},muted:{value:{_light:"{colors.red.200}",_dark:"{colors.red.800}"}},emphasized:{value:{_light:"{colors.red.300}",_dark:"{colors.red.700}"}},solid:{value:{_light:"{colors.red.600}",_dark:"{colors.red.600}"}},focusRing:{value:{_light:"{colors.red.600}",_dark:"{colors.red.600}"}}},orange:{contrast:{value:{_light:"white",_dark:"black"}},fg:{value:{_light:"{colors.orange.700}",_dark:"{colors.orange.300}"}},subtle:{value:{_light:"{colors.orange.100}",_dark:"{colors.orange.900}"}},muted:{value:{_light:"{colors.orange.200}",_dark:"{colors.orange.800}"}},emphasized:{value:{_light:"{colors.orange.300}",_dark:"{colors.orange.700}"}},solid:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.500}"}},focusRing:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.500}"}}},green:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.green.700}",_dark:"{colors.green.300}"}},subtle:{value:{_light:"{colors.green.100}",_dark:"{colors.green.900}"}},muted:{value:{_light:"{colors.green.200}",_dark:"{colors.green.800}"}},emphasized:{value:{_light:"{colors.green.300}",_dark:"{colors.green.700}"}},solid:{value:{_light:"{colors.green.600}",_dark:"{colors.green.600}"}},focusRing:{value:{_light:"{colors.green.600}",_dark:"{colors.green.600}"}}},blue:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.blue.700}",_dark:"{colors.blue.300}"}},subtle:{value:{_light:"{colors.blue.100}",_dark:"{colors.blue.900}"}},muted:{value:{_light:"{colors.blue.200}",_dark:"{colors.blue.800}"}},emphasized:{value:{_light:"{colors.blue.300}",_dark:"{colors.blue.700}"}},solid:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.600}"}},focusRing:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.600}"}}},yellow:{contrast:{value:{_light:"black",_dark:"black"}},fg:{value:{_light:"{colors.yellow.800}",_dark:"{colors.yellow.300}"}},subtle:{value:{_light:"{colors.yellow.100}",_dark:"{colors.yellow.900}"}},muted:{value:{_light:"{colors.yellow.200}",_dark:"{colors.yellow.800}"}},emphasized:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.700}"}},solid:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.300}"}},focusRing:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.300}"}}},teal:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.teal.700}",_dark:"{colors.teal.300}"}},subtle:{value:{_light:"{colors.teal.100}",_dark:"{colors.teal.900}"}},muted:{value:{_light:"{colors.teal.200}",_dark:"{colors.teal.800}"}},emphasized:{value:{_light:"{colors.teal.300}",_dark:"{colors.teal.700}"}},solid:{value:{_light:"{colors.teal.600}",_dark:"{colors.teal.600}"}},focusRing:{value:{_light:"{colors.teal.600}",_dark:"{colors.teal.600}"}}},purple:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.purple.700}",_dark:"{colors.purple.300}"}},subtle:{value:{_light:"{colors.purple.100}",_dark:"{colors.purple.900}"}},muted:{value:{_light:"{colors.purple.200}",_dark:"{colors.purple.800}"}},emphasized:{value:{_light:"{colors.purple.300}",_dark:"{colors.purple.700}"}},solid:{value:{_light:"{colors.purple.600}",_dark:"{colors.purple.600}"}},focusRing:{value:{_light:"{colors.purple.600}",_dark:"{colors.purple.600}"}}},pink:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.pink.700}",_dark:"{colors.pink.300}"}},subtle:{value:{_light:"{colors.pink.100}",_dark:"{colors.pink.900}"}},muted:{value:{_light:"{colors.pink.200}",_dark:"{colors.pink.800}"}},emphasized:{value:{_light:"{colors.pink.300}",_dark:"{colors.pink.700}"}},solid:{value:{_light:"{colors.pink.600}",_dark:"{colors.pink.600}"}},focusRing:{value:{_light:"{colors.pink.600}",_dark:"{colors.pink.600}"}}},cyan:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.cyan.700}",_dark:"{colors.cyan.300}"}},subtle:{value:{_light:"{colors.cyan.100}",_dark:"{colors.cyan.900}"}},muted:{value:{_light:"{colors.cyan.200}",_dark:"{colors.cyan.800}"}},emphasized:{value:{_light:"{colors.cyan.300}",_dark:"{colors.cyan.700}"}},solid:{value:{_light:"{colors.cyan.600}",_dark:"{colors.cyan.600}"}},focusRing:{value:{_light:"{colors.cyan.600}",_dark:"{colors.cyan.600}"}}}}),semanticRadii=defineSemanticTokens.radii({l1:{value:"{radii.xs}"},l2:{value:"{radii.sm}"},l3:{value:"{radii.md}"}}),semanticShadows=defineSemanticTokens.shadows({xs:{value:{_light:"0px 1px 2px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/20}",_dark:"0px 1px 1px {black/64}, 0px 0px 1px inset {colors.gray.300/20}"}},sm:{value:{_light:"0px 2px 4px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 2px 4px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},md:{value:{_light:"0px 4px 8px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 4px 8px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},lg:{value:{_light:"0px 8px 16px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 8px 16px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},xl:{value:{_light:"0px 16px 24px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 16px 24px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},"2xl":{value:{_light:"0px 24px 40px {colors.gray.900/16}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 24px 40px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},inner:{value:{_light:"inset 0 2px 4px 0 {black/5}",_dark:"inset 0 2px 4px 0 black"}},inset:{value:{_light:"inset 0 0 0 1px {black/5}",_dark:"inset 0 0 0 1px {colors.gray.300/5}"}}});var createAnatomy=(_e,_=[])=>({parts:(...et)=>{if(isEmpty(_))return createAnatomy(_e,et);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...et)=>createAnatomy(_e,[..._,...et]),rename:et=>createAnatomy(et,_),keys:()=>_,build:()=>[...new Set(_)].reduce((et,tt)=>Object.assign(et,{[tt]:{selector:[`&[data-scope="${toKebabCase(_e)}"][data-part="${toKebabCase(tt)}"]`,`& [data-scope="${toKebabCase(_e)}"][data-part="${toKebabCase(tt)}"]`].join(", "),attrs:{"data-scope":toKebabCase(_e),"data-part":toKebabCase(tt)}}}),{})}),toKebabCase=_e=>_e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),isEmpty=_e=>_e.length===0,addDomEvent=(_e,_,et,tt)=>{const rt=typeof _e=="function"?_e():_e;return rt==null||rt.addEventListener(_,et,tt),()=>{rt==null||rt.removeEventListener(_,et,tt)}},isLeftClick=_e=>_e.button===0,isContextMenuEvent=_e=>_e.button===2||isMac()&&_e.ctrlKey&&_e.button===0,isModifierKey=_e=>_e.ctrlKey||_e.altKey||_e.metaKey;function queueBeforeEvent(_e,_,et){const rt=(ot=>{const at=requestAnimationFrame(ot);return()=>cancelAnimationFrame(at)})(()=>{_e.removeEventListener(_,nt,!0),et()}),nt=()=>{rt(),et()};return _e.addEventListener(_,nt,{once:!0,capture:!0}),rt}function isLinkElement(_e){return(_e==null?void 0:_e.matches("a[href]"))??!1}function clickIfLink(_e){if(!isLinkElement(_e))return;const _=()=>_e.click();isFirefox()?queueBeforeEvent(_e,"keyup",_):queueMicrotask(_)}function fireCustomEvent(_e,_,et){if(!_e)return;const tt=_e.ownerDocument.defaultView||window,rt=new tt.CustomEvent(_,et);return _e.dispatchEvent(rt)}var keyMap={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},rtlKeyMap={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function getEventKey(_e,_={}){const{dir:et="ltr",orientation:tt="horizontal"}=_;let{key:rt}=_e;return rt=keyMap[rt]??rt,et==="rtl"&&tt==="horizontal"&&rt in rtlKeyMap&&(rt=rtlKeyMap[rt]),rt}function pointFromTouch(_e,_="client"){const et=_e.touches[0]||_e.changedTouches[0];return{x:et[`${_}X`],y:et[`${_}Y`]}}function pointFromMouse(_e,_="client"){return{x:_e[`${_}X`],y:_e[`${_}Y`]}}var isTouchEvent=_e=>"touches"in _e&&_e.touches.length>0;function getEventPoint(_e,_="client"){return isTouchEvent(_e)?pointFromTouch(_e,_):pointFromMouse(_e,_)}var PAGE_KEYS=new Set(["PageUp","PageDown"]),ARROW_KEYS=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"]);function getEventStep(_e){return _e.ctrlKey||_e.metaKey?.1:PAGE_KEYS.has(_e.key)||_e.shiftKey&&ARROW_KEYS.has(_e.key)?10:1}function clamp$3(_e){return Math.max(0,Math.min(1,_e))}function getRelativePoint(_e,_){const{left:et,top:tt,width:rt,height:nt}=_.getBoundingClientRect(),ot={x:_e.x-et,y:_e.y-tt},at={x:clamp$3(ot.x/rt),y:clamp$3(ot.y/nt)};function lt(ct={}){const{dir:dt="ltr",orientation:st="horizontal",inverted:it}=ct,ut=typeof it=="object"?it.x:it,ht=typeof it=="object"?it.y:it;return st==="horizontal"?dt==="rtl"||ut?1-at.x:at.x:ht?1-at.y:at.y}return{offset:ot,percent:at,getPercentValue:lt}}function requestPointerLock(_e,_){const et=_e.body,tt="pointerLockElement"in _e||"mozPointerLockElement"in _e,rt=()=>!!_e.pointerLockElement;function nt(){}function ot(lt){rt(),console.error("PointerLock error occurred:",lt),_e.exitPointerLock()}if(!tt)return;try{et.requestPointerLock()}catch{}const at=[addDomEvent(_e,"pointerlockchange",nt,!1),addDomEvent(_e,"pointerlockerror",ot,!1)];return()=>{at.forEach(lt=>lt()),_e.exitPointerLock()}}var pipe=(..._e)=>_=>_e.reduce((et,tt)=>tt(et),_),noop$3=()=>{};function trackPress(_e){const{pointerNode:_,keyboardNode:et=_,onPress:tt,onPressStart:rt,onPressEnd:nt,isValidKey:ot=bt=>bt.key==="Enter"}=_e;if(!_)return noop$3;const at=getWindow$2(_),lt=getDocument(_);let ct=noop$3,dt=noop$3,st=noop$3;const it=bt=>({point:getEventPoint(bt),event:bt});function ut(bt){rt==null||rt(it(bt))}function ht(bt){nt==null||nt(it(bt))}const gt=addDomEvent(_,"pointerdown",bt=>{dt();const xt=addDomEvent(at,"pointerup",St=>{const Et=getEventTarget(St);contains(_,Et)?tt==null||tt(it(St)):nt==null||nt(it(St))},{passive:!tt}),wt=addDomEvent(at,"pointercancel",ht,{passive:!nt});dt=pipe(xt,wt),lt.activeElement===et&&bt.pointerType==="mouse"&&bt.preventDefault(),ut(bt)},{passive:!rt}),mt=addDomEvent(et,"focus",yt);ct=pipe(gt,mt);function yt(){const bt=St=>{if(!ot(St))return;const Et=Tt=>{if(!ot(Tt))return;const Rt=new at.PointerEvent("pointerup"),Ot=it(Rt);tt==null||tt(Ot),nt==null||nt(Ot)};dt(),dt=addDomEvent(et,"keyup",Et);const _t=new at.PointerEvent("pointerdown");ut(_t)},vt=()=>{const St=new at.PointerEvent("pointercancel");ht(St)},xt=addDomEvent(et,"keydown",bt),wt=addDomEvent(et,"blur",vt);st=pipe(xt,wt)}return function(){ct(),dt(),st()}}var first=_e=>_e[0],last=_e=>_e[_e.length-1],has$4=(_e,_)=>_e.indexOf(_)!==-1,add=(_e,..._)=>_e.concat(_),remove$1=(_e,..._)=>_e.filter(et=>!_.includes(et)),addOrRemove=(_e,_)=>has$4(_e,_)?remove$1(_e,_):add(_e,_);function clear(_e){for(;_e.length>0;)_e.pop();return _e}var isArrayLike$1=_e=>(_e==null?void 0:_e.constructor.name)==="Array",isArrayEqual$1=(_e,_)=>{if(_e.length!==_.length)return!1;for(let et=0;et<_e.length;et++)if(!isEqual$1(_e[et],_[et]))return!1;return!0},isEqual$1=(_e,_)=>{if(Object.is(_e,_))return!0;if(_e==null&&_!=null||_e!=null&&_==null)return!1;if(typeof(_e==null?void 0:_e.isEqual)=="function"&&typeof(_==null?void 0:_.isEqual)=="function")return _e.isEqual(_);if(typeof _e=="function"&&typeof _=="function")return _e.toString()===_.toString();if(isArrayLike$1(_e)&&isArrayLike$1(_))return isArrayEqual$1(Array.from(_e),Array.from(_));if(typeof _e!="object"||typeof _!="object")return!1;const et=Object.keys(_??Object.create(null)),tt=et.length;for(let rt=0;rt<tt;rt++)if(!Reflect.has(_e,et[rt]))return!1;for(let rt=0;rt<tt;rt++){const nt=et[rt];if(!isEqual$1(_e[nt],_[nt]))return!1}return!0},runIfFn=(_e,..._)=>(typeof _e=="function"?_e(..._):_e)??void 0,cast=_e=>_e,noop$2=()=>{},callAll=(..._e)=>(..._)=>{_e.forEach(function(et){et==null||et(..._)})},uuid=(()=>{let _e=0;return()=>(_e++,_e.toString(36))})(),isArray$4=_e=>Array.isArray(_e),isObjectLike=_e=>_e!=null&&typeof _e=="object",isObject$2=_e=>isObjectLike(_e)&&!isArray$4(_e),isNumber$1=_e=>typeof _e=="number"&&!Number.isNaN(_e),isString$1=_e=>typeof _e=="string",isFunction$1=_e=>typeof _e=="function",isNull=_e=>_e==null,hasProp=(_e,_)=>Object.prototype.hasOwnProperty.call(_e,_),baseGetTag=_e=>Object.prototype.toString.call(_e),fnToString$1=Function.prototype.toString,objectCtorString=fnToString$1.call(Object),isPlainObject$1=_e=>{if(!isObjectLike(_e)||baseGetTag(_e)!="[object Object]")return!1;const _=Object.getPrototypeOf(_e);if(_===null)return!0;const et=hasProp(_,"constructor")&&_.constructor;return typeof et=="function"&&et instanceof et&&fnToString$1.call(et)==objectCtorString};function compact$2(_e){if(!isPlainObject2(_e)||_e===void 0)return _e;const _=Reflect.ownKeys(_e).filter(tt=>typeof tt=="string"),et={};for(const tt of _){const rt=_e[tt];rt!==void 0&&(et[tt]=compact$2(rt))}return et}var isPlainObject2=_e=>_e&&typeof _e=="object"&&_e.constructor===Object;function warn(..._e){_e.length===1?_e[0]:_e[1],_e.length===2&&_e[0]}function invariant(..._e){_e.length===1?_e[0]:_e[1],_e.length===2&&_e[0]}const TRACK_MEMO_SYMBOL=Symbol(),GET_ORIGINAL_SYMBOL=Symbol(),AFFECTED_PROPERTY="a",IS_TARGET_COPIED_PROPERTY="f",PROXY_PROPERTY="p",PROXY_CACHE_PROPERTY="c",TARGET_CACHE_PROPERTY="t",HAS_KEY_PROPERTY="h",ALL_OWN_KEYS_PROPERTY="w",HAS_OWN_KEY_PROPERTY="o",KEYS_PROPERTY="k";let newProxy=(_e,_)=>new Proxy(_e,_);const getProto$2=Object.getPrototypeOf,objectsToTrack=new WeakMap,isObjectToTrack=_e=>_e&&(objectsToTrack.has(_e)?objectsToTrack.get(_e):getProto$2(_e)===Object.prototype||getProto$2(_e)===Array.prototype),isObject$1=_e=>typeof _e=="object"&&_e!==null,needsToCopyTargetObject=_e=>Object.values(Object.getOwnPropertyDescriptors(_e)).some(_=>!_.configurable&&!_.writable),copyTargetObject=_e=>{if(Array.isArray(_e))return Array.from(_e);const _=Object.getOwnPropertyDescriptors(_e);return Object.values(_).forEach(et=>{et.configurable=!0}),Object.create(getProto$2(_e),_)},createProxyHandler=(_e,_)=>{const et={[IS_TARGET_COPIED_PROPERTY]:_};let tt=!1;const rt=(at,lt)=>{if(!tt){let ct=et[AFFECTED_PROPERTY].get(_e);if(ct||(ct={},et[AFFECTED_PROPERTY].set(_e,ct)),at===ALL_OWN_KEYS_PROPERTY)ct[ALL_OWN_KEYS_PROPERTY]=!0;else{let dt=ct[at];dt||(dt=new Set,ct[at]=dt),dt.add(lt)}}},nt=()=>{tt=!0,et[AFFECTED_PROPERTY].delete(_e)},ot={get(at,lt){return lt===GET_ORIGINAL_SYMBOL?_e:(rt(KEYS_PROPERTY,lt),createProxy$1(Reflect.get(at,lt),et[AFFECTED_PROPERTY],et[PROXY_CACHE_PROPERTY],et[TARGET_CACHE_PROPERTY]))},has(at,lt){return lt===TRACK_MEMO_SYMBOL?(nt(),!0):(rt(HAS_KEY_PROPERTY,lt),Reflect.has(at,lt))},getOwnPropertyDescriptor(at,lt){return rt(HAS_OWN_KEY_PROPERTY,lt),Reflect.getOwnPropertyDescriptor(at,lt)},ownKeys(at){return rt(ALL_OWN_KEYS_PROPERTY),Reflect.ownKeys(at)}};return _&&(ot.set=ot.deleteProperty=()=>!1),[ot,et]},getOriginalObject=_e=>_e[GET_ORIGINAL_SYMBOL]||_e,createProxy$1=(_e,_,et,tt)=>{if(!isObjectToTrack(_e))return _e;let rt=tt&&tt.get(_e);if(!rt){const lt=getOriginalObject(_e);needsToCopyTargetObject(lt)?rt=[lt,copyTargetObject(lt)]:rt=[lt],tt==null||tt.set(_e,rt)}const[nt,ot]=rt;let at=et&&et.get(nt);return(!at||at[1][IS_TARGET_COPIED_PROPERTY]!==!!ot)&&(at=createProxyHandler(nt,!!ot),at[1][PROXY_PROPERTY]=newProxy(ot||nt,at[0]),et&&et.set(nt,at)),at[1][AFFECTED_PROPERTY]=_,at[1][PROXY_CACHE_PROPERTY]=et,at[1][TARGET_CACHE_PROPERTY]=tt,at[1][PROXY_PROPERTY]},isAllOwnKeysChanged=(_e,_)=>{const et=Reflect.ownKeys(_e),tt=Reflect.ownKeys(_);return et.length!==tt.length||et.some((rt,nt)=>rt!==tt[nt])},isChanged=(_e,_,et,tt,rt=Object.is)=>{if(rt(_e,_))return!1;if(!isObject$1(_e)||!isObject$1(_))return!0;const nt=et.get(getOriginalObject(_e));if(!nt)return!0;if(tt){if(tt.get(_e)===_)return!1;tt.set(_e,_)}let ot=null;for(const at of nt[HAS_KEY_PROPERTY]||[])if(ot=Reflect.has(_e,at)!==Reflect.has(_,at),ot)return ot;if(nt[ALL_OWN_KEYS_PROPERTY]===!0){if(ot=isAllOwnKeysChanged(_e,_),ot)return ot}else for(const at of nt[HAS_OWN_KEY_PROPERTY]||[]){const lt=!!Reflect.getOwnPropertyDescriptor(_e,at),ct=!!Reflect.getOwnPropertyDescriptor(_,at);if(ot=lt!==ct,ot)return ot}for(const at of nt[KEYS_PROPERTY]||[])if(ot=isChanged(_e[at],_[at],et,tt,rt),ot)return ot;if(ot===null)throw new Error("invalid used");return ot},getUntracked=_e=>isObjectToTrack(_e)&&_e[GET_ORIGINAL_SYMBOL]||null,markToTrack=(_e,_=!0)=>{objectsToTrack.set(_e,_)};function glob(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function globalRef(_e,_){const et=glob();return et?(et[_e]||(et[_e]=_()),et[_e]):_()}var refSet=globalRef("__zag__refSet",()=>new WeakSet),isReactElement=_e=>typeof _e=="object"&&_e!==null&&"$$typeof"in _e&&"props"in _e,isVueElement=_e=>typeof _e=="object"&&_e!==null&&"__v_isVNode"in _e,isDOMElement=_e=>typeof _e=="object"&&_e!==null&&"nodeType"in _e&&typeof _e.nodeName=="string",isElement$2=_e=>isReactElement(_e)||isVueElement(_e)||isDOMElement(_e),isObject=_e=>_e!==null&&typeof _e=="object",canProxy=_e=>isObject(_e)&&!refSet.has(_e)&&(Array.isArray(_e)||!(Symbol.iterator in _e))&&!isElement$2(_e)&&!(_e instanceof WeakMap)&&!(_e instanceof WeakSet)&&!(_e instanceof Error)&&!(_e instanceof Number)&&!(_e instanceof Date)&&!(_e instanceof String)&&!(_e instanceof RegExp)&&!(_e instanceof ArrayBuffer)&&!(_e instanceof Promise);function set$4(_e,_,et){typeof et.value=="object"&&!canProxy(et.value)&&(et.value=clone(et.value)),!et.enumerable||et.get||et.set||!et.configurable||!et.writable||_==="__proto__"?Object.defineProperty(_e,_,et):_e[_]=et.value}function clone(_e){if(typeof _e!="object")return _e;var _=0,et,tt,rt,nt=Object.prototype.toString.call(_e);if(nt==="[object Object]"?rt=Object.create(Object.getPrototypeOf(_e)||null):nt==="[object Array]"?rt=Array(_e.length):nt==="[object Set]"?(rt=new Set,_e.forEach(function(ot){rt.add(clone(ot))})):nt==="[object Map]"?(rt=new Map,_e.forEach(function(ot,at){rt.set(clone(at),clone(ot))})):nt==="[object Date]"?rt=new Date(+_e):nt==="[object RegExp]"?rt=new RegExp(_e.source,_e.flags):nt==="[object DataView]"?rt=new _e.constructor(clone(_e.buffer)):nt==="[object ArrayBuffer]"?rt=_e.slice(0):nt==="[object Blob]"?rt=_e.slice():nt.slice(-6)==="Array]"&&(rt=new _e.constructor(_e)),rt){for(tt=Object.getOwnPropertySymbols(_e);_<tt.length;_++)set$4(rt,tt[_],Object.getOwnPropertyDescriptor(_e,tt[_]));for(_=0,tt=Object.getOwnPropertyNames(_e);_<tt.length;_++)Object.hasOwnProperty.call(rt,et=tt[_])&&rt[et]===_e[et]||set$4(rt,et,Object.getOwnPropertyDescriptor(_e,et))}return rt||_e}var proxyStateMap=globalRef("__zag__proxyStateMap",()=>new WeakMap),buildProxyFunction=(_e=Object.is,_=(at,lt)=>new Proxy(at,lt),et=new WeakMap,tt=(at,lt)=>{const ct=et.get(at);if((ct==null?void 0:ct[0])===lt)return ct[1];const dt=Array.isArray(at)?[]:Object.create(Object.getPrototypeOf(at));return markToTrack(dt,!0),et.set(at,[lt,dt]),Reflect.ownKeys(at).forEach(st=>{const it=Reflect.get(at,st);refSet.has(it)?(markToTrack(it,!1),dt[st]=it):proxyStateMap.has(it)?dt[st]=snapshot(it):dt[st]=it}),Object.freeze(dt)},rt=new WeakMap,nt=[1,1],ot=at=>{if(!isObject(at))throw new Error("object required");const lt=rt.get(at);if(lt)return lt;let ct=nt[0];const dt=new Set,st=(St,Et=++nt[0])=>{ct!==Et&&(ct=Et,dt.forEach(_t=>_t(St,Et)))};let it=nt[1];const ut=(St=++nt[1])=>(it!==St&&!dt.size&&(it=St,ft.forEach(([Et])=>{const _t=Et[1](St);_t>ct&&(ct=_t)})),ct),ht=St=>(Et,_t)=>{const Tt=[...Et];Tt[1]=[St,...Tt[1]],st(Tt,_t)},ft=new Map,gt=(St,Et)=>{if(dt.size){const _t=Et[3](ht(St));ft.set(St,[Et,_t])}else ft.set(St,[Et])},mt=St=>{var _t;const Et=ft.get(St);Et&&(ft.delete(St),(_t=Et[1])==null||_t.call(Et))},yt=St=>(dt.add(St),dt.size===1&&ft.forEach(([_t,Tt],Rt)=>{const Ot=_t[3](ht(Rt));ft.set(Rt,[_t,Ot])}),()=>{dt.delete(St),dt.size===0&&ft.forEach(([_t,Tt],Rt)=>{Tt&&(Tt(),ft.set(Rt,[_t]))})}),bt=Array.isArray(at)?[]:Object.create(Object.getPrototypeOf(at)),xt=_(bt,{deleteProperty(St,Et){const _t=Reflect.get(St,Et);mt(Et);const Tt=Reflect.deleteProperty(St,Et);return Tt&&st(["delete",[Et],_t]),Tt},set(St,Et,_t,Tt){var Ct;const Rt=Reflect.has(St,Et),Ot=Reflect.get(St,Et,Tt);if(Rt&&(_e(Ot,_t)||rt.has(_t)&&_e(Ot,rt.get(_t))))return!0;mt(Et),isObject(_t)&&(_t=getUntracked(_t)||_t);let At=_t;if(!((Ct=Object.getOwnPropertyDescriptor(St,Et))!=null&&Ct.set)){!proxyStateMap.has(_t)&&canProxy(_t)&&(At=proxy(_t));const $t=!refSet.has(At)&&proxyStateMap.get(At);$t&&gt(Et,$t)}return Reflect.set(St,Et,At,Tt),st(["set",[Et],_t,Ot]),!0}});rt.set(at,xt);const wt=[bt,ut,tt,yt];return proxyStateMap.set(xt,wt),Reflect.ownKeys(at).forEach(St=>{const Et=Object.getOwnPropertyDescriptor(at,St);Et.get||Et.set?Object.defineProperty(bt,St,Et):xt[St]=at[St]}),xt})=>[ot,proxyStateMap,refSet,_e,_,canProxy,et,tt,rt,nt],[proxyFunction]=buildProxyFunction();function proxy(_e={}){return proxyFunction(_e)}function subscribe$1(_e,_,et){const tt=proxyStateMap.get(_e);let rt;const nt=[],ot=tt[3];let at=!1;const ct=ot(dt=>{if(nt.push(dt),et){_(nt.splice(0));return}rt||(rt=Promise.resolve().then(()=>{rt=void 0,at&&_(nt.splice(0))}))});return at=!0,()=>{at=!1,ct()}}function snapshot(_e){const _=proxyStateMap.get(_e),[et,tt,rt]=_;return rt(et,tt())}function ref$1(_e){return refSet.add(_e),_e}function proxyWithComputed(_e,_){Object.keys(_).forEach(rt=>{if(Object.getOwnPropertyDescriptor(_e,rt))throw new Error("object property already defined");const nt=_[rt],{get:ot,set:at}=typeof nt=="function"?{get:nt}:nt,lt={};lt.get=()=>ot(snapshot(tt)),at&&(lt.set=ct=>at(tt,ct)),Object.defineProperty(_e,rt,lt)});const tt=proxy(_e);return tt}var __defProp$2=Object.defineProperty,__defNormalProp$2=(_e,_,et)=>_ in _e?__defProp$2(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:et}):_e[_]=et,__publicField$2=(_e,_,et)=>__defNormalProp$2(_e,typeof _!="symbol"?_+"":_,et);function deepMerge(_e,..._){for(const et of _){const tt=compact$2(et);for(const rt in tt)isPlainObject$1(et[rt])?(_e[rt]||(_e[rt]={}),deepMerge(_e[rt],et[rt])):_e[rt]=et[rt]}return _e}function toEvent(_e){return isString$1(_e)?{type:_e}:_e}function toArray(_e){return _e?isArray$4(_e)?_e.slice():[_e]:[]}function isGuardHelper(_e){return isObject$2(_e)&&_e.predicate!=null}var Truthy=()=>!0;function exec(_e,_,et,tt){return rt=>{var nt;return isString$1(rt)?!!((nt=_e[rt])!=null&&nt.call(_e,_,et,tt)):isFunction$1(rt)?rt(_,et,tt):rt.predicate(_e)(_,et,tt)}}function or$2(..._e){return{predicate:_=>(et,tt,rt)=>_e.map(exec(_,et,tt,rt)).some(Boolean)}}function and$4(..._e){return{predicate:_=>(et,tt,rt)=>_e.map(exec(_,et,tt,rt)).every(Boolean)}}function not$6(_e){return{predicate:_=>(et,tt,rt)=>!exec(_,et,tt,rt)(_e)}}function stateIn(..._e){return(_,et,tt)=>tt.state.matches(..._e)}var guards={or:or$2,and:and$4,not:not$6,stateIn};function choose(_e){return{predicate:_=>(et,tt,rt)=>{var nt;return(nt=_e.find(ot=>{const at=ot.guard??Truthy;return exec(_,et,tt,rt)(at)}))==null?void 0:nt.actions}}}function determineGuardFn(_e,_){return _e=_e??Truthy,(et,tt,rt)=>{if(isString$1(_e)){const nt=_[_e];return isFunction$1(nt)?nt(et,tt,rt):nt}return isGuardHelper(_e)?_e.predicate(_)(et,tt,rt):_e==null?void 0:_e(et,tt,rt)}}function determineActionsFn(_e,_){return(et,tt,rt)=>isGuardHelper(_e)?_e.predicate(_)(et,tt,rt):_e}function createProxy(_e){var nt,ot;const _=_e.computed??cast({}),et=_e.context??cast({}),tt=_e.initial?(ot=(nt=_e.states)==null?void 0:nt[_e.initial])==null?void 0:ot.tags:[],rt=proxy({value:_e.initial??"",previousValue:"",event:cast({}),previousEvent:cast({}),context:proxyWithComputed(et,_),done:!1,tags:tt??[],hasTag(at){return this.tags.includes(at)},matches(...at){return at.includes(this.value)},can(at){return cast(this).nextEvents.includes(at)},get nextEvents(){var ct,dt;const at=((dt=(ct=_e.states)==null?void 0:ct[this.value])==null?void 0:dt.on)??{},lt=(_e==null?void 0:_e.on)??{};return Object.keys({...at,...lt})},get changed(){return this.event.value==="machine.init"||!this.previousValue?!1:this.value!==this.previousValue}});return cast(rt)}function determineDelayFn(_e,_){return(et,tt)=>{if(isNumber$1(_e))return _e;if(isFunction$1(_e))return _e(et,tt);if(isString$1(_e)){const rt=Number.parseFloat(_e);if(!Number.isNaN(rt))return rt;if(_){const nt=_==null?void 0:_[_e];return invariant(nt==null,`[@zag-js/core > determine-delay] Cannot determine delay for \`${_e}\`. It doesn't exist in \`options.delays\``),isFunction$1(nt)?nt(et,tt):nt}}}}function toTarget(_e){return isString$1(_e)?{target:_e}:_e}function determineTransitionFn(_e,_){return(et,tt,rt)=>toArray(_e).map(toTarget).find(nt=>determineGuardFn(nt.guard,_)(et,tt,rt)??nt.target??nt.actions)}var Machine=class{constructor(_e,_){var et,tt,rt,nt,ot;__publicField$2(this,"status","Not Started"),__publicField$2(this,"state"),__publicField$2(this,"initialState"),__publicField$2(this,"initialContext"),__publicField$2(this,"id"),__publicField$2(this,"type","machine"),__publicField$2(this,"activityEvents",new Map),__publicField$2(this,"delayedEvents",new Map),__publicField$2(this,"stateListeners",new Set),__publicField$2(this,"doneListeners",new Set),__publicField$2(this,"contextWatchers",new Set),__publicField$2(this,"removeStateListener",noop$2),__publicField$2(this,"parent"),__publicField$2(this,"children",new Map),__publicField$2(this,"guardMap"),__publicField$2(this,"actionMap"),__publicField$2(this,"delayMap"),__publicField$2(this,"activityMap"),__publicField$2(this,"sync"),__publicField$2(this,"options"),__publicField$2(this,"config"),__publicField$2(this,"_created",()=>{if(!this.config.created)return;const at=toEvent("machine.created");this.executeActions(this.config.created,at)}),__publicField$2(this,"start",at=>{if(this.state.value="",this.state.tags=[],this.status==="Running")return this;this.status="Running",this.removeStateListener=subscribe$1(this.state,()=>{this.stateListeners.forEach(ut=>{ut(this.stateSnapshot)})},this.sync),this.setupContextWatchers(),this.executeActivities(toEvent("machine.start"),toArray(this.config.activities),"machine.start"),this.executeActions(this.config.entry,toEvent("machine.start"));const lt=toEvent("machine.init"),ct=isObject$2(at)?at.value:at,dt=isObject$2(at)?at.context:void 0;dt&&this.setContext(dt);const st={target:ct??this.config.initial},it=this.getNextStateInfo(st,lt);return this.initialState=it,this.performStateChangeEffects(this.state.value,it,lt),this}),__publicField$2(this,"setupContextWatchers",()=>{const{watch:at}=this.config;if(!at)return;let lt=snapshot(this.state.context);const ct=subscribe$1(this.state.context,()=>{var st;const dt=snapshot(this.state.context);for(const[it,ut]of Object.entries(at))(((st=this.options.compareFns)==null?void 0:st[it])??Object.is)(lt[it],dt[it])||this.executeActions(ut,this.state.event);lt=dt});this.contextWatchers.add(ct)}),__publicField$2(this,"stop",()=>{if(this.status!=="Stopped")return this.performExitEffects(this.state.value,toEvent("machine.stop")),this.executeActions(this.config.exit,toEvent("machine.stop")),this.setState(""),this.setEvent("machine.stop"),this.stopStateListeners(),this.stopChildren(),this.stopActivities(),this.stopDelayedEvents(),this.stopContextWatchers(),this.status="Stopped",this}),__publicField$2(this,"stopStateListeners",()=>{this.removeStateListener(),this.stateListeners.clear()}),__publicField$2(this,"stopContextWatchers",()=>{this.contextWatchers.forEach(at=>at()),this.contextWatchers.clear()}),__publicField$2(this,"stopDelayedEvents",()=>{this.delayedEvents.forEach(at=>{at.forEach(lt=>lt())}),this.delayedEvents.clear()}),__publicField$2(this,"stopActivities",at=>{var lt,ct;at?((lt=this.activityEvents.get(at))==null||lt.forEach(dt=>dt()),(ct=this.activityEvents.get(at))==null||ct.clear(),this.activityEvents.delete(at)):(this.activityEvents.forEach(dt=>{dt.forEach(st=>st()),dt.clear()}),this.activityEvents.clear())}),__publicField$2(this,"sendChild",(at,lt)=>{const ct=toEvent(at),dt=runIfFn(lt,this.contextSnapshot),st=this.children.get(dt);st||invariant(`[@zag-js/core] Cannot send '${ct.type}' event to unknown child`),st.send(ct)}),__publicField$2(this,"stopChild",at=>{this.children.has(at)||invariant(`[@zag-js/core > stop-child] Cannot stop unknown child ${at}`),this.children.get(at).stop(),this.children.delete(at)}),__publicField$2(this,"removeChild",at=>{this.children.delete(at)}),__publicField$2(this,"stopChildren",()=>{this.children.forEach(at=>at.stop()),this.children.clear()}),__publicField$2(this,"setParent",at=>{this.parent=at}),__publicField$2(this,"spawn",(at,lt)=>{const ct=runIfFn(at);return lt&&(ct.id=lt),ct.type="machine.actor",ct.setParent(this),this.children.set(ct.id,cast(ct)),ct.onDone(()=>{this.removeChild(ct.id)}).start(),cast(ref$1(ct))}),__publicField$2(this,"stopActivity",at=>{var ct;if(!this.state.value)return;const lt=this.activityEvents.get(this.state.value);(ct=lt==null?void 0:lt.get(at))==null||ct(),lt==null||lt.delete(at)}),__publicField$2(this,"addActivityCleanup",(at,lt,ct)=>{var dt;at&&(this.activityEvents.has(at)?(dt=this.activityEvents.get(at))==null||dt.set(lt,ct):this.activityEvents.set(at,new Map([[lt,ct]])))}),__publicField$2(this,"setState",at=>{this.state.previousValue=this.state.value,this.state.value=at;const lt=this.getStateNode(at);at==null?clear(this.state.tags):this.state.tags=toArray(lt==null?void 0:lt.tags)}),__publicField$2(this,"setContext",at=>{at&&deepMerge(this.state.context,compact$2(at))}),__publicField$2(this,"setOptions",at=>{const lt=compact$2(at);this.actionMap={...this.actionMap,...lt.actions},this.delayMap={...this.delayMap,...lt.delays},this.activityMap={...this.activityMap,...lt.activities},this.guardMap={...this.guardMap,...lt.guards}}),__publicField$2(this,"getStateNode",at=>{var lt;if(at)return(lt=this.config.states)==null?void 0:lt[at]}),__publicField$2(this,"getNextStateInfo",(at,lt)=>{const ct=this.determineTransition(at,lt),dt=!(ct!=null&&ct.target),st=(ct==null?void 0:ct.target)??this.state.value,it=this.state.value!==st,ut=this.getStateNode(st),ft={reenter:!dt&&!it&&!(ct!=null&&ct.internal),transition:ct,stateNode:ut,target:st,changed:it};return this.log("NextState:",`[${lt.type}]`,this.state.value,"---->",ft.target),ft}),__publicField$2(this,"getAfterActions",(at,lt)=>{let ct;const dt=this.state.value;return{entry:()=>{ct=globalThis.setTimeout(()=>{const st=this.getNextStateInfo(at,this.state.event);this.performStateChangeEffects(dt,st,this.state.event)},lt)},exit:()=>{globalThis.clearTimeout(ct)}}}),__publicField$2(this,"getDelayedEventActions",at=>{const lt=this.getStateNode(at),ct=this.state.event;if(!lt||!lt.after)return;const dt=[],st=[];if(isArray$4(lt.after)){const it=this.determineTransition(lt.after,ct);if(!it)return;if(!hasProp(it,"delay"))throw new Error(`[@zag-js/core > after] Delay is required for after transition: ${JSON.stringify(it)}`);const ht=determineDelayFn(it.delay,this.delayMap)(this.contextSnapshot,ct),ft=this.getAfterActions(it,ht);return dt.push(ft.entry),st.push(ft.exit),{entries:dt,exits:st}}if(isObject$2(lt.after))for(const it in lt.after){const ut=lt.after[it],ft=determineDelayFn(it,this.delayMap)(this.contextSnapshot,ct),gt=this.getAfterActions(ut,ft);dt.push(gt.entry),st.push(gt.exit)}return{entries:dt,exits:st}}),__publicField$2(this,"executeActions",(at,lt)=>{var dt;const ct=determineActionsFn(at,this.guardMap)(this.contextSnapshot,lt,this.guardMeta);for(const st of toArray(ct)){const it=isString$1(st)?(dt=this.actionMap)==null?void 0:dt[st]:st;warn(isString$1(st)&&!it,`[@zag-js/core > execute-actions] No implementation found for action: \`${st}\``),it==null||it(this.state.context,lt,this.meta)}}),__publicField$2(this,"executeActivities",(at,lt,ct)=>{var dt;for(const st of lt){const it=isString$1(st)?(dt=this.activityMap)==null?void 0:dt[st]:st;if(!it){warn(`[@zag-js/core > execute-activity] No implementation found for activity: \`${st}\``);continue}const ut=it(this.state.context,at,this.meta);if(ut){const ht=isString$1(st)?st:st.name||uuid();this.addActivityCleanup(ct??this.state.value,ht,ut)}}}),__publicField$2(this,"createEveryActivities",(at,lt)=>{if(at)if(isArray$4(at)){const ct=toArray(at).find(ut=>{const ht=ut.delay,gt=determineDelayFn(ht,this.delayMap)(this.contextSnapshot,this.state.event);return determineGuardFn(ut.guard,this.guardMap)(this.contextSnapshot,this.state.event,this.guardMeta)??gt!=null});if(!ct)return;const st=determineDelayFn(ct.delay,this.delayMap)(this.contextSnapshot,this.state.event);lt(()=>{const ut=globalThis.setInterval(()=>{this.executeActions(ct.actions,this.state.event)},st);return()=>{globalThis.clearInterval(ut)}})}else for(const ct in at){const dt=at==null?void 0:at[ct],it=determineDelayFn(ct,this.delayMap)(this.contextSnapshot,this.state.event);lt(()=>{const ht=globalThis.setInterval(()=>{this.executeActions(dt,this.state.event)},it);return()=>{globalThis.clearInterval(ht)}})}}),__publicField$2(this,"setEvent",at=>{this.state.previousEvent=this.state.event,this.state.event=ref$1(toEvent(at))}),__publicField$2(this,"performExitEffects",(at,lt)=>{const ct=this.state.value;if(ct==="")return;const dt=at?this.getStateNode(at):void 0;this.stopActivities(ct);const st=determineActionsFn(dt==null?void 0:dt.exit,this.guardMap)(this.contextSnapshot,lt,this.guardMeta),it=toArray(st),ut=this.delayedEvents.get(ct);ut&&it.push(...ut),this.executeActions(it,lt),this.delayedEvents.delete(ct)}),__publicField$2(this,"performEntryEffects",(at,lt)=>{const ct=this.getStateNode(at),dt=toArray(ct==null?void 0:ct.activities);this.createEveryActivities(ct==null?void 0:ct.every,ht=>{dt.unshift(ht)}),dt.length>0&&this.executeActivities(lt,dt);const st=determineActionsFn(ct==null?void 0:ct.entry,this.guardMap)(this.contextSnapshot,lt,this.guardMeta),it=toArray(st),ut=this.getDelayedEventActions(at);ct!=null&&ct.after&&ut&&(this.delayedEvents.set(at,ut==null?void 0:ut.exits),it.push(...ut.entries)),this.executeActions(it,lt),(ct==null?void 0:ct.type)==="final"&&(this.state.done=!0,this.doneListeners.forEach(ht=>{ht(this.stateSnapshot)}),this.stop())}),__publicField$2(this,"performTransitionEffects",(at,lt)=>{const ct=this.determineTransition(at,lt);this.executeActions(ct==null?void 0:ct.actions,lt)}),__publicField$2(this,"performStateChangeEffects",(at,lt,ct)=>{this.setEvent(ct);const dt=lt.changed||lt.reenter;dt&&this.performExitEffects(at,ct),this.performTransitionEffects(lt.transition,ct),this.setState(lt.target),dt&&this.performEntryEffects(lt.target,ct)}),__publicField$2(this,"determineTransition",(at,lt)=>{const ct=determineTransitionFn(at,this.guardMap);return ct==null?void 0:ct(this.contextSnapshot,lt,this.guardMeta)}),__publicField$2(this,"sendParent",at=>{var ct;this.parent||invariant("[@zag-js/core > send-parent] Cannot send event to an unknown parent");const lt=toEvent(at);(ct=this.parent)==null||ct.send(lt)}),__publicField$2(this,"log",(...at)=>{}),__publicField$2(this,"send",at=>{const lt=toEvent(at);this.transition(this.state.value,lt)}),__publicField$2(this,"transition",(at,lt)=>{var ut,ht;const ct=isString$1(at)?this.getStateNode(at):at==null?void 0:at.stateNode,dt=toEvent(lt);if(!ct&&!this.config.on){const ft=this.status==="Stopped"?"[@zag-js/core > transition] Cannot transition a stopped machine":`[@zag-js/core > transition] State does not have a definition for \`state\`: ${at}, \`event\`: ${dt.type}`;warn(ft);return}const st=((ut=ct==null?void 0:ct.on)==null?void 0:ut[dt.type])??((ht=this.config.on)==null?void 0:ht[dt.type]),it=this.getNextStateInfo(st,dt);return this.performStateChangeEffects(this.state.value,it,dt),it.stateNode}),__publicField$2(this,"subscribe",at=>(this.stateListeners.add(at),this.status==="Running"&&at(this.stateSnapshot),()=>{this.stateListeners.delete(at)})),__publicField$2(this,"onDone",at=>(this.doneListeners.add(at),this)),__publicField$2(this,"onTransition",at=>(this.stateListeners.add(at),this.status==="Running"&&at(this.stateSnapshot),this)),this.config=clone(_e),this.options=clone(_??{}),this.id=this.config.id??`machine-${uuid()}`,this.guardMap=((et=this.options)==null?void 0:et.guards)??{},this.actionMap=((tt=this.options)==null?void 0:tt.actions)??{},this.delayMap=((rt=this.options)==null?void 0:rt.delays)??{},this.activityMap=((nt=this.options)==null?void 0:nt.activities)??{},this.sync=((ot=this.options)==null?void 0:ot.sync)??!1,this.state=createProxy(this.config),this.initialContext=snapshot(this.state.context)}get stateSnapshot(){return cast(snapshot(this.state))}getState(){return this.stateSnapshot}get contextSnapshot(){return this.stateSnapshot.context}get self(){const _e=this;return{id:this.id,send:this.send.bind(this),sendParent:this.sendParent.bind(this),sendChild:this.sendChild.bind(this),stop:this.stop.bind(this),stopChild:this.stopChild.bind(this),spawn:this.spawn.bind(this),stopActivity:this.stopActivity.bind(this),get state(){return _e.stateSnapshot},get initialContext(){return _e.initialContext},get initialState(){var _;return((_=_e.initialState)==null?void 0:_.target)??""}}}get meta(){var _e;return{state:this.stateSnapshot,guards:this.guardMap,send:this.send.bind(this),self:this.self,initialContext:this.initialContext,initialState:((_e=this.initialState)==null?void 0:_e.target)??"",getState:()=>this.stateSnapshot,getAction:_=>this.actionMap[_],getGuard:_=>this.guardMap[_]}}get guardMeta(){return{state:this.stateSnapshot}}get[Symbol.toStringTag](){return"Machine"}getHydrationState(){const _e=this.getState();return{value:_e.value,tags:_e.tags}}},createMachine=(_e,_)=>new Machine(_e,_),isMachine=_e=>_e instanceof Machine||(_e==null?void 0:_e.type)==="machine",clsx=(..._e)=>_e.map(_=>{var et;return(et=_==null?void 0:_.trim)==null?void 0:et.call(_)}).filter(Boolean).join(" "),CSS_REGEX=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,serialize=_e=>{const _={};let et;for(;et=CSS_REGEX.exec(_e);)_[et[1]]=et[2];return _},css=(_e,_)=>{if(isString$1(_e)){if(isString$1(_))return`${_e};${_}`;_e=serialize(_e)}else isString$1(_)&&(_=serialize(_));return Object.assign({},_e??{},_??{})};function mergeProps(..._e){let _={};for(let et of _e){for(let tt in _){if(tt.startsWith("on")&&typeof _[tt]=="function"&&typeof et[tt]=="function"){_[tt]=callAll(et[tt],_[tt]);continue}if(tt==="className"||tt==="class"){_[tt]=clsx(_[tt],et[tt]);continue}if(tt==="style"){_[tt]=css(_[tt],et[tt]);continue}_[tt]=et[tt]!==void 0?et[tt]:_[tt]}for(let tt in et)_[tt]===void 0&&(_[tt]=et[tt])}return _}function createNormalizer(_e){return new Proxy({},{get(){return _e}})}var createProps=()=>_e=>Array.from(new Set(_e)),anatomy$l=createAnatomy("accordion").parts("root","item","itemTrigger","itemContent","itemIndicator");anatomy$l.build();var dom$k=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`accordion:${_e.id}`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`accordion:${_e.id}:item:${_}`},getItemContentId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemContent)==null?void 0:tt.call(et,_))??`accordion:${_e.id}:content:${_}`},getItemTriggerId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemTrigger)==null?void 0:tt.call(et,_))??`accordion:${_e.id}:trigger:${_}`},getRootEl:_e=>dom$k.getById(_e,dom$k.getRootId(_e)),getTriggerEls:_e=>{const et=`[aria-controls][data-ownedby='${CSS.escape(dom$k.getRootId(_e))}']:not([disabled])`;return queryAll(dom$k.getRootEl(_e),et)},getFirstTriggerEl:_e=>first(dom$k.getTriggerEls(_e)),getLastTriggerEl:_e=>last(dom$k.getTriggerEls(_e)),getNextTriggerEl:(_e,_)=>nextById(dom$k.getTriggerEls(_e),dom$k.getItemTriggerId(_e,_)),getPrevTriggerEl:(_e,_)=>prevById(dom$k.getTriggerEls(_e),dom$k.getItemTriggerId(_e,_))});createProps()(["collapsible","dir","disabled","getRootNode","id","ids","multiple","onFocusChange","onValueChange","orientation","value"]);createProps()(["value","disabled"]);var normalizeProps=createNormalizer(_e=>_e),isArrayLike=_e=>(_e==null?void 0:_e.constructor.name)==="Array",isArrayEqual=(_e,_)=>{if(_e.length!==_.length)return!1;for(let et=0;et<_e.length;et++)if(!isEqual(_e[et],_[et]))return!1;return!0},isEqual=(_e,_)=>{if(Object.is(_e,_))return!0;if(_e==null&&_!=null||_e!=null&&_==null)return!1;if(typeof(_e==null?void 0:_e.isEqual)=="function"&&typeof(_==null?void 0:_.isEqual)=="function")return _e.isEqual(_);if(typeof _e=="function"&&typeof _=="function")return _e.toString()===_.toString();if(isArrayLike(_e)&&isArrayLike(_))return isArrayEqual(Array.from(_e),Array.from(_));if(typeof _e!="object"||typeof _!="object")return!1;const et=Object.keys(_??Object.create(null)),tt=et.length;for(let rt=0;rt<tt;rt++)if(!Reflect.has(_e,et[rt]))return!1;for(let rt=0;rt<tt;rt++){const nt=et[rt];if(!isEqual(_e[nt],_[nt]))return!1}return!0},fnToString=Function.prototype.toString;fnToString.call(Object);function compact$1(_e){if(!isPlainObject(_e)||_e===void 0)return _e;const _=Reflect.ownKeys(_e).filter(tt=>typeof tt=="string"),et={};for(const tt of _){const rt=_e[tt];rt!==void 0&&(et[tt]=compact$1(rt))}return et}var isPlainObject=_e=>_e&&typeof _e=="object"&&_e.constructor===Object;function useUpdateEffect(_e,_){const et=reactExports.useRef(!1),tt=reactExports.useRef(!1);reactExports.useEffect(()=>{if(et.current&&tt.current)return _e();tt.current=!0},_),reactExports.useEffect(()=>(et.current=!0,()=>{et.current=!1}),[])}var targetCache=globalRef("__zag__targetCache",()=>new WeakMap);function useSnapshot(_e,_){const{actions:et,context:tt,sync:rt}=_??{},nt=reactExports.useRef(void 0),ot=reactExports.useRef(void 0),at=reactExports.useSyncExternalStore(reactExports.useCallback(st=>subscribe$1(_e.state,st,rt),[rt]),()=>{const st=snapshot(_e.state);try{if(nt.current&&ot.current&&!isChanged(nt.current,st,ot.current,new WeakMap))return nt.current}catch{}return st},()=>snapshot(_e.state));_e.setOptions({actions:et});const lt=reactExports.useMemo(()=>compact$1(tt??{}),[tt]);useUpdateEffect(()=>{const st=Object.entries(lt),it=_e.contextSnapshot??{};st.map(([ft,gt])=>({key:ft,curr:gt,prev:it[ft],equal:isEqual(it[ft],gt)})).every(({equal:ft})=>ft)||_e.setContext(lt)},[lt]);const ct=new WeakMap;reactExports.useEffect(()=>{nt.current=at,ot.current=ct});const dt=reactExports.useMemo(()=>new WeakMap,[]);return createProxy$1(at,ct,dt,targetCache)}function useActor(_e){return[useSnapshot(_e),_e.send]}function useConstant(_e){const _=reactExports.useRef(void 0);return _.current||(_.current={v:_e()}),_.current.v}var useSafeLayoutEffect$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useService(_e,_){const{state:et,context:tt}=_??{},rt=useConstant(()=>{const ot=typeof _e=="function"?_e():_e;return tt&&ot.setContext(tt),ot._created(),ot}),nt=reactExports.useRef(void 0);return useSafeLayoutEffect$1(()=>{const ot=et??nt.current;return rt.start(ot),()=>{rt.stop()}},[]),rt}function useMachine(_e,_){const et=useService(_e,_);return[useSnapshot(et,_),et.send,et]}function setRef(_e,_){typeof _e=="function"?_e(_):_e!=null&&(_e.current=_)}function composeRefs(..._e){return _=>{for(const et of _e)setRef(et,_)}}function getRef(_e){var tt,rt;let _=(tt=Object.getOwnPropertyDescriptor(_e.props,"ref"))==null?void 0:tt.get,et=_&&"isReactWarning"in _&&_.isReactWarning;return et?_e.ref:(_=(rt=Object.getOwnPropertyDescriptor(_e,"ref"))==null?void 0:rt.get,et=_&&"isReactWarning"in _&&_.isReactWarning,et?_e.props.ref:_e.props.ref||_e.ref)}const withAsChild=_e=>{const _=reactExports.memo(reactExports.forwardRef((et,tt)=>{const{asChild:rt,children:nt,...ot}=et;if(!rt)return reactExports.createElement(_e,{...ot,ref:tt},nt);const at=reactExports.Children.only(nt);if(!reactExports.isValidElement(at))return null;const lt=getRef(at);return reactExports.cloneElement(at,{...mergeProps(ot,at.props),ref:tt?composeRefs(tt,lt):lt})}));return _.displayName=_e.displayName||_e.name,_},jsxFactory=()=>{const _e=new Map;return new Proxy(withAsChild,{apply(_,et,tt){return withAsChild(tt[0])},get(_,et){const tt=et;return _e.has(tt)||_e.set(tt,withAsChild(tt)),_e.get(tt)}})},ark=jsxFactory(),createSplitProps=()=>(_e,_)=>_.reduce((et,tt)=>{const[rt,nt]=et,ot=tt;return nt[ot]!==void 0&&(rt[ot]=nt[ot]),delete nt[ot],[rt,nt]},[{},{..._e}]);var anatomy$k=createAnatomy("collapsible").parts("root","trigger","content");anatomy$k.build();var dom$j=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`collapsible:${_e.id}`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`collapsible:${_e.id}:content`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`collapsible:${_e.id}:trigger`},getRootEl:_e=>dom$j.getById(_e,dom$j.getRootId(_e)),getContentEl:_e=>dom$j.getById(_e,dom$j.getContentId(_e)),getTriggerEl:_e=>dom$j.getById(_e,dom$j.getTriggerId(_e))});createProps()(["dir","disabled","getRootNode","id","ids","onExitComplete","onOpenChange","open.controlled","open"]);const[EnvironmentContextProvider,useEnvironmentContext]=createContext({name:"EnvironmentContext",hookName:"useEnvironmentContext",providerName:"<EnvironmentProvider />",strict:!1,defaultValue:{getRootNode:()=>document,getDocument:()=>document,getWindow:()=>window}});function useEvent(_e,_={}){const{sync:et=!1}=_,tt=useLatestRef(_e);return reactExports.useCallback((...rt)=>{var nt;return et?queueMicrotask(()=>{var ot;return(ot=tt.current)==null?void 0:ot.call(tt,...rt)}):(nt=tt.current)==null?void 0:nt.call(tt,...rt)},[et,tt])}function useLatestRef(_e){const _=reactExports.useRef(_e);return _.current=_e,_}function getRoundedValue(_e,_,et){return Math.round((_e-_)/et)*et+_}function clampValue(_e,_,et){return Math.min(Math.max(_e,_),et)}function getValuePercent(_e,_,et){return(_e-_)/(et-_)}function getPercentValue(_e,_,et,tt){const rt=_e*(et-_)+_,nt=getRoundedValue(rt,_,tt);return clampValue(nt,_,et)}function getValueTransformer(_e,_){const et={min:_e[0],max:_e[1]},tt={min:_[0],max:_[1]};return function(nt){if(et.min===et.max||tt.min===tt.max)return tt.min;const ot=(tt.max-tt.min)/(et.max-et.min);return tt.min+ot*(nt-et.min)}}const sides=["top","right","bottom","left"],min$2=Math.min,max$3=Math.max,round$3=Math.round,floor$2=Math.floor,createCoords=_e=>({x:_e,y:_e}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$2(_e,_,et){return max$3(_e,min$2(_,et))}function evaluate(_e,_){return typeof _e=="function"?_e(_):_e}function getSide(_e){return _e.split("-")[0]}function getAlignment(_e){return _e.split("-")[1]}function getOppositeAxis(_e){return _e==="x"?"y":"x"}function getAxisLength(_e){return _e==="y"?"height":"width"}function getSideAxis(_e){return["top","bottom"].includes(getSide(_e))?"y":"x"}function getAlignmentAxis(_e){return getOppositeAxis(getSideAxis(_e))}function getAlignmentSides(_e,_,et){et===void 0&&(et=!1);const tt=getAlignment(_e),rt=getAlignmentAxis(_e),nt=getAxisLength(rt);let ot=rt==="x"?tt===(et?"end":"start")?"right":"left":tt==="start"?"bottom":"top";return _.reference[nt]>_.floating[nt]&&(ot=getOppositePlacement(ot)),[ot,getOppositePlacement(ot)]}function getExpandedPlacements(_e){const _=getOppositePlacement(_e);return[getOppositeAlignmentPlacement(_e),_,getOppositeAlignmentPlacement(_)]}function getOppositeAlignmentPlacement(_e){return _e.replace(/start|end/g,_=>oppositeAlignmentMap[_])}function getSideList(_e,_,et){const tt=["left","right"],rt=["right","left"],nt=["top","bottom"],ot=["bottom","top"];switch(_e){case"top":case"bottom":return et?_?rt:tt:_?tt:rt;case"left":case"right":return _?nt:ot;default:return[]}}function getOppositeAxisPlacements(_e,_,et,tt){const rt=getAlignment(_e);let nt=getSideList(getSide(_e),et==="start",tt);return rt&&(nt=nt.map(ot=>ot+"-"+rt),_&&(nt=nt.concat(nt.map(getOppositeAlignmentPlacement)))),nt}function getOppositePlacement(_e){return _e.replace(/left|right|bottom|top/g,_=>oppositeSideMap[_])}function expandPaddingObject(_e){return{top:0,right:0,bottom:0,left:0,..._e}}function getPaddingObject(_e){return typeof _e!="number"?expandPaddingObject(_e):{top:_e,right:_e,bottom:_e,left:_e}}function rectToClientRect(_e){const{x:_,y:et,width:tt,height:rt}=_e;return{width:tt,height:rt,top:et,left:_,right:_+tt,bottom:et+rt,x:_,y:et}}function computeCoordsFromPlacement(_e,_,et){let{reference:tt,floating:rt}=_e;const nt=getSideAxis(_),ot=getAlignmentAxis(_),at=getAxisLength(ot),lt=getSide(_),ct=nt==="y",dt=tt.x+tt.width/2-rt.width/2,st=tt.y+tt.height/2-rt.height/2,it=tt[at]/2-rt[at]/2;let ut;switch(lt){case"top":ut={x:dt,y:tt.y-rt.height};break;case"bottom":ut={x:dt,y:tt.y+tt.height};break;case"right":ut={x:tt.x+tt.width,y:st};break;case"left":ut={x:tt.x-rt.width,y:st};break;default:ut={x:tt.x,y:tt.y}}switch(getAlignment(_)){case"start":ut[ot]-=it*(et&&ct?-1:1);break;case"end":ut[ot]+=it*(et&&ct?-1:1);break}return ut}const computePosition$1=async(_e,_,et)=>{const{placement:tt="bottom",strategy:rt="absolute",middleware:nt=[],platform:ot}=et,at=nt.filter(Boolean),lt=await(ot.isRTL==null?void 0:ot.isRTL(_));let ct=await ot.getElementRects({reference:_e,floating:_,strategy:rt}),{x:dt,y:st}=computeCoordsFromPlacement(ct,tt,lt),it=tt,ut={},ht=0;for(let ft=0;ft<at.length;ft++){const{name:gt,fn:mt}=at[ft],{x:yt,y:bt,data:vt,reset:xt}=await mt({x:dt,y:st,initialPlacement:tt,placement:it,strategy:rt,middlewareData:ut,rects:ct,platform:ot,elements:{reference:_e,floating:_}});dt=yt??dt,st=bt??st,ut={...ut,[gt]:{...ut[gt],...vt}},xt&&ht<=50&&(ht++,typeof xt=="object"&&(xt.placement&&(it=xt.placement),xt.rects&&(ct=xt.rects===!0?await ot.getElementRects({reference:_e,floating:_,strategy:rt}):xt.rects),{x:dt,y:st}=computeCoordsFromPlacement(ct,it,lt)),ft=-1)}return{x:dt,y:st,placement:it,strategy:rt,middlewareData:ut}};async function detectOverflow(_e,_){var et;_===void 0&&(_={});const{x:tt,y:rt,platform:nt,rects:ot,elements:at,strategy:lt}=_e,{boundary:ct="clippingAncestors",rootBoundary:dt="viewport",elementContext:st="floating",altBoundary:it=!1,padding:ut=0}=evaluate(_,_e),ht=getPaddingObject(ut),gt=at[it?st==="floating"?"reference":"floating":st],mt=rectToClientRect(await nt.getClippingRect({element:(et=await(nt.isElement==null?void 0:nt.isElement(gt)))==null||et?gt:gt.contextElement||await(nt.getDocumentElement==null?void 0:nt.getDocumentElement(at.floating)),boundary:ct,rootBoundary:dt,strategy:lt})),yt=st==="floating"?{x:tt,y:rt,width:ot.floating.width,height:ot.floating.height}:ot.reference,bt=await(nt.getOffsetParent==null?void 0:nt.getOffsetParent(at.floating)),vt=await(nt.isElement==null?void 0:nt.isElement(bt))?await(nt.getScale==null?void 0:nt.getScale(bt))||{x:1,y:1}:{x:1,y:1},xt=rectToClientRect(nt.convertOffsetParentRelativeRectToViewportRelativeRect?await nt.convertOffsetParentRelativeRectToViewportRelativeRect({elements:at,rect:yt,offsetParent:bt,strategy:lt}):yt);return{top:(mt.top-xt.top+ht.top)/vt.y,bottom:(xt.bottom-mt.bottom+ht.bottom)/vt.y,left:(mt.left-xt.left+ht.left)/vt.x,right:(xt.right-mt.right+ht.right)/vt.x}}const arrow$1=_e=>({name:"arrow",options:_e,async fn(_){const{x:et,y:tt,placement:rt,rects:nt,platform:ot,elements:at,middlewareData:lt}=_,{element:ct,padding:dt=0}=evaluate(_e,_)||{};if(ct==null)return{};const st=getPaddingObject(dt),it={x:et,y:tt},ut=getAlignmentAxis(rt),ht=getAxisLength(ut),ft=await ot.getDimensions(ct),gt=ut==="y",mt=gt?"top":"left",yt=gt?"bottom":"right",bt=gt?"clientHeight":"clientWidth",vt=nt.reference[ht]+nt.reference[ut]-it[ut]-nt.floating[ht],xt=it[ut]-nt.reference[ut],wt=await(ot.getOffsetParent==null?void 0:ot.getOffsetParent(ct));let St=wt?wt[bt]:0;(!St||!await(ot.isElement==null?void 0:ot.isElement(wt)))&&(St=at.floating[bt]||nt.floating[ht]);const Et=vt/2-xt/2,_t=St/2-ft[ht]/2-1,Tt=min$2(st[mt],_t),Rt=min$2(st[yt],_t),Ot=Tt,At=St-ft[ht]-Rt,Ct=St/2-ft[ht]/2+Et,$t=clamp$2(Ot,Ct,At),Mt=!lt.arrow&&getAlignment(rt)!=null&&Ct!==$t&&nt.reference[ht]/2-(Ct<Ot?Tt:Rt)-ft[ht]/2<0,Dt=Mt?Ct<Ot?Ct-Ot:Ct-At:0;return{[ut]:it[ut]+Dt,data:{[ut]:$t,centerOffset:Ct-$t-Dt,...Mt&&{alignmentOffset:Dt}},reset:Mt}}}),flip$1=function(_e){return _e===void 0&&(_e={}),{name:"flip",options:_e,async fn(_){var et,tt;const{placement:rt,middlewareData:nt,rects:ot,initialPlacement:at,platform:lt,elements:ct}=_,{mainAxis:dt=!0,crossAxis:st=!0,fallbackPlacements:it,fallbackStrategy:ut="bestFit",fallbackAxisSideDirection:ht="none",flipAlignment:ft=!0,...gt}=evaluate(_e,_);if((et=nt.arrow)!=null&&et.alignmentOffset)return{};const mt=getSide(rt),yt=getSideAxis(at),bt=getSide(at)===at,vt=await(lt.isRTL==null?void 0:lt.isRTL(ct.floating)),xt=it||(bt||!ft?[getOppositePlacement(at)]:getExpandedPlacements(at)),wt=ht!=="none";!it&&wt&&xt.push(...getOppositeAxisPlacements(at,ft,ht,vt));const St=[at,...xt],Et=await detectOverflow(_,gt),_t=[];let Tt=((tt=nt.flip)==null?void 0:tt.overflows)||[];if(dt&&_t.push(Et[mt]),st){const Ct=getAlignmentSides(rt,ot,vt);_t.push(Et[Ct[0]],Et[Ct[1]])}if(Tt=[...Tt,{placement:rt,overflows:_t}],!_t.every(Ct=>Ct<=0)){var Rt,Ot;const Ct=(((Rt=nt.flip)==null?void 0:Rt.index)||0)+1,$t=St[Ct];if($t)return{data:{index:Ct,overflows:Tt},reset:{placement:$t}};let Mt=(Ot=Tt.filter(Dt=>Dt.overflows[0]<=0).sort((Dt,Nt)=>Dt.overflows[1]-Nt.overflows[1])[0])==null?void 0:Ot.placement;if(!Mt)switch(ut){case"bestFit":{var At;const Dt=(At=Tt.filter(Nt=>{if(wt){const Bt=getSideAxis(Nt.placement);return Bt===yt||Bt==="y"}return!0}).map(Nt=>[Nt.placement,Nt.overflows.filter(Bt=>Bt>0).reduce((Bt,Ut)=>Bt+Ut,0)]).sort((Nt,Bt)=>Nt[1]-Bt[1])[0])==null?void 0:At[0];Dt&&(Mt=Dt);break}case"initialPlacement":Mt=at;break}if(rt!==Mt)return{reset:{placement:Mt}}}return{}}}};function getSideOffsets(_e,_){return{top:_e.top-_.height,right:_e.right-_.width,bottom:_e.bottom-_.height,left:_e.left-_.width}}function isAnySideFullyClipped(_e){return sides.some(_=>_e[_]>=0)}const hide$1=function(_e){return _e===void 0&&(_e={}),{name:"hide",options:_e,async fn(_){const{rects:et}=_,{strategy:tt="referenceHidden",...rt}=evaluate(_e,_);switch(tt){case"referenceHidden":{const nt=await detectOverflow(_,{...rt,elementContext:"reference"}),ot=getSideOffsets(nt,et.reference);return{data:{referenceHiddenOffsets:ot,referenceHidden:isAnySideFullyClipped(ot)}}}case"escaped":{const nt=await detectOverflow(_,{...rt,altBoundary:!0}),ot=getSideOffsets(nt,et.floating);return{data:{escapedOffsets:ot,escaped:isAnySideFullyClipped(ot)}}}default:return{}}}}};async function convertValueToCoords(_e,_){const{placement:et,platform:tt,elements:rt}=_e,nt=await(tt.isRTL==null?void 0:tt.isRTL(rt.floating)),ot=getSide(et),at=getAlignment(et),lt=getSideAxis(et)==="y",ct=["left","top"].includes(ot)?-1:1,dt=nt&&lt?-1:1,st=evaluate(_,_e);let{mainAxis:it,crossAxis:ut,alignmentAxis:ht}=typeof st=="number"?{mainAxis:st,crossAxis:0,alignmentAxis:null}:{mainAxis:st.mainAxis||0,crossAxis:st.crossAxis||0,alignmentAxis:st.alignmentAxis};return at&&typeof ht=="number"&&(ut=at==="end"?ht*-1:ht),lt?{x:ut*dt,y:it*ct}:{x:it*ct,y:ut*dt}}const offset$1=function(_e){return _e===void 0&&(_e=0),{name:"offset",options:_e,async fn(_){var et,tt;const{x:rt,y:nt,placement:ot,middlewareData:at}=_,lt=await convertValueToCoords(_,_e);return ot===((et=at.offset)==null?void 0:et.placement)&&(tt=at.arrow)!=null&&tt.alignmentOffset?{}:{x:rt+lt.x,y:nt+lt.y,data:{...lt,placement:ot}}}}},shift$1=function(_e){return _e===void 0&&(_e={}),{name:"shift",options:_e,async fn(_){const{x:et,y:tt,placement:rt}=_,{mainAxis:nt=!0,crossAxis:ot=!1,limiter:at={fn:gt=>{let{x:mt,y:yt}=gt;return{x:mt,y:yt}}},...lt}=evaluate(_e,_),ct={x:et,y:tt},dt=await detectOverflow(_,lt),st=getSideAxis(getSide(rt)),it=getOppositeAxis(st);let ut=ct[it],ht=ct[st];if(nt){const gt=it==="y"?"top":"left",mt=it==="y"?"bottom":"right",yt=ut+dt[gt],bt=ut-dt[mt];ut=clamp$2(yt,ut,bt)}if(ot){const gt=st==="y"?"top":"left",mt=st==="y"?"bottom":"right",yt=ht+dt[gt],bt=ht-dt[mt];ht=clamp$2(yt,ht,bt)}const ft=at.fn({..._,[it]:ut,[st]:ht});return{...ft,data:{x:ft.x-et,y:ft.y-tt,enabled:{[it]:nt,[st]:ot}}}}}},limitShift$1=function(_e){return _e===void 0&&(_e={}),{options:_e,fn(_){const{x:et,y:tt,placement:rt,rects:nt,middlewareData:ot}=_,{offset:at=0,mainAxis:lt=!0,crossAxis:ct=!0}=evaluate(_e,_),dt={x:et,y:tt},st=getSideAxis(rt),it=getOppositeAxis(st);let ut=dt[it],ht=dt[st];const ft=evaluate(at,_),gt=typeof ft=="number"?{mainAxis:ft,crossAxis:0}:{mainAxis:0,crossAxis:0,...ft};if(lt){const bt=it==="y"?"height":"width",vt=nt.reference[it]-nt.floating[bt]+gt.mainAxis,xt=nt.reference[it]+nt.reference[bt]-gt.mainAxis;ut<vt?ut=vt:ut>xt&&(ut=xt)}if(ct){var mt,yt;const bt=it==="y"?"width":"height",vt=["top","left"].includes(getSide(rt)),xt=nt.reference[st]-nt.floating[bt]+(vt&&((mt=ot.offset)==null?void 0:mt[st])||0)+(vt?0:gt.crossAxis),wt=nt.reference[st]+nt.reference[bt]+(vt?0:((yt=ot.offset)==null?void 0:yt[st])||0)-(vt?gt.crossAxis:0);ht<xt?ht=xt:ht>wt&&(ht=wt)}return{[it]:ut,[st]:ht}}}},size$1=function(_e){return _e===void 0&&(_e={}),{name:"size",options:_e,async fn(_){var et,tt;const{placement:rt,rects:nt,platform:ot,elements:at}=_,{apply:lt=()=>{},...ct}=evaluate(_e,_),dt=await detectOverflow(_,ct),st=getSide(rt),it=getAlignment(rt),ut=getSideAxis(rt)==="y",{width:ht,height:ft}=nt.floating;let gt,mt;st==="top"||st==="bottom"?(gt=st,mt=it===(await(ot.isRTL==null?void 0:ot.isRTL(at.floating))?"start":"end")?"left":"right"):(mt=st,gt=it==="end"?"top":"bottom");const yt=ft-dt.top-dt.bottom,bt=ht-dt.left-dt.right,vt=min$2(ft-dt[gt],yt),xt=min$2(ht-dt[mt],bt),wt=!_.middlewareData.shift;let St=vt,Et=xt;if((et=_.middlewareData.shift)!=null&&et.enabled.x&&(Et=bt),(tt=_.middlewareData.shift)!=null&&tt.enabled.y&&(St=yt),wt&&!it){const Tt=max$3(dt.left,0),Rt=max$3(dt.right,0),Ot=max$3(dt.top,0),At=max$3(dt.bottom,0);ut?Et=ht-2*(Tt!==0||Rt!==0?Tt+Rt:max$3(dt.left,dt.right)):St=ft-2*(Ot!==0||At!==0?Ot+At:max$3(dt.top,dt.bottom))}await lt({..._,availableWidth:Et,availableHeight:St});const _t=await ot.getDimensions(at.floating);return ht!==_t.width||ft!==_t.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(_e){return isNode(_e)?(_e.nodeName||"").toLowerCase():"#document"}function getWindow$1(_e){var _;return(_e==null||(_=_e.ownerDocument)==null?void 0:_.defaultView)||window}function getDocumentElement(_e){var _;return(_=(isNode(_e)?_e.ownerDocument:_e.document)||window.document)==null?void 0:_.documentElement}function isNode(_e){return hasWindow()?_e instanceof Node||_e instanceof getWindow$1(_e).Node:!1}function isElement$1(_e){return hasWindow()?_e instanceof Element||_e instanceof getWindow$1(_e).Element:!1}function isHTMLElement(_e){return hasWindow()?_e instanceof HTMLElement||_e instanceof getWindow$1(_e).HTMLElement:!1}function isShadowRoot(_e){return!hasWindow()||typeof ShadowRoot>"u"?!1:_e instanceof ShadowRoot||_e instanceof getWindow$1(_e).ShadowRoot}function isOverflowElement(_e){const{overflow:_,overflowX:et,overflowY:tt,display:rt}=getComputedStyle$1(_e);return/auto|scroll|overlay|hidden|clip/.test(_+tt+et)&&!["inline","contents"].includes(rt)}function isTableElement(_e){return["table","td","th"].includes(getNodeName(_e))}function isTopLayer(_e){return[":popover-open",":modal"].some(_=>{try{return _e.matches(_)}catch{return!1}})}function isContainingBlock(_e){const _=isWebKit(),et=isElement$1(_e)?getComputedStyle$1(_e):_e;return et.transform!=="none"||et.perspective!=="none"||(et.containerType?et.containerType!=="normal":!1)||!_&&(et.backdropFilter?et.backdropFilter!=="none":!1)||!_&&(et.filter?et.filter!=="none":!1)||["transform","perspective","filter"].some(tt=>(et.willChange||"").includes(tt))||["paint","layout","strict","content"].some(tt=>(et.contain||"").includes(tt))}function getContainingBlock(_e){let _=getParentNode$1(_e);for(;isHTMLElement(_)&&!isLastTraversableNode(_);){if(isContainingBlock(_))return _;if(isTopLayer(_))return null;_=getParentNode$1(_)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(_e){return["html","body","#document"].includes(getNodeName(_e))}function getComputedStyle$1(_e){return getWindow$1(_e).getComputedStyle(_e)}function getNodeScroll(_e){return isElement$1(_e)?{scrollLeft:_e.scrollLeft,scrollTop:_e.scrollTop}:{scrollLeft:_e.scrollX,scrollTop:_e.scrollY}}function getParentNode$1(_e){if(getNodeName(_e)==="html")return _e;const _=_e.assignedSlot||_e.parentNode||isShadowRoot(_e)&&_e.host||getDocumentElement(_e);return isShadowRoot(_)?_.host:_}function getNearestOverflowAncestor(_e){const _=getParentNode$1(_e);return isLastTraversableNode(_)?_e.ownerDocument?_e.ownerDocument.body:_e.body:isHTMLElement(_)&&isOverflowElement(_)?_:getNearestOverflowAncestor(_)}function getOverflowAncestors(_e,_,et){var tt;_===void 0&&(_=[]),et===void 0&&(et=!0);const rt=getNearestOverflowAncestor(_e),nt=rt===((tt=_e.ownerDocument)==null?void 0:tt.body),ot=getWindow$1(rt);if(nt){const at=getFrameElement(ot);return _.concat(ot,ot.visualViewport||[],isOverflowElement(rt)?rt:[],at&&et?getOverflowAncestors(at):[])}return _.concat(rt,getOverflowAncestors(rt,[],et))}function getFrameElement(_e){return _e.parent&&Object.getPrototypeOf(_e.parent)?_e.frameElement:null}function getCssDimensions(_e){const _=getComputedStyle$1(_e);let et=parseFloat(_.width)||0,tt=parseFloat(_.height)||0;const rt=isHTMLElement(_e),nt=rt?_e.offsetWidth:et,ot=rt?_e.offsetHeight:tt,at=round$3(et)!==nt||round$3(tt)!==ot;return at&&(et=nt,tt=ot),{width:et,height:tt,$:at}}function unwrapElement(_e){return isElement$1(_e)?_e:_e.contextElement}function getScale(_e){const _=unwrapElement(_e);if(!isHTMLElement(_))return createCoords(1);const et=_.getBoundingClientRect(),{width:tt,height:rt,$:nt}=getCssDimensions(_);let ot=(nt?round$3(et.width):et.width)/tt,at=(nt?round$3(et.height):et.height)/rt;return(!ot||!Number.isFinite(ot))&&(ot=1),(!at||!Number.isFinite(at))&&(at=1),{x:ot,y:at}}const noOffsets=createCoords(0);function getVisualOffsets(_e){const _=getWindow$1(_e);return!isWebKit()||!_.visualViewport?noOffsets:{x:_.visualViewport.offsetLeft,y:_.visualViewport.offsetTop}}function shouldAddVisualOffsets(_e,_,et){return _===void 0&&(_=!1),!et||_&&et!==getWindow$1(_e)?!1:_}function getBoundingClientRect(_e,_,et,tt){_===void 0&&(_=!1),et===void 0&&(et=!1);const rt=_e.getBoundingClientRect(),nt=unwrapElement(_e);let ot=createCoords(1);_&&(tt?isElement$1(tt)&&(ot=getScale(tt)):ot=getScale(_e));const at=shouldAddVisualOffsets(nt,et,tt)?getVisualOffsets(nt):createCoords(0);let lt=(rt.left+at.x)/ot.x,ct=(rt.top+at.y)/ot.y,dt=rt.width/ot.x,st=rt.height/ot.y;if(nt){const it=getWindow$1(nt),ut=tt&&isElement$1(tt)?getWindow$1(tt):tt;let ht=it,ft=getFrameElement(ht);for(;ft&&tt&&ut!==ht;){const gt=getScale(ft),mt=ft.getBoundingClientRect(),yt=getComputedStyle$1(ft),bt=mt.left+(ft.clientLeft+parseFloat(yt.paddingLeft))*gt.x,vt=mt.top+(ft.clientTop+parseFloat(yt.paddingTop))*gt.y;lt*=gt.x,ct*=gt.y,dt*=gt.x,st*=gt.y,lt+=bt,ct+=vt,ht=getWindow$1(ft),ft=getFrameElement(ht)}}return rectToClientRect({width:dt,height:st,x:lt,y:ct})}function getWindowScrollBarX(_e,_){const et=getNodeScroll(_e).scrollLeft;return _?_.left+et:getBoundingClientRect(getDocumentElement(_e)).left+et}function getHTMLOffset(_e,_,et){et===void 0&&(et=!1);const tt=_e.getBoundingClientRect(),rt=tt.left+_.scrollLeft-(et?0:getWindowScrollBarX(_e,tt)),nt=tt.top+_.scrollTop;return{x:rt,y:nt}}function convertOffsetParentRelativeRectToViewportRelativeRect(_e){let{elements:_,rect:et,offsetParent:tt,strategy:rt}=_e;const nt=rt==="fixed",ot=getDocumentElement(tt),at=_?isTopLayer(_.floating):!1;if(tt===ot||at&&nt)return et;let lt={scrollLeft:0,scrollTop:0},ct=createCoords(1);const dt=createCoords(0),st=isHTMLElement(tt);if((st||!st&&!nt)&&((getNodeName(tt)!=="body"||isOverflowElement(ot))&&(lt=getNodeScroll(tt)),isHTMLElement(tt))){const ut=getBoundingClientRect(tt);ct=getScale(tt),dt.x=ut.x+tt.clientLeft,dt.y=ut.y+tt.clientTop}const it=ot&&!st&&!nt?getHTMLOffset(ot,lt,!0):createCoords(0);return{width:et.width*ct.x,height:et.height*ct.y,x:et.x*ct.x-lt.scrollLeft*ct.x+dt.x+it.x,y:et.y*ct.y-lt.scrollTop*ct.y+dt.y+it.y}}function getClientRects(_e){return Array.from(_e.getClientRects())}function getDocumentRect(_e){const _=getDocumentElement(_e),et=getNodeScroll(_e),tt=_e.ownerDocument.body,rt=max$3(_.scrollWidth,_.clientWidth,tt.scrollWidth,tt.clientWidth),nt=max$3(_.scrollHeight,_.clientHeight,tt.scrollHeight,tt.clientHeight);let ot=-et.scrollLeft+getWindowScrollBarX(_e);const at=-et.scrollTop;return getComputedStyle$1(tt).direction==="rtl"&&(ot+=max$3(_.clientWidth,tt.clientWidth)-rt),{width:rt,height:nt,x:ot,y:at}}function getViewportRect(_e,_){const et=getWindow$1(_e),tt=getDocumentElement(_e),rt=et.visualViewport;let nt=tt.clientWidth,ot=tt.clientHeight,at=0,lt=0;if(rt){nt=rt.width,ot=rt.height;const ct=isWebKit();(!ct||ct&&_==="fixed")&&(at=rt.offsetLeft,lt=rt.offsetTop)}return{width:nt,height:ot,x:at,y:lt}}function getInnerBoundingClientRect(_e,_){const et=getBoundingClientRect(_e,!0,_==="fixed"),tt=et.top+_e.clientTop,rt=et.left+_e.clientLeft,nt=isHTMLElement(_e)?getScale(_e):createCoords(1),ot=_e.clientWidth*nt.x,at=_e.clientHeight*nt.y,lt=rt*nt.x,ct=tt*nt.y;return{width:ot,height:at,x:lt,y:ct}}function getClientRectFromClippingAncestor(_e,_,et){let tt;if(_==="viewport")tt=getViewportRect(_e,et);else if(_==="document")tt=getDocumentRect(getDocumentElement(_e));else if(isElement$1(_))tt=getInnerBoundingClientRect(_,et);else{const rt=getVisualOffsets(_e);tt={x:_.x-rt.x,y:_.y-rt.y,width:_.width,height:_.height}}return rectToClientRect(tt)}function hasFixedPositionAncestor(_e,_){const et=getParentNode$1(_e);return et===_||!isElement$1(et)||isLastTraversableNode(et)?!1:getComputedStyle$1(et).position==="fixed"||hasFixedPositionAncestor(et,_)}function getClippingElementAncestors(_e,_){const et=_.get(_e);if(et)return et;let tt=getOverflowAncestors(_e,[],!1).filter(at=>isElement$1(at)&&getNodeName(at)!=="body"),rt=null;const nt=getComputedStyle$1(_e).position==="fixed";let ot=nt?getParentNode$1(_e):_e;for(;isElement$1(ot)&&!isLastTraversableNode(ot);){const at=getComputedStyle$1(ot),lt=isContainingBlock(ot);!lt&&at.position==="fixed"&&(rt=null),(nt?!lt&&!rt:!lt&&at.position==="static"&&!!rt&&["absolute","fixed"].includes(rt.position)||isOverflowElement(ot)&&!lt&&hasFixedPositionAncestor(_e,ot))?tt=tt.filter(dt=>dt!==ot):rt=at,ot=getParentNode$1(ot)}return _.set(_e,tt),tt}function getClippingRect(_e){let{element:_,boundary:et,rootBoundary:tt,strategy:rt}=_e;const ot=[...et==="clippingAncestors"?isTopLayer(_)?[]:getClippingElementAncestors(_,this._c):[].concat(et),tt],at=ot[0],lt=ot.reduce((ct,dt)=>{const st=getClientRectFromClippingAncestor(_,dt,rt);return ct.top=max$3(st.top,ct.top),ct.right=min$2(st.right,ct.right),ct.bottom=min$2(st.bottom,ct.bottom),ct.left=max$3(st.left,ct.left),ct},getClientRectFromClippingAncestor(_,at,rt));return{width:lt.right-lt.left,height:lt.bottom-lt.top,x:lt.left,y:lt.top}}function getDimensions(_e){const{width:_,height:et}=getCssDimensions(_e);return{width:_,height:et}}function getRectRelativeToOffsetParent(_e,_,et){const tt=isHTMLElement(_),rt=getDocumentElement(_),nt=et==="fixed",ot=getBoundingClientRect(_e,!0,nt,_);let at={scrollLeft:0,scrollTop:0};const lt=createCoords(0);if(tt||!tt&&!nt)if((getNodeName(_)!=="body"||isOverflowElement(rt))&&(at=getNodeScroll(_)),tt){const it=getBoundingClientRect(_,!0,nt,_);lt.x=it.x+_.clientLeft,lt.y=it.y+_.clientTop}else rt&&(lt.x=getWindowScrollBarX(rt));const ct=rt&&!tt&&!nt?getHTMLOffset(rt,at):createCoords(0),dt=ot.left+at.scrollLeft-lt.x-ct.x,st=ot.top+at.scrollTop-lt.y-ct.y;return{x:dt,y:st,width:ot.width,height:ot.height}}function isStaticPositioned(_e){return getComputedStyle$1(_e).position==="static"}function getTrueOffsetParent(_e,_){if(!isHTMLElement(_e)||getComputedStyle$1(_e).position==="fixed")return null;if(_)return _(_e);let et=_e.offsetParent;return getDocumentElement(_e)===et&&(et=et.ownerDocument.body),et}function getOffsetParent(_e,_){const et=getWindow$1(_e);if(isTopLayer(_e))return et;if(!isHTMLElement(_e)){let rt=getParentNode$1(_e);for(;rt&&!isLastTraversableNode(rt);){if(isElement$1(rt)&&!isStaticPositioned(rt))return rt;rt=getParentNode$1(rt)}return et}let tt=getTrueOffsetParent(_e,_);for(;tt&&isTableElement(tt)&&isStaticPositioned(tt);)tt=getTrueOffsetParent(tt,_);return tt&&isLastTraversableNode(tt)&&isStaticPositioned(tt)&&!isContainingBlock(tt)?et:tt||getContainingBlock(_e)||et}const getElementRects=async function(_e){const _=this.getOffsetParent||getOffsetParent,et=this.getDimensions,tt=await et(_e.floating);return{reference:getRectRelativeToOffsetParent(_e.reference,await _(_e.floating),_e.strategy),floating:{x:0,y:0,width:tt.width,height:tt.height}}};function isRTL(_e){return getComputedStyle$1(_e).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement:isElement$1,isRTL};function observeMove(_e,_){let et=null,tt;const rt=getDocumentElement(_e);function nt(){var at;clearTimeout(tt),(at=et)==null||at.disconnect(),et=null}function ot(at,lt){at===void 0&&(at=!1),lt===void 0&&(lt=1),nt();const{left:ct,top:dt,width:st,height:it}=_e.getBoundingClientRect();if(at||_(),!st||!it)return;const ut=floor$2(dt),ht=floor$2(rt.clientWidth-(ct+st)),ft=floor$2(rt.clientHeight-(dt+it)),gt=floor$2(ct),yt={rootMargin:-ut+"px "+-ht+"px "+-ft+"px "+-gt+"px",threshold:max$3(0,min$2(1,lt))||1};let bt=!0;function vt(xt){const wt=xt[0].intersectionRatio;if(wt!==lt){if(!bt)return ot();wt?ot(!1,wt):tt=setTimeout(()=>{ot(!1,1e-7)},1e3)}bt=!1}try{et=new IntersectionObserver(vt,{...yt,root:rt.ownerDocument})}catch{et=new IntersectionObserver(vt,yt)}et.observe(_e)}return ot(!0),nt}function autoUpdate(_e,_,et,tt){tt===void 0&&(tt={});const{ancestorScroll:rt=!0,ancestorResize:nt=!0,elementResize:ot=typeof ResizeObserver=="function",layoutShift:at=typeof IntersectionObserver=="function",animationFrame:lt=!1}=tt,ct=unwrapElement(_e),dt=rt||nt?[...ct?getOverflowAncestors(ct):[],...getOverflowAncestors(_)]:[];dt.forEach(mt=>{rt&&mt.addEventListener("scroll",et,{passive:!0}),nt&&mt.addEventListener("resize",et)});const st=ct&&at?observeMove(ct,et):null;let it=-1,ut=null;ot&&(ut=new ResizeObserver(mt=>{let[yt]=mt;yt&&yt.target===ct&&ut&&(ut.unobserve(_),cancelAnimationFrame(it),it=requestAnimationFrame(()=>{var bt;(bt=ut)==null||bt.observe(_)})),et()}),ct&&!lt&&ut.observe(ct),ut.observe(_));let ht,ft=lt?getBoundingClientRect(_e):null;lt&&gt();function gt(){const mt=getBoundingClientRect(_e);ft&&(mt.x!==ft.x||mt.y!==ft.y||mt.width!==ft.width||mt.height!==ft.height)&&et(),ft=mt,ht=requestAnimationFrame(gt)}return et(),()=>{var mt;dt.forEach(yt=>{rt&&yt.removeEventListener("scroll",et),nt&&yt.removeEventListener("resize",et)}),st==null||st(),(mt=ut)==null||mt.disconnect(),ut=null,lt&&cancelAnimationFrame(ht)}}const offset=offset$1,shift=shift$1,flip=flip$1,size=size$1,hide=hide$1,arrow=arrow$1,limitShift=limitShift$1,computePosition=(_e,_,et)=>{const tt=new Map,rt={platform,...et},nt={...rt.platform,_c:tt};return computePosition$1(_e,_,{...rt,platform:nt})};function createDOMRect(_e=0,_=0,et=0,tt=0){if(typeof DOMRect=="function")return new DOMRect(_e,_,et,tt);const rt={x:_e,y:_,width:et,height:tt,top:_,right:_e+et,bottom:_+tt,left:_e};return{...rt,toJSON:()=>rt}}function getDOMRect(_e){if(!_e)return createDOMRect();const{x:_,y:et,width:tt,height:rt}=_e;return createDOMRect(_,et,tt,rt)}function getAnchorElement(_e,_){return{contextElement:isHTMLElement$1(_e)?_e:void 0,getBoundingClientRect:()=>{const et=_e,tt=_==null?void 0:_(et);return tt||!et?getDOMRect(tt):et.getBoundingClientRect()}}}var toVar=_e=>({variable:_e,reference:`var(${_e})`}),cssVars={arrowSize:toVar("--arrow-size"),arrowSizeHalf:toVar("--arrow-size-half"),arrowBg:toVar("--arrow-background"),transformOrigin:toVar("--transform-origin"),arrowOffset:toVar("--arrow-offset")},getTransformOrigin=_e=>({top:"bottom center","top-start":_e?`${_e.x}px bottom`:"left bottom","top-end":_e?`${_e.x}px bottom`:"right bottom",bottom:"top center","bottom-start":_e?`${_e.x}px top`:"top left","bottom-end":_e?`${_e.x}px top`:"top right",left:"right center","left-start":_e?`right ${_e.y}px`:"right top","left-end":_e?`right ${_e.y}px`:"right bottom",right:"left center","right-start":_e?`left ${_e.y}px`:"left top","right-end":_e?`left ${_e.y}px`:"left bottom"}),transformOriginMiddleware={name:"transformOrigin",fn({placement:_e,elements:_,middlewareData:et}){const{arrow:tt}=et,rt=getTransformOrigin(tt)[_e],{floating:nt}=_;return nt.style.setProperty(cssVars.transformOrigin.variable,rt),{data:{transformOrigin:rt}}}},rectMiddleware={name:"rects",fn({rects:_e}){return{data:_e}}},shiftArrowMiddleware=_e=>{if(_e)return{name:"shiftArrow",fn({placement:_,middlewareData:et}){if(!et.arrow)return{};const{x:tt,y:rt}=et.arrow,nt=_.split("-")[0];return Object.assign(_e.style,{left:tt!=null?`${tt}px`:"",top:rt!=null?`${rt}px`:"",[nt]:`calc(100% + ${cssVars.arrowOffset.reference})`}),{}}}};function getPlacementDetails(_e){const[_,et]=_e.split("-");return{side:_,align:et,hasAlign:et!=null}}var defaultOptions$1={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,overflowPadding:8,arrowPadding:4};function roundByDpr(_e,_){const et=_e.devicePixelRatio||1;return Math.round(_*et)/et}function getBoundaryMiddleware(_e){return runIfFn(_e.boundary)}function getArrowMiddleware(_e,_){if(_e)return arrow({element:_e,padding:_.arrowPadding})}function getOffsetMiddleware(_e,_){if(!isNull(_.offset??_.gutter))return offset(({placement:et})=>{var ct,dt;const tt=((_e==null?void 0:_e.clientHeight)||0)/2,rt=((ct=_.offset)==null?void 0:ct.mainAxis)??_.gutter,nt=typeof rt=="number"?rt+tt:rt??tt,{hasAlign:ot}=getPlacementDetails(et),at=ot?void 0:_.shift,lt=((dt=_.offset)==null?void 0:dt.crossAxis)??at;return compact$2({crossAxis:lt,mainAxis:nt,alignmentAxis:_.shift})})}function getFlipMiddleware(_e){if(_e.flip)return flip({boundary:getBoundaryMiddleware(_e),padding:_e.overflowPadding,fallbackPlacements:_e.flip===!0?void 0:_e.flip})}function getShiftMiddleware(_e){if(!(!_e.slide&&!_e.overlap))return shift({boundary:getBoundaryMiddleware(_e),mainAxis:_e.slide,crossAxis:_e.overlap,padding:_e.overflowPadding,limiter:limitShift()})}function getSizeMiddleware(_e){return size({padding:_e.overflowPadding,apply({elements:_,rects:et,availableHeight:tt,availableWidth:rt}){const nt=_.floating,ot=Math.round(et.reference.width);rt=Math.floor(rt),tt=Math.floor(tt),nt.style.setProperty("--reference-width",`${ot}px`),nt.style.setProperty("--available-width",`${rt}px`),nt.style.setProperty("--available-height",`${tt}px`)}})}function hideWhenDetachedMiddleware(_e){var _;if(_e.hideWhenDetached)return hide({strategy:"referenceHidden",boundary:((_=_e.boundary)==null?void 0:_.call(_e))??"clippingAncestors"})}function getAutoUpdateOptions(_e){return _e?_e===!0?{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,layoutShift:!0}:_e:{}}function getPlacementImpl(_e,_,et={}){const tt=getAnchorElement(_e,et.getAnchorRect);if(!_||!tt)return;const rt=Object.assign({},defaultOptions$1,et),nt=_.querySelector("[data-part=arrow]"),ot=[getOffsetMiddleware(nt,rt),getFlipMiddleware(rt),getShiftMiddleware(rt),getArrowMiddleware(nt,rt),shiftArrowMiddleware(nt),transformOriginMiddleware,getSizeMiddleware(rt),hideWhenDetachedMiddleware(rt),rectMiddleware],{placement:at,strategy:lt,onComplete:ct,onPositioned:dt}=rt,st=async()=>{var vt;if(!tt||!_)return;const ft=await computePosition(tt,_,{placement:at,middleware:ot,strategy:lt});ct==null||ct(ft),dt==null||dt({placed:!0});const gt=getWindow$2(_),mt=roundByDpr(gt,ft.x),yt=roundByDpr(gt,ft.y);_.style.setProperty("--x",`${mt}px`),_.style.setProperty("--y",`${yt}px`),rt.hideWhenDetached&&((vt=ft.middlewareData.hide)!=null&&vt.referenceHidden)&&_.style.setProperty("visibility","hidden");const bt=_.firstElementChild;if(bt){const xt=gt.getComputedStyle(bt).zIndex;_.style.setProperty("--z-index",xt)}},it=async()=>{et.updatePosition?(await et.updatePosition({updatePosition:st}),dt==null||dt({placed:!0})):await st()},ut=getAutoUpdateOptions(rt.listeners),ht=rt.listeners?autoUpdate(tt,_,it,ut):noop$2;return it(),()=>{ht==null||ht(),dt==null||dt({placed:!1})}}function getPlacement(_e,_,et={}){const{defer:tt,...rt}=et,nt=tt?raf$1:at=>at(),ot=[];return ot.push(nt(()=>{const at=typeof _e=="function"?_e():_e,lt=typeof _=="function"?_():_;ot.push(getPlacementImpl(at,lt,rt))})),()=>{ot.forEach(at=>at==null?void 0:at())}}var ARROW_FLOATING_STYLE={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function getPlacementStyles(_e={}){const{placement:_,sameWidth:et,fitViewport:tt,strategy:rt="absolute"}=_e;return{arrow:{position:"absolute",width:cssVars.arrowSize.reference,height:cssVars.arrowSize.reference,[cssVars.arrowSizeHalf.variable]:`calc(${cssVars.arrowSize.reference} / 2)`,[cssVars.arrowOffset.variable]:`calc(${cssVars.arrowSizeHalf.reference} * -1)`},arrowTip:{transform:_?ARROW_FLOATING_STYLE[_.split("-")[0]]:void 0,background:cssVars.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:rt,isolation:"isolate",minWidth:et?void 0:"max-content",width:et?"var(--reference-width)":void 0,maxWidth:tt?"var(--available-width)":void 0,maxHeight:tt?"var(--available-height)":void 0,top:"0px",left:"0px",transform:_?"translate3d(var(--x), var(--y), 0)":"translate3d(0, -100vh, 0)",zIndex:"var(--z-index)"}}}function getWindowFrames(_e){const _={each(et){var tt;for(let rt=0;rt<((tt=_e.frames)==null?void 0:tt.length);rt+=1){const nt=_e.frames[rt];nt&&et(nt)}},addEventListener(et,tt,rt){return _.each(nt=>{try{nt.document.addEventListener(et,tt,rt)}catch{}}),()=>{try{_.removeEventListener(et,tt,rt)}catch{}}},removeEventListener(et,tt,rt){_.each(nt=>{try{nt.document.removeEventListener(et,tt,rt)}catch{}})}};return _}function getParentWindow(_e){const _=_e.frameElement!=null?_e.parent:null;return{addEventListener:(et,tt,rt)=>{try{_==null||_.addEventListener(et,tt,rt)}catch{}return()=>{try{_==null||_.removeEventListener(et,tt,rt)}catch{}}},removeEventListener:(et,tt,rt)=>{try{_==null||_.removeEventListener(et,tt,rt)}catch{}}}}var POINTER_OUTSIDE_EVENT="pointerdown.outside",FOCUS_OUTSIDE_EVENT="focus.outside";function isComposedPathFocusable(_e){for(const _ of _e)if(isHTMLElement$1(_)&&isFocusable$1(_))return!0;return!1}var isPointerEvent=_e=>"clientY"in _e;function isEventPointWithin(_e,_){if(!isPointerEvent(_)||!_e)return!1;const et=_e.getBoundingClientRect();return et.width===0||et.height===0?!1:et.top<=_.clientY&&_.clientY<=et.top+et.height&&et.left<=_.clientX&&_.clientX<=et.left+et.width}function isEventWithinScrollbar(_e,_){if(!_||!isPointerEvent(_e))return!1;const tt=_.scrollHeight>_.clientHeight&&_e.clientX>_.clientWidth,nt=_.scrollWidth>_.clientWidth&&_e.clientY>_.clientHeight;return tt||nt}function trackInteractOutsideImpl(_e,_){const{exclude:et,onFocusOutside:tt,onPointerDownOutside:rt,onInteractOutside:nt,defer:ot}=_;if(!_e)return;const at=getDocument(_e),lt=getWindow$2(_e),ct=getWindowFrames(lt),dt=getParentWindow(lt);function st(mt){const yt=getEventTarget(mt);if(!isHTMLElement$1(yt)||contains(_e,yt)||isEventPointWithin(_e,mt)||isEventWithinScrollbar(mt,yt))return!1;const bt=getNearestOverflowAncestor$1(_e);return isEventWithinScrollbar(mt,bt)?!1:!(et!=null&&et(yt))}const it=new Set;function ut(mt){function yt(){var xt;const bt=ot?raf$1:wt=>wt(),vt=((xt=mt.composedPath)==null?void 0:xt.call(mt))??[mt.target];bt(()=>{if(!(!_e||!st(mt))){if(rt||nt){const wt=callAll(rt,nt);_e.addEventListener(POINTER_OUTSIDE_EVENT,wt,{once:!0})}fireCustomEvent(_e,POINTER_OUTSIDE_EVENT,{bubbles:!1,cancelable:!0,detail:{originalEvent:mt,contextmenu:isContextMenuEvent(mt),focusable:isComposedPathFocusable(vt)}})}})}mt.pointerType==="touch"?(it.forEach(bt=>bt()),it.add(addDomEvent(at,"click",yt,{once:!0})),it.add(dt.addEventListener("click",yt,{once:!0})),it.add(ct.addEventListener("click",yt,{once:!0}))):yt()}const ht=new Set,ft=setTimeout(()=>{ht.add(addDomEvent(at,"pointerdown",ut,!0)),ht.add(dt.addEventListener("pointerdown",ut,!0)),ht.add(ct.addEventListener("pointerdown",ut,!0))},0);function gt(mt){(ot?raf$1:bt=>bt())(()=>{if(!(!_e||!st(mt))){if(tt||nt){const bt=callAll(tt,nt);_e.addEventListener(FOCUS_OUTSIDE_EVENT,bt,{once:!0})}fireCustomEvent(_e,FOCUS_OUTSIDE_EVENT,{bubbles:!1,cancelable:!0,detail:{originalEvent:mt,contextmenu:!1,focusable:isFocusable$1(getEventTarget(mt))}})}})}return ht.add(addDomEvent(at,"focusin",gt,!0)),ht.add(dt.addEventListener("focusin",gt,!0)),ht.add(ct.addEventListener("focusin",gt,!0)),()=>{clearTimeout(ft),it.forEach(mt=>mt()),ht.forEach(mt=>mt())}}function trackInteractOutside(_e,_){const{defer:et}=_,tt=et?raf$1:nt=>nt(),rt=[];return rt.push(tt(()=>{const nt=typeof _e=="function"?_e():_e;rt.push(trackInteractOutsideImpl(nt,_))})),()=>{rt.forEach(nt=>nt==null?void 0:nt())}}function trackEscapeKeydown(_e,_){const et=tt=>{tt.key==="Escape"&&(tt.isComposing||_==null||_(tt))};return addDomEvent(getDocument(_e),"keydown",et,{capture:!0})}var layerStack={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(_e=>_e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(_e){var tt;const _=this.indexOf(_e),et=this.topMostPointerBlockingLayer()?this.indexOf((tt=this.topMostPointerBlockingLayer())==null?void 0:tt.node):-1;return _<et},isTopMost(_e){const _=this.layers[this.count()-1];return(_==null?void 0:_.node)===_e},getNestedLayers(_e){return Array.from(this.layers).slice(this.indexOf(_e)+1)},isInNestedLayer(_e,_){return this.getNestedLayers(_e).some(et=>contains(et.node,_))},isInBranch(_e){return Array.from(this.branches).some(_=>contains(_,_e))},add(_e){const _=this.layers.push(_e);_e.node.style.setProperty("--layer-index",`${_}`)},addBranch(_e){this.branches.push(_e)},remove(_e){const _=this.indexOf(_e);_<0||(_<this.count()-1&&this.getNestedLayers(_e).forEach(tt=>tt.dismiss()),this.layers.splice(_,1),_e.style.removeProperty("--layer-index"))},removeBranch(_e){const _=this.branches.indexOf(_e);_>=0&&this.branches.splice(_,1)},indexOf(_e){return this.layers.findIndex(_=>_.node===_e)},dismiss(_e){var _;(_=this.layers[this.indexOf(_e)])==null||_.dismiss()},clear(){this.remove(this.layers[0].node)}},originalBodyPointerEvents;function assignPointerEventToLayers(){layerStack.layers.forEach(({node:_e})=>{_e.style.pointerEvents=layerStack.isBelowPointerBlockingLayer(_e)?"none":"auto"})}function clearPointerEvent(_e){_e.style.pointerEvents=""}function disablePointerEventsOutside(_e,_){const et=getDocument(_e),tt=[];if(layerStack.hasPointerBlockingLayer()&&!et.body.hasAttribute("data-inert")&&(originalBodyPointerEvents=document.body.style.pointerEvents,queueMicrotask(()=>{et.body.style.pointerEvents="none",et.body.setAttribute("data-inert","")})),_){const rt=waitForElements(_,nt=>{tt.push(setStyle(nt,{pointerEvents:"auto"}))});tt.push(rt)}return()=>{layerStack.hasPointerBlockingLayer()||(queueMicrotask(()=>{et.body.style.pointerEvents=originalBodyPointerEvents,et.body.removeAttribute("data-inert"),et.body.style.length===0&&et.body.removeAttribute("style")}),tt.forEach(rt=>rt()))}}function trackDismissableElementImpl(_e,_){if(!_e){warn("[@zag-js/dismissable] node is `null` or `undefined`");return}const{onDismiss:et,pointerBlocking:tt,exclude:rt,debug:nt}=_,ot={dismiss:et,node:_e,pointerBlocking:tt};layerStack.add(ot),assignPointerEventToLayers();function at(it){var ht,ft;const ut=getEventTarget(it.detail.originalEvent);layerStack.isBelowPointerBlockingLayer(_e)||layerStack.isInBranch(ut)||((ht=_.onPointerDownOutside)==null||ht.call(_,it),(ft=_.onInteractOutside)==null||ft.call(_,it),!it.defaultPrevented&&(nt&&console.log("onPointerDownOutside:",it.detail.originalEvent),et==null||et()))}function lt(it){var ht,ft;const ut=getEventTarget(it.detail.originalEvent);layerStack.isInBranch(ut)||((ht=_.onFocusOutside)==null||ht.call(_,it),(ft=_.onInteractOutside)==null||ft.call(_,it),!it.defaultPrevented&&(nt&&console.log("onFocusOutside:",it.detail.originalEvent),et==null||et()))}function ct(it){var ut;layerStack.isTopMost(_e)&&((ut=_.onEscapeKeyDown)==null||ut.call(_,it),!it.defaultPrevented&&et&&(it.preventDefault(),et()))}function dt(it){var gt;if(!_e)return!1;const ut=typeof rt=="function"?rt():rt,ht=Array.isArray(ut)?ut:[ut],ft=(gt=_.persistentElements)==null?void 0:gt.map(mt=>mt()).filter(isHTMLElement$1);return ft&&ht.push(...ft),ht.some(mt=>contains(mt,it))||layerStack.isInNestedLayer(_e,it)}const st=[tt?disablePointerEventsOutside(_e,_.persistentElements):void 0,trackEscapeKeydown(_e,ct),trackInteractOutside(_e,{exclude:dt,onFocusOutside:lt,onPointerDownOutside:at,defer:_.defer})];return()=>{layerStack.remove(_e),assignPointerEventToLayers(),clearPointerEvent(_e),st.forEach(it=>it==null?void 0:it())}}function trackDismissableElement(_e,_){const{defer:et}=_,tt=et?raf$1:nt=>nt(),rt=[];return rt.push(tt(()=>{const nt=isFunction$1(_e)?_e():_e;rt.push(trackDismissableElementImpl(nt,_))})),()=>{rt.forEach(nt=>nt==null?void 0:nt())}}function trackDismissableBranch(_e,_={}){const{defer:et}=_,tt=et?raf$1:nt=>nt(),rt=[];return rt.push(tt(()=>{const nt=isFunction$1(_e)?_e():_e;if(!nt){warn("[@zag-js/dismissable] branch node is `null` or `undefined`");return}layerStack.addBranch(nt),rt.push(()=>{layerStack.removeBranch(nt)})})),()=>{rt.forEach(nt=>nt==null?void 0:nt())}}var getWindow=_e=>_e.ownerDocument.defaultView||window;function getDescriptor(_e,_){const{type:et="HTMLInputElement",property:tt="value"}=_,rt=getWindow(_e)[et].prototype;return Object.getOwnPropertyDescriptor(rt,tt)??{}}function setElementValue(_e,_,et={}){var rt;(rt=getDescriptor(_e,et).set)==null||rt.call(_e,_),_e.setAttribute("value",_)}function setElementChecked(_e,_){var tt;(tt=getDescriptor(_e,{type:"HTMLInputElement",property:"checked"}).set)==null||tt.call(_e,_),_?_e.setAttribute("checked",""):_e.removeAttribute("checked")}function dispatchInputValueEvent(_e,_){const{value:et,bubbles:tt=!0}=_;if(!_e)return;const rt=getWindow(_e);_e instanceof rt.HTMLInputElement&&(setElementValue(_e,`${et}`),_e.dispatchEvent(new rt.Event("input",{bubbles:tt})))}function dispatchInputCheckedEvent(_e,_){const{checked:et,bubbles:tt=!0}=_;if(!_e)return;const rt=getWindow(_e);_e instanceof rt.HTMLInputElement&&(setElementChecked(_e,et),_e.dispatchEvent(new rt.Event("click",{bubbles:tt})))}function getClosestForm(_e){return isFormElement(_e)?_e.form:_e.closest("form")}function isFormElement(_e){return _e.matches("textarea, input, select, button")}function trackFormReset(_e,_){if(!_e)return;const et=getClosestForm(_e);return et==null||et.addEventListener("reset",_,{passive:!0}),()=>{et==null||et.removeEventListener("reset",_)}}function trackFieldsetDisabled(_e,_){const et=_e==null?void 0:_e.closest("fieldset");if(!et)return;_(et.disabled);const tt=et.ownerDocument.defaultView||window,rt=new tt.MutationObserver(()=>_(et.disabled));return rt.observe(et,{attributes:!0,attributeFilter:["disabled"]}),()=>rt.disconnect()}function trackFormControl(_e,_){if(!_e)return;const{onFieldsetDisabledChange:et,onFormReset:tt}=_,rt=[trackFormReset(_e,tt),trackFieldsetDisabled(_e,et)];return()=>{rt.forEach(nt=>nt==null?void 0:nt())}}var anatomy$j=createAnatomy("color-picker",["root","label","control","trigger","positioner","content","area","areaThumb","valueText","areaBackground","channelSlider","channelSliderLabel","channelSliderTrack","channelSliderThumb","channelSliderValueText","channelInput","transparencyGrid","swatchGroup","swatchTrigger","swatchIndicator","swatch","eyeDropperTrigger","formatTrigger","formatSelect"]);anatomy$j.build();var dom$i=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`color-picker:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`color-picker:${_e.id}:label`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`color-picker:${_e.id}:hidden-input`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`color-picker:${_e.id}:control`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`color-picker:${_e.id}:trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`color-picker:${_e.id}:content`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`color-picker:${_e.id}:positioner`},getFormatSelectId:_e=>{var _;return((_=_e.ids)==null?void 0:_.formatSelect)??`color-picker:${_e.id}:format-select`},getAreaId:_e=>{var _;return((_=_e.ids)==null?void 0:_.area)??`color-picker:${_e.id}:area`},getAreaGradientId:_e=>{var _;return((_=_e.ids)==null?void 0:_.areaGradient)??`color-picker:${_e.id}:area-gradient`},getAreaThumbId:_e=>{var _;return((_=_e.ids)==null?void 0:_.areaThumb)??`color-picker:${_e.id}:area-thumb`},getChannelSliderTrackId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.channelSliderTrack)==null?void 0:tt.call(et,_))??`color-picker:${_e.id}:slider-track:${_}`},getChannelSliderThumbId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.channelSliderThumb)==null?void 0:tt.call(et,_))??`color-picker:${_e.id}:slider-thumb:${_}`},getContentEl:_e=>dom$i.getById(_e,dom$i.getContentId(_e)),getAreaThumbEl:_e=>dom$i.getById(_e,dom$i.getAreaThumbId(_e)),getChannelSliderThumbEl:(_e,_)=>dom$i.getById(_e,dom$i.getChannelSliderThumbId(_e,_)),getChannelInputEl:(_e,_)=>{const et=`input[data-channel="${_}"]`;return[...queryAll(dom$i.getContentEl(_e),et),...queryAll(dom$i.getControlEl(_e),et)]},getFormatSelectEl:_e=>dom$i.getById(_e,dom$i.getFormatSelectId(_e)),getHiddenInputEl:_e=>dom$i.getById(_e,dom$i.getHiddenInputId(_e)),getAreaEl:_e=>dom$i.getById(_e,dom$i.getAreaId(_e)),getAreaValueFromPoint(_e,_){const et=dom$i.getAreaEl(_e);if(!et)return;const{percent:tt}=getRelativePoint(_,et);return tt},getControlEl:_e=>dom$i.getById(_e,dom$i.getControlId(_e)),getTriggerEl:_e=>dom$i.getById(_e,dom$i.getTriggerId(_e)),getPositionerEl:_e=>dom$i.getById(_e,dom$i.getPositionerId(_e)),getChannelSliderTrackEl:(_e,_)=>dom$i.getById(_e,dom$i.getChannelSliderTrackId(_e,_)),getChannelSliderValueFromPoint(_e,_,et){const tt=dom$i.getChannelSliderTrackEl(_e,et);if(!tt)return;const{percent:rt}=getRelativePoint(_,tt);return rt},getChannelInputEls:_e=>[...queryAll(dom$i.getContentEl(_e),"input[data-channel]"),...queryAll(dom$i.getControlEl(_e),"input[data-channel]")]});const[RenderStrategyPropsProvider,useRenderStrategyPropsContext]=createContext({name:"RenderStrategyContext",hookName:"useRenderStrategyContext",providerName:"<RenderStrategyPropsProvider />"}),splitRenderStrategyProps=_e=>createSplitProps()(_e,["lazyMount","unmountOnExit"]);function connect$7(_e,_,et){const tt=_e.matches("mounted","unmountSuspended");return{skip:!_e.context.initial&&tt,present:tt,setNode(rt){rt&&_({type:"NODE.SET",node:rt})},unmount(){_({type:"UNMOUNT"})}}}function machine$6(_e){return createMachine({initial:_e.present?"mounted":"unmounted",context:{node:null,styles:null,unmountAnimationName:null,prevAnimationName:null,present:!1,initial:!1,..._e},exit:["clearInitial","cleanupNode"],watch:{present:["setInitial","syncPresence"]},on:{"NODE.SET":{actions:["setNode","setStyles"]}},states:{mounted:{on:{UNMOUNT:{target:"unmounted",actions:["invokeOnExitComplete"]},"UNMOUNT.SUSPEND":"unmountSuspended"}},unmountSuspended:{activities:["trackAnimationEvents"],after:{ANIMATION_DURATION:{target:"unmounted",actions:["invokeOnExitComplete"]}},on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]},UNMOUNT:{target:"unmounted",actions:["invokeOnExitComplete"]}}},unmounted:{entry:["clearPrevAnimationName"],on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]}}}}},{delays:{ANIMATION_DURATION(_){var et,tt;return parseMs((et=_.styles)==null?void 0:et.animationDuration)+parseMs((tt=_.styles)==null?void 0:tt.animationDelay)+ANIMATION_TIMEOUT_MARGIN}},actions:{setInitial(_){_.initial=!0},clearInitial(_){_.initial=!1},cleanupNode(_){_.node=null,_.styles=null},invokeOnExitComplete(_){var et;(et=_.onExitComplete)==null||et.call(_)},setNode(_,et){_.node=ref$1(et.node)},setStyles(_,et){const tt=et.node.ownerDocument.defaultView||window;_.styles=ref$1(tt.getComputedStyle(et.node))},syncPresence(_,et,{send:tt}){var ot;if(_.present){tt({type:"MOUNT",src:"presence.changed"});return}if(!_.present&&((ot=_.node)==null?void 0:ot.ownerDocument.visibilityState)==="hidden"){tt({type:"UNMOUNT",src:"visibilitychange"});return}const rt=getAnimationName(_.styles);(_.immediate?queueMicrotask:requestAnimationFrame)(()=>{var at,lt;_.unmountAnimationName=rt,rt==="none"||rt===_.prevAnimationName||((at=_.styles)==null?void 0:at.display)==="none"||((lt=_.styles)==null?void 0:lt.animationDuration)==="0s"?tt({type:"UNMOUNT",src:"presence.changed"}):tt({type:"UNMOUNT.SUSPEND"})})},setPrevAnimationName(_){(_.immediate?queueMicrotask:requestAnimationFrame)(()=>{_.prevAnimationName=getAnimationName(_.styles)})},clearPrevAnimationName(_){_.prevAnimationName=null}},activities:{trackAnimationEvents(_,et,{send:tt}){const rt=_.node;if(!rt)return;const nt=at=>{var ct,dt;(((dt=(ct=at.composedPath)==null?void 0:ct.call(at))==null?void 0:dt[0])??at.target)===rt&&(_.prevAnimationName=getAnimationName(_.styles))},ot=at=>{var dt,st;const lt=getAnimationName(_.styles);(((st=(dt=at.composedPath)==null?void 0:dt.call(at))==null?void 0:st[0])??at.target)===rt&&lt===_.unmountAnimationName&&tt({type:"UNMOUNT",src:"animationend"})};return rt.addEventListener("animationstart",nt),rt.addEventListener("animationcancel",ot),rt.addEventListener("animationend",ot),()=>{rt.removeEventListener("animationstart",nt),rt.removeEventListener("animationcancel",ot),rt.removeEventListener("animationend",ot)}}}})}function getAnimationName(_e){return(_e==null?void 0:_e.animationName)||"none"}function parseMs(_e){return parseFloat(_e||"0")*1e3}var ANIMATION_TIMEOUT_MARGIN=16.667;createProps()(["onExitComplete","present","immediate"]);const usePresence=_e=>{const{lazyMount:_,unmountOnExit:et,present:tt,...rt}=_e,nt=reactExports.useRef(!1),ot={...rt,present:tt,onExitComplete:useEvent(_e.onExitComplete)},[at,lt]=useMachine(machine$6(ot),{context:ot}),ct=connect$7(at,lt);ct.present&&(nt.current=!0);const dt=!ct.present&&!nt.current&&_||et&&!ct.present&&nt.current,st=()=>({"data-state":tt?"open":"closed",hidden:!ct.present});return{ref:ct.setNode,getPresenceProps:st,present:ct.present,unmounted:dt}},[DialogProvider,useDialogContext]=createContext({name:"DialogContext",hookName:"useDialogContext",providerName:"<DialogProvider />"}),DialogBackdrop=reactExports.forwardRef((_e,_)=>{const et=useDialogContext(),tt=useRenderStrategyPropsContext(),rt=usePresence({...tt,present:et.open}),nt=mergeProps(et.getBackdropProps(),rt.getPresenceProps(),_e);return rt.unmounted?null:jsxRuntimeExports.jsx(ark.div,{...nt,ref:composeRefs(rt.ref,_)})});DialogBackdrop.displayName="DialogBackdrop";const DialogCloseTrigger=reactExports.forwardRef((_e,_)=>{const et=useDialogContext(),tt=mergeProps(et.getCloseTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});DialogCloseTrigger.displayName="DialogCloseTrigger";const[PresenceProvider,usePresenceContext]=createContext({name:"PresenceContext",hookName:"usePresenceContext",providerName:"<PresenceProvider />"}),DialogContent=reactExports.forwardRef((_e,_)=>{const et=useDialogContext(),tt=usePresenceContext(),rt=mergeProps(et.getContentProps(),tt.getPresenceProps(),_e);return tt.unmounted?null:jsxRuntimeExports.jsx(ark.div,{...rt,ref:composeRefs(tt.ref,_)})});DialogContent.displayName="DialogContent";const DialogDescription=reactExports.forwardRef((_e,_)=>{const et=useDialogContext(),tt=mergeProps(et.getDescriptionProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});DialogDescription.displayName="DialogDescription";const DialogPositioner=reactExports.forwardRef((_e,_)=>{const et=useDialogContext(),tt=mergeProps(et.getPositionerProps(),_e);return usePresenceContext().unmounted?null:jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});DialogPositioner.displayName="DialogPositioner";const splitPresenceProps=_e=>createSplitProps()(_e,["immediate","lazyMount","onExitComplete","present","unmountOnExit"]);var counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=_e=>_e&&(_e.host||unwrapHost(_e.parentNode)),correctTargets=(_e,_)=>_.map(et=>{if(_e.contains(et))return et;const tt=unwrapHost(et);return tt&&_e.contains(tt)?tt:(console.error("[zag-js > ariaHidden] target",et,"in not contained inside",_e,". Doing nothing"),null)}).filter(et=>!!et),isIgnoredNode=_e=>_e.localName==="next-route-announcer"||_e.localName==="script"||_e.hasAttribute("aria-live")?!0:_e.matches("[data-live-announcer]"),walkTreeOutside=(_e,_)=>{const{parentNode:et,markerName:tt,controlAttribute:rt}=_,nt=correctTargets(et,Array.isArray(_e)?_e:[_e]);markerMap[tt]||(markerMap[tt]=new WeakMap);const ot=markerMap[tt],at=[],lt=new Set,ct=new Set(nt),dt=it=>{!it||lt.has(it)||(lt.add(it),dt(it.parentNode))};nt.forEach(dt);const st=it=>{!it||ct.has(it)||Array.prototype.forEach.call(it.children,ut=>{if(lt.has(ut))st(ut);else try{if(isIgnoredNode(ut))return;const ht=ut.getAttribute(rt),ft=ht!==null&&ht!=="false",gt=(counterMap.get(ut)||0)+1,mt=(ot.get(ut)||0)+1;counterMap.set(ut,gt),ot.set(ut,mt),at.push(ut),gt===1&&ft&&uncontrolledNodes.set(ut,!0),mt===1&&ut.setAttribute(tt,""),ft||ut.setAttribute(rt,"")}catch(ht){console.error("[zag-js > ariaHidden] cannot operate on ",ut,ht)}})};return st(et),lt.clear(),lockCount++,()=>{at.forEach(it=>{const ut=counterMap.get(it)-1,ht=ot.get(it)-1;counterMap.set(it,ut),ot.set(it,ht),ut||(uncontrolledNodes.has(it)||it.removeAttribute(rt),uncontrolledNodes.delete(it)),ht||it.removeAttribute(tt)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},getParentNode=_e=>(Array.isArray(_e)?_e[0]:_e).ownerDocument.body,hideOthers=(_e,_=getParentNode(_e),et="data-aria-hidden")=>{if(_)return walkTreeOutside(_e,{parentNode:_,markerName:et,controlAttribute:"aria-hidden"})},raf=_e=>{const _=requestAnimationFrame(()=>_e());return()=>cancelAnimationFrame(_)};function ariaHidden(_e,_={}){const{defer:et=!0}=_,tt=et?raf:nt=>nt(),rt=[];return rt.push(tt(()=>{const ot=(typeof _e=="function"?_e():_e).filter(Boolean);ot.length!==0&&rt.push(hideOthers(ot))})),()=>{rt.forEach(nt=>nt==null?void 0:nt())}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var candidateSelectors=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],candidateSelector=candidateSelectors.join(","),NoElement=typeof Element>"u",matches=NoElement?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,getRootNode=!NoElement&&Element.prototype.getRootNode?function(_e){var _;return _e==null||(_=_e.getRootNode)===null||_===void 0?void 0:_.call(_e)}:function(_e){return _e==null?void 0:_e.ownerDocument},isInert=function _e(_,et){var tt;et===void 0&&(et=!0);var rt=_==null||(tt=_.getAttribute)===null||tt===void 0?void 0:tt.call(_,"inert"),nt=rt===""||rt==="true",ot=nt||et&&_&&_e(_.parentNode);return ot},isContentEditable=function(_){var et,tt=_==null||(et=_.getAttribute)===null||et===void 0?void 0:et.call(_,"contenteditable");return tt===""||tt==="true"},getCandidates=function(_,et,tt){if(isInert(_))return[];var rt=Array.prototype.slice.apply(_.querySelectorAll(candidateSelector));return et&&matches.call(_,candidateSelector)&&rt.unshift(_),rt=rt.filter(tt),rt},getCandidatesIteratively=function _e(_,et,tt){for(var rt=[],nt=Array.from(_);nt.length;){var ot=nt.shift();if(!isInert(ot,!1))if(ot.tagName==="SLOT"){var at=ot.assignedElements(),lt=at.length?at:ot.children,ct=_e(lt,!0,tt);tt.flatten?rt.push.apply(rt,ct):rt.push({scopeParent:ot,candidates:ct})}else{var dt=matches.call(ot,candidateSelector);dt&&tt.filter(ot)&&(et||!_.includes(ot))&&rt.push(ot);var st=ot.shadowRoot||typeof tt.getShadowRoot=="function"&&tt.getShadowRoot(ot),it=!isInert(st,!1)&&(!tt.shadowRootFilter||tt.shadowRootFilter(ot));if(st&&it){var ut=_e(st===!0?ot.children:st.children,!0,tt);tt.flatten?rt.push.apply(rt,ut):rt.push({scopeParent:ot,candidates:ut})}else nt.unshift.apply(nt,ot.children)}}return rt},hasTabIndex=function(_){return!isNaN(parseInt(_.getAttribute("tabindex"),10))},getTabIndex=function(_){if(!_)throw new Error("No node provided");return _.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(_.tagName)||isContentEditable(_))&&!hasTabIndex(_)?0:_.tabIndex},getSortOrderTabIndex=function(_,et){var tt=getTabIndex(_);return tt<0&&et&&!hasTabIndex(_)?0:tt},sortOrderedTabbables=function(_,et){return _.tabIndex===et.tabIndex?_.documentOrder-et.documentOrder:_.tabIndex-et.tabIndex},isInput=function(_){return _.tagName==="INPUT"},isHiddenInput=function(_){return isInput(_)&&_.type==="hidden"},isDetailsWithSummary=function(_){var et=_.tagName==="DETAILS"&&Array.prototype.slice.apply(_.children).some(function(tt){return tt.tagName==="SUMMARY"});return et},getCheckedRadio=function(_,et){for(var tt=0;tt<_.length;tt++)if(_[tt].checked&&_[tt].form===et)return _[tt]},isTabbableRadio=function(_){if(!_.name)return!0;var et=_.form||getRootNode(_),tt=function(at){return et.querySelectorAll('input[type="radio"][name="'+at+'"]')},rt;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")rt=tt(window.CSS.escape(_.name));else try{rt=tt(_.name)}catch(ot){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",ot.message),!1}var nt=getCheckedRadio(rt,_.form);return!nt||nt===_},isRadio=function(_){return isInput(_)&&_.type==="radio"},isNonTabbableRadio=function(_){return isRadio(_)&&!isTabbableRadio(_)},isNodeAttached=function(_){var et,tt=_&&getRootNode(_),rt=(et=tt)===null||et===void 0?void 0:et.host,nt=!1;if(tt&&tt!==_){var ot,at,lt;for(nt=!!((ot=rt)!==null&&ot!==void 0&&(at=ot.ownerDocument)!==null&&at!==void 0&&at.contains(rt)||_!=null&&(lt=_.ownerDocument)!==null&&lt!==void 0&&lt.contains(_));!nt&&rt;){var ct,dt,st;tt=getRootNode(rt),rt=(ct=tt)===null||ct===void 0?void 0:ct.host,nt=!!((dt=rt)!==null&&dt!==void 0&&(st=dt.ownerDocument)!==null&&st!==void 0&&st.contains(rt))}}return nt},isZeroArea=function(_){var et=_.getBoundingClientRect(),tt=et.width,rt=et.height;return tt===0&&rt===0},isHidden=function(_,et){var tt=et.displayCheck,rt=et.getShadowRoot;if(getComputedStyle(_).visibility==="hidden")return!0;var nt=matches.call(_,"details>summary:first-of-type"),ot=nt?_.parentElement:_;if(matches.call(ot,"details:not([open]) *"))return!0;if(!tt||tt==="full"||tt==="legacy-full"){if(typeof rt=="function"){for(var at=_;_;){var lt=_.parentElement,ct=getRootNode(_);if(lt&&!lt.shadowRoot&&rt(lt)===!0)return isZeroArea(_);_.assignedSlot?_=_.assignedSlot:!lt&&ct!==_.ownerDocument?_=ct.host:_=lt}_=at}if(isNodeAttached(_))return!_.getClientRects().length;if(tt!=="legacy-full")return!0}else if(tt==="non-zero-area")return isZeroArea(_);return!1},isDisabledFromFieldset=function(_){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(_.tagName))for(var et=_.parentElement;et;){if(et.tagName==="FIELDSET"&&et.disabled){for(var tt=0;tt<et.children.length;tt++){var rt=et.children.item(tt);if(rt.tagName==="LEGEND")return matches.call(et,"fieldset[disabled] *")?!0:!rt.contains(_)}return!0}et=et.parentElement}return!1},isNodeMatchingSelectorFocusable=function(_,et){return!(et.disabled||isInert(et)||isHiddenInput(et)||isHidden(et,_)||isDetailsWithSummary(et)||isDisabledFromFieldset(et))},isNodeMatchingSelectorTabbable=function(_,et){return!(isNonTabbableRadio(et)||getTabIndex(et)<0||!isNodeMatchingSelectorFocusable(_,et))},isValidShadowRootTabbable=function(_){var et=parseInt(_.getAttribute("tabindex"),10);return!!(isNaN(et)||et>=0)},sortByOrder=function _e(_){var et=[],tt=[];return _.forEach(function(rt,nt){var ot=!!rt.scopeParent,at=ot?rt.scopeParent:rt,lt=getSortOrderTabIndex(at,ot),ct=ot?_e(rt.candidates):at;lt===0?ot?et.push.apply(et,ct):et.push(at):tt.push({documentOrder:nt,tabIndex:lt,item:rt,isScope:ot,content:ct})}),tt.sort(sortOrderedTabbables).reduce(function(rt,nt){return nt.isScope?rt.push.apply(rt,nt.content):rt.push(nt.content),rt},[]).concat(et)},tabbable=function(_,et){et=et||{};var tt;return et.getShadowRoot?tt=getCandidatesIteratively([_],et.includeContainer,{filter:isNodeMatchingSelectorTabbable.bind(null,et),flatten:!1,getShadowRoot:et.getShadowRoot,shadowRootFilter:isValidShadowRootTabbable}):tt=getCandidates(_,et.includeContainer,isNodeMatchingSelectorTabbable.bind(null,et)),sortByOrder(tt)},focusable=function(_,et){et=et||{};var tt;return et.getShadowRoot?tt=getCandidatesIteratively([_],et.includeContainer,{filter:isNodeMatchingSelectorFocusable.bind(null,et),flatten:!0,getShadowRoot:et.getShadowRoot}):tt=getCandidates(_,et.includeContainer,isNodeMatchingSelectorFocusable.bind(null,et)),tt},isTabbable=function(_,et){if(et=et||{},!_)throw new Error("No node provided");return matches.call(_,candidateSelector)===!1?!1:isNodeMatchingSelectorTabbable(et,_)},focusableCandidateSelector=candidateSelectors.concat("iframe").join(","),isFocusable=function(_,et){if(et=et||{},!_)throw new Error("No node provided");return matches.call(_,focusableCandidateSelector)===!1?!1:isNodeMatchingSelectorFocusable(et,_)};/*!
* focus-trap 7.6.2
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function _arrayLikeToArray(_e,_){(_==null||_>_e.length)&&(_=_e.length);for(var et=0,tt=Array(_);et<_;et++)tt[et]=_e[et];return tt}function _arrayWithoutHoles(_e){if(Array.isArray(_e))return _arrayLikeToArray(_e)}function _defineProperty$1(_e,_,et){return(_=_toPropertyKey$1(_))in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _iterableToArray(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ownKeys$1(_e,_){var et=Object.keys(_e);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_e);_&&(tt=tt.filter(function(rt){return Object.getOwnPropertyDescriptor(_e,rt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread2(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$1(Object(et),!0).forEach(function(tt){_defineProperty$1(_e,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(et)):ownKeys$1(Object(et)).forEach(function(tt){Object.defineProperty(_e,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _e}function _toConsumableArray(_e){return _arrayWithoutHoles(_e)||_iterableToArray(_e)||_unsupportedIterableToArray(_e)||_nonIterableSpread()}function _toPrimitive$1(_e,_){if(typeof _e!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(typeof tt!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _toPropertyKey$1(_e){var _=_toPrimitive$1(_e,"string");return typeof _=="symbol"?_:_+""}function _unsupportedIterableToArray(_e,_){if(_e){if(typeof _e=="string")return _arrayLikeToArray(_e,_);var et={}.toString.call(_e).slice(8,-1);return et==="Object"&&_e.constructor&&(et=_e.constructor.name),et==="Map"||et==="Set"?Array.from(_e):et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et)?_arrayLikeToArray(_e,_):void 0}}var activeFocusTraps={activateTrap:function(_,et){if(_.length>0){var tt=_[_.length-1];tt!==et&&tt.pause()}var rt=_.indexOf(et);rt===-1||_.splice(rt,1),_.push(et)},deactivateTrap:function(_,et){var tt=_.indexOf(et);tt!==-1&&_.splice(tt,1),_.length>0&&_[_.length-1].unpause()}},isSelectableInput=function(_){return _.tagName&&_.tagName.toLowerCase()==="input"&&typeof _.select=="function"},isEscapeEvent=function(_){return(_==null?void 0:_.key)==="Escape"||(_==null?void 0:_.key)==="Esc"||(_==null?void 0:_.keyCode)===27},isTabEvent=function(_){return(_==null?void 0:_.key)==="Tab"||(_==null?void 0:_.keyCode)===9},isKeyForward=function(_){return isTabEvent(_)&&!_.shiftKey},isKeyBackward=function(_){return isTabEvent(_)&&_.shiftKey},delay=function(_){return setTimeout(_,0)},valueOrHandler=function(_){for(var et=arguments.length,tt=new Array(et>1?et-1:0),rt=1;rt<et;rt++)tt[rt-1]=arguments[rt];return typeof _=="function"?_.apply(void 0,tt):_},getActualTarget=function(_){return _.target.shadowRoot&&typeof _.composedPath=="function"?_.composedPath()[0]:_.target},internalTrapStack=[],createFocusTrap=function(_,et){var tt=(et==null?void 0:et.document)||document,rt=(et==null?void 0:et.trapStack)||internalTrapStack,nt=_objectSpread2({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward,isKeyBackward},et),ot={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},at,lt=function(At,Ct,$t){return At&&At[Ct]!==void 0?At[Ct]:nt[$t||Ct]},ct=function(At,Ct){var $t=typeof(Ct==null?void 0:Ct.composedPath)=="function"?Ct.composedPath():void 0;return ot.containerGroups.findIndex(function(Mt){var Dt=Mt.container,Nt=Mt.tabbableNodes;return Dt.contains(At)||($t==null?void 0:$t.includes(Dt))||Nt.find(function(Bt){return Bt===At})})},dt=function(At){var Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$t=Ct.hasFallback,Mt=$t===void 0?!1:$t,Dt=Ct.params,Nt=Dt===void 0?[]:Dt,Bt=nt[At];if(typeof Bt=="function"&&(Bt=Bt.apply(void 0,_toConsumableArray(Nt))),Bt===!0&&(Bt=void 0),!Bt){if(Bt===void 0||Bt===!1)return Bt;throw new Error("`".concat(At,"` was specified but was not a node, or did not return a node"))}var Ut=Bt;if(typeof Bt=="string"){try{Ut=tt.querySelector(Bt)}catch(Vt){throw new Error("`".concat(At,'` appears to be an invalid selector; error="').concat(Vt.message,'"'))}if(!Ut&&!Mt)throw new Error("`".concat(At,"` as selector refers to no known node"))}return Ut},st=function(){var At=dt("initialFocus",{hasFallback:!0});if(At===!1)return!1;if(At===void 0||At&&!isFocusable(At,nt.tabbableOptions))if(ct(tt.activeElement)>=0)At=tt.activeElement;else{var Ct=ot.tabbableGroups[0],$t=Ct&&Ct.firstTabbableNode;At=$t||dt("fallbackFocus")}else At===null&&(At=dt("fallbackFocus"));if(!At)throw new Error("Your focus-trap needs to have at least one focusable element");return At},it=function(){if(ot.containerGroups=ot.containers.map(function(At){var Ct=tabbable(At,nt.tabbableOptions),$t=focusable(At,nt.tabbableOptions),Mt=Ct.length>0?Ct[0]:void 0,Dt=Ct.length>0?Ct[Ct.length-1]:void 0,Nt=$t.find(function(Vt){return isTabbable(Vt)}),Bt=$t.slice().reverse().find(function(Vt){return isTabbable(Vt)}),Ut=!!Ct.find(function(Vt){return getTabIndex(Vt)>0});return{container:At,tabbableNodes:Ct,focusableNodes:$t,posTabIndexesFound:Ut,firstTabbableNode:Mt,lastTabbableNode:Dt,firstDomTabbableNode:Nt,lastDomTabbableNode:Bt,nextTabbableNode:function(Jt){var lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,nr=Ct.indexOf(Jt);return nr<0?lr?$t.slice($t.indexOf(Jt)+1).find(function(ir){return isTabbable(ir)}):$t.slice(0,$t.indexOf(Jt)).reverse().find(function(ir){return isTabbable(ir)}):Ct[nr+(lr?1:-1)]}}}),ot.tabbableGroups=ot.containerGroups.filter(function(At){return At.tabbableNodes.length>0}),ot.tabbableGroups.length<=0&&!dt("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(ot.containerGroups.find(function(At){return At.posTabIndexesFound})&&ot.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},ut=function(At){var Ct=At.activeElement;if(Ct)return Ct.shadowRoot&&Ct.shadowRoot.activeElement!==null?ut(Ct.shadowRoot):Ct},ht=function(At){if(At!==!1&&At!==ut(document)){if(!At||!At.focus){ht(st());return}At.focus({preventScroll:!!nt.preventScroll}),ot.mostRecentlyFocusedNode=At,isSelectableInput(At)&&At.select()}},ft=function(At){var Ct=dt("setReturnFocus",{params:[At]});return Ct||(Ct===!1?!1:At)},gt=function(At){var Ct=At.target,$t=At.event,Mt=At.isBackward,Dt=Mt===void 0?!1:Mt;Ct=Ct||getActualTarget($t),it();var Nt=null;if(ot.tabbableGroups.length>0){var Bt=ct(Ct,$t),Ut=Bt>=0?ot.containerGroups[Bt]:void 0;if(Bt<0)Dt?Nt=ot.tabbableGroups[ot.tabbableGroups.length-1].lastTabbableNode:Nt=ot.tabbableGroups[0].firstTabbableNode;else if(Dt){var Vt=ot.tabbableGroups.findIndex(function(hr){var Zt=hr.firstTabbableNode;return Ct===Zt});if(Vt<0&&(Ut.container===Ct||isFocusable(Ct,nt.tabbableOptions)&&!isTabbable(Ct,nt.tabbableOptions)&&!Ut.nextTabbableNode(Ct,!1))&&(Vt=Bt),Vt>=0){var Jt=Vt===0?ot.tabbableGroups.length-1:Vt-1,lr=ot.tabbableGroups[Jt];Nt=getTabIndex(Ct)>=0?lr.lastTabbableNode:lr.lastDomTabbableNode}else isTabEvent($t)||(Nt=Ut.nextTabbableNode(Ct,!1))}else{var nr=ot.tabbableGroups.findIndex(function(hr){var Zt=hr.lastTabbableNode;return Ct===Zt});if(nr<0&&(Ut.container===Ct||isFocusable(Ct,nt.tabbableOptions)&&!isTabbable(Ct,nt.tabbableOptions)&&!Ut.nextTabbableNode(Ct))&&(nr=Bt),nr>=0){var ir=nr===ot.tabbableGroups.length-1?0:nr+1,cr=ot.tabbableGroups[ir];Nt=getTabIndex(Ct)>=0?cr.firstTabbableNode:cr.firstDomTabbableNode}else isTabEvent($t)||(Nt=Ut.nextTabbableNode(Ct))}}else Nt=dt("fallbackFocus");return Nt},mt=function(At){var Ct=getActualTarget(At);if(!(ct(Ct,At)>=0)){if(valueOrHandler(nt.clickOutsideDeactivates,At)){at.deactivate({returnFocus:nt.returnFocusOnDeactivate});return}valueOrHandler(nt.allowOutsideClick,At)||At.preventDefault()}},yt=function(At){var Ct=getActualTarget(At),$t=ct(Ct,At)>=0;if($t||Ct instanceof Document)$t&&(ot.mostRecentlyFocusedNode=Ct);else{At.stopImmediatePropagation();var Mt,Dt=!0;if(ot.mostRecentlyFocusedNode)if(getTabIndex(ot.mostRecentlyFocusedNode)>0){var Nt=ct(ot.mostRecentlyFocusedNode),Bt=ot.containerGroups[Nt].tabbableNodes;if(Bt.length>0){var Ut=Bt.findIndex(function(Vt){return Vt===ot.mostRecentlyFocusedNode});Ut>=0&&(nt.isKeyForward(ot.recentNavEvent)?Ut+1<Bt.length&&(Mt=Bt[Ut+1],Dt=!1):Ut-1>=0&&(Mt=Bt[Ut-1],Dt=!1))}}else ot.containerGroups.some(function(Vt){return Vt.tabbableNodes.some(function(Jt){return getTabIndex(Jt)>0})})||(Dt=!1);else Dt=!1;Dt&&(Mt=gt({target:ot.mostRecentlyFocusedNode,isBackward:nt.isKeyBackward(ot.recentNavEvent)})),ht(Mt||ot.mostRecentlyFocusedNode||st())}ot.recentNavEvent=void 0},bt=function(At){var Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;ot.recentNavEvent=At;var $t=gt({event:At,isBackward:Ct});$t&&(isTabEvent(At)&&At.preventDefault(),ht($t))},vt=function(At){(nt.isKeyForward(At)||nt.isKeyBackward(At))&&bt(At,nt.isKeyBackward(At))},xt=function(At){isEscapeEvent(At)&&valueOrHandler(nt.escapeDeactivates,At)!==!1&&(At.preventDefault(),at.deactivate())},wt=function(At){var Ct=getActualTarget(At);ct(Ct,At)>=0||valueOrHandler(nt.clickOutsideDeactivates,At)||valueOrHandler(nt.allowOutsideClick,At)||(At.preventDefault(),At.stopImmediatePropagation())},St=function(){if(ot.active)return activeFocusTraps.activateTrap(rt,at),ot.delayInitialFocusTimer=nt.delayInitialFocus?delay(function(){ht(st())}):ht(st()),tt.addEventListener("focusin",yt,!0),tt.addEventListener("mousedown",mt,{capture:!0,passive:!1}),tt.addEventListener("touchstart",mt,{capture:!0,passive:!1}),tt.addEventListener("click",wt,{capture:!0,passive:!1}),tt.addEventListener("keydown",vt,{capture:!0,passive:!1}),tt.addEventListener("keydown",xt),at},Et=function(){if(ot.active)return tt.removeEventListener("focusin",yt,!0),tt.removeEventListener("mousedown",mt,!0),tt.removeEventListener("touchstart",mt,!0),tt.removeEventListener("click",wt,!0),tt.removeEventListener("keydown",vt,!0),tt.removeEventListener("keydown",xt),at},_t=function(At){var Ct=At.some(function($t){var Mt=Array.from($t.removedNodes);return Mt.some(function(Dt){return Dt===ot.mostRecentlyFocusedNode})});Ct&&ht(st())},Tt=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(_t):void 0,Rt=function(){Tt&&(Tt.disconnect(),ot.active&&!ot.paused&&ot.containers.map(function(At){Tt.observe(At,{subtree:!0,childList:!0})}))};return at={get active(){return ot.active},get paused(){return ot.paused},activate:function(At){if(ot.active)return this;var Ct=lt(At,"onActivate"),$t=lt(At,"onPostActivate"),Mt=lt(At,"checkCanFocusTrap");Mt||it(),ot.active=!0,ot.paused=!1,ot.nodeFocusedBeforeActivation=tt.activeElement,Ct==null||Ct();var Dt=function(){Mt&&it(),St(),Rt(),$t==null||$t()};return Mt?(Mt(ot.containers.concat()).then(Dt,Dt),this):(Dt(),this)},deactivate:function(At){if(!ot.active)return this;var Ct=_objectSpread2({onDeactivate:nt.onDeactivate,onPostDeactivate:nt.onPostDeactivate,checkCanReturnFocus:nt.checkCanReturnFocus},At);clearTimeout(ot.delayInitialFocusTimer),ot.delayInitialFocusTimer=void 0,Et(),ot.active=!1,ot.paused=!1,Rt(),activeFocusTraps.deactivateTrap(rt,at);var $t=lt(Ct,"onDeactivate"),Mt=lt(Ct,"onPostDeactivate"),Dt=lt(Ct,"checkCanReturnFocus"),Nt=lt(Ct,"returnFocus","returnFocusOnDeactivate");$t==null||$t();var Bt=function(){delay(function(){Nt&&ht(ft(ot.nodeFocusedBeforeActivation)),Mt==null||Mt()})};return Nt&&Dt?(Dt(ft(ot.nodeFocusedBeforeActivation)).then(Bt,Bt),this):(Bt(),this)},pause:function(At){if(ot.paused||!ot.active)return this;var Ct=lt(At,"onPause"),$t=lt(At,"onPostPause");return ot.paused=!0,Ct==null||Ct(),Et(),Rt(),$t==null||$t(),this},unpause:function(At){if(!ot.paused||!ot.active)return this;var Ct=lt(At,"onUnpause"),$t=lt(At,"onPostUnpause");return ot.paused=!1,Ct==null||Ct(),it(),St(),Rt(),$t==null||$t(),this},updateContainerElements:function(At){var Ct=[].concat(At).filter(Boolean);return ot.containers=Ct.map(function($t){return typeof $t=="string"?tt.querySelector($t):$t}),ot.active&&it(),Rt(),this}},at.updateContainerElements(_),at};function trapFocus(_e,_={}){let et;return raf$1(()=>{const tt=typeof _e=="function"?_e():_e;if(tt){et=createFocusTrap(tt,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,delayInitialFocus:!1,fallbackFocus:tt,..._,document:getDocument(tt)});try{et.activate()}catch{}}}),function(){et==null||et.deactivate()}}var LOCK_CLASSNAME="data-scroll-lock";function assignStyle(_e,_){if(!_e)return;const et=Object.keys(_).reduce((tt,rt)=>(tt[rt]=_e.style.getPropertyValue(rt),tt),{});return Object.assign(_e.style,_),()=>{Object.assign(_e.style,et)}}function setCSSProperty(_e,_,et){if(!_e)return;const tt=_e.style.getPropertyValue(_);return _e.style.setProperty(_,et),()=>{tt?_e.style.setProperty(_,tt):_e.style.removeProperty(_)}}function getPaddingProperty(_e){const _=_e.getBoundingClientRect().left;return Math.round(_)+_e.scrollLeft?"paddingLeft":"paddingRight"}function preventBodyScroll(_e){const _=_e??document,et=_.defaultView??window,{documentElement:tt,body:rt}=_;if(rt.hasAttribute(LOCK_CLASSNAME))return;rt.setAttribute(LOCK_CLASSNAME,"");const ot=et.innerWidth-tt.clientWidth,at=()=>setCSSProperty(tt,"--scrollbar-width",`${ot}px`),lt=getPaddingProperty(tt),ct=()=>assignStyle(rt,{overflow:"hidden",[lt]:`${ot}px`}),dt=()=>{const{scrollX:it,scrollY:ut,visualViewport:ht}=et,ft=(ht==null?void 0:ht.offsetLeft)??0,gt=(ht==null?void 0:ht.offsetTop)??0,mt=assignStyle(rt,{position:"fixed",overflow:"hidden",top:`${-(ut-Math.floor(gt))}px`,left:`${-(it-Math.floor(ft))}px`,right:"0",[lt]:`${ot}px`});return()=>{mt==null||mt(),et.scrollTo({left:it,top:ut,behavior:"instant"})}},st=[at(),isIos()?dt():ct()];return()=>{st.forEach(it=>it==null?void 0:it()),rt.removeAttribute(LOCK_CLASSNAME)}}var anatomy$i=createAnatomy("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),parts$7=anatomy$i.build(),dom$h=createScope({getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`dialog:${_e.id}:positioner`},getBackdropId:_e=>{var _;return((_=_e.ids)==null?void 0:_.backdrop)??`dialog:${_e.id}:backdrop`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`dialog:${_e.id}:content`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`dialog:${_e.id}:trigger`},getTitleId:_e=>{var _;return((_=_e.ids)==null?void 0:_.title)??`dialog:${_e.id}:title`},getDescriptionId:_e=>{var _;return((_=_e.ids)==null?void 0:_.description)??`dialog:${_e.id}:description`},getCloseTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.closeTrigger)??`dialog:${_e.id}:close`},getContentEl:_e=>dom$h.getById(_e,dom$h.getContentId(_e)),getPositionerEl:_e=>dom$h.getById(_e,dom$h.getPositionerId(_e)),getBackdropEl:_e=>dom$h.getById(_e,dom$h.getBackdropId(_e)),getTriggerEl:_e=>dom$h.getById(_e,dom$h.getTriggerId(_e)),getTitleEl:_e=>dom$h.getById(_e,dom$h.getTitleId(_e)),getDescriptionEl:_e=>dom$h.getById(_e,dom$h.getDescriptionId(_e)),getCloseTriggerEl:_e=>dom$h.getById(_e,dom$h.getCloseTriggerId(_e))});function connect$6(_e,_,et){const tt=_e.context["aria-label"],rt=_e.matches("open"),nt=_e.context.renderedElements;return{open:rt,setOpen(ot){ot!==rt&&_(ot?"OPEN":"CLOSE")},getTriggerProps(){return et.button({...parts$7.trigger.attrs,dir:_e.context.dir,id:dom$h.getTriggerId(_e.context),"aria-haspopup":"dialog",type:"button","aria-expanded":rt,"data-state":rt?"open":"closed","aria-controls":dom$h.getContentId(_e.context),onClick(ot){ot.defaultPrevented||_("TOGGLE")}})},getBackdropProps(){return et.element({...parts$7.backdrop.attrs,dir:_e.context.dir,hidden:!rt,id:dom$h.getBackdropId(_e.context),"data-state":rt?"open":"closed"})},getPositionerProps(){return et.element({...parts$7.positioner.attrs,dir:_e.context.dir,id:dom$h.getPositionerId(_e.context),style:{pointerEvents:rt?void 0:"none"}})},getContentProps(){return et.element({...parts$7.content.attrs,dir:_e.context.dir,role:_e.context.role,hidden:!rt,id:dom$h.getContentId(_e.context),tabIndex:-1,"data-state":rt?"open":"closed","aria-modal":!0,"aria-label":tt||void 0,"aria-labelledby":tt||!nt.title?void 0:dom$h.getTitleId(_e.context),"aria-describedby":nt.description?dom$h.getDescriptionId(_e.context):void 0})},getTitleProps(){return et.element({...parts$7.title.attrs,dir:_e.context.dir,id:dom$h.getTitleId(_e.context)})},getDescriptionProps(){return et.element({...parts$7.description.attrs,dir:_e.context.dir,id:dom$h.getDescriptionId(_e.context)})},getCloseTriggerProps(){return et.button({...parts$7.closeTrigger.attrs,dir:_e.context.dir,id:dom$h.getCloseTriggerId(_e.context),type:"button",onClick(ot){ot.defaultPrevented||(ot.stopPropagation(),_("CLOSE"))}})}}}function machine$5(_e){const _=compact$2(_e);return createMachine({id:"dialog",initial:_.open?"open":"closed",context:{role:"dialog",renderedElements:{title:!0,description:!0},modal:!0,trapFocus:!0,preventScroll:!0,closeOnInteractOutside:!0,closeOnEscape:!0,restoreFocus:!0,..._},created:["setAlertDialogProps"],watch:{open:["toggleVisibility"]},states:{open:{entry:["checkRenderedElements","syncZIndex"],activities:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed"},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}}},{guards:{isOpenControlled:et=>!!et["open.controlled"]},activities:{trackDismissableElement(et,tt,{send:rt}){return trackDismissableElement(()=>dom$h.getContentEl(et),{defer:!0,pointerBlocking:et.modal,exclude:[dom$h.getTriggerEl(et)],onInteractOutside(ot){var at;(at=et.onInteractOutside)==null||at.call(et,ot),et.closeOnInteractOutside||ot.preventDefault()},persistentElements:et.persistentElements,onFocusOutside:et.onFocusOutside,onPointerDownOutside:et.onPointerDownOutside,onEscapeKeyDown(ot){var at;(at=et.onEscapeKeyDown)==null||at.call(et,ot),et.closeOnEscape||ot.preventDefault()},onDismiss(){rt({type:"CLOSE",src:"interact-outside"})}})},preventScroll(et){if(et.preventScroll)return preventBodyScroll(dom$h.getDoc(et))},trapFocus(et){return!et.trapFocus||!et.modal?void 0:trapFocus(()=>dom$h.getContentEl(et),{preventScroll:!0,returnFocusOnDeactivate:!!et.restoreFocus,initialFocus:et.initialFocusEl,setReturnFocus:rt=>{var nt;return((nt=et.finalFocusEl)==null?void 0:nt.call(et))??rt}})},hideContentBelow(et){return et.modal?ariaHidden(()=>[dom$h.getContentEl(et)],{defer:!0}):void 0}},actions:{setAlertDialogProps(et){et.role==="alertdialog"&&(et.initialFocusEl||(et.initialFocusEl=()=>dom$h.getCloseTriggerEl(et)),et.closeOnInteractOutside=!1)},checkRenderedElements(et){raf$1(()=>{et.renderedElements.title=!!dom$h.getTitleEl(et),et.renderedElements.description=!!dom$h.getDescriptionEl(et)})},syncZIndex(et){raf$1(()=>{const tt=dom$h.getContentEl(et);if(!tt)return;const nt=dom$h.getWin(et).getComputedStyle(tt);[dom$h.getPositionerEl(et),dom$h.getBackdropEl(et)].forEach(at=>{at==null||at.style.setProperty("--z-index",nt.zIndex)})})},invokeOnClose(et){var tt;(tt=et.onOpenChange)==null||tt.call(et,{open:!1})},invokeOnOpen(et){var tt;(tt=et.onOpenChange)==null||tt.call(et,{open:!0})},toggleVisibility(et,tt,{send:rt}){rt({type:et.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:tt})}}})}createProps()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]);const useDialog=(_e={})=>{const{getRootNode:_}=useEnvironmentContext(),{dir:et}=useLocaleContext(),tt={id:reactExports.useId(),getRootNode:_,dir:et,open:_e.defaultOpen,"open.controlled":_e.open!==void 0,..._e},rt={...tt,open:_e.open,onOpenChange:useEvent(_e.onOpenChange,{sync:!0}),onEscapeKeyDown:useEvent(_e.onEscapeKeyDown),onInteractOutside:useEvent(_e.onInteractOutside)},[nt,ot]=useMachine(machine$5(tt),{context:rt});return connect$6(nt,ot,normalizeProps)},DialogRoot=_e=>{const[_,{children:et,...tt}]=splitPresenceProps(_e),[rt]=splitRenderStrategyProps(_),nt=useDialog(tt),ot=usePresence(mergeProps({present:nt.open},_));return jsxRuntimeExports.jsx(DialogProvider,{value:nt,children:jsxRuntimeExports.jsx(RenderStrategyPropsProvider,{value:rt,children:jsxRuntimeExports.jsx(PresenceProvider,{value:ot,children:et})})})},DialogRootProvider=_e=>{const[_,{value:et,children:tt}]=splitPresenceProps(_e),[rt]=splitRenderStrategyProps(_),nt=usePresence(mergeProps({present:et.open},_));return jsxRuntimeExports.jsx(DialogProvider,{value:et,children:jsxRuntimeExports.jsx(RenderStrategyPropsProvider,{value:rt,children:jsxRuntimeExports.jsx(PresenceProvider,{value:nt,children:tt})})})},DialogTitle=reactExports.forwardRef((_e,_)=>{const et=useDialogContext(),tt=mergeProps(et.getTitleProps(),_e);return jsxRuntimeExports.jsx(ark.h2,{...tt,ref:_})});DialogTitle.displayName="DialogTitle";const DialogTrigger=reactExports.forwardRef((_e,_)=>{const et=useDialogContext(),tt=usePresenceContext(),rt=mergeProps({...et.getTriggerProps(),"aria-controls":tt.unmounted?void 0:et.getTriggerProps()["aria-controls"]},_e);return jsxRuntimeExports.jsx(ark.button,{...rt,ref:_})});DialogTrigger.displayName="DialogTrigger";const[FieldProvider,useFieldContext]=createContext({name:"FieldContext",hookName:"useFieldContext",providerName:"<FieldProvider />",strict:!1});var anatomy$h=createAnatomy("editable").parts("root","area","label","preview","input","editTrigger","submitTrigger","cancelTrigger","control");anatomy$h.build();var dom$g=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`editable:${_e.id}`},getAreaId:_e=>{var _;return((_=_e.ids)==null?void 0:_.area)??`editable:${_e.id}:area`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`editable:${_e.id}:label`},getPreviewId:_e=>{var _;return((_=_e.ids)==null?void 0:_.preview)??`editable:${_e.id}:preview`},getInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.input)??`editable:${_e.id}:input`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`editable:${_e.id}:control`},getSubmitTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.submitTrigger)??`editable:${_e.id}:submit`},getCancelTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.cancelTrigger)??`editable:${_e.id}:cancel`},getEditTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.editTrigger)??`editable:${_e.id}:edit`},getInputEl:_e=>dom$g.getById(_e,dom$g.getInputId(_e)),getPreviewEl:_e=>dom$g.getById(_e,dom$g.getPreviewId(_e)),getSubmitTriggerEl:_e=>dom$g.getById(_e,dom$g.getSubmitTriggerId(_e)),getCancelTriggerEl:_e=>dom$g.getById(_e,dom$g.getCancelTriggerId(_e)),getEditTriggerEl:_e=>dom$g.getById(_e,dom$g.getEditTriggerId(_e))});createProps()(["activationMode","autoResize","dir","disabled","finalFocusEl","form","getRootNode","id","ids","invalid","maxLength","name","onEditChange","onFocusOutside","onInteractOutside","onPointerDownOutside","onValueChange","onValueCommit","onValueRevert","placeholder","readOnly","required","selectOnFocus","edit","edit.controlled","submitMode","translations","value"]);const FieldErrorText$1=reactExports.forwardRef((_e,_)=>{const et=useFieldContext(),tt=mergeProps(et.getErrorTextProps(),_e);return et!=null&&et.invalid?jsxRuntimeExports.jsx(ark.span,{...tt,ref:_}):null});FieldErrorText$1.displayName="FieldErrorText";const FieldHelperText$1=reactExports.forwardRef((_e,_)=>{const et=useFieldContext(),tt=mergeProps(et==null?void 0:et.getHelperTextProps(),_e);return jsxRuntimeExports.jsx(ark.span,{...tt,ref:_})});FieldHelperText$1.displayName="FieldHelperText";const FieldInput=reactExports.forwardRef((_e,_)=>{const et=useFieldContext(),tt=mergeProps(et==null?void 0:et.getInputProps(),_e);return jsxRuntimeExports.jsx(ark.input,{...tt,ref:_})});FieldInput.displayName="FieldInput";const FieldLabel$1=reactExports.forwardRef((_e,_)=>{const et=useFieldContext(),tt=mergeProps(et==null?void 0:et.getLabelProps(),_e);return jsxRuntimeExports.jsx(ark.label,{...tt,ref:_})});FieldLabel$1.displayName="FieldLabel";const useSafeLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,[FieldsetProvider,useFieldsetContext]=createContext({name:"FieldsetContext",hookName:"useFieldsetContext",providerName:"<FieldsetProvider />",strict:!1}),fieldAnatomy$1=createAnatomy("field").parts("root","errorText","helperText","input","label","select","textarea","requiredIndicator"),parts$6=fieldAnatomy$1.build(),useField=_e=>{const _=useFieldsetContext(),{ids:et,disabled:tt=!!(_!=null&&_.disabled),invalid:rt=!1,readOnly:nt=!1,required:ot=!1}=_e,at=reactExports.useRef(!1),lt=reactExports.useRef(!1),ct=_e.id??reactExports.useId(),dt=reactExports.useRef(null),st=(et==null?void 0:et.control)??`field::${ct}`,it=(et==null?void 0:et.errorText)??`field::${ct}::error-text`,ut=(et==null?void 0:et.helperText)??`field::${ct}::helper-text`,ht=(et==null?void 0:et.label)??`field::${ct}::label`;useSafeLayoutEffect(()=>{const _t=dt.current;if(!_t)return;const Tt=getWindow$2(_t),Rt=Tt.document,Ot=()=>{at.current=!!Rt.getElementById(it),lt.current=!!Rt.getElementById(ut)};Ot();const At=new Tt.MutationObserver(Ot);return At.observe(_t,{childList:!0,subtree:!0}),()=>At.disconnect()},[it,ut]);const ft=reactExports.useMemo(()=>{const _t=[];return at.current&&rt&&_t.push(it),lt.current&&_t.push(ut),_t.join(" ")||void 0},[rt,it,ut]),gt=reactExports.useMemo(()=>()=>({...parts$6.root.attrs,id:st,ref:dt,role:"group","data-disabled":dataAttr$1(tt),"data-invalid":dataAttr$1(rt),"data-readonly":dataAttr$1(nt)}),[tt,rt,nt,st]),mt=reactExports.useMemo(()=>()=>({...parts$6.label.attrs,id:ht,"data-disabled":dataAttr$1(tt),"data-invalid":dataAttr$1(rt),"data-readonly":dataAttr$1(nt),htmlFor:ct}),[tt,rt,nt,ct,ht]),yt=reactExports.useMemo(()=>()=>({"aria-describedby":ft,"aria-invalid":ariaAttr(rt),"data-invalid":dataAttr$1(rt),"data-required":dataAttr$1(ot),"data-readonly":dataAttr$1(nt),id:ct,required:ot,disabled:tt,readOnly:nt}),[ft,rt,ot,nt,ct,tt]),bt=reactExports.useMemo(()=>()=>({...yt(),...parts$6.input.attrs}),[yt]),vt=reactExports.useMemo(()=>()=>({...yt(),...parts$6.textarea.attrs}),[yt]),xt=reactExports.useMemo(()=>()=>({...yt(),...parts$6.select.attrs}),[yt]),wt=reactExports.useMemo(()=>()=>({id:ut,...parts$6.helperText.attrs}),[ut]),St=reactExports.useMemo(()=>()=>({id:it,...parts$6.errorText.attrs,"aria-live":"polite"}),[it]),Et=reactExports.useMemo(()=>()=>({"aria-hidden":!0,...parts$6.requiredIndicator.attrs}),[]);return{ariaDescribedby:ft,ids:{root:st,control:ct,label:ht,errorText:it,helperText:ut},refs:{rootRef:dt},disabled:tt,invalid:rt,readOnly:nt,required:ot,getLabelProps:mt,getRootProps:gt,getInputProps:bt,getTextareaProps:vt,getSelectProps:xt,getHelperTextProps:wt,getErrorTextProps:St,getRequiredIndicatorProps:Et}},FieldRoot$1=reactExports.forwardRef((_e,_)=>{const[et,tt]=createSplitProps()(_e,["id","ids","disabled","invalid","readOnly","required"]),rt=useField(et),nt=mergeProps(rt.getRootProps(),tt);return jsxRuntimeExports.jsx(FieldProvider,{value:rt,children:jsxRuntimeExports.jsx(ark.div,{...nt,ref:composeRefs(_,rt.refs.rootRef)})})});FieldRoot$1.displayName="FieldRoot";var autoresizeTextarea=_e=>{var ct;if(!_e)return;const _=getComputedStyle$2(_e),et=getWindow$2(_e),tt=getDocument(_e),rt=()=>{_e.style.height="auto";const dt=parseInt(_.borderTopWidth,10),st=parseInt(_.borderBottomWidth,10);_e.style.height=`${_e.scrollHeight+dt+st}px`};_e.addEventListener("input",rt);const nt=Object.getPrototypeOf(_e),ot=Object.getOwnPropertyDescriptor(nt,"value");Object.defineProperty(_e,"value",{...ot,set(){var dt;(dt=ot==null?void 0:ot.set)==null||dt.apply(this,arguments),rt()}});const at=new et.ResizeObserver(()=>rt());at.observe(_e);const lt=new et.MutationObserver(()=>rt());return lt.observe(_e,{attributes:!0,attributeFilter:["rows","placeholder"]}),(ct=tt.fonts)==null||ct.addEventListener("loadingdone",rt),()=>{var dt;_e.removeEventListener("input",rt),(dt=tt.fonts)==null||dt.removeEventListener("loadingdone",rt),at.disconnect(),lt.disconnect()}};const FieldTextarea=reactExports.forwardRef((_e,_)=>{const{autoresize:et,...tt}=_e,rt=reactExports.useRef(null),nt=useFieldContext(),ot=mergeProps(nt==null?void 0:nt.getTextareaProps(),{style:{resize:et?"none":void 0}},tt);return reactExports.useEffect(()=>{if(et)return autoresizeTextarea(rt.current)},[et]),jsxRuntimeExports.jsx(ark.textarea,{...ot,ref:composeRefs(_,rt)})});FieldTextarea.displayName="FieldTextarea";const fieldsetAnatomy$1=createAnatomy("fieldset").parts("root","errorText","helperText","legend");fieldsetAnatomy$1.build();var anatomy$g=createAnatomy("file-upload").parts("root","dropzone","item","itemDeleteTrigger","itemGroup","itemName","itemPreview","itemPreviewImage","itemSizeText","label","trigger","clearTrigger");anatomy$g.build();var dom$f=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`file:${_e.id}`},getDropzoneId:_e=>{var _;return((_=_e.ids)==null?void 0:_.dropzone)??`file:${_e.id}:dropzone`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`file:${_e.id}:input`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`file:${_e.id}:trigger`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`file:${_e.id}:label`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`file:${_e.id}:item:${_}`},getItemNameId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemName)==null?void 0:tt.call(et,_))??`file:${_e.id}:item-name:${_}`},getItemSizeTextId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemSizeText)==null?void 0:tt.call(et,_))??`file:${_e.id}:item-size:${_}`},getItemPreviewId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemPreview)==null?void 0:tt.call(et,_))??`file:${_e.id}:item-preview:${_}`},getHiddenInputEl:_e=>dom$f.getById(_e,dom$f.getHiddenInputId(_e)),getDropzoneEl:_e=>dom$f.getById(_e,dom$f.getDropzoneId(_e))});createProps()(["accept","allowDrop","capture","dir","directory","disabled","getRootNode","id","ids","locale","maxFiles","maxFileSize","minFileSize","name","invalid","onFileAccept","onFileReject","onFileChange","required","translations","validate"]);createProps()(["file"]);var anatomy$f=createAnatomy("menu").parts("arrow","arrowTip","content","contextTrigger","indicator","item","itemGroup","itemGroupLabel","itemIndicator","itemText","positioner","separator","trigger","triggerItem");anatomy$f.build();var dom$e=createScope({getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`menu:${_e.id}:trigger`},getContextTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.contextTrigger)??`menu:${_e.id}:ctx-trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`menu:${_e.id}:content`},getArrowId:_e=>{var _;return((_=_e.ids)==null?void 0:_.arrow)??`menu:${_e.id}:arrow`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`menu:${_e.id}:popper`},getGroupId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.group)==null?void 0:tt.call(et,_))??`menu:${_e.id}:group:${_}`},getGroupLabelId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.groupLabel)==null?void 0:tt.call(et,_))??`menu:${_e.id}:group-label:${_}`},getContentEl:_e=>dom$e.getById(_e,dom$e.getContentId(_e)),getPositionerEl:_e=>dom$e.getById(_e,dom$e.getPositionerId(_e)),getTriggerEl:_e=>dom$e.getById(_e,dom$e.getTriggerId(_e)),getHighlightedItemEl:_e=>_e.highlightedValue?dom$e.getById(_e,_e.highlightedValue):null,getArrowEl:_e=>dom$e.getById(_e,dom$e.getArrowId(_e)),getElements:_e=>{const et=`[role^="menuitem"][data-ownedby=${CSS.escape(dom$e.getContentId(_e))}]:not([data-disabled])`;return queryAll(dom$e.getContentEl(_e),et)},getFirstEl:_e=>first(dom$e.getElements(_e)),getLastEl:_e=>last(dom$e.getElements(_e)),getNextEl:(_e,_)=>nextById(dom$e.getElements(_e),_e.highlightedValue,_??_e.loopFocus),getPrevEl:(_e,_)=>prevById(dom$e.getElements(_e),_e.highlightedValue,_??_e.loopFocus),getElemByKey:(_e,_)=>getByTypeahead(dom$e.getElements(_e),{state:_e.typeaheadState,key:_,activeId:_e.highlightedValue}),isTargetDisabled:_e=>isHTMLElement$1(_e)&&(_e.dataset.disabled===""||_e.hasAttribute("disabled")),isTriggerItem:_e=>{var _;return!!((_=_e==null?void 0:_e.getAttribute("role"))!=null&&_.startsWith("menuitem"))&&!!(_e!=null&&_e.hasAttribute("aria-controls"))},getOptionFromItemEl(_e){return{id:_e.id,name:_e.dataset.name,value:_e.dataset.value,valueText:_e.dataset.valueText,type:_e.dataset.type}}});createProps()(["anchorPoint","aria-label","closeOnSelect","dir","getRootNode","highlightedValue","id","ids","loopFocus","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","onEscapeKeyDown","onSelect","onHighlightChange","open","open.controlled","positioning","typeahead","composite"]);createProps()(["closeOnSelect","disabled","value","valueText"]);createProps()(["htmlFor"]);createProps()(["id"]);createProps()(["disabled","valueText","closeOnSelect","type","value","checked","onCheckedChange"]);var anatomy$e=createAnatomy("popover").parts("arrow","arrowTip","anchor","trigger","indicator","positioner","content","title","description","closeTrigger");anatomy$e.build();var dom$d=createScope({getAnchorId:_e=>{var _;return((_=_e.ids)==null?void 0:_.anchor)??`popover:${_e.id}:anchor`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`popover:${_e.id}:trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`popover:${_e.id}:content`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`popover:${_e.id}:popper`},getArrowId:_e=>{var _;return((_=_e.ids)==null?void 0:_.arrow)??`popover:${_e.id}:arrow`},getTitleId:_e=>{var _;return((_=_e.ids)==null?void 0:_.title)??`popover:${_e.id}:title`},getDescriptionId:_e=>{var _;return((_=_e.ids)==null?void 0:_.description)??`popover:${_e.id}:desc`},getCloseTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.closeTrigger)??`popover:${_e.id}:close`},getAnchorEl:_e=>dom$d.getById(_e,dom$d.getAnchorId(_e)),getTriggerEl:_e=>dom$d.getById(_e,dom$d.getTriggerId(_e)),getContentEl:_e=>dom$d.getById(_e,dom$d.getContentId(_e)),getPositionerEl:_e=>dom$d.getById(_e,dom$d.getPositionerId(_e)),getTitleEl:_e=>dom$d.getById(_e,dom$d.getTitleId(_e)),getDescriptionEl:_e=>dom$d.getById(_e,dom$d.getDescriptionId(_e)),getFocusableEls:_e=>getFocusables(dom$d.getContentEl(_e)),getFirstFocusableEl:_e=>dom$d.getFocusableEls(_e)[0]});createProps()(["autoFocus","closeOnEscape","closeOnInteractOutside","dir","getRootNode","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","portalled","positioning"]);function isVirtualClick(_e){return _e.mozInputSource===0&&_e.isTrusted?!0:_e.detail===0&&!_e.pointerType}function isValidKey(_e){return!(_e.metaKey||!isMac()&&_e.altKey||_e.ctrlKey||_e.key==="Control"||_e.key==="Shift"||_e.key==="Meta")}var nonTextInputTypes=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function isKeyboardFocusEvent(_e,_,et){const tt=et?getEventTarget(et):null,rt=getWindow$2(tt);return _e=_e||tt instanceof rt.HTMLInputElement&&!nonTextInputTypes.has(tt==null?void 0:tt.type)||tt instanceof rt.HTMLTextAreaElement||tt instanceof rt.HTMLElement&&tt.isContentEditable,!(_e&&_==="keyboard"&&et instanceof rt.KeyboardEvent&&!Reflect.has(FOCUS_VISIBLE_INPUT_KEYS,et.key))}var currentModality=null,changeHandlers=new Set,listenerMap=new Map,hasEventBeforeFocus=!1,hasBlurredWindowRecently=!1,FOCUS_VISIBLE_INPUT_KEYS={Tab:!0,Escape:!0};function triggerChangeHandlers(_e,_){for(let et of changeHandlers)et(_e,_)}function handleKeyboardEvent(_e){hasEventBeforeFocus=!0,isValidKey(_e)&&(currentModality="keyboard",triggerChangeHandlers("keyboard",_e))}function handlePointerEvent(_e){currentModality="pointer",(_e.type==="mousedown"||_e.type==="pointerdown")&&(hasEventBeforeFocus=!0,triggerChangeHandlers("pointer",_e))}function handleClickEvent(_e){isVirtualClick(_e)&&(hasEventBeforeFocus=!0,currentModality="virtual")}function handleFocusEvent(_e){const _=getEventTarget(_e);_===getWindow$2(_)||_===getDocument(_)||(!hasEventBeforeFocus&&!hasBlurredWindowRecently&&(currentModality="virtual",triggerChangeHandlers("virtual",_e)),hasEventBeforeFocus=!1,hasBlurredWindowRecently=!1)}function handleWindowBlur(){hasEventBeforeFocus=!1,hasBlurredWindowRecently=!0}function setupGlobalFocusEvents(_e){if(typeof window>"u"||listenerMap.get(getWindow$2(_e)))return;const _=getWindow$2(_e),et=getDocument(_e);let tt=_.HTMLElement.prototype.focus;_.HTMLElement.prototype.focus=function(){currentModality="virtual",triggerChangeHandlers("virtual",null),hasEventBeforeFocus=!0,tt.apply(this,arguments)},et.addEventListener("keydown",handleKeyboardEvent,!0),et.addEventListener("keyup",handleKeyboardEvent,!0),et.addEventListener("click",handleClickEvent,!0),_.addEventListener("focus",handleFocusEvent,!0),_.addEventListener("blur",handleWindowBlur,!1),typeof _.PointerEvent<"u"?(et.addEventListener("pointerdown",handlePointerEvent,!0),et.addEventListener("pointermove",handlePointerEvent,!0),et.addEventListener("pointerup",handlePointerEvent,!0)):(et.addEventListener("mousedown",handlePointerEvent,!0),et.addEventListener("mousemove",handlePointerEvent,!0),et.addEventListener("mouseup",handlePointerEvent,!0)),_.addEventListener("beforeunload",()=>{tearDownWindowFocusTracking(_e)},{once:!0}),listenerMap.set(_,{focus:tt})}var tearDownWindowFocusTracking=(_e,_)=>{const et=getWindow$2(_e),tt=getDocument(_e);listenerMap.has(et)&&(et.HTMLElement.prototype.focus=listenerMap.get(et).focus,tt.removeEventListener("keydown",handleKeyboardEvent,!0),tt.removeEventListener("keyup",handleKeyboardEvent,!0),tt.removeEventListener("click",handleClickEvent,!0),et.removeEventListener("focus",handleFocusEvent,!0),et.removeEventListener("blur",handleWindowBlur,!1),typeof et.PointerEvent<"u"?(tt.removeEventListener("pointerdown",handlePointerEvent,!0),tt.removeEventListener("pointermove",handlePointerEvent,!0),tt.removeEventListener("pointerup",handlePointerEvent,!0)):(tt.removeEventListener("mousedown",handlePointerEvent,!0),tt.removeEventListener("mousemove",handlePointerEvent,!0),tt.removeEventListener("mouseup",handlePointerEvent,!0)),listenerMap.delete(et))};function isFocusVisible(){return currentModality==="keyboard"}function trackFocusVisible(_e={}){const{isTextInput:_,autoFocus:et,onChange:tt,root:rt}=_e;setupGlobalFocusEvents(rt),tt==null||tt({isFocusVisible:et||isFocusVisible(),modality:currentModality});const nt=(ot,at)=>{isKeyboardFocusEvent(!!_,ot,at)&&(tt==null||tt({isFocusVisible:isFocusVisible(),modality:ot}))};return changeHandlers.add(nt),()=>{changeHandlers.delete(nt)}}var rafId,observedElements=new Map,getRectFn=_e=>_e.getBoundingClientRect();function trackElementRect(_e,_){const{scope:et="rect",getRect:tt=getRectFn,onChange:rt}=_,nt=getLoopFn({scope:et,getRect:tt}),ot=observedElements.get(_e);return ot?(ot.callbacks.push(rt),rt(tt(_e))):(observedElements.set(_e,{rect:{},callbacks:[rt]}),observedElements.size===1&&(rafId=requestAnimationFrame(nt))),function(){const lt=observedElements.get(_e);if(!lt)return;const ct=lt.callbacks.indexOf(rt);ct>-1&&lt.callbacks.splice(ct,1),lt.callbacks.length===0&&(observedElements.delete(_e),observedElements.size===0&&cancelAnimationFrame(rafId))}}function getLoopFn(_e){const{scope:_,getRect:et}=_e,tt=getEqualityFn(_);return function rt(){const nt=[];observedElements.forEach((ot,at)=>{const lt=et(at);tt(ot.rect,lt)||(ot.rect=lt,nt.push(ot))}),nt.forEach(ot=>{ot.callbacks.forEach(at=>at(ot.rect))}),rafId=requestAnimationFrame(rt)}}var isEqualSize=(_e,_)=>_e.width===_.width&&_e.height===_.height,isEqualPosition=(_e,_)=>_e.top===_.top&&_e.left===_.left,isEqualRect=(_e,_)=>isEqualSize(_e,_)&&isEqualPosition(_e,_);function getEqualityFn(_e){return _e==="size"?isEqualSize:_e==="position"?isEqualPosition:isEqualRect}var anatomy$d=createAnatomy("radio-group").parts("root","label","item","itemText","itemControl","indicator");anatomy$d.build();var dom$c=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`radio-group:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`radio-group:${_e.id}:label`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`radio-group:${_e.id}:radio:${_}`},getItemHiddenInputId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemHiddenInput)==null?void 0:tt.call(et,_))??`radio-group:${_e.id}:radio:input:${_}`},getItemControlId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemControl)==null?void 0:tt.call(et,_))??`radio-group:${_e.id}:radio:control:${_}`},getItemLabelId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemLabel)==null?void 0:tt.call(et,_))??`radio-group:${_e.id}:radio:label:${_}`},getIndicatorId:_e=>{var _;return((_=_e.ids)==null?void 0:_.indicator)??`radio-group:${_e.id}:indicator`},getRootEl:_e=>dom$c.getById(_e,dom$c.getRootId(_e)),getItemHiddenInputEl:(_e,_)=>dom$c.getById(_e,dom$c.getItemHiddenInputId(_e,_)),getIndicatorEl:_e=>dom$c.getById(_e,dom$c.getIndicatorId(_e)),getFirstEnabledInputEl:_e=>{var _;return(_=dom$c.getRootEl(_e))==null?void 0:_.querySelector("input:not(:disabled)")},getFirstEnabledAndCheckedInputEl:_e=>{var _;return(_=dom$c.getRootEl(_e))==null?void 0:_.querySelector("input:not(:disabled):checked")},getInputEls:_e=>{const et=`input[type=radio][data-ownedby='${CSS.escape(dom$c.getRootId(_e))}']:not([disabled])`;return queryAll(dom$c.getRootEl(_e),et)},getActiveRadioEl:_e=>{if(_e.value)return dom$c.getById(_e,dom$c.getItemId(_e,_e.value))},getOffsetRect:_e=>({left:(_e==null?void 0:_e.offsetLeft)??0,top:(_e==null?void 0:_e.offsetTop)??0,width:(_e==null?void 0:_e.offsetWidth)??0,height:(_e==null?void 0:_e.offsetHeight)??0}),getRectById:(_e,_)=>{const et=dom$c.getById(_e,dom$c.getItemId(_e,_));if(et)return dom$c.resolveRect(dom$c.getOffsetRect(et))},resolveRect:_e=>({width:`${_e.width}px`,height:`${_e.height}px`,left:`${_e.left}px`,top:`${_e.top}px`})});createProps()(["dir","disabled","form","getRootNode","id","ids","name","onValueChange","orientation","readOnly","value"]);createProps()(["value","disabled","invalid"]);var anatomy$c=createAnatomy("rating-group").parts("root","label","item","control");anatomy$c.build();var dom$b=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`rating:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`rating:${_e.id}:label`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`rating:${_e.id}:input`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`rating:${_e.id}:control`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`rating:${_e.id}:item:${_}`},getRootEl:_e=>dom$b.getById(_e,dom$b.getRootId(_e)),getControlEl:_e=>dom$b.getById(_e,dom$b.getControlId(_e)),getRadioEl:(_e,_=_e.value)=>{const et=`[role=radio][aria-posinset='${Math.ceil(_)}']`;return query(dom$b.getControlEl(_e),et)},getHiddenInputEl:_e=>dom$b.getById(_e,dom$b.getHiddenInputId(_e)),dispatchChangeEvent:_e=>{const _=dom$b.getHiddenInputEl(_e);_&&dispatchInputValueEvent(_,{value:_e.value})}});createProps()(["allowHalf","autoFocus","count","dir","disabled","form","getRootNode","id","ids","name","onHoverChange","onValueChange","required","readOnly","translations","value"]);createProps()(["index"]);var __defProp$1=Object.defineProperty,__defNormalProp$1=(_e,_,et)=>_ in _e?__defProp$1(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:et}):_e[_]=et,__publicField$1=(_e,_,et)=>__defNormalProp$1(_e,_+"",et),fallback$1={itemToValue(_e){return typeof _e=="string"?_e:isObject$2(_e)&&hasProp(_e,"value")?_e.value:""},itemToString(_e){return typeof _e=="string"?_e:isObject$2(_e)&&hasProp(_e,"label")?_e.label:fallback$1.itemToValue(_e)},isItemDisabled(_e){return isObject$2(_e)&&hasProp(_e,"disabled")?!!_e.disabled:!1}},ListCollection=class{constructor(_e){this.options=_e,__publicField$1(this,"items"),this.items=[..._e.items]}isEqual(_e){return isEqual$1(this.items,_e.items)}setItems(_e){this.items=Array.from(_e)}getValues(_e=this.items){return Array.from(_e).map(_=>this.getItemValue(_)).filter(Boolean)}find(_e){if(_e==null)return null;const _=this.items.findIndex(et=>this.getItemValue(et)===_e);return _!=null?this.items[_]:null}findMany(_e){return Array.from(_e).map(_=>this.find(_)).filter(Boolean)}at(_e){return this.items[_e]??null}sortFn(_e,_){const et=this.indexOf(_e),tt=this.indexOf(_);return(et??0)-(tt??0)}sort(_e){return[..._e].sort(this.sortFn.bind(this))}getItemValue(_e){var _,et;return _e==null?null:((et=(_=this.options).itemToValue)==null?void 0:et.call(_,_e))??fallback$1.itemToValue(_e)}getItemDisabled(_e){var _,et;return _e==null?!1:((et=(_=this.options).isItemDisabled)==null?void 0:et.call(_,_e))??fallback$1.isItemDisabled(_e)}stringifyItem(_e){var _,et;return _e==null?null:((et=(_=this.options).itemToString)==null?void 0:et.call(_,_e))??fallback$1.itemToString(_e)}stringify(_e){return _e==null?null:this.stringifyItem(this.find(_e))}stringifyItems(_e,_=", "){return Array.from(_e).map(et=>this.stringifyItem(et)).filter(Boolean).join(_)}stringifyMany(_e,_){return this.stringifyItems(this.findMany(_e),_)}has(_e){return this.indexOf(_e)!==-1}hasItem(_e){return _e==null?!1:this.has(this.getItemValue(_e))}get size(){return this.items.length}get firstValue(){let _e=0;for(;this.getItemDisabled(this.at(_e));)_e++;return this.getItemValue(this.at(_e))}get lastValue(){let _e=this.size-1;for(;this.getItemDisabled(this.at(_e));)_e--;return this.getItemValue(this.at(_e))}getNextValue(_e,_=1,et=!1){let tt=this.indexOf(_e);if(tt===-1)return null;for(tt=et?Math.min(tt+_,this.size-1):tt+_;tt<=this.size&&this.getItemDisabled(this.at(tt));)tt++;return this.getItemValue(this.at(tt))}getPreviousValue(_e,_=1,et=!1){let tt=this.indexOf(_e);if(tt===-1)return null;for(tt=et?Math.max(tt-_,0):tt-_;tt>=0&&this.getItemDisabled(this.at(tt));)tt--;return this.getItemValue(this.at(tt))}indexOf(_e){return _e==null?-1:this.items.findIndex(_=>this.getItemValue(_)===_e)}getByText(_e,_){let et=_!=null?wrap$1(this.items,this.indexOf(_)):this.items;return _e.length===1&&(et=et.filter(rt=>this.getItemValue(rt)!==_)),et.find(rt=>match$1(this.stringifyItem(rt),_e))}search(_e,_){const{state:et,currentValue:tt,timeout:rt=350}=_,nt=et.keysSoFar+_e,at=nt.length>1&&Array.from(nt).every(it=>it===nt[0])?nt[0]:nt,lt=this.getByText(at,tt),ct=this.getItemValue(lt);function dt(){clearTimeout(et.timer),et.timer=-1}function st(it){et.keysSoFar=it,dt(),it!==""&&(et.timer=+setTimeout(()=>{st(""),dt()},rt))}return st(nt),ct}*[Symbol.iterator](){yield*this.items}insertBefore(_e,_){const et=this.indexOf(_e);et!==-1&&this.items.splice(et,0,_)}insertAfter(_e,_){const et=this.indexOf(_e);et!==-1&&this.items.splice(et+1,0,_)}reorder(_e,_){if(_e===-1||_===-1||_e===_)return;const[et]=this.items.splice(_e,1);this.items.splice(_,0,et)}json(){return{size:this.size,first:this.firstValue,last:this.lastValue}}},match$1=(_e,_)=>!!(_e!=null&&_e.toLowerCase().startsWith(_.toLowerCase())),wrap$1=(_e,_)=>_e.map((et,tt)=>_e[(Math.max(_,0)+tt)%_e.length]);const createListCollection=_e=>ref$1(new ListCollection(_e)),[SelectProvider,useSelectContext]=createContext({name:"SelectContext",hookName:"useSelectContext",providerName:"<SelectProvider />"}),SelectClearTrigger$2=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=mergeProps(et.getClearTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});SelectClearTrigger$2.displayName="SelectClearTrigger";const SelectContent$2=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=usePresenceContext(),rt=mergeProps(et.getContentProps(),tt.getPresenceProps(),_e);return tt.unmounted?null:jsxRuntimeExports.jsx(ark.div,{...rt,ref:composeRefs(tt.ref,_)})});SelectContent$2.displayName="SelectContent";const SelectContext$1=_e=>_e.children(useSelectContext()),SelectControl$1=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=mergeProps(et.getControlProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});SelectControl$1.displayName="SelectControl";const SelectHiddenSelect$1=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=mergeProps(et.getHiddenSelectProps(),_e),rt=et.value.length===0,nt=useFieldContext();return jsxRuntimeExports.jsxs(ark.select,{"aria-describedby":nt==null?void 0:nt.ariaDescribedby,...tt,ref:_,children:[rt&&jsxRuntimeExports.jsx("option",{value:""}),et.collection.items.map((ot,at)=>jsxRuntimeExports.jsx("option",{value:et.collection.getItemValue(ot)??"",disabled:et.collection.getItemDisabled(ot)},at))]})});SelectHiddenSelect$1.displayName="SelectHiddenSelect";const SelectIndicator$1=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=mergeProps(et.getIndicatorProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});SelectIndicator$1.displayName="SelectIndicator";const[SelectItemProvider,useSelectItemContext]=createContext({name:"SelectItemContext",hookName:"useSelectItemContext",providerName:"<SelectItemProvider />"}),[SelectItemPropsProvider,useSelectItemPropsContext]=createContext({name:"SelectItemPropsContext",hookName:"useSelectItemPropsContext",providerName:"<SelectItemPropsProvider />"}),SelectItem$2=reactExports.forwardRef((_e,_)=>{const[et,tt]=createSplitProps()(_e,["item","persistFocus"]),rt=useSelectContext(),nt=mergeProps(rt.getItemProps(et),tt),ot=rt.getItemState(et);return jsxRuntimeExports.jsx(SelectItemPropsProvider,{value:et,children:jsxRuntimeExports.jsx(SelectItemProvider,{value:ot,children:jsxRuntimeExports.jsx(ark.div,{...nt,ref:_})})})});SelectItem$2.displayName="SelectItem";const[SelectItemGroupPropsProvider,useSelectItemGroupPropsContext]=createContext({name:"SelectItemGroupPropsContext",hookName:"useSelectItemGroupPropsContext",providerName:"<SelectItemGroupPropsProvider />"}),SelectItemGroup$1=reactExports.forwardRef((_e,_)=>{const et=reactExports.useId(),[tt,rt]=createSplitProps()(_e,["id"]),nt={id:et,...tt},ot=useSelectContext(),at=mergeProps(ot.getItemGroupProps(nt),rt);return jsxRuntimeExports.jsx(SelectItemGroupPropsProvider,{value:nt,children:jsxRuntimeExports.jsx(ark.div,{...at,ref:_})})});SelectItemGroup$1.displayName="SelectItemGroup";const SelectItemGroupLabel$1=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=useSelectItemGroupPropsContext(),rt=mergeProps(et.getItemGroupLabelProps({htmlFor:tt.id}),_e);return jsxRuntimeExports.jsx(ark.div,{...rt,ref:_})});SelectItemGroupLabel$1.displayName="SelectItemGroupLabel";const SelectItemIndicator$1=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=useSelectItemPropsContext(),rt=mergeProps(et.getItemIndicatorProps(tt),_e);return jsxRuntimeExports.jsx(ark.div,{...rt,ref:_})});SelectItemIndicator$1.displayName="SelectItemIndicator";const SelectItemText=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=useSelectItemPropsContext(),rt=mergeProps(et.getItemTextProps(tt),_e);return jsxRuntimeExports.jsx(ark.span,{...rt,ref:_})});SelectItemText.displayName="SelectItemText";const SelectLabel=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=mergeProps(et.getLabelProps(),_e);return jsxRuntimeExports.jsx(ark.label,{...tt,ref:_})});SelectLabel.displayName="SelectLabel";const SelectPositioner$1=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=mergeProps(et.getPositionerProps(),_e);return usePresenceContext().unmounted?null:jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});SelectPositioner$1.displayName="SelectPositioner";var anatomy$b=createAnatomy("select").parts("label","positioner","trigger","indicator","clearTrigger","item","itemText","itemIndicator","itemGroup","itemGroupLabel","list","content","root","control","valueText"),parts$5=anatomy$b.build(),collection=_e=>ref$1(new ListCollection(_e));collection.empty=()=>ref$1(new ListCollection({items:[]}));var dom$a=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`select:${_e.id}`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`select:${_e.id}:content`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`select:${_e.id}:trigger`},getClearTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.clearTrigger)??`select:${_e.id}:clear-trigger`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`select:${_e.id}:label`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`select:${_e.id}:control`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`select:${_e.id}:option:${_}`},getHiddenSelectId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenSelect)??`select:${_e.id}:select`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`select:${_e.id}:positioner`},getItemGroupId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemGroup)==null?void 0:tt.call(et,_))??`select:${_e.id}:optgroup:${_}`},getItemGroupLabelId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemGroupLabel)==null?void 0:tt.call(et,_))??`select:${_e.id}:optgroup-label:${_}`},getHiddenSelectEl:_e=>dom$a.getById(_e,dom$a.getHiddenSelectId(_e)),getContentEl:_e=>dom$a.getById(_e,dom$a.getContentId(_e)),getControlEl:_e=>dom$a.getById(_e,dom$a.getControlId(_e)),getTriggerEl:_e=>dom$a.getById(_e,dom$a.getTriggerId(_e)),getClearTriggerEl:_e=>dom$a.getById(_e,dom$a.getClearTriggerId(_e)),getPositionerEl:_e=>dom$a.getById(_e,dom$a.getPositionerId(_e)),getHighlightedOptionEl(_e){return _e.highlightedValue?dom$a.getById(_e,dom$a.getItemId(_e,_e.highlightedValue)):null}});function connect$5(_e,_,et){const tt=_e.context.isDisabled,rt=_e.context.invalid,nt=_e.context.readOnly,ot=_e.context.isInteractive,at=_e.context.composite,lt=_e.hasTag("open"),ct=_e.matches("focused"),dt=_e.context.highlightedValue,st=_e.context.highlightedItem,it=_e.context.selectedItems,ut=_e.context.isTypingAhead,ht=_e.context.collection,ft=dt?dom$a.getItemId(_e.context,dt):void 0;function gt(yt){const bt=ht.getItemDisabled(yt.item),vt=ht.getItemValue(yt.item);return{value:vt,disabled:!!(tt||bt),highlighted:dt===vt,selected:_e.context.value.includes(vt)}}const mt=getPlacementStyles({..._e.context.positioning,placement:_e.context.currentPlacement});return{open:lt,focused:ct,empty:_e.context.value.length===0,highlightedItem:st,highlightedValue:dt,selectedItems:it,hasSelectedItems:_e.context.hasSelectedItems,value:_e.context.value,valueAsString:_e.context.valueAsString,collection:ht,multiple:!!_e.context.multiple,disabled:!!tt,setCollection(yt){_({type:"COLLECTION.SET",value:yt})},reposition(yt={}){_({type:"POSITIONING.SET",options:yt})},focus(){var yt;(yt=dom$a.getTriggerEl(_e.context))==null||yt.focus({preventScroll:!0})},setOpen(yt){yt!==lt&&_(yt?"OPEN":"CLOSE")},selectValue(yt){_({type:"ITEM.SELECT",value:yt})},setValue(yt){_({type:"VALUE.SET",value:yt})},selectAll(){_({type:"VALUE.SET",value:ht.getValues()})},highlightValue(yt){_({type:"HIGHLIGHTED_VALUE.SET",value:yt})},clearValue(yt){_(yt?{type:"ITEM.CLEAR",value:yt}:{type:"VALUE.CLEAR"})},getItemState:gt,getRootProps(){return et.element({...parts$5.root.attrs,dir:_e.context.dir,id:dom$a.getRootId(_e.context),"data-invalid":dataAttr$1(rt),"data-readonly":dataAttr$1(nt)})},getLabelProps(){return et.label({dir:_e.context.dir,id:dom$a.getLabelId(_e.context),...parts$5.label.attrs,"data-disabled":dataAttr$1(tt),"data-invalid":dataAttr$1(rt),"data-readonly":dataAttr$1(nt),htmlFor:dom$a.getHiddenSelectId(_e.context),onClick(yt){var bt;yt.defaultPrevented||tt||(bt=dom$a.getTriggerEl(_e.context))==null||bt.focus({preventScroll:!0})}})},getControlProps(){return et.element({...parts$5.control.attrs,dir:_e.context.dir,id:dom$a.getControlId(_e.context),"data-state":lt?"open":"closed","data-focus":dataAttr$1(ct),"data-disabled":dataAttr$1(tt),"data-invalid":dataAttr$1(rt)})},getValueTextProps(){return et.element({...parts$5.valueText.attrs,dir:_e.context.dir,"data-disabled":dataAttr$1(tt),"data-invalid":dataAttr$1(rt),"data-focus":dataAttr$1(ct)})},getTriggerProps(){return et.button({id:dom$a.getTriggerId(_e.context),disabled:tt,dir:_e.context.dir,type:"button",role:"combobox","aria-controls":dom$a.getContentId(_e.context),"aria-expanded":lt,"aria-haspopup":"listbox","data-state":lt?"open":"closed","aria-invalid":rt,"aria-labelledby":dom$a.getLabelId(_e.context),...parts$5.trigger.attrs,"data-disabled":dataAttr$1(tt),"data-invalid":dataAttr$1(rt),"data-readonly":dataAttr$1(nt),"data-placement":_e.context.currentPlacement,"data-placeholder-shown":dataAttr$1(!_e.context.hasSelectedItems),onClick(yt){ot&&(yt.defaultPrevented||_({type:"TRIGGER.CLICK"}))},onFocus(){_("TRIGGER.FOCUS")},onBlur(){_("TRIGGER.BLUR")},onKeyDown(yt){if(yt.defaultPrevented||!ot)return;const vt={ArrowUp(){_({type:"TRIGGER.ARROW_UP"})},ArrowDown(xt){_({type:xt.altKey?"OPEN":"TRIGGER.ARROW_DOWN"})},ArrowLeft(){_({type:"TRIGGER.ARROW_LEFT"})},ArrowRight(){_({type:"TRIGGER.ARROW_RIGHT"})},Home(){_({type:"TRIGGER.HOME"})},End(){_({type:"TRIGGER.END"})},Enter(){_({type:"TRIGGER.ENTER"})},Space(xt){_(ut?{type:"TRIGGER.TYPEAHEAD",key:xt.key}:{type:"TRIGGER.ENTER"})}}[getEventKey(yt,_e.context)];if(vt){vt(yt),yt.preventDefault();return}getByTypeahead.isValidEvent(yt)&&(_({type:"TRIGGER.TYPEAHEAD",key:yt.key}),yt.preventDefault())}})},getIndicatorProps(){return et.element({...parts$5.indicator.attrs,dir:_e.context.dir,"aria-hidden":!0,"data-state":lt?"open":"closed","data-disabled":dataAttr$1(tt),"data-invalid":dataAttr$1(rt),"data-readonly":dataAttr$1(nt)})},getItemProps(yt){const bt=gt(yt);return et.element({id:dom$a.getItemId(_e.context,bt.value),role:"option",...parts$5.item.attrs,dir:_e.context.dir,"data-value":bt.value,"aria-selected":bt.selected,"data-state":bt.selected?"checked":"unchecked","data-highlighted":dataAttr$1(bt.highlighted),"data-disabled":dataAttr$1(bt.disabled),"aria-disabled":ariaAttr(bt.disabled),onPointerMove(vt){bt.disabled||vt.pointerType!=="mouse"||bt.value!==_e.context.highlightedValue&&_({type:"ITEM.POINTER_MOVE",value:bt.value})},onClick(vt){vt.defaultPrevented||bt.disabled||_({type:"ITEM.CLICK",src:"pointerup",value:bt.value})},onPointerLeave(vt){bt.disabled||yt.persistFocus||vt.pointerType!=="mouse"||!_e.previousEvent.type.includes("POINTER")||_({type:"ITEM.POINTER_LEAVE"})}})},getItemTextProps(yt){const bt=gt(yt);return et.element({...parts$5.itemText.attrs,"data-state":bt.selected?"checked":"unchecked","data-disabled":dataAttr$1(bt.disabled),"data-highlighted":dataAttr$1(bt.highlighted)})},getItemIndicatorProps(yt){const bt=gt(yt);return et.element({"aria-hidden":!0,...parts$5.itemIndicator.attrs,"data-state":bt.selected?"checked":"unchecked",hidden:!bt.selected})},getItemGroupLabelProps(yt){const{htmlFor:bt}=yt;return et.element({...parts$5.itemGroupLabel.attrs,id:dom$a.getItemGroupLabelId(_e.context,bt),role:"group",dir:_e.context.dir})},getItemGroupProps(yt){const{id:bt}=yt;return et.element({...parts$5.itemGroup.attrs,"data-disabled":dataAttr$1(tt),id:dom$a.getItemGroupId(_e.context,bt),"aria-labelledby":dom$a.getItemGroupLabelId(_e.context,bt),dir:_e.context.dir})},getClearTriggerProps(){return et.button({...parts$5.clearTrigger.attrs,id:dom$a.getClearTriggerId(_e.context),type:"button","aria-label":"Clear value","data-invalid":dataAttr$1(rt),disabled:tt,hidden:!_e.context.hasSelectedItems,dir:_e.context.dir,onClick(yt){yt.defaultPrevented||_("CLEAR.CLICK")}})},getHiddenSelectProps(){return et.select({name:_e.context.name,form:_e.context.form,disabled:tt,multiple:_e.context.multiple,required:_e.context.required,"aria-hidden":!0,id:dom$a.getHiddenSelectId(_e.context),defaultValue:_e.context.multiple?_e.context.value:_e.context.value[0],style:visuallyHiddenStyle,tabIndex:-1,onFocus(){var yt;(yt=dom$a.getTriggerEl(_e.context))==null||yt.focus({preventScroll:!0})},"aria-labelledby":dom$a.getLabelId(_e.context)})},getPositionerProps(){return et.element({...parts$5.positioner.attrs,dir:_e.context.dir,id:dom$a.getPositionerId(_e.context),style:mt.floating})},getContentProps(){return et.element({hidden:!lt,dir:_e.context.dir,id:dom$a.getContentId(_e.context),role:at?"listbox":"dialog",...parts$5.content.attrs,"data-state":lt?"open":"closed","data-placement":_e.context.currentPlacement,"data-activedescendant":ft,"aria-activedescendant":at?ft:void 0,"aria-multiselectable":_e.context.multiple&&at?!0:void 0,"aria-labelledby":dom$a.getLabelId(_e.context),tabIndex:0,onKeyDown(yt){if(!ot||!isSelfTarget(yt))return;if(yt.key==="Tab"&&!isValidTabEvent(yt)){yt.preventDefault();return}const bt={ArrowUp(){_({type:"CONTENT.ARROW_UP"})},ArrowDown(){_({type:"CONTENT.ARROW_DOWN"})},Home(){_({type:"CONTENT.HOME"})},End(){_({type:"CONTENT.END"})},Enter(){_({type:"ITEM.CLICK",src:"keydown.enter"})},Space(wt){var St;ut?_({type:"CONTENT.TYPEAHEAD",key:wt.key}):(St=bt.Enter)==null||St.call(bt,wt)}},vt=bt[getEventKey(yt)];if(vt){vt(yt),yt.preventDefault();return}const xt=getEventTarget(yt);isEditableElement(xt)||getByTypeahead.isValidEvent(yt)&&(_({type:"CONTENT.TYPEAHEAD",key:yt.key}),yt.preventDefault())}})},getListProps(){return et.element({...parts$5.list.attrs,tabIndex:0,role:at?void 0:"listbox","aria-labelledby":dom$a.getTriggerId(_e.context),"aria-activedescendant":at?void 0:ft,"aria-multiselectable":!at&&_e.context.multiple?!0:void 0})}}}var{and:and$3,not:not$5,or:or$1}=guards;function machine$4(_e){const _=compact$2(_e);return createMachine({id:"select",context:{value:[],highlightedValue:null,loopFocus:!1,closeOnSelect:!_.multiple,disabled:!1,readOnly:!1,composite:!0,..._,highlightedItem:null,selectedItems:[],valueAsString:"",collection:_.collection??collection.empty(),typeahead:getByTypeahead.defaultOptions,fieldsetDisabled:!1,positioning:{placement:"bottom-start",gutter:8,..._.positioning}},computed:{hasSelectedItems:et=>et.value.length>0,isTypingAhead:et=>et.typeahead.keysSoFar!=="",isDisabled:et=>!!et.disabled||et.fieldsetDisabled,isInteractive:et=>!(et.isDisabled||et.readOnly)},initial:_.open?"open":"idle",created:["syncCollection"],entry:["syncSelectElement"],watch:{open:["toggleVisibility"],value:["syncSelectedItems","syncSelectElement"],highlightedValue:["syncHighlightedItem"],collection:["syncCollection"]},on:{"HIGHLIGHTED_VALUE.SET":{actions:["setHighlightedItem"]},"ITEM.SELECT":{actions:["selectItem"]},"ITEM.CLEAR":{actions:["clearItem"]},"VALUE.SET":{actions:["setSelectedItems"]},"VALUE.CLEAR":{actions:["clearSelectedItems"]},"CLEAR.CLICK":{actions:["clearSelectedItems","focusTriggerEl"]},"COLLECTION.SET":{actions:["setCollection"]}},activities:["trackFormControlState"],states:{idle:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{target:"open",actions:["setInitialFocus"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus","highlightFirstSelectedItem"]}],"TRIGGER.FOCUS":{target:"focused"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}]}},focused:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{guard:"isTriggerArrowUpEvent",target:"open",actions:["setInitialFocus","highlightComputedLastItem"]},{guard:or$1("isTriggerArrowDownEvent","isTriggerEnterEvent"),target:"open",actions:["setInitialFocus","highlightComputedFirstItem"]},{target:"open",actions:["setInitialFocus"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}],"TRIGGER.BLUR":{target:"idle"},"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightFirstSelectedItem"]}],"TRIGGER.ENTER":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_UP":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedLastItem"]}],"TRIGGER.ARROW_DOWN":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_LEFT":[{guard:and$3(not$5("multiple"),"hasSelectedItems"),actions:["selectPreviousItem"]},{guard:not$5("multiple"),actions:["selectLastItem"]}],"TRIGGER.ARROW_RIGHT":[{guard:and$3(not$5("multiple"),"hasSelectedItems"),actions:["selectNextItem"]},{guard:not$5("multiple"),actions:["selectFirstItem"]}],"TRIGGER.HOME":{guard:not$5("multiple"),actions:["selectFirstItem"]},"TRIGGER.END":{guard:not$5("multiple"),actions:["selectLastItem"]},"TRIGGER.TYPEAHEAD":{guard:not$5("multiple"),actions:["selectMatchingItem"]}}},open:{tags:["open"],exit:["scrollContentToTop"],activities:["trackDismissableElement","computePlacement","scrollToHighlightedItem"],on:{"CONTROLLED.CLOSE":{target:"focused",actions:["focusTriggerEl","clearHighlightedItem"]},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","focusTriggerEl","clearHighlightedItem"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","clearHighlightedItem"]}],"ITEM.CLICK":[{guard:and$3("closeOnSelect","isOpenControlled"),actions:["selectHighlightedItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectHighlightedItem","invokeOnClose","focusTriggerEl","clearHighlightedItem"]},{actions:["selectHighlightedItem"]}],"CONTENT.HOME":{actions:["highlightFirstItem"]},"CONTENT.END":{actions:["highlightLastItem"]},"CONTENT.ARROW_DOWN":[{guard:and$3("hasHighlightedItem","loop","isLastItemHighlighted"),actions:["highlightFirstItem"]},{guard:"hasHighlightedItem",actions:["highlightNextItem"]},{actions:["highlightFirstItem"]}],"CONTENT.ARROW_UP":[{guard:and$3("hasHighlightedItem","loop","isFirstItemHighlighted"),actions:["highlightLastItem"]},{guard:"hasHighlightedItem",actions:["highlightPreviousItem"]},{actions:["highlightLastItem"]}],"CONTENT.TYPEAHEAD":{actions:["highlightMatchingItem"]},"ITEM.POINTER_MOVE":{actions:["highlightItem"]},"ITEM.POINTER_LEAVE":{actions:["clearHighlightedItem"]},"POSITIONING.SET":{actions:["reposition"]}}}}},{guards:{loop:et=>!!et.loopFocus,multiple:et=>!!et.multiple,hasSelectedItems:et=>!!et.hasSelectedItems,hasHighlightedItem:et=>et.highlightedValue!=null,isFirstItemHighlighted:et=>et.highlightedValue===et.collection.firstValue,isLastItemHighlighted:et=>et.highlightedValue===et.collection.lastValue,closeOnSelect:(et,tt)=>!!(tt.closeOnSelect??et.closeOnSelect),isOpenControlled:et=>!!et["open.controlled"],isTriggerClickEvent:(et,tt)=>{var rt;return((rt=tt.previousEvent)==null?void 0:rt.type)==="TRIGGER.CLICK"},isTriggerEnterEvent:(et,tt)=>{var rt;return((rt=tt.previousEvent)==null?void 0:rt.type)==="TRIGGER.ENTER"},isTriggerArrowUpEvent:(et,tt)=>{var rt;return((rt=tt.previousEvent)==null?void 0:rt.type)==="TRIGGER.ARROW_UP"},isTriggerArrowDownEvent:(et,tt)=>{var rt;return((rt=tt.previousEvent)==null?void 0:rt.type)==="TRIGGER.ARROW_DOWN"}},activities:{trackFormControlState(et,tt,{initialContext:rt}){return trackFormControl(dom$a.getHiddenSelectEl(et),{onFieldsetDisabledChange(nt){et.fieldsetDisabled=nt},onFormReset(){set$3.selectedItems(et,rt.value)}})},trackDismissableElement(et,tt,{send:rt}){const nt=()=>dom$a.getContentEl(et);let ot=!0;return trackDismissableElement(nt,{defer:!0,exclude:[dom$a.getTriggerEl(et),dom$a.getClearTriggerEl(et)],onFocusOutside:et.onFocusOutside,onPointerDownOutside:et.onPointerDownOutside,onInteractOutside(at){var lt;(lt=et.onInteractOutside)==null||lt.call(et,at),ot=!(at.detail.focusable||at.detail.contextmenu)},onDismiss(){rt({type:"CLOSE",src:"interact-outside",restoreFocus:ot})}})},computePlacement(et){return et.currentPlacement=et.positioning.placement,getPlacement(()=>dom$a.getTriggerEl(et),()=>dom$a.getPositionerEl(et),{defer:!0,...et.positioning,onComplete(nt){et.currentPlacement=nt.placement}})},scrollToHighlightedItem(et,tt,{getState:rt}){const nt=at=>{if(et.highlightedValue==null||rt().event.type.includes("POINTER"))return;const ct=dom$a.getHighlightedOptionEl(et),dt=dom$a.getContentEl(et);if(et.scrollToIndexFn){const st=et.collection.indexOf(et.highlightedValue);et.scrollToIndexFn({index:st,immediate:at});return}scrollIntoView(ct,{rootEl:dt,block:"nearest"})};return raf$1(()=>nt(!0)),observeAttributes(()=>dom$a.getContentEl(et),{defer:!0,attributes:["data-activedescendant"],callback(){nt(!1)}})}},actions:{reposition(et,tt){const rt=()=>dom$a.getPositionerEl(et);getPlacement(dom$a.getTriggerEl(et),rt,{...et.positioning,...tt.options,defer:!0,listeners:!1,onComplete(nt){et.currentPlacement=nt.placement}})},toggleVisibility(et,tt,{send:rt}){rt({type:et.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:tt})},highlightPreviousItem(et){if(et.highlightedValue==null)return;const tt=et.collection.getPreviousValue(et.highlightedValue);set$3.highlightedItem(et,tt)},highlightNextItem(et){if(et.highlightedValue==null)return;const tt=et.collection.getNextValue(et.highlightedValue);set$3.highlightedItem(et,tt)},highlightFirstItem(et){const tt=et.collection.firstValue;set$3.highlightedItem(et,tt)},highlightLastItem(et){const tt=et.collection.lastValue;set$3.highlightedItem(et,tt)},setInitialFocus(et){raf$1(()=>{const tt=getInitialFocus({root:dom$a.getContentEl(et)});tt==null||tt.focus({preventScroll:!0})})},focusTriggerEl(et,tt){var nt;const rt=tt.restoreFocus??((nt=tt.previousEvent)==null?void 0:nt.restoreFocus);rt!=null&&!rt||raf$1(()=>{const ot=dom$a.getTriggerEl(et);ot==null||ot.focus({preventScroll:!0})})},selectHighlightedItem(et,tt){let rt=tt.value??et.highlightedValue;if(rt==null)return;const nt=et.deselectable&&!et.multiple&&et.value.includes(rt);rt=nt?null:rt,set$3.selectedItem(et,rt,nt)},highlightComputedFirstItem(et){const tt=et.hasSelectedItems?et.collection.sort(et.value)[0]:et.collection.firstValue;set$3.highlightedItem(et,tt)},highlightComputedLastItem(et){const tt=et.hasSelectedItems?et.collection.sort(et.value)[0]:et.collection.lastValue;set$3.highlightedItem(et,tt)},highlightFirstSelectedItem(et){if(!et.hasSelectedItems)return;const[tt]=et.collection.sort(et.value);set$3.highlightedItem(et,tt)},highlightItem(et,tt){set$3.highlightedItem(et,tt.value)},highlightMatchingItem(et,tt){const rt=et.collection.search(tt.key,{state:et.typeahead,currentValue:et.highlightedValue});rt!=null&&set$3.highlightedItem(et,rt)},setHighlightedItem(et,tt){set$3.highlightedItem(et,tt.value)},clearHighlightedItem(et){set$3.highlightedItem(et,null,!0)},selectItem(et,tt){const rt=et.deselectable&&!et.multiple&&et.value.includes(tt.value),nt=rt?null:tt.value;set$3.selectedItem(et,nt,rt)},clearItem(et,tt){const rt=et.value.filter(nt=>nt!==tt.value);set$3.selectedItems(et,rt)},setSelectedItems(et,tt){set$3.selectedItems(et,tt.value)},clearSelectedItems(et){set$3.selectedItems(et,[])},selectPreviousItem(et){const tt=et.collection.getPreviousValue(et.value[0]);set$3.selectedItem(et,tt)},selectNextItem(et){const tt=et.collection.getNextValue(et.value[0]);set$3.selectedItem(et,tt)},selectFirstItem(et){const tt=et.collection.firstValue;set$3.selectedItem(et,tt)},selectLastItem(et){const tt=et.collection.lastValue;set$3.selectedItem(et,tt)},selectMatchingItem(et,tt){const rt=et.collection.search(tt.key,{state:et.typeahead,currentValue:et.value[0]});rt!=null&&set$3.selectedItem(et,rt)},scrollContentToTop(et){var tt;et.scrollToIndexFn?et.scrollToIndexFn({index:0,immediate:!0}):(tt=dom$a.getContentEl(et))==null||tt.scrollTo(0,0)},invokeOnOpen(et){var tt;(tt=et.onOpenChange)==null||tt.call(et,{open:!0})},invokeOnClose(et){var tt;(tt=et.onOpenChange)==null||tt.call(et,{open:!1})},syncSelectElement(et){const tt=dom$a.getHiddenSelectEl(et);if(tt){if(et.value.length===0&&!et.multiple){tt.selectedIndex=-1;return}for(const rt of tt.options)rt.selected=et.value.includes(rt.value)}},setCollection(et,tt){et.collection=tt.value},syncCollection(et){const tt=et.collection.findMany(et.value),rt=et.collection.stringifyItems(tt);et.highlightedItem=et.collection.find(et.highlightedValue),et.selectedItems=tt,et.valueAsString=rt},syncSelectedItems(et){sync$1.valueChange(et)},syncHighlightedItem(et){sync$1.highlightChange(et)}}})}function dispatchChangeEvent(_e){raf$1(()=>{const _=dom$a.getHiddenSelectEl(_e);if(!_)return;const et=dom$a.getWin(_e),tt=new et.Event("change",{bubbles:!0,composed:!0});_.dispatchEvent(tt)})}var sync$1={valueChange:_e=>{const _=_e.selectedItems;_e.selectedItems=_e.value.map(et=>{const tt=_.find(rt=>_e.collection.getItemValue(rt)===et);return tt||_e.collection.find(et)}),_e.valueAsString=_e.collection.stringifyItems(_e.selectedItems)},highlightChange:_e=>{_e.highlightedItem=_e.collection.find(_e.highlightedValue)}},invoke$3={valueChange:_e=>{var _;sync$1.valueChange(_e),(_=_e.onValueChange)==null||_.call(_e,{value:Array.from(_e.value),items:Array.from(_e.selectedItems)}),dispatchChangeEvent(_e)},highlightChange:_e=>{var _;sync$1.highlightChange(_e),(_=_e.onHighlightChange)==null||_.call(_e,{highlightedValue:_e.highlightedValue,highlightedItem:_e.highlightedItem,highlightedIndex:_e.collection.indexOf(_e.highlightedValue)})}},set$3={selectedItem:(_e,_,et=!1)=>{if(!isEqual$1(_e.value,_)&&!(_==null&&!et)){if(_==null&&et){_e.value=[],invoke$3.valueChange(_e);return}_e.value=_e.multiple?addOrRemove(_e.value,_):[_],invoke$3.valueChange(_e)}},selectedItems:(_e,_)=>{isEqual$1(_e.value,_)||(_e.value=_,invoke$3.valueChange(_e))},highlightedItem:(_e,_,et=!1)=>{isEqual$1(_e.highlightedValue,_)||_==null&&!et||(_e.highlightedValue=_??null,invoke$3.highlightChange(_e))}};createProps()(["closeOnSelect","collection","dir","disabled","deselectable","form","getRootNode","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onValueChange","open.controlled","open","composite","positioning","required","readOnly","scrollToIndexFn","value"]);createProps()(["item","persistFocus"]);createProps()(["id"]);createProps()(["htmlFor"]);const useSelect=_e=>{const{collection:_,...et}=_e,tt=useLocaleContext(),rt=useEnvironmentContext(),nt=useFieldContext(),ot={id:reactExports.useId(),ids:{label:nt==null?void 0:nt.ids.label,hiddenSelect:nt==null?void 0:nt.ids.control},disabled:nt==null?void 0:nt.disabled,readOnly:nt==null?void 0:nt.readOnly,invalid:nt==null?void 0:nt.invalid,required:nt==null?void 0:nt.required,dir:tt.dir,getRootNode:rt.getRootNode,collection:_,open:_e.defaultOpen,value:_e.defaultValue,"open.controlled":_e.open!==void 0,...et},at=(()=>{const{collection:st,...it}=ot;return{...it,value:_e.value,onValueChange:useEvent(_e.onValueChange,{sync:!0}),onHighlightChange:useEvent(_e.onHighlightChange),onOpenChange:useEvent(_e.onOpenChange)}})(),[lt,ct,dt]=useMachine(machine$4(ot),{context:at});return reactExports.useEffect(()=>{dt.setContext({collection:_})},[_]),connect$5(lt,ct,normalizeProps)},SelectImpl$1=(_e,_)=>{const[et,tt]=splitPresenceProps(_e),[rt,nt]=createSplitProps()(tt,["closeOnSelect","collection","composite","defaultOpen","defaultValue","deselectable","disabled","form","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onValueChange","open","positioning","readOnly","required","scrollToIndexFn","value"]),ot=useSelect(rt),at=usePresence(mergeProps({present:ot.open},et)),lt=mergeProps(ot.getRootProps(),nt);return jsxRuntimeExports.jsx(SelectProvider,{value:ot,children:jsxRuntimeExports.jsx(PresenceProvider,{value:at,children:jsxRuntimeExports.jsx(ark.div,{...lt,ref:_})})})},SelectRoot$2=reactExports.forwardRef(SelectImpl$1),SelectImpl=(_e,_)=>{const[et,tt]=splitPresenceProps(_e),[{value:rt},nt]=createSplitProps()(tt,["value"]),ot=usePresence(mergeProps({present:rt.open},et)),at=mergeProps(rt.getRootProps(),nt);return jsxRuntimeExports.jsx(SelectProvider,{value:rt,children:jsxRuntimeExports.jsx(PresenceProvider,{value:ot,children:jsxRuntimeExports.jsx(ark.div,{...at,ref:_})})})},SelectRootProvider=reactExports.forwardRef(SelectImpl),SelectTrigger$2=reactExports.forwardRef((_e,_)=>{const et=useSelectContext(),tt=mergeProps(et.getTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});SelectTrigger$2.displayName="SelectTrigger";const SelectValueText$2=reactExports.forwardRef((_e,_)=>{const{children:et,placeholder:tt,...rt}=_e,nt=useSelectContext(),ot=mergeProps(nt.getValueTextProps(),rt);return jsxRuntimeExports.jsx(ark.span,{...ot,ref:_,children:et||nt.valueAsString||tt})});SelectValueText$2.displayName="SelectValueText";var anatomy$a=createAnatomy("slider").parts("root","label","thumb","valueText","track","range","control","markerGroup","marker","draggingIndicator");anatomy$a.build();function getBounds(_e){const _=_e[0],et=_e[_e.length-1];return[_,et]}function getRangeOffsets(_e){const[_,et]=getBounds(_e.valuePercent);if(_e.valuePercent.length===1){if(_e.origin==="center"){const tt=_e.valuePercent[0]<50,rt=tt?`${_e.valuePercent[0]}%`:"50%",nt=tt?"50%":`${100-_e.valuePercent[0]}%`;return{start:rt,end:nt}}return{start:"0%",end:`${100-et}%`}}return{start:`${_}%`,end:`${100-et}%`}}function getRangeStyle(_e){return _e.isVertical?{position:"absolute",bottom:"var(--slider-range-start)",top:"var(--slider-range-end)"}:{position:"absolute",[_e.isRtl?"right":"left"]:"var(--slider-range-start)",[_e.isRtl?"left":"right"]:"var(--slider-range-end)"}}function getVerticalThumbOffset(_e){const{height:_=0}=_e.thumbSize??{},et=getValueTransformer([_e.min,_e.max],[-_/2,_/2]);return parseFloat(et(_e.value).toFixed(2))}function getHorizontalThumbOffset(_e){const{width:_=0}=_e.thumbSize??{};if(_e.isRtl){const tt=getValueTransformer([_e.max,_e.min],[-_/2,_/2]);return-1*parseFloat(tt(_e.value).toFixed(2))}const et=getValueTransformer([_e.min,_e.max],[-_/2,_/2]);return parseFloat(et(_e.value).toFixed(2))}function getOffset(_e,_){if(_e.thumbAlignment==="center")return`${_}%`;const et=_e.isVertical?getVerticalThumbOffset(_e):getHorizontalThumbOffset(_e);return`calc(${_}% - ${et}px)`}function getThumbOffset(_e){let _=getValuePercent(_e.value,_e.min,_e.max)*100;return getOffset(_e,_)}function getVisibility(_e){let _="visible";return _e.thumbAlignment==="contain"&&!_e.hasMeasuredThumbSize&&(_="hidden"),_}function getThumbStyle(_e,_){const et=_e.isVertical?"bottom":"insetInlineStart";return{visibility:getVisibility(_e),position:"absolute",transform:"var(--slider-thumb-transform)",[et]:`var(--slider-thumb-offset-${_})`}}function getControlStyle(){return{touchAction:"none",userSelect:"none",WebkitUserSelect:"none",position:"relative"}}function getRootStyle(_e){const _=getRangeOffsets(_e);return{..._e.value.reduce((tt,rt,nt)=>{const ot=getThumbOffset({..._e,value:rt});return{...tt,[`--slider-thumb-offset-${nt}`]:ot}},{}),"--slider-thumb-transform":_e.isVertical?"translateY(50%)":_e.isRtl?"translateX(50%)":"translateX(-50%)","--slider-range-start":_.start,"--slider-range-end":_.end}}function getMarkerStyle(_e,_){return{visibility:getVisibility(_e),position:"absolute",pointerEvents:"none",[_e.isHorizontal?"insetInlineStart":"bottom"]:getThumbOffset({..._e,value:_}),translate:"var(--tx) var(--ty)","--tx":_e.isHorizontal?_e.isRtl?"50%":"-50%":"0%","--ty":_e.isHorizontal?"0%":"50%"}}function getMarkerGroupStyle(){return{userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none",position:"relative"}}var styleGetterFns={getRootStyle,getControlStyle,getThumbStyle,getRangeStyle,getMarkerStyle,getMarkerGroupStyle},dom$9=createScope({...styleGetterFns,getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`slider:${_e.id}`},getThumbId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.thumb)==null?void 0:tt.call(et,_))??`slider:${_e.id}:thumb:${_}`},getHiddenInputId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.hiddenInput)==null?void 0:tt.call(et,_))??`slider:${_e.id}:input:${_}`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`slider:${_e.id}:control`},getTrackId:_e=>{var _;return((_=_e.ids)==null?void 0:_.track)??`slider:${_e.id}:track`},getRangeId:_e=>{var _;return((_=_e.ids)==null?void 0:_.range)??`slider:${_e.id}:range`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`slider:${_e.id}:label`},getValueTextId:_e=>{var _;return((_=_e.ids)==null?void 0:_.valueText)??`slider:${_e.id}:value-text`},getMarkerId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.marker)==null?void 0:tt.call(et,_))??`slider:${_e.id}:marker:${_}`},getRootEl:_e=>dom$9.getById(_e,dom$9.getRootId(_e)),getThumbEl:(_e,_)=>dom$9.getById(_e,dom$9.getThumbId(_e,_)),getHiddenInputEl:(_e,_)=>dom$9.getById(_e,dom$9.getHiddenInputId(_e,_)),getControlEl:_e=>dom$9.getById(_e,dom$9.getControlId(_e)),getElements:_e=>queryAll(dom$9.getControlEl(_e),"[role=slider]"),getFirstEl:_e=>dom$9.getElements(_e)[0],getRangeEl:_e=>dom$9.getById(_e,dom$9.getRangeId(_e)),getValueFromPoint(_e,_){const et=dom$9.getControlEl(_e);if(!et)return;const rt=getRelativePoint(_,et).getPercentValue({orientation:_e.orientation,dir:_e.dir,inverted:{y:!0}});return getPercentValue(rt,_e.min,_e.max,_e.step)},dispatchChangeEvent(_e){Array.from(_e.value).forEach((et,tt)=>{const rt=dom$9.getHiddenInputEl(_e,tt);rt&&dispatchInputValueEvent(rt,{value:et})})}});createProps()(["aria-label","aria-labelledby","dir","disabled","form","getAriaValueText","getRootNode","id","ids","invalid","max","min","minStepsBetweenThumbs","name","onFocusChange","onValueChange","onValueChangeEnd","orientation","origin","readOnly","step","thumbAlignment","thumbAlignment","thumbSize","value"]);createProps()(["index","name"]);const[SwitchProvider,useSwitchContext]=createContext({name:"SwitchContext",hookName:"useSwitchContext",providerName:"<SwitchProvider />"}),SwitchControl$1=reactExports.forwardRef((_e,_)=>{const et=useSwitchContext(),tt=mergeProps(et.getControlProps(),_e);return jsxRuntimeExports.jsx(ark.span,{...tt,ref:_})});SwitchControl$1.displayName="SwitchControl";const SwitchHiddenInput$1=reactExports.forwardRef((_e,_)=>{const et=useSwitchContext(),tt=mergeProps(et.getHiddenInputProps(),_e),rt=useFieldContext();return jsxRuntimeExports.jsx(ark.input,{"aria-describedby":rt==null?void 0:rt.ariaDescribedby,...tt,ref:_})});SwitchHiddenInput$1.displayName="SwitchHiddenInput";const SwitchLabel$1=reactExports.forwardRef((_e,_)=>{const et=useSwitchContext(),tt=mergeProps(et.getLabelProps(),_e);return jsxRuntimeExports.jsx(ark.span,{...tt,ref:_})});SwitchLabel$1.displayName="SwitchLabel";var anatomy$9=createAnatomy("switch").parts("root","label","control","thumb"),parts$4=anatomy$9.build(),dom$8=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`switch:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`switch:${_e.id}:label`},getThumbId:_e=>{var _;return((_=_e.ids)==null?void 0:_.thumb)??`switch:${_e.id}:thumb`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`switch:${_e.id}:control`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`switch:${_e.id}:input`},getRootEl:_e=>dom$8.getById(_e,dom$8.getRootId(_e)),getHiddenInputEl:_e=>dom$8.getById(_e,dom$8.getHiddenInputId(_e))});function connect$4(_e,_,et){const tt=_e.context.isDisabled,rt=_e.context.readOnly,nt=_e.context.checked,ot=!tt&&_e.context.focused,at=!tt&&_e.context.focusVisible,lt={"data-active":dataAttr$1(_e.context.active),"data-focus":dataAttr$1(ot),"data-focus-visible":dataAttr$1(at),"data-readonly":dataAttr$1(rt),"data-hover":dataAttr$1(_e.context.hovered),"data-disabled":dataAttr$1(tt),"data-state":_e.context.checked?"checked":"unchecked","data-invalid":dataAttr$1(_e.context.invalid)};return{checked:nt,disabled:tt,focused:ot,setChecked(ct){_({type:"CHECKED.SET",checked:ct,isTrusted:!1})},toggleChecked(){_({type:"CHECKED.TOGGLE",checked:nt,isTrusted:!1})},getRootProps(){return et.label({...parts$4.root.attrs,...lt,dir:_e.context.dir,id:dom$8.getRootId(_e.context),htmlFor:dom$8.getHiddenInputId(_e.context),onPointerMove(){tt||_({type:"CONTEXT.SET",context:{hovered:!0}})},onPointerLeave(){tt||_({type:"CONTEXT.SET",context:{hovered:!1}})},onClick(ct){if(tt)return;getEventTarget(ct)===dom$8.getHiddenInputEl(_e.context)&&ct.stopPropagation()}})},getLabelProps(){return et.element({...parts$4.label.attrs,...lt,dir:_e.context.dir,id:dom$8.getLabelId(_e.context)})},getThumbProps(){return et.element({...parts$4.thumb.attrs,...lt,dir:_e.context.dir,id:dom$8.getThumbId(_e.context),"aria-hidden":!0})},getControlProps(){return et.element({...parts$4.control.attrs,...lt,dir:_e.context.dir,id:dom$8.getControlId(_e.context),"aria-hidden":!0})},getHiddenInputProps(){return et.input({id:dom$8.getHiddenInputId(_e.context),type:"checkbox",required:_e.context.required,defaultChecked:nt,disabled:tt,"aria-labelledby":dom$8.getLabelId(_e.context),"aria-invalid":_e.context.invalid,name:_e.context.name,form:_e.context.form,value:_e.context.value,style:visuallyHiddenStyle,onFocus(){const ct=isFocusVisible();_({type:"CONTEXT.SET",context:{focused:!0,focusVisible:ct}})},onBlur(){_({type:"CONTEXT.SET",context:{focused:!1,focusVisible:!1}})},onClick(ct){if(rt){ct.preventDefault();return}const dt=ct.currentTarget.checked;_({type:"CHECKED.SET",checked:dt,isTrusted:!0})}})}}}var{not:not$4}=guards;function machine$3(_e){const _=compact$2(_e);return createMachine({id:"switch",initial:"ready",context:{checked:!1,label:"switch",value:"on",disabled:!1,..._,fieldsetDisabled:!1,focusVisible:!1},computed:{isDisabled:et=>et.disabled||et.fieldsetDisabled},watch:{disabled:"removeFocusIfNeeded",checked:"syncInputElement"},activities:["trackFormControlState","trackPressEvent","trackFocusVisible"],on:{"CHECKED.TOGGLE":[{guard:not$4("isTrusted"),actions:["toggleChecked","dispatchChangeEvent"]},{actions:["toggleChecked"]}],"CHECKED.SET":[{guard:not$4("isTrusted"),actions:["setChecked","dispatchChangeEvent"]},{actions:["setChecked"]}],"CONTEXT.SET":{actions:["setContext"]}},states:{ready:{}}},{guards:{isTrusted:(et,tt)=>!!tt.isTrusted},activities:{trackPressEvent(et){if(!et.isDisabled)return trackPress({pointerNode:dom$8.getRootEl(et),keyboardNode:dom$8.getHiddenInputEl(et),isValidKey:tt=>tt.key===" ",onPress:()=>et.active=!1,onPressStart:()=>et.active=!0,onPressEnd:()=>et.active=!1})},trackFocusVisible(et){if(!et.isDisabled)return trackFocusVisible({root:dom$8.getRootNode(et)})},trackFormControlState(et,tt,{send:rt,initialContext:nt}){return trackFormControl(dom$8.getHiddenInputEl(et),{onFieldsetDisabledChange(ot){et.fieldsetDisabled=ot},onFormReset(){rt({type:"CHECKED.SET",checked:!!nt.checked,src:"form-reset"})}})}},actions:{setContext(et,tt){Object.assign(et,tt.context)},syncInputElement(et){const tt=dom$8.getHiddenInputEl(et);tt&&(tt.checked=!!et.checked)},removeFocusIfNeeded(et){et.disabled&&et.focused&&(et.focused=!1)},setChecked(et,tt){set$2.checked(et,tt.checked)},toggleChecked(et,tt){set$2.checked(et,!et.checked)},dispatchChangeEvent(et){const tt=dom$8.getHiddenInputEl(et);dispatchInputCheckedEvent(tt,{checked:et.checked})}}})}var invoke$2={change:_e=>{var _;(_=_e.onCheckedChange)==null||_.call(_e,{checked:_e.checked})}},set$2={checked:(_e,_)=>{isEqual$1(_e.checked,_)||(_e.checked=_,invoke$2.change(_e))}};createProps()(["checked","dir","disabled","form","getRootNode","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]);const useSwitch=(_e={})=>{const{getRootNode:_}=useEnvironmentContext(),{dir:et}=useLocaleContext(),tt=useFieldContext(),rt={id:reactExports.useId(),ids:{label:tt==null?void 0:tt.ids.label,hiddenInput:tt==null?void 0:tt.ids.control},dir:et,disabled:tt==null?void 0:tt.disabled,readOnly:tt==null?void 0:tt.readOnly,invalid:tt==null?void 0:tt.invalid,required:tt==null?void 0:tt.required,getRootNode:_,checked:_e.defaultChecked,..._e},nt={...rt,checked:_e.checked,onCheckedChange:useEvent(_e.onCheckedChange,{sync:!0})},[ot,at]=useMachine(machine$3(rt),{context:nt});return connect$4(ot,at,normalizeProps)},SwitchRoot$1=reactExports.forwardRef((_e,_)=>{const[et,tt]=createSplitProps()(_e,["checked","defaultChecked","disabled","form","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]),rt=useSwitch(et),nt=mergeProps(rt.getRootProps(),tt);return jsxRuntimeExports.jsx(SwitchProvider,{value:rt,children:jsxRuntimeExports.jsx(ark.label,{...nt,ref:_})})});SwitchRoot$1.displayName="SwitchRoot";const SwitchRootProvider=reactExports.forwardRef((_e,_)=>{const[{value:et},tt]=createSplitProps()(_e,["value"]),rt=mergeProps(et.getRootProps(),tt);return jsxRuntimeExports.jsx(SwitchProvider,{value:et,children:jsxRuntimeExports.jsx(ark.label,{...rt,ref:_})})});SwitchRootProvider.displayName="SwitchRootProvider";const SwitchThumb$1=reactExports.forwardRef((_e,_)=>{const et=useSwitchContext(),tt=mergeProps(et.getThumbProps(),_e);return jsxRuntimeExports.jsx(ark.span,{...tt,ref:_})});SwitchThumb$1.displayName="SwitchThumb";var anatomy$8=createAnatomy("avatar").parts("root","image","fallback");anatomy$8.build();var dom$7=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`avatar:${_e.id}`},getImageId:_e=>{var _;return((_=_e.ids)==null?void 0:_.image)??`avatar:${_e.id}:image`},getFallbackId:_e=>{var _;return((_=_e.ids)==null?void 0:_.fallback)??`avatar:${_e.id}:fallback`},getRootEl:_e=>dom$7.getById(_e,dom$7.getRootId(_e)),getImageEl:_e=>dom$7.getById(_e,dom$7.getImageId(_e))});createProps()(["dir","id","ids","onStatusChange","getRootNode"]);var anatomy$7=createAnatomy("checkbox").parts("root","label","control","indicator");anatomy$7.build();var dom$6=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`checkbox:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`checkbox:${_e.id}:label`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`checkbox:${_e.id}:control`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`checkbox:${_e.id}:input`},getRootEl:_e=>dom$6.getById(_e,dom$6.getRootId(_e)),getHiddenInputEl:_e=>dom$6.getById(_e,dom$6.getHiddenInputId(_e))});createProps()(["checked","dir","disabled","form","getRootNode","id","ids","invalid","name","onCheckedChange","readOnly","required","value"]);const checkboxAnatomy=anatomy$7.extendWith("group"),colorPickerAnatomy=anatomy$j.extendWith("view");var anatomy$6=createAnatomy("hoverCard").parts("arrow","arrowTip","trigger","positioner","content");anatomy$6.build();var dom$5=createScope({getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`hover-card:${_e.id}:trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`hover-card:${_e.id}:content`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`hover-card:${_e.id}:popper`},getArrowId:_e=>{var _;return((_=_e.ids)==null?void 0:_.arrow)??`hover-card:${_e.id}:arrow`},getTriggerEl:_e=>dom$5.getById(_e,dom$5.getTriggerId(_e)),getContentEl:_e=>dom$5.getById(_e,dom$5.getContentId(_e)),getPositionerEl:_e=>dom$5.getById(_e,dom$5.getPositionerId(_e))});createProps()(["closeDelay","dir","getRootNode","id","ids","onOpenChange","open.controlled","open","openDelay","positioning"]);const[NumberInputProvider,useNumberInputContext]=createContext({name:"NumberInputContext",hookName:"useNumberInputContext",providerName:"<NumberInputProvider />"}),NumberInputControl$1=reactExports.forwardRef((_e,_)=>{const et=useNumberInputContext(),tt=mergeProps(et.getControlProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});NumberInputControl$1.displayName="NumberInputControl";const NumberInputDecrementTrigger$1=reactExports.forwardRef((_e,_)=>{const et=useNumberInputContext(),tt=mergeProps(et.getDecrementTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});NumberInputDecrementTrigger$1.displayName="NumberInputDecrementTrigger";const NumberInputIncrementTrigger$1=reactExports.forwardRef((_e,_)=>{const et=useNumberInputContext(),tt=mergeProps(et.getIncrementTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});NumberInputIncrementTrigger$1.displayName="NumberInputIncrementTrigger";const NumberInputInput$1=reactExports.forwardRef((_e,_)=>{const et=useNumberInputContext(),tt=mergeProps(et.getInputProps(),_e),rt=useFieldContext();return jsxRuntimeExports.jsx(ark.input,{"aria-describedby":rt==null?void 0:rt.ariaDescribedby,...tt,ref:_})});NumberInputInput$1.displayName="NumberInputInput";const NumberInputLabel=reactExports.forwardRef((_e,_)=>{const et=useNumberInputContext(),tt=mergeProps(et.getLabelProps(),_e);return jsxRuntimeExports.jsx(ark.label,{...tt,ref:_})});NumberInputLabel.displayName="NumberInputLabel";function wrap(_e,_){return(_e%_+_)%_}function roundToDevicePixel(_e){if(typeof window.devicePixelRatio!="number")return Math.round(_e);const _=window.devicePixelRatio;return Math.floor(_e*_+.5)/_}function clamp$1(_e,_){return Math.min(Math.max(nan(_e),_.min),_.max)}function countDecimals(_e){if(!Number.isFinite(_e))return 0;let _=1,et=0;for(;Math.round(_e*_)/_!==_e;)_*=10,et+=1;return et}var increment=(_e,_)=>decimalOperation(nan(_e),"+",_),decrement=(_e,_)=>decimalOperation(nan(_e),"-",_);function nan(_e){return Number.isNaN(_e)?0:_e}function isAtMax(_e,_){return nan(_e)>=_.max}function isAtMin(_e,_){return nan(_e)<=_.min}function isWithinRange(_e,_){return nan(_e)>=_.min&&nan(_e)<=_.max}function decimalOperation(_e,_,et){let tt=_==="+"?_e+et:_e-et;if(_e%1!==0||et%1!==0){const rt=10**Math.max(countDecimals(_e),countDecimals(et));_e=Math.round(_e*rt),et=Math.round(et*rt),tt=_==="+"?_e+et:_e-et,tt/=rt}return tt}let $488c6ddbf4ef74c2$var$formatterCache=new Map,$488c6ddbf4ef74c2$var$supportsSignDisplay=!1;try{$488c6ddbf4ef74c2$var$supportsSignDisplay=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let $488c6ddbf4ef74c2$var$supportsUnit=!1;try{$488c6ddbf4ef74c2$var$supportsUnit=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const $488c6ddbf4ef74c2$var$UNITS={degree:{narrow:{default:"","ja-JP":" ","zh-TW":"","sl-SI":" "}}};class $488c6ddbf4ef74c2$export$cc77c4ff7e8673c5{format(_){let et="";if(!$488c6ddbf4ef74c2$var$supportsSignDisplay&&this.options.signDisplay!=null?et=$488c6ddbf4ef74c2$export$711b50b3c525e0f2(this.numberFormatter,this.options.signDisplay,_):et=this.numberFormatter.format(_),this.options.style==="unit"&&!$488c6ddbf4ef74c2$var$supportsUnit){var tt;let{unit:rt,unitDisplay:nt="short",locale:ot}=this.resolvedOptions();if(!rt)return et;let at=(tt=$488c6ddbf4ef74c2$var$UNITS[rt])===null||tt===void 0?void 0:tt[nt];et+=at[ot]||at.default}return et}formatToParts(_){return this.numberFormatter.formatToParts(_)}formatRange(_,et){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(_,et);if(et<_)throw new RangeError("End date must be >= start date");return`${this.format(_)}  ${this.format(et)}`}formatRangeToParts(_,et){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(_,et);if(et<_)throw new RangeError("End date must be >= start date");let tt=this.numberFormatter.formatToParts(_),rt=this.numberFormatter.formatToParts(et);return[...tt.map(nt=>({...nt,source:"startRange"})),{type:"literal",value:"  ",source:"shared"},...rt.map(nt=>({...nt,source:"endRange"}))]}resolvedOptions(){let _=this.numberFormatter.resolvedOptions();return!$488c6ddbf4ef74c2$var$supportsSignDisplay&&this.options.signDisplay!=null&&(_={..._,signDisplay:this.options.signDisplay}),!$488c6ddbf4ef74c2$var$supportsUnit&&this.options.style==="unit"&&(_={..._,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),_}constructor(_,et={}){this.numberFormatter=$488c6ddbf4ef74c2$var$getCachedNumberFormatter(_,et),this.options=et}}function $488c6ddbf4ef74c2$var$getCachedNumberFormatter(_e,_={}){let{numberingSystem:et}=_;if(et&&_e.includes("-nu-")&&(_e.includes("-u-")||(_e+="-u-"),_e+=`-nu-${et}`),_.style==="unit"&&!$488c6ddbf4ef74c2$var$supportsUnit){var tt;let{unit:ot,unitDisplay:at="short"}=_;if(!ot)throw new Error('unit option must be provided with style: "unit"');if(!(!((tt=$488c6ddbf4ef74c2$var$UNITS[ot])===null||tt===void 0)&&tt[at]))throw new Error(`Unsupported unit ${ot} with unitDisplay = ${at}`);_={..._,style:"decimal"}}let rt=_e+(_?Object.entries(_).sort((ot,at)=>ot[0]<at[0]?-1:1).join():"");if($488c6ddbf4ef74c2$var$formatterCache.has(rt))return $488c6ddbf4ef74c2$var$formatterCache.get(rt);let nt=new Intl.NumberFormat(_e,_);return $488c6ddbf4ef74c2$var$formatterCache.set(rt,nt),nt}function $488c6ddbf4ef74c2$export$711b50b3c525e0f2(_e,_,et){if(_==="auto")return _e.format(et);if(_==="never")return _e.format(Math.abs(et));{let tt=!1;if(_==="always"?tt=et>0||Object.is(et,0):_==="exceptZero"&&(Object.is(et,-0)||Object.is(et,0)?et=Math.abs(et):tt=et>0),tt){let rt=_e.format(-et),nt=_e.format(et),ot=rt.replace(nt,"").replace(/\u200e|\u061C/,"");return[...ot].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),rt.replace(nt,"!!!").replace(ot,"+").replace("!!!",nt)}else return _e.format(et)}}const $6c7bd7858deea686$var$CURRENCY_SIGN_REGEX=new RegExp("^.*\\(.*\\).*$"),$6c7bd7858deea686$var$NUMBERING_SYSTEMS=["latn","arab","hanidec","deva","beng"];class $6c7bd7858deea686$export$cd11ab140839f11d{parse(_){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,_).parse(_)}isValidPartialNumber(_,et,tt){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,_).isValidPartialNumber(_,et,tt)}getNumberingSystem(_){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,_).options.numberingSystem}constructor(_,et={}){this.locale=_,this.options=et}}const $6c7bd7858deea686$var$numberParserCache=new Map;function $6c7bd7858deea686$var$getNumberParserImpl(_e,_,et){let tt=$6c7bd7858deea686$var$getCachedNumberParser(_e,_);if(!_e.includes("-nu-")&&!tt.isValidPartialNumber(et)){for(let rt of $6c7bd7858deea686$var$NUMBERING_SYSTEMS)if(rt!==tt.options.numberingSystem){let nt=$6c7bd7858deea686$var$getCachedNumberParser(_e+(_e.includes("-u-")?"-nu-":"-u-nu-")+rt,_);if(nt.isValidPartialNumber(et))return nt}}return tt}function $6c7bd7858deea686$var$getCachedNumberParser(_e,_){let et=_e+(_?Object.entries(_).sort((rt,nt)=>rt[0]<nt[0]?-1:1).join():""),tt=$6c7bd7858deea686$var$numberParserCache.get(et);return tt||(tt=new $6c7bd7858deea686$var$NumberParserImpl(_e,_),$6c7bd7858deea686$var$numberParserCache.set(et,tt)),tt}class $6c7bd7858deea686$var$NumberParserImpl{parse(_){let et=this.sanitize(_);if(this.symbols.group&&(et=$6c7bd7858deea686$var$replaceAll(et,this.symbols.group,"")),this.symbols.decimal&&(et=et.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(et=et.replace(this.symbols.minusSign,"-")),et=et.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let ot=et.indexOf("-");et=et.replace("-","");let at=et.indexOf(".");at===-1&&(at=et.length),et=et.replace(".",""),at-2===0?et=`0.${et}`:at-2===-1?et=`0.0${et}`:at-2===-2?et="0.00":et=`${et.slice(0,at-2)}.${et.slice(at-2)}`,ot>-1&&(et=`-${et}`)}let tt=et?+et:NaN;if(isNaN(tt))return NaN;if(this.options.style==="percent"){var rt,nt;let ot={...this.options,style:"decimal",minimumFractionDigits:Math.min(((rt=this.options.minimumFractionDigits)!==null&&rt!==void 0?rt:0)+2,20),maximumFractionDigits:Math.min(((nt=this.options.maximumFractionDigits)!==null&&nt!==void 0?nt:0)+2,20)};return new $6c7bd7858deea686$export$cd11ab140839f11d(this.locale,ot).parse(new $488c6ddbf4ef74c2$export$cc77c4ff7e8673c5(this.locale,ot).format(tt))}return this.options.currencySign==="accounting"&&$6c7bd7858deea686$var$CURRENCY_SIGN_REGEX.test(_)&&(tt=-1*tt),tt}sanitize(_){return _=_.replace(this.symbols.literals,""),this.symbols.minusSign&&(_=_.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(_=_.replace(",",this.symbols.decimal),_=_.replace("",this.symbols.decimal)),this.symbols.group&&(_=$6c7bd7858deea686$var$replaceAll(_,".",this.symbols.group))),this.options.locale==="fr-FR"&&(_=$6c7bd7858deea686$var$replaceAll(_,".","")),_}isValidPartialNumber(_,et=-1/0,tt=1/0){return _=this.sanitize(_),this.symbols.minusSign&&_.startsWith(this.symbols.minusSign)&&et<0?_=_.slice(this.symbols.minusSign.length):this.symbols.plusSign&&_.startsWith(this.symbols.plusSign)&&tt>0&&(_=_.slice(this.symbols.plusSign.length)),this.symbols.group&&_.startsWith(this.symbols.group)||this.symbols.decimal&&_.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(_=$6c7bd7858deea686$var$replaceAll(_,this.symbols.group,"")),_=_.replace(this.symbols.numeral,""),this.symbols.decimal&&(_=_.replace(this.symbols.decimal,"")),_.length===0)}constructor(_,et={}){this.locale=_,this.formatter=new Intl.NumberFormat(_,et),this.options=this.formatter.resolvedOptions(),this.symbols=$6c7bd7858deea686$var$getSymbols(_,this.formatter,this.options,et);var tt,rt;this.options.style==="percent"&&(((tt=this.options.minimumFractionDigits)!==null&&tt!==void 0?tt:0)>18||((rt=this.options.maximumFractionDigits)!==null&&rt!==void 0?rt:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const $6c7bd7858deea686$var$nonLiteralParts=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),$6c7bd7858deea686$var$pluralNumbers=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function $6c7bd7858deea686$var$getSymbols(_e,_,et,tt){var rt,nt,ot,at;let lt=new Intl.NumberFormat(_e,{...et,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),ct=lt.formatToParts(-10000.111),dt=lt.formatToParts(10000.111),st=$6c7bd7858deea686$var$pluralNumbers.map(Tt=>lt.formatToParts(Tt));var it;let ut=(it=(rt=ct.find(Tt=>Tt.type==="minusSign"))===null||rt===void 0?void 0:rt.value)!==null&&it!==void 0?it:"-",ht=(nt=dt.find(Tt=>Tt.type==="plusSign"))===null||nt===void 0?void 0:nt.value;!ht&&((tt==null?void 0:tt.signDisplay)==="exceptZero"||(tt==null?void 0:tt.signDisplay)==="always")&&(ht="+");let gt=(ot=new Intl.NumberFormat(_e,{...et,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(Tt=>Tt.type==="decimal"))===null||ot===void 0?void 0:ot.value,mt=(at=ct.find(Tt=>Tt.type==="group"))===null||at===void 0?void 0:at.value,yt=ct.filter(Tt=>!$6c7bd7858deea686$var$nonLiteralParts.has(Tt.type)).map(Tt=>$6c7bd7858deea686$var$escapeRegex(Tt.value)),bt=st.flatMap(Tt=>Tt.filter(Rt=>!$6c7bd7858deea686$var$nonLiteralParts.has(Rt.type)).map(Rt=>$6c7bd7858deea686$var$escapeRegex(Rt.value))),vt=[...new Set([...yt,...bt])].sort((Tt,Rt)=>Rt.length-Tt.length),xt=vt.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${vt.join("|")}|[\\p{White_Space}]`,"gu"),wt=[...new Intl.NumberFormat(et.locale,{useGrouping:!1}).format(9876543210)].reverse(),St=new Map(wt.map((Tt,Rt)=>[Tt,Rt])),Et=new RegExp(`[${wt.join("")}]`,"g");return{minusSign:ut,plusSign:ht,decimal:gt,group:mt,literals:xt,numeral:Et,index:Tt=>String(St.get(Tt))}}function $6c7bd7858deea686$var$replaceAll(_e,_,et){return _e.replaceAll?_e.replaceAll(_,et):_e.split(_).join(et)}function $6c7bd7858deea686$var$escapeRegex(_e){return _e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var anatomy$5=createAnatomy("numberInput").parts("root","label","input","control","valueText","incrementTrigger","decrementTrigger","scrubber"),parts$3=anatomy$5.build(),dom$4=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`number-input:${_e.id}`},getInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.input)??`number-input:${_e.id}:input`},getIncrementTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.incrementTrigger)??`number-input:${_e.id}:inc`},getDecrementTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.decrementTrigger)??`number-input:${_e.id}:dec`},getScrubberId:_e=>{var _;return((_=_e.ids)==null?void 0:_.scrubber)??`number-input:${_e.id}:scrubber`},getCursorId:_e=>`number-input:${_e.id}:cursor`,getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`number-input:${_e.id}:label`},getInputEl:_e=>dom$4.getById(_e,dom$4.getInputId(_e)),getIncrementTriggerEl:_e=>dom$4.getById(_e,dom$4.getIncrementTriggerId(_e)),getDecrementTriggerEl:_e=>dom$4.getById(_e,dom$4.getDecrementTriggerId(_e)),getScrubberEl:_e=>dom$4.getById(_e,dom$4.getScrubberId(_e)),getCursorEl:_e=>dom$4.getDoc(_e).getElementById(dom$4.getCursorId(_e)),getPressedTriggerEl:(_e,_=_e.hint)=>{let et=null;return _==="increment"&&(et=dom$4.getIncrementTriggerEl(_e)),_==="decrement"&&(et=dom$4.getDecrementTriggerEl(_e)),et},setupVirtualCursor(_e){if(!isSafari())return dom$4.createVirtualCursor(_e),()=>{var _;(_=dom$4.getCursorEl(_e))==null||_.remove()}},preventTextSelection(_e){const _=dom$4.getDoc(_e),et=_.documentElement,tt=_.body;return tt.style.pointerEvents="none",et.style.userSelect="none",et.style.cursor="ew-resize",()=>{tt.style.pointerEvents="",et.style.userSelect="",et.style.cursor="",et.style.length||et.removeAttribute("style"),tt.style.length||tt.removeAttribute("style")}},getMousemoveValue(_e,_){const et=roundToDevicePixel(_.movementX),tt=roundToDevicePixel(_.movementY);let rt=et>0?"increment":et<0?"decrement":null;_e.isRtl&&rt==="increment"&&(rt="decrement"),_e.isRtl&&rt==="decrement"&&(rt="increment");const nt={x:_e.scrubberCursorPoint.x+et,y:_e.scrubberCursorPoint.y+tt},at=dom$4.getWin(_e).innerWidth,lt=roundToDevicePixel(7.5);return nt.x=wrap(nt.x+lt,at)-lt,{hint:rt,point:nt}},createVirtualCursor(_e){const _=dom$4.getDoc(_e),et=_.createElement("div");et.className="scrubber--cursor",et.id=dom$4.getCursorId(_e),Object.assign(et.style,{width:"15px",height:"15px",position:"fixed",pointerEvents:"none",left:"0px",top:"0px",zIndex:MAX_Z_INDEX,transform:_e.scrubberCursorPoint?`translate3d(${_e.scrubberCursorPoint.x}px, ${_e.scrubberCursorPoint.y}px, 0px)`:void 0,willChange:"transform"}),et.innerHTML=`
        <svg width="46" height="15" style="left: -15.5px; position: absolute; top: 0; filter: drop-shadow(rgba(0, 0, 0, 0.4) 0px 1px 1.1px);">
          <g transform="translate(2 3)">
            <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z" style="stroke-width: 2px; stroke: white;"></path>
            <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z"></path>
          </g>
        </svg>`,_.body.appendChild(et)}});function connect$3(_e,_,et){const tt=_e.hasTag("focus"),rt=_e.context.isDisabled,nt=_e.context.readOnly,ot=_e.context.isValueEmpty,at=_e.context.isOutOfRange||!!_e.context.invalid,lt=rt||!_e.context.canIncrement||nt,ct=rt||!_e.context.canDecrement||nt,dt=_e.context.translations;return{focused:tt,invalid:at,empty:ot,value:_e.context.formattedValue,valueAsNumber:_e.context.valueAsNumber,setValue(st){_({type:"VALUE.SET",value:st})},clearValue(){_("VALUE.CLEAR")},increment(){_("VALUE.INCREMENT")},decrement(){_("VALUE.DECREMENT")},setToMax(){_({type:"VALUE.SET",value:_e.context.max})},setToMin(){_({type:"VALUE.SET",value:_e.context.min})},focus(){var st;(st=dom$4.getInputEl(_e.context))==null||st.focus()},getRootProps(){return et.element({id:dom$4.getRootId(_e.context),...parts$3.root.attrs,dir:_e.context.dir,"data-disabled":dataAttr$1(rt),"data-focus":dataAttr$1(tt),"data-invalid":dataAttr$1(at)})},getLabelProps(){return et.label({...parts$3.label.attrs,dir:_e.context.dir,"data-disabled":dataAttr$1(rt),"data-focus":dataAttr$1(tt),"data-invalid":dataAttr$1(at),id:dom$4.getLabelId(_e.context),htmlFor:dom$4.getInputId(_e.context)})},getControlProps(){return et.element({...parts$3.control.attrs,dir:_e.context.dir,role:"group","aria-disabled":rt,"data-focus":dataAttr$1(tt),"data-disabled":dataAttr$1(rt),"data-invalid":dataAttr$1(at),"aria-invalid":ariaAttr(_e.context.invalid)})},getValueTextProps(){return et.element({...parts$3.valueText.attrs,dir:_e.context.dir,"data-disabled":dataAttr$1(rt),"data-invalid":dataAttr$1(at),"data-focus":dataAttr$1(tt)})},getInputProps(){return et.input({...parts$3.input.attrs,dir:_e.context.dir,name:_e.context.name,form:_e.context.form,id:dom$4.getInputId(_e.context),role:"spinbutton",defaultValue:_e.context.formattedValue,pattern:_e.context.pattern,inputMode:_e.context.inputMode,"aria-invalid":ariaAttr(at),"data-invalid":dataAttr$1(at),disabled:rt,"data-disabled":dataAttr$1(rt),readOnly:_e.context.readOnly,required:_e.context.required,autoComplete:"off",autoCorrect:"off",spellCheck:"false",type:"text","aria-roledescription":"numberfield","aria-valuemin":_e.context.min,"aria-valuemax":_e.context.max,"aria-valuenow":Number.isNaN(_e.context.valueAsNumber)?void 0:_e.context.valueAsNumber,"aria-valuetext":_e.context.valueText,onFocus(){_("INPUT.FOCUS")},onBlur(){_("INPUT.BLUR")},onInput(st){_({type:"INPUT.CHANGE",target:st.currentTarget,hint:"set"})},onBeforeInput(st){try{const{selectionStart:it,selectionEnd:ut,value:ht}=st.currentTarget,ft=ht.slice(0,it)+(st.data??"")+ht.slice(ut);_e.context.parser.isValidPartialNumber(ft)||st.preventDefault()}catch{}},onKeyDown(st){if(st.defaultPrevented||nt||isComposingEvent(st))return;const it=getEventStep(st)*_e.context.step,ht={ArrowUp(){_({type:"INPUT.ARROW_UP",step:it}),st.preventDefault()},ArrowDown(){_({type:"INPUT.ARROW_DOWN",step:it}),st.preventDefault()},Home(){isModifierKey(st)||(_("INPUT.HOME"),st.preventDefault())},End(){isModifierKey(st)||(_("INPUT.END"),st.preventDefault())},Enter(){_("INPUT.ENTER")}}[st.key];ht==null||ht(st)}})},getDecrementTriggerProps(){return et.button({...parts$3.decrementTrigger.attrs,dir:_e.context.dir,id:dom$4.getDecrementTriggerId(_e.context),disabled:ct,"data-disabled":dataAttr$1(ct),"aria-label":dt.decrementLabel,type:"button",tabIndex:-1,"aria-controls":dom$4.getInputId(_e.context),onPointerDown(st){var it;ct||!isLeftClick(st)||(_({type:"TRIGGER.PRESS_DOWN",hint:"decrement",pointerType:st.pointerType}),st.pointerType==="mouse"&&st.preventDefault(),st.pointerType==="touch"&&((it=st.currentTarget)==null||it.focus({preventScroll:!0})))},onPointerUp(st){_({type:"TRIGGER.PRESS_UP",hint:"decrement",pointerType:st.pointerType})},onPointerLeave(){ct||_({type:"TRIGGER.PRESS_UP",hint:"decrement"})}})},getIncrementTriggerProps(){return et.button({...parts$3.incrementTrigger.attrs,dir:_e.context.dir,id:dom$4.getIncrementTriggerId(_e.context),disabled:lt,"data-disabled":dataAttr$1(lt),"aria-label":dt.incrementLabel,type:"button",tabIndex:-1,"aria-controls":dom$4.getInputId(_e.context),onPointerDown(st){var it;lt||!isLeftClick(st)||(_({type:"TRIGGER.PRESS_DOWN",hint:"increment",pointerType:st.pointerType}),st.pointerType==="mouse"&&st.preventDefault(),st.pointerType==="touch"&&((it=st.currentTarget)==null||it.focus({preventScroll:!0})))},onPointerUp(st){_({type:"TRIGGER.PRESS_UP",hint:"increment",pointerType:st.pointerType})},onPointerLeave(st){_({type:"TRIGGER.PRESS_UP",hint:"increment",pointerType:st.pointerType})}})},getScrubberProps(){return et.element({...parts$3.scrubber.attrs,dir:_e.context.dir,"data-disabled":dataAttr$1(rt),id:dom$4.getScrubberId(_e.context),role:"presentation",onMouseDown(st){if(rt)return;const it=getEventPoint(st);it.x=it.x-roundToDevicePixel(7.5),it.y=it.y-roundToDevicePixel(7.5),_({type:"SCRUBBER.PRESS_DOWN",point:it}),st.preventDefault()},style:{cursor:rt?void 0:"ew-resize"}})}}}function recordCursor(_e){if(_e.ownerDocument.activeElement===_e)try{const{selectionStart:_,selectionEnd:et,value:tt}=_e,rt=tt.substring(0,_),nt=tt.substring(et);return{start:_,end:et,value:tt,beforeTxt:rt,afterTxt:nt}}catch{}}function restoreCursor(_e,_){if(_e.ownerDocument.activeElement===_e){if(!_){_e.setSelectionRange(_e.value.length,_e.value.length);return}try{const{value:et}=_e,{beforeTxt:tt="",afterTxt:rt="",start:nt}=_;let ot=et.length;if(et.endsWith(rt))ot=et.length-rt.length;else if(et.startsWith(tt))ot=tt.length;else if(nt!=null){const at=tt[nt-1],lt=et.indexOf(at,nt-1);lt!==-1&&(ot=lt+1)}_e.setSelectionRange(ot,ot)}catch{}}}var createFormatter=(_e,_={})=>ref$1(new Intl.NumberFormat(_e,_)),createParser=(_e,_={})=>ref$1(new $6c7bd7858deea686$export$cd11ab140839f11d(_e,_)),parseValue=(_e,_)=>_e.formatOptions?_e.parser.parse(String(_)):parseFloat(_),formatValue=(_e,_)=>Number.isNaN(_)?"":_e.formatOptions?_e.formatter.format(_):_.toString(),{not:not$3,and:and$2}=guards;function machine$2(_e){const _=compact$2(_e);return createMachine({id:"number-input",initial:"idle",context:{dir:"ltr",locale:"en-US",focusInputOnChange:!0,clampValueOnBlur:!0,allowOverflow:!1,inputMode:"decimal",pattern:"[0-9]*(.[0-9]+)?",value:"",step:1,min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,invalid:!1,spinOnPress:!0,disabled:!1,readOnly:!1,..._,hint:null,scrubberCursorPoint:null,fieldsetDisabled:!1,formatter:createFormatter(_.locale||"en-US",_.formatOptions),parser:createParser(_.locale||"en-US",_.formatOptions),translations:{incrementLabel:"increment value",decrementLabel:"decrease value",..._.translations}},computed:{isRtl:et=>et.dir==="rtl",valueAsNumber:et=>parseValue(et,et.value),formattedValue:et=>formatValue(et,et.valueAsNumber),isAtMin:et=>isAtMin(et.valueAsNumber,et),isAtMax:et=>isAtMax(et.valueAsNumber,et),isOutOfRange:et=>!isWithinRange(et.valueAsNumber,et),isValueEmpty:et=>et.value==="",isDisabled:et=>!!et.disabled||et.fieldsetDisabled,canIncrement:et=>et.allowOverflow||!et.isAtMax,canDecrement:et=>et.allowOverflow||!et.isAtMin,valueText:et=>{var tt,rt;return(rt=(tt=et.translations).valueText)==null?void 0:rt.call(tt,et.value)}},watch:{formatOptions:["setFormatterAndParser","syncInputElement"],locale:["setFormatterAndParser","syncInputElement"],value:["syncInputElement"],isOutOfRange:["invokeOnInvalid"],scrubberCursorPoint:["setVirtualCursorPosition"]},activities:["trackFormControl"],on:{"VALUE.SET":{actions:["setRawValue","setHintToSet"]},"VALUE.CLEAR":{actions:["clearValue"]},"VALUE.INCREMENT":{actions:["increment"]},"VALUE.DECREMENT":{actions:["decrement"]}},states:{idle:{on:{"TRIGGER.PRESS_DOWN":[{guard:"isTouchPointer",target:"before:spin",actions:["setHint"]},{target:"before:spin",actions:["focusInput","invokeOnFocus","setHint"]}],"SCRUBBER.PRESS_DOWN":{target:"scrubbing",actions:["focusInput","invokeOnFocus","setHint","setCursorPoint"]},"INPUT.FOCUS":{target:"focused",actions:["focusInput","invokeOnFocus"]}}},focused:{tags:"focus",activities:"attachWheelListener",on:{"TRIGGER.PRESS_DOWN":[{guard:"isTouchPointer",target:"before:spin",actions:["setHint"]},{target:"before:spin",actions:["focusInput","setHint"]}],"SCRUBBER.PRESS_DOWN":{target:"scrubbing",actions:["focusInput","setHint","setCursorPoint"]},"INPUT.ARROW_UP":{actions:"increment"},"INPUT.ARROW_DOWN":{actions:"decrement"},"INPUT.HOME":{actions:"decrementToMin"},"INPUT.END":{actions:"incrementToMax"},"INPUT.CHANGE":{actions:["setValue","setHint"]},"INPUT.BLUR":[{guard:and$2("clampValueOnBlur",not$3("isInRange")),target:"idle",actions:["setClampedValue","clearHint","invokeOnBlur"]},{target:"idle",actions:["setFormattedValue","clearHint","invokeOnBlur"]}],"INPUT.ENTER":{actions:["setFormattedValue","clearHint","invokeOnBlur"]}}},"before:spin":{tags:"focus",activities:"trackButtonDisabled",entry:choose([{guard:"isIncrementHint",actions:"increment"},{guard:"isDecrementHint",actions:"decrement"}]),after:{CHANGE_DELAY:{target:"spinning",guard:and$2("isInRange","spinOnPress")}},on:{"TRIGGER.PRESS_UP":[{guard:"isTouchPointer",target:"focused",actions:"clearHint"},{target:"focused",actions:["focusInput","clearHint"]}]}},spinning:{tags:"focus",activities:"trackButtonDisabled",every:[{delay:"CHANGE_INTERVAL",guard:and$2(not$3("isAtMin"),"isIncrementHint"),actions:"increment"},{delay:"CHANGE_INTERVAL",guard:and$2(not$3("isAtMax"),"isDecrementHint"),actions:"decrement"}],on:{"TRIGGER.PRESS_UP":{target:"focused",actions:["focusInput","clearHint"]}}},scrubbing:{tags:"focus",activities:["activatePointerLock","trackMousemove","setupVirtualCursor","preventTextSelection"],on:{"SCRUBBER.POINTER_UP":{target:"focused",actions:["focusInput","clearCursorPoint"]},"SCRUBBER.POINTER_MOVE":[{guard:"isIncrementHint",actions:["increment","setCursorPoint"]},{guard:"isDecrementHint",actions:["decrement","setCursorPoint"]}]}}}},{delays:{CHANGE_INTERVAL:50,CHANGE_DELAY:300},guards:{clampValueOnBlur:et=>et.clampValueOnBlur,isAtMin:et=>et.isAtMin,spinOnPress:et=>!!et.spinOnPress,isAtMax:et=>et.isAtMax,isInRange:et=>!et.isOutOfRange,isDecrementHint:(et,tt)=>(tt.hint??et.hint)==="decrement",isIncrementHint:(et,tt)=>(tt.hint??et.hint)==="increment",isTouchPointer:(et,tt)=>tt.pointerType==="touch"},activities:{trackFormControl(et,tt,{initialContext:rt}){const nt=dom$4.getInputEl(et);return trackFormControl(nt,{onFieldsetDisabledChange(ot){et.fieldsetDisabled=ot},onFormReset(){set$1.value(et,rt.value)}})},setupVirtualCursor(et){return dom$4.setupVirtualCursor(et)},preventTextSelection(et){return dom$4.preventTextSelection(et)},trackButtonDisabled(et,tt,{send:rt}){const nt=dom$4.getPressedTriggerEl(et,et.hint);return observeAttributes(nt,{attributes:["disabled"],callback(){rt({type:"TRIGGER.PRESS_UP",src:"attr"})}})},attachWheelListener(et,tt,{send:rt}){const nt=dom$4.getInputEl(et);if(!nt||!dom$4.isActiveElement(et,nt)||!et.allowMouseWheel)return;function ot(at){at.preventDefault();const lt=Math.sign(at.deltaY)*-1;lt===1?rt("VALUE.INCREMENT"):lt===-1&&rt("VALUE.DECREMENT")}return addDomEvent(nt,"wheel",ot,{passive:!1})},activatePointerLock(et){if(!isSafari())return requestPointerLock(dom$4.getDoc(et))},trackMousemove(et,tt,{send:rt}){const nt=dom$4.getDoc(et);function ot(lt){if(!et.scrubberCursorPoint)return;const ct=dom$4.getMousemoveValue(et,lt);ct.hint&&rt({type:"SCRUBBER.POINTER_MOVE",hint:ct.hint,point:ct.point})}function at(){rt("SCRUBBER.POINTER_UP")}return callAll(addDomEvent(nt,"mousemove",ot,!1),addDomEvent(nt,"mouseup",at,!1))}},actions:{focusInput(et){if(!et.focusInputOnChange)return;const tt=dom$4.getInputEl(et);dom$4.isActiveElement(et,tt)||raf$1(()=>tt==null?void 0:tt.focus({preventScroll:!0}))},increment(et,tt){const rt=increment(et.valueAsNumber,tt.step??et.step),nt=formatValue(et,clamp$1(rt,et));set$1.value(et,nt)},decrement(et,tt){const rt=decrement(et.valueAsNumber,tt.step??et.step),nt=formatValue(et,clamp$1(rt,et));set$1.value(et,nt)},setClampedValue(et){const tt=clamp$1(et.valueAsNumber,et);set$1.value(et,formatValue(et,tt))},setRawValue(et,tt){const rt=parseValue(et,tt.value),nt=formatValue(et,clamp$1(rt,et));set$1.value(et,nt)},setValue(et,tt){var nt;const rt=((nt=tt.target)==null?void 0:nt.value)??tt.value;set$1.value(et,rt)},clearValue(et){set$1.value(et,"")},incrementToMax(et){const tt=formatValue(et,et.max);set$1.value(et,tt)},decrementToMin(et){const tt=formatValue(et,et.min);set$1.value(et,tt)},setHint(et,tt){et.hint=tt.hint},clearHint(et){et.hint=null},setHintToSet(et){et.hint="set"},invokeOnFocus(et){var tt;(tt=et.onFocusChange)==null||tt.call(et,{focused:!0,value:et.formattedValue,valueAsNumber:et.valueAsNumber})},invokeOnBlur(et){var tt;(tt=et.onFocusChange)==null||tt.call(et,{focused:!1,value:et.formattedValue,valueAsNumber:et.valueAsNumber})},invokeOnInvalid(et){var rt;if(!et.isOutOfRange)return;const tt=et.valueAsNumber>et.max?"rangeOverflow":"rangeUnderflow";(rt=et.onValueInvalid)==null||rt.call(et,{reason:tt,value:et.formattedValue,valueAsNumber:et.valueAsNumber})},syncInputElement(et,tt){const rt=tt.type.endsWith("CHANGE")?et.value:et.formattedValue;sync.input(et,rt)},setFormattedValue(et){set$1.value(et,et.formattedValue)},setCursorPoint(et,tt){et.scrubberCursorPoint=tt.point},clearCursorPoint(et){et.scrubberCursorPoint=null},setVirtualCursorPosition(et){const tt=dom$4.getCursorEl(et);if(!tt||!et.scrubberCursorPoint)return;const{x:rt,y:nt}=et.scrubberCursorPoint;tt.style.transform=`translate3d(${rt}px, ${nt}px, 0px)`},setFormatterAndParser(et){et.locale&&(et.formatter=createFormatter(et.locale,et.formatOptions),et.parser=createParser(et.locale,et.formatOptions))}},compareFns:{formatOptions:(et,tt)=>isEqual$1(et,tt),scrubberCursorPoint:(et,tt)=>isEqual$1(et,tt)}})}var sync={input(_e,_){const et=dom$4.getInputEl(_e);if(!et)return;const tt=recordCursor(et);raf$1(()=>{setElementValue(et,_),restoreCursor(et,tt)})}},invoke$1={onChange:_e=>{var _;(_=_e.onValueChange)==null||_.call(_e,{value:_e.value,valueAsNumber:_e.valueAsNumber})}},set$1={value:(_e,_)=>{isEqual$1(_e.value,_)||(_e.value=_,invoke$1.onChange(_e))}};const useNumberInput=(_e={})=>{const{getRootNode:_}=useEnvironmentContext(),{dir:et,locale:tt}=useLocaleContext(),rt=useFieldContext(),nt={id:reactExports.useId(),ids:{label:rt==null?void 0:rt.ids.label,input:rt==null?void 0:rt.ids.control},disabled:rt==null?void 0:rt.disabled,readOnly:rt==null?void 0:rt.readOnly,required:rt==null?void 0:rt.required,invalid:rt==null?void 0:rt.invalid,dir:et,locale:tt,getRootNode:_,value:_e.defaultValue,..._e},ot={...nt,value:_e.value,onValueChange:useEvent(_e.onValueChange,{sync:!0}),onValueInvalid:useEvent(_e.onValueInvalid),onFocusChange:useEvent(_e.onFocusChange)},[at,lt]=useMachine(machine$2(nt),{context:ot});return connect$3(at,lt,normalizeProps)},NumberInputRoot$1=reactExports.forwardRef((_e,_)=>{const[et,tt]=createSplitProps()(_e,["allowMouseWheel","allowOverflow","clampValueOnBlur","defaultValue","disabled","focusInputOnChange","form","formatOptions","id","ids","inputMode","invalid","locale","max","min","name","onFocusChange","onValueChange","onValueInvalid","pattern","readOnly","required","spinOnPress","step","translations","value"]),rt=useNumberInput(et),nt=mergeProps(rt.getRootProps(),tt);return jsxRuntimeExports.jsx(NumberInputProvider,{value:rt,children:jsxRuntimeExports.jsx(ark.div,{...nt,ref:_})})});NumberInputRoot$1.displayName="NumberInputRoot";const NumberInputRootProvider=reactExports.forwardRef((_e,_)=>{const[{value:et},tt]=createSplitProps()(_e,["value"]),rt=mergeProps(et.getRootProps(),tt);return jsxRuntimeExports.jsx(NumberInputProvider,{value:et,children:jsxRuntimeExports.jsx(ark.div,{...rt,ref:_})})});NumberInputRootProvider.displayName="NumberInputRootProvider";const NumberInputScrubber=reactExports.forwardRef((_e,_)=>{const et=useNumberInputContext(),tt=mergeProps(et.getScrubberProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});NumberInputScrubber.displayName="NumberInputScrubber";const NumberInputValueText=reactExports.forwardRef((_e,_)=>{const{children:et,...tt}=_e,rt=useNumberInputContext(),nt=mergeProps(rt.getValueTextProps(),tt);return jsxRuntimeExports.jsx(ark.span,{...nt,ref:_,children:et||rt.value})});NumberInputValueText.displayName="NumberInputValueText";var anatomy$4=createAnatomy("pinInput").parts("root","label","input","control");anatomy$4.build();var dom$3=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`pin-input:${_e.id}`},getInputId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.input)==null?void 0:tt.call(et,_))??`pin-input:${_e.id}:${_}`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`pin-input:${_e.id}:hidden`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`pin-input:${_e.id}:label`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`pin-input:${_e.id}:control`},getRootEl:_e=>dom$3.getById(_e,dom$3.getRootId(_e)),getInputEls:_e=>{const et=`input[data-ownedby=${CSS.escape(dom$3.getRootId(_e))}]`;return queryAll(dom$3.getRootEl(_e),et)},getInputEl:(_e,_)=>dom$3.getById(_e,dom$3.getInputId(_e,_)),getFocusedInputEl:_e=>dom$3.getInputEls(_e)[_e.focusedIndex],getFirstInputEl:_e=>dom$3.getInputEls(_e)[0],getHiddenInputEl:_e=>dom$3.getById(_e,dom$3.getHiddenInputId(_e))}),anatomy$3=createAnatomy("progress").parts("root","label","track","range","valueText","view","circle","circleTrack","circleRange");anatomy$3.build();createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`progress-${_e.id}`},getTrackId:_e=>{var _;return((_=_e.ids)==null?void 0:_.track)??`progress-${_e.id}-track`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`progress-${_e.id}-label`},getCircleId:_e=>{var _;return((_=_e.ids)==null?void 0:_.circle)??`progress-${_e.id}-circle`}});createProps()(["dir","getRootNode","id","ids","max","min","orientation","translations","value"]);const segmentGroupAnatomy=anatomy$d.rename("segment-group");segmentGroupAnatomy.build();const[TooltipProvider,useTooltipContext]=createContext({name:"TooltipContext",hookName:"useTooltipContext",providerName:"<TooltipProvider />"}),TooltipArrow$1=reactExports.forwardRef((_e,_)=>{const et=useTooltipContext(),tt=mergeProps(et.getArrowProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});TooltipArrow$1.displayName="TooltipArrow";const TooltipArrowTip$1=reactExports.forwardRef((_e,_)=>{const et=useTooltipContext(),tt=mergeProps(et.getArrowTipProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});TooltipArrowTip$1.displayName="TooltipArrowTip";const TooltipContent$1=reactExports.forwardRef((_e,_)=>{const et=useTooltipContext(),tt=usePresenceContext(),rt=mergeProps(et.getContentProps(),tt.getPresenceProps(),_e);return tt.unmounted?null:jsxRuntimeExports.jsx(ark.div,{...rt,ref:composeRefs(tt.ref,_)})});TooltipContent$1.displayName="TooltipContent";const TooltipPositioner$1=reactExports.forwardRef((_e,_)=>{const et=useTooltipContext(),tt=mergeProps(et.getPositionerProps(),_e);return usePresenceContext().unmounted?null:jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});TooltipPositioner$1.displayName="TooltipPositioner";var anatomy$2=createAnatomy("tooltip").parts("trigger","arrow","arrowTip","positioner","content"),parts$2=anatomy$2.build(),dom$2=createScope({getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`tooltip:${_e.id}:trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`tooltip:${_e.id}:content`},getArrowId:_e=>{var _;return((_=_e.ids)==null?void 0:_.arrow)??`tooltip:${_e.id}:arrow`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`tooltip:${_e.id}:popper`},getTriggerEl:_e=>dom$2.getById(_e,dom$2.getTriggerId(_e)),getContentEl:_e=>dom$2.getById(_e,dom$2.getContentId(_e)),getPositionerEl:_e=>dom$2.getById(_e,dom$2.getPositionerId(_e)),getArrowEl:_e=>dom$2.getById(_e,dom$2.getArrowId(_e))}),store=proxy({id:null,prevId:null,setId(_e){this.prevId=this.id,this.id=_e}});function connect$2(_e,_,et){const tt=_e.context.id,rt=_e.context.hasAriaLabel,nt=_e.hasTag("open"),ot=dom$2.getTriggerId(_e.context),at=dom$2.getContentId(_e.context),lt=_e.context.disabled,ct=getPlacementStyles({..._e.context.positioning,placement:_e.context.currentPlacement});return{open:nt,setOpen(dt){dt!==nt&&_(dt?"OPEN":"CLOSE")},reposition(dt={}){_({type:"POSITIONING.SET",options:dt})},getTriggerProps(){return et.button({...parts$2.trigger.attrs,id:ot,dir:_e.context.dir,"data-expanded":dataAttr$1(nt),"data-state":nt?"open":"closed","aria-describedby":nt?at:void 0,onClick(dt){dt.defaultPrevented||lt||_e.context.closeOnClick&&_({type:"CLOSE",src:"trigger.click"})},onFocus(dt){dt.defaultPrevented||lt||_e.event.src!=="trigger.pointerdown"&&isFocusVisible()&&_({type:"OPEN",src:"trigger.focus"})},onBlur(dt){dt.defaultPrevented||lt||tt===store.id&&_({type:"CLOSE",src:"trigger.blur"})},onPointerDown(dt){dt.defaultPrevented||lt||_e.context.closeOnPointerDown&&tt===store.id&&_({type:"CLOSE",src:"trigger.pointerdown"})},onPointerMove(dt){dt.defaultPrevented||lt||dt.pointerType!=="touch"&&_("POINTER_MOVE")},onPointerLeave(){lt||_("POINTER_LEAVE")},onPointerCancel(){lt||_("POINTER_LEAVE")}})},getArrowProps(){return et.element({id:dom$2.getArrowId(_e.context),...parts$2.arrow.attrs,dir:_e.context.dir,style:ct.arrow})},getArrowTipProps(){return et.element({...parts$2.arrowTip.attrs,dir:_e.context.dir,style:ct.arrowTip})},getPositionerProps(){return et.element({id:dom$2.getPositionerId(_e.context),...parts$2.positioner.attrs,dir:_e.context.dir,style:ct.floating})},getContentProps(){return et.element({...parts$2.content.attrs,dir:_e.context.dir,hidden:!nt,"data-state":nt?"open":"closed",role:rt?void 0:"tooltip",id:rt?void 0:at,"data-placement":_e.context.currentPlacement,onPointerEnter(){_("CONTENT.POINTER_MOVE")},onPointerLeave(){_("CONTENT.POINTER_LEAVE")},style:{pointerEvents:_e.context.interactive?"auto":"none"}})}}}var{and:and$1,not:not$2}=guards;function machine$1(_e){const _=compact$2(_e);return createMachine({id:"tooltip",initial:_.open?"open":"closed",activities:["trackFocusVisible"],context:{openDelay:1e3,closeDelay:500,closeOnPointerDown:!0,closeOnEscape:!0,interactive:!1,closeOnScroll:!0,closeOnClick:!0,..._,currentPlacement:void 0,hasPointerMoveOpened:!1,positioning:{placement:"bottom",..._.positioning}},computed:{hasAriaLabel:et=>!!et["aria-label"]},watch:{disabled:["closeIfDisabled"],open:["toggleVisibility"]},states:{closed:{tags:["closed"],entry:["clearGlobalId"],on:{"CONTROLLED.OPEN":"open",OPEN:{target:"open",actions:["invokeOnOpen"]},POINTER_LEAVE:{actions:["clearPointerMoveOpened"]},POINTER_MOVE:[{guard:and$1("noVisibleTooltip",not$2("hasPointerMoveOpened")),target:"opening"},{guard:not$2("hasPointerMoveOpened"),target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}]}},opening:{tags:["closed"],activities:["trackScroll","trackPointerlockChange"],after:{OPEN_DELAY:[{guard:"isOpenControlled",actions:["setPointerMoveOpened","invokeOnOpen"]},{target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}]},on:{"CONTROLLED.OPEN":"open","CONTROLLED.CLOSE":"closed",OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],POINTER_LEAVE:[{guard:"isOpenControlled",actions:["clearPointerMoveOpened","invokeOnClose"]},{target:"closed",actions:["clearPointerMoveOpened","invokeOnClose"]}],CLOSE:{target:"closed",actions:["invokeOnClose"]}}},open:{tags:["open"],activities:["trackEscapeKey","trackScroll","trackPointerlockChange","trackPositioning"],entry:["setGlobalId"],on:{"CONTROLLED.CLOSE":"closed",CLOSE:{target:"closed",actions:["invokeOnClose"]},POINTER_LEAVE:[{guard:"isVisible",target:"closing",actions:["clearPointerMoveOpened"]},{guard:"isOpenControlled",actions:["clearPointerMoveOpened","invokeOnClose"]},{target:"closed",actions:["clearPointerMoveOpened","invokeOnClose"]}],"CONTENT.POINTER_LEAVE":{guard:"isInteractive",target:"closing"},"POSITIONING.SET":{actions:"reposition"}}},closing:{tags:["open"],activities:["trackStore","trackPositioning"],after:{CLOSE_DELAY:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]},on:{"CONTROLLED.CLOSE":"closed","CONTROLLED.OPEN":"open",CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],POINTER_MOVE:[{guard:"isOpenControlled",actions:["setPointerMoveOpened","invokeOnOpen"]},{target:"open",actions:["setPointerMoveOpened","invokeOnOpen"]}],"CONTENT.POINTER_MOVE":{guard:"isInteractive",target:"open"},"POSITIONING.SET":{actions:"reposition"}}}}},{activities:{trackFocusVisible(et){return trackFocusVisible({root:dom$2.getRootNode(et)})},trackPositioning(et){et.currentPlacement=et.positioning.placement;const tt=()=>dom$2.getPositionerEl(et);return getPlacement(dom$2.getTriggerEl(et),tt,{...et.positioning,defer:!0,onComplete(rt){et.currentPlacement=rt.placement}})},trackPointerlockChange(et,tt,{send:rt}){const nt=()=>rt({type:"CLOSE",src:"pointerlock:change"});return addDomEvent(dom$2.getDoc(et),"pointerlockchange",nt,!1)},trackScroll(et,tt,{send:rt}){if(!et.closeOnScroll)return;const nt=dom$2.getTriggerEl(et);if(!nt)return;const at=getOverflowAncestors$1(nt).map(lt=>addDomEvent(lt,"scroll",()=>{rt({type:"CLOSE",src:"scroll"})},{passive:!0,capture:!0}));return()=>{at.forEach(lt=>lt==null?void 0:lt())}},trackStore(et,tt,{send:rt}){return subscribe$1(store,()=>{store.id!==et.id&&rt({type:"CLOSE",src:"id.change"})})},trackEscapeKey(et,tt,{send:rt}){if(!et.closeOnEscape)return;const nt=ot=>{isComposingEvent(ot)||ot.key==="Escape"&&(ot.stopPropagation(),rt({type:"CLOSE",src:"keydown.escape"}))};return addDomEvent(dom$2.getDoc(et),"keydown",nt,!0)}},actions:{setGlobalId(et){store.setId(et.id)},clearGlobalId(et){et.id===store.id&&store.setId(null)},invokeOnOpen(et){var tt;(tt=et.onOpenChange)==null||tt.call(et,{open:!0})},invokeOnClose(et){var tt;(tt=et.onOpenChange)==null||tt.call(et,{open:!1})},closeIfDisabled(et,tt,{send:rt}){et.disabled&&rt({type:"CLOSE",src:"disabled.change"})},reposition(et,tt){const rt=()=>dom$2.getPositionerEl(et);getPlacement(dom$2.getTriggerEl(et),rt,{...et.positioning,...tt.options,defer:!0,listeners:!1,onComplete(nt){et.currentPlacement=nt.placement}})},toggleVisibility(et,tt,{send:rt}){rt({type:et.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:tt})},setPointerMoveOpened(et){et.hasPointerMoveOpened=!0},clearPointerMoveOpened(et){et.hasPointerMoveOpened=!1}},guards:{noVisibleTooltip:()=>store.id===null,isVisible:et=>et.id===store.id,isInteractive:et=>et.interactive,hasPointerMoveOpened:et=>!!et.hasPointerMoveOpened,isOpenControlled:et=>!!et["open.controlled"]},delays:{OPEN_DELAY:et=>et.openDelay,CLOSE_DELAY:et=>et.closeDelay}})}createProps()(["aria-label","closeDelay","closeOnEscape","closeOnPointerDown","closeOnScroll","closeOnClick","dir","disabled","getRootNode","id","ids","interactive","onOpenChange","open.controlled","open","openDelay","positioning"]);const useTooltip=(_e={})=>{const{getRootNode:_}=useEnvironmentContext(),{dir:et}=useLocaleContext(),tt={id:reactExports.useId(),dir:et,getRootNode:_,open:_e.defaultOpen,"open.controlled":_e.open!==void 0,..._e},rt={...tt,onOpenChange:useEvent(_e.onOpenChange,{sync:!0})},[nt,ot]=useMachine(machine$1(tt),{context:rt});return connect$2(nt,ot,normalizeProps)},TooltipRoot$1=_e=>{const[_,{children:et,...tt}]=splitPresenceProps(_e),rt=useTooltip(tt),nt=usePresence(mergeProps({present:rt.open},_));return jsxRuntimeExports.jsx(TooltipProvider,{value:rt,children:jsxRuntimeExports.jsx(PresenceProvider,{value:nt,children:et})})},TooltipRootProvider=_e=>{const[_,{value:et,children:tt}]=splitPresenceProps(_e),rt=usePresence(mergeProps({present:et.open},_));return jsxRuntimeExports.jsx(TooltipProvider,{value:et,children:jsxRuntimeExports.jsx(PresenceProvider,{value:rt,children:tt})})},TooltipTrigger$1=reactExports.forwardRef((_e,_)=>{const et=useTooltipContext(),tt=mergeProps(et.getTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});TooltipTrigger$1.displayName="TooltipTrigger";const accordionAnatomy=anatomy$l.extendWith("itemBody"),actionBarAnatomy=createAnatomy("action-bar").parts("positioner","content","separator","selectionTrigger","closeTrigger"),alertAnatomy=createAnatomy("alert").parts("title","description","root","indicator","content"),breadcrumbAnatomy=createAnatomy("breadcrumb").parts("link","currentLink","item","list","root","ellipsis","separator"),blockquoteAnatomy=createAnatomy("blockquote").parts("root","icon","content","caption"),cardAnatomy=createAnatomy("card").parts("root","header","body","footer","title","description"),checkboxCardAnatomy=createAnatomy("checkbox-card",["root","control","label","description","addon","indicator","content"]),dataListAnatomy=createAnatomy("data-list").parts("root","item","itemLabel","itemValue"),dialogAnatomy=anatomy$i.extendWith("header","body","footer","backdrop"),drawerAnatomy=anatomy$i.extendWith("header","body","footer","backdrop"),editableAnatomy=anatomy$h.extendWith("textarea"),emptyStateAnatomy=createAnatomy("empty-state",["root","content","indicator","title","description"]),fieldAnatomy=fieldAnatomy$1.extendWith("requiredIndicator"),fieldsetAnatomy=fieldsetAnatomy$1.extendWith("content"),fileUploadAnatomy=anatomy$g.extendWith("itemContent","dropzoneContent"),listAnatomy=createAnatomy("list").parts("root","item","indicator"),menuAnatomy=anatomy$f.extendWith("itemCommand"),nativeSelectAnatomy=createAnatomy("select").parts("root","field","indicator"),popoverAnatomy=anatomy$e.extendWith("header","body","footer"),radioGroupAnatomy=anatomy$d.extendWith("itemAddon","itemIndicator"),radioCardAnatomy=radioGroupAnatomy.extendWith("itemContent","itemDescription"),ratingGroupAnatomy=anatomy$c.extendWith("itemIndicator"),selectAnatomy=anatomy$b.extendWith("indicatorGroup"),sliderAnatomy=anatomy$a.extendWith("markerIndicator"),statAnatomy=createAnatomy("stat").parts("root","label","helpText","valueText","valueUnit","indicator"),statusAnatomy=createAnatomy("status").parts("root","indicator"),stepsAnatomy=createAnatomy("steps",["root","list","item","trigger","indicator","separator","content","title","description","nextTrigger","prevTrigger","progress"]),switchAnatomy=anatomy$9.extendWith("indicator"),tableAnatomy=createAnatomy("table").parts("root","header","body","row","columnHeader","cell","footer","caption"),toastAnatomy=createAnatomy("toast").parts("root","title","description","indicator","closeTrigger","actionTrigger"),tabsAnatomy=createAnatomy("tabs").parts("root","trigger","list","content","contentGroup","indicator"),tagAnatomy=createAnatomy("tag").parts("root","label","closeTrigger","startElement","endElement"),timelineAnatomy=createAnatomy("timeline").parts("root","item","content","separator","indicator","connector","title","description"),accordionSlotRecipe=defineSlotRecipe({className:"chakra-accordion",slots:accordionAnatomy.keys(),base:{root:{width:"full","--accordion-radius":"radii.l2"},item:{overflowAnchor:"none"},itemTrigger:{display:"flex",alignItems:"center",width:"full",outline:"0",gap:"3",fontWeight:"medium",borderRadius:"var(--accordion-radius)",_focusVisible:{outline:"2px solid",outlineColor:"colorPalette.focusRing"},_disabled:{layerStyle:"disabled"}},itemBody:{pt:"var(--accordion-padding-y)",pb:"calc(var(--accordion-padding-y) * 2)"},itemContent:{overflow:"hidden",borderRadius:"var(--accordion-radius)",_open:{animationName:"expand-height, fade-in",animationDuration:"moderate"},_closed:{animationName:"collapse-height, fade-out",animationDuration:"moderate"}},itemIndicator:{transition:"rotate 0.2s",transformOrigin:"center",color:"fg.subtle",_open:{rotate:"180deg"},_icon:{width:"1.2em",height:"1.2em"}}},variants:{variant:{outline:{item:{borderBottomWidth:"1px"}},subtle:{itemTrigger:{px:"var(--accordion-padding-x)"},itemContent:{px:"var(--accordion-padding-x)"},item:{borderRadius:"var(--accordion-radius)",_open:{bg:"colorPalette.subtle"}}},enclosed:{root:{borderWidth:"1px",borderRadius:"var(--accordion-radius)",divideY:"1px",overflow:"hidden"},itemTrigger:{px:"var(--accordion-padding-x)"},itemContent:{px:"var(--accordion-padding-x)"},item:{_open:{bg:"bg.subtle"}}},plain:{}},size:{sm:{root:{"--accordion-padding-x":"spacing.3","--accordion-padding-y":"spacing.2"},itemTrigger:{textStyle:"sm",py:"var(--accordion-padding-y)"}},md:{root:{"--accordion-padding-x":"spacing.4","--accordion-padding-y":"spacing.2"},itemTrigger:{textStyle:"md",py:"var(--accordion-padding-y)"}},lg:{root:{"--accordion-padding-x":"spacing.4.5","--accordion-padding-y":"spacing.2.5"},itemTrigger:{textStyle:"lg",py:"var(--accordion-padding-y)"}}}},defaultVariants:{size:"md",variant:"outline"}}),actionBarSlotRecipe=defineSlotRecipe({className:"chakra-action-bar",slots:actionBarAnatomy.keys(),base:{positioner:{position:"fixed",display:"flex",justifyContent:"center",pointerEvents:"none",insetInline:"0",top:"unset",bottom:"calc(env(safe-area-inset-bottom) + 20px)"},content:{bg:"bg.panel",shadow:"md",display:"flex",alignItems:"center",gap:"3",borderRadius:"l3",py:"2.5",px:"3",pointerEvents:"auto",translate:"calc(-1 * var(--scrollbar-width) / 2) 0px",_open:{animationName:"slide-from-bottom, fade-in",animationDuration:"moderate"},_closed:{animationName:"slide-to-bottom, fade-out",animationDuration:"faster"}},separator:{width:"1px",height:"5",bg:"border"},selectionTrigger:{display:"inline-flex",alignItems:"center",gap:"2",alignSelf:"stretch",textStyle:"sm",px:"4",py:"1",borderRadius:"l2",borderWidth:"1px",borderStyle:"dashed"}}}),alertSlotRecipe=defineSlotRecipe({slots:alertAnatomy.keys(),className:"chakra-alert",base:{root:{width:"full",display:"flex",alignItems:"flex-start",position:"relative",borderRadius:"l3"},title:{fontWeight:"medium"},description:{display:"inline"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0",width:"1em",height:"1em",_icon:{boxSize:"full"}},content:{display:"flex",flex:"1",gap:"1"}},variants:{status:{info:{root:{colorPalette:"blue"}},warning:{root:{colorPalette:"orange"}},success:{root:{colorPalette:"green"}},error:{root:{colorPalette:"red"}},neutral:{root:{colorPalette:"gray"}}},inline:{true:{content:{display:"inline-flex",flexDirection:"row",alignItems:"center"}},false:{content:{display:"flex",flexDirection:"column"}}},variant:{subtle:{root:{bg:"colorPalette.subtle",color:"colorPalette.fg"}},surface:{root:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},indicator:{color:"colorPalette.fg"}},outline:{root:{color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},indicator:{color:"colorPalette.fg"}},solid:{root:{bg:"colorPalette.solid",color:"colorPalette.contrast"},indicator:{color:"colorPalette.contrast"}}},size:{sm:{root:{gap:"2",px:"3",py:"3",textStyle:"xs"},indicator:{textStyle:"lg"}},md:{root:{gap:"3",px:"4",py:"4",textStyle:"sm"},indicator:{textStyle:"xl"}},lg:{root:{gap:"3",px:"4",py:"4",textStyle:"md"},indicator:{textStyle:"2xl"}}}},defaultVariants:{status:"info",variant:"subtle",size:"md",inline:!1}}),avatarSlotRecipe=defineSlotRecipe({slots:anatomy$8.keys(),className:"chakra-avatar",base:{root:{display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:"medium",position:"relative",verticalAlign:"top",flexShrink:"0",userSelect:"none",width:"var(--avatar-size)",height:"var(--avatar-size)",fontSize:"var(--avatar-font-size)",borderRadius:"var(--avatar-radius)","&[data-group-item]":{borderWidth:"2px",borderColor:"bg"}},image:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"var(--avatar-radius)"},fallback:{lineHeight:"1",textTransform:"uppercase",fontWeight:"medium",fontSize:"var(--avatar-font-size)",borderRadius:"var(--avatar-radius)"}},variants:{size:{full:{root:{"--avatar-size":"100%","--avatar-font-size":"100%"}},"2xs":{root:{"--avatar-font-size":"fontSizes.2xs","--avatar-size":"sizes.6"}},xs:{root:{"--avatar-font-size":"fontSizes.xs","--avatar-size":"sizes.8"}},sm:{root:{"--avatar-font-size":"fontSizes.sm","--avatar-size":"sizes.9"}},md:{root:{"--avatar-font-size":"fontSizes.md","--avatar-size":"sizes.10"}},lg:{root:{"--avatar-font-size":"fontSizes.md","--avatar-size":"sizes.11"}},xl:{root:{"--avatar-font-size":"fontSizes.lg","--avatar-size":"sizes.12"}},"2xl":{root:{"--avatar-font-size":"fontSizes.xl","--avatar-size":"sizes.16"}}},variant:{solid:{root:{bg:"colorPalette.solid",color:"colorPalette.contrast"}},subtle:{root:{bg:"colorPalette.muted",color:"colorPalette.fg"}},outline:{root:{color:"colorPalette.fg",borderWidth:"1px",borderColor:"colorPalette.muted"}}},shape:{square:{},rounded:{root:{"--avatar-radius":"radii.l3"}},full:{root:{"--avatar-radius":"radii.full"}}},borderless:{true:{root:{"&[data-group-item]":{borderWidth:"0px"}}}}},defaultVariants:{size:"md",shape:"full",variant:"subtle"}}),blockquoteSlotRecipe=defineSlotRecipe({className:"chakra-blockquote",slots:blockquoteAnatomy.keys(),base:{root:{position:"relative",display:"flex",flexDirection:"column",gap:"2"},caption:{textStyle:"sm",color:"fg.muted"},icon:{boxSize:"5"}},variants:{justify:{start:{root:{alignItems:"flex-start",textAlign:"start"}},center:{root:{alignItems:"center",textAlign:"center"}},end:{root:{alignItems:"flex-end",textAlign:"end"}}},variant:{subtle:{root:{paddingX:"5",borderStartWidth:"4px",borderStartColor:"colorPalette.muted"},icon:{color:"colorPalette.fg"}},solid:{root:{paddingX:"5",borderStartWidth:"4px",borderStartColor:"colorPalette.solid"},icon:{color:"colorPalette.solid"}},plain:{root:{paddingX:"5"},icon:{color:"colorPalette.solid"}}}},defaultVariants:{variant:"subtle",justify:"start"}}),breadcrumbSlotRecipe=defineSlotRecipe({className:"chakra-breadcrumb",slots:breadcrumbAnatomy.keys(),base:{list:{display:"flex",alignItems:"center",wordBreak:"break-word",color:"fg.muted"},link:{outline:"0",textDecoration:"none",borderRadius:"l1",focusRing:"outside",display:"inline-flex",alignItems:"center",gap:"2"},item:{display:"inline-flex",alignItems:"center"},separator:{color:"fg.muted",opacity:"0.8",_icon:{boxSize:"1em"}},ellipsis:{display:"inline-flex",alignItems:"center",justifyContent:"center",_icon:{boxSize:"1em"}}},variants:{variant:{underline:{link:{color:"colorPalette.fg",textDecoration:"underline",textUnderlineOffset:"0.2em",textDecorationColor:"colorPalette.muted"},currentLink:{color:"colorPalette.fg"}},plain:{link:{color:"fg.muted",_hover:{color:"fg"}},currentLink:{color:"fg"}}},size:{sm:{list:{gap:"1",textStyle:"xs"}},md:{list:{gap:"1.5",textStyle:"sm"}},lg:{list:{gap:"2",textStyle:"md"}}}},defaultVariants:{variant:"plain",size:"md"}}),cardSlotRecipe=defineSlotRecipe({className:"chakra-card",slots:cardAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",position:"relative",minWidth:"0",wordWrap:"break-word",borderRadius:"l3",color:"fg",textAlign:"start"},title:{fontWeight:"semibold"},description:{color:"fg.muted",fontSize:"sm"},header:{paddingInline:"var(--card-padding)",paddingTop:"var(--card-padding)",display:"flex",flexDirection:"column",gap:"1.5"},body:{padding:"var(--card-padding)",flex:"1",display:"flex",flexDirection:"column"},footer:{display:"flex",alignItems:"center",gap:"2",paddingInline:"var(--card-padding)",paddingBottom:"var(--card-padding)"}},variants:{size:{sm:{root:{"--card-padding":"spacing.4"},title:{textStyle:"md"}},md:{root:{"--card-padding":"spacing.6"},title:{textStyle:"lg"}},lg:{root:{"--card-padding":"spacing.7"},title:{textStyle:"xl"}}},variant:{elevated:{root:{bg:"bg.panel",boxShadow:"md"}},outline:{root:{bg:"bg.panel",borderWidth:"1px",borderColor:"border"}},subtle:{root:{bg:"bg.muted"}}}},defaultVariants:{variant:"outline",size:"md"}});var Go,Wo,Ho,Xo,Yo,qo,Ko,Zo,Qo,Jo,es,ts,rs,ns;const checkboxSlotRecipe=defineSlotRecipe({slots:checkboxAnatomy.keys(),className:"chakra-checkbox",base:{root:{display:"inline-flex",gap:"2",alignItems:"center",verticalAlign:"top",position:"relative"},control:checkmarkRecipe.base,label:{fontWeight:"medium",userSelect:"none",_disabled:{opacity:"0.5"}}},variants:{size:{xs:{root:{gap:"1.5"},label:{textStyle:"xs"},control:(Wo=(Go=checkmarkRecipe.variants)==null?void 0:Go.size)==null?void 0:Wo.xs},sm:{root:{gap:"2"},label:{textStyle:"sm"},control:(Xo=(Ho=checkmarkRecipe.variants)==null?void 0:Ho.size)==null?void 0:Xo.sm},md:{root:{gap:"2.5"},label:{textStyle:"sm"},control:(qo=(Yo=checkmarkRecipe.variants)==null?void 0:Yo.size)==null?void 0:qo.md},lg:{root:{gap:"3"},label:{textStyle:"md"},control:(Zo=(Ko=checkmarkRecipe.variants)==null?void 0:Ko.size)==null?void 0:Zo.lg}},variant:{outline:{control:(Jo=(Qo=checkmarkRecipe.variants)==null?void 0:Qo.variant)==null?void 0:Jo.outline},solid:{control:(ts=(es=checkmarkRecipe.variants)==null?void 0:es.variant)==null?void 0:ts.solid},subtle:{control:(ns=(rs=checkmarkRecipe.variants)==null?void 0:rs.variant)==null?void 0:ns.subtle}}},defaultVariants:{variant:"solid",size:"md"}});var is,os,ss,as,ls,us,cs;const checkboxCardSlotRecipe=defineSlotRecipe({slots:checkboxCardAnatomy.keys(),className:"chakra-checkbox-card",base:{root:{display:"flex",flexDirection:"column",userSelect:"none",position:"relative",borderRadius:"l2",flex:"1",focusVisibleRing:"outside",_disabled:{opacity:"0.8",borderColor:"border.subtle"},_invalid:{outline:"2px solid",outlineColor:"border.error"}},control:{display:"inline-flex",flex:"1",position:"relative",borderRadius:"inherit",justifyContent:"var(--checkbox-card-justify)",alignItems:"var(--checkbox-card-align)"},label:{fontWeight:"medium",display:"flex",alignItems:"center",gap:"2",_disabled:{opacity:"0.5"}},description:{opacity:"0.64",textStyle:"sm"},addon:{_disabled:{opacity:"0.5"}},indicator:checkmarkRecipe.base,content:{display:"flex",flexDirection:"column",flex:"1",gap:"1",justifyContent:"var(--checkbox-card-justify)",alignItems:"var(--checkbox-card-align)"}},variants:{size:{sm:{root:{textStyle:"sm"},control:{padding:"3",gap:"1.5"},addon:{px:"3",py:"1.5",borderTopWidth:"1px"},indicator:(is=checkmarkRecipe.variants)==null?void 0:is.size.sm},md:{root:{textStyle:"sm"},control:{padding:"4",gap:"2.5"},addon:{px:"4",py:"2",borderTopWidth:"1px"},indicator:(os=checkmarkRecipe.variants)==null?void 0:os.size.md},lg:{root:{textStyle:"md"},control:{padding:"4",gap:"3.5"},addon:{px:"4",py:"2",borderTopWidth:"1px"},indicator:(ss=checkmarkRecipe.variants)==null?void 0:ss.size.lg}},variant:{surface:{root:{borderWidth:"1px",borderColor:"border",_checked:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderColor:"colorPalette.muted"},_disabled:{bg:"bg.muted"}},indicator:(as=checkmarkRecipe.variants)==null?void 0:as.variant.solid},subtle:{root:{bg:"bg.muted"},control:{_checked:{bg:"colorPalette.muted",color:"colorPalette.fg"}},indicator:(ls=checkmarkRecipe.variants)==null?void 0:ls.variant.plain},outline:{root:{borderWidth:"1px",borderColor:"border",_checked:{boxShadow:"0 0 0 1px var(--shadow-color)",boxShadowColor:"colorPalette.solid",borderColor:"colorPalette.solid"}},indicator:(us=checkmarkRecipe.variants)==null?void 0:us.variant.solid},solid:{root:{borderWidth:"1px",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},indicator:(cs=checkmarkRecipe.variants)==null?void 0:cs.variant.inverted}},justify:{start:{root:{"--checkbox-card-justify":"flex-start"}},end:{root:{"--checkbox-card-justify":"flex-end"}},center:{root:{"--checkbox-card-justify":"center"}}},align:{start:{root:{"--checkbox-card-align":"flex-start"},content:{textAlign:"start"}},end:{root:{"--checkbox-card-align":"flex-end"},content:{textAlign:"end"}},center:{root:{"--checkbox-card-align":"center"},content:{textAlign:"center"}}},orientation:{vertical:{control:{flexDirection:"column"}},horizontal:{control:{flexDirection:"row"}}}},defaultVariants:{size:"md",variant:"outline",align:"start",orientation:"horizontal"}}),collapsibleSlotRecipe=defineSlotRecipe({slots:anatomy$k.keys(),className:"chakra-collapsible",base:{content:{overflow:"hidden",_open:{animationName:"expand-height, fade-in",animationDuration:"moderate"},_closed:{animationName:"collapse-height, fade-out",animationDuration:"moderate"}}}});var ds,hs,ps,fs,gs,ms,ys,bs,vs,xs,_s,Ss,ws,Es,Ts,Cs,Ps,As;const colorPickerSlotRecipe=defineSlotRecipe({className:"colorPicker",slots:colorPickerAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5"},label:{color:"fg",fontWeight:"medium",textStyle:"sm"},valueText:{textAlign:"start"},control:{display:"flex",alignItems:"center",flexDirection:"row",gap:"2",position:"relative"},swatchTrigger:{display:"flex",alignItems:"center",justifyContent:"center"},trigger:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",flexShrink:"0",gap:"2",textStyle:"sm",minH:"var(--input-height)",minW:"var(--input-height)",px:"1",rounded:"l2",_disabled:{opacity:"0.5"},"--focus-color":"colors.colorPalette.focusRing","&:focus-visible":{borderColor:"var(--focus-color)",outline:"1px solid var(--focus-color)"},"&[data-fit-content]":{"--input-height":"unset",px:"0",border:"0"}},content:{display:"flex",flexDirection:"column",bg:"bg.panel",borderRadius:"l3",boxShadow:"lg",width:"64",p:"4",gap:"3",zIndex:"dropdown",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},area:{height:"180px",borderRadius:"l2",overflow:"hidden"},areaThumb:{borderRadius:"full",height:"var(--thumb-size)",width:"var(--thumb-size)",borderWidth:"2px",borderColor:"white",shadow:"sm",focusVisibleRing:"mixed",focusRingColor:"white"},areaBackground:{height:"full"},channelSlider:{borderRadius:"l2",flex:"1"},channelSliderTrack:{height:"var(--slider-height)",borderRadius:"inherit",boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"},swatchGroup:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"2"},swatch:{...colorSwatchRecipe.base,borderRadius:"l1"},swatchIndicator:{color:"white",rounded:"full"},channelSliderThumb:{borderRadius:"full",height:"var(--thumb-size)",width:"var(--thumb-size)",borderWidth:"2px",borderColor:"white",shadow:"sm",transform:"translate(-50%, -50%)",focusVisibleRing:"outside",focusRingOffset:"1px"},channelInput:{...inputRecipe.base,"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:0}},formatSelect:{textStyle:"xs",textTransform:"uppercase",borderWidth:"1px",minH:"6",focusRing:"inside",rounded:"l2"},transparencyGrid:{borderRadius:"l2"},view:{display:"flex",flexDirection:"column",gap:"2"}},variants:{size:{"2xs":{channelInput:(hs=(ds=inputRecipe.variants)==null?void 0:ds.size)==null?void 0:hs["2xs"],swatch:{"--swatch-size":"sizes.4.5"},trigger:{"--input-height":"sizes.7"},area:{"--thumb-size":"sizes.3"},channelSlider:{"--slider-height":"sizes.3","--thumb-size":"sizes.3"}},xs:{channelInput:(fs=(ps=inputRecipe.variants)==null?void 0:ps.size)==null?void 0:fs.xs,swatch:{"--swatch-size":"sizes.5"},trigger:{"--input-height":"sizes.8"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},sm:{channelInput:(ms=(gs=inputRecipe.variants)==null?void 0:gs.size)==null?void 0:ms.sm,swatch:{"--swatch-size":"sizes.6"},trigger:{"--input-height":"sizes.9"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},md:{channelInput:(bs=(ys=inputRecipe.variants)==null?void 0:ys.size)==null?void 0:bs.md,swatch:{"--swatch-size":"sizes.7"},trigger:{"--input-height":"sizes.10"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},lg:{channelInput:(xs=(vs=inputRecipe.variants)==null?void 0:vs.size)==null?void 0:xs.lg,swatch:{"--swatch-size":"sizes.7"},trigger:{"--input-height":"sizes.11"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},xl:{channelInput:(Ss=(_s=inputRecipe.variants)==null?void 0:_s.size)==null?void 0:Ss.xl,swatch:{"--swatch-size":"sizes.8"},trigger:{"--input-height":"sizes.12"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},"2xl":{channelInput:(Es=(ws=inputRecipe.variants)==null?void 0:ws.size)==null?void 0:Es["2xl"],swatch:{"--swatch-size":"sizes.10"},trigger:{"--input-height":"sizes.16"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}}},variant:{outline:{channelInput:(Cs=(Ts=inputRecipe.variants)==null?void 0:Ts.variant)==null?void 0:Cs.outline,trigger:{borderWidth:"1px"}},subtle:{channelInput:(As=(Ps=inputRecipe.variants)==null?void 0:Ps.variant)==null?void 0:As.subtle,trigger:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted"}}}},defaultVariants:{size:"md",variant:"outline"}}),dataListSlotRecipe=defineSlotRecipe({slots:dataListAnatomy.keys(),className:"chakra-data-list",base:{itemLabel:{display:"flex",alignItems:"center",gap:"1"},itemValue:{display:"flex",minWidth:"0",flex:"1"}},variants:{orientation:{horizontal:{root:{display:"flex",flexDirection:"column"},item:{display:"inline-flex",alignItems:"center",gap:"4"},itemLabel:{minWidth:"120px"}},vertical:{root:{display:"flex",flexDirection:"column"},item:{display:"flex",flexDirection:"column",gap:"1"}}},size:{sm:{root:{gap:"3"},item:{textStyle:"xs"}},md:{root:{gap:"4"},item:{textStyle:"sm"}},lg:{root:{gap:"5"},item:{textStyle:"md"}}},variant:{subtle:{itemLabel:{color:"fg.muted"}},bold:{itemLabel:{fontWeight:"medium"},itemValue:{color:"fg.muted"}}}},defaultVariants:{size:"md",orientation:"vertical",variant:"subtle"}}),dialogSlotRecipe=defineSlotRecipe({slots:dialogAnatomy.keys(),className:"chakra-dialog",base:{backdrop:{bg:"blackAlpha.500",pos:"fixed",left:0,top:0,w:"100vw",h:"100dvh",zIndex:"modal",_open:{animationName:"fade-in",animationDuration:"slow"},_closed:{animationName:"fade-out",animationDuration:"moderate"}},positioner:{display:"flex",width:"100vw",height:"100dvh",position:"fixed",left:0,top:0,"--dialog-z-index":"zIndex.modal",zIndex:"calc(var(--dialog-z-index) + var(--layer-index, 0))",justifyContent:"center",overscrollBehaviorY:"none"},content:{display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,borderRadius:"l3",textStyle:"sm",my:"var(--dialog-margin, var(--dialog-base-margin))","--dialog-z-index":"zIndex.modal",zIndex:"calc(var(--dialog-z-index) + var(--layer-index, 0))",bg:"bg.panel",boxShadow:"lg",_open:{animationDuration:"moderate"},_closed:{animationDuration:"faster"}},header:{flex:0,px:"6",pt:"6",pb:"4"},body:{flex:"1",px:"6",pt:"2",pb:"6"},footer:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"3",px:"6",pt:"2",pb:"4"},title:{textStyle:"lg",fontWeight:"semibold"},description:{color:"fg.muted"}},variants:{placement:{center:{positioner:{alignItems:"center"},content:{"--dialog-base-margin":"auto",mx:"auto"}},top:{positioner:{alignItems:"flex-start"},content:{"--dialog-base-margin":"spacing.16",mx:"auto"}},bottom:{positioner:{alignItems:"flex-end"},content:{"--dialog-base-margin":"spacing.16",mx:"auto"}}},scrollBehavior:{inside:{positioner:{overflow:"hidden"},content:{maxH:"calc(100% - 7.5rem)"},body:{overflow:"auto"}},outside:{positioner:{overflow:"auto",pointerEvents:"auto"}}},size:{xs:{content:{maxW:"sm"}},sm:{content:{maxW:"md"}},md:{content:{maxW:"lg"}},lg:{content:{maxW:"2xl"}},xl:{content:{maxW:"4xl"}},cover:{positioner:{padding:"10"},content:{width:"100%",height:"100%","--dialog-margin":"0"}},full:{content:{maxW:"100vw",minH:"100vh","--dialog-margin":"0",borderRadius:"0"}}},motionPreset:{scale:{content:{_open:{animationName:"scale-in, fade-in"},_closed:{animationName:"scale-out, fade-out"}}},"slide-in-bottom":{content:{_open:{animationName:"slide-from-bottom, fade-in"},_closed:{animationName:"slide-to-bottom, fade-out"}}},"slide-in-top":{content:{_open:{animationName:"slide-from-top, fade-in"},_closed:{animationName:"slide-to-top, fade-out"}}},"slide-in-left":{content:{_open:{animationName:"slide-from-left, fade-in"},_closed:{animationName:"slide-to-left, fade-out"}}},"slide-in-right":{content:{_open:{animationName:"slide-from-right, fade-in"},_closed:{animationName:"slide-to-right, fade-out"}}},none:{}}},defaultVariants:{size:"md",scrollBehavior:"outside",placement:"top",motionPreset:"scale"}}),drawerSlotRecipe=defineSlotRecipe({slots:drawerAnatomy.keys(),className:"chakra-drawer",base:{backdrop:{bg:"blackAlpha.500",pos:"fixed",insetInlineStart:0,top:0,w:"100vw",h:"100dvh",zIndex:"modal",_open:{animationName:"fade-in",animationDuration:"slow"},_closed:{animationName:"fade-out",animationDuration:"moderate"}},positioner:{display:"flex",width:"100vw",height:"100dvh",position:"fixed",insetInlineStart:0,top:0,zIndex:"modal",overscrollBehaviorY:"none"},content:{display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,zIndex:"modal",textStyle:"sm",maxH:"100dvh",color:"inherit",bg:"bg.panel",boxShadow:"lg",_open:{animationDuration:"slowest",animationTimingFunction:"ease-in-smooth"},_closed:{animationDuration:"slower",animationTimingFunction:"ease-in-smooth"}},header:{flex:0,px:"6",pt:"6",pb:"4"},body:{px:"6",py:"2",flex:"1",overflow:"auto"},footer:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"3",px:"6",pt:"2",pb:"4"},title:{textStyle:"lg",fontWeight:"semibold"},description:{color:"fg.muted"}},variants:{size:{xs:{content:{maxW:"xs"}},sm:{content:{maxW:"md"}},md:{content:{maxW:"lg"}},lg:{content:{maxW:"2xl"}},xl:{content:{maxW:"4xl"}},full:{content:{maxW:"100vw",h:"100dvh"}}},placement:{start:{positioner:{justifyContent:"flex-start"},content:{_open:{animationName:{base:"slide-from-left-full, fade-in",_rtl:"slide-from-right-full, fade-in"}},_closed:{animationName:{base:"slide-to-left-full, fade-out",_rtl:"slide-to-right-full, fade-out"}}}},end:{positioner:{justifyContent:"flex-end"},content:{_open:{animationName:{base:"slide-from-right-full, fade-in",_rtl:"slide-from-left-full, fade-in"}},_closed:{animationName:{base:"slide-to-right-full, fade-out",_rtl:"slide-to-right-full, fade-out"}}}},top:{positioner:{alignItems:"flex-start"},content:{maxW:"100%",_open:{animationName:"slide-from-top-full, fade-in"},_closed:{animationName:"slide-to-top-full, fade-out"}}},bottom:{positioner:{alignItems:"flex-end"},content:{maxW:"100%",_open:{animationName:"slide-from-bottom-full, fade-in"},_closed:{animationName:"slide-to-bottom-full, fade-out"}}}},contained:{true:{positioner:{padding:"4"},content:{borderRadius:"l3"}}}},defaultVariants:{size:"xs",placement:"end"}}),sharedStyles=defineStyle({fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent",borderRadius:"l2"}),editableSlotRecipe=defineSlotRecipe({slots:editableAnatomy.keys(),className:"chakra-editable",base:{root:{display:"inline-flex",alignItems:"center",position:"relative",gap:"1.5",width:"full"},preview:{...sharedStyles,py:"1",px:"1",display:"inline-flex",alignItems:"center",transitionProperty:"common",transitionDuration:"normal",cursor:"text",_hover:{bg:"bg.muted"},_disabled:{userSelect:"none"}},input:{...sharedStyles,outline:"0",py:"1",px:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",focusVisibleRing:"inside",focusRingWidth:"2px",_placeholder:{opacity:.6}},control:{display:"inline-flex",alignItems:"center",gap:"1.5"}},variants:{size:{sm:{root:{textStyle:"sm"},preview:{minH:"8"},input:{minH:"8"}},md:{root:{textStyle:"sm"},preview:{minH:"9"},input:{minH:"9"}},lg:{root:{textStyle:"md"},preview:{minH:"10"},input:{minH:"10"}}}},defaultVariants:{size:"md"}}),emptyStateSlotRecipe=defineSlotRecipe({slots:emptyStateAnatomy.keys(),className:"chakra-empty-state",base:{root:{width:"full"},content:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},indicator:{display:"flex",alignItems:"center",justifyContent:"center",color:"fg.subtle",_icon:{boxSize:"1em"}},title:{fontWeight:"semibold"},description:{textStyle:"sm",color:"fg.muted"}},variants:{size:{sm:{root:{px:"4",py:"6"},title:{textStyle:"md"},content:{gap:"4"},indicator:{textStyle:"2xl"}},md:{root:{px:"8",py:"12"},title:{textStyle:"lg"},content:{gap:"6"},indicator:{textStyle:"4xl"}},lg:{root:{px:"12",py:"16"},title:{textStyle:"xl"},content:{gap:"8"},indicator:{textStyle:"6xl"}}}},defaultVariants:{size:"md"}}),fieldSlotRecipe=defineSlotRecipe({className:"chakra-field",slots:fieldAnatomy.keys(),base:{requiredIndicator:{color:"fg.error",lineHeight:"1"},root:{display:"flex",width:"100%",position:"relative",gap:"1.5"},label:{display:"flex",alignItems:"center",textAlign:"start",textStyle:"sm",fontWeight:"medium",gap:"1",userSelect:"none",_disabled:{opacity:"0.5"}},errorText:{display:"inline-flex",alignItems:"center",fontWeight:"medium",gap:"1",color:"fg.error",textStyle:"xs"},helperText:{color:"fg.muted",textStyle:"xs"}},variants:{orientation:{vertical:{root:{flexDirection:"column",alignItems:"flex-start"}},horizontal:{root:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},label:{flex:"0 0 var(--field-label-width, 80px)"}}}},defaultVariants:{orientation:"vertical"}}),fieldsetSlotRecipe=defineSlotRecipe({className:"fieldset",slots:fieldsetAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",width:"full"},content:{display:"flex",flexDirection:"column",width:"full"},legend:{color:"fg",fontWeight:"medium",_disabled:{opacity:"0.5"}},helperText:{color:"fg.muted",textStyle:"sm"},errorText:{display:"inline-flex",alignItems:"center",color:"fg.error",gap:"2",fontWeight:"medium",textStyle:"sm"}},variants:{size:{sm:{root:{spaceY:"2"},content:{gap:"1.5"},legend:{textStyle:"sm"}},md:{root:{spaceY:"4"},content:{gap:"4"},legend:{textStyle:"sm"}},lg:{root:{spaceY:"6"},content:{gap:"4"},legend:{textStyle:"md"}}}},defaultVariants:{size:"md"}}),fileUploadSlotRecipe=defineSlotRecipe({className:"chakra-file-upload",slots:fileUploadAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"4",width:"100%",alignItems:"flex-start"},label:{fontWeight:"medium",textStyle:"sm"},dropzone:{background:"bg",borderRadius:"l3",borderWidth:"2px",borderStyle:"dashed",display:"flex",alignItems:"center",flexDirection:"column",gap:"4",justifyContent:"center",minHeight:"2xs",px:"3",py:"2",transition:"backgrounds",focusVisibleRing:"outside",_hover:{bg:"bg.subtle"},_dragging:{bg:"colorPalette.subtle",borderStyle:"solid",borderColor:"colorPalette.solid"}},dropzoneContent:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"1",textStyle:"sm"},item:{textStyle:"sm",animationName:"fade-in",animationDuration:"moderate",background:"bg",borderRadius:"l2",borderWidth:"1px",width:"100%",display:"flex",alignItems:"center",gap:"3",p:"4"},itemGroup:{width:"100%",display:"flex",flexDirection:"column",gap:"3"},itemName:{color:"fg",fontWeight:"medium",lineClamp:"1"},itemContent:{display:"flex",flexDirection:"column",gap:"0.5",flex:"1"},itemSizeText:{color:"fg.muted",textStyle:"xs"},itemDeleteTrigger:{alignSelf:"flex-start"},itemPreviewImage:{width:"10",height:"10",objectFit:"scale-down"}},defaultVariants:{}}),hoverCardSlotRecipe=defineSlotRecipe({className:"chakra-hover-card",slots:anatomy$6.keys(),base:{content:{position:"relative",display:"flex",flexDirection:"column",textStyle:"sm","--hovercard-bg":"colors.bg.panel",bg:"var(--hovercard-bg)",boxShadow:"lg",maxWidth:"80",borderRadius:"l3",zIndex:"popover",transformOrigin:"var(--transform-origin)",outline:"0",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},arrow:{"--arrow-size":"sizes.3","--arrow-background":"var(--hovercard-bg)"},arrowTip:{borderTopWidth:"0.5px",borderInlineStartWidth:"0.5px"}},variants:{size:{xs:{content:{padding:"3"}},sm:{content:{padding:"4"}},md:{content:{padding:"5"}},lg:{content:{padding:"6"}}}},defaultVariants:{size:"md"}}),listSlotRecipe=defineSlotRecipe({className:"chakra-list",slots:listAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"var(--list-gap)","& :where(ul, ol)":{marginTop:"var(--list-gap)"}},item:{whiteSpace:"normal",display:"list-item"},indicator:{marginEnd:"2",minHeight:"1lh",flexShrink:0,display:"inline-block",verticalAlign:"middle"}},variants:{variant:{marker:{root:{listStyle:"revert",listStylePosition:"inside"},item:{_marker:{color:"fg.subtle"}}},plain:{item:{alignItems:"flex-start",display:"inline-flex"}}},align:{center:{item:{alignItems:"center"}},start:{item:{alignItems:"flex-start"}},end:{item:{alignItems:"flex-end"}}}},defaultVariants:{variant:"marker"}}),menuSlotRecipe=defineSlotRecipe({className:"chakra-menu",slots:menuAnatomy.keys(),base:{content:{outline:0,bg:"bg.panel",boxShadow:"lg",color:"fg",maxHeight:"var(--available-height)","--menu-z-index":"zIndex.dropdown",zIndex:"calc(var(--menu-z-index) + var(--layer-index, 0))",borderRadius:"l2",overflow:"hidden",overflowY:"auto",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},item:{textDecoration:"none",color:"fg",userSelect:"none",borderRadius:"l1",width:"100%",display:"flex",cursor:"menuitem",alignItems:"center",textAlign:"start",position:"relative",flex:"0 0 auto",outline:0,_disabled:{layerStyle:"disabled"}},itemText:{flex:"1"},itemGroupLabel:{px:"2",py:"1.5",fontWeight:"semibold",textStyle:"sm"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0"},itemCommand:{opacity:"0.6",textStyle:"xs",ms:"auto",ps:"4",letterSpacing:"widest"},separator:{height:"1px",bg:"bg.muted",my:"1",mx:"-1"}},variants:{variant:{subtle:{item:{_highlighted:{bg:{_light:"bg.muted",_dark:"bg.emphasized"}}}},solid:{item:{_highlighted:{bg:"colorPalette.solid",color:"colorPalette.contrast"}}}},size:{sm:{content:{minW:"8rem",padding:"1"},item:{gap:"1",textStyle:"xs",py:"1",px:"1.5"}},md:{content:{minW:"8rem",padding:"1.5"},item:{gap:"2",textStyle:"sm",py:"1.5",px:"2"}}}},defaultVariants:{size:"md",variant:"subtle"}}),selectSlotRecipe=defineSlotRecipe({className:"chakra-select",slots:selectAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5",width:"full"},trigger:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"full",minH:"var(--select-trigger-height)",px:"var(--select-trigger-padding-x)",borderRadius:"l2",userSelect:"none",textAlign:"start",focusVisibleRing:"inside",_placeholderShown:{color:"fg.muted"},_disabled:{layerStyle:"disabled"},_invalid:{borderColor:"border.error"}},indicatorGroup:{display:"flex",alignItems:"center",gap:"1",pos:"absolute",right:"0",top:"0",bottom:"0",px:"var(--select-trigger-padding-x)",pointerEvents:"none"},indicator:{display:"flex",alignItems:"center",justifyContent:"center",color:{base:"fg.muted",_disabled:"fg.subtle",_invalid:"fg.error"}},content:{background:"bg.panel",display:"flex",flexDirection:"column",zIndex:"dropdown",borderRadius:"l2",outline:0,maxH:"96",overflowY:"auto",boxShadow:"md",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"fastest"}},item:{position:"relative",userSelect:"none",display:"flex",alignItems:"center",gap:"2",cursor:"option",justifyContent:"space-between",flex:"1",textAlign:"start",borderRadius:"l1",_highlighted:{bg:{_light:"bg.muted",_dark:"bg.emphasized"}},_disabled:{pointerEvents:"none",opacity:"0.5"},_icon:{width:"4",height:"4"}},control:{pos:"relative"},itemText:{flex:"1"},itemGroup:{_first:{mt:"0"}},itemGroupLabel:{py:"1",fontWeight:"medium"},label:{fontWeight:"medium",userSelect:"none",textStyle:"sm",_disabled:{layerStyle:"disabled"}},valueText:{lineClamp:"1",maxW:"80%"}},variants:{variant:{outline:{trigger:{bg:"transparent",borderWidth:"1px",borderColor:"border",_expanded:{borderColor:"border.emphasized"}}},subtle:{trigger:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted"}}},size:{xs:{root:{"--select-trigger-height":"sizes.8","--select-trigger-padding-x":"spacing.2"},content:{p:"1",gap:"1",textStyle:"xs"},trigger:{textStyle:"xs",gap:"1"},item:{py:"1",px:"2"},itemGroupLabel:{py:"1",px:"2"},indicator:{_icon:{width:"3.5",height:"3.5"}}},sm:{root:{"--select-trigger-height":"sizes.9","--select-trigger-padding-x":"spacing.2.5"},content:{p:"1",textStyle:"sm"},trigger:{textStyle:"sm",gap:"1"},indicator:{_icon:{width:"4",height:"4"}},item:{py:"1",px:"1.5"},itemGroup:{mt:"1"},itemGroupLabel:{py:"1",px:"1.5"}},md:{root:{"--select-trigger-height":"sizes.10","--select-trigger-padding-x":"spacing.3"},content:{p:"1",textStyle:"sm"},itemGroup:{mt:"1.5"},item:{py:"1.5",px:"2"},itemIndicator:{display:"flex",alignItems:"center",justifyContent:"center"},itemGroupLabel:{py:"1.5",px:"2"},trigger:{textStyle:"sm",gap:"2"},indicator:{_icon:{width:"4",height:"4"}}},lg:{root:{"--select-trigger-height":"sizes.12","--select-trigger-padding-x":"spacing.4"},content:{p:"1.5",textStyle:"md"},itemGroup:{mt:"2"},item:{py:"2",px:"3"},itemGroupLabel:{py:"2",px:"3"},trigger:{textStyle:"md",py:"3",gap:"2"},indicator:{_icon:{width:"5",height:"5"}}}}},defaultVariants:{size:"md",variant:"outline"}});var Is,Rs;const nativeSelectSlotRecipe=defineSlotRecipe({className:"chakra-native-select",slots:nativeSelectAnatomy.keys(),base:{root:{height:"fit-content",display:"flex",width:"100%",position:"relative"},field:{width:"100%",minWidth:"0",outline:"0",appearance:"none",borderRadius:"l2",_disabled:{layerStyle:"disabled"},_invalid:{borderColor:"border.error"},focusVisibleRing:"inside",lineHeight:"normal","& > option, & > optgroup":{bg:"inherit"}},indicator:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)",height:"100%",color:"fg.muted",_disabled:{opacity:"0.5"},_invalid:{color:"fg.error"},_icon:{width:"1em",height:"1em"}}},variants:{variant:{outline:{field:(Is=selectSlotRecipe.variants)==null?void 0:Is.variant.outline.trigger},subtle:{field:(Rs=selectSlotRecipe.variants)==null?void 0:Rs.variant.subtle.trigger},plain:{field:{bg:"transparent",color:"fg",focusRingWidth:"2px"}}},size:{xs:{field:{textStyle:"xs",ps:"2",pe:"6",height:"6"},indicator:{textStyle:"sm",insetEnd:"1.5"}},sm:{field:{textStyle:"sm",ps:"2.5",pe:"8",height:"8"},indicator:{textStyle:"md",insetEnd:"2"}},md:{field:{textStyle:"sm",ps:"3",pe:"8",height:"10"},indicator:{textStyle:"lg",insetEnd:"2"}},lg:{field:{textStyle:"md",ps:"4",pe:"8",height:"11"},indicator:{textStyle:"xl",insetEnd:"3"}},xl:{field:{textStyle:"md",ps:"4.5",pe:"10",height:"12"},indicator:{textStyle:"xl",insetEnd:"3"}}}},defaultVariants:selectSlotRecipe.defaultVariants});function mapEntries(_e,_){const et={};for(const tt in _e){const rt=_(tt,_e[tt]);et[rt[0]]=rt[1]}return et}const triggerStyle=defineStyle({display:"flex",justifyContent:"center",alignItems:"center",flex:"1",userSelect:"none",cursor:"button",lineHeight:"1",color:"fg.muted","--stepper-base-radius":"radii.xs","--stepper-radius":"calc(var(--stepper-base-radius) + 1px)",_icon:{boxSize:"1em"},_disabled:{opacity:"0.5"},_hover:{bg:"bg.muted"},_active:{bg:"bg.emphasized"}}),numberInputSlotRecipe=defineSlotRecipe({className:"chakra-number-input",slots:anatomy$5.keys(),base:{root:{position:"relative",zIndex:"0",isolation:"isolate"},input:{...inputRecipe.base,verticalAlign:"top",pe:"calc(var(--stepper-width) + 0.5rem)"},control:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",width:"var(--stepper-width)",height:"calc(100% - 2px)",zIndex:"1",borderStartWidth:"1px",divideY:"1px"},incrementTrigger:{...triggerStyle,borderTopEndRadius:"var(--stepper-radius)"},decrementTrigger:{...triggerStyle,borderBottomEndRadius:"var(--stepper-radius)"},valueText:{fontWeight:"medium",fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}},variants:{size:{xs:{input:inputRecipe.variants.size.xs,control:{fontSize:"2xs","--stepper-width":"sizes.4"}},sm:{input:inputRecipe.variants.size.sm,control:{fontSize:"xs","--stepper-width":"sizes.5"}},md:{input:inputRecipe.variants.size.md,control:{fontSize:"sm","--stepper-width":"sizes.6"}},lg:{input:inputRecipe.variants.size.lg,control:{fontSize:"sm","--stepper-width":"sizes.6"}}},variant:mapEntries(inputRecipe.variants.variant,(_e,_)=>[_e,{input:_}])},defaultVariants:{size:"md",variant:"outline"}}),{variants,defaultVariants}=inputRecipe,pinInputSlotRecipe=defineSlotRecipe({className:"chakra-pin-input",slots:anatomy$4.keys(),base:{input:{...inputRecipe.base,textAlign:"center",width:"var(--input-height)"}},variants:{size:mapEntries(variants.size,(_e,_)=>[_e,{input:_}]),variant:mapEntries(variants.variant,(_e,_)=>[_e,{input:_}])},defaultVariants}),popoverSlotRecipe=defineSlotRecipe({className:"chakra-popover",slots:popoverAnatomy.keys(),base:{content:{position:"relative",display:"flex",flexDirection:"column",textStyle:"sm","--popover-bg":"colors.bg.panel",bg:"var(--popover-bg)",boxShadow:"lg","--popover-size":"sizes.xs","--popover-mobile-size":"calc(100dvw - 1rem)",width:{base:"min(var(--popover-mobile-size), var(--popover-size))",sm:"var(--popover-size)"},borderRadius:"l3","--popover-z-index":"zIndex.popover",zIndex:"calc(var(--popover-z-index) + var(--layer-index, 0))",outline:"0",transformOrigin:"var(--transform-origin)",_open:{animationStyle:"scale-fade-in",animationDuration:"fast"},_closed:{animationStyle:"scale-fade-out",animationDuration:"faster"}},header:{paddingInline:"var(--popover-padding)",paddingTop:"var(--popover-padding)"},body:{padding:"var(--popover-padding)",flex:"1"},footer:{display:"flex",alignItems:"center",paddingInline:"var(--popover-padding)",paddingBottom:"var(--popover-padding)"},arrow:{"--arrow-size":"sizes.3","--arrow-background":"var(--popover-bg)"},arrowTip:{borderTopWidth:"1px",borderInlineStartWidth:"1px"}},variants:{size:{xs:{content:{"--popover-padding":"spacing.3"}},sm:{content:{"--popover-padding":"spacing.4"}},md:{content:{"--popover-padding":"spacing.5"}},lg:{content:{"--popover-padding":"spacing.6"}}}},defaultVariants:{size:"md"}}),progressSlotRecipe=defineSlotRecipe({slots:anatomy$3.keys(),className:"chakra-progress",base:{root:{textStyle:"sm",position:"relative"},track:{overflow:"hidden",position:"relative"},range:{display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"width, height",transitionDuration:"slow",height:"100%",bgColor:"var(--track-color)",_indeterminate:{"--animate-from-x":"-40%","--animate-to-x":"100%",position:"absolute",willChange:"left",minWidth:"50%",animation:"position 1s ease infinite normal none running",backgroundImage:"linear-gradient(to right, transparent 0%, var(--track-color) 50%, transparent 100%)"}},label:{display:"inline-flex",fontWeight:"medium",alignItems:"center",gap:"1"},valueText:{textStyle:"xs",lineHeight:"1",fontWeight:"medium"}},variants:{variant:{outline:{track:{shadow:"inset",bgColor:"bg.muted"},range:{bgColor:"colorPalette.solid"}},subtle:{track:{bgColor:"colorPalette.muted"},range:{bgColor:"colorPalette.solid/72"}}},shape:{square:{},rounded:{track:{borderRadius:"l1"}},full:{track:{borderRadius:"full"}}},striped:{true:{range:{backgroundImage:"linear-gradient(45deg, var(--stripe-color) 25%, transparent 25%, transparent 50%, var(--stripe-color) 50%, var(--stripe-color) 75%, transparent 75%, transparent)",backgroundSize:"var(--stripe-size) var(--stripe-size)","--stripe-size":"1rem","--stripe-color":{_light:"rgba(255, 255, 255, 0.3)",_dark:"rgba(0, 0, 0, 0.3)"}}}},animated:{true:{range:{"--animate-from":"var(--stripe-size)",animation:"bg-position 1s linear infinite"}}},size:{xs:{track:{h:"1.5"}},sm:{track:{h:"2"}},md:{track:{h:"2.5"}},lg:{track:{h:"3"}},xl:{track:{h:"4"}}}},defaultVariants:{variant:"outline",size:"md",shape:"rounded"}}),progressCircleSlotRecipe=defineSlotRecipe({className:"chakra-progress-circle",slots:anatomy$3.keys(),base:{root:{display:"inline-flex",textStyle:"sm",position:"relative"},circle:{_indeterminate:{animation:"spin 2s linear infinite"}},circleTrack:{"--track-color":"colors.colorPalette.muted",stroke:"var(--track-color)"},circleRange:{stroke:"colorPalette.solid",transitionProperty:"stroke-dasharray",transitionDuration:"0.6s",_indeterminate:{animation:"circular-progress 1.5s linear infinite"}},label:{display:"inline-flex"},valueText:{lineHeight:"1",fontWeight:"medium",letterSpacing:"tight",fontVariantNumeric:"tabular-nums"}},variants:{size:{xs:{circle:{"--size":"24px","--thickness":"4px"},valueText:{textStyle:"2xs"}},sm:{circle:{"--size":"32px","--thickness":"5px"},valueText:{textStyle:"2xs"}},md:{circle:{"--size":"40px","--thickness":"6px"},valueText:{textStyle:"xs"}},lg:{circle:{"--size":"48px","--thickness":"7px"},valueText:{textStyle:"sm"}},xl:{circle:{"--size":"64px","--thickness":"8px"},valueText:{textStyle:"sm"}}}},defaultVariants:{size:"md"}});var Os,ks,Ms,Ds,$s,Fs,Ls;const radioCardSlotRecipe=defineSlotRecipe({className:"chakra-radio-card",slots:radioCardAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5",isolation:"isolate"},item:{flex:"1",display:"flex",flexDirection:"column",userSelect:"none",position:"relative",borderRadius:"l2",_focus:{bg:"colorPalette.muted/20"},_disabled:{opacity:"0.8",borderColor:"border.disabled"},_checked:{zIndex:"1"}},label:{display:"inline-flex",fontWeight:"medium",textStyle:"sm",_disabled:{opacity:"0.5"}},itemText:{fontWeight:"medium"},itemDescription:{opacity:"0.64",textStyle:"sm"},itemControl:{display:"inline-flex",flex:"1",pos:"relative",rounded:"inherit",justifyContent:"var(--radio-card-justify)",alignItems:"var(--radio-card-align)",_disabled:{bg:"bg.muted"}},itemIndicator:radiomarkRecipe.base,itemAddon:{roundedBottom:"inherit",_disabled:{color:"fg.muted"}},itemContent:{display:"flex",flexDirection:"column",flex:"1",gap:"1",justifyContent:"var(--radio-card-justify)",alignItems:"var(--radio-card-align)"}},variants:{size:{sm:{item:{textStyle:"sm"},itemControl:{padding:"3",gap:"1.5"},itemAddon:{px:"3",py:"1.5",borderTopWidth:"1px"},itemIndicator:(Os=radiomarkRecipe.variants)==null?void 0:Os.size.sm},md:{item:{textStyle:"sm"},itemControl:{padding:"4",gap:"2.5"},itemAddon:{px:"4",py:"2",borderTopWidth:"1px"},itemIndicator:(ks=radiomarkRecipe.variants)==null?void 0:ks.size.md},lg:{item:{textStyle:"md"},itemControl:{padding:"4",gap:"3.5"},itemAddon:{px:"4",py:"2",borderTopWidth:"1px"},itemIndicator:(Ms=radiomarkRecipe.variants)==null?void 0:Ms.size.lg}},variant:{surface:{item:{borderWidth:"1px",_checked:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderColor:"colorPalette.muted"}},itemIndicator:(Ds=radiomarkRecipe.variants)==null?void 0:Ds.variant.solid},subtle:{item:{bg:"bg.muted"},itemControl:{_checked:{bg:"colorPalette.muted",color:"colorPalette.fg"}},itemIndicator:($s=radiomarkRecipe.variants)==null?void 0:$s.variant.outline},outline:{item:{borderWidth:"1px",_checked:{boxShadow:"0 0 0 1px var(--shadow-color)",boxShadowColor:"colorPalette.solid",borderColor:"colorPalette.solid"}},itemIndicator:(Fs=radiomarkRecipe.variants)==null?void 0:Fs.variant.solid},solid:{item:{borderWidth:"1px",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},itemIndicator:(Ls=radiomarkRecipe.variants)==null?void 0:Ls.variant.inverted}},justify:{start:{item:{"--radio-card-justify":"flex-start"}},end:{item:{"--radio-card-justify":"flex-end"}},center:{item:{"--radio-card-justify":"center"}}},align:{start:{item:{"--radio-card-align":"flex-start"},itemControl:{textAlign:"start"}},end:{item:{"--radio-card-align":"flex-end"},itemControl:{textAlign:"end"}},center:{item:{"--radio-card-align":"center"},itemControl:{textAlign:"center"}}},orientation:{vertical:{itemControl:{flexDirection:"column"}},horizontal:{itemControl:{flexDirection:"row"}}}},defaultVariants:{size:"md",variant:"outline",align:"start",orientation:"horizontal"}});var Ns,Bs,js,Us,Vs,zs,Gs,Ws,Hs,Xs,Ys,qs,Ks,Zs;const radioGroupSlotRecipe=defineSlotRecipe({className:"chakra-radio-group",slots:radioGroupAnatomy.keys(),base:{item:{display:"inline-flex",alignItems:"center",position:"relative",fontWeight:"medium",_disabled:{cursor:"disabled"}},itemControl:radiomarkRecipe.base,label:{userSelect:"none",textStyle:"sm",_disabled:{opacity:"0.5"}}},variants:{variant:{outline:{itemControl:(Bs=(Ns=radiomarkRecipe.variants)==null?void 0:Ns.variant)==null?void 0:Bs.outline},subtle:{itemControl:(Us=(js=radiomarkRecipe.variants)==null?void 0:js.variant)==null?void 0:Us.subtle},solid:{itemControl:(zs=(Vs=radiomarkRecipe.variants)==null?void 0:Vs.variant)==null?void 0:zs.solid}},size:{xs:{item:{textStyle:"xs",gap:"1.5"},itemControl:(Ws=(Gs=radiomarkRecipe.variants)==null?void 0:Gs.size)==null?void 0:Ws.xs},sm:{item:{textStyle:"sm",gap:"2"},itemControl:(Xs=(Hs=radiomarkRecipe.variants)==null?void 0:Hs.size)==null?void 0:Xs.sm},md:{item:{textStyle:"sm",gap:"2.5"},itemControl:(qs=(Ys=radiomarkRecipe.variants)==null?void 0:Ys.size)==null?void 0:qs.md},lg:{item:{textStyle:"md",gap:"3"},itemControl:(Zs=(Ks=radiomarkRecipe.variants)==null?void 0:Ks.size)==null?void 0:Zs.lg}}},defaultVariants:{size:"md",variant:"solid"}}),ratingGroupSlotRecipe=defineSlotRecipe({className:"chakra-rating-group",slots:ratingGroupAnatomy.keys(),base:{root:{display:"inline-flex"},control:{display:"inline-flex",alignItems:"center"},item:{display:"inline-flex",alignItems:"center",justifyContent:"center",userSelect:"none"},itemIndicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",position:"relative",_icon:{stroke:"currentColor",width:"100%",height:"100%",display:"inline-block",flexShrink:0,position:"absolute",left:0,top:0},"& [data-bg]":{color:"bg.emphasized"},"& [data-fg]":{color:"transparent"},"&[data-highlighted]:not([data-half])":{"& [data-fg]":{color:"colorPalette.solid"}},"&[data-half]":{"& [data-fg]":{color:"colorPalette.solid",clipPath:"inset(0 50% 0 0)"}}}},variants:{size:{xs:{item:{textStyle:"sm"}},sm:{item:{textStyle:"md"}},md:{item:{textStyle:"xl"}},lg:{item:{textStyle:"2xl"}}}},defaultVariants:{size:"md"}}),segmentGroupSlotRecipe=defineSlotRecipe({className:"chakra-segment-group",slots:segmentGroupAnatomy.keys(),base:{root:{"--segment-radius":"radii.l2",borderRadius:"l2",display:"inline-flex",boxShadow:"inset",minW:"max-content",textAlign:"center",position:"relative",isolation:"isolate",bg:"bg.muted"},item:{display:"flex",alignItems:"center",userSelect:"none",fontSize:"sm",position:"relative",color:"fg",borderRadius:"var(--segment-radius)",_disabled:{opacity:"0.5"},"&:has(input:focus-visible)":{focusRing:"outside"},_before:{content:'""',position:"absolute",insetInlineStart:0,insetBlock:"1.5",bg:"border",width:"1px",transition:"opacity 0.2s"},"& + &[data-state=checked], &[data-state=checked] + &, &:first-of-type":{_before:{opacity:"0"}},"&[data-state=checked][data-ssr]":{shadow:"sm",bg:"bg",borderRadius:"var(--segment-radius)"}},indicator:{shadow:"sm",pos:"absolute",bg:{_light:"bg",_dark:"bg.emphasized"},width:"var(--width)",height:"var(--height)",top:"var(--top)",left:"var(--left)",zIndex:-1,borderRadius:"var(--segment-radius)"}},variants:{size:{xs:{root:{height:"6"},item:{textStyle:"xs",px:"3",gap:"1"}},sm:{root:{height:"8"},item:{textStyle:"sm",px:"4",gap:"2"}},md:{root:{height:"10"},item:{textStyle:"sm",px:"4",gap:"2"}},lg:{root:{height:"10"},item:{textStyle:"md",px:"5",gap:"3"}}}},defaultVariants:{size:"md"}}),sliderSlotRecipe=defineSlotRecipe({className:"chakra-slider",slots:sliderAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1",textStyle:"sm",position:"relative",isolation:"isolate",touchAction:"none"},label:{fontWeight:"medium",textStyle:"sm"},control:{display:"inline-flex",alignItems:"center",position:"relative"},track:{overflow:"hidden",borderRadius:"full",flex:"1"},range:{width:"inherit",height:"inherit",_disabled:{bg:"border.emphasized!"}},markerGroup:{position:"absolute!",zIndex:"1"},marker:{"--marker-bg":{base:"white",_underValue:"colors.bg"},display:"flex",alignItems:"center",gap:"calc(var(--slider-thumb-size) / 2)",color:"fg.muted",textStyle:"xs"},markerIndicator:{width:"var(--slider-marker-size)",height:"var(--slider-marker-size)",borderRadius:"full",bg:"var(--marker-bg)"},thumb:{width:"var(--slider-thumb-size)",height:"var(--slider-thumb-size)",display:"flex",alignItems:"center",justifyContent:"center",outline:0,zIndex:"2",borderRadius:"full",_focusVisible:{ring:"2px",ringColor:"colorPalette.focusRing",ringOffset:"2px",ringOffsetColor:"bg"}}},variants:{size:{sm:{root:{"--slider-thumb-size":"sizes.4","--slider-track-size":"sizes.1.5","--slider-marker-center":"6px","--slider-marker-size":"sizes.1","--slider-marker-inset":"3px"}},md:{root:{"--slider-thumb-size":"sizes.5","--slider-track-size":"sizes.2","--slider-marker-center":"8px","--slider-marker-size":"sizes.1","--slider-marker-inset":"4px"}},lg:{root:{"--slider-thumb-size":"sizes.6","--slider-track-size":"sizes.2.5","--slider-marker-center":"9px","--slider-marker-size":"sizes.1.5","--slider-marker-inset":"5px"}}},variant:{outline:{track:{shadow:"inset",bg:"bg.emphasized/72"},range:{bg:"colorPalette.solid"},thumb:{borderWidth:"2px",borderColor:"colorPalette.solid",bg:"bg",_disabled:{bg:"border.emphasized",borderColor:"border.emphasized"}}},solid:{track:{bg:"colorPalette.subtle",_disabled:{bg:"bg.muted"}},range:{bg:"colorPalette.solid"},thumb:{bg:"colorPalette.solid",_disabled:{bg:"border.emphasized"}}}},orientation:{vertical:{root:{display:"inline-flex"},control:{flexDirection:"column",height:"100%",minWidth:"var(--slider-thumb-size)","&[data-has-mark-label]":{marginEnd:"4"}},track:{width:"var(--slider-track-size)"},thumb:{left:"50%",translate:"-50% 0"},markerGroup:{insetStart:"var(--slider-marker-center)",insetBlock:"var(--slider-marker-inset)"},marker:{flexDirection:"row"}},horizontal:{control:{flexDirection:"row",width:"100%",minHeight:"var(--slider-thumb-size)","&[data-has-mark-label]":{marginBottom:"4"}},track:{height:"var(--slider-track-size)"},thumb:{top:"50%",translate:"0 -50%"},markerGroup:{top:"var(--slider-marker-center)",insetInline:"var(--slider-marker-inset)"},marker:{flexDirection:"column"}}}},defaultVariants:{size:"md",variant:"outline",orientation:"horizontal"}}),statSlotRecipe=defineSlotRecipe({className:"chakra-stat",slots:statAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1",position:"relative",flex:"1"},label:{display:"inline-flex",gap:"1.5",alignItems:"center",color:"fg.muted",textStyle:"sm"},helpText:{color:"fg.muted",textStyle:"xs"},valueUnit:{color:"fg.muted",textStyle:"xs",fontWeight:"initial",letterSpacing:"initial"},valueText:{verticalAlign:"baseline",fontWeight:"semibold",letterSpacing:"tight",fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums",display:"inline-flex",gap:"1"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",marginEnd:1,"& :where(svg)":{w:"1em",h:"1em"},"&[data-type=up]":{color:"fg.success"},"&[data-type=down]":{color:"fg.error"}}},variants:{size:{sm:{valueText:{textStyle:"xl"}},md:{valueText:{textStyle:"2xl"}},lg:{valueText:{textStyle:"3xl"}}}},defaultVariants:{size:"md"}}),statusSlotRecipe=defineSlotRecipe({className:"chakra-status",slots:statusAnatomy.keys(),base:{root:{display:"inline-flex",alignItems:"center",gap:"2"},indicator:{width:"0.64em",height:"0.64em",flexShrink:0,borderRadius:"full",forcedColorAdjust:"none",bg:"colorPalette.solid"}},variants:{size:{sm:{root:{textStyle:"xs"}},md:{root:{textStyle:"sm"}},lg:{root:{textStyle:"md"}}}},defaultVariants:{size:"md"}}),stepsSlotRecipe=defineSlotRecipe({className:"chakra-steps",slots:stepsAnatomy.keys(),base:{root:{display:"flex",width:"full"},list:{display:"flex",justifyContent:"space-between","--steps-gutter":"spacing.3","--steps-thickness":"2px"},title:{fontWeight:"medium",color:"fg"},description:{color:"fg.muted"},separator:{bg:"border",flex:"1"},indicator:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0",borderRadius:"full",fontWeight:"medium",width:"var(--steps-size)",height:"var(--steps-size)",_icon:{flexShrink:"0",width:"var(--steps-icon-size)",height:"var(--steps-icon-size)"}},item:{position:"relative",display:"flex",flex:"1 0 0","&:last-of-type":{flex:"initial","& [data-part=separator]":{display:"none"}}},trigger:{display:"flex",alignItems:"center",gap:"3",textAlign:"start",focusVisibleRing:"outside",borderRadius:"l2"},content:{focusVisibleRing:"outside"}},variants:{orientation:{vertical:{root:{flexDirection:"row",height:"100%"},list:{flexDirection:"column",alignItems:"flex-start"},separator:{position:"absolute",width:"var(--steps-thickness)",height:"100%",maxHeight:"calc(100% - var(--steps-size) - var(--steps-gutter) * 2)",top:"calc(var(--steps-size) + var(--steps-gutter))",insetStart:"calc(var(--steps-size) / 2 - 1px)"},item:{alignItems:"flex-start"}},horizontal:{root:{flexDirection:"column",width:"100%"},list:{flexDirection:"row",alignItems:"center"},separator:{width:"100%",height:"var(--steps-thickness)",marginX:"var(--steps-gutter)"},item:{alignItems:"center"}}},variant:{solid:{indicator:{_incomplete:{borderWidth:"var(--steps-thickness)"},_current:{bg:"colorPalette.muted",borderWidth:"var(--steps-thickness)",borderColor:"colorPalette.solid",color:"colorPalette.fg"},_complete:{bg:"colorPalette.solid",borderColor:"colorPalette.solid",color:"colorPalette.contrast"}},separator:{_complete:{bg:"colorPalette.solid"}}},subtle:{indicator:{_incomplete:{bg:"bg.muted"},_current:{bg:"colorPalette.muted",color:"colorPalette.fg"},_complete:{bg:"colorPalette.emphasized",color:"colorPalette.fg"}},separator:{_complete:{bg:"colorPalette.emphasized"}}}},size:{xs:{root:{gap:"2.5"},list:{"--steps-size":"sizes.6","--steps-icon-size":"sizes.3.5",textStyle:"xs"},title:{textStyle:"sm"}},sm:{root:{gap:"3"},list:{"--steps-size":"sizes.8","--steps-icon-size":"sizes.4",textStyle:"xs"},title:{textStyle:"sm"}},md:{root:{gap:"4"},list:{"--steps-size":"sizes.10","--steps-icon-size":"sizes.4",textStyle:"sm"},title:{textStyle:"sm"}},lg:{root:{gap:"6"},list:{"--steps-size":"sizes.11","--steps-icon-size":"sizes.5",textStyle:"md"},title:{textStyle:"md"}}}},defaultVariants:{size:"md",variant:"solid",orientation:"horizontal"}}),switchSlotRecipe=defineSlotRecipe({slots:switchAnatomy.keys(),className:"chakra-switch",base:{root:{display:"inline-flex",gap:"2.5",alignItems:"center",position:"relative",verticalAlign:"middle","--switch-diff":"calc(var(--switch-width) - var(--switch-height))","--switch-x":{base:"var(--switch-diff)",_rtl:"calc(var(--switch-diff) * -1)"}},label:{lineHeight:"1",userSelect:"none",fontSize:"sm",fontWeight:"medium",_disabled:{opacity:"0.5"}},indicator:{position:"absolute",height:"var(--switch-height)",width:"var(--switch-height)",fontSize:"var(--switch-indicator-font-size)",fontWeight:"medium",flexShrink:0,userSelect:"none",display:"grid",placeContent:"center",transition:"inset-inline-start 0.12s ease",insetInlineStart:"calc(var(--switch-x) - 2px)",_checked:{insetInlineStart:"2px"}},control:{display:"inline-flex",gap:"0.5rem",flexShrink:0,justifyContent:"flex-start",cursor:"switch",borderRadius:"full",position:"relative",width:"var(--switch-width)",height:"var(--switch-height)",_disabled:{opacity:"0.5",cursor:"not-allowed"},_invalid:{outline:"2px solid",outlineColor:"border.error",outlineOffset:"2px"}},thumb:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transitionProperty:"translate",transitionDuration:"fast",borderRadius:"inherit",_checked:{translate:"var(--switch-x) 0"}}},variants:{variant:{solid:{control:{borderRadius:"full",bg:"bg.emphasized",focusVisibleRing:"outside",_checked:{bg:"colorPalette.solid"}},thumb:{bg:"white",width:"var(--switch-height)",height:"var(--switch-height)",scale:"0.8",boxShadow:"sm",_checked:{bg:"colorPalette.contrast"}}},raised:{control:{borderRadius:"full",height:"calc(var(--switch-height) / 2)",bg:"bg.muted",boxShadow:"inset",_checked:{bg:"colorPalette.solid/60"}},thumb:{width:"var(--switch-height)",height:"var(--switch-height)",position:"relative",top:"calc(var(--switch-height) * -0.25)",bg:"white",boxShadow:"xs",focusVisibleRing:"outside",_checked:{bg:"colorPalette.solid"}}}},size:{xs:{root:{"--switch-width":"sizes.6","--switch-height":"sizes.3","--switch-indicator-font-size":"fontSizes.xs"}},sm:{root:{"--switch-width":"sizes.8","--switch-height":"sizes.4","--switch-indicator-font-size":"fontSizes.xs"}},md:{root:{"--switch-width":"sizes.10","--switch-height":"sizes.5","--switch-indicator-font-size":"fontSizes.sm"}},lg:{root:{"--switch-width":"sizes.12","--switch-height":"sizes.6","--switch-indicator-font-size":"fontSizes.md"}}}},defaultVariants:{variant:"solid",size:"md"}}),tableSlotRecipe=defineSlotRecipe({className:"chakra-table",slots:tableAnatomy.keys(),base:{root:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full",textAlign:"start",verticalAlign:"top"},row:{_selected:{bg:"colorPalette.subtle"}},cell:{textAlign:"start",alignItems:"center"},columnHeader:{fontWeight:"medium",textAlign:"start",color:"fg"},caption:{fontWeight:"medium",textStyle:"xs"},footer:{fontWeight:"medium"}},variants:{interactive:{true:{body:{"& tr":{_hover:{bg:"colorPalette.subtle"}}}}},stickyHeader:{true:{header:{"& :where(tr)":{top:"var(--table-sticky-offset, 0)",position:"sticky",zIndex:1}}}},striped:{true:{row:{"&:nth-of-type(odd) td":{bg:"bg.muted"}}}},showColumnBorder:{true:{columnHeader:{"&:not(:last-of-type)":{borderInlineEndWidth:"1px"}},cell:{"&:not(:last-of-type)":{borderInlineEndWidth:"1px"}}}},variant:{line:{columnHeader:{borderBottomWidth:"1px"},cell:{borderBottomWidth:"1px"},row:{bg:"bg"}},outline:{root:{boxShadow:"0 0 0 1px {colors.border}",overflow:"hidden"},columnHeader:{borderBottomWidth:"1px"},header:{bg:"bg.muted"},row:{"&:not(:last-of-type)":{borderBottomWidth:"1px"}},footer:{borderTopWidth:"1px"}}},size:{sm:{root:{textStyle:"sm"},columnHeader:{px:"2",py:"2"},cell:{px:"2",py:"2"}},md:{root:{textStyle:"sm"},columnHeader:{px:"3",py:"3"},cell:{px:"3",py:"3"}},lg:{root:{textStyle:"md"},columnHeader:{px:"4",py:"3"},cell:{px:"4",py:"3"}}}},defaultVariants:{variant:"line",size:"md"}}),tabsSlotRecipe=defineSlotRecipe({slots:tabsAnatomy.keys(),className:"chakra-tabs",base:{root:{"--tabs-trigger-radius":"radii.l2",position:"relative",_horizontal:{display:"block"},_vertical:{display:"flex"}},list:{display:"inline-flex",position:"relative",isolation:"isolate","--tabs-indicator-shadow":"shadows.xs","--tabs-indicator-bg":"colors.bg",minH:"var(--tabs-height)",_horizontal:{flexDirection:"row"},_vertical:{flexDirection:"column"}},trigger:{outline:"0",minW:"var(--tabs-height)",height:"var(--tabs-height)",display:"flex",alignItems:"center",fontWeight:"medium",position:"relative",cursor:"button",gap:"2",_focusVisible:{zIndex:1,outline:"2px solid",outlineColor:"colorPalette.focusRing"},_disabled:{cursor:"not-allowed",opacity:.5}},content:{focusVisibleRing:"inside",_horizontal:{width:"100%",pt:"var(--tabs-content-padding)"},_vertical:{height:"100%",ps:"var(--tabs-content-padding)"}},indicator:{width:"var(--width)",height:"var(--height)",borderRadius:"var(--tabs-indicator-radius)",bg:"var(--tabs-indicator-bg)",shadow:"var(--tabs-indicator-shadow)",zIndex:-1}},variants:{fitted:{true:{list:{display:"flex"},trigger:{flex:1,textAlign:"center",justifyContent:"center"}}},justify:{start:{list:{justifyContent:"flex-start"}},center:{list:{justifyContent:"center"}},end:{list:{justifyContent:"flex-end"}}},size:{sm:{root:{"--tabs-height":"sizes.9","--tabs-content-padding":"spacing.3"},trigger:{py:"1",px:"3",textStyle:"sm"}},md:{root:{"--tabs-height":"sizes.10","--tabs-content-padding":"spacing.4"},trigger:{py:"2",px:"4",textStyle:"sm"}},lg:{root:{"--tabs-height":"sizes.11","--tabs-content-padding":"spacing.4.5"},trigger:{py:"2",px:"4.5",textStyle:"md"}}},variant:{line:{list:{display:"flex",borderColor:"border",_horizontal:{borderBottomWidth:"1px"},_vertical:{borderEndWidth:"1px"}},trigger:{color:"fg.muted",_disabled:{_active:{bg:"initial"}},_selected:{color:"fg",_horizontal:{layerStyle:"indicator.bottom","--indicator-offset-y":"-1px","--indicator-color":"colors.colorPalette.solid"},_vertical:{layerStyle:"indicator.end","--indicator-offset-x":"-1px"}}}},subtle:{trigger:{borderRadius:"var(--tabs-trigger-radius)",color:"fg.muted",_selected:{bg:"colorPalette.subtle",color:"colorPalette.fg"}}},enclosed:{list:{bg:"bg.muted",padding:"1",borderRadius:"l3",minH:"calc(var(--tabs-height) - 4px)"},trigger:{justifyContent:"center",color:"fg.muted",borderRadius:"var(--tabs-trigger-radius)",_selected:{bg:"bg",color:"colorPalette.fg",shadow:"xs"}}},outline:{list:{"--line-thickness":"1px","--line-offset":"calc(var(--line-thickness) * -1)",borderColor:"border",display:"flex",_horizontal:{_before:{content:'""',position:"absolute",bottom:"0px",width:"100%",borderBottomWidth:"var(--line-thickness)",borderBottomColor:"border"}},_vertical:{_before:{content:'""',position:"absolute",insetInline:"var(--line-offset)",height:"calc(100% - calc(var(--line-thickness) * 2))",borderEndWidth:"var(--line-thickness)",borderEndColor:"border"}}},trigger:{color:"fg.muted",borderWidth:"1px",borderColor:"transparent",_selected:{bg:"currentBg",color:"colorPalette.fg"},_horizontal:{borderTopRadius:"var(--tabs-trigger-radius)",marginBottom:"var(--line-offset)",marginEnd:{_notLast:"var(--line-offset)"},_selected:{borderColor:"border",borderBottomColor:"transparent"}},_vertical:{borderStartRadius:"var(--tabs-trigger-radius)",marginEnd:"var(--line-offset)",marginBottom:{_notLast:"var(--line-offset)"},_selected:{borderColor:"border",borderEndColor:"transparent"}}}},plain:{trigger:{color:"fg.muted",_selected:{color:"colorPalette.fg"},borderRadius:"var(--tabs-trigger-radius)","&[data-selected][data-ssr]":{bg:"var(--tabs-indicator-bg)",shadow:"var(--tabs-indicator-shadow)",borderRadius:"var(--tabs-indicator-radius)"}}}}},defaultVariants:{size:"md",variant:"line"}});var Qs;const badgeVariant=(Qs=badgeRecipe.variants)==null?void 0:Qs.variant,tagSlotRecipe=defineSlotRecipe({slots:tagAnatomy.keys(),className:"chakra-tag",base:{root:{display:"inline-flex",alignItems:"center",verticalAlign:"top",maxWidth:"100%",userSelect:"none",borderRadius:"l2",focusVisibleRing:"outside"},label:{lineClamp:"1"},closeTrigger:{display:"flex",alignItems:"center",justifyContent:"center",outline:"0",borderRadius:"l1",color:"currentColor",focusVisibleRing:"inside",focusRingWidth:"2px"},startElement:{flexShrink:0,boxSize:"var(--tag-element-size)",ms:"var(--tag-element-offset)","&:has([data-scope=avatar])":{boxSize:"var(--tag-avatar-size)",ms:"calc(var(--tag-element-offset) * 1.5)"},_icon:{boxSize:"100%"}},endElement:{flexShrink:0,boxSize:"var(--tag-element-size)",me:"var(--tag-element-offset)",_icon:{boxSize:"100%"},"&:has(button)":{ms:"calc(var(--tag-element-offset) * -1)"}}},variants:{size:{sm:{root:{px:"1.5",minH:"4.5",gap:"1","--tag-avatar-size":"spacing.3","--tag-element-size":"spacing.3","--tag-element-offset":"-2px"},label:{textStyle:"xs"}},md:{root:{px:"1.5",minH:"5",gap:"1","--tag-avatar-size":"spacing.3.5","--tag-element-size":"spacing.3.5","--tag-element-offset":"-2px"},label:{textStyle:"xs"}},lg:{root:{px:"2",minH:"6",gap:"1.5","--tag-avatar-size":"spacing.4.5","--tag-element-size":"spacing.4","--tag-element-offset":"-3px"},label:{textStyle:"sm"}},xl:{root:{px:"2.5",minH:"8",gap:"1.5","--tag-avatar-size":"spacing.6","--tag-element-size":"spacing.4.5","--tag-element-offset":"-4px"},label:{textStyle:"sm"}}},variant:{subtle:{root:badgeVariant==null?void 0:badgeVariant.subtle},solid:{root:badgeVariant==null?void 0:badgeVariant.solid},outline:{root:badgeVariant==null?void 0:badgeVariant.outline},surface:{root:badgeVariant==null?void 0:badgeVariant.surface}}},defaultVariants:{size:"md",variant:"surface"}}),timelineSlotRecipe=defineSlotRecipe({slots:timelineAnatomy.keys(),className:"chakra-timeline",base:{root:{display:"flex",flexDirection:"column",width:"full","--timeline-thickness":"1px","--timeline-gutter":"4px"},item:{display:"flex",position:"relative",alignItems:"flex-start",flexShrink:0,gap:"4",_last:{"& :where(.chakra-timeline__separator)":{display:"none"}}},separator:{position:"absolute",borderStartWidth:"var(--timeline-thickness)",ms:"calc(-1 * var(--timeline-thickness) / 2)",insetInlineStart:"calc(var(--timeline-indicator-size) / 2)",insetBlock:"0",borderColor:"border"},indicator:{outline:"2px solid {colors.bg}",position:"relative",flexShrink:"0",boxSize:"var(--timeline-indicator-size)",fontSize:"var(--timeline-font-size)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"full",fontWeight:"medium"},connector:{alignSelf:"stretch",position:"relative"},content:{pb:"6",display:"flex",flexDirection:"column",width:"full",gap:"2"},title:{display:"flex",fontWeight:"medium",flexWrap:"wrap",gap:"1.5",alignItems:"center",mt:"var(--timeline-margin)"},description:{color:"fg.muted",textStyle:"xs"}},variants:{variant:{subtle:{indicator:{bg:"colorPalette.muted"}},solid:{indicator:{bg:"colorPalette.solid",color:"colorPalette.contrast"}},outline:{indicator:{bg:"currentBg",borderWidth:"1px",borderColor:"colorPalette.muted"}},plain:{}},size:{sm:{root:{"--timeline-indicator-size":"sizes.4","--timeline-font-size":"fontSizes.2xs"},title:{textStyle:"xs"}},md:{root:{"--timeline-indicator-size":"sizes.5","--timeline-font-size":"fontSizes.xs"},title:{textStyle:"sm"}},lg:{root:{"--timeline-indicator-size":"sizes.6","--timeline-font-size":"fontSizes.xs"},title:{mt:"0.5",textStyle:"sm"}},xl:{root:{"--timeline-indicator-size":"sizes.8","--timeline-font-size":"fontSizes.sm"},title:{mt:"1.5",textStyle:"sm"}}}},defaultVariants:{size:"md",variant:"solid"}}),toastSlotRecipe=defineSlotRecipe({slots:toastAnatomy.keys(),className:"chakra-toast",base:{root:{width:"full",display:"flex",alignItems:"flex-start",position:"relative",gap:"3",py:"4",ps:"4",pe:"6",borderRadius:"l2",translate:"var(--x) var(--y)",scale:"var(--scale)",zIndex:"var(--z-index)",height:"var(--height)",opacity:"var(--opacity)",willChange:"translate, opacity, scale",transition:"translate 400ms, scale 400ms, opacity 400ms, height 400ms, box-shadow 200ms",transitionTimingFunction:"cubic-bezier(0.21, 1.02, 0.73, 1)",_closed:{transition:"translate 400ms, scale 400ms, opacity 200ms",transitionTimingFunction:"cubic-bezier(0.06, 0.71, 0.55, 1)"},bg:"bg.panel",color:"fg",boxShadow:"xl","--toast-trigger-bg":"colors.bg.muted","&[data-type=warning]":{bg:"orange.solid",color:"orange.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"},"&[data-type=success]":{bg:"green.solid",color:"green.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"},"&[data-type=error]":{bg:"red.solid",color:"red.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"}},title:{fontWeight:"medium",textStyle:"sm",marginEnd:"2"},description:{display:"inline",textStyle:"sm",opacity:"0.8"},indicator:{flexShrink:"0",boxSize:"5"},actionTrigger:{textStyle:"sm",fontWeight:"medium",height:"8",px:"3",borderRadius:"l2",alignSelf:"center",borderWidth:"1px",borderColor:"var(--toast-border-color, inherit)",transition:"background 200ms",_hover:{bg:"var(--toast-trigger-bg)"}},closeTrigger:{position:"absolute",top:"1",insetEnd:"1",padding:"1",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"{currentColor/60}",borderRadius:"l2",textStyle:"md",transition:"background 200ms"}}}),tooltipSlotRecipe=defineSlotRecipe({slots:anatomy$2.keys(),className:"chakra-tooltip",base:{content:{"--tooltip-bg":"colors.bg.inverted",bg:"var(--tooltip-bg)",color:"fg.inverted",px:"2.5",py:"1",borderRadius:"l2",fontWeight:"medium",textStyle:"xs",boxShadow:"md",maxW:"xs",zIndex:"tooltip",transformOrigin:"var(--transform-origin)",_open:{animationStyle:"scale-fade-in",animationDuration:"fast"},_closed:{animationStyle:"scale-fade-out",animationDuration:"fast"}},arrow:{"--arrow-size":"sizes.2","--arrow-background":"var(--tooltip-bg)"},arrowTip:{borderTopWidth:"1px",borderInlineStartWidth:"1px",borderColor:"var(--tooltip-bg)"}}}),slotRecipes={accordion:accordionSlotRecipe,actionBar:actionBarSlotRecipe,alert:alertSlotRecipe,avatar:avatarSlotRecipe,blockquote:blockquoteSlotRecipe,breadcrumb:breadcrumbSlotRecipe,card:cardSlotRecipe,checkbox:checkboxSlotRecipe,checkboxCard:checkboxCardSlotRecipe,collapsible:collapsibleSlotRecipe,dataList:dataListSlotRecipe,dialog:dialogSlotRecipe,drawer:drawerSlotRecipe,editable:editableSlotRecipe,emptyState:emptyStateSlotRecipe,field:fieldSlotRecipe,fieldset:fieldsetSlotRecipe,fileUpload:fileUploadSlotRecipe,hoverCard:hoverCardSlotRecipe,list:listSlotRecipe,menu:menuSlotRecipe,nativeSelect:nativeSelectSlotRecipe,numberInput:numberInputSlotRecipe,pinInput:pinInputSlotRecipe,popover:popoverSlotRecipe,progress:progressSlotRecipe,progressCircle:progressCircleSlotRecipe,radioCard:radioCardSlotRecipe,radioGroup:radioGroupSlotRecipe,ratingGroup:ratingGroupSlotRecipe,segmentGroup:segmentGroupSlotRecipe,select:selectSlotRecipe,slider:sliderSlotRecipe,stat:statSlotRecipe,steps:stepsSlotRecipe,switch:switchSlotRecipe,table:tableSlotRecipe,tabs:tabsSlotRecipe,tag:tagSlotRecipe,toast:toastSlotRecipe,tooltip:tooltipSlotRecipe,status:statusSlotRecipe,timeline:timelineSlotRecipe,colorPicker:colorPickerSlotRecipe},textStyles=defineTextStyles({"2xs":{value:{fontSize:"2xs",lineHeight:"0.75rem"}},xs:{value:{fontSize:"xs",lineHeight:"1rem"}},sm:{value:{fontSize:"sm",lineHeight:"1.25rem"}},md:{value:{fontSize:"md",lineHeight:"1.5rem"}},lg:{value:{fontSize:"lg",lineHeight:"1.75rem"}},xl:{value:{fontSize:"xl",lineHeight:"1.875rem"}},"2xl":{value:{fontSize:"2xl",lineHeight:"2rem"}},"3xl":{value:{fontSize:"3xl",lineHeight:"2.375rem"}},"4xl":{value:{fontSize:"4xl",lineHeight:"2.75rem",letterSpacing:"-0.025em"}},"5xl":{value:{fontSize:"5xl",lineHeight:"3.75rem",letterSpacing:"-0.025em"}},"6xl":{value:{fontSize:"6xl",lineHeight:"4.5rem",letterSpacing:"-0.025em"}},"7xl":{value:{fontSize:"7xl",lineHeight:"5.75rem",letterSpacing:"-0.025em"}},none:{value:{}}}),animations=defineTokens.animations({spin:{value:"spin 1s linear infinite"},ping:{value:"ping 1s cubic-bezier(0, 0, 0.2, 1) infinite"},pulse:{value:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},bounce:{value:"bounce 1s infinite"}}),aspectRatios=defineTokens.aspectRatios({square:{value:"1 / 1"},landscape:{value:"4 / 3"},portrait:{value:"3 / 4"},wide:{value:"16 / 9"},ultrawide:{value:"18 / 5"},golden:{value:"1.618 / 1"}}),blurs=defineTokens.blurs({none:{value:" "},sm:{value:"4px"},md:{value:"8px"},lg:{value:"12px"},xl:{value:"16px"},"2xl":{value:"24px"},"3xl":{value:"40px"},"4xl":{value:"64px"}}),borders=defineTokens.borders({xs:{value:"0.5px solid"},sm:{value:"1px solid"},md:{value:"2px solid"},lg:{value:"4px solid"},xl:{value:"8px solid"}}),colors=defineTokens.colors({transparent:{value:"transparent"},current:{value:"currentColor"},black:{value:"#09090B"},white:{value:"#FFFFFF"},whiteAlpha:{50:{value:"rgba(255, 255, 255, 0.04)"},100:{value:"rgba(255, 255, 255, 0.06)"},200:{value:"rgba(255, 255, 255, 0.08)"},300:{value:"rgba(255, 255, 255, 0.16)"},400:{value:"rgba(255, 255, 255, 0.24)"},500:{value:"rgba(255, 255, 255, 0.36)"},600:{value:"rgba(255, 255, 255, 0.48)"},700:{value:"rgba(255, 255, 255, 0.64)"},800:{value:"rgba(255, 255, 255, 0.80)"},900:{value:"rgba(255, 255, 255, 0.92)"},950:{value:"rgba(255, 255, 255, 0.95)"}},blackAlpha:{50:{value:"rgba(0, 0, 0, 0.04)"},100:{value:"rgba(0, 0, 0, 0.06)"},200:{value:"rgba(0, 0, 0, 0.08)"},300:{value:"rgba(0, 0, 0, 0.16)"},400:{value:"rgba(0, 0, 0, 0.24)"},500:{value:"rgba(0, 0, 0, 0.36)"},600:{value:"rgba(0, 0, 0, 0.48)"},700:{value:"rgba(0, 0, 0, 0.64)"},800:{value:"rgba(0, 0, 0, 0.80)"},900:{value:"rgba(0, 0, 0, 0.92)"},950:{value:"rgba(0, 0, 0, 0.95)"}},gray:{50:{value:"#fafafa"},100:{value:"#f4f4f5"},200:{value:"#e4e4e7"},300:{value:"#d4d4d8"},400:{value:"#a1a1aa"},500:{value:"#71717a"},600:{value:"#52525b"},700:{value:"#3f3f46"},800:{value:"#27272a"},900:{value:"#18181b"},950:{value:"#111111"}},red:{50:{value:"#fef2f2"},100:{value:"#fee2e2"},200:{value:"#fecaca"},300:{value:"#fca5a5"},400:{value:"#f87171"},500:{value:"#ef4444"},600:{value:"#dc2626"},700:{value:"#991919"},800:{value:"#511111"},900:{value:"#300c0c"},950:{value:"#1f0808"}},orange:{50:{value:"#fff7ed"},100:{value:"#ffedd5"},200:{value:"#fed7aa"},300:{value:"#fdba74"},400:{value:"#fb923c"},500:{value:"#f97316"},600:{value:"#ea580c"},700:{value:"#92310a"},800:{value:"#6c2710"},900:{value:"#3b1106"},950:{value:"#220a04"}},yellow:{50:{value:"#fefce8"},100:{value:"#fef9c3"},200:{value:"#fef08a"},300:{value:"#fde047"},400:{value:"#facc15"},500:{value:"#eab308"},600:{value:"#ca8a04"},700:{value:"#845209"},800:{value:"#713f12"},900:{value:"#422006"},950:{value:"#281304"}},green:{50:{value:"#f0fdf4"},100:{value:"#dcfce7"},200:{value:"#bbf7d0"},300:{value:"#86efac"},400:{value:"#4ade80"},500:{value:"#22c55e"},600:{value:"#16a34a"},700:{value:"#116932"},800:{value:"#124a28"},900:{value:"#042713"},950:{value:"#03190c"}},teal:{50:{value:"#f0fdfa"},100:{value:"#ccfbf1"},200:{value:"#99f6e4"},300:{value:"#5eead4"},400:{value:"#2dd4bf"},500:{value:"#14b8a6"},600:{value:"#0d9488"},700:{value:"#0c5d56"},800:{value:"#114240"},900:{value:"#032726"},950:{value:"#021716"}},blue:{50:{value:"#eff6ff"},100:{value:"#dbeafe"},200:{value:"#bfdbfe"},300:{value:"#a3cfff"},400:{value:"#60a5fa"},500:{value:"#3b82f6"},600:{value:"#2563eb"},700:{value:"#173da6"},800:{value:"#1a3478"},900:{value:"#14204a"},950:{value:"#0c142e"}},cyan:{50:{value:"#ecfeff"},100:{value:"#cffafe"},200:{value:"#a5f3fc"},300:{value:"#67e8f9"},400:{value:"#22d3ee"},500:{value:"#06b6d4"},600:{value:"#0891b2"},700:{value:"#0c5c72"},800:{value:"#134152"},900:{value:"#072a38"},950:{value:"#051b24"}},purple:{50:{value:"#faf5ff"},100:{value:"#f3e8ff"},200:{value:"#e9d5ff"},300:{value:"#d8b4fe"},400:{value:"#c084fc"},500:{value:"#a855f7"},600:{value:"#9333ea"},700:{value:"#641ba3"},800:{value:"#4a1772"},900:{value:"#2f0553"},950:{value:"#1a032e"}},pink:{50:{value:"#fdf2f8"},100:{value:"#fce7f3"},200:{value:"#fbcfe8"},300:{value:"#f9a8d4"},400:{value:"#f472b6"},500:{value:"#ec4899"},600:{value:"#db2777"},700:{value:"#a41752"},800:{value:"#6d0e34"},900:{value:"#45061f"},950:{value:"#2c0514"}}}),cursor=defineTokens.cursor({button:{value:"pointer"},checkbox:{value:"default"},disabled:{value:"not-allowed"},menuitem:{value:"default"},option:{value:"default"},radio:{value:"default"},slider:{value:"default"},switch:{value:"pointer"}}),durations=defineTokens.durations({fastest:{value:"50ms"},faster:{value:"100ms"},fast:{value:"150ms"},moderate:{value:"200ms"},slow:{value:"300ms"},slower:{value:"400ms"},slowest:{value:"500ms"}}),easings=defineTokens.easings({"ease-in":{value:"cubic-bezier(0.42, 0, 1, 1)"},"ease-out":{value:"cubic-bezier(0, 0, 0.58, 1)"},"ease-in-out":{value:"cubic-bezier(0.42, 0, 0.58, 1)"},"ease-in-smooth":{value:"cubic-bezier(0.32, 0.72, 0, 1)"}}),fontSizes=defineTokens.fontSizes({"2xs":{value:"0.625rem"},xs:{value:"0.75rem"},sm:{value:"0.875rem"},md:{value:"1rem"},lg:{value:"1.125rem"},xl:{value:"1.25rem"},"2xl":{value:"1.5rem"},"3xl":{value:"1.875rem"},"4xl":{value:"2.25rem"},"5xl":{value:"3rem"},"6xl":{value:"3.75rem"},"7xl":{value:"4.5rem"},"8xl":{value:"6rem"},"9xl":{value:"8rem"}}),fontWeights=defineTokens.fontWeights({thin:{value:"100"},extralight:{value:"200"},light:{value:"300"},normal:{value:"400"},medium:{value:"500"},semibold:{value:"600"},bold:{value:"700"},extrabold:{value:"800"},black:{value:"900"}}),fallback='-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fonts=defineTokens.fonts({heading:{value:`Inter, ${fallback}`},body:{value:`Inter, ${fallback}`},mono:{value:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'}}),keyframes=defineKeyframes({spin:{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}},pulse:{"50%":{opacity:"0.5"}},ping:{"75%, 100%":{transform:"scale(2)",opacity:"0"}},bounce:{"0%, 100%":{transform:"translateY(-25%)",animationTimingFunction:"cubic-bezier(0.8,0,1,1)"},"50%":{transform:"none",animationTimingFunction:"cubic-bezier(0,0,0.2,1)"}},"bg-position":{from:{backgroundPosition:"var(--animate-from, 1rem) 0"},to:{backgroundPosition:"var(--animate-to, 0) 0"}},position:{from:{insetInlineStart:"var(--animate-from-x)",insetBlockStart:"var(--animate-from-y)"},to:{insetInlineStart:"var(--animate-to-x)",insetBlockStart:"var(--animate-to-y)"}},"circular-progress":{"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100%"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260%"}},"expand-height":{from:{height:"0"},to:{height:"var(--height)"}},"collapse-height":{from:{height:"var(--height)"},to:{height:"0"}},"expand-width":{from:{width:"0"},to:{width:"var(--width)"}},"collapse-width":{from:{height:"var(--width)"},to:{height:"0"}},"fade-in":{from:{opacity:0},to:{opacity:1}},"fade-out":{from:{opacity:1},to:{opacity:0}},"slide-from-left-full":{from:{translate:"-100% 0"},to:{translate:"0 0"}},"slide-from-right-full":{from:{translate:"100% 0"},to:{translate:"0 0"}},"slide-from-top-full":{from:{translate:"0 -100%"},to:{translate:"0 0"}},"slide-from-bottom-full":{from:{translate:"0 100%"},to:{translate:"0 0"}},"slide-to-left-full":{from:{translate:"0 0"},to:{translate:"-100% 0"}},"slide-to-right-full":{from:{translate:"0 0"},to:{translate:"100% 0"}},"slide-to-top-full":{from:{translate:"0 0"},to:{translate:"0 -100%"}},"slide-to-bottom-full":{from:{translate:"0 0"},to:{translate:"0 100%"}},"slide-from-top":{"0%":{translate:"0 -0.5rem"},to:{translate:"0"}},"slide-from-bottom":{"0%":{translate:"0 0.5rem"},to:{translate:"0"}},"slide-from-left":{"0%":{translate:"-0.5rem 0"},to:{translate:"0"}},"slide-from-right":{"0%":{translate:"0.5rem 0"},to:{translate:"0"}},"slide-to-top":{"0%":{translate:"0"},to:{translate:"0 -0.5rem"}},"slide-to-bottom":{"0%":{translate:"0"},to:{translate:"0 0.5rem"}},"slide-to-left":{"0%":{translate:"0"},to:{translate:"-0.5rem 0"}},"slide-to-right":{"0%":{translate:"0"},to:{translate:"0.5rem 0"}},"scale-in":{from:{scale:"0.95"},to:{scale:"1"}},"scale-out":{from:{scale:"1"},to:{scale:"0.95"}}}),letterSpacings=defineTokens.letterSpacings({tighter:{value:"-0.05em"},tight:{value:"-0.025em"},wide:{value:"0.025em"},wider:{value:"0.05em"},widest:{value:"0.1em"}}),lineHeights=defineTokens.lineHeights({shorter:{value:1.25},short:{value:1.375},moderate:{value:1.5},tall:{value:1.625},taller:{value:2}}),radii=defineTokens.radii({none:{value:"0"},"2xs":{value:"0.0625rem"},xs:{value:"0.125rem"},sm:{value:"0.25rem"},md:{value:"0.375rem"},lg:{value:"0.5rem"},xl:{value:"0.75rem"},"2xl":{value:"1rem"},"3xl":{value:"1.5rem"},"4xl":{value:"2rem"},full:{value:"9999px"}}),spacing=defineTokens.spacing({.5:{value:"0.125rem"},1:{value:"0.25rem"},1.5:{value:"0.375rem"},2:{value:"0.5rem"},2.5:{value:"0.625rem"},3:{value:"0.75rem"},3.5:{value:"0.875rem"},4:{value:"1rem"},4.5:{value:"1.125rem"},5:{value:"1.25rem"},6:{value:"1.5rem"},7:{value:"1.75rem"},8:{value:"2rem"},9:{value:"2.25rem"},10:{value:"2.5rem"},11:{value:"2.75rem"},12:{value:"3rem"},14:{value:"3.5rem"},16:{value:"4rem"},20:{value:"5rem"},24:{value:"6rem"},28:{value:"7rem"},32:{value:"8rem"},36:{value:"9rem"},40:{value:"10rem"},44:{value:"11rem"},48:{value:"12rem"},52:{value:"13rem"},56:{value:"14rem"},60:{value:"15rem"},64:{value:"16rem"},72:{value:"18rem"},80:{value:"20rem"},96:{value:"24rem"}}),largeSizes=defineTokens.sizes({"3xs":{value:"14rem"},"2xs":{value:"16rem"},xs:{value:"20rem"},sm:{value:"24rem"},md:{value:"28rem"},lg:{value:"32rem"},xl:{value:"36rem"},"2xl":{value:"42rem"},"3xl":{value:"48rem"},"4xl":{value:"56rem"},"5xl":{value:"64rem"},"6xl":{value:"72rem"},"7xl":{value:"80rem"},"8xl":{value:"90rem"}}),namedSizes=defineTokens.sizes({max:{value:"max-content"},min:{value:"min-content"},fit:{value:"fit-content"},prose:{value:"60ch"},full:{value:"100%"},dvh:{value:"100dvh"},svh:{value:"100svh"},lvh:{value:"100lvh"},dvw:{value:"100dvw"},svw:{value:"100svw"},lvw:{value:"100lvw"},vw:{value:"100vw"},vh:{value:"100vh"}}),fractionalSizes=defineTokens.sizes({"1/2":{value:"50%"},"1/3":{value:"33.333333%"},"2/3":{value:"66.666667%"},"1/4":{value:"25%"},"3/4":{value:"75%"},"1/5":{value:"20%"},"2/5":{value:"40%"},"3/5":{value:"60%"},"4/5":{value:"80%"},"1/6":{value:"16.666667%"},"2/6":{value:"33.333333%"},"3/6":{value:"50%"},"4/6":{value:"66.666667%"},"5/6":{value:"83.333333%"},"1/12":{value:"8.333333%"},"2/12":{value:"16.666667%"},"3/12":{value:"25%"},"4/12":{value:"33.333333%"},"5/12":{value:"41.666667%"},"6/12":{value:"50%"},"7/12":{value:"58.333333%"},"8/12":{value:"66.666667%"},"9/12":{value:"75%"},"10/12":{value:"83.333333%"},"11/12":{value:"91.666667%"}}),sizes=defineTokens.sizes({...largeSizes,...spacing,...fractionalSizes,...namedSizes}),zIndices=defineTokens.zIndex({hide:{value:-1},base:{value:0},docked:{value:10},dropdown:{value:1e3},sticky:{value:1100},banner:{value:1200},overlay:{value:1300},modal:{value:1400},popover:{value:1500},skipNav:{value:1600},toast:{value:1700},tooltip:{value:1800},max:{value:2147483647}}),defaultThemeConfig=defineConfig({preflight:!0,cssVarsPrefix:"chakra",cssVarsRoot:":where(html, .chakra-theme)",globalCss,theme:{breakpoints,keyframes,tokens:{aspectRatios,animations,blurs,borders,colors,durations,easings,fonts,fontSizes,fontWeights,letterSpacings,lineHeights,radii,spacing,sizes,zIndex:zIndices,cursor},semanticTokens:{colors:semanticColors,shadows:semanticShadows,radii:semanticRadii},recipes,slotRecipes,textStyles,layerStyles,animationStyles}}),defaultConfig=mergeConfigs(defaultBaseConfig,defaultThemeConfig),defaultSystem=createSystem(defaultConfig);function useSlotRecipe(_e){const{key:_,recipe:et}=_e,tt=useChakraContext();return reactExports.useMemo(()=>{const rt=et||(_!=null?tt.getSlotRecipe(_):{});return tt.sva(structuredClone(rt))},[_,et,tt])}const upperFirst=_e=>_e.charAt(0).toUpperCase()+_e.slice(1),createSlotRecipeContext=_e=>{const{key:_,recipe:et}=_e,tt=upperFirst(_||et.className||"Component"),[rt,nt]=createContext$1({name:`${tt}StylesContext`,errorMessage:`use${tt}Styles returned is 'undefined'. Seems you forgot to wrap the components in "<${tt}.Root />" `}),[ot,at]=createContext$1({name:`${tt}ClassNameContext`,errorMessage:`use${tt}ClassNames returned is 'undefined'. Seems you forgot to wrap the components in "<${tt}.Root />" `,strict:!1}),[lt,ct]=createContext$1({strict:!1,name:`${tt}PropsContext`,providerName:`${tt}PropsContext`,defaultValue:{}});function dt(ht){const{unstyled:ft,...gt}=ht,mt=useSlotRecipe({key:_,recipe:gt.recipe||et}),[yt,bt]=mt.splitVariantProps(gt);return{styles:ft?EMPTY_SLOT_STYLES:mt(yt),classNames:mt.classNameMap,props:bt}}function st(ht,ft={}){const{defaultProps:gt}=ft,mt=yt=>{const bt=mergeProps$1(gt,ct(),yt),{styles:vt,classNames:xt,props:wt}=dt(bt);return jsxRuntimeExports.jsx(rt,{value:vt,children:jsxRuntimeExports.jsx(ot,{value:xt,children:jsxRuntimeExports.jsx(ht,{...wt})})})};return mt.displayName=ht.displayName||ht.name,mt}return{StylesProvider:rt,ClassNamesProvider:ot,PropsProvider:lt,usePropsContext:ct,useRecipeResult:dt,withProvider:(ht,ft,gt)=>{const{defaultProps:mt,...yt}=gt??{},bt=chakra(ht,{},yt),vt=reactExports.forwardRef((xt,wt)=>{var At;const St=mergeProps$1(mt??{},ct(),xt),{styles:Et,props:_t,classNames:Tt}=dt(St),Rt=Tt[ft],Ot=jsxRuntimeExports.jsx(rt,{value:Et,children:jsxRuntimeExports.jsx(ot,{value:Tt,children:jsxRuntimeExports.jsx(bt,{ref:wt,..._t,css:[Et[ft],St.css],className:cx(St.className,Rt)})})});return((At=gt==null?void 0:gt.wrapElement)==null?void 0:At.call(gt,Ot,St))??Ot});return vt.displayName=ht.displayName||ht.name,vt},withContext:(ht,ft,gt)=>{const mt=chakra(ht,{},gt),yt=reactExports.forwardRef((bt,vt)=>{const xt=nt(),wt=at(),St=wt==null?void 0:wt[ft];return jsxRuntimeExports.jsx(mt,{...bt,css:[ft?xt[ft]:void 0,bt.css],ref:vt,className:cx(bt.className,St)})});return yt.displayName=ht.displayName||ht.name,yt},withRootProvider:st,useStyles:nt,useClassNames:at}},CheckIcon=_e=>jsxRuntimeExports.jsx(chakra.svg,{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",..._e,children:jsxRuntimeExports.jsx("path",{d:"M20 6 9 17l-5-5"})}),ChevronUpIcon=_e=>jsxRuntimeExports.jsx(chakra.svg,{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",..._e,children:jsxRuntimeExports.jsx("path",{d:"m18 15-6-6-6 6"})}),ChevronDownIcon=_e=>jsxRuntimeExports.jsx(chakra.svg,{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",..._e,children:jsxRuntimeExports.jsx("path",{d:"m6 9 6 6 6-6"})}),CheckCircleIcon=_e=>jsxRuntimeExports.jsx(chakra.svg,{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",..._e,children:jsxRuntimeExports.jsx("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11.0026 16L6.75999 11.7574L8.17421 10.3431L11.0026 13.1716L16.6595 7.51472L18.0737 8.92893L11.0026 16Z"})}),WarningIcon=_e=>jsxRuntimeExports.jsx(chakra.svg,{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",..._e,children:jsxRuntimeExports.jsx("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 15H13V17H11V15ZM11 7H13V13H11V7Z"})}),CloseIcon=_e=>jsxRuntimeExports.jsx(chakra.svg,{viewBox:"0 0 24 24",fill:"currentColor",..._e,children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7071 6.70711C19.0976 6.31658 19.0976 5.68342 18.7071 5.29289C18.3166 4.90237 17.6834 4.90237 17.2929 5.29289L12 10.5858L6.70711 5.29289C6.31658 4.90237 5.68342 4.90237 5.29289 5.29289C4.90237 5.68342 4.90237 6.31658 5.29289 6.70711L10.5858 12L5.29289 17.2929C4.90237 17.6834 4.90237 18.3166 5.29289 18.7071C5.68342 19.0976 6.31658 19.0976 6.70711 18.7071L12 13.4142L17.2929 18.7071C17.6834 19.0976 18.3166 19.0976 18.7071 18.7071C19.0976 18.3166 19.0976 17.6834 18.7071 17.2929L13.4142 12L18.7071 6.70711Z"})}),Box=chakra("div");Box.displayName="Box";const{withContext:withContext$d,PropsProvider:PropsProvider$b}=createRecipeContext({key:"button"}),Button=withContext$d("button",{defaultProps:{type:"button"}}),IconButton=reactExports.forwardRef(function(_,et){return jsxRuntimeExports.jsx(Button,{px:"0",py:"0",_icon:{fontSize:"1.2em"},ref:et,..._})}),dataAttr=_e=>_e?"":void 0,{withRootProvider:withRootProvider$1,withContext:withContext$c,useStyles:useDrawerStyles,PropsProvider:PropsProvider$a}=createSlotRecipeContext({key:"drawer"});withRootProvider$1(DialogRootProvider,{defaultProps:{unmountOnExit:!0,lazyMount:!0}});const DrawerRoot$1=withRootProvider$1(DialogRoot,{defaultProps:{unmountOnExit:!0,lazyMount:!0}}),DrawerTrigger$1=withContext$c(DialogTrigger,"trigger",{forwardAsChild:!0}),DrawerPositioner=withContext$c(DialogPositioner,"positioner",{forwardAsChild:!0}),DrawerContent$1=withContext$c(DialogContent,"content",{forwardAsChild:!0});withContext$c(DialogDescription,"description",{forwardAsChild:!0});const DrawerTitle$1=withContext$c(DialogTitle,"title",{forwardAsChild:!0}),DrawerCloseTrigger$1=withContext$c(DialogCloseTrigger,"closeTrigger",{forwardAsChild:!0}),DrawerActionTrigger$1=reactExports.forwardRef(function(_,et){const tt=useDialogContext();return jsxRuntimeExports.jsx(chakra.button,{..._,ref:et,onClick:()=>tt.setOpen(!1)})}),DrawerBackdrop$1=withContext$c(DialogBackdrop,"backdrop",{forwardAsChild:!0}),DrawerBody$1=withContext$c("div","body"),DrawerFooter$1=withContext$c("div","footer"),DrawerHeader$1=withContext$c("div","header"),{withContext:withContext$b}=createRecipeContext({key:"icon"}),Icon=withContext$b("svg",{defaultProps:{focusable:!1,asChild:!0,"aria-hidden":!0}});function createIcon(_e){const{viewBox:_="0 0 24 24",d:et,displayName:tt,defaultProps:rt={}}=_e,nt=reactExports.Children.toArray(_e.path),ot=reactExports.forwardRef((at,lt)=>jsxRuntimeExports.jsx(Icon,{ref:lt,asChild:!1,viewBox:_,...rt,...at,children:nt.length?nt:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:et})}));return ot.displayName=tt,ot}const{withProvider:withProvider$5,withContext:withContext$a,useStyles:useFieldStyles,useClassNames,PropsProvider:PropsProvider$9}=createSlotRecipeContext({key:"field"}),FieldRoot=withProvider$5(FieldRoot$1,"root",{forwardAsChild:!0}),FieldLabel=withContext$a(FieldLabel$1,"label",{forwardAsChild:!0}),FieldHelperText=withContext$a(FieldHelperText$1,"helperText",{forwardAsChild:!0}),FieldErrorText=withContext$a(FieldErrorText$1,"errorText",{forwardAsChild:!0});createIcon({d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"});const FieldRequiredIndicator=reactExports.forwardRef(function(_,et){const{fallback:tt,children:rt="*",...nt}=_,ot=useFieldContext(),at=useClassNames(),lt=useFieldStyles();return ot!=null&&ot.required?jsxRuntimeExports.jsx(chakra.span,{ref:et,"aria-hidden":"true",...nt,className:cx(at.requiredIndicator,_.className),css:[lt.requiredIndicator,_.css],children:rt}):tt}),Flex=reactExports.forwardRef(function(_,et){const{direction:tt,align:rt,justify:nt,wrap:ot,basis:at,grow:lt,shrink:ct,inline:dt,...st}=_;return jsxRuntimeExports.jsx(chakra.div,{ref:et,...st,css:{display:dt?"inline-flex":"flex",flexDirection:tt,alignItems:rt,justifyContent:nt,flexWrap:ot,flexBasis:at,flexGrow:lt,flexShrink:ct,..._.css}})}),StyledGroup=chakra("div",{base:{display:"inline-flex",gap:"0.5rem",isolation:"isolate",position:"relative","& [data-group-item]":{_focusVisible:{zIndex:1}}},variants:{orientation:{horizontal:{flexDirection:"row"},vertical:{flexDirection:"column"}},attached:{true:{gap:"0!"}},grow:{true:{display:"flex","& > *":{flex:1}}},stacking:{"first-on-top":{"& > [data-group-item]":{zIndex:"calc(var(--group-count) - var(--group-index))"}},"last-on-top":{"& > [data-group-item]":{zIndex:"var(--group-index)"}}}},compoundVariants:[{orientation:"horizontal",attached:!0,css:{"& > *[data-first]":{borderEndRadius:"0!",marginEnd:"-1px"},"& > *[data-between]":{borderRadius:"0!",marginEnd:"-1px"},"& > *[data-last]":{borderStartRadius:"0!"}}},{orientation:"vertical",attached:!0,css:{"& > *[data-first]":{borderBottomRadius:"0!",marginBottom:"-1px"},"& > *[data-between]":{borderRadius:"0!",marginBottom:"-1px"},"& > *[data-last]":{borderTopRadius:"0!"}}}],defaultVariants:{orientation:"horizontal"}}),Group=reactExports.memo(reactExports.forwardRef(function(_,et){const{align:tt="center",justify:rt="flex-start",children:nt,wrap:ot,...at}=_,lt=reactExports.Children.count(nt),ct=reactExports.useMemo(()=>reactExports.Children.toArray(nt).filter(reactExports.isValidElement).map((st,it)=>{const ut=st.props;return reactExports.cloneElement(st,{...ut,"data-group-item":"","data-first":dataAttr(it===0),"data-last":dataAttr(it===lt-1),"data-between":dataAttr(it>0&&it<lt-1),style:{"--group-count":lt,"--group-index":it,...(ut==null?void 0:ut.style)??{}}})}),[nt,lt]);return jsxRuntimeExports.jsx(StyledGroup,{ref:et,alignItems:tt,justifyContent:rt,flexWrap:ot,...at,children:ct})})),Image$1=reactExports.forwardRef(function(_,et){const{align:tt,fit:rt="cover",...nt}=_;return jsxRuntimeExports.jsx(chakra.img,{ref:et,objectFit:rt,objectPosition:tt,className:cx("chakra-image",_.className),...nt})}),{withContext:withContext$9,PropsProvider:PropsProvider$8}=createRecipeContext({key:"input"}),Input=withContext$9(FieldInput),InputElement=chakra("div",{base:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",zIndex:2,color:"fg.subtle",height:"full",fontSize:"sm",px:"3"},variants:{placement:{start:{insetInlineStart:"0"},end:{insetInlineEnd:"0"}}}}),{withProvider:withProvider$4,withContext:withContext$8,useStyles:useNumberInputStyles,PropsProvider:PropsProvider$7}=createSlotRecipeContext({key:"numberInput"});withProvider$4(NumberInputRootProvider,"root",{forwardAsChild:!0});const NumberInputRoot=withProvider$4(NumberInputRoot$1,"root",{forwardAsChild:!0}),NumberInputControl=withContext$8(NumberInputControl$1,"control",{forwardAsChild:!0});withContext$8(NumberInputLabel,"label",{forwardAsChild:!0});const NumberInputInput=withContext$8(NumberInputInput$1,"input",{forwardAsChild:!0}),NumberInputIncrementTrigger=withContext$8(NumberInputIncrementTrigger$1,"incrementTrigger",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(ChevronUpIcon,{})}}),NumberInputDecrementTrigger=withContext$8(NumberInputDecrementTrigger$1,"decrementTrigger",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(ChevronDownIcon,{})}});withContext$8(NumberInputScrubber,"scrubber",{forwardAsChild:!0});withContext$8(NumberInputValueText,"valueText",{forwardAsChild:!0});const Portal=_e=>{var lt;const{children:_,disabled:et}=_e,[tt,rt]=reactExports.useState((lt=_e.container)==null?void 0:lt.current),nt=reactExports.useSyncExternalStore(subscribe,()=>!1,()=>!0),{getRootNode:ot}=useEnvironmentContext();if(reactExports.useEffect(()=>{rt(()=>{var ct;return(ct=_e.container)==null?void 0:ct.current})},[_e.container]),nt||et)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_});const at=tt??getPortalNode(ot);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:reactExports.Children.map(_,ct=>reactDomExports.createPortal(ct,at))})},getPortalNode=_e=>{const _=_e==null?void 0:_e(),et=_.getRootNode();return isShadowRoot$1(et)?et:getDocument(_).body},subscribe=()=>()=>{},{withProvider:withProvider$3,withContext:withContext$7,useStyles:useSelectStyles,PropsProvider:PropsProvider$6}=createSlotRecipeContext({key:"select"});withProvider$3(SelectRootProvider,"root",{forwardAsChild:!0});const SelectRoot$1=withProvider$3(SelectRoot$2,"root",{forwardAsChild:!0}),SelectTrigger$1=withContext$7(SelectTrigger$2,"trigger",{forwardAsChild:!0}),SelectPositioner=withContext$7(SelectPositioner$1,"positioner",{forwardAsChild:!0}),SelectContent$1=withContext$7(SelectContent$2,"content",{forwardAsChild:!0}),SelectValueText$1=withContext$7(SelectValueText$2,"valueText",{forwardAsChild:!0}),SelectClearTrigger$1=withContext$7(SelectClearTrigger$2,"clearTrigger",{forwardAsChild:!0}),SelectItemGroup=withContext$7(SelectItemGroup$1,"itemGroup",{forwardAsChild:!0}),SelectItemGroupLabel=withContext$7(SelectItemGroupLabel$1,"itemGroupLabel",{forwardAsChild:!0}),SelectItem$1=withContext$7(SelectItem$2,"item",{forwardAsChild:!0});withContext$7(SelectItemText,"itemText",{forwardAsChild:!0});const SelectItemIndicator=withContext$7(SelectItemIndicator$1,"itemIndicator",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(CheckIcon,{})}}),SelectIndicatorGroup=withContext$7("div","indicatorGroup"),SelectIndicator=withContext$7(SelectIndicator$1,"indicator",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(ChevronDownIcon,{})}}),SelectControl=withContext$7(SelectControl$1,"control",{forwardAsChild:!0});withContext$7(SelectLabel,"label",{forwardAsChild:!0});const SelectContext=SelectContext$1,SelectHiddenSelect=SelectHiddenSelect$1,{withContext:withContext$6,PropsProvider:PropsProvider$5}=createRecipeContext({key:"spinner"}),Spinner=withContext$6("span");function getSeparatorStyles(_e){const{gap:_,direction:et}=_e,tt={column:{marginY:_,marginX:0,borderInlineStartWidth:0,borderTopWidth:"1px"},"column-reverse":{marginY:_,marginX:0,borderInlineStartWidth:0,borderTopWidth:"1px"},row:{marginX:_,marginY:0,borderInlineStartWidth:"1px",borderTopWidth:0},"row-reverse":{marginX:_,marginY:0,borderInlineStartWidth:"1px",borderTopWidth:0}};return{"&":mapObject(et,rt=>tt[rt])}}function getValidChildren(_e){return reactExports.Children.toArray(_e).filter(_=>reactExports.isValidElement(_))}const Stack=reactExports.forwardRef(function(_,et){const{direction:tt="column",align:rt,justify:nt,gap:ot="0.5rem",wrap:at,children:lt,separator:ct,className:dt,...st}=_,it=reactExports.useMemo(()=>getSeparatorStyles({gap:ot,direction:tt}),[ot,tt]),ut=reactExports.useMemo(()=>ct?getValidChildren(lt).map((ht,ft,gt)=>{const mt=typeof ht.key<"u"?ht.key:ft,yt=reactExports.cloneElement(ct,{css:[it,ct.props.css]});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[ht,ft===gt.length-1?null:yt]},mt)}):lt,[lt,ct,it]);return jsxRuntimeExports.jsx(chakra.div,{ref:et,display:"flex",alignItems:rt,justifyContent:nt,flexDirection:tt,flexWrap:at,gap:ct?void 0:ot,className:cx("chakra-stack",dt),...st,children:ut})}),HStack=reactExports.forwardRef(function(_,et){return jsxRuntimeExports.jsx(Stack,{align:"center",..._,direction:"row",ref:et})}),VStack=reactExports.forwardRef(function(_,et){return jsxRuntimeExports.jsx(Stack,{align:"center",..._,direction:"column",ref:et})}),{withProvider:withProvider$2,withContext:withContext$5,useStyles:useSwitchStyles,PropsProvider:PropsProvider$4}=createSlotRecipeContext({key:"switch"});withProvider$2(SwitchRootProvider,"root",{forwardAsChild:!0});const SwitchRoot=withProvider$2(SwitchRoot$1,"root",{forwardAsChild:!0}),SwitchLabel=withContext$5(SwitchLabel$1,"label",{forwardAsChild:!0}),SwitchControl=withContext$5(SwitchControl$1,"control",{forwardAsChild:!0}),SwitchThumb=withContext$5(SwitchThumb$1,"thumb",{forwardAsChild:!0}),SwitchIndicator=reactExports.forwardRef(function(_,et){const tt=useSwitchContext(),rt=useSwitchStyles(),{fallback:nt,children:ot,...at}=_;return jsxRuntimeExports.jsx(chakra.span,{ref:et,"data-checked":dataAttr(tt.checked),...at,css:[rt.indicator,_.css],children:tt.checked?ot:nt})}),SwitchThumbIndicator=reactExports.forwardRef(function(_,et){const tt=useSwitchContext(),{fallback:rt,children:nt,...ot}=_;return jsxRuntimeExports.jsx(chakra.span,{ref:et,"data-checked":dataAttr(tt.checked),...ot,children:tt.checked?nt:rt})}),SwitchHiddenInput=SwitchHiddenInput$1;function useDebounce(_e,_){const[et,tt]=reactExports.useState(_e);return reactExports.useEffect(()=>{const rt=setTimeout(()=>{tt(_e)},_);return()=>{clearTimeout(rt)}},[_e,_]),et}const[TabsProvider,useTabsContext]=createContext({name:"TabsContext",hookName:"useTabsContext",providerName:"<TabsProvider />"}),TabContent=reactExports.forwardRef((_e,_)=>{const[et,tt]=createSplitProps()(_e,["value"]),rt=useTabsContext(),nt=useRenderStrategyPropsContext(),ot=usePresence({...nt,present:useDebounce(rt.value===_e.value,0),immediate:!0}),at=mergeProps(rt.getContentProps(et),ot.getPresenceProps(),tt);return jsxRuntimeExports.jsx(PresenceProvider,{value:ot,children:ot.unmounted?null:jsxRuntimeExports.jsx(ark.div,{...at,ref:composeRefs(ot.ref,_)})})});TabContent.displayName="TabContent";const TabIndicator=reactExports.forwardRef((_e,_)=>{const et=useTabsContext(),tt=mergeProps(et.getIndicatorProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});TabIndicator.displayName="TabIndicator";const TabList=reactExports.forwardRef((_e,_)=>{const et=useTabsContext(),tt=mergeProps(et.getListProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});TabList.displayName="TabList";const TabTrigger=reactExports.forwardRef((_e,_)=>{const[et,tt]=createSplitProps()(_e,["disabled","value"]),rt=useTabsContext(),nt=mergeProps(rt.getTriggerProps(et),tt);return jsxRuntimeExports.jsx(ark.button,{...nt,ref:_})});TabTrigger.displayName="TabTrigger";var anatomy$1=createAnatomy("tabs").parts("root","list","trigger","content","indicator"),parts$1=anatomy$1.build(),dom$1=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`tabs:${_e.id}`},getListId:_e=>{var _;return((_=_e.ids)==null?void 0:_.list)??`tabs:${_e.id}:list`},getContentId:(_e,_)=>{var et;return((et=_e.ids)==null?void 0:et.content)??`tabs:${_e.id}:content-${_}`},getTriggerId:(_e,_)=>{var et;return((et=_e.ids)==null?void 0:et.trigger)??`tabs:${_e.id}:trigger-${_}`},getIndicatorId:_e=>{var _;return((_=_e.ids)==null?void 0:_.indicator)??`tabs:${_e.id}:indicator`},getListEl:_e=>dom$1.getById(_e,dom$1.getListId(_e)),getContentEl:(_e,_)=>dom$1.getById(_e,dom$1.getContentId(_e,_)),getTriggerEl:(_e,_)=>dom$1.getById(_e,dom$1.getTriggerId(_e,_)),getIndicatorEl:_e=>dom$1.getById(_e,dom$1.getIndicatorId(_e)),getElements:_e=>{const et=`[role=tab][data-ownedby='${CSS.escape(dom$1.getListId(_e))}']:not([disabled])`;return queryAll(dom$1.getListEl(_e),et)},getFirstTriggerEl:_e=>first(dom$1.getElements(_e)),getLastTriggerEl:_e=>last(dom$1.getElements(_e)),getNextTriggerEl:(_e,_)=>nextById(dom$1.getElements(_e),dom$1.getTriggerId(_e,_),_e.loopFocus),getPrevTriggerEl:(_e,_)=>prevById(dom$1.getElements(_e),dom$1.getTriggerId(_e,_),_e.loopFocus),getSelectedContentEl:_e=>{if(_e.value)return dom$1.getContentEl(_e,_e.value)},getSelectedTriggerEl:_e=>{if(_e.value)return dom$1.getTriggerEl(_e,_e.value)},getOffsetRect:_e=>({left:(_e==null?void 0:_e.offsetLeft)??0,top:(_e==null?void 0:_e.offsetTop)??0,width:(_e==null?void 0:_e.offsetWidth)??0,height:(_e==null?void 0:_e.offsetHeight)??0}),getRectById:(_e,_)=>{const et=itemById(dom$1.getElements(_e),dom$1.getTriggerId(_e,_));return dom$1.resolveRect(dom$1.getOffsetRect(et))},resolveRect:_e=>({width:`${_e.width}px`,height:`${_e.height}px`,left:`${_e.left}px`,top:`${_e.top}px`})});function connect$1(_e,_,et){const tt=_e.context.translations,rt=_e.matches("focused"),nt=_e.context.orientation==="vertical",ot=_e.context.orientation==="horizontal",at=_e.context.composite,lt=_e.context.indicatorState;function ct(dt){return{selected:_e.context.value===dt.value,focused:_e.context.focusedValue===dt.value,disabled:!!dt.disabled}}return{value:_e.context.value,focusedValue:_e.context.focusedValue,setValue(dt){_({type:"SET_VALUE",value:dt})},clearValue(){_({type:"CLEAR_VALUE"})},setIndicatorRect(dt){const st=dom$1.getTriggerId(_e.context,dt);_({type:"SET_INDICATOR_RECT",id:st})},syncTabIndex(){_("SYNC_TAB_INDEX")},selectNext(dt){_({type:"TAB_FOCUS",value:dt,src:"selectNext"}),_({type:"ARROW_NEXT",src:"selectNext"})},selectPrev(dt){_({type:"TAB_FOCUS",value:dt,src:"selectPrev"}),_({type:"ARROW_PREV",src:"selectPrev"})},focus(){var dt;(dt=dom$1.getSelectedTriggerEl(_e.context))==null||dt.focus()},getRootProps(){return et.element({...parts$1.root.attrs,id:dom$1.getRootId(_e.context),"data-orientation":_e.context.orientation,"data-focus":dataAttr$1(rt),dir:_e.context.dir})},getListProps(){return et.element({...parts$1.list.attrs,id:dom$1.getListId(_e.context),role:"tablist",dir:_e.context.dir,"data-focus":dataAttr$1(rt),"aria-orientation":_e.context.orientation,"data-orientation":_e.context.orientation,"aria-label":tt==null?void 0:tt.listLabel,onKeyDown(dt){if(dt.defaultPrevented||!isSelfTarget(dt)||isComposingEvent(dt))return;const st={ArrowDown(){ot||_({type:"ARROW_NEXT",key:"ArrowDown"})},ArrowUp(){ot||_({type:"ARROW_PREV",key:"ArrowUp"})},ArrowLeft(){nt||_({type:"ARROW_PREV",key:"ArrowLeft"})},ArrowRight(){nt||_({type:"ARROW_NEXT",key:"ArrowRight"})},Home(){_("HOME")},End(){_("END")},Enter(){_({type:"ENTER"})}};let it=getEventKey(dt,_e.context);const ut=st[it];ut&&(dt.preventDefault(),ut(dt))}})},getTriggerState:ct,getTriggerProps(dt){const{value:st,disabled:it}=dt,ut=ct(dt);return et.button({...parts$1.trigger.attrs,role:"tab",type:"button",disabled:it,dir:_e.context.dir,"data-orientation":_e.context.orientation,"data-disabled":dataAttr$1(it),"aria-disabled":it,"data-value":st,"aria-selected":ut.selected,"data-selected":dataAttr$1(ut.selected),"data-focus":dataAttr$1(ut.focused),"aria-controls":ut.selected?dom$1.getContentId(_e.context,st):void 0,"data-ownedby":dom$1.getListId(_e.context),"data-ssr":dataAttr$1(_e.context.ssr),id:dom$1.getTriggerId(_e.context,st),tabIndex:ut.selected&&at?0:-1,onFocus(){_({type:"TAB_FOCUS",value:st})},onBlur(ht){const ft=ht.relatedTarget;(ft==null?void 0:ft.getAttribute("role"))!=="tab"&&_({type:"TAB_BLUR"})},onClick(ht){ht.defaultPrevented||it||(isSafari()&&ht.currentTarget.focus(),_({type:"TAB_CLICK",value:st}))}})},getContentProps(dt){const{value:st}=dt,it=_e.context.value===st;return et.element({...parts$1.content.attrs,dir:_e.context.dir,id:dom$1.getContentId(_e.context,st),tabIndex:at?0:-1,"aria-labelledby":dom$1.getTriggerId(_e.context,st),role:"tabpanel","data-ownedby":dom$1.getListId(_e.context),"data-selected":dataAttr$1(it),"data-orientation":_e.context.orientation,hidden:!it})},getIndicatorProps(){var dt,st,it,ut;return et.element({id:dom$1.getIndicatorId(_e.context),...parts$1.indicator.attrs,dir:_e.context.dir,"data-orientation":_e.context.orientation,style:{"--transition-property":"left, right, top, bottom, width, height","--left":(dt=lt.rect)==null?void 0:dt.left,"--top":(st=lt.rect)==null?void 0:st.top,"--width":(it=lt.rect)==null?void 0:it.width,"--height":(ut=lt.rect)==null?void 0:ut.height,position:"absolute",willChange:"var(--transition-property)",transitionProperty:"var(--transition-property)",transitionDuration:lt.transition?"var(--transition-duration, 150ms)":"0ms",transitionTimingFunction:"var(--transition-timing-function)",[ot?"left":"top"]:ot?"var(--left)":"var(--top)"}})}}}var{not:not$1}=guards;function machine(_e){const _=compact$2(_e);return createMachine({initial:"idle",context:{dir:"ltr",orientation:"horizontal",activationMode:"automatic",value:null,loopFocus:!0,composite:!0,..._,focusedValue:_.value??null,ssr:!0,indicatorState:{rendered:!1,transition:!1,rect:{left:"0px",top:"0px",width:"0px",height:"0px"}}},watch:{value:["allowIndicatorTransition","syncIndicatorRect","syncTabIndex","clickIfLink"],dir:["syncIndicatorRect"],orientation:["syncIndicatorRect"]},on:{SET_VALUE:{actions:"setValue"},CLEAR_VALUE:{actions:"clearValue"},SET_INDICATOR_RECT:{actions:"setIndicatorRect"},SYNC_TAB_INDEX:{actions:"syncTabIndex"}},created:["syncFocusedValue"],entry:["checkRenderedElements","syncIndicatorRect","syncTabIndex","syncSsr"],exit:["cleanupObserver"],states:{idle:{on:{TAB_FOCUS:{target:"focused",actions:"setFocusedValue"},TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]}}},focused:{on:{TAB_CLICK:{target:"focused",actions:["setFocusedValue","setValue"]},ARROW_PREV:[{guard:"selectOnFocus",actions:["focusPrevTab","selectFocusedTab"]},{actions:"focusPrevTab"}],ARROW_NEXT:[{guard:"selectOnFocus",actions:["focusNextTab","selectFocusedTab"]},{actions:"focusNextTab"}],HOME:[{guard:"selectOnFocus",actions:["focusFirstTab","selectFocusedTab"]},{actions:"focusFirstTab"}],END:[{guard:"selectOnFocus",actions:["focusLastTab","selectFocusedTab"]},{actions:"focusLastTab"}],ENTER:{guard:not$1("selectOnFocus"),actions:"selectFocusedTab"},TAB_FOCUS:{actions:["setFocusedValue"]},TAB_BLUR:{target:"idle",actions:"clearFocusedValue"}}}}},{guards:{selectOnFocus:et=>et.activationMode==="automatic"},actions:{syncFocusedValue(et){et.value!=null&&et.focusedValue==null&&(et.focusedValue=et.value)},selectFocusedTab(et){raf$1(()=>{const rt=et.deselectable&&et.value===et.focusedValue?null:et.focusedValue;set.value(et,rt)})},setFocusedValue(et,tt){tt.value!=null&&set.focusedValue(et,tt.value)},clearFocusedValue(et){set.focusedValue(et,null)},setValue(et,tt){const nt=et.deselectable&&et.value===et.focusedValue?null:tt.value;set.value(et,nt)},clearValue(et){set.value(et,null)},focusFirstTab(et){raf$1(()=>{var tt;(tt=dom$1.getFirstTriggerEl(et))==null||tt.focus()})},focusLastTab(et){raf$1(()=>{var tt;(tt=dom$1.getLastTriggerEl(et))==null||tt.focus()})},focusNextTab(et){if(!et.focusedValue)return;const tt=dom$1.getNextTriggerEl(et,et.focusedValue);raf$1(()=>{et.composite?tt==null||tt.focus():(tt==null?void 0:tt.dataset.value)!=null&&set.focusedValue(et,tt.dataset.value)})},focusPrevTab(et){if(!et.focusedValue)return;const tt=dom$1.getPrevTriggerEl(et,et.focusedValue);raf$1(()=>{et.composite?tt==null||tt.focus():(tt==null?void 0:tt.dataset.value)!=null&&set.focusedValue(et,tt.dataset.value)})},checkRenderedElements(et){et.indicatorState.rendered=!!dom$1.getIndicatorEl(et)},syncTabIndex(et){raf$1(()=>{const tt=dom$1.getSelectedContentEl(et);if(!tt)return;getFocusables(tt).length>0?tt.removeAttribute("tabindex"):tt.setAttribute("tabindex","0")})},cleanupObserver(et){var tt;(tt=et.indicatorCleanup)==null||tt.call(et)},allowIndicatorTransition(et){et.indicatorState.transition=!0},setIndicatorRect(et,tt){const rt=tt.id??et.value;!et.indicatorState.rendered||!rt||!dom$1.getTriggerEl(et,rt)||(et.indicatorState.rect=dom$1.getRectById(et,rt),nextTick(()=>{et.indicatorState.transition=!1}))},syncSsr(et){et.ssr=!1},syncIndicatorRect(et){var nt;(nt=et.indicatorCleanup)==null||nt.call(et);const tt=et.value;if(!et.indicatorState.rendered||!tt)return;const rt=dom$1.getSelectedTriggerEl(et);rt&&(et.indicatorCleanup=trackElementRect(rt,{getRect(ot){return dom$1.getOffsetRect(ot)},onChange(ot){et.indicatorState.rect=dom$1.resolveRect(ot),nextTick(()=>{et.indicatorState.transition=!1})}}))},clickIfLink(et){clickIfLink(dom$1.getSelectedTriggerEl(et))}}})}var invoke={change:_e=>{var _;_e.value!=null&&((_=_e.onValueChange)==null||_.call(_e,{value:_e.value}))},focusChange:_e=>{var _;_e.focusedValue!=null&&((_=_e.onFocusChange)==null||_.call(_e,{focusedValue:_e.focusedValue}))}},set={value:(_e,_)=>{isEqual$1(_,_e.value)||(_e.value=_,invoke.change(_e))},focusedValue:(_e,_)=>{isEqual$1(_,_e.focusedValue)||(_e.focusedValue=_,invoke.focusChange(_e))}};createProps()(["activationMode","composite","dir","getRootNode","id","ids","loopFocus","onFocusChange","onValueChange","orientation","translations","deselectable","value"]);createProps()(["disabled","value"]);createProps()(["value"]);const useTabs=(_e={})=>{const{getRootNode:_}=useEnvironmentContext(),{dir:et}=useLocaleContext(),tt={id:reactExports.useId(),dir:et,getRootNode:_,value:_e.defaultValue,..._e},rt={...tt,value:_e.value,onValueChange:useEvent(_e.onValueChange,{sync:!0}),onFocusChange:useEvent(_e.onFocusChange)},[nt,ot]=useMachine(machine(tt),{context:rt});return connect$1(nt,ot,normalizeProps)},TabsRoot$1=reactExports.forwardRef((_e,_)=>{const[et,tt]=splitRenderStrategyProps(_e),[rt,nt]=createSplitProps()(tt,["activationMode","composite","defaultValue","deselectable","id","ids","loopFocus","onFocusChange","onValueChange","orientation","translations","value"]),ot=useTabs(rt),at=mergeProps(ot.getRootProps(),nt);return jsxRuntimeExports.jsx(TabsProvider,{value:ot,children:jsxRuntimeExports.jsx(RenderStrategyPropsProvider,{value:et,children:jsxRuntimeExports.jsx(ark.div,{...at,ref:_})})})});TabsRoot$1.displayName="TabsRoot";const TabsRootProvider=reactExports.forwardRef((_e,_)=>{const[et,tt]=splitRenderStrategyProps(_e),[{value:rt},nt]=createSplitProps()(tt,["value"]),ot=mergeProps(rt.getRootProps(),nt);return jsxRuntimeExports.jsx(TabsProvider,{value:rt,children:jsxRuntimeExports.jsx(RenderStrategyPropsProvider,{value:et,children:jsxRuntimeExports.jsx(ark.div,{...ot,ref:_})})})});TabsRootProvider.displayName="TabsRootProvider";const{withProvider:withProvider$1,withContext:withContext$4,useStyles:useTabsStyles,PropsProvider:PropsProvider$3}=createSlotRecipeContext({key:"tabs"});withProvider$1(TabsRootProvider,"root",{forwardAsChild:!0});const TabsRoot=withProvider$1(TabsRoot$1,"root",{forwardAsChild:!0}),TabsTrigger=withContext$4(TabTrigger,"trigger",{forwardAsChild:!0}),TabsContent=withContext$4(TabContent,"content",{forwardAsChild:!0}),TabsContentGroup=withContext$4("div","contentGroup"),TabsList=withContext$4(TabList,"list",{forwardAsChild:!0});withContext$4(TabIndicator,"indicator",{forwardAsChild:!0});const{withContext:withContext$3,PropsProvider:PropsProvider$2}=createRecipeContext({key:"textarea"}),Textarea=withContext$3(FieldTextarea);var anatomy=createAnatomy("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),parts=anatomy.build(),dom=createScope({getRegionId:_e=>`toast-group:${_e}`,getRegionEl:(_e,_)=>dom.getById(_e,`toast-group:${_}`),getRootId:_e=>`toast:${_e.id}`,getRootEl:_e=>dom.getById(_e,dom.getRootId(_e)),getTitleId:_e=>`toast:${_e.id}:title`,getDescriptionId:_e=>`toast:${_e.id}:description`,getCloseTriggerId:_e=>`toast${_e.id}:close`});function getToastsByPlacement(_e,_){return _e.filter(et=>et.state.context.placement===_)}var defaultTimeouts={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function getToastDuration(_e,_){return _e??defaultTimeouts[_]??defaultTimeouts.DEFAULT}function getGroupPlacementStyle(_e,_){var dt;const et=_e.offsets,tt=typeof et=="string"?{left:et,right:et,bottom:et,top:et}:et,rt=_e.dir==="rtl",nt=_.replace("-start",rt?"-right":"-left").replace("-end",rt?"-left":"-right"),ot=nt.includes("right"),at=nt.includes("left"),lt={position:"fixed",pointerEvents:_e.count>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${_e.gap}px`,"--first-height":`${((dt=_e.heights[0])==null?void 0:dt.height)||0}px`,zIndex:MAX_Z_INDEX};let ct="center";if(ot&&(ct="flex-end"),at&&(ct="flex-start"),lt.alignItems=ct,nt.includes("top")){const st=tt.top;lt.top=`max(env(safe-area-inset-top, 0px), ${st})`}if(nt.includes("bottom")){const st=tt.bottom;lt.bottom=`max(env(safe-area-inset-bottom, 0px), ${st})`}if(!nt.includes("left")){const st=tt.right;lt.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${st})`}if(!nt.includes("right")){const st=tt.left;lt.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${st})`}return lt}function getPlacementStyle(_e,_){const[et]=_e.placement.split("-"),tt=!_e.frontmost,rt=!_e.stacked,nt={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${_e.removeDelay}ms`,"--duration":`${_e.type==="loading"?Number.MAX_SAFE_INTEGER:_e.duration}ms`,"--initial-height":`${_e.height}px`,"--offset":`${_e.offset}px`,"--index":_e.index,"--z-index":_e.zIndex,"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},ot=at=>Object.assign(nt,at);return et==="top"?ot({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):et==="bottom"&&ot({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),_e.mounted&&(ot({"--y":"0","--opacity":"1"}),_e.stacked&&ot({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),_||ot({"--opacity":"0",pointerEvents:"none"}),tt&&rt&&(ot({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),_||ot({"--y":"calc(var(--sign) * 40%)"})),tt&&_e.stacked&&!_&&ot({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),_e.frontmost&&!_&&ot({"--y":"calc(var(--lift) * -100%)"}),nt}function getGhostBeforeStyle(_e,_){const et={position:"absolute",inset:"0",scale:"1 2",pointerEvents:_?"none":"auto"},tt=rt=>Object.assign(et,rt);return _e.frontmost&&!_&&tt({height:"calc(var(--initial-height) + 80%)"}),et}function getGhostAfterStyle(_e,_){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function groupConnect(_e,_,et){function tt(){return isMachine(_e)?_e.getState():_e}function rt(dt){return getToastsByPlacement(tt().context.toasts,dt)}function nt(dt){const st=tt().context.toasts;return st.length?!!st.find(it=>it.id==dt):!1}function ot(dt){const st=`toast:${uuid()}`,it=dt.id?dt.id:st;return nt(it)||_({type:"ADD_TOAST",toast:{...dt,id:it}}),it}function at(dt,st){return nt(dt)&&_({type:"UPDATE_TOAST",id:dt,toast:st}),dt}function lt(dt){const{id:st}=dt;return(st?nt(st):!1)&&st!=null?at(st,dt):ot(dt)}function ct(dt){dt==null?_("DISMISS_ALL"):nt(dt)&&_({type:"DISMISS_TOAST",id:dt})}return{getCount(){return tt().context.count},getPlacements(){const st=tt().context.toasts.map(it=>it.state.context.placement);return Array.from(new Set(st))},getToastsByPlacement:rt,isVisible:nt,create:ot,update:at,upsert:lt,dismiss:ct,remove(dt){dt==null?_("REMOVE_ALL"):nt(dt)&&_({type:"REMOVE_TOAST",id:dt})},dismissByPlacement(dt){rt(dt).forEach(it=>ct(it.id))},loading(dt){return lt({...dt,type:"loading"})},success(dt){return lt({...dt,type:"success"})},error(dt){return lt({...dt,type:"error"})},promise(dt,st,it={}){const ut=lt({...it,...st.loading,type:"loading"});return runIfFn(dt).then(ht=>{const ft=runIfFn(st.success,ht);lt({...it,...ft,id:ut,type:"success"})}).catch(ht=>{const ft=runIfFn(st.error,ht);lt({...it,...ft,id:ut,type:"error"})}).finally(()=>{var ht;(ht=st.finally)==null||ht.call(st)}),ut},pause(dt){dt==null?_("PAUSE_ALL"):nt(dt)&&_({type:"PAUSE_TOAST",id:dt})},resume(dt){dt==null?_("RESUME_ALL"):nt(dt)&&_({type:"RESUME_TOAST",id:dt})},getGroupProps(dt){const{placement:st,label:it="Notifications"}=dt,ut=tt(),ht=ut.context.hotkey.join("+").replace(/Key/g,"").replace(/Digit/g,""),[ft,gt="center"]=st.split("-");return et.element({...parts.group.attrs,dir:ut.context.dir,tabIndex:-1,"aria-label":`${st} ${it} ${ht}`,id:dom.getRegionId(st),"data-placement":st,"data-side":ft,"data-align":gt,"aria-live":"polite",role:"region",style:getGroupPlacementStyle(ut.context,st),onMouseMove(){_({type:"REGION.POINTER_ENTER",placement:st})},onMouseLeave(){_({type:"REGION.POINTER_LEAVE",placement:st})},onFocus(mt){_({type:"REGION.FOCUS",target:mt.relatedTarget})},onBlur(mt){ut.context.isFocusWithin&&!contains(mt.currentTarget,mt.relatedTarget)&&_({type:"REGION.BLUR"})}})},subscribe(dt){const st=tt();return subscribe$1(st.context.toasts,()=>{const ut=rt(st.context.placement).map(ht=>ht.getState().context);dt(ut)})}}}var{not,and,or}=guards;function createToastMachine(_e){const{type:_="info",duration:et,id:tt="1",placement:rt="bottom",removeDelay:nt=200,...ot}=_e,at=compact$2(ot),lt=getToastDuration(et,_);return createMachine({id:tt,context:{id:tt,type:_,remaining:lt,duration:lt,removeDelay:nt,createdAt:Date.now(),placement:rt,...at,height:0,offset:0,frontmost:!1,mounted:!1,index:-1,zIndex:0},initial:_==="loading"?"visible:persist":"visible",on:{UPDATE:[{guard:and("hasTypeChanged","isChangingToLoading"),target:"visible:persist",actions:["setContext"]},{guard:or("hasDurationChanged","hasTypeChanged"),target:"visible:updating",actions:["setContext"]},{actions:["setContext"]}],MEASURE:{actions:["measureHeight"]}},entry:["invokeOnVisible"],activities:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],after:{0:"visible"}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:not("isLoadingType"),target:"visible",actions:["setCreatedAt"]},DISMISS:"dismissing"}},visible:{tags:["visible"],after:{VISIBLE_DURATION:"dismissing"},on:{DISMISS:"dismissing",PAUSE:{target:"visible:persist",actions:"setRemainingDuration"}}},dismissing:{entry:"invokeOnDismiss",after:{REMOVE_DELAY:{target:"unmounted",actions:"notifyParentToRemove"}}},unmounted:{entry:"invokeOnUnmount",type:"final"}}},{activities:{trackHeight(ct,dt,{self:st}){let it;return raf$1(()=>{const ut=dom.getRootEl(ct);if(!ut)return;ct.mounted=!0;const ht=queryAll(ut,"[data-ghost]");warn(ht.length!==2,"[toast] No ghost element found in toast. Render the `ghostBefore` and `ghostAfter` elements");const ft=()=>{const yt=ut.style.height;ut.style.height="auto";const bt=ut.getBoundingClientRect().height;ut.style.height=yt,ct.height=bt,st.sendParent({type:"UPDATE_HEIGHT",id:st.id,height:bt,placement:ct.placement})};ft();const gt=dom.getWin(ct),mt=new gt.MutationObserver(ft);mt.observe(ut,{childList:!0,subtree:!0,characterData:!0}),it=()=>mt.disconnect()}),()=>it==null?void 0:it()}},guards:{isChangingToLoading:(ct,dt)=>{var st;return((st=dt.toast)==null?void 0:st.type)==="loading"},isLoadingType:ct=>ct.type==="loading",hasTypeChanged:(ct,dt)=>{var st;return((st=dt.toast)==null?void 0:st.type)!=null&&dt.toast.type!==ct.type},hasDurationChanged:(ct,dt)=>{var st;return((st=dt.toast)==null?void 0:st.duration)!=null&&dt.toast.duration!==ct.duration}},delays:{VISIBLE_DURATION:ct=>ct.remaining,REMOVE_DELAY:ct=>ct.removeDelay},actions:{measureHeight(ct,dt,{self:st}){raf$1(()=>{const it=dom.getRootEl(ct);if(!it)return;ct.mounted=!0;const ut=it.style.height;it.style.height="auto";const ht=it.getBoundingClientRect().height;it.style.height=ut,ct.height=ht,st.sendParent({type:"UPDATE_HEIGHT",id:st.id,height:ht,placement:ct.placement})})},setRemainingDuration(ct){ct.remaining-=Date.now()-ct.createdAt},setCreatedAt(ct){ct.createdAt=Date.now()},notifyParentToRemove(ct,dt,{self:st}){st.sendParent({type:"REMOVE_TOAST",id:st.id})},invokeOnDismiss(ct){var dt;(dt=ct.onStatusChange)==null||dt.call(ct,{status:"dismissing"})},invokeOnUnmount(ct){var dt;(dt=ct.onStatusChange)==null||dt.call(ct,{status:"unmounted"})},invokeOnVisible(ct){var dt;(dt=ct.onStatusChange)==null||dt.call(ct,{status:"visible"})},setContext(ct,dt){var ht,ft;const st=(ht=dt.toast)==null?void 0:ht.duration,it=((ft=dt.toast)==null?void 0:ft.type)??ct.type,ut=getToastDuration(st,it);Object.assign(ct,{...dt.toast,duration:ut,remaining:ut})}}})}function groupMachine(_e){const _=compact$2(_e);return createMachine({id:"toaster",initial:_.overlap?"overlap":"stack",context:{dir:"ltr",max:Number.MAX_SAFE_INTEGER,gap:16,pauseOnPageIdle:!1,hotkey:["altKey","KeyT"],offsets:"1rem",placement:"bottom",removeDelay:200,..._,toasts:[],lastFocusedEl:null,isFocusWithin:!1,heights:[]},computed:{count:et=>et.toasts.length},activities:["trackDocumentVisibility","trackHotKeyPress"],watch:{toasts:["collapsedIfEmpty","setDismissableBranch"]},exit:["removeToasts","clearDismissableBranch","clearLastFocusedEl"],on:{PAUSE_TOAST:{actions:["pauseToast"]},PAUSE_ALL:{actions:["pauseToasts"]},RESUME_TOAST:{actions:["resumeToast"]},RESUME_ALL:{actions:["resumeToasts"]},ADD_TOAST:{guard:"isWithinRange",actions:["createToast","syncToastIndex"]},UPDATE_TOAST:{actions:["updateToast"]},DISMISS_TOAST:{actions:["dismissToast"]},DISMISS_ALL:{actions:["dismissToasts"]},REMOVE_TOAST:{actions:["removeToast","syncToastIndex","syncToastOffset"]},REMOVE_ALL:{actions:["removeToasts"]},UPDATE_HEIGHT:{actions:["syncHeights","syncToastOffset"]},"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts","restoreLastFocusedEl"]},{actions:["resumeToasts","restoreLastFocusedEl"]}]},states:{stack:{entry:["expandToasts"],on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts"]},{actions:["resumeToasts"]}],"REGION.OVERLAP":{target:"overlap"},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["pauseToasts"]}}},overlap:{entry:["collapseToasts"],on:{"REGION.STACK":{target:"stack"},"REGION.POINTER_ENTER":{target:"stack",actions:["pauseToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts"]}}}}},{guards:{isWithinRange:et=>et.toasts.length<et.max,isOverlapping:et=>!!et.overlap},activities:{trackHotKeyPress(et,tt,{send:rt}){return addDomEvent(document,"keydown",ot=>{et.hotkey.every(lt=>ot[lt]||ot.code===lt)&&rt({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility(et,tt,{send:rt}){if(!et.pauseOnPageIdle)return;const nt=dom.getDoc(et);return addDomEvent(nt,"visibilitychange",()=>{rt(nt.visibilityState==="hidden"?"PAUSE_ALL":"RESUME_ALL")})}},actions:{setDismissableBranch(et){var ot;const rt=getToastsByPlacement(et.toasts,et.placement).length>0;if(!rt){(ot=et._cleanup)==null||ot.call(et);return}if(rt&&et._cleanup)return;const nt=()=>dom.getRegionEl(et,et.placement);et._cleanup=trackDismissableBranch(nt,{defer:!0})},clearDismissableBranch(et){var tt;(tt=et._cleanup)==null||tt.call(et)},focusRegionEl(et){queueMicrotask(()=>{var tt;(tt=dom.getRegionEl(et,et.placement))==null||tt.focus()})},expandToasts(et){each(et,tt=>{tt.state.context.stacked=!0})},collapseToasts(et){each(et,tt=>{tt.state.context.stacked=!1})},collapsedIfEmpty(et,tt,{send:rt}){!et.overlap||et.toasts.length>1||rt("REGION.OVERLAP")},pauseToast(et,tt,{self:rt}){rt.sendChild("PAUSE",tt.id)},pauseToasts(et){et.toasts.forEach(tt=>tt.send("PAUSE"))},resumeToast(et,tt,{self:rt}){rt.sendChild("RESUME",tt.id)},resumeToasts(et){et.toasts.forEach(tt=>tt.send("RESUME"))},measureToasts(et){et.toasts.forEach(tt=>tt.send("MEASURE"))},createToast(et,tt,{self:rt,getState:nt}){const ot={placement:et.placement,duration:et.duration,removeDelay:et.removeDelay,...tt.toast,dir:et.dir,getRootNode:et.getRootNode,stacked:nt().matches("stack")},at=createToastMachine(ot),lt=rt.spawn(at);et.toasts=[lt,...et.toasts]},updateToast(et,tt,{self:rt}){rt.sendChild({type:"UPDATE",toast:tt.toast},tt.id)},dismissToast(et,tt,{self:rt}){rt.sendChild("DISMISS",tt.id)},dismissToasts(et){et.toasts.forEach(tt=>tt.send("DISMISS"))},removeToast(et,tt,{self:rt}){rt.stopChild(tt.id),et.toasts=et.toasts.filter(nt=>nt.id!==tt.id),et.heights=et.heights.filter(nt=>nt.id!==tt.id)},removeToasts(et,tt,{self:rt}){et.toasts.forEach(nt=>rt.stopChild(nt.id)),et.toasts=[],et.heights=[]},syncHeights(et,tt){const rt=et.heights.find(nt=>nt.id===tt.id);if(rt)rt.height=tt.height,rt.placement=tt.placement;else{const nt={id:tt.id,height:tt.height,placement:tt.placement};et.heights=[nt,...et.heights]}},syncToastIndex(et){each(et,(tt,rt,nt)=>{tt.state.context.index=rt,tt.state.context.frontmost=rt===0,tt.state.context.zIndex=nt.length-rt})},syncToastOffset(et,tt){const rt=tt.placement??et.placement;each({...et,placement:rt},nt=>{const ot=Math.max(et.heights.findIndex(lt=>lt.id===nt.id),0),at=et.heights.reduce((lt,ct,dt)=>dt>=ot?lt:lt+ct.height,0);nt.state.context.offset=ot*et.gap+at})},setLastFocusedEl(et,tt){et.isFocusWithin||!tt.target||(et.isFocusWithin=!0,et.lastFocusedEl=ref$1(tt.target))},restoreLastFocusedEl(et){et.isFocusWithin=!1,et.lastFocusedEl&&(et.lastFocusedEl.focus({preventScroll:!0}),et.lastFocusedEl=null)},clearLastFocusedEl(et){et.lastFocusedEl&&(et.lastFocusedEl.focus({preventScroll:!0}),et.lastFocusedEl=null,et.isFocusWithin=!1)}}})}function each(_e,_){getToastsByPlacement(_e.toasts,_e.placement).forEach(_)}function connect(_e,_,et){const tt=_e.hasTag("visible"),rt=_e.hasTag("paused"),nt=_e.context.placement,ot=_e.context.type,[at,lt="center"]=nt.split("-");return{type:ot,title:_e.context.title,description:_e.context.description,placement:nt,visible:tt,paused:rt,pause(){_("PAUSE")},resume(){_("RESUME")},dismiss(){_("DISMISS")},getRootProps(){return et.element({...parts.root.attrs,dir:_e.context.dir,id:dom.getRootId(_e.context),"data-state":tt?"open":"closed","data-type":ot,"data-placement":nt,"data-align":lt,"data-side":at,"data-mounted":dataAttr$1(_e.context.mounted),"data-paused":dataAttr$1(rt),"data-first":dataAttr$1(_e.context.frontmost),"data-sibling":dataAttr$1(!_e.context.frontmost),"data-stack":dataAttr$1(_e.context.stacked),"data-overlap":dataAttr$1(!_e.context.stacked),role:"status","aria-atomic":"true","aria-describedby":_e.context.description?dom.getDescriptionId(_e.context):void 0,"aria-labelledby":_e.context.title?dom.getTitleId(_e.context):void 0,tabIndex:0,style:getPlacementStyle(_e.context,tt),onKeyDown(ct){ct.defaultPrevented||ct.key=="Escape"&&(_("DISMISS"),ct.preventDefault())}})},getGhostBeforeProps(){return et.element({"data-ghost":"before",style:getGhostBeforeStyle(_e.context,tt)})},getGhostAfterProps(){return et.element({"data-ghost":"after",style:getGhostAfterStyle()})},getTitleProps(){return et.element({...parts.title.attrs,id:dom.getTitleId(_e.context)})},getDescriptionProps(){return et.element({...parts.description.attrs,id:dom.getDescriptionId(_e.context)})},getActionTriggerProps(){return et.button({...parts.actionTrigger.attrs,type:"button",onClick(ct){var dt,st;ct.defaultPrevented||((st=(dt=_e.context.action)==null?void 0:dt.onClick)==null||st.call(dt),_("DISMISS"))}})},getCloseTriggerProps(){return et.button({id:dom.getCloseTriggerId(_e.context),...parts.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(ct){ct.defaultPrevented||_("DISMISS")}})}}}var group={connect:groupConnect,machine:groupMachine};const createToaster=_e=>{const _=group.machine({id:"1",..._e});return{...group.connect(_,_.send,normalizeProps),machine:_}},[ToastProvider,useToastContext]=createContext({name:"ToastContext",hookName:"useToastContext",providerName:"<ToastProvider />"}),ToastActionTrigger$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getActionTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});ToastActionTrigger$1.displayName="ToastActionTrigger";const ToastCloseTrigger$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getCloseTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});ToastCloseTrigger$1.displayName="ToastCloseTrigger";const ToastDescription$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getDescriptionProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});ToastDescription$1.displayName="ToastDescription";const ToastRoot$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getRootProps(),_e);return jsxRuntimeExports.jsxs("div",{...tt,ref:_,children:[jsxRuntimeExports.jsx("div",{...et.getGhostBeforeProps()}),_e.children,jsxRuntimeExports.jsx("div",{...et.getGhostAfterProps()})]})});ToastRoot$1.displayName="ToastRoot";const ToastTitle$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getTitleProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});ToastTitle$1.displayName="ToastTitle";const Toaster$2=reactExports.forwardRef((_e,_)=>{const{toaster:et,children:tt,...rt}=_e,[nt,ot]=useMachine(et.machine),at=nt.context.placement,lt=group.connect(nt,ot,normalizeProps),ct=lt.getToastsByPlacement(at),dt=mergeProps(lt.getGroupProps({placement:at}),rt);return jsxRuntimeExports.jsx(ark.div,{...dt,ref:_,children:ct.map(st=>jsxRuntimeExports.jsx(ToastActor,{value:st,children:it=>tt(it)},st.id))})});Toaster$2.displayName="Toaster";const ToastActor=_e=>{const[_,et]=useActor(_e.value),tt=connect(_,et,normalizeProps);return jsxRuntimeExports.jsx(ToastProvider,{value:tt,children:_e.children(_.context)})},{withProvider,withContext:withContext$2,useStyles:useToastStyles}=createSlotRecipeContext({key:"toast"}),Toaster$1=chakra(Toaster$2,{},{forwardAsChild:!0}),ToastRoot=withProvider(ToastRoot$1,"root",{forwardAsChild:!0}),ToastCloseTrigger=withContext$2(ToastCloseTrigger$1,"closeTrigger",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(CloseIcon,{})}}),ToastTitle=withContext$2(ToastTitle$1,"title",{forwardAsChild:!0}),ToastDescription=withContext$2(ToastDescription$1,"description",{forwardAsChild:!0}),ToastActionTrigger=withContext$2(ToastActionTrigger$1,"actionTrigger",{forwardAsChild:!0}),iconMap={warning:WarningIcon,success:CheckCircleIcon,error:WarningIcon},ToastIndicator=reactExports.forwardRef(function(_,et){const tt=useToastContext(),rt=useToastStyles(),nt=iconMap[tt.type];return nt?jsxRuntimeExports.jsx(nt,{ref:et,..._,css:[rt.indicator,_.css]}):null}),{withRootProvider,withContext:withContext$1,useStyles:useTooltipStyles,PropsProvider:PropsProvider$1}=createSlotRecipeContext({key:"tooltip"});withRootProvider(TooltipRootProvider);const TooltipRoot=withRootProvider(TooltipRoot$1),TooltipTrigger=withContext$1(TooltipTrigger$1,"trigger",{forwardAsChild:!0}),TooltipPositioner=withContext$1(TooltipPositioner$1,"positioner",{forwardAsChild:!0}),TooltipContent=withContext$1(TooltipContent$1,"content",{forwardAsChild:!0}),TooltipArrow=withContext$1(TooltipArrow$1,"arrow",{forwardAsChild:!0}),TooltipArrowTip=withContext$1(TooltipArrowTip$1,"arrowTip",{forwardAsChild:!0}),{withContext,PropsProvider}=createRecipeContext({key:"text"}),Text$1=withContext("p"),canvasStyles={background:{container:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:"auto"},image:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",objectFit:"cover",zIndex:1},video:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",objectFit:"cover",zIndex:1,transform:"scaleX(-1)"}},canvas:{container:{position:"relative",width:"100%",height:"100%",zIndex:"1",pointerEvents:"auto"}},subtitle:{container:{position:"absolute",bottom:"30px",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"15px 30px",borderRadius:"12px",minWidth:"60%",maxWidth:"95%",zIndex:2},text:{color:"white",fontSize:"1.5rem",textAlign:"center",lineHeight:"1.4",whiteSpace:"pre-wrap"}},wsStatus:{container:{position:"absolute",top:"20px",left:"20px",zIndex:2,padding:"8px 16px",borderRadius:"20px",fontSize:"14px",fontWeight:"medium",color:"white",transition:"all 0.2s",cursor:"pointer",userSelect:"none",_hover:{opacity:.8}}}},toaster=createToaster({placement:"top-end",pauseOnPageIdle:!0,max:5});function Toaster(){return jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx(Toaster$1,{toaster,insetInline:{mdDown:"4"},children:_e=>{var _;return jsxRuntimeExports.jsxs(ToastRoot,{width:{md:"sm"},children:[_e.type==="loading"?jsxRuntimeExports.jsx(Spinner,{size:"sm",color:"blue.solid"}):jsxRuntimeExports.jsx(ToastIndicator,{}),jsxRuntimeExports.jsxs(Stack,{gap:"1",flex:"1",maxWidth:"100%",children:[_e.title&&jsxRuntimeExports.jsx(ToastTitle,{children:_e.title}),_e.description&&jsxRuntimeExports.jsx(ToastDescription,{children:_e.description})]}),_e.action&&jsxRuntimeExports.jsx(ToastActionTrigger,{children:_e.action.label}),((_=_e.meta)==null?void 0:_.closable)&&jsxRuntimeExports.jsx(ToastCloseTrigger,{})]})}})})}const DEFAULT_CAMERA_CONFIG={width:320,height:240},CameraContext=reactExports.createContext(null);function CameraProvider({children:_e}){const[_,et]=reactExports.useState(!1),[tt,rt]=reactExports.useState(!1),[nt,ot]=reactExports.useState(DEFAULT_CAMERA_CONFIG),at=reactExports.useRef(null),lt=reactExports.useRef(null),ct=reactExports.useRef(null),dt=reactExports.useCallback(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera API is not supported on this device");if(!(await navigator.mediaDevices.enumerateDevices()).some(yt=>yt.kind==="videoinput"))throw new Error("No camera found on this device");const mt=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:nt.width},height:{ideal:nt.height}}});at.current=mt,ct.current&&(ct.current.srcObject=mt),et(!0)}catch(ft){throw console.error("Failed to start camera:",ft),toaster.create({title:`Failed to start camera: ${ft}`,type:"error",duration:2e3}),ft}},[nt]),st=reactExports.useCallback(()=>{at.current&&(at.current.getTracks().forEach(ft=>ft.stop()),at.current=null,et(!1))},[]),it=reactExports.useCallback(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera API is not supported on this device");if(!(await navigator.mediaDevices.enumerateDevices()).some(yt=>yt.kind==="videoinput"))throw new Error("No camera found on this device");const mt=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:nt.width},height:{ideal:nt.height}}});lt.current=mt,rt(!0)}catch(ft){throw console.error("Failed to start background camera:",ft),toaster.create({title:`Failed to start background camera: ${ft}`,type:"error",duration:2e3}),ft}},[nt]),ut=reactExports.useCallback(()=>{lt.current&&(lt.current.getTracks().forEach(ft=>ft.stop()),lt.current=null,rt(!1))},[]),ht=reactExports.useMemo(()=>({isStreaming:_,stream:at.current,startCamera:dt,stopCamera:st,cameraConfig:nt,setCameraConfig:ot,videoRef:ct,backgroundStream:lt.current,startBackgroundCamera:it,stopBackgroundCamera:ut,isBackgroundStreaming:tt}),[_,dt,st,nt,tt,it,ut]);return jsxRuntimeExports.jsx(CameraContext.Provider,{value:ht,children:_e})}function useCamera(){const _e=reactExports.useContext(CameraContext);if(!_e)throw new Error("useCamera must be used within a CameraProvider");return _e}function useLocalStorage(_e,_,et){const[tt,rt]=reactExports.useState(()=>{try{const ot=window.localStorage.getItem(_e);return ot?JSON.parse(ot):_}catch(ot){return console.error(`Error reading localStorage key "${_e}":`,ot),_}});return[tt,ot=>{try{const at=ot instanceof Function?ot(tt):ot,lt=et!=null&&et.filter?et.filter(at):at;rt(at),window.localStorage.setItem(_e,JSON.stringify(lt))}catch(at){console.error(`Error setting localStorage key "${_e}":`,at)}}]}var extendStatics=function(_e,_){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,tt){et.__proto__=tt}||function(et,tt){for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(et[rt]=tt[rt])},extendStatics(_e,_)};function __extends(_e,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");extendStatics(_e,_);function et(){this.constructor=_e}_e.prototype=_===null?Object.create(_):(et.prototype=_.prototype,new et)}function __values(_e){var _=typeof Symbol=="function"&&Symbol.iterator,et=_&&_e[_],tt=0;if(et)return et.call(_e);if(_e&&typeof _e.length=="number")return{next:function(){return _e&&tt>=_e.length&&(_e=void 0),{value:_e&&_e[tt++],done:!_e}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(_e,_){var et=typeof Symbol=="function"&&_e[Symbol.iterator];if(!et)return _e;var tt=et.call(_e),rt,nt=[],ot;try{for(;(_===void 0||_-- >0)&&!(rt=tt.next()).done;)nt.push(rt.value)}catch(at){ot={error:at}}finally{try{rt&&!rt.done&&(et=tt.return)&&et.call(tt)}finally{if(ot)throw ot.error}}return nt}function __spreadArray(_e,_,et){if(et||arguments.length===2)for(var tt=0,rt=_.length,nt;tt<rt;tt++)(nt||!(tt in _))&&(nt||(nt=Array.prototype.slice.call(_,0,tt)),nt[tt]=_[tt]);return _e.concat(nt||Array.prototype.slice.call(_))}typeof SuppressedError=="function"&&SuppressedError;function isFunction(_e){return typeof _e=="function"}function createErrorClass(_e){var _=function(tt){Error.call(tt),tt.stack=new Error().stack},et=_e(_);return et.prototype=Object.create(Error.prototype),et.prototype.constructor=et,et}var UnsubscriptionError=createErrorClass(function(_e){return function(et){_e(this),this.message=et?et.length+` errors occurred during unsubscription:
`+et.map(function(tt,rt){return rt+1+") "+tt.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=et}});function arrRemove(_e,_){if(_e){var et=_e.indexOf(_);0<=et&&_e.splice(et,1)}}var Subscription=function(){function _e(_){this.initialTeardown=_,this.closed=!1,this._parentage=null,this._finalizers=null}return _e.prototype.unsubscribe=function(){var _,et,tt,rt,nt;if(!this.closed){this.closed=!0;var ot=this._parentage;if(ot)if(this._parentage=null,Array.isArray(ot))try{for(var at=__values(ot),lt=at.next();!lt.done;lt=at.next()){var ct=lt.value;ct.remove(this)}}catch(ft){_={error:ft}}finally{try{lt&&!lt.done&&(et=at.return)&&et.call(at)}finally{if(_)throw _.error}}else ot.remove(this);var dt=this.initialTeardown;if(isFunction(dt))try{dt()}catch(ft){nt=ft instanceof UnsubscriptionError?ft.errors:[ft]}var st=this._finalizers;if(st){this._finalizers=null;try{for(var it=__values(st),ut=it.next();!ut.done;ut=it.next()){var ht=ut.value;try{execFinalizer(ht)}catch(ft){nt=nt??[],ft instanceof UnsubscriptionError?nt=__spreadArray(__spreadArray([],__read(nt)),__read(ft.errors)):nt.push(ft)}}}catch(ft){tt={error:ft}}finally{try{ut&&!ut.done&&(rt=it.return)&&rt.call(it)}finally{if(tt)throw tt.error}}}if(nt)throw new UnsubscriptionError(nt)}},_e.prototype.add=function(_){var et;if(_&&_!==this)if(this.closed)execFinalizer(_);else{if(_ instanceof _e){if(_.closed||_._hasParent(this))return;_._addParent(this)}(this._finalizers=(et=this._finalizers)!==null&&et!==void 0?et:[]).push(_)}},_e.prototype._hasParent=function(_){var et=this._parentage;return et===_||Array.isArray(et)&&et.includes(_)},_e.prototype._addParent=function(_){var et=this._parentage;this._parentage=Array.isArray(et)?(et.push(_),et):et?[et,_]:_},_e.prototype._removeParent=function(_){var et=this._parentage;et===_?this._parentage=null:Array.isArray(et)&&arrRemove(et,_)},_e.prototype.remove=function(_){var et=this._finalizers;et&&arrRemove(et,_),_ instanceof _e&&_._removeParent(this)},_e.EMPTY=function(){var _=new _e;return _.closed=!0,_}(),_e}(),EMPTY_SUBSCRIPTION=Subscription.EMPTY;function isSubscription(_e){return _e instanceof Subscription||_e&&"closed"in _e&&isFunction(_e.remove)&&isFunction(_e.add)&&isFunction(_e.unsubscribe)}function execFinalizer(_e){isFunction(_e)?_e():_e.unsubscribe()}var config$1={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},timeoutProvider={setTimeout:function(_e,_){for(var et=[],tt=2;tt<arguments.length;tt++)et[tt-2]=arguments[tt];return setTimeout.apply(void 0,__spreadArray([_e,_],__read(et)))},clearTimeout:function(_e){return clearTimeout(_e)},delegate:void 0};function reportUnhandledError(_e){timeoutProvider.setTimeout(function(){throw _e})}function noop$1(){}function errorContext(_e){_e()}var Subscriber=function(_e){__extends(_,_e);function _(et){var tt=_e.call(this)||this;return tt.isStopped=!1,et?(tt.destination=et,isSubscription(et)&&et.add(tt)):tt.destination=EMPTY_OBSERVER,tt}return _.create=function(et,tt,rt){return new SafeSubscriber(et,tt,rt)},_.prototype.next=function(et){this.isStopped||this._next(et)},_.prototype.error=function(et){this.isStopped||(this.isStopped=!0,this._error(et))},_.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},_.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,_e.prototype.unsubscribe.call(this),this.destination=null)},_.prototype._next=function(et){this.destination.next(et)},_.prototype._error=function(et){try{this.destination.error(et)}finally{this.unsubscribe()}},_.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},_}(Subscription),ConsumerObserver=function(){function _e(_){this.partialObserver=_}return _e.prototype.next=function(_){var et=this.partialObserver;if(et.next)try{et.next(_)}catch(tt){handleUnhandledError(tt)}},_e.prototype.error=function(_){var et=this.partialObserver;if(et.error)try{et.error(_)}catch(tt){handleUnhandledError(tt)}else handleUnhandledError(_)},_e.prototype.complete=function(){var _=this.partialObserver;if(_.complete)try{_.complete()}catch(et){handleUnhandledError(et)}},_e}(),SafeSubscriber=function(_e){__extends(_,_e);function _(et,tt,rt){var nt=_e.call(this)||this,ot;return isFunction(et)||!et?ot={next:et??void 0,error:tt??void 0,complete:rt??void 0}:ot=et,nt.destination=new ConsumerObserver(ot),nt}return _}(Subscriber);function handleUnhandledError(_e){reportUnhandledError(_e)}function defaultErrorHandler(_e){throw _e}var EMPTY_OBSERVER={closed:!0,next:noop$1,error:defaultErrorHandler,complete:noop$1},observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity(_e){return _e}function pipeFromArray(_e){return _e.length===0?identity:_e.length===1?_e[0]:function(et){return _e.reduce(function(tt,rt){return rt(tt)},et)}}var Observable=function(){function _e(_){_&&(this._subscribe=_)}return _e.prototype.lift=function(_){var et=new _e;return et.source=this,et.operator=_,et},_e.prototype.subscribe=function(_,et,tt){var rt=this,nt=isSubscriber(_)?_:new SafeSubscriber(_,et,tt);return errorContext(function(){var ot=rt,at=ot.operator,lt=ot.source;nt.add(at?at.call(nt,lt):lt?rt._subscribe(nt):rt._trySubscribe(nt))}),nt},_e.prototype._trySubscribe=function(_){try{return this._subscribe(_)}catch(et){_.error(et)}},_e.prototype.forEach=function(_,et){var tt=this;return et=getPromiseCtor(et),new et(function(rt,nt){var ot=new SafeSubscriber({next:function(at){try{_(at)}catch(lt){nt(lt),ot.unsubscribe()}},error:nt,complete:rt});tt.subscribe(ot)})},_e.prototype._subscribe=function(_){var et;return(et=this.source)===null||et===void 0?void 0:et.subscribe(_)},_e.prototype[observable]=function(){return this},_e.prototype.pipe=function(){for(var _=[],et=0;et<arguments.length;et++)_[et]=arguments[et];return pipeFromArray(_)(this)},_e.prototype.toPromise=function(_){var et=this;return _=getPromiseCtor(_),new _(function(tt,rt){var nt;et.subscribe(function(ot){return nt=ot},function(ot){return rt(ot)},function(){return tt(nt)})})},_e.create=function(_){return new _e(_)},_e}();function getPromiseCtor(_e){var _;return(_=_e??config$1.Promise)!==null&&_!==void 0?_:Promise}function isObserver(_e){return _e&&isFunction(_e.next)&&isFunction(_e.error)&&isFunction(_e.complete)}function isSubscriber(_e){return _e&&_e instanceof Subscriber||isObserver(_e)&&isSubscription(_e)}var ObjectUnsubscribedError=createErrorClass(function(_e){return function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Subject=function(_e){__extends(_,_e);function _(){var et=_e.call(this)||this;return et.closed=!1,et.currentObservers=null,et.observers=[],et.isStopped=!1,et.hasError=!1,et.thrownError=null,et}return _.prototype.lift=function(et){var tt=new AnonymousSubject(this,this);return tt.operator=et,tt},_.prototype._throwIfClosed=function(){if(this.closed)throw new ObjectUnsubscribedError},_.prototype.next=function(et){var tt=this;errorContext(function(){var rt,nt;if(tt._throwIfClosed(),!tt.isStopped){tt.currentObservers||(tt.currentObservers=Array.from(tt.observers));try{for(var ot=__values(tt.currentObservers),at=ot.next();!at.done;at=ot.next()){var lt=at.value;lt.next(et)}}catch(ct){rt={error:ct}}finally{try{at&&!at.done&&(nt=ot.return)&&nt.call(ot)}finally{if(rt)throw rt.error}}}})},_.prototype.error=function(et){var tt=this;errorContext(function(){if(tt._throwIfClosed(),!tt.isStopped){tt.hasError=tt.isStopped=!0,tt.thrownError=et;for(var rt=tt.observers;rt.length;)rt.shift().error(et)}})},_.prototype.complete=function(){var et=this;errorContext(function(){if(et._throwIfClosed(),!et.isStopped){et.isStopped=!0;for(var tt=et.observers;tt.length;)tt.shift().complete()}})},_.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(_.prototype,"observed",{get:function(){var et;return((et=this.observers)===null||et===void 0?void 0:et.length)>0},enumerable:!1,configurable:!0}),_.prototype._trySubscribe=function(et){return this._throwIfClosed(),_e.prototype._trySubscribe.call(this,et)},_.prototype._subscribe=function(et){return this._throwIfClosed(),this._checkFinalizedStatuses(et),this._innerSubscribe(et)},_.prototype._innerSubscribe=function(et){var tt=this,rt=this,nt=rt.hasError,ot=rt.isStopped,at=rt.observers;return nt||ot?EMPTY_SUBSCRIPTION:(this.currentObservers=null,at.push(et),new Subscription(function(){tt.currentObservers=null,arrRemove(at,et)}))},_.prototype._checkFinalizedStatuses=function(et){var tt=this,rt=tt.hasError,nt=tt.thrownError,ot=tt.isStopped;rt?et.error(nt):ot&&et.complete()},_.prototype.asObservable=function(){var et=new Observable;return et.source=this,et},_.create=function(et,tt){return new AnonymousSubject(et,tt)},_}(Observable),AnonymousSubject=function(_e){__extends(_,_e);function _(et,tt){var rt=_e.call(this)||this;return rt.destination=et,rt.source=tt,rt}return _.prototype.next=function(et){var tt,rt;(rt=(tt=this.destination)===null||tt===void 0?void 0:tt.next)===null||rt===void 0||rt.call(tt,et)},_.prototype.error=function(et){var tt,rt;(rt=(tt=this.destination)===null||tt===void 0?void 0:tt.error)===null||rt===void 0||rt.call(tt,et)},_.prototype.complete=function(){var et,tt;(tt=(et=this.destination)===null||et===void 0?void 0:et.complete)===null||tt===void 0||tt.call(et)},_.prototype._subscribe=function(et){var tt,rt;return(rt=(tt=this.source)===null||tt===void 0?void 0:tt.subscribe(et))!==null&&rt!==void 0?rt:EMPTY_SUBSCRIPTION},_}(Subject);const gn=class gn{constructor(){ln(this,"ws",null);ln(this,"messageSubject",new Subject);ln(this,"stateSubject",new Subject);ln(this,"currentState","CLOSED")}static getInstance(){return gn.instance||(gn.instance=new gn),gn.instance}initializeConnection(){this.sendMessage({type:"fetch-backgrounds"}),this.sendMessage({type:"fetch-configs"}),this.sendMessage({type:"fetch-history-list"}),this.sendMessage({type:"create-new-history"})}connect(_){var et,tt;(((et=this.ws)==null?void 0:et.readyState)===WebSocket.CONNECTING||((tt=this.ws)==null?void 0:tt.readyState)===WebSocket.OPEN)&&this.disconnect();try{this.ws=new WebSocket(_),this.currentState="CONNECTING",this.stateSubject.next("CONNECTING"),this.ws.onopen=()=>{this.currentState="OPEN",this.stateSubject.next("OPEN"),this.initializeConnection()},this.ws.onmessage=rt=>{try{const nt=JSON.parse(rt.data);this.messageSubject.next(nt)}catch(nt){console.error("Failed to parse WebSocket message:",nt),toaster.create({title:`Failed to parse WebSocket message: ${nt}`,type:"error",duration:2e3})}},this.ws.onclose=()=>{this.currentState="CLOSED",this.stateSubject.next("CLOSED")},this.ws.onerror=()=>{this.currentState="CLOSED",this.stateSubject.next("CLOSED")}}catch(rt){console.error("Failed to connect to WebSocket:",rt),this.currentState="CLOSED",this.stateSubject.next("CLOSED")}}sendMessage(_){var et;((et=this.ws)==null?void 0:et.readyState)===WebSocket.OPEN?this.ws.send(JSON.stringify(_)):(console.warn("WebSocket is not open. Unable to send message:",_),toaster.create({title:"WebSocket is not open.",type:"error",duration:2e3}))}onMessage(_){return this.messageSubject.subscribe(_)}onStateChange(_){return this.stateSubject.subscribe(_)}disconnect(){var _;(_=this.ws)==null||_.close(),this.ws=null}getCurrentState(){return this.currentState}};ln(gn,"instance");let WebSocketService=gn;const wsService=WebSocketService.getInstance(),DEFAULT_WS_URL="wss://a86f-219-70-65-54.ngrok-free.app/client-ws",DEFAULT_BASE_URL="https://a86f-219-70-65-54.ngrok-free.app",WebSocketContext=React.createContext({sendMessage:wsService.sendMessage.bind(wsService),wsState:"CLOSED",reconnect:()=>wsService.connect(DEFAULT_WS_URL),wsUrl:DEFAULT_WS_URL,setWsUrl:()=>{},baseUrl:DEFAULT_BASE_URL,setBaseUrl:()=>{}});function useWebSocket(){const _e=reactExports.useContext(WebSocketContext);if(!_e)throw new Error("useWebSocket must be used within a WebSocketProvider");return _e}const defaultWsUrl=DEFAULT_WS_URL,defaultBaseUrl=DEFAULT_BASE_URL,BgUrlContext=reactExports.createContext(null);function BgUrlProvider({children:_e}){const{baseUrl:_}=useWebSocket(),et=`${_}/bg/ceiling-window-room-night.jpeg`,[tt,rt]=useLocalStorage("backgroundUrl",et),[nt,ot]=reactExports.useState([]),at=reactExports.useCallback(()=>{rt(et)},[rt,et]),lt=reactExports.useCallback(ht=>{ot(ft=>[...ft,ht])},[]),ct=reactExports.useCallback(ht=>{ot(ft=>ft.filter(gt=>gt.name!==ht))},[]),dt=reactExports.useMemo(()=>tt===et,[tt,et]),[st,it]=reactExports.useState(!1),ut=reactExports.useMemo(()=>({backgroundUrl:tt,setBackgroundUrl:rt,backgroundFiles:nt,setBackgroundFiles:ot,resetBackground:at,addBackgroundFile:lt,removeBackgroundFile:ct,isDefaultBackground:dt,useCameraBackground:st,setUseCameraBackground:it}),[tt,rt,nt,at,lt,ct,dt,st]);return jsxRuntimeExports.jsx(BgUrlContext.Provider,{value:ut,children:_e})}function useBgUrl(){const _e=reactExports.useContext(BgUrlContext);if(!_e)throw new Error("useBgUrl must be used within a BgUrlProvider");return _e}const Background=reactExports.memo(({children:_e})=>{const _=reactExports.useRef(null),{backgroundStream:et,isBackgroundStreaming:tt,startBackgroundCamera:rt,stopBackgroundCamera:nt}=useCamera(),{useCameraBackground:ot,backgroundUrl:at}=useBgUrl();return reactExports.useEffect(()=>{ot?rt():nt()},[ot,rt,nt]),reactExports.useEffect(()=>{_.current&&et&&(_.current.srcObject=et)},[et]),jsxRuntimeExports.jsxs(Box,{...canvasStyles.background.container,children:[ot?jsxRuntimeExports.jsx("video",{ref:_,autoPlay:!0,playsInline:!0,muted:!0,style:{...canvasStyles.background.video,display:tt?"block":"none",transform:"scaleX(-1)"}}):jsxRuntimeExports.jsx(Image$1,{...canvasStyles.background.image,src:at,alt:"background"}),_e]})});Background.displayName="Background";const DEFAULT_SUBTITLE={text:"Hi, I'm some random AI VTuber. Who the hell are ya? Ahh, you must be amazed by my awesomeness, right? right?"},SubtitleContext=reactExports.createContext(null),SubtitleProvider=reactExports.memo(({children:_e})=>{const[_,et]=reactExports.useState(DEFAULT_SUBTITLE.text),[tt,rt]=reactExports.useState(!0),nt=reactExports.useMemo(()=>({subtitleText:_,setSubtitleText:et,showSubtitle:tt,setShowSubtitle:rt}),[_,tt]);return jsxRuntimeExports.jsx(SubtitleContext.Provider,{value:nt,children:_e})});function useSubtitle(){const _e=reactExports.useContext(SubtitleContext);if(!_e)throw new Error("useSubtitle must be used within a SubtitleProvider");return _e}const useSubtitleDisplay=()=>{const _e=useSubtitle();return{subtitleText:reactExports.useMemo(()=>_e?_e.subtitleText:null,[_e==null?void 0:_e.subtitleText]),isLoaded:!!_e}},SubtitleText=reactExports.memo(({text:_e})=>jsxRuntimeExports.jsx(Text$1,{...canvasStyles.subtitle.text,children:_e}));SubtitleText.displayName="SubtitleText";const Subtitle=reactExports.memo(()=>{const{subtitleText:_e,isLoaded:_}=useSubtitleDisplay(),{showSubtitle:et}=useSubtitle();return!_||!_e||!et?null:jsxRuntimeExports.jsx(Box,{...canvasStyles.subtitle.container,children:jsxRuntimeExports.jsx(SubtitleText,{text:_e})})});Subtitle.displayName="Subtitle";const useWSStatus=()=>{const{wsState:_e,reconnect:_}=useWebSocket(),et=reactExports.useCallback(()=>{_e!=="OPEN"&&_e!=="CONNECTING"&&_()},[_e,_]);return reactExports.useMemo(()=>{switch(_e){case"OPEN":return{color:"green.500",text:"Connected",isDisconnected:!1,handleClick:et};case"CONNECTING":return{color:"yellow.500",text:"Connecting",isDisconnected:!1,handleClick:et};default:return{color:"red.500",text:"Click to Reconnect",isDisconnected:!0,handleClick:et}}},[_e,et])},StatusContent=({text:_e})=>_e,MemoizedStatusContent=reactExports.memo(StatusContent),WebSocketStatus=reactExports.memo(()=>{const{color:_e,text:_,handleClick:et,isDisconnected:tt}=useWSStatus();return jsxRuntimeExports.jsx(Box,{...canvasStyles.wsStatus.container,backgroundColor:_e,onClick:et,cursor:tt?"pointer":"default",_hover:{opacity:tt?.8:1},children:jsxRuntimeExports.jsx(MemoizedStatusContent,{text:_})})});WebSocketStatus.displayName="WebSocketStatus";const DEFAULT_CONFIG$1={confName:"",confUid:"",configFiles:[]},ConfigContext=reactExports.createContext(null);function CharacterConfigProvider({children:_e}){const[_,et]=reactExports.useState(DEFAULT_CONFIG$1.confName),[tt,rt]=reactExports.useState(DEFAULT_CONFIG$1.confUid),[nt,ot]=reactExports.useState(DEFAULT_CONFIG$1.configFiles),at=reactExports.useCallback(ct=>{var dt;return(dt=nt.find(st=>st.name===ct))==null?void 0:dt.filename},[nt]),lt=reactExports.useMemo(()=>({confName:_,confUid:tt,configFiles:nt,setConfName:et,setConfUid:rt,setConfigFiles:ot,getFilenameByName:at}),[_,tt,nt,at]);return reactExports.useEffect(()=>{var ct,dt;(dt=(ct=window.api)==null?void 0:ct.updateConfigFiles)==null||dt.call(ct,nt)},[nt]),jsxRuntimeExports.jsx(ConfigContext.Provider,{value:lt,children:_e})}function useConfig(){const _e=reactExports.useContext(ConfigContext);if(!_e)throw new Error("useConfig must be used within a CharacterConfigProvider");return _e}const DEFAULT_CONFIG={modelInfo:{scrollToResize:!0,pointerInteractive:true},isLoading:!1},Live2DConfigContext=reactExports.createContext(null);function Live2DConfigProvider({children:_e}){const{confUid:_}=useConfig(),[et,tt]=reactExports.useState(!1),[rt,nt]=reactExports.useState(DEFAULT_CONFIG.isLoading);reactExports.useEffect(()=>{var ft;const ht=(ft=window.api)==null?void 0:ft.onModeChanged(gt=>{tt(gt==="pet")});return()=>ht==null?void 0:ht()},[]);const ot=(ht,ft)=>`${ht}_${ft?"pet":"window"}`,[at,lt]=useLocalStorage("modelInfo",DEFAULT_CONFIG.modelInfo,{filter:ht=>ht&&{...ht,url:""}}),[ct,dt]=useLocalStorage("scale_memory",{}),st=ht=>{if(ht!=null&&ht.url){if(!_){console.warn("Attempting to set model info without confUid"),toaster.create({title:"Attempting to set model info without confUid",type:"error",duration:2e3});return}if(JSON.stringify(ht)!==JSON.stringify(at))if(ht){const ft=ot(_,et);let gt;const mt=ct[ft];mt!==void 0?gt=mt:(gt=Number(ht.kScale||.001),dt(yt=>({...yt,[ft]:gt}))),console.log("finalScale",gt),lt({...ht,kScale:gt,pointerInteractive:"pointerInteractive"in ht?ht.pointerInteractive:(at==null?void 0:at.pointerInteractive)??!1,scrollToResize:"scrollToResize"in ht?ht.scrollToResize:(at==null?void 0:at.scrollToResize)??!0})}else lt(void 0)}},it=reactExports.useCallback(ht=>{if(at){const ft=ot(_,et),gt=Number(ht.toFixed(8));dt(mt=>({...mt,[ft]:gt})),lt({...at,kScale:gt})}},[at,_,et,dt,lt]);reactExports.useEffect(()=>{if(at){const ht=ot(_,et),ft=ct[ht];ft!==void 0&&ft!==Number(at.kScale)&&st({...at,kScale:ft})}},[et,at]);const ut=reactExports.useMemo(()=>({modelInfo:at,setModelInfo:st,isLoading:rt,setIsLoading:nt,updateModelScale:it}),[at,rt,it]);return jsxRuntimeExports.jsx(Live2DConfigContext.Provider,{value:ut,children:_e})}function useLive2DConfig(){const _e=reactExports.useContext(Live2DConfigContext);if(!_e)throw new Error("useLive2DConfig must be used within a Live2DConfigProvider");return _e}var dist={},ortWeb_min={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(_e,_,et)=>{if(_&&typeof _.init=="function"&&typeof _.createSessionHandler=="function"){const tt=backends[_e];if(tt===void 0)backends[_e]={backend:_,priority:et};else{if(tt.priority>et)return;if(tt.priority===et&&tt.backend!==_)throw new Error(`cannot register backend "${_e}" using priority ${et}`)}if(et>=0){const rt=backendsSortedByPriority.indexOf(_e);rt!==-1&&backendsSortedByPriority.splice(rt,1);for(let nt=0;nt<backendsSortedByPriority.length;nt++)if(backends[backendsSortedByPriority[nt]].priority<=et){backendsSortedByPriority.splice(nt,0,_e);return}backendsSortedByPriority.push(_e)}return}throw new TypeError("not a valid backend")},resolveBackend=async _e=>{const _=_e.length===0?backendsSortedByPriority:_e,et=[];for(const tt of _){const rt=backends[tt];if(rt){if(rt.initialized)return rt.backend;if(rt.aborted)continue;const nt=!!rt.initPromise;try{return nt||(rt.initPromise=rt.backend.init()),await rt.initPromise,rt.initialized=!0,rt.backend}catch(ot){nt||et.push({name:tt,err:ot}),rt.aborted=!0}finally{delete rt.initPromise}}}throw new Error(`no available backend found. ERR: ${et.map(tt=>`[${tt.name}] ${tt.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(_){if(_!==void 0){if(typeof _!="string"||["verbose","info","warning","error","fatal"].indexOf(_)===-1)throw new Error(`Unsupported logging level: ${_}`);this.logLevelInternal=_}}get logLevel(){return this.logLevelInternal}}const env=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=_e=>{let _=1;for(let et=0;et<_e.length;et++){const tt=_e[et];if(typeof tt!="number"||!Number.isSafeInteger(tt))throw new TypeError(`dims[${et}] must be an integer, got: ${tt}`);if(tt<0)throw new RangeError(`dims[${et}] must be a non-negative integer, got: ${tt}`);_*=tt}return _};let Tensor$1=class fn{constructor(_,et,tt){let rt,nt,ot;if(typeof _=="string")if(rt=_,ot=tt,_==="string"){if(!Array.isArray(et))throw new TypeError("A string tensor's data must be a string array.");nt=et}else{const lt=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(_);if(lt===void 0)throw new TypeError(`Unsupported tensor type: ${_}.`);if(Array.isArray(et))nt=lt.from(et);else if(et instanceof lt)nt=et;else throw new TypeError(`A ${rt} tensor's data must be type of ${lt}`)}else if(ot=et,Array.isArray(_)){if(_.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const lt=typeof _[0];if(lt==="string")rt="string",nt=_;else if(lt==="boolean")rt="bool",nt=Uint8Array.from(_);else throw new TypeError(`Invalid element type of data array: ${lt}.`)}else{const lt=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(_.constructor);if(lt===void 0)throw new TypeError(`Unsupported type for tensor data: ${_.constructor}.`);rt=lt,nt=_}if(ot===void 0)ot=[nt.length];else if(!Array.isArray(ot))throw new TypeError("A tensor's dims must be a number array");const at=calculateSize(ot);if(at!==nt.length)throw new Error(`Tensor's size(${at}) does not match data length(${nt.length}).`);this.dims=ot,this.type=rt,this.data=nt,this.size=at}static bufferToTensor(_,et){if(_===void 0)throw new Error("Image buffer must be defined");if(et.height===void 0||et.width===void 0)throw new Error("Image height and width must be defined");const{height:tt,width:rt}=et,nt=et.norm;let ot,at;nt===void 0||nt.mean===void 0?ot=255:ot=nt.mean,nt===void 0||nt.bias===void 0?at=0:at=nt.bias;const lt=et.bitmapFormat!==void 0?et.bitmapFormat:"RGBA",ct=et.tensorFormat!==void 0&&et.tensorFormat!==void 0?et.tensorFormat:"RGB",dt=tt*rt,st=ct==="RGBA"?new Float32Array(dt*4):new Float32Array(dt*3);let it=4,ut=0,ht=1,ft=2,gt=3,mt=0,yt=dt,bt=dt*2,vt=-1;lt==="RGB"&&(it=3,ut=0,ht=1,ft=2,gt=-1),ct==="RGBA"?vt=dt*3:ct==="RBG"?(mt=0,bt=dt,yt=dt*2):ct==="BGR"&&(bt=0,yt=dt,mt=dt*2);for(let wt=0;wt<dt;wt++,ut+=it,ft+=it,ht+=it,gt+=it)st[mt++]=(_[ut]+at)/ot,st[yt++]=(_[ht]+at)/ot,st[bt++]=(_[ft]+at)/ot,vt!==-1&&gt!==-1&&(st[vt++]=(_[gt]+at)/ot);return ct==="RGBA"?new fn("float32",st,[1,4,tt,rt]):new fn("float32",st,[1,3,tt,rt])}static async fromImage(_,et){const tt=typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement,rt=typeof ImageData<"u"&&_ instanceof ImageData,nt=typeof ImageBitmap<"u"&&_ instanceof ImageBitmap,ot=typeof String<"u"&&(_ instanceof String||typeof _=="string");let at,lt={};if(tt){const ct=document.createElement("canvas"),dt=ct.getContext("2d");if(dt!=null){let st=_.naturalHeight,it=_.naturalWidth;if(et!==void 0&&et.resizedHeight!==void 0&&et.resizedWidth!==void 0&&(st=et.resizedHeight,it=et.resizedWidth),et!==void 0){if(lt=et,et.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(lt.tensorFormat="RGBA",et.height!==void 0&&et.height!==st)throw new Error("Image input config height doesn't match HTMLImageElement height");if(lt.height=st,et.width!==void 0&&et.width!==it)throw new Error("Image input config width doesn't match HTMLImageElement width");lt.width=it}else lt.tensorFormat="RGBA",lt.height=st,lt.width=it;ct.width=it,ct.height=st,dt.drawImage(_,0,0,it,st),at=dt.getImageData(0,0,it,st).data}else throw new Error("Can not access image data")}else if(rt){const ct="RGBA";let dt,st;if(et!==void 0&&et.resizedWidth!==void 0&&et.resizedHeight!==void 0?(dt=et.resizedHeight,st=et.resizedWidth):(dt=_.height,st=_.width),et!==void 0){if(lt=et,et.bitmapFormat!==void 0&&et.bitmapFormat!==ct)throw new Error("Image input config format must be RGBA for ImageData");lt.bitmapFormat="RGBA"}else lt.bitmapFormat="RGBA";if(lt.height=dt,lt.width=st,et!==void 0){const it=document.createElement("canvas");it.width=st,it.height=dt;const ut=it.getContext("2d");if(ut!=null)ut.putImageData(_,0,0),at=ut.getImageData(0,0,st,dt).data;else throw new Error("Can not access image data")}else at=_.data}else if(nt){if(et===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(et.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const ct=document.createElement("canvas").getContext("2d");if(ct!=null){const dt=_.height,st=_.width;if(ct.drawImage(_,0,0,st,dt),at=ct.getImageData(0,0,st,dt).data,et!==void 0){if(et.height!==void 0&&et.height!==dt)throw new Error("Image input config height doesn't match ImageBitmap height");if(lt.height=dt,et.width!==void 0&&et.width!==st)throw new Error("Image input config width doesn't match ImageBitmap width");lt.width=st}else lt.height=dt,lt.width=st;return fn.bufferToTensor(at,lt)}else throw new Error("Can not access image data")}else{if(ot)return new Promise((ct,dt)=>{const st=document.createElement("canvas"),it=st.getContext("2d");if(!_||!it)return dt();const ut=new Image;ut.crossOrigin="Anonymous",ut.src=_,ut.onload=()=>{st.width=ut.width,st.height=ut.height,it.drawImage(ut,0,0,st.width,st.height);const ht=it.getImageData(0,0,st.width,st.height);if(et!==void 0){if(et.height!==void 0&&et.height!==st.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(lt.height=st.height,et.width!==void 0&&et.width!==st.width)throw new Error("Image input config width doesn't match ImageBitmap width");lt.width=st.width}else lt.height=st.height,lt.width=st.width;ct(fn.bufferToTensor(ht.data,lt))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(at!==void 0)return fn.bufferToTensor(at,lt);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(_){var et,tt;const rt=document.createElement("canvas").getContext("2d");let nt;if(rt!=null){const ot=this.dims[3],at=this.dims[2],lt=this.dims[1],ct=_!==void 0&&_.format!==void 0?_.format:"RGB",dt=_!==void 0&&((et=_.norm)===null||et===void 0?void 0:et.mean)!==void 0?_.norm.mean:255,st=_!==void 0&&((tt=_.norm)===null||tt===void 0?void 0:tt.bias)!==void 0?_.norm.bias:0,it=at*ot;if(_!==void 0){if(_.height!==void 0&&_.height!==at)throw new Error("Image output config height doesn't match tensor height");if(_.width!==void 0&&_.width!==ot)throw new Error("Image output config width doesn't match tensor width");if(_.format!==void 0&&lt===4&&_.format!=="RGBA"||lt===3&&_.format!=="RGB"&&_.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const ut=4;let ht=0,ft=1,gt=2,mt=3,yt=0,bt=it,vt=it*2,xt=-1;ct==="RGBA"?(yt=0,bt=it,vt=it*2,xt=it*3):ct==="RGB"?(yt=0,bt=it,vt=it*2):ct==="RBG"&&(yt=0,vt=it,bt=it*2),nt=rt.createImageData(ot,at);for(let wt=0;wt<at*ot;ht+=ut,ft+=ut,gt+=ut,mt+=ut,wt++)nt.data[ht]=(this.data[yt++]-st)*dt,nt.data[ft]=(this.data[bt++]-st)*dt,nt.data[gt]=(this.data[vt++]-st)*dt,nt.data[mt]=xt===-1?255:(this.data[xt++]-st)*dt}else throw new Error("Can not access image data");return nt}reshape(_){return new fn(this.type,this.data,_)}};const Tensor=Tensor$1;let InferenceSession$1=class Js{constructor(_){this.handler=_}async run(_,et,tt){const rt={};let nt={};if(typeof _!="object"||_===null||_ instanceof Tensor||Array.isArray(_))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let ot=!0;if(typeof et=="object"){if(et===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(et instanceof Tensor)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(et)){if(et.length===0)throw new TypeError("'fetches' cannot be an empty array.");ot=!1;for(const ct of et){if(typeof ct!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(ct)===-1)throw new RangeError(`'fetches' contains invalid output name: ${ct}.`);rt[ct]=null}if(typeof tt=="object"&&tt!==null)nt=tt;else if(typeof tt<"u")throw new TypeError("'options' must be an object.")}else{let ct=!1;const dt=Object.getOwnPropertyNames(et);for(const st of this.outputNames)if(dt.indexOf(st)!==-1){const it=et[st];(it===null||it instanceof Tensor)&&(ct=!0,ot=!1,rt[st]=it)}if(ct){if(typeof tt=="object"&&tt!==null)nt=tt;else if(typeof tt<"u")throw new TypeError("'options' must be an object.")}else nt=et}}else if(typeof et<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const ct of this.inputNames)if(typeof _[ct]>"u")throw new Error(`input '${ct}' is missing in 'feeds'.`);if(ot)for(const ct of this.outputNames)rt[ct]=null;const at=await this.handler.run(_,rt,nt),lt={};for(const ct in at)Object.hasOwnProperty.call(at,ct)&&(lt[ct]=new Tensor(at[ct].type,at[ct].data,at[ct].dims));return lt}static async create(_,et,tt,rt){let nt,ot={};if(typeof _=="string"){if(nt=_,typeof et=="object"&&et!==null)ot=et;else if(typeof et<"u")throw new TypeError("'options' must be an object.")}else if(_ instanceof Uint8Array){if(nt=_,typeof et=="object"&&et!==null)ot=et;else if(typeof et<"u")throw new TypeError("'options' must be an object.")}else if(_ instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&_ instanceof SharedArrayBuffer){const st=_;let it=0,ut=_.byteLength;if(typeof et=="object"&&et!==null)ot=et;else if(typeof et=="number"){if(it=et,!Number.isSafeInteger(it))throw new RangeError("'byteOffset' must be an integer.");if(it<0||it>=st.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${st.byteLength}).`);if(ut=_.byteLength-it,typeof tt=="number"){if(ut=tt,!Number.isSafeInteger(ut))throw new RangeError("'byteLength' must be an integer.");if(ut<=0||it+ut>st.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${st.byteLength-it}].`);if(typeof rt=="object"&&rt!==null)ot=rt;else if(typeof rt<"u")throw new TypeError("'options' must be an object.")}else if(typeof tt<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof et<"u")throw new TypeError("'options' must be an object.");nt=new Uint8Array(st,it,ut)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const lt=(ot.executionProviders||[]).map(st=>typeof st=="string"?st:st.name),dt=await(await resolveBackend(lt)).createSessionHandler(nt,ot);return new Js(dt)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession=InferenceSession$1,lib$1=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession,Tensor,env,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(lib$1);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/(function(module,exports){(function(_e,_){module.exports=_(require$$0$1)})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(_e,_,et)=>{var tt,rt=(tt=(tt=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(nt){function ot(){return Bt.buffer!=Vt&&ur(Bt.buffer),Jt}function at(){return Bt.buffer!=Vt&&ur(Bt.buffer),lr}function lt(){return Bt.buffer!=Vt&&ur(Bt.buffer),nr}function ct(){return Bt.buffer!=Vt&&ur(Bt.buffer),ir}function dt(){return Bt.buffer!=Vt&&ur(Bt.buffer),cr}var st,it,ut;nt=nt||{},st||(st=nt!==void 0?nt:{}),st.ready=new Promise(function(Pt,It){it=Pt,ut=It});var ht,ft,gt,mt,yt,bt,vt=Object.assign({},st),xt="./this.program",wt=(Pt,It)=>{throw It},St=typeof window=="object",Et=typeof importScripts=="function",_t=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Tt=st.ENVIRONMENT_IS_PTHREAD||!1,Rt="";function Ot(Pt){return st.locateFile?st.locateFile(Pt,Rt):Rt+Pt}if(_t){let Pt;Rt=Et?et(908).dirname(Rt)+"/":"//",bt=()=>{yt||(mt=et(1384),yt=et(908))},ht=function(It,Ft){return bt(),It=yt.normalize(It),mt.readFileSync(It,Ft?void 0:"utf8")},gt=It=>((It=ht(It,!0)).buffer||(It=new Uint8Array(It)),It),ft=(It,Ft,jt)=>{bt(),It=yt.normalize(It),mt.readFile(It,function(Wt,Xt){Wt?jt(Wt):Ft(Xt.buffer)})},1<process.argv.length&&(xt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(It){if(!(It instanceof nn))throw It}),process.on("unhandledRejection",function(It){throw It}),wt=(It,Ft)=>{if(Wr())throw process.exitCode=It,Ft;Ft instanceof nn||Dt("exiting due to exception: "+Ft),process.exit(It)},st.inspect=function(){return"[Emscripten Module object]"};try{Pt=et(9925)}catch(It){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),It}et.g.Worker=Pt.Worker}else(St||Et)&&(Et?Rt=self.location.href:typeof document<"u"&&document.currentScript&&(Rt=document.currentScript.src),tt&&(Rt=tt),Rt=Rt.indexOf("blob:")!==0?Rt.substr(0,Rt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_t||(ht=Pt=>{var It=new XMLHttpRequest;return It.open("GET",Pt,!1),It.send(null),It.responseText},Et&&(gt=Pt=>{var It=new XMLHttpRequest;return It.open("GET",Pt,!1),It.responseType="arraybuffer",It.send(null),new Uint8Array(It.response)}),ft=(Pt,It,Ft)=>{var jt=new XMLHttpRequest;jt.open("GET",Pt,!0),jt.responseType="arraybuffer",jt.onload=()=>{jt.status==200||jt.status==0&&jt.response?It(jt.response):Ft()},jt.onerror=Ft,jt.send(null)}));_t&&typeof performance>"u"&&(et.g.performance=et(6953).performance);var At=console.log.bind(console),Ct=console.warn.bind(console);_t&&(bt(),At=Pt=>mt.writeSync(1,Pt+`
`),Ct=Pt=>mt.writeSync(2,Pt+`
`));var $t,Mt=st.print||At,Dt=st.printErr||Ct;Object.assign(st,vt),vt=null,st.thisProgram&&(xt=st.thisProgram),st.quit&&(wt=st.quit),st.wasmBinary&&($t=st.wasmBinary);var Nt=st.noExitRuntime||!1;typeof WebAssembly!="object"&&Cr("no native wasm support detected");var Bt,Ut,Vt,Jt,lr,nr,ir,cr,hr=!1,Zt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Qt(Pt,It,Ft){var jt=(It>>>=0)+Ft;for(Ft=It;Pt[Ft]&&!(Ft>=jt);)++Ft;if(16<Ft-It&&Pt.buffer&&Zt)return Zt.decode(Pt.buffer instanceof SharedArrayBuffer?Pt.slice(It,Ft):Pt.subarray(It,Ft));for(jt="";It<Ft;){var Wt=Pt[It++];if(128&Wt){var Xt=63&Pt[It++];if((224&Wt)==192)jt+=String.fromCharCode((31&Wt)<<6|Xt);else{var tr=63&Pt[It++];65536>(Wt=(240&Wt)==224?(15&Wt)<<12|Xt<<6|tr:(7&Wt)<<18|Xt<<12|tr<<6|63&Pt[It++])?jt+=String.fromCharCode(Wt):(Wt-=65536,jt+=String.fromCharCode(55296|Wt>>10,56320|1023&Wt))}}else jt+=String.fromCharCode(Wt)}return jt}function rr(Pt,It){return(Pt>>>=0)?Qt(at(),Pt,It):""}function ar(Pt,It,Ft,jt){if(!(0<jt))return 0;var Wt=Ft>>>=0;jt=Ft+jt-1;for(var Xt=0;Xt<Pt.length;++Xt){var tr=Pt.charCodeAt(Xt);if(55296<=tr&&57343>=tr&&(tr=65536+((1023&tr)<<10)|1023&Pt.charCodeAt(++Xt)),127>=tr){if(Ft>=jt)break;It[Ft++>>>0]=tr}else{if(2047>=tr){if(Ft+1>=jt)break;It[Ft++>>>0]=192|tr>>6}else{if(65535>=tr){if(Ft+2>=jt)break;It[Ft++>>>0]=224|tr>>12}else{if(Ft+3>=jt)break;It[Ft++>>>0]=240|tr>>18,It[Ft++>>>0]=128|tr>>12&63}It[Ft++>>>0]=128|tr>>6&63}It[Ft++>>>0]=128|63&tr}}return It[Ft>>>0]=0,Ft-Wt}function pr(Pt){for(var It=0,Ft=0;Ft<Pt.length;++Ft){var jt=Pt.charCodeAt(Ft);127>=jt?It++:2047>=jt?It+=2:55296<=jt&&57343>=jt?(It+=4,++Ft):It+=3}return It}function ur(Pt){Vt=Pt,st.HEAP8=Jt=new Int8Array(Pt),st.HEAP16=new Int16Array(Pt),st.HEAP32=nr=new Int32Array(Pt),st.HEAPU8=lr=new Uint8Array(Pt),st.HEAPU16=new Uint16Array(Pt),st.HEAPU32=ir=new Uint32Array(Pt),st.HEAPF32=new Float32Array(Pt),st.HEAPF64=cr=new Float64Array(Pt)}Tt&&(Vt=st.buffer);var mr=st.INITIAL_MEMORY||16777216;if(Tt)Bt=st.wasmMemory,Vt=st.buffer;else if(st.wasmMemory)Bt=st.wasmMemory;else if(!((Bt=new WebAssembly.Memory({initial:mr/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw Dt("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_t&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");Bt&&(Vt=Bt.buffer),mr=Vt.byteLength,ur(Vt);var Or,$r=[],Gr=[],Br=[],Jr=[];function Wr(){return Nt||!1}function Hr(){var Pt=st.preRun.shift();$r.unshift(Pt)}var Mr,Ur=0,Xr=null;function Cr(Pt){throw Tt?postMessage({cmd:"onAbort",arg:Pt}):st.onAbort&&st.onAbort(Pt),Dt(Pt="Aborted("+Pt+")"),hr=!0,Pt=new WebAssembly.RuntimeError(Pt+". Build with -sASSERTIONS for more info."),ut(Pt),Pt}function Cn(){return Mr.startsWith("data:application/octet-stream;base64,")}function mn(){var Pt=Mr;try{if(Pt==Mr&&$t)return new Uint8Array($t);if(gt)return gt(Pt);throw"both async and sync fetching of the wasm failed"}catch(It){Cr(It)}}Mr="ort-wasm-threaded.wasm",Cn()||(Mr=Ot(Mr));var Hn={};function nn(Pt){this.name="ExitStatus",this.message="Program terminated with exit("+Pt+")",this.status=Pt}function yn(Pt){(Pt=yr.Vb[Pt])||Cr(),yr.mc(Pt)}function bn(Pt){var It=yr.Cc();if(!It)return 6;yr.ac.push(It),yr.Vb[Pt.Ub]=It,It.Ub=Pt.Ub;var Ft={cmd:"run",start_routine:Pt.Ic,arg:Pt.zc,pthread_ptr:Pt.Ub};return It.$b=()=>{Ft.time=performance.now(),It.postMessage(Ft,Pt.Nc)},It.loaded&&(It.$b(),delete It.$b),0}function Vr(Pt){if(Tt)return sr(1,1,Pt);Wr()||(yr.oc(),st.onExit&&st.onExit(Pt),hr=!0),wt(Pt,new nn(Pt))}function cn(Pt,It){if(!It&&Tt)throw Yn(Pt),"unwind";Wr()||Tt||(Co(),un(Br),To(0),oo[1].length&&so(1,10),oo[2].length&&so(2,10),yr.oc()),Vr(Pt)}var yr={Yb:[],ac:[],qc:[],Vb:{},fc:function(){Tt&&yr.Ec()},Pc:function(){},Ec:function(){yr.receiveObjectTransfer=yr.Gc,yr.threadInitTLS=yr.pc,yr.setExitStatus=yr.nc,Nt=!1},nc:function(){},oc:function(){for(var Pt of Object.values(yr.Vb))yr.mc(Pt);for(Pt of yr.Yb)Pt.terminate();yr.Yb=[]},mc:function(Pt){var It=Pt.Ub;delete yr.Vb[It],yr.Yb.push(Pt),yr.ac.splice(yr.ac.indexOf(Pt),1),Pt.Ub=0,lo(It)},Gc:function(){},pc:function(){yr.qc.forEach(Pt=>Pt())},Fc:function(Pt,It){Pt.onmessage=Ft=>{var jt=(Ft=Ft.data).cmd;if(Pt.Ub&&(yr.Bc=Pt.Ub),Ft.targetThread&&Ft.targetThread!=Kn()){var Wt=yr.Vb[Ft.Qc];Wt?Wt.postMessage(Ft,Ft.transferList):Dt('Internal error! Worker sent a message "'+jt+'" to target pthread '+Ft.targetThread+", but that thread no longer exists!")}else jt==="processProxyingQueue"?zt(Ft.queue):jt==="spawnThread"?bn(Ft):jt==="cleanupThread"?yn(Ft.thread):jt==="killThread"?(Ft=Ft.thread,jt=yr.Vb[Ft],delete yr.Vb[Ft],jt.terminate(),lo(Ft),yr.ac.splice(yr.ac.indexOf(jt),1),jt.Ub=0):jt==="cancelThread"?yr.Vb[Ft.thread].postMessage({cmd:"cancel"}):jt==="loaded"?(Pt.loaded=!0,It&&It(Pt),Pt.$b&&(Pt.$b(),delete Pt.$b)):jt==="print"?Mt("Thread "+Ft.threadId+": "+Ft.text):jt==="printErr"?Dt("Thread "+Ft.threadId+": "+Ft.text):jt==="alert"?alert("Thread "+Ft.threadId+": "+Ft.text):Ft.target==="setimmediate"?Pt.postMessage(Ft):jt==="onAbort"?st.onAbort&&st.onAbort(Ft.arg):jt&&Dt("worker sent an unknown command "+jt);yr.Bc=void 0},Pt.onerror=Ft=>{throw Dt("worker sent an error! "+Ft.filename+":"+Ft.lineno+": "+Ft.message),Ft},_t&&(Pt.on("message",function(Ft){Pt.onmessage({data:Ft})}),Pt.on("error",function(Ft){Pt.onerror(Ft)}),Pt.on("detachedExit",function(){})),Pt.postMessage({cmd:"load",urlOrBlob:st.mainScriptUrlOrBlob||tt,wasmMemory:Bt,wasmModule:Ut})},yc:function(){var Pt=Ot("ort-wasm-threaded.worker.js");yr.Yb.push(new Worker(Pt))},Cc:function(){return yr.Yb.length==0&&(yr.yc(),yr.Fc(yr.Yb[0])),yr.Yb.pop()}};function un(Pt){for(;0<Pt.length;)Pt.shift()(st)}function Xn(Pt){var It=wr();return Pt=Pt(),Sr(It),Pt}function Yn(Pt){if(Tt)return sr(2,0,Pt);try{cn(Pt)}catch(It){It instanceof nn||It=="unwind"||wt(1,It)}}st.PThread=yr,st.establishStackSpace=function(){var Pt=Kn(),It=lt()[Pt+44>>2>>>0];Pt=lt()[Pt+48>>2>>>0],Oo(It,It-Pt),Sr(It)};var on=[];function Rr(Pt){var It=on[Pt];return It||(Pt>=on.length&&(on.length=Pt+1),on[Pt]=It=Or.get(Pt)),It}st.invokeEntryPoint=function(Pt,It){Pt=Rr(Pt)(It),Wr()?yr.nc(Pt):Ro(Pt)};var dn,Pn,hn=[],xr=0,br=0;function vr(Pt){this.Zb=Pt,this.Sb=Pt-24,this.xc=function(It){ct()[this.Sb+4>>2>>>0]=It},this.bc=function(){return ct()[this.Sb+4>>2>>>0]},this.wc=function(It){ct()[this.Sb+8>>2>>>0]=It},this.Dc=function(){return ct()[this.Sb+8>>2>>>0]},this.rc=function(){lt()[this.Sb>>2>>>0]=0},this.hc=function(It){It=It?1:0,ot()[this.Sb+12>>0>>>0]=It},this.uc=function(){return ot()[this.Sb+12>>0>>>0]!=0},this.ic=function(It){It=It?1:0,ot()[this.Sb+13>>0>>>0]=It},this.kc=function(){return ot()[this.Sb+13>>0>>>0]!=0},this.fc=function(It,Ft){this.cc(0),this.xc(It),this.wc(Ft),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(lt(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(lt(),this.Sb>>2,1)===1},this.cc=function(It){ct()[this.Sb+16>>2>>>0]=It},this.tc=function(){return ct()[this.Sb+16>>2>>>0]},this.vc=function(){if(ko(this.bc()))return ct()[this.Zb>>2>>>0];var It=this.tc();return It!==0?It:this.Zb}}function An(Pt){return Eo(new vr(Pt).Sb)}function pn(Pt,It,Ft,jt){return Tt?sr(3,1,Pt,It,Ft,jt):In(Pt,It,Ft,jt)}function In(Pt,It,Ft,jt){if(typeof SharedArrayBuffer>"u")return Dt("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Wt=[];return Tt&&Wt.length===0?pn(Pt,It,Ft,jt):(Pt={Ic:Ft,Ub:Pt,zc:jt,Nc:Wt},Tt?(Pt.Oc="spawnThread",postMessage(Pt,Wt),0):bn(Pt))}function Rn(Pt,It,Ft){return Tt?sr(4,1,Pt,It,Ft):0}function On(Pt,It){if(Tt)return sr(5,1,Pt,It)}function kn(Pt,It){if(Tt)return sr(6,1,Pt,It)}function Mn(Pt,It,Ft){if(Tt)return sr(7,1,Pt,It,Ft)}function Dn(Pt,It,Ft){return Tt?sr(8,1,Pt,It,Ft):0}function $n(Pt,It){if(Tt)return sr(9,1,Pt,It)}function Fn(Pt,It,Ft){if(Tt)return sr(10,1,Pt,It,Ft)}function Ln(Pt,It,Ft,jt){if(Tt)return sr(11,1,Pt,It,Ft,jt)}function Nn(Pt,It,Ft,jt){if(Tt)return sr(12,1,Pt,It,Ft,jt)}function Bn(Pt,It,Ft,jt){if(Tt)return sr(13,1,Pt,It,Ft,jt)}function jn(Pt){if(Tt)return sr(14,1,Pt)}function kt(Pt,It){if(Tt)return sr(15,1,Pt,It)}function Lt(Pt,It,Ft){if(Tt)return sr(16,1,Pt,It,Ft)}function zt(Pt){Atomics.store(lt(),Pt>>2,1),Kn()&&Io(Pt),Atomics.compareExchange(lt(),Pt>>2,1,0)}function Gt(Pt){return ct()[Pt>>>2]+4294967296*lt()[Pt+4>>>2]}function Ht(Pt,It,Ft,jt,Wt,Xt){return Tt?sr(17,1,Pt,It,Ft,jt,Wt,Xt):-52}function Kt(Pt,It,Ft,jt,Wt,Xt){if(Tt)return sr(18,1,Pt,It,Ft,jt,Wt,Xt)}function er(Pt){var It=pr(Pt)+1,Ft=ao(It);return Ft&&ar(Pt,ot(),Ft,It),Ft}function fr(Pt,It,Ft){function jt(Pr){return(Pr=Pr.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Pr[1]:"GMT"}if(Tt)return sr(19,1,Pt,It,Ft);var Wt=new Date().getFullYear(),Xt=new Date(Wt,0,1),tr=new Date(Wt,6,1);Wt=Xt.getTimezoneOffset();var gr=tr.getTimezoneOffset(),Tr=Math.max(Wt,gr);lt()[Pt>>2>>>0]=60*Tr,lt()[It>>2>>>0]=+(Wt!=gr),Pt=jt(Xt),It=jt(tr),Pt=er(Pt),It=er(It),gr<Wt?(ct()[Ft>>2>>>0]=Pt,ct()[Ft+4>>2>>>0]=It):(ct()[Ft>>2>>>0]=It,ct()[Ft+4>>2>>>0]=Pt)}function sr(Pt,It){var Ft=arguments.length-2,jt=arguments;return Xn(()=>{for(var Wt=uo(8*Ft),Xt=Wt>>3,tr=0;tr<Ft;tr++){var gr=jt[2+tr];dt()[Xt+tr>>>0]=gr}return Ao(Pt,Ft,Wt,It)})}st.executeNotifiedProxyingQueue=zt,Pn=_t?()=>{var Pt=process.hrtime();return 1e3*Pt[0]+Pt[1]/1e6}:Tt?()=>performance.now()-st.__performance_now_clock_drift:()=>performance.now();var _r,kr=[],jr={};function Nr(){if(!_r){var Pt,It={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:xt||"./this.program"};for(Pt in jr)jr[Pt]===void 0?delete It[Pt]:It[Pt]=jr[Pt];var Ft=[];for(Pt in It)Ft.push(Pt+"="+It[Pt]);_r=Ft}return _r}function Yt(Pt,It){if(Tt)return sr(20,1,Pt,It);var Ft=0;return Nr().forEach(function(jt,Wt){var Xt=It+Ft;for(Wt=ct()[Pt+4*Wt>>2>>>0]=Xt,Xt=0;Xt<jt.length;++Xt)ot()[Wt++>>0>>>0]=jt.charCodeAt(Xt);ot()[Wt>>0>>>0]=0,Ft+=jt.length+1}),0}function Ar(Pt,It){if(Tt)return sr(21,1,Pt,It);var Ft=Nr();ct()[Pt>>2>>>0]=Ft.length;var jt=0;return Ft.forEach(function(Wt){jt+=Wt.length+1}),ct()[It>>2>>>0]=jt,0}function Dr(Pt){return Tt?sr(22,1,Pt):52}function Zr(Pt,It,Ft,jt){return Tt?sr(23,1,Pt,It,Ft,jt):52}function sn(Pt,It,Ft,jt,Wt){return Tt?sr(24,1,Pt,It,Ft,jt,Wt):70}var oo=[null,[],[]];function so(Pt,It){var Ft=oo[Pt];It===0||It===10?((Pt===1?Mt:Dt)(Qt(Ft,0)),Ft.length=0):Ft.push(It)}function xo(Pt,It,Ft,jt){if(Tt)return sr(25,1,Pt,It,Ft,jt);for(var Wt=0,Xt=0;Xt<Ft;Xt++){var tr=ct()[It>>2>>>0],gr=ct()[It+4>>2>>>0];It+=8;for(var Tr=0;Tr<gr;Tr++)so(Pt,at()[tr+Tr>>>0]);Wt+=gr}return ct()[jt>>2>>>0]=Wt,0}var Yr=0;function qn(Pt){return Pt%4==0&&(Pt%100!=0||Pt%400==0)}var _o=[31,29,31,30,31,30,31,31,30,31,30,31],So=[31,28,31,30,31,30,31,31,30,31,30,31];function wo(Pt,It,Ft,jt){function Wt(qt,Ir,Fr){for(qt=typeof qt=="number"?qt.toString():qt||"";qt.length<Ir;)qt=Fr[0]+qt;return qt}function Xt(qt,Ir){return Wt(qt,Ir,"0")}function tr(qt,Ir){function Fr(xn){return 0>xn?-1:0<xn?1:0}var an;return(an=Fr(qt.getFullYear()-Ir.getFullYear()))===0&&(an=Fr(qt.getMonth()-Ir.getMonth()))===0&&(an=Fr(qt.getDate()-Ir.getDate())),an}function gr(qt){switch(qt.getDay()){case 0:return new Date(qt.getFullYear()-1,11,29);case 1:return qt;case 2:return new Date(qt.getFullYear(),0,3);case 3:return new Date(qt.getFullYear(),0,2);case 4:return new Date(qt.getFullYear(),0,1);case 5:return new Date(qt.getFullYear()-1,11,31);case 6:return new Date(qt.getFullYear()-1,11,30)}}function Tr(qt){var Ir=qt.Wb;for(qt=new Date(new Date(qt.Xb+1900,0,1).getTime());0<Ir;){var Fr=qt.getMonth(),an=(qn(qt.getFullYear())?_o:So)[Fr];if(!(Ir>an-qt.getDate())){qt.setDate(qt.getDate()+Ir);break}Ir-=an-qt.getDate()+1,qt.setDate(1),11>Fr?qt.setMonth(Fr+1):(qt.setMonth(0),qt.setFullYear(qt.getFullYear()+1))}return Fr=new Date(qt.getFullYear()+1,0,4),Ir=gr(new Date(qt.getFullYear(),0,4)),Fr=gr(Fr),0>=tr(Ir,qt)?0>=tr(Fr,qt)?qt.getFullYear()+1:qt.getFullYear():qt.getFullYear()-1}var Pr=lt()[jt+40>>2>>>0];for(var Lr in jt={Lc:lt()[jt>>2>>>0],Kc:lt()[jt+4>>2>>>0],dc:lt()[jt+8>>2>>>0],jc:lt()[jt+12>>2>>>0],ec:lt()[jt+16>>2>>>0],Xb:lt()[jt+20>>2>>>0],Tb:lt()[jt+24>>2>>>0],Wb:lt()[jt+28>>2>>>0],Rc:lt()[jt+32>>2>>>0],Jc:lt()[jt+36>>2>>>0],Mc:Pr?rr(Pr):""},Ft=rr(Ft),Pr={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Ft=Ft.replace(new RegExp(Lr,"g"),Pr[Lr]);var tn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Qr="January February March April May June July August September October November December".split(" ");for(Lr in Pr={"%a":function(qt){return tn[qt.Tb].substring(0,3)},"%A":function(qt){return tn[qt.Tb]},"%b":function(qt){return Qr[qt.ec].substring(0,3)},"%B":function(qt){return Qr[qt.ec]},"%C":function(qt){return Xt((qt.Xb+1900)/100|0,2)},"%d":function(qt){return Xt(qt.jc,2)},"%e":function(qt){return Wt(qt.jc,2," ")},"%g":function(qt){return Tr(qt).toString().substring(2)},"%G":function(qt){return Tr(qt)},"%H":function(qt){return Xt(qt.dc,2)},"%I":function(qt){return(qt=qt.dc)==0?qt=12:12<qt&&(qt-=12),Xt(qt,2)},"%j":function(qt){for(var Ir=0,Fr=0;Fr<=qt.ec-1;Ir+=(qn(qt.Xb+1900)?_o:So)[Fr++]);return Xt(qt.jc+Ir,3)},"%m":function(qt){return Xt(qt.ec+1,2)},"%M":function(qt){return Xt(qt.Kc,2)},"%n":function(){return`
`},"%p":function(qt){return 0<=qt.dc&&12>qt.dc?"AM":"PM"},"%S":function(qt){return Xt(qt.Lc,2)},"%t":function(){return"	"},"%u":function(qt){return qt.Tb||7},"%U":function(qt){return Xt(Math.floor((qt.Wb+7-qt.Tb)/7),2)},"%V":function(qt){var Ir=Math.floor((qt.Wb+7-(qt.Tb+6)%7)/7);if(2>=(qt.Tb+371-qt.Wb-2)%7&&Ir++,Ir)Ir==53&&((Fr=(qt.Tb+371-qt.Wb)%7)==4||Fr==3&&qn(qt.Xb)||(Ir=1));else{Ir=52;var Fr=(qt.Tb+7-qt.Wb-1)%7;(Fr==4||Fr==5&&qn(qt.Xb%400-1))&&Ir++}return Xt(Ir,2)},"%w":function(qt){return qt.Tb},"%W":function(qt){return Xt(Math.floor((qt.Wb+7-(qt.Tb+6)%7)/7),2)},"%y":function(qt){return(qt.Xb+1900).toString().substring(2)},"%Y":function(qt){return qt.Xb+1900},"%z":function(qt){var Ir=0<=(qt=qt.Jc);return qt=Math.abs(qt)/60,(Ir?"+":"-")+("0000"+(qt/60*100+qt%60)).slice(-4)},"%Z":function(qt){return qt.Mc},"%%":function(){return"%"}},Ft=Ft.replace(/%%/g,"\0\0"),Pr)Ft.includes(Lr)&&(Ft=Ft.replace(new RegExp(Lr,"g"),Pr[Lr](jt)));return Lr=function(qt){var Ir=Array(pr(qt)+1);return ar(qt,Ir,0,Ir.length),Ir}(Ft=Ft.replace(/\0\0/g,"%")),Lr.length>It?0:(function(qt,Ir){ot().set(qt,Ir>>>0)}(Lr,Pt),Lr.length-1)}yr.fc();var $a=[null,Vr,Yn,pn,Rn,On,kn,Mn,Dn,$n,Fn,Ln,Nn,Bn,jn,kt,Lt,Ht,Kt,fr,Yt,Ar,Dr,Zr,sn,xo],yl={b:function(Pt){return ao(Pt+24)+24},n:function(Pt){return(Pt=new vr(Pt)).uc()||(Pt.hc(!0),xr--),Pt.ic(!1),hn.push(Pt),Pt.sc(),Pt.vc()},ma:function(Pt){throw Dt("Unexpected exception thrown, this is not properly supported - aborting"),hr=!0,Pt},x:function(){Er(0);var Pt=hn.pop();if(Pt.Hc()&&!Pt.kc()){var It=Pt.Dc();It&&Rr(It)(Pt.Zb),An(Pt.Zb)}br=0},e:function(){var Pt=br;if(!Pt)return Yr=0;var It=new vr(Pt);It.cc(Pt);var Ft=It.bc();if(!Ft)return Yr=0,Pt;for(var jt=Array.prototype.slice.call(arguments),Wt=0;Wt<jt.length;Wt++){var Xt=jt[Wt];if(Xt===0||Xt===Ft)break;if(Qn(Xt,Ft,It.Sb+16))return Yr=Xt,Pt}return Yr=Ft,Pt},l:function(){var Pt=br;if(!Pt)return Yr=0;var It=new vr(Pt);It.cc(Pt);var Ft=It.bc();if(!Ft)return Yr=0,Pt;for(var jt=Array.prototype.slice.call(arguments),Wt=0;Wt<jt.length;Wt++){var Xt=jt[Wt];if(Xt===0||Xt===Ft)break;if(Qn(Xt,Ft,It.Sb+16))return Yr=Xt,Pt}return Yr=Ft,Pt},h:function(){var Pt=br;if(!Pt)return Yr=0;var It=new vr(Pt);It.cc(Pt);var Ft=It.bc();if(!Ft)return Yr=0,Pt;for(var jt=Array.prototype.slice.call(arguments),Wt=0;Wt<jt.length;Wt++){var Xt=jt[Wt];if(Xt===0||Xt===Ft)break;if(Qn(Xt,Ft,It.Sb+16))return Yr=Xt,Pt}return Yr=Ft,Pt},t:An,M:function(){var Pt=hn.pop();Pt||Cr("no exception to throw");var It=Pt.Zb;throw Pt.kc()||(hn.push(Pt),Pt.ic(!0),Pt.hc(!1),xr++),br=It,It},c:function(Pt,It,Ft){throw new vr(Pt).fc(It,Ft),br=Pt,xr++,Pt},pa:function(){return xr},Fa:function(Pt){Po(Pt,!Et,1,!St),yr.pc()},T:function(Pt){Tt?postMessage({cmd:"cleanupThread",thread:Pt}):yn(Pt)},xa:In,j:function(Pt){throw br||(br=Pt),Pt},H:Rn,Ma:On,ua:kn,wa:Mn,oa:Dn,Ka:$n,Ca:Fn,Ja:Ln,V:Nn,va:Bn,sa:jn,La:kt,ta:Lt,Ta:function(){},X:function(){Cr("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){Cr("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(Pt,It,Ft,jt){if(Pt==It)setTimeout(()=>zt(jt));else if(Tt)postMessage({targetThread:Pt,cmd:"processProxyingQueue",queue:jt});else{if(!(Pt=yr.Vb[Pt]))return;Pt.postMessage({cmd:"processProxyingQueue",queue:jt})}return 1},Ea:function(){return-1},Pa:function(Pt,It){Pt=new Date(1e3*Gt(Pt)),lt()[It>>2>>>0]=Pt.getUTCSeconds(),lt()[It+4>>2>>>0]=Pt.getUTCMinutes(),lt()[It+8>>2>>>0]=Pt.getUTCHours(),lt()[It+12>>2>>>0]=Pt.getUTCDate(),lt()[It+16>>2>>>0]=Pt.getUTCMonth(),lt()[It+20>>2>>>0]=Pt.getUTCFullYear()-1900,lt()[It+24>>2>>>0]=Pt.getUTCDay(),Pt=(Pt.getTime()-Date.UTC(Pt.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,lt()[It+28>>2>>>0]=Pt},Qa:function(Pt,It){Pt=new Date(1e3*Gt(Pt)),lt()[It>>2>>>0]=Pt.getSeconds(),lt()[It+4>>2>>>0]=Pt.getMinutes(),lt()[It+8>>2>>>0]=Pt.getHours(),lt()[It+12>>2>>>0]=Pt.getDate(),lt()[It+16>>2>>>0]=Pt.getMonth(),lt()[It+20>>2>>>0]=Pt.getFullYear()-1900,lt()[It+24>>2>>>0]=Pt.getDay();var Ft=new Date(Pt.getFullYear(),0,1),jt=(Pt.getTime()-Ft.getTime())/864e5|0;lt()[It+28>>2>>>0]=jt,lt()[It+36>>2>>>0]=-60*Pt.getTimezoneOffset(),jt=new Date(Pt.getFullYear(),6,1).getTimezoneOffset(),Pt=0|(jt!=(Ft=Ft.getTimezoneOffset())&&Pt.getTimezoneOffset()==Math.min(Ft,jt)),lt()[It+32>>2>>>0]=Pt},Ra:function(Pt){var It=new Date(lt()[Pt+20>>2>>>0]+1900,lt()[Pt+16>>2>>>0],lt()[Pt+12>>2>>>0],lt()[Pt+8>>2>>>0],lt()[Pt+4>>2>>>0],lt()[Pt>>2>>>0],0),Ft=lt()[Pt+32>>2>>>0],jt=It.getTimezoneOffset(),Wt=new Date(It.getFullYear(),0,1),Xt=new Date(It.getFullYear(),6,1).getTimezoneOffset(),tr=Wt.getTimezoneOffset(),gr=Math.min(tr,Xt);return 0>Ft?lt()[Pt+32>>2>>>0]=+(Xt!=tr&&gr==jt):0<Ft!=(gr==jt)&&(Xt=Math.max(tr,Xt),It.setTime(It.getTime()+6e4*((0<Ft?gr:Xt)-jt))),lt()[Pt+24>>2>>>0]=It.getDay(),Ft=(It.getTime()-Wt.getTime())/864e5|0,lt()[Pt+28>>2>>>0]=Ft,lt()[Pt>>2>>>0]=It.getSeconds(),lt()[Pt+4>>2>>>0]=It.getMinutes(),lt()[Pt+8>>2>>>0]=It.getHours(),lt()[Pt+12>>2>>>0]=It.getDate(),lt()[Pt+16>>2>>>0]=It.getMonth(),It.getTime()/1e3|0},Aa:Ht,Ba:Kt,Sa:function Pt(It,Ft,jt){Pt.Ac||(Pt.Ac=!0,fr(It,Ft,jt))},y:function(){Cr("")},U:function(){if(!_t&&!Et){var Pt="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";dn||(dn={}),dn[Pt]||(dn[Pt]=1,_t&&(Pt="warning: "+Pt),Dt(Pt))}},ra:function(){return 4294901760},B:Pn,Ia:function(Pt,It,Ft){at().copyWithin(Pt>>>0,It>>>0,It+Ft>>>0)},F:function(){return _t?et(3993).cpus().length:navigator.hardwareConcurrency},Da:function(Pt,It,Ft){kr.length=It,Ft>>=3;for(var jt=0;jt<It;jt++)kr[jt]=dt()[Ft+jt>>>0];return(0>Pt?Hn[-Pt-1]:$a[Pt]).apply(null,kr)},qa:function(Pt){var It=at().length;if((Pt>>>=0)<=It||4294901760<Pt)return!1;for(var Ft=1;4>=Ft;Ft*=2){var jt=It*(1+.2/Ft);jt=Math.min(jt,Pt+100663296);var Wt=Math;jt=Math.max(Pt,jt),Wt=Wt.min.call(Wt,4294901760,jt+(65536-jt%65536)%65536);e:{try{Bt.grow(Wt-Vt.byteLength+65535>>>16),ur(Bt.buffer);var Xt=1;break e}catch{}Xt=void 0}if(Xt)return!0}return!1},Na:function(){throw"unwind"},Ga:Yt,Ha:Ar,J:cn,I:Dr,S:Zr,ga:sn,R:xo,d:function(){return Yr},na:function Pt(It,Ft){Pt.lc||(Pt.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Wt=new Uint8Array(1);return()=>(crypto.getRandomValues(Wt),Wt[0])}if(_t)try{var Xt=et(Object(function(){var tr=new Error("Cannot find module 'crypto'");throw tr.code="MODULE_NOT_FOUND",tr}()));return()=>Xt.randomBytes(1)[0]}catch{}return()=>Cr("randomDevice")}());for(var jt=0;jt<Ft;jt++)ot()[It+jt>>0>>>0]=Pt.lc();return 0},ia:function(Pt,It,Ft){var jt=wr();try{return Rr(Pt)(It,Ft)}catch(Wt){if(Sr(jt),Wt!==Wt+0)throw Wt;Er(1,0)}},ja:function(Pt,It,Ft){var jt=wr();try{return Rr(Pt)(It,Ft)}catch(Wt){if(Sr(jt),Wt!==Wt+0)throw Wt;Er(1,0)}},K:function(Pt){var It=wr();try{return Rr(Pt)()}catch(Ft){if(Sr(It),Ft!==Ft+0)throw Ft;Er(1,0)}},f:function(Pt,It){var Ft=wr();try{return Rr(Pt)(It)}catch(jt){if(Sr(Ft),jt!==jt+0)throw jt;Er(1,0)}},P:function(Pt,It,Ft){var jt=wr();try{return Rr(Pt)(It,Ft)}catch(Wt){if(Sr(jt),Wt!==Wt+0)throw Wt;Er(1,0)}},Q:function(Pt,It,Ft){var jt=wr();try{return Rr(Pt)(It,Ft)}catch(Wt){if(Sr(jt),Wt!==Wt+0)throw Wt;Er(1,0)}},k:function(Pt,It,Ft){var jt=wr();try{return Rr(Pt)(It,Ft)}catch(Wt){if(Sr(jt),Wt!==Wt+0)throw Wt;Er(1,0)}},p:function(Pt,It,Ft,jt){var Wt=wr();try{return Rr(Pt)(It,Ft,jt)}catch(Xt){if(Sr(Wt),Xt!==Xt+0)throw Xt;Er(1,0)}},q:function(Pt,It,Ft,jt,Wt){var Xt=wr();try{return Rr(Pt)(It,Ft,jt,Wt)}catch(tr){if(Sr(Xt),tr!==tr+0)throw tr;Er(1,0)}},N:function(Pt,It,Ft,jt,Wt,Xt){var tr=wr();try{return Rr(Pt)(It,Ft,jt,Wt,Xt)}catch(gr){if(Sr(tr),gr!==gr+0)throw gr;Er(1,0)}},s:function(Pt,It,Ft,jt,Wt,Xt){var tr=wr();try{return Rr(Pt)(It,Ft,jt,Wt,Xt)}catch(gr){if(Sr(tr),gr!==gr+0)throw gr;Er(1,0)}},w:function(Pt,It,Ft,jt,Wt,Xt,tr){var gr=wr();try{return Rr(Pt)(It,Ft,jt,Wt,Xt,tr)}catch(Tr){if(Sr(gr),Tr!==Tr+0)throw Tr;Er(1,0)}},L:function(Pt,It,Ft,jt,Wt,Xt,tr,gr){var Tr=wr();try{return Rr(Pt)(It,Ft,jt,Wt,Xt,tr,gr)}catch(Pr){if(Sr(Tr),Pr!==Pr+0)throw Pr;Er(1,0)}},E:function(Pt,It,Ft,jt,Wt,Xt,tr,gr,Tr,Pr,Lr,tn){var Qr=wr();try{return Rr(Pt)(It,Ft,jt,Wt,Xt,tr,gr,Tr,Pr,Lr,tn)}catch(qt){if(Sr(Qr),qt!==qt+0)throw qt;Er(1,0)}},aa:function(Pt,It,Ft,jt,Wt,Xt,tr,gr){var Tr=wr();try{return Uo(Pt,It,Ft,jt,Wt,Xt,tr,gr)}catch(Pr){if(Sr(Tr),Pr!==Pr+0)throw Pr;Er(1,0)}},_:function(Pt,It,Ft,jt,Wt,Xt,tr){var gr=wr();try{return Do(Pt,It,Ft,jt,Wt,Xt,tr)}catch(Tr){if(Sr(gr),Tr!==Tr+0)throw Tr;Er(1,0)}},Z:function(Pt,It,Ft,jt,Wt){var Xt=wr();try{return Vo(Pt,It,Ft,jt,Wt)}catch(tr){if(Sr(Xt),tr!==tr+0)throw tr;Er(1,0)}},ca:function(Pt,It,Ft,jt){var Wt=wr();try{return Bo(Pt,It,Ft,jt)}catch(Xt){if(Sr(Wt),Xt!==Xt+0)throw Xt;Er(1,0)}},$:function(Pt){var It=wr();try{return Mo(Pt)}catch(Ft){if(Sr(It),Ft!==Ft+0)throw Ft;Er(1,0)}},ba:function(Pt,It){var Ft=wr();try{return jo(Pt,It)}catch(jt){if(Sr(Ft),jt!==jt+0)throw jt;Er(1,0)}},Y:function(Pt,It,Ft){var jt=wr();try{return $o(Pt,It,Ft)}catch(Wt){if(Sr(jt),Wt!==Wt+0)throw Wt;Er(1,0)}},g:function(Pt){var It=wr();try{Rr(Pt)()}catch(Ft){if(Sr(It),Ft!==Ft+0)throw Ft;Er(1,0)}},r:function(Pt,It){var Ft=wr();try{Rr(Pt)(It)}catch(jt){if(Sr(Ft),jt!==jt+0)throw jt;Er(1,0)}},i:function(Pt,It,Ft){var jt=wr();try{Rr(Pt)(It,Ft)}catch(Wt){if(Sr(jt),Wt!==Wt+0)throw Wt;Er(1,0)}},ha:function(Pt,It,Ft,jt){var Wt=wr();try{Rr(Pt)(It,Ft,jt)}catch(Xt){if(Sr(Wt),Xt!==Xt+0)throw Xt;Er(1,0)}},m:function(Pt,It,Ft,jt){var Wt=wr();try{Rr(Pt)(It,Ft,jt)}catch(Xt){if(Sr(Wt),Xt!==Xt+0)throw Xt;Er(1,0)}},v:function(Pt,It,Ft,jt,Wt){var Xt=wr();try{Rr(Pt)(It,Ft,jt,Wt)}catch(tr){if(Sr(Xt),tr!==tr+0)throw tr;Er(1,0)}},u:function(Pt,It,Ft,jt,Wt,Xt){var tr=wr();try{Rr(Pt)(It,Ft,jt,Wt,Xt)}catch(gr){if(Sr(tr),gr!==gr+0)throw gr;Er(1,0)}},O:function(Pt,It,Ft,jt,Wt,Xt,tr){var gr=wr();try{Rr(Pt)(It,Ft,jt,Wt,Xt,tr)}catch(Tr){if(Sr(gr),Tr!==Tr+0)throw Tr;Er(1,0)}},A:function(Pt,It,Ft,jt,Wt,Xt,tr,gr){var Tr=wr();try{Rr(Pt)(It,Ft,jt,Wt,Xt,tr,gr)}catch(Pr){if(Sr(Tr),Pr!==Pr+0)throw Pr;Er(1,0)}},ka:function(Pt,It,Ft,jt,Wt,Xt,tr,gr,Tr){var Pr=wr();try{Rr(Pt)(It,Ft,jt,Wt,Xt,tr,gr,Tr)}catch(Lr){if(Sr(Pr),Lr!==Lr+0)throw Lr;Er(1,0)}},C:function(Pt,It,Ft,jt,Wt,Xt,tr,gr,Tr,Pr,Lr){var tn=wr();try{Rr(Pt)(It,Ft,jt,Wt,Xt,tr,gr,Tr,Pr,Lr)}catch(Qr){if(Sr(tn),Qr!==Qr+0)throw Qr;Er(1,0)}},D:function(Pt,It,Ft,jt,Wt,Xt,tr,gr,Tr,Pr,Lr,tn,Qr,qt,Ir,Fr){var an=wr();try{Rr(Pt)(It,Ft,jt,Wt,Xt,tr,gr,Tr,Pr,Lr,tn,Qr,qt,Ir,Fr)}catch(xn){if(Sr(an),xn!==xn+0)throw xn;Er(1,0)}},fa:function(Pt,It,Ft,jt,Wt,Xt,tr,gr){var Tr=wr();try{Fo(Pt,It,Ft,jt,Wt,Xt,tr,gr)}catch(Pr){if(Sr(Tr),Pr!==Pr+0)throw Pr;Er(1,0)}},da:function(Pt,It,Ft,jt,Wt,Xt,tr,gr,Tr,Pr,Lr,tn){var Qr=wr();try{No(Pt,It,Ft,jt,Wt,Xt,tr,gr,Tr,Pr,Lr,tn)}catch(qt){if(Sr(Qr),qt!==qt+0)throw qt;Er(1,0)}},ea:function(Pt,It,Ft,jt,Wt,Xt){var tr=wr();try{Lo(Pt,It,Ft,jt,Wt,Xt)}catch(gr){if(Sr(tr),gr!==gr+0)throw gr;Er(1,0)}},o:function(Pt){return Pt},a:Bt||st.wasmMemory,G:function(Pt){Yr=Pt},la:wo,z:function(Pt,It,Ft,jt){return wo(Pt,It,Ft,jt)}};(function(){function Pt(Wt,Xt){st.asm=Wt.exports,yr.qc.push(st.asm.sb),Or=st.asm.ub,Gr.unshift(st.asm.Va),Ut=Xt,Tt||(Ur--,st.monitorRunDependencies&&st.monitorRunDependencies(Ur),Ur==0&&Xr&&(Wt=Xr,Xr=null,Wt()))}function It(Wt){Pt(Wt.instance,Wt.module)}function Ft(Wt){return function(){if(!$t&&(St||Et)){if(typeof fetch=="function"&&!Mr.startsWith("file://"))return fetch(Mr,{credentials:"same-origin"}).then(function(Xt){if(!Xt.ok)throw"failed to load wasm binary file at '"+Mr+"'";return Xt.arrayBuffer()}).catch(function(){return mn()});if(ft)return new Promise(function(Xt,tr){ft(Mr,function(gr){Xt(new Uint8Array(gr))},tr)})}return Promise.resolve().then(function(){return mn()})}().then(function(Xt){return WebAssembly.instantiate(Xt,jt)}).then(function(Xt){return Xt}).then(Wt,function(Xt){Dt("failed to asynchronously prepare wasm: "+Xt),Cr(Xt)})}var jt={a:yl};if(Tt||(Ur++,st.monitorRunDependencies&&st.monitorRunDependencies(Ur)),st.instantiateWasm)try{return st.instantiateWasm(jt,Pt)}catch(Wt){return Dt("Module.instantiateWasm callback failed with error: "+Wt),!1}($t||typeof WebAssembly.instantiateStreaming!="function"||Cn()||Mr.startsWith("file://")||_t||typeof fetch!="function"?Ft(It):fetch(Mr,{credentials:"same-origin"}).then(function(Wt){return WebAssembly.instantiateStreaming(Wt,jt).then(It,function(Xt){return Dt("wasm streaming compile failed: "+Xt),Dt("falling back to ArrayBuffer instantiation"),Ft(It)})})).catch(ut)})(),st.___wasm_call_ctors=function(){return(st.___wasm_call_ctors=st.asm.Va).apply(null,arguments)},st._OrtInit=function(){return(st._OrtInit=st.asm.Wa).apply(null,arguments)},st._OrtCreateSessionOptions=function(){return(st._OrtCreateSessionOptions=st.asm.Xa).apply(null,arguments)},st._OrtAppendExecutionProvider=function(){return(st._OrtAppendExecutionProvider=st.asm.Ya).apply(null,arguments)},st._OrtAddSessionConfigEntry=function(){return(st._OrtAddSessionConfigEntry=st.asm.Za).apply(null,arguments)},st._OrtReleaseSessionOptions=function(){return(st._OrtReleaseSessionOptions=st.asm._a).apply(null,arguments)},st._OrtCreateSession=function(){return(st._OrtCreateSession=st.asm.$a).apply(null,arguments)},st._OrtReleaseSession=function(){return(st._OrtReleaseSession=st.asm.ab).apply(null,arguments)},st._OrtGetInputCount=function(){return(st._OrtGetInputCount=st.asm.bb).apply(null,arguments)},st._OrtGetOutputCount=function(){return(st._OrtGetOutputCount=st.asm.cb).apply(null,arguments)},st._OrtGetInputName=function(){return(st._OrtGetInputName=st.asm.db).apply(null,arguments)},st._OrtGetOutputName=function(){return(st._OrtGetOutputName=st.asm.eb).apply(null,arguments)},st._OrtFree=function(){return(st._OrtFree=st.asm.fb).apply(null,arguments)},st._OrtCreateTensor=function(){return(st._OrtCreateTensor=st.asm.gb).apply(null,arguments)},st._OrtGetTensorData=function(){return(st._OrtGetTensorData=st.asm.hb).apply(null,arguments)},st._OrtReleaseTensor=function(){return(st._OrtReleaseTensor=st.asm.ib).apply(null,arguments)},st._OrtCreateRunOptions=function(){return(st._OrtCreateRunOptions=st.asm.jb).apply(null,arguments)},st._OrtAddRunConfigEntry=function(){return(st._OrtAddRunConfigEntry=st.asm.kb).apply(null,arguments)},st._OrtReleaseRunOptions=function(){return(st._OrtReleaseRunOptions=st.asm.lb).apply(null,arguments)},st._OrtRun=function(){return(st._OrtRun=st.asm.mb).apply(null,arguments)},st._OrtEndProfiling=function(){return(st._OrtEndProfiling=st.asm.nb).apply(null,arguments)};var Kn=st._pthread_self=function(){return(Kn=st._pthread_self=st.asm.ob).apply(null,arguments)},ao=st._malloc=function(){return(ao=st._malloc=st.asm.pb).apply(null,arguments)},Eo=st._free=function(){return(Eo=st._free=st.asm.qb).apply(null,arguments)},To=st._fflush=function(){return(To=st._fflush=st.asm.rb).apply(null,arguments)};st.__emscripten_tls_init=function(){return(st.__emscripten_tls_init=st.asm.sb).apply(null,arguments)};var Co=st.___funcs_on_exit=function(){return(Co=st.___funcs_on_exit=st.asm.tb).apply(null,arguments)},Po=st.__emscripten_thread_init=function(){return(Po=st.__emscripten_thread_init=st.asm.vb).apply(null,arguments)};st.__emscripten_thread_crashed=function(){return(st.__emscripten_thread_crashed=st.asm.wb).apply(null,arguments)};var Zn,Ao=st._emscripten_run_in_main_runtime_thread_js=function(){return(Ao=st._emscripten_run_in_main_runtime_thread_js=st.asm.xb).apply(null,arguments)},Io=st.__emscripten_proxy_execute_task_queue=function(){return(Io=st.__emscripten_proxy_execute_task_queue=st.asm.yb).apply(null,arguments)},lo=st.__emscripten_thread_free_data=function(){return(lo=st.__emscripten_thread_free_data=st.asm.zb).apply(null,arguments)},Ro=st.__emscripten_thread_exit=function(){return(Ro=st.__emscripten_thread_exit=st.asm.Ab).apply(null,arguments)},Er=st._setThrew=function(){return(Er=st._setThrew=st.asm.Bb).apply(null,arguments)},Oo=st._emscripten_stack_set_limits=function(){return(Oo=st._emscripten_stack_set_limits=st.asm.Cb).apply(null,arguments)},wr=st.stackSave=function(){return(wr=st.stackSave=st.asm.Db).apply(null,arguments)},Sr=st.stackRestore=function(){return(Sr=st.stackRestore=st.asm.Eb).apply(null,arguments)},uo=st.stackAlloc=function(){return(uo=st.stackAlloc=st.asm.Fb).apply(null,arguments)},Qn=st.___cxa_can_catch=function(){return(Qn=st.___cxa_can_catch=st.asm.Gb).apply(null,arguments)},ko=st.___cxa_is_pointer_type=function(){return(ko=st.___cxa_is_pointer_type=st.asm.Hb).apply(null,arguments)},Mo=st.dynCall_j=function(){return(Mo=st.dynCall_j=st.asm.Ib).apply(null,arguments)},Do=st.dynCall_iiiiij=function(){return(Do=st.dynCall_iiiiij=st.asm.Jb).apply(null,arguments)},$o=st.dynCall_jii=function(){return($o=st.dynCall_jii=st.asm.Kb).apply(null,arguments)},Fo=st.dynCall_viiiiij=function(){return(Fo=st.dynCall_viiiiij=st.asm.Lb).apply(null,arguments)},Lo=st.dynCall_vjji=function(){return(Lo=st.dynCall_vjji=st.asm.Mb).apply(null,arguments)},No=st.dynCall_viiijjjii=function(){return(No=st.dynCall_viiijjjii=st.asm.Nb).apply(null,arguments)},Bo=st.dynCall_iij=function(){return(Bo=st.dynCall_iij=st.asm.Ob).apply(null,arguments)},jo=st.dynCall_ji=function(){return(jo=st.dynCall_ji=st.asm.Pb).apply(null,arguments)},Uo=st.dynCall_iiiiiij=function(){return(Uo=st.dynCall_iiiiiij=st.asm.Qb).apply(null,arguments)},Vo=st.dynCall_iiij=function(){return(Vo=st.dynCall_iiij=st.asm.Rb).apply(null,arguments)};function zo(){function Pt(){if(!Zn&&(Zn=!0,st.calledRun=!0,!hr)&&(Tt||un(Gr),it(st),st.onRuntimeInitialized&&st.onRuntimeInitialized(),!Tt)){if(st.postRun)for(typeof st.postRun=="function"&&(st.postRun=[st.postRun]);st.postRun.length;){var It=st.postRun.shift();Jr.unshift(It)}un(Jr)}}if(!(0<Ur))if(Tt)it(st),Tt||un(Gr),postMessage({cmd:"loaded"});else{if(st.preRun)for(typeof st.preRun=="function"&&(st.preRun=[st.preRun]);st.preRun.length;)Hr();un($r),0<Ur||(st.setStatus?(st.setStatus("Running..."),setTimeout(function(){setTimeout(function(){st.setStatus("")},1),Pt()},1)):Pt())}}if(st.UTF8ToString=rr,st.stringToUTF8=function(Pt,It,Ft){return ar(Pt,at(),It,Ft)},st.lengthBytesUTF8=pr,st.keepRuntimeAlive=Wr,st.wasmMemory=Bt,st.stackSave=wr,st.stackRestore=Sr,st.stackAlloc=uo,st.ExitStatus=nn,st.PThread=yr,Xr=function Pt(){Zn||zo(),Zn||(Xr=Pt)},st.preInit)for(typeof st.preInit=="function"&&(st.preInit=[st.preInit]);0<st.preInit.length;)st.preInit.pop()();return zo(),nt.ready});_e.exports=rt},932:(_e,_,et)=>{var tt,rt=(tt=(tt=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(nt){var ot,at,lt;nt=nt||{},ot||(ot=nt!==void 0?nt:{}),ot.ready=new Promise(function(kt,Lt){at=kt,lt=Lt});var ct,dt,st,it,ut,ht,ft=Object.assign({},ot),gt="./this.program",mt=(kt,Lt)=>{throw Lt},yt=typeof window=="object",bt=typeof importScripts=="function",vt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",xt="";vt?(xt=bt?et(908).dirname(xt)+"/":"//",ht=()=>{ut||(it=et(1384),ut=et(908))},ct=function(kt,Lt){return ht(),kt=ut.normalize(kt),it.readFileSync(kt,Lt?void 0:"utf8")},st=kt=>((kt=ct(kt,!0)).buffer||(kt=new Uint8Array(kt)),kt),dt=(kt,Lt,zt)=>{ht(),kt=ut.normalize(kt),it.readFile(kt,function(Gt,Ht){Gt?zt(Gt):Lt(Ht.buffer)})},1<process.argv.length&&(gt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(kt){if(!(kt instanceof Gr))throw kt}),process.on("unhandledRejection",function(kt){throw kt}),mt=(kt,Lt)=>{if(_t||0<Zt)throw process.exitCode=kt,Lt;Lt instanceof Gr||Et("exiting due to exception: "+Lt),process.exit(kt)},ot.inspect=function(){return"[Emscripten Module object]"}):(yt||bt)&&(bt?xt=self.location.href:typeof document<"u"&&document.currentScript&&(xt=document.currentScript.src),tt&&(xt=tt),xt=xt.indexOf("blob:")!==0?xt.substr(0,xt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",ct=kt=>{var Lt=new XMLHttpRequest;return Lt.open("GET",kt,!1),Lt.send(null),Lt.responseText},bt&&(st=kt=>{var Lt=new XMLHttpRequest;return Lt.open("GET",kt,!1),Lt.responseType="arraybuffer",Lt.send(null),new Uint8Array(Lt.response)}),dt=(kt,Lt,zt)=>{var Gt=new XMLHttpRequest;Gt.open("GET",kt,!0),Gt.responseType="arraybuffer",Gt.onload=()=>{Gt.status==200||Gt.status==0&&Gt.response?Lt(Gt.response):zt()},Gt.onerror=zt,Gt.send(null)});var wt,St=ot.print||console.log.bind(console),Et=ot.printErr||console.warn.bind(console);Object.assign(ot,ft),ft=null,ot.thisProgram&&(gt=ot.thisProgram),ot.quit&&(mt=ot.quit),ot.wasmBinary&&(wt=ot.wasmBinary);var _t=ot.noExitRuntime||!1;typeof WebAssembly!="object"&&ur("no native wasm support detected");var Tt,Rt,Ot,At,Ct,$t,Mt=!1,Dt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Nt(kt,Lt,zt){var Gt=(Lt>>>=0)+zt;for(zt=Lt;kt[zt]&&!(zt>=Gt);)++zt;if(16<zt-Lt&&kt.buffer&&Dt)return Dt.decode(kt.subarray(Lt,zt));for(Gt="";Lt<zt;){var Ht=kt[Lt++];if(128&Ht){var Kt=63&kt[Lt++];if((224&Ht)==192)Gt+=String.fromCharCode((31&Ht)<<6|Kt);else{var er=63&kt[Lt++];65536>(Ht=(240&Ht)==224?(15&Ht)<<12|Kt<<6|er:(7&Ht)<<18|Kt<<12|er<<6|63&kt[Lt++])?Gt+=String.fromCharCode(Ht):(Ht-=65536,Gt+=String.fromCharCode(55296|Ht>>10,56320|1023&Ht))}}else Gt+=String.fromCharCode(Ht)}return Gt}function Bt(kt,Lt){return(kt>>>=0)?Nt(At,kt,Lt):""}function Ut(kt,Lt,zt,Gt){if(!(0<Gt))return 0;var Ht=zt>>>=0;Gt=zt+Gt-1;for(var Kt=0;Kt<kt.length;++Kt){var er=kt.charCodeAt(Kt);if(55296<=er&&57343>=er&&(er=65536+((1023&er)<<10)|1023&kt.charCodeAt(++Kt)),127>=er){if(zt>=Gt)break;Lt[zt++>>>0]=er}else{if(2047>=er){if(zt+1>=Gt)break;Lt[zt++>>>0]=192|er>>6}else{if(65535>=er){if(zt+2>=Gt)break;Lt[zt++>>>0]=224|er>>12}else{if(zt+3>=Gt)break;Lt[zt++>>>0]=240|er>>18,Lt[zt++>>>0]=128|er>>12&63}Lt[zt++>>>0]=128|er>>6&63}Lt[zt++>>>0]=128|63&er}}return Lt[zt>>>0]=0,zt-Ht}function Vt(kt){for(var Lt=0,zt=0;zt<kt.length;++zt){var Gt=kt.charCodeAt(zt);127>=Gt?Lt++:2047>=Gt?Lt+=2:55296<=Gt&&57343>=Gt?(Lt+=4,++zt):Lt+=3}return Lt}function Jt(){var kt=Tt.buffer;Rt=kt,ot.HEAP8=Ot=new Int8Array(kt),ot.HEAP16=new Int16Array(kt),ot.HEAP32=Ct=new Int32Array(kt),ot.HEAPU8=At=new Uint8Array(kt),ot.HEAPU16=new Uint16Array(kt),ot.HEAPU32=$t=new Uint32Array(kt),ot.HEAPF32=new Float32Array(kt),ot.HEAPF64=new Float64Array(kt)}var lr,nr=[],ir=[],cr=[],hr=[],Zt=0;function Qt(){var kt=ot.preRun.shift();nr.unshift(kt)}var rr,ar=0,pr=null;function ur(kt){throw ot.onAbort&&ot.onAbort(kt),Et(kt="Aborted("+kt+")"),Mt=!0,kt=new WebAssembly.RuntimeError(kt+". Build with -sASSERTIONS for more info."),lt(kt),kt}function mr(){return rr.startsWith("data:application/octet-stream;base64,")}if(rr="ort-wasm.wasm",!mr()){var Or=rr;rr=ot.locateFile?ot.locateFile(Or,xt):xt+Or}function $r(){var kt=rr;try{if(kt==rr&&wt)return new Uint8Array(wt);if(st)return st(kt);throw"both async and sync fetching of the wasm failed"}catch(Lt){ur(Lt)}}function Gr(kt){this.name="ExitStatus",this.message="Program terminated with exit("+kt+")",this.status=kt}function Br(kt){for(;0<kt.length;)kt.shift()(ot)}var Jr=[],Wr=0,Hr=0;function Mr(kt){this.Db=kt,this.zb=kt-24,this.Ub=function(Lt){$t[this.zb+4>>2>>>0]=Lt},this.Eb=function(){return $t[this.zb+4>>2>>>0]},this.Sb=function(Lt){$t[this.zb+8>>2>>>0]=Lt},this.Wb=function(){return $t[this.zb+8>>2>>>0]},this.Tb=function(){Ct[this.zb>>2>>>0]=0},this.Ib=function(Lt){Ot[this.zb+12>>0>>>0]=Lt?1:0},this.Pb=function(){return Ot[this.zb+12>>0>>>0]!=0},this.Jb=function(Lt){Ot[this.zb+13>>0>>>0]=Lt?1:0},this.Lb=function(){return Ot[this.zb+13>>0>>>0]!=0},this.Rb=function(Lt,zt){this.Fb(0),this.Ub(Lt),this.Sb(zt),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){Ct[this.zb>>2>>>0]+=1},this.Xb=function(){var Lt=Ct[this.zb>>2>>>0];return Ct[this.zb>>2>>>0]=Lt-1,Lt===1},this.Fb=function(Lt){$t[this.zb+16>>2>>>0]=Lt},this.Ob=function(){return $t[this.zb+16>>2>>>0]},this.Qb=function(){if(In(this.Eb()))return $t[this.Db>>2>>>0];var Lt=this.Ob();return Lt!==0?Lt:this.Db}}function Ur(kt){return dn(new Mr(kt).zb)}var Xr=[];function Cr(kt){var Lt=Xr[kt];return Lt||(kt>=Xr.length&&(Xr.length=kt+1),Xr[kt]=Lt=lr.get(kt)),Lt}function Cn(kt){var Lt=Vt(kt)+1,zt=Rr(Lt);return zt&&Ut(kt,Ot,zt,Lt),zt}var mn={};function Hn(){if(!nn){var kt,Lt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:gt||"./this.program"};for(kt in mn)mn[kt]===void 0?delete Lt[kt]:Lt[kt]=mn[kt];var zt=[];for(kt in Lt)zt.push(kt+"="+Lt[kt]);nn=zt}return nn}var nn,yn=[null,[],[]];function bn(kt,Lt){var zt=yn[kt];Lt===0||Lt===10?((kt===1?St:Et)(Nt(zt,0)),zt.length=0):zt.push(Lt)}var Vr=0;function cn(kt){return kt%4==0&&(kt%100!=0||kt%400==0)}var yr=[31,29,31,30,31,30,31,31,30,31,30,31],un=[31,28,31,30,31,30,31,31,30,31,30,31];function Xn(kt,Lt,zt,Gt){function Ht(Yt,Ar,Dr){for(Yt=typeof Yt=="number"?Yt.toString():Yt||"";Yt.length<Ar;)Yt=Dr[0]+Yt;return Yt}function Kt(Yt,Ar){return Ht(Yt,Ar,"0")}function er(Yt,Ar){function Dr(sn){return 0>sn?-1:0<sn?1:0}var Zr;return(Zr=Dr(Yt.getFullYear()-Ar.getFullYear()))===0&&(Zr=Dr(Yt.getMonth()-Ar.getMonth()))===0&&(Zr=Dr(Yt.getDate()-Ar.getDate())),Zr}function fr(Yt){switch(Yt.getDay()){case 0:return new Date(Yt.getFullYear()-1,11,29);case 1:return Yt;case 2:return new Date(Yt.getFullYear(),0,3);case 3:return new Date(Yt.getFullYear(),0,2);case 4:return new Date(Yt.getFullYear(),0,1);case 5:return new Date(Yt.getFullYear()-1,11,31);case 6:return new Date(Yt.getFullYear()-1,11,30)}}function sr(Yt){var Ar=Yt.Bb;for(Yt=new Date(new Date(Yt.Cb+1900,0,1).getTime());0<Ar;){var Dr=Yt.getMonth(),Zr=(cn(Yt.getFullYear())?yr:un)[Dr];if(!(Ar>Zr-Yt.getDate())){Yt.setDate(Yt.getDate()+Ar);break}Ar-=Zr-Yt.getDate()+1,Yt.setDate(1),11>Dr?Yt.setMonth(Dr+1):(Yt.setMonth(0),Yt.setFullYear(Yt.getFullYear()+1))}return Dr=new Date(Yt.getFullYear()+1,0,4),Ar=fr(new Date(Yt.getFullYear(),0,4)),Dr=fr(Dr),0>=er(Ar,Yt)?0>=er(Dr,Yt)?Yt.getFullYear()+1:Yt.getFullYear():Yt.getFullYear()-1}var _r=Ct[Gt+40>>2>>>0];for(var kr in Gt={$b:Ct[Gt>>2>>>0],Zb:Ct[Gt+4>>2>>>0],Gb:Ct[Gt+8>>2>>>0],Kb:Ct[Gt+12>>2>>>0],Hb:Ct[Gt+16>>2>>>0],Cb:Ct[Gt+20>>2>>>0],Ab:Ct[Gt+24>>2>>>0],Bb:Ct[Gt+28>>2>>>0],bc:Ct[Gt+32>>2>>>0],Yb:Ct[Gt+36>>2>>>0],ac:_r?Bt(_r):""},zt=Bt(zt),_r={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})zt=zt.replace(new RegExp(kr,"g"),_r[kr]);var jr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Nr="January February March April May June July August September October November December".split(" ");for(kr in _r={"%a":function(Yt){return jr[Yt.Ab].substring(0,3)},"%A":function(Yt){return jr[Yt.Ab]},"%b":function(Yt){return Nr[Yt.Hb].substring(0,3)},"%B":function(Yt){return Nr[Yt.Hb]},"%C":function(Yt){return Kt((Yt.Cb+1900)/100|0,2)},"%d":function(Yt){return Kt(Yt.Kb,2)},"%e":function(Yt){return Ht(Yt.Kb,2," ")},"%g":function(Yt){return sr(Yt).toString().substring(2)},"%G":function(Yt){return sr(Yt)},"%H":function(Yt){return Kt(Yt.Gb,2)},"%I":function(Yt){return(Yt=Yt.Gb)==0?Yt=12:12<Yt&&(Yt-=12),Kt(Yt,2)},"%j":function(Yt){for(var Ar=0,Dr=0;Dr<=Yt.Hb-1;Ar+=(cn(Yt.Cb+1900)?yr:un)[Dr++]);return Kt(Yt.Kb+Ar,3)},"%m":function(Yt){return Kt(Yt.Hb+1,2)},"%M":function(Yt){return Kt(Yt.Zb,2)},"%n":function(){return`
`},"%p":function(Yt){return 0<=Yt.Gb&&12>Yt.Gb?"AM":"PM"},"%S":function(Yt){return Kt(Yt.$b,2)},"%t":function(){return"	"},"%u":function(Yt){return Yt.Ab||7},"%U":function(Yt){return Kt(Math.floor((Yt.Bb+7-Yt.Ab)/7),2)},"%V":function(Yt){var Ar=Math.floor((Yt.Bb+7-(Yt.Ab+6)%7)/7);if(2>=(Yt.Ab+371-Yt.Bb-2)%7&&Ar++,Ar)Ar==53&&((Dr=(Yt.Ab+371-Yt.Bb)%7)==4||Dr==3&&cn(Yt.Cb)||(Ar=1));else{Ar=52;var Dr=(Yt.Ab+7-Yt.Bb-1)%7;(Dr==4||Dr==5&&cn(Yt.Cb%400-1))&&Ar++}return Kt(Ar,2)},"%w":function(Yt){return Yt.Ab},"%W":function(Yt){return Kt(Math.floor((Yt.Bb+7-(Yt.Ab+6)%7)/7),2)},"%y":function(Yt){return(Yt.Cb+1900).toString().substring(2)},"%Y":function(Yt){return Yt.Cb+1900},"%z":function(Yt){var Ar=0<=(Yt=Yt.Yb);return Yt=Math.abs(Yt)/60,(Ar?"+":"-")+("0000"+(Yt/60*100+Yt%60)).slice(-4)},"%Z":function(Yt){return Yt.ac},"%%":function(){return"%"}},zt=zt.replace(/%%/g,"\0\0"),_r)zt.includes(kr)&&(zt=zt.replace(new RegExp(kr,"g"),_r[kr](Gt)));return kr=function(Yt){var Ar=Array(Vt(Yt)+1);return Ut(Yt,Ar,0,Ar.length),Ar}(zt=zt.replace(/\0\0/g,"%")),kr.length>Lt?0:(Ot.set(kr,kt>>>0),kr.length-1)}var Yn={a:function(kt){return Rr(kt+24)+24},m:function(kt){return(kt=new Mr(kt)).Pb()||(kt.Ib(!0),Wr--),kt.Jb(!1),Jr.push(kt),kt.Nb(),kt.Qb()},ia:function(kt){throw Et("Unexpected exception thrown, this is not properly supported - aborting"),Mt=!0,kt},w:function(){xr(0);var kt=Jr.pop();if(kt.Xb()&&!kt.Lb()){var Lt=kt.Wb();Lt&&Cr(Lt)(kt.Db),Ur(kt.Db)}Hr=0},d:function(){var kt=Hr;if(!kt)return Vr=0;var Lt=new Mr(kt);Lt.Fb(kt);var zt=Lt.Eb();if(!zt)return Vr=0,kt;for(var Gt=Array.prototype.slice.call(arguments),Ht=0;Ht<Gt.length;Ht++){var Kt=Gt[Ht];if(Kt===0||Kt===zt)break;if(pn(Kt,zt,Lt.zb+16))return Vr=Kt,kt}return Vr=zt,kt},k:function(){var kt=Hr;if(!kt)return Vr=0;var Lt=new Mr(kt);Lt.Fb(kt);var zt=Lt.Eb();if(!zt)return Vr=0,kt;for(var Gt=Array.prototype.slice.call(arguments),Ht=0;Ht<Gt.length;Ht++){var Kt=Gt[Ht];if(Kt===0||Kt===zt)break;if(pn(Kt,zt,Lt.zb+16))return Vr=Kt,kt}return Vr=zt,kt},g:function(){var kt=Hr;if(!kt)return Vr=0;var Lt=new Mr(kt);Lt.Fb(kt);var zt=Lt.Eb();if(!zt)return Vr=0,kt;for(var Gt=Array.prototype.slice.call(arguments),Ht=0;Ht<Gt.length;Ht++){var Kt=Gt[Ht];if(Kt===0||Kt===zt)break;if(pn(Kt,zt,Lt.zb+16))return Vr=Kt,kt}return Vr=zt,kt},s:Ur,L:function(){var kt=Jr.pop();kt||ur("no exception to throw");var Lt=kt.Db;throw kt.Lb()||(Jr.push(kt),kt.Jb(!0),kt.Ib(!1),Wr++),Hr=Lt,Lt},b:function(kt,Lt,zt){throw new Mr(kt).Rb(Lt,zt),Hr=kt,Wr++,kt},la:function(){return Wr},i:function(kt){throw Hr||(Hr=kt),kt},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){ur("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){ur("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(kt,Lt){kt=new Date(1e3*($t[kt>>>2]+4294967296*Ct[kt+4>>>2])),Ct[Lt>>2>>>0]=kt.getUTCSeconds(),Ct[Lt+4>>2>>>0]=kt.getUTCMinutes(),Ct[Lt+8>>2>>>0]=kt.getUTCHours(),Ct[Lt+12>>2>>>0]=kt.getUTCDate(),Ct[Lt+16>>2>>>0]=kt.getUTCMonth(),Ct[Lt+20>>2>>>0]=kt.getUTCFullYear()-1900,Ct[Lt+24>>2>>>0]=kt.getUTCDay(),Ct[Lt+28>>2>>>0]=(kt.getTime()-Date.UTC(kt.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(kt,Lt){kt=new Date(1e3*($t[kt>>>2]+4294967296*Ct[kt+4>>>2])),Ct[Lt>>2>>>0]=kt.getSeconds(),Ct[Lt+4>>2>>>0]=kt.getMinutes(),Ct[Lt+8>>2>>>0]=kt.getHours(),Ct[Lt+12>>2>>>0]=kt.getDate(),Ct[Lt+16>>2>>>0]=kt.getMonth(),Ct[Lt+20>>2>>>0]=kt.getFullYear()-1900,Ct[Lt+24>>2>>>0]=kt.getDay();var zt=new Date(kt.getFullYear(),0,1);Ct[Lt+28>>2>>>0]=(kt.getTime()-zt.getTime())/864e5|0,Ct[Lt+36>>2>>>0]=-60*kt.getTimezoneOffset();var Gt=new Date(kt.getFullYear(),6,1).getTimezoneOffset();zt=zt.getTimezoneOffset(),Ct[Lt+32>>2>>>0]=0|(Gt!=zt&&kt.getTimezoneOffset()==Math.min(zt,Gt))},Fa:function(kt){var Lt=new Date(Ct[kt+20>>2>>>0]+1900,Ct[kt+16>>2>>>0],Ct[kt+12>>2>>>0],Ct[kt+8>>2>>>0],Ct[kt+4>>2>>>0],Ct[kt>>2>>>0],0),zt=Ct[kt+32>>2>>>0],Gt=Lt.getTimezoneOffset(),Ht=new Date(Lt.getFullYear(),0,1),Kt=new Date(Lt.getFullYear(),6,1).getTimezoneOffset(),er=Ht.getTimezoneOffset(),fr=Math.min(er,Kt);return 0>zt?Ct[kt+32>>2>>>0]=+(Kt!=er&&fr==Gt):0<zt!=(fr==Gt)&&(Kt=Math.max(er,Kt),Lt.setTime(Lt.getTime()+6e4*((0<zt?fr:Kt)-Gt))),Ct[kt+24>>2>>>0]=Lt.getDay(),Ct[kt+28>>2>>>0]=(Lt.getTime()-Ht.getTime())/864e5|0,Ct[kt>>2>>>0]=Lt.getSeconds(),Ct[kt+4>>2>>>0]=Lt.getMinutes(),Ct[kt+8>>2>>>0]=Lt.getHours(),Ct[kt+12>>2>>>0]=Lt.getDate(),Ct[kt+16>>2>>>0]=Lt.getMonth(),Lt.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function kt(Lt,zt,Gt){kt.Vb||(kt.Vb=!0,function(Ht,Kt,er){function fr(Nr){return(Nr=Nr.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Nr[1]:"GMT"}var sr=new Date().getFullYear(),_r=new Date(sr,0,1),kr=new Date(sr,6,1);sr=_r.getTimezoneOffset();var jr=kr.getTimezoneOffset();Ct[Ht>>2>>>0]=60*Math.max(sr,jr),Ct[Kt>>2>>>0]=+(sr!=jr),Ht=fr(_r),Kt=fr(kr),Ht=Cn(Ht),Kt=Cn(Kt),jr<sr?($t[er>>2>>>0]=Ht,$t[er+4>>2>>>0]=Kt):($t[er>>2>>>0]=Kt,$t[er+4>>2>>>0]=Ht)}(Lt,zt,Gt))},B:function(){ur("")},ma:function(){return 4294901760},I:vt?()=>{var kt=process.hrtime();return 1e3*kt[0]+kt[1]/1e6}:()=>performance.now(),xa:function(kt,Lt,zt){At.copyWithin(kt>>>0,Lt>>>0,Lt+zt>>>0)},G:function(kt){var Lt=At.length;if(4294901760<(kt>>>=0))return!1;for(var zt=1;4>=zt;zt*=2){var Gt=Lt*(1+.2/zt);Gt=Math.min(Gt,kt+100663296);var Ht=Math;Gt=Math.max(kt,Gt),Ht=Ht.min.call(Ht,4294901760,Gt+(65536-Gt%65536)%65536);e:{try{Tt.grow(Ht-Rt.byteLength+65535>>>16),Jt();var Kt=1;break e}catch{}Kt=void 0}if(Kt)return!0}return!1},va:function(kt,Lt){var zt=0;return Hn().forEach(function(Gt,Ht){var Kt=Lt+zt;for(Ht=$t[kt+4*Ht>>2>>>0]=Kt,Kt=0;Kt<Gt.length;++Kt)Ot[Ht++>>0>>>0]=Gt.charCodeAt(Kt);Ot[Ht>>0>>>0]=0,zt+=Gt.length+1}),0},wa:function(kt,Lt){var zt=Hn();$t[kt>>2>>>0]=zt.length;var Gt=0;return zt.forEach(function(Ht){Gt+=Ht.length+1}),$t[Lt>>2>>>0]=Gt,0},ba:function(kt){_t||0<Zt||(hn(),Br(cr),Pn(0),yn[1].length&&bn(1,10),yn[2].length&&bn(2,10)),_t||0<Zt||(ot.onExit&&ot.onExit(kt),Mt=!0),mt(kt,new Gr(kt))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(kt,Lt,zt,Gt){for(var Ht=0,Kt=0;Kt<zt;Kt++){var er=$t[Lt>>2>>>0],fr=$t[Lt+4>>2>>>0];Lt+=8;for(var sr=0;sr<fr;sr++)bn(kt,At[er+sr>>>0]);Ht+=fr}return $t[Gt>>2>>>0]=Ht,0},c:function(){return Vr},ja:function kt(Lt,zt){kt.Mb||(kt.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Ht=new Uint8Array(1);return()=>(crypto.getRandomValues(Ht),Ht[0])}if(vt)try{var Kt=et(Object(function(){var er=new Error("Cannot find module 'crypto'");throw er.code="MODULE_NOT_FOUND",er}()));return()=>Kt.randomBytes(1)[0]}catch{}return()=>ur("randomDevice")}());for(var Gt=0;Gt<zt;Gt++)Ot[Lt+Gt>>0>>>0]=kt.Mb();return 0},ea:function(kt,Lt,zt){var Gt=br();try{return Cr(kt)(Lt,zt)}catch(Ht){if(vr(Gt),Ht!==Ht+0)throw Ht;xr(1,0)}},fa:function(kt,Lt,zt){var Gt=br();try{return Cr(kt)(Lt,zt)}catch(Ht){if(vr(Gt),Ht!==Ht+0)throw Ht;xr(1,0)}},J:function(kt){var Lt=br();try{return Cr(kt)()}catch(zt){if(vr(Lt),zt!==zt+0)throw zt;xr(1,0)}},e:function(kt,Lt){var zt=br();try{return Cr(kt)(Lt)}catch(Gt){if(vr(zt),Gt!==Gt+0)throw Gt;xr(1,0)}},N:function(kt,Lt,zt){var Gt=br();try{return Cr(kt)(Lt,zt)}catch(Ht){if(vr(Gt),Ht!==Ht+0)throw Ht;xr(1,0)}},O:function(kt,Lt,zt){var Gt=br();try{return Cr(kt)(Lt,zt)}catch(Ht){if(vr(Gt),Ht!==Ht+0)throw Ht;xr(1,0)}},j:function(kt,Lt,zt){var Gt=br();try{return Cr(kt)(Lt,zt)}catch(Ht){if(vr(Gt),Ht!==Ht+0)throw Ht;xr(1,0)}},o:function(kt,Lt,zt,Gt){var Ht=br();try{return Cr(kt)(Lt,zt,Gt)}catch(Kt){if(vr(Ht),Kt!==Kt+0)throw Kt;xr(1,0)}},p:function(kt,Lt,zt,Gt,Ht){var Kt=br();try{return Cr(kt)(Lt,zt,Gt,Ht)}catch(er){if(vr(Kt),er!==er+0)throw er;xr(1,0)}},M:function(kt,Lt,zt,Gt,Ht,Kt){var er=br();try{return Cr(kt)(Lt,zt,Gt,Ht,Kt)}catch(fr){if(vr(er),fr!==fr+0)throw fr;xr(1,0)}},r:function(kt,Lt,zt,Gt,Ht,Kt){var er=br();try{return Cr(kt)(Lt,zt,Gt,Ht,Kt)}catch(fr){if(vr(er),fr!==fr+0)throw fr;xr(1,0)}},v:function(kt,Lt,zt,Gt,Ht,Kt,er){var fr=br();try{return Cr(kt)(Lt,zt,Gt,Ht,Kt,er)}catch(sr){if(vr(fr),sr!==sr+0)throw sr;xr(1,0)}},K:function(kt,Lt,zt,Gt,Ht,Kt,er,fr){var sr=br();try{return Cr(kt)(Lt,zt,Gt,Ht,Kt,er,fr)}catch(_r){if(vr(sr),_r!==_r+0)throw _r;xr(1,0)}},D:function(kt,Lt,zt,Gt,Ht,Kt,er,fr,sr,_r,kr,jr){var Nr=br();try{return Cr(kt)(Lt,zt,Gt,Ht,Kt,er,fr,sr,_r,kr,jr)}catch(Yt){if(vr(Nr),Yt!==Yt+0)throw Yt;xr(1,0)}},X:function(kt,Lt,zt,Gt,Ht,Kt,er,fr){var sr=br();try{return Nn(kt,Lt,zt,Gt,Ht,Kt,er,fr)}catch(_r){if(vr(sr),_r!==_r+0)throw _r;xr(1,0)}},V:function(kt,Lt,zt,Gt,Ht,Kt,er){var fr=br();try{return On(kt,Lt,zt,Gt,Ht,Kt,er)}catch(sr){if(vr(fr),sr!==sr+0)throw sr;xr(1,0)}},U:function(kt,Lt,zt,Gt,Ht){var Kt=br();try{return Bn(kt,Lt,zt,Gt,Ht)}catch(er){if(vr(Kt),er!==er+0)throw er;xr(1,0)}},Z:function(kt,Lt,zt,Gt){var Ht=br();try{return Fn(kt,Lt,zt,Gt)}catch(Kt){if(vr(Ht),Kt!==Kt+0)throw Kt;xr(1,0)}},W:function(kt){var Lt=br();try{return Rn(kt)}catch(zt){if(vr(Lt),zt!==zt+0)throw zt;xr(1,0)}},Y:function(kt,Lt){var zt=br();try{return Ln(kt,Lt)}catch(Gt){if(vr(zt),Gt!==Gt+0)throw Gt;xr(1,0)}},T:function(kt,Lt,zt){var Gt=br();try{return kn(kt,Lt,zt)}catch(Ht){if(vr(Gt),Ht!==Ht+0)throw Ht;xr(1,0)}},f:function(kt){var Lt=br();try{Cr(kt)()}catch(zt){if(vr(Lt),zt!==zt+0)throw zt;xr(1,0)}},q:function(kt,Lt){var zt=br();try{Cr(kt)(Lt)}catch(Gt){if(vr(zt),Gt!==Gt+0)throw Gt;xr(1,0)}},h:function(kt,Lt,zt){var Gt=br();try{Cr(kt)(Lt,zt)}catch(Ht){if(vr(Gt),Ht!==Ht+0)throw Ht;xr(1,0)}},da:function(kt,Lt,zt,Gt){var Ht=br();try{Cr(kt)(Lt,zt,Gt)}catch(Kt){if(vr(Ht),Kt!==Kt+0)throw Kt;xr(1,0)}},l:function(kt,Lt,zt,Gt){var Ht=br();try{Cr(kt)(Lt,zt,Gt)}catch(Kt){if(vr(Ht),Kt!==Kt+0)throw Kt;xr(1,0)}},t:function(kt,Lt,zt,Gt,Ht){var Kt=br();try{Cr(kt)(Lt,zt,Gt,Ht)}catch(er){if(vr(Kt),er!==er+0)throw er;xr(1,0)}},u:function(kt,Lt,zt,Gt,Ht,Kt){var er=br();try{Cr(kt)(Lt,zt,Gt,Ht,Kt)}catch(fr){if(vr(er),fr!==fr+0)throw fr;xr(1,0)}},x:function(kt,Lt,zt,Gt,Ht,Kt,er){var fr=br();try{Cr(kt)(Lt,zt,Gt,Ht,Kt,er)}catch(sr){if(vr(fr),sr!==sr+0)throw sr;xr(1,0)}},z:function(kt,Lt,zt,Gt,Ht,Kt,er,fr){var sr=br();try{Cr(kt)(Lt,zt,Gt,Ht,Kt,er,fr)}catch(_r){if(vr(sr),_r!==_r+0)throw _r;xr(1,0)}},ga:function(kt,Lt,zt,Gt,Ht,Kt,er,fr,sr){var _r=br();try{Cr(kt)(Lt,zt,Gt,Ht,Kt,er,fr,sr)}catch(kr){if(vr(_r),kr!==kr+0)throw kr;xr(1,0)}},A:function(kt,Lt,zt,Gt,Ht,Kt,er,fr,sr,_r,kr){var jr=br();try{Cr(kt)(Lt,zt,Gt,Ht,Kt,er,fr,sr,_r,kr)}catch(Nr){if(vr(jr),Nr!==Nr+0)throw Nr;xr(1,0)}},C:function(kt,Lt,zt,Gt,Ht,Kt,er,fr,sr,_r,kr,jr,Nr,Yt,Ar,Dr){var Zr=br();try{Cr(kt)(Lt,zt,Gt,Ht,Kt,er,fr,sr,_r,kr,jr,Nr,Yt,Ar,Dr)}catch(sn){if(vr(Zr),sn!==sn+0)throw sn;xr(1,0)}},aa:function(kt,Lt,zt,Gt,Ht,Kt,er,fr){var sr=br();try{Mn(kt,Lt,zt,Gt,Ht,Kt,er,fr)}catch(_r){if(vr(sr),_r!==_r+0)throw _r;xr(1,0)}},_:function(kt,Lt,zt,Gt,Ht,Kt,er,fr,sr,_r,kr,jr){var Nr=br();try{$n(kt,Lt,zt,Gt,Ht,Kt,er,fr,sr,_r,kr,jr)}catch(Yt){if(vr(Nr),Yt!==Yt+0)throw Yt;xr(1,0)}},$:function(kt,Lt,zt,Gt,Ht,Kt){var er=br();try{Dn(kt,Lt,zt,Gt,Ht,Kt)}catch(fr){if(vr(er),fr!==fr+0)throw fr;xr(1,0)}},n:function(kt){return kt},F:function(kt){Vr=kt},ha:Xn,y:function(kt,Lt,zt,Gt){return Xn(kt,Lt,zt,Gt)}};(function(){function kt(Ht){ot.asm=Ht.exports,Tt=ot.asm.Ka,Jt(),lr=ot.asm.ib,ir.unshift(ot.asm.La),ar--,ot.monitorRunDependencies&&ot.monitorRunDependencies(ar),ar==0&&pr&&(Ht=pr,pr=null,Ht())}function Lt(Ht){kt(Ht.instance)}function zt(Ht){return function(){if(!wt&&(yt||bt)){if(typeof fetch=="function"&&!rr.startsWith("file://"))return fetch(rr,{credentials:"same-origin"}).then(function(Kt){if(!Kt.ok)throw"failed to load wasm binary file at '"+rr+"'";return Kt.arrayBuffer()}).catch(function(){return $r()});if(dt)return new Promise(function(Kt,er){dt(rr,function(fr){Kt(new Uint8Array(fr))},er)})}return Promise.resolve().then(function(){return $r()})}().then(function(Kt){return WebAssembly.instantiate(Kt,Gt)}).then(function(Kt){return Kt}).then(Ht,function(Kt){Et("failed to asynchronously prepare wasm: "+Kt),ur(Kt)})}var Gt={a:Yn};if(ar++,ot.monitorRunDependencies&&ot.monitorRunDependencies(ar),ot.instantiateWasm)try{return ot.instantiateWasm(Gt,kt)}catch(Ht){return Et("Module.instantiateWasm callback failed with error: "+Ht),!1}(wt||typeof WebAssembly.instantiateStreaming!="function"||mr()||rr.startsWith("file://")||vt||typeof fetch!="function"?zt(Lt):fetch(rr,{credentials:"same-origin"}).then(function(Ht){return WebAssembly.instantiateStreaming(Ht,Gt).then(Lt,function(Kt){return Et("wasm streaming compile failed: "+Kt),Et("falling back to ArrayBuffer instantiation"),zt(Lt)})})).catch(lt)})(),ot.___wasm_call_ctors=function(){return(ot.___wasm_call_ctors=ot.asm.La).apply(null,arguments)},ot._OrtInit=function(){return(ot._OrtInit=ot.asm.Ma).apply(null,arguments)},ot._OrtCreateSessionOptions=function(){return(ot._OrtCreateSessionOptions=ot.asm.Na).apply(null,arguments)},ot._OrtAppendExecutionProvider=function(){return(ot._OrtAppendExecutionProvider=ot.asm.Oa).apply(null,arguments)},ot._OrtAddSessionConfigEntry=function(){return(ot._OrtAddSessionConfigEntry=ot.asm.Pa).apply(null,arguments)},ot._OrtReleaseSessionOptions=function(){return(ot._OrtReleaseSessionOptions=ot.asm.Qa).apply(null,arguments)},ot._OrtCreateSession=function(){return(ot._OrtCreateSession=ot.asm.Ra).apply(null,arguments)},ot._OrtReleaseSession=function(){return(ot._OrtReleaseSession=ot.asm.Sa).apply(null,arguments)},ot._OrtGetInputCount=function(){return(ot._OrtGetInputCount=ot.asm.Ta).apply(null,arguments)},ot._OrtGetOutputCount=function(){return(ot._OrtGetOutputCount=ot.asm.Ua).apply(null,arguments)},ot._OrtGetInputName=function(){return(ot._OrtGetInputName=ot.asm.Va).apply(null,arguments)},ot._OrtGetOutputName=function(){return(ot._OrtGetOutputName=ot.asm.Wa).apply(null,arguments)},ot._OrtFree=function(){return(ot._OrtFree=ot.asm.Xa).apply(null,arguments)},ot._OrtCreateTensor=function(){return(ot._OrtCreateTensor=ot.asm.Ya).apply(null,arguments)},ot._OrtGetTensorData=function(){return(ot._OrtGetTensorData=ot.asm.Za).apply(null,arguments)},ot._OrtReleaseTensor=function(){return(ot._OrtReleaseTensor=ot.asm._a).apply(null,arguments)},ot._OrtCreateRunOptions=function(){return(ot._OrtCreateRunOptions=ot.asm.$a).apply(null,arguments)},ot._OrtAddRunConfigEntry=function(){return(ot._OrtAddRunConfigEntry=ot.asm.ab).apply(null,arguments)},ot._OrtReleaseRunOptions=function(){return(ot._OrtReleaseRunOptions=ot.asm.bb).apply(null,arguments)},ot._OrtRun=function(){return(ot._OrtRun=ot.asm.cb).apply(null,arguments)},ot._OrtEndProfiling=function(){return(ot._OrtEndProfiling=ot.asm.db).apply(null,arguments)};var on,Rr=ot._malloc=function(){return(Rr=ot._malloc=ot.asm.eb).apply(null,arguments)},dn=ot._free=function(){return(dn=ot._free=ot.asm.fb).apply(null,arguments)},Pn=ot._fflush=function(){return(Pn=ot._fflush=ot.asm.gb).apply(null,arguments)},hn=ot.___funcs_on_exit=function(){return(hn=ot.___funcs_on_exit=ot.asm.hb).apply(null,arguments)},xr=ot._setThrew=function(){return(xr=ot._setThrew=ot.asm.jb).apply(null,arguments)},br=ot.stackSave=function(){return(br=ot.stackSave=ot.asm.kb).apply(null,arguments)},vr=ot.stackRestore=function(){return(vr=ot.stackRestore=ot.asm.lb).apply(null,arguments)},An=ot.stackAlloc=function(){return(An=ot.stackAlloc=ot.asm.mb).apply(null,arguments)},pn=ot.___cxa_can_catch=function(){return(pn=ot.___cxa_can_catch=ot.asm.nb).apply(null,arguments)},In=ot.___cxa_is_pointer_type=function(){return(In=ot.___cxa_is_pointer_type=ot.asm.ob).apply(null,arguments)},Rn=ot.dynCall_j=function(){return(Rn=ot.dynCall_j=ot.asm.pb).apply(null,arguments)},On=ot.dynCall_iiiiij=function(){return(On=ot.dynCall_iiiiij=ot.asm.qb).apply(null,arguments)},kn=ot.dynCall_jii=function(){return(kn=ot.dynCall_jii=ot.asm.rb).apply(null,arguments)},Mn=ot.dynCall_viiiiij=function(){return(Mn=ot.dynCall_viiiiij=ot.asm.sb).apply(null,arguments)},Dn=ot.dynCall_vjji=function(){return(Dn=ot.dynCall_vjji=ot.asm.tb).apply(null,arguments)},$n=ot.dynCall_viiijjjii=function(){return($n=ot.dynCall_viiijjjii=ot.asm.ub).apply(null,arguments)},Fn=ot.dynCall_iij=function(){return(Fn=ot.dynCall_iij=ot.asm.vb).apply(null,arguments)},Ln=ot.dynCall_ji=function(){return(Ln=ot.dynCall_ji=ot.asm.wb).apply(null,arguments)},Nn=ot.dynCall_iiiiiij=function(){return(Nn=ot.dynCall_iiiiiij=ot.asm.xb).apply(null,arguments)},Bn=ot.dynCall_iiij=function(){return(Bn=ot.dynCall_iiij=ot.asm.yb).apply(null,arguments)};function jn(){function kt(){if(!on&&(on=!0,ot.calledRun=!0,!Mt)){if(Br(ir),at(ot),ot.onRuntimeInitialized&&ot.onRuntimeInitialized(),ot.postRun)for(typeof ot.postRun=="function"&&(ot.postRun=[ot.postRun]);ot.postRun.length;){var Lt=ot.postRun.shift();hr.unshift(Lt)}Br(hr)}}if(!(0<ar)){if(ot.preRun)for(typeof ot.preRun=="function"&&(ot.preRun=[ot.preRun]);ot.preRun.length;)Qt();Br(nr),0<ar||(ot.setStatus?(ot.setStatus("Running..."),setTimeout(function(){setTimeout(function(){ot.setStatus("")},1),kt()},1)):kt())}}if(ot.UTF8ToString=Bt,ot.stringToUTF8=function(kt,Lt,zt){return Ut(kt,At,Lt,zt)},ot.lengthBytesUTF8=Vt,ot.stackSave=br,ot.stackRestore=vr,ot.stackAlloc=An,pr=function kt(){on||jn(),on||(pr=kt)},ot.preInit)for(typeof ot.preInit=="function"&&(ot.preInit=[ot.preInit]);0<ot.preInit.length;)ot.preInit.pop()();return jn(),nt.ready});_e.exports=rt},4537:_e=>{_e.exports=function(_,et){for(var tt=new Array(arguments.length-1),rt=0,nt=2,ot=!0;nt<arguments.length;)tt[rt++]=arguments[nt++];return new Promise(function(at,lt){tt[rt]=function(ct){if(ot)if(ot=!1,ct)lt(ct);else{for(var dt=new Array(arguments.length-1),st=0;st<dt.length;)dt[st++]=arguments[st];at.apply(null,dt)}};try{_.apply(et||null,tt)}catch(ct){ot&&(ot=!1,lt(ct))}})}},7419:(_e,_)=>{var et=_;et.length=function(at){var lt=at.length;if(!lt)return 0;for(var ct=0;--lt%4>1&&at.charAt(lt)==="=";)++ct;return Math.ceil(3*at.length)/4-ct};for(var tt=new Array(64),rt=new Array(123),nt=0;nt<64;)rt[tt[nt]=nt<26?nt+65:nt<52?nt+71:nt<62?nt-4:nt-59|43]=nt++;et.encode=function(at,lt,ct){for(var dt,st=null,it=[],ut=0,ht=0;lt<ct;){var ft=at[lt++];switch(ht){case 0:it[ut++]=tt[ft>>2],dt=(3&ft)<<4,ht=1;break;case 1:it[ut++]=tt[dt|ft>>4],dt=(15&ft)<<2,ht=2;break;case 2:it[ut++]=tt[dt|ft>>6],it[ut++]=tt[63&ft],ht=0}ut>8191&&((st||(st=[])).push(String.fromCharCode.apply(String,it)),ut=0)}return ht&&(it[ut++]=tt[dt],it[ut++]=61,ht===1&&(it[ut++]=61)),st?(ut&&st.push(String.fromCharCode.apply(String,it.slice(0,ut))),st.join("")):String.fromCharCode.apply(String,it.slice(0,ut))};var ot="invalid encoding";et.decode=function(at,lt,ct){for(var dt,st=ct,it=0,ut=0;ut<at.length;){var ht=at.charCodeAt(ut++);if(ht===61&&it>1)break;if((ht=rt[ht])===void 0)throw Error(ot);switch(it){case 0:dt=ht,it=1;break;case 1:lt[ct++]=dt<<2|(48&ht)>>4,dt=ht,it=2;break;case 2:lt[ct++]=(15&dt)<<4|(60&ht)>>2,dt=ht,it=3;break;case 3:lt[ct++]=(3&dt)<<6|ht,it=0}}if(it===1)throw Error(ot);return ct-st},et.test=function(at){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(at)}},9211:_e=>{function _(){this._listeners={}}_e.exports=_,_.prototype.on=function(et,tt,rt){return(this._listeners[et]||(this._listeners[et]=[])).push({fn:tt,ctx:rt||this}),this},_.prototype.off=function(et,tt){if(et===void 0)this._listeners={};else if(tt===void 0)this._listeners[et]=[];else for(var rt=this._listeners[et],nt=0;nt<rt.length;)rt[nt].fn===tt?rt.splice(nt,1):++nt;return this},_.prototype.emit=function(et){var tt=this._listeners[et];if(tt){for(var rt=[],nt=1;nt<arguments.length;)rt.push(arguments[nt++]);for(nt=0;nt<tt.length;)tt[nt].fn.apply(tt[nt++].ctx,rt)}return this}},945:_e=>{function _(ot){return typeof Float32Array<"u"?function(){var at=new Float32Array([-0]),lt=new Uint8Array(at.buffer),ct=lt[3]===128;function dt(ht,ft,gt){at[0]=ht,ft[gt]=lt[0],ft[gt+1]=lt[1],ft[gt+2]=lt[2],ft[gt+3]=lt[3]}function st(ht,ft,gt){at[0]=ht,ft[gt]=lt[3],ft[gt+1]=lt[2],ft[gt+2]=lt[1],ft[gt+3]=lt[0]}function it(ht,ft){return lt[0]=ht[ft],lt[1]=ht[ft+1],lt[2]=ht[ft+2],lt[3]=ht[ft+3],at[0]}function ut(ht,ft){return lt[3]=ht[ft],lt[2]=ht[ft+1],lt[1]=ht[ft+2],lt[0]=ht[ft+3],at[0]}ot.writeFloatLE=ct?dt:st,ot.writeFloatBE=ct?st:dt,ot.readFloatLE=ct?it:ut,ot.readFloatBE=ct?ut:it}():function(){function at(ct,dt,st,it){var ut=dt<0?1:0;if(ut&&(dt=-dt),dt===0)ct(1/dt>0?0:2147483648,st,it);else if(isNaN(dt))ct(2143289344,st,it);else if(dt>34028234663852886e22)ct((ut<<31|2139095040)>>>0,st,it);else if(dt<11754943508222875e-54)ct((ut<<31|Math.round(dt/1401298464324817e-60))>>>0,st,it);else{var ht=Math.floor(Math.log(dt)/Math.LN2);ct((ut<<31|ht+127<<23|8388607&Math.round(dt*Math.pow(2,-ht)*8388608))>>>0,st,it)}}function lt(ct,dt,st){var it=ct(dt,st),ut=2*(it>>31)+1,ht=it>>>23&255,ft=8388607&it;return ht===255?ft?NaN:ut*(1/0):ht===0?1401298464324817e-60*ut*ft:ut*Math.pow(2,ht-150)*(ft+8388608)}ot.writeFloatLE=at.bind(null,et),ot.writeFloatBE=at.bind(null,tt),ot.readFloatLE=lt.bind(null,rt),ot.readFloatBE=lt.bind(null,nt)}(),typeof Float64Array<"u"?function(){var at=new Float64Array([-0]),lt=new Uint8Array(at.buffer),ct=lt[7]===128;function dt(ht,ft,gt){at[0]=ht,ft[gt]=lt[0],ft[gt+1]=lt[1],ft[gt+2]=lt[2],ft[gt+3]=lt[3],ft[gt+4]=lt[4],ft[gt+5]=lt[5],ft[gt+6]=lt[6],ft[gt+7]=lt[7]}function st(ht,ft,gt){at[0]=ht,ft[gt]=lt[7],ft[gt+1]=lt[6],ft[gt+2]=lt[5],ft[gt+3]=lt[4],ft[gt+4]=lt[3],ft[gt+5]=lt[2],ft[gt+6]=lt[1],ft[gt+7]=lt[0]}function it(ht,ft){return lt[0]=ht[ft],lt[1]=ht[ft+1],lt[2]=ht[ft+2],lt[3]=ht[ft+3],lt[4]=ht[ft+4],lt[5]=ht[ft+5],lt[6]=ht[ft+6],lt[7]=ht[ft+7],at[0]}function ut(ht,ft){return lt[7]=ht[ft],lt[6]=ht[ft+1],lt[5]=ht[ft+2],lt[4]=ht[ft+3],lt[3]=ht[ft+4],lt[2]=ht[ft+5],lt[1]=ht[ft+6],lt[0]=ht[ft+7],at[0]}ot.writeDoubleLE=ct?dt:st,ot.writeDoubleBE=ct?st:dt,ot.readDoubleLE=ct?it:ut,ot.readDoubleBE=ct?ut:it}():function(){function at(ct,dt,st,it,ut,ht){var ft=it<0?1:0;if(ft&&(it=-it),it===0)ct(0,ut,ht+dt),ct(1/it>0?0:2147483648,ut,ht+st);else if(isNaN(it))ct(0,ut,ht+dt),ct(2146959360,ut,ht+st);else if(it>17976931348623157e292)ct(0,ut,ht+dt),ct((ft<<31|2146435072)>>>0,ut,ht+st);else{var gt;if(it<22250738585072014e-324)ct((gt=it/5e-324)>>>0,ut,ht+dt),ct((ft<<31|gt/4294967296)>>>0,ut,ht+st);else{var mt=Math.floor(Math.log(it)/Math.LN2);mt===1024&&(mt=1023),ct(4503599627370496*(gt=it*Math.pow(2,-mt))>>>0,ut,ht+dt),ct((ft<<31|mt+1023<<20|1048576*gt&1048575)>>>0,ut,ht+st)}}}function lt(ct,dt,st,it,ut){var ht=ct(it,ut+dt),ft=ct(it,ut+st),gt=2*(ft>>31)+1,mt=ft>>>20&2047,yt=4294967296*(1048575&ft)+ht;return mt===2047?yt?NaN:gt*(1/0):mt===0?5e-324*gt*yt:gt*Math.pow(2,mt-1075)*(yt+4503599627370496)}ot.writeDoubleLE=at.bind(null,et,0,4),ot.writeDoubleBE=at.bind(null,tt,4,0),ot.readDoubleLE=lt.bind(null,rt,0,4),ot.readDoubleBE=lt.bind(null,nt,4,0)}(),ot}function et(ot,at,lt){at[lt]=255&ot,at[lt+1]=ot>>>8&255,at[lt+2]=ot>>>16&255,at[lt+3]=ot>>>24}function tt(ot,at,lt){at[lt]=ot>>>24,at[lt+1]=ot>>>16&255,at[lt+2]=ot>>>8&255,at[lt+3]=255&ot}function rt(ot,at){return(ot[at]|ot[at+1]<<8|ot[at+2]<<16|ot[at+3]<<24)>>>0}function nt(ot,at){return(ot[at]<<24|ot[at+1]<<16|ot[at+2]<<8|ot[at+3])>>>0}_e.exports=_(_)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(_e){}return null}module.exports=inquire},6662:_e=>{_e.exports=function(_,et,tt){var rt=tt||8192,nt=rt>>>1,ot=null,at=rt;return function(lt){if(lt<1||lt>nt)return _(lt);at+lt>rt&&(ot=_(rt),at=0);var ct=et.call(ot,at,at+=lt);return 7&at&&(at=1+(7|at)),ct}}},4997:(_e,_)=>{var et=_;et.length=function(tt){for(var rt=0,nt=0,ot=0;ot<tt.length;++ot)(nt=tt.charCodeAt(ot))<128?rt+=1:nt<2048?rt+=2:(64512&nt)==55296&&(64512&tt.charCodeAt(ot+1))==56320?(++ot,rt+=4):rt+=3;return rt},et.read=function(tt,rt,nt){if(nt-rt<1)return"";for(var ot,at=null,lt=[],ct=0;rt<nt;)(ot=tt[rt++])<128?lt[ct++]=ot:ot>191&&ot<224?lt[ct++]=(31&ot)<<6|63&tt[rt++]:ot>239&&ot<365?(ot=((7&ot)<<18|(63&tt[rt++])<<12|(63&tt[rt++])<<6|63&tt[rt++])-65536,lt[ct++]=55296+(ot>>10),lt[ct++]=56320+(1023&ot)):lt[ct++]=(15&ot)<<12|(63&tt[rt++])<<6|63&tt[rt++],ct>8191&&((at||(at=[])).push(String.fromCharCode.apply(String,lt)),ct=0);return at?(ct&&at.push(String.fromCharCode.apply(String,lt.slice(0,ct))),at.join("")):String.fromCharCode.apply(String,lt.slice(0,ct))},et.write=function(tt,rt,nt){for(var ot,at,lt=nt,ct=0;ct<tt.length;++ct)(ot=tt.charCodeAt(ct))<128?rt[nt++]=ot:ot<2048?(rt[nt++]=ot>>6|192,rt[nt++]=63&ot|128):(64512&ot)==55296&&(64512&(at=tt.charCodeAt(ct+1)))==56320?(ot=65536+((1023&ot)<<10)+(1023&at),++ct,rt[nt++]=ot>>18|240,rt[nt++]=ot>>12&63|128,rt[nt++]=ot>>6&63|128,rt[nt++]=63&ot|128):(rt[nt++]=ot>>12|224,rt[nt++]=ot>>6&63|128,rt[nt++]=63&ot|128);return nt-lt}},3442:(_e,_)=>{_.__esModule=!0;var et=function(){function tt(rt){if(!rt)throw new TypeError("Invalid argument; `value` has no value.");this.value=tt.EMPTY,rt&&tt.isGuid(rt)&&(this.value=rt)}return tt.isGuid=function(rt){var nt=rt.toString();return rt&&(rt instanceof tt||tt.validator.test(nt))},tt.create=function(){return new tt([tt.gen(2),tt.gen(1),tt.gen(1),tt.gen(1),tt.gen(3)].join("-"))},tt.createEmpty=function(){return new tt("emptyguid")},tt.parse=function(rt){return new tt(rt)},tt.raw=function(){return[tt.gen(2),tt.gen(1),tt.gen(1),tt.gen(1),tt.gen(3)].join("-")},tt.gen=function(rt){for(var nt="",ot=0;ot<rt;ot++)nt+=(65536*(1+Math.random())|0).toString(16).substring(1);return nt},tt.prototype.equals=function(rt){return tt.isGuid(rt)&&this.value===rt.toString()},tt.prototype.isEmpty=function(){return this.value===tt.EMPTY},tt.prototype.toString=function(){return this.value},tt.prototype.toJSON=function(){return{value:this.value}},tt.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),tt.EMPTY="00000000-0000-0000-0000-000000000000",tt}();_.Guid=et},3720:_e=>{_e.exports=et;var _=null;try{_=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function et(_t,Tt,Rt){this.low=0|_t,this.high=0|Tt,this.unsigned=!!Rt}function tt(_t){return(_t&&_t.__isLong__)===!0}et.prototype.__isLong__,Object.defineProperty(et.prototype,"__isLong__",{value:!0}),et.isLong=tt;var rt={},nt={};function ot(_t,Tt){var Rt,Ot,At;return Tt?(At=0<=(_t>>>=0)&&_t<256)&&(Ot=nt[_t])?Ot:(Rt=lt(_t,(0|_t)<0?-1:0,!0),At&&(nt[_t]=Rt),Rt):(At=-128<=(_t|=0)&&_t<128)&&(Ot=rt[_t])?Ot:(Rt=lt(_t,_t<0?-1:0,!1),At&&(rt[_t]=Rt),Rt)}function at(_t,Tt){if(isNaN(_t))return Tt?mt:gt;if(Tt){if(_t<0)return mt;if(_t>=ut)return wt}else{if(_t<=-ht)return St;if(_t+1>=ht)return xt}return _t<0?at(-_t,Tt).neg():lt(_t%it|0,_t/it|0,Tt)}function lt(_t,Tt,Rt){return new et(_t,Tt,Rt)}et.fromInt=ot,et.fromNumber=at,et.fromBits=lt;var ct=Math.pow;function dt(_t,Tt,Rt){if(_t.length===0)throw Error("empty string");if(_t==="NaN"||_t==="Infinity"||_t==="+Infinity"||_t==="-Infinity")return gt;if(typeof Tt=="number"?(Rt=Tt,Tt=!1):Tt=!!Tt,(Rt=Rt||10)<2||36<Rt)throw RangeError("radix");var Ot;if((Ot=_t.indexOf("-"))>0)throw Error("interior hyphen");if(Ot===0)return dt(_t.substring(1),Tt,Rt).neg();for(var At=at(ct(Rt,8)),Ct=gt,$t=0;$t<_t.length;$t+=8){var Mt=Math.min(8,_t.length-$t),Dt=parseInt(_t.substring($t,$t+Mt),Rt);if(Mt<8){var Nt=at(ct(Rt,Mt));Ct=Ct.mul(Nt).add(at(Dt))}else Ct=(Ct=Ct.mul(At)).add(at(Dt))}return Ct.unsigned=Tt,Ct}function st(_t,Tt){return typeof _t=="number"?at(_t,Tt):typeof _t=="string"?dt(_t,Tt):lt(_t.low,_t.high,typeof Tt=="boolean"?Tt:_t.unsigned)}et.fromString=dt,et.fromValue=st;var it=4294967296,ut=it*it,ht=ut/2,ft=ot(1<<24),gt=ot(0);et.ZERO=gt;var mt=ot(0,!0);et.UZERO=mt;var yt=ot(1);et.ONE=yt;var bt=ot(1,!0);et.UONE=bt;var vt=ot(-1);et.NEG_ONE=vt;var xt=lt(-1,2147483647,!1);et.MAX_VALUE=xt;var wt=lt(-1,-1,!0);et.MAX_UNSIGNED_VALUE=wt;var St=lt(0,-2147483648,!1);et.MIN_VALUE=St;var Et=et.prototype;Et.toInt=function(){return this.unsigned?this.low>>>0:this.low},Et.toNumber=function(){return this.unsigned?(this.high>>>0)*it+(this.low>>>0):this.high*it+(this.low>>>0)},Et.toString=function(_t){if((_t=_t||10)<2||36<_t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(St)){var Tt=at(_t),Rt=this.div(Tt),Ot=Rt.mul(Tt).sub(this);return Rt.toString(_t)+Ot.toInt().toString(_t)}return"-"+this.neg().toString(_t)}for(var At=at(ct(_t,6),this.unsigned),Ct=this,$t="";;){var Mt=Ct.div(At),Dt=(Ct.sub(Mt.mul(At)).toInt()>>>0).toString(_t);if((Ct=Mt).isZero())return Dt+$t;for(;Dt.length<6;)Dt="0"+Dt;$t=""+Dt+$t}},Et.getHighBits=function(){return this.high},Et.getHighBitsUnsigned=function(){return this.high>>>0},Et.getLowBits=function(){return this.low},Et.getLowBitsUnsigned=function(){return this.low>>>0},Et.getNumBitsAbs=function(){if(this.isNegative())return this.eq(St)?64:this.neg().getNumBitsAbs();for(var _t=this.high!=0?this.high:this.low,Tt=31;Tt>0&&!(_t&1<<Tt);Tt--);return this.high!=0?Tt+33:Tt+1},Et.isZero=function(){return this.high===0&&this.low===0},Et.eqz=Et.isZero,Et.isNegative=function(){return!this.unsigned&&this.high<0},Et.isPositive=function(){return this.unsigned||this.high>=0},Et.isOdd=function(){return(1&this.low)==1},Et.isEven=function(){return(1&this.low)==0},Et.equals=function(_t){return tt(_t)||(_t=st(_t)),(this.unsigned===_t.unsigned||this.high>>>31!=1||_t.high>>>31!=1)&&this.high===_t.high&&this.low===_t.low},Et.eq=Et.equals,Et.notEquals=function(_t){return!this.eq(_t)},Et.neq=Et.notEquals,Et.ne=Et.notEquals,Et.lessThan=function(_t){return this.comp(_t)<0},Et.lt=Et.lessThan,Et.lessThanOrEqual=function(_t){return this.comp(_t)<=0},Et.lte=Et.lessThanOrEqual,Et.le=Et.lessThanOrEqual,Et.greaterThan=function(_t){return this.comp(_t)>0},Et.gt=Et.greaterThan,Et.greaterThanOrEqual=function(_t){return this.comp(_t)>=0},Et.gte=Et.greaterThanOrEqual,Et.ge=Et.greaterThanOrEqual,Et.compare=function(_t){if(tt(_t)||(_t=st(_t)),this.eq(_t))return 0;var Tt=this.isNegative(),Rt=_t.isNegative();return Tt&&!Rt?-1:!Tt&&Rt?1:this.unsigned?_t.high>>>0>this.high>>>0||_t.high===this.high&&_t.low>>>0>this.low>>>0?-1:1:this.sub(_t).isNegative()?-1:1},Et.comp=Et.compare,Et.negate=function(){return!this.unsigned&&this.eq(St)?St:this.not().add(yt)},Et.neg=Et.negate,Et.add=function(_t){tt(_t)||(_t=st(_t));var Tt=this.high>>>16,Rt=65535&this.high,Ot=this.low>>>16,At=65535&this.low,Ct=_t.high>>>16,$t=65535&_t.high,Mt=_t.low>>>16,Dt=0,Nt=0,Bt=0,Ut=0;return Bt+=(Ut+=At+(65535&_t.low))>>>16,Nt+=(Bt+=Ot+Mt)>>>16,Dt+=(Nt+=Rt+$t)>>>16,Dt+=Tt+Ct,lt((Bt&=65535)<<16|(Ut&=65535),(Dt&=65535)<<16|(Nt&=65535),this.unsigned)},Et.subtract=function(_t){return tt(_t)||(_t=st(_t)),this.add(_t.neg())},Et.sub=Et.subtract,Et.multiply=function(_t){if(this.isZero())return gt;if(tt(_t)||(_t=st(_t)),_)return lt(_.mul(this.low,this.high,_t.low,_t.high),_.get_high(),this.unsigned);if(_t.isZero())return gt;if(this.eq(St))return _t.isOdd()?St:gt;if(_t.eq(St))return this.isOdd()?St:gt;if(this.isNegative())return _t.isNegative()?this.neg().mul(_t.neg()):this.neg().mul(_t).neg();if(_t.isNegative())return this.mul(_t.neg()).neg();if(this.lt(ft)&&_t.lt(ft))return at(this.toNumber()*_t.toNumber(),this.unsigned);var Tt=this.high>>>16,Rt=65535&this.high,Ot=this.low>>>16,At=65535&this.low,Ct=_t.high>>>16,$t=65535&_t.high,Mt=_t.low>>>16,Dt=65535&_t.low,Nt=0,Bt=0,Ut=0,Vt=0;return Ut+=(Vt+=At*Dt)>>>16,Bt+=(Ut+=Ot*Dt)>>>16,Ut&=65535,Bt+=(Ut+=At*Mt)>>>16,Nt+=(Bt+=Rt*Dt)>>>16,Bt&=65535,Nt+=(Bt+=Ot*Mt)>>>16,Bt&=65535,Nt+=(Bt+=At*$t)>>>16,Nt+=Tt*Dt+Rt*Mt+Ot*$t+At*Ct,lt((Ut&=65535)<<16|(Vt&=65535),(Nt&=65535)<<16|(Bt&=65535),this.unsigned)},Et.mul=Et.multiply,Et.divide=function(_t){if(tt(_t)||(_t=st(_t)),_t.isZero())throw Error("division by zero");var Tt,Rt,Ot;if(_)return this.unsigned||this.high!==-2147483648||_t.low!==-1||_t.high!==-1?lt((this.unsigned?_.div_u:_.div_s)(this.low,this.high,_t.low,_t.high),_.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?mt:gt;if(this.unsigned){if(_t.unsigned||(_t=_t.toUnsigned()),_t.gt(this))return mt;if(_t.gt(this.shru(1)))return bt;Ot=mt}else{if(this.eq(St))return _t.eq(yt)||_t.eq(vt)?St:_t.eq(St)?yt:(Tt=this.shr(1).div(_t).shl(1)).eq(gt)?_t.isNegative()?yt:vt:(Rt=this.sub(_t.mul(Tt)),Ot=Tt.add(Rt.div(_t)));if(_t.eq(St))return this.unsigned?mt:gt;if(this.isNegative())return _t.isNegative()?this.neg().div(_t.neg()):this.neg().div(_t).neg();if(_t.isNegative())return this.div(_t.neg()).neg();Ot=gt}for(Rt=this;Rt.gte(_t);){Tt=Math.max(1,Math.floor(Rt.toNumber()/_t.toNumber()));for(var At=Math.ceil(Math.log(Tt)/Math.LN2),Ct=At<=48?1:ct(2,At-48),$t=at(Tt),Mt=$t.mul(_t);Mt.isNegative()||Mt.gt(Rt);)Mt=($t=at(Tt-=Ct,this.unsigned)).mul(_t);$t.isZero()&&($t=yt),Ot=Ot.add($t),Rt=Rt.sub(Mt)}return Ot},Et.div=Et.divide,Et.modulo=function(_t){return tt(_t)||(_t=st(_t)),_?lt((this.unsigned?_.rem_u:_.rem_s)(this.low,this.high,_t.low,_t.high),_.get_high(),this.unsigned):this.sub(this.div(_t).mul(_t))},Et.mod=Et.modulo,Et.rem=Et.modulo,Et.not=function(){return lt(~this.low,~this.high,this.unsigned)},Et.and=function(_t){return tt(_t)||(_t=st(_t)),lt(this.low&_t.low,this.high&_t.high,this.unsigned)},Et.or=function(_t){return tt(_t)||(_t=st(_t)),lt(this.low|_t.low,this.high|_t.high,this.unsigned)},Et.xor=function(_t){return tt(_t)||(_t=st(_t)),lt(this.low^_t.low,this.high^_t.high,this.unsigned)},Et.shiftLeft=function(_t){return tt(_t)&&(_t=_t.toInt()),(_t&=63)==0?this:_t<32?lt(this.low<<_t,this.high<<_t|this.low>>>32-_t,this.unsigned):lt(0,this.low<<_t-32,this.unsigned)},Et.shl=Et.shiftLeft,Et.shiftRight=function(_t){return tt(_t)&&(_t=_t.toInt()),(_t&=63)==0?this:_t<32?lt(this.low>>>_t|this.high<<32-_t,this.high>>_t,this.unsigned):lt(this.high>>_t-32,this.high>=0?0:-1,this.unsigned)},Et.shr=Et.shiftRight,Et.shiftRightUnsigned=function(_t){if(tt(_t)&&(_t=_t.toInt()),(_t&=63)==0)return this;var Tt=this.high;return _t<32?lt(this.low>>>_t|Tt<<32-_t,Tt>>>_t,this.unsigned):lt(_t===32?Tt:Tt>>>_t-32,0,this.unsigned)},Et.shru=Et.shiftRightUnsigned,Et.shr_u=Et.shiftRightUnsigned,Et.toSigned=function(){return this.unsigned?lt(this.low,this.high,!1):this},Et.toUnsigned=function(){return this.unsigned?this:lt(this.low,this.high,!0)},Et.toBytes=function(_t){return _t?this.toBytesLE():this.toBytesBE()},Et.toBytesLE=function(){var _t=this.high,Tt=this.low;return[255&Tt,Tt>>>8&255,Tt>>>16&255,Tt>>>24,255&_t,_t>>>8&255,_t>>>16&255,_t>>>24]},Et.toBytesBE=function(){var _t=this.high,Tt=this.low;return[_t>>>24,_t>>>16&255,_t>>>8&255,255&_t,Tt>>>24,Tt>>>16&255,Tt>>>8&255,255&Tt]},et.fromBytes=function(_t,Tt,Rt){return Rt?et.fromBytesLE(_t,Tt):et.fromBytesBE(_t,Tt)},et.fromBytesLE=function(_t,Tt){return new et(_t[0]|_t[1]<<8|_t[2]<<16|_t[3]<<24,_t[4]|_t[5]<<8|_t[6]<<16|_t[7]<<24,Tt)},et.fromBytesBE=function(_t,Tt){return new et(_t[4]<<24|_t[5]<<16|_t[6]<<8|_t[7],_t[0]<<24|_t[1]<<16|_t[2]<<8|_t[3],Tt)}},1446:(_e,_,et)=>{var tt,rt,nt,ot=et(2100),at=ot.Reader,lt=ot.Writer,ct=ot.util,dt=ot.roots.default||(ot.roots.default={});dt.onnx=((nt={}).Version=(tt={},(rt=Object.create(tt))[tt[0]="_START_VERSION"]=0,rt[tt[1]="IR_VERSION_2017_10_10"]=1,rt[tt[2]="IR_VERSION_2017_10_30"]=2,rt[tt[3]="IR_VERSION_2017_11_3"]=3,rt[tt[4]="IR_VERSION_2019_1_22"]=4,rt[tt[5]="IR_VERSION"]=5,rt),nt.AttributeProto=function(){function st(it){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],it)for(var ut=Object.keys(it),ht=0;ht<ut.length;++ht)it[ut[ht]]!=null&&(this[ut[ht]]=it[ut[ht]])}return st.prototype.name="",st.prototype.refAttrName="",st.prototype.docString="",st.prototype.type=0,st.prototype.f=0,st.prototype.i=ct.Long?ct.Long.fromBits(0,0,!1):0,st.prototype.s=ct.newBuffer([]),st.prototype.t=null,st.prototype.g=null,st.prototype.floats=ct.emptyArray,st.prototype.ints=ct.emptyArray,st.prototype.strings=ct.emptyArray,st.prototype.tensors=ct.emptyArray,st.prototype.graphs=ct.emptyArray,st.create=function(it){return new st(it)},st.encode=function(it,ut){if(ut||(ut=lt.create()),it.name!=null&&it.hasOwnProperty("name")&&ut.uint32(10).string(it.name),it.f!=null&&it.hasOwnProperty("f")&&ut.uint32(21).float(it.f),it.i!=null&&it.hasOwnProperty("i")&&ut.uint32(24).int64(it.i),it.s!=null&&it.hasOwnProperty("s")&&ut.uint32(34).bytes(it.s),it.t!=null&&it.hasOwnProperty("t")&&dt.onnx.TensorProto.encode(it.t,ut.uint32(42).fork()).ldelim(),it.g!=null&&it.hasOwnProperty("g")&&dt.onnx.GraphProto.encode(it.g,ut.uint32(50).fork()).ldelim(),it.floats!=null&&it.floats.length){ut.uint32(58).fork();for(var ht=0;ht<it.floats.length;++ht)ut.float(it.floats[ht]);ut.ldelim()}if(it.ints!=null&&it.ints.length){for(ut.uint32(66).fork(),ht=0;ht<it.ints.length;++ht)ut.int64(it.ints[ht]);ut.ldelim()}if(it.strings!=null&&it.strings.length)for(ht=0;ht<it.strings.length;++ht)ut.uint32(74).bytes(it.strings[ht]);if(it.tensors!=null&&it.tensors.length)for(ht=0;ht<it.tensors.length;++ht)dt.onnx.TensorProto.encode(it.tensors[ht],ut.uint32(82).fork()).ldelim();if(it.graphs!=null&&it.graphs.length)for(ht=0;ht<it.graphs.length;++ht)dt.onnx.GraphProto.encode(it.graphs[ht],ut.uint32(90).fork()).ldelim();return it.docString!=null&&it.hasOwnProperty("docString")&&ut.uint32(106).string(it.docString),it.type!=null&&it.hasOwnProperty("type")&&ut.uint32(160).int32(it.type),it.refAttrName!=null&&it.hasOwnProperty("refAttrName")&&ut.uint32(170).string(it.refAttrName),ut},st.encodeDelimited=function(it,ut){return this.encode(it,ut).ldelim()},st.decode=function(it,ut){it instanceof at||(it=at.create(it));for(var ht=ut===void 0?it.len:it.pos+ut,ft=new dt.onnx.AttributeProto;it.pos<ht;){var gt=it.uint32();switch(gt>>>3){case 1:ft.name=it.string();break;case 21:ft.refAttrName=it.string();break;case 13:ft.docString=it.string();break;case 20:ft.type=it.int32();break;case 2:ft.f=it.float();break;case 3:ft.i=it.int64();break;case 4:ft.s=it.bytes();break;case 5:ft.t=dt.onnx.TensorProto.decode(it,it.uint32());break;case 6:ft.g=dt.onnx.GraphProto.decode(it,it.uint32());break;case 7:if(ft.floats&&ft.floats.length||(ft.floats=[]),(7&gt)==2)for(var mt=it.uint32()+it.pos;it.pos<mt;)ft.floats.push(it.float());else ft.floats.push(it.float());break;case 8:if(ft.ints&&ft.ints.length||(ft.ints=[]),(7&gt)==2)for(mt=it.uint32()+it.pos;it.pos<mt;)ft.ints.push(it.int64());else ft.ints.push(it.int64());break;case 9:ft.strings&&ft.strings.length||(ft.strings=[]),ft.strings.push(it.bytes());break;case 10:ft.tensors&&ft.tensors.length||(ft.tensors=[]),ft.tensors.push(dt.onnx.TensorProto.decode(it,it.uint32()));break;case 11:ft.graphs&&ft.graphs.length||(ft.graphs=[]),ft.graphs.push(dt.onnx.GraphProto.decode(it,it.uint32()));break;default:it.skipType(7&gt)}}return ft},st.decodeDelimited=function(it){return it instanceof at||(it=new at(it)),this.decode(it,it.uint32())},st.verify=function(it){if(typeof it!="object"||it===null)return"object expected";if(it.name!=null&&it.hasOwnProperty("name")&&!ct.isString(it.name))return"name: string expected";if(it.refAttrName!=null&&it.hasOwnProperty("refAttrName")&&!ct.isString(it.refAttrName))return"refAttrName: string expected";if(it.docString!=null&&it.hasOwnProperty("docString")&&!ct.isString(it.docString))return"docString: string expected";if(it.type!=null&&it.hasOwnProperty("type"))switch(it.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(it.f!=null&&it.hasOwnProperty("f")&&typeof it.f!="number")return"f: number expected";if(it.i!=null&&it.hasOwnProperty("i")&&!(ct.isInteger(it.i)||it.i&&ct.isInteger(it.i.low)&&ct.isInteger(it.i.high)))return"i: integer|Long expected";if(it.s!=null&&it.hasOwnProperty("s")&&!(it.s&&typeof it.s.length=="number"||ct.isString(it.s)))return"s: buffer expected";if(it.t!=null&&it.hasOwnProperty("t")&&(ht=dt.onnx.TensorProto.verify(it.t)))return"t."+ht;if(it.g!=null&&it.hasOwnProperty("g")&&(ht=dt.onnx.GraphProto.verify(it.g)))return"g."+ht;if(it.floats!=null&&it.hasOwnProperty("floats")){if(!Array.isArray(it.floats))return"floats: array expected";for(var ut=0;ut<it.floats.length;++ut)if(typeof it.floats[ut]!="number")return"floats: number[] expected"}if(it.ints!=null&&it.hasOwnProperty("ints")){if(!Array.isArray(it.ints))return"ints: array expected";for(ut=0;ut<it.ints.length;++ut)if(!(ct.isInteger(it.ints[ut])||it.ints[ut]&&ct.isInteger(it.ints[ut].low)&&ct.isInteger(it.ints[ut].high)))return"ints: integer|Long[] expected"}if(it.strings!=null&&it.hasOwnProperty("strings")){if(!Array.isArray(it.strings))return"strings: array expected";for(ut=0;ut<it.strings.length;++ut)if(!(it.strings[ut]&&typeof it.strings[ut].length=="number"||ct.isString(it.strings[ut])))return"strings: buffer[] expected"}if(it.tensors!=null&&it.hasOwnProperty("tensors")){if(!Array.isArray(it.tensors))return"tensors: array expected";for(ut=0;ut<it.tensors.length;++ut)if(ht=dt.onnx.TensorProto.verify(it.tensors[ut]))return"tensors."+ht}if(it.graphs!=null&&it.hasOwnProperty("graphs")){if(!Array.isArray(it.graphs))return"graphs: array expected";for(ut=0;ut<it.graphs.length;++ut){var ht;if(ht=dt.onnx.GraphProto.verify(it.graphs[ut]))return"graphs."+ht}}return null},st.fromObject=function(it){if(it instanceof dt.onnx.AttributeProto)return it;var ut=new dt.onnx.AttributeProto;switch(it.name!=null&&(ut.name=String(it.name)),it.refAttrName!=null&&(ut.refAttrName=String(it.refAttrName)),it.docString!=null&&(ut.docString=String(it.docString)),it.type){case"UNDEFINED":case 0:ut.type=0;break;case"FLOAT":case 1:ut.type=1;break;case"INT":case 2:ut.type=2;break;case"STRING":case 3:ut.type=3;break;case"TENSOR":case 4:ut.type=4;break;case"GRAPH":case 5:ut.type=5;break;case"FLOATS":case 6:ut.type=6;break;case"INTS":case 7:ut.type=7;break;case"STRINGS":case 8:ut.type=8;break;case"TENSORS":case 9:ut.type=9;break;case"GRAPHS":case 10:ut.type=10}if(it.f!=null&&(ut.f=Number(it.f)),it.i!=null&&(ct.Long?(ut.i=ct.Long.fromValue(it.i)).unsigned=!1:typeof it.i=="string"?ut.i=parseInt(it.i,10):typeof it.i=="number"?ut.i=it.i:typeof it.i=="object"&&(ut.i=new ct.LongBits(it.i.low>>>0,it.i.high>>>0).toNumber())),it.s!=null&&(typeof it.s=="string"?ct.base64.decode(it.s,ut.s=ct.newBuffer(ct.base64.length(it.s)),0):it.s.length&&(ut.s=it.s)),it.t!=null){if(typeof it.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");ut.t=dt.onnx.TensorProto.fromObject(it.t)}if(it.g!=null){if(typeof it.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");ut.g=dt.onnx.GraphProto.fromObject(it.g)}if(it.floats){if(!Array.isArray(it.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");ut.floats=[];for(var ht=0;ht<it.floats.length;++ht)ut.floats[ht]=Number(it.floats[ht])}if(it.ints){if(!Array.isArray(it.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(ut.ints=[],ht=0;ht<it.ints.length;++ht)ct.Long?(ut.ints[ht]=ct.Long.fromValue(it.ints[ht])).unsigned=!1:typeof it.ints[ht]=="string"?ut.ints[ht]=parseInt(it.ints[ht],10):typeof it.ints[ht]=="number"?ut.ints[ht]=it.ints[ht]:typeof it.ints[ht]=="object"&&(ut.ints[ht]=new ct.LongBits(it.ints[ht].low>>>0,it.ints[ht].high>>>0).toNumber())}if(it.strings){if(!Array.isArray(it.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(ut.strings=[],ht=0;ht<it.strings.length;++ht)typeof it.strings[ht]=="string"?ct.base64.decode(it.strings[ht],ut.strings[ht]=ct.newBuffer(ct.base64.length(it.strings[ht])),0):it.strings[ht].length&&(ut.strings[ht]=it.strings[ht])}if(it.tensors){if(!Array.isArray(it.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(ut.tensors=[],ht=0;ht<it.tensors.length;++ht){if(typeof it.tensors[ht]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");ut.tensors[ht]=dt.onnx.TensorProto.fromObject(it.tensors[ht])}}if(it.graphs){if(!Array.isArray(it.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(ut.graphs=[],ht=0;ht<it.graphs.length;++ht){if(typeof it.graphs[ht]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");ut.graphs[ht]=dt.onnx.GraphProto.fromObject(it.graphs[ht])}}return ut},st.toObject=function(it,ut){ut||(ut={});var ht={};if((ut.arrays||ut.defaults)&&(ht.floats=[],ht.ints=[],ht.strings=[],ht.tensors=[],ht.graphs=[]),ut.defaults){if(ht.name="",ht.f=0,ct.Long){var ft=new ct.Long(0,0,!1);ht.i=ut.longs===String?ft.toString():ut.longs===Number?ft.toNumber():ft}else ht.i=ut.longs===String?"0":0;ut.bytes===String?ht.s="":(ht.s=[],ut.bytes!==Array&&(ht.s=ct.newBuffer(ht.s))),ht.t=null,ht.g=null,ht.docString="",ht.type=ut.enums===String?"UNDEFINED":0,ht.refAttrName=""}if(it.name!=null&&it.hasOwnProperty("name")&&(ht.name=it.name),it.f!=null&&it.hasOwnProperty("f")&&(ht.f=ut.json&&!isFinite(it.f)?String(it.f):it.f),it.i!=null&&it.hasOwnProperty("i")&&(typeof it.i=="number"?ht.i=ut.longs===String?String(it.i):it.i:ht.i=ut.longs===String?ct.Long.prototype.toString.call(it.i):ut.longs===Number?new ct.LongBits(it.i.low>>>0,it.i.high>>>0).toNumber():it.i),it.s!=null&&it.hasOwnProperty("s")&&(ht.s=ut.bytes===String?ct.base64.encode(it.s,0,it.s.length):ut.bytes===Array?Array.prototype.slice.call(it.s):it.s),it.t!=null&&it.hasOwnProperty("t")&&(ht.t=dt.onnx.TensorProto.toObject(it.t,ut)),it.g!=null&&it.hasOwnProperty("g")&&(ht.g=dt.onnx.GraphProto.toObject(it.g,ut)),it.floats&&it.floats.length){ht.floats=[];for(var gt=0;gt<it.floats.length;++gt)ht.floats[gt]=ut.json&&!isFinite(it.floats[gt])?String(it.floats[gt]):it.floats[gt]}if(it.ints&&it.ints.length)for(ht.ints=[],gt=0;gt<it.ints.length;++gt)typeof it.ints[gt]=="number"?ht.ints[gt]=ut.longs===String?String(it.ints[gt]):it.ints[gt]:ht.ints[gt]=ut.longs===String?ct.Long.prototype.toString.call(it.ints[gt]):ut.longs===Number?new ct.LongBits(it.ints[gt].low>>>0,it.ints[gt].high>>>0).toNumber():it.ints[gt];if(it.strings&&it.strings.length)for(ht.strings=[],gt=0;gt<it.strings.length;++gt)ht.strings[gt]=ut.bytes===String?ct.base64.encode(it.strings[gt],0,it.strings[gt].length):ut.bytes===Array?Array.prototype.slice.call(it.strings[gt]):it.strings[gt];if(it.tensors&&it.tensors.length)for(ht.tensors=[],gt=0;gt<it.tensors.length;++gt)ht.tensors[gt]=dt.onnx.TensorProto.toObject(it.tensors[gt],ut);if(it.graphs&&it.graphs.length)for(ht.graphs=[],gt=0;gt<it.graphs.length;++gt)ht.graphs[gt]=dt.onnx.GraphProto.toObject(it.graphs[gt],ut);return it.docString!=null&&it.hasOwnProperty("docString")&&(ht.docString=it.docString),it.type!=null&&it.hasOwnProperty("type")&&(ht.type=ut.enums===String?dt.onnx.AttributeProto.AttributeType[it.type]:it.type),it.refAttrName!=null&&it.hasOwnProperty("refAttrName")&&(ht.refAttrName=it.refAttrName),ht},st.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},st.AttributeType=function(){var it={},ut=Object.create(it);return ut[it[0]="UNDEFINED"]=0,ut[it[1]="FLOAT"]=1,ut[it[2]="INT"]=2,ut[it[3]="STRING"]=3,ut[it[4]="TENSOR"]=4,ut[it[5]="GRAPH"]=5,ut[it[6]="FLOATS"]=6,ut[it[7]="INTS"]=7,ut[it[8]="STRINGS"]=8,ut[it[9]="TENSORS"]=9,ut[it[10]="GRAPHS"]=10,ut}(),st}(),nt.ValueInfoProto=function(){function st(it){if(it)for(var ut=Object.keys(it),ht=0;ht<ut.length;++ht)it[ut[ht]]!=null&&(this[ut[ht]]=it[ut[ht]])}return st.prototype.name="",st.prototype.type=null,st.prototype.docString="",st.create=function(it){return new st(it)},st.encode=function(it,ut){return ut||(ut=lt.create()),it.name!=null&&it.hasOwnProperty("name")&&ut.uint32(10).string(it.name),it.type!=null&&it.hasOwnProperty("type")&&dt.onnx.TypeProto.encode(it.type,ut.uint32(18).fork()).ldelim(),it.docString!=null&&it.hasOwnProperty("docString")&&ut.uint32(26).string(it.docString),ut},st.encodeDelimited=function(it,ut){return this.encode(it,ut).ldelim()},st.decode=function(it,ut){it instanceof at||(it=at.create(it));for(var ht=ut===void 0?it.len:it.pos+ut,ft=new dt.onnx.ValueInfoProto;it.pos<ht;){var gt=it.uint32();switch(gt>>>3){case 1:ft.name=it.string();break;case 2:ft.type=dt.onnx.TypeProto.decode(it,it.uint32());break;case 3:ft.docString=it.string();break;default:it.skipType(7&gt)}}return ft},st.decodeDelimited=function(it){return it instanceof at||(it=new at(it)),this.decode(it,it.uint32())},st.verify=function(it){if(typeof it!="object"||it===null)return"object expected";if(it.name!=null&&it.hasOwnProperty("name")&&!ct.isString(it.name))return"name: string expected";if(it.type!=null&&it.hasOwnProperty("type")){var ut=dt.onnx.TypeProto.verify(it.type);if(ut)return"type."+ut}return it.docString!=null&&it.hasOwnProperty("docString")&&!ct.isString(it.docString)?"docString: string expected":null},st.fromObject=function(it){if(it instanceof dt.onnx.ValueInfoProto)return it;var ut=new dt.onnx.ValueInfoProto;if(it.name!=null&&(ut.name=String(it.name)),it.type!=null){if(typeof it.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");ut.type=dt.onnx.TypeProto.fromObject(it.type)}return it.docString!=null&&(ut.docString=String(it.docString)),ut},st.toObject=function(it,ut){ut||(ut={});var ht={};return ut.defaults&&(ht.name="",ht.type=null,ht.docString=""),it.name!=null&&it.hasOwnProperty("name")&&(ht.name=it.name),it.type!=null&&it.hasOwnProperty("type")&&(ht.type=dt.onnx.TypeProto.toObject(it.type,ut)),it.docString!=null&&it.hasOwnProperty("docString")&&(ht.docString=it.docString),ht},st.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},st}(),nt.NodeProto=function(){function st(it){if(this.input=[],this.output=[],this.attribute=[],it)for(var ut=Object.keys(it),ht=0;ht<ut.length;++ht)it[ut[ht]]!=null&&(this[ut[ht]]=it[ut[ht]])}return st.prototype.input=ct.emptyArray,st.prototype.output=ct.emptyArray,st.prototype.name="",st.prototype.opType="",st.prototype.domain="",st.prototype.attribute=ct.emptyArray,st.prototype.docString="",st.create=function(it){return new st(it)},st.encode=function(it,ut){if(ut||(ut=lt.create()),it.input!=null&&it.input.length)for(var ht=0;ht<it.input.length;++ht)ut.uint32(10).string(it.input[ht]);if(it.output!=null&&it.output.length)for(ht=0;ht<it.output.length;++ht)ut.uint32(18).string(it.output[ht]);if(it.name!=null&&it.hasOwnProperty("name")&&ut.uint32(26).string(it.name),it.opType!=null&&it.hasOwnProperty("opType")&&ut.uint32(34).string(it.opType),it.attribute!=null&&it.attribute.length)for(ht=0;ht<it.attribute.length;++ht)dt.onnx.AttributeProto.encode(it.attribute[ht],ut.uint32(42).fork()).ldelim();return it.docString!=null&&it.hasOwnProperty("docString")&&ut.uint32(50).string(it.docString),it.domain!=null&&it.hasOwnProperty("domain")&&ut.uint32(58).string(it.domain),ut},st.encodeDelimited=function(it,ut){return this.encode(it,ut).ldelim()},st.decode=function(it,ut){it instanceof at||(it=at.create(it));for(var ht=ut===void 0?it.len:it.pos+ut,ft=new dt.onnx.NodeProto;it.pos<ht;){var gt=it.uint32();switch(gt>>>3){case 1:ft.input&&ft.input.length||(ft.input=[]),ft.input.push(it.string());break;case 2:ft.output&&ft.output.length||(ft.output=[]),ft.output.push(it.string());break;case 3:ft.name=it.string();break;case 4:ft.opType=it.string();break;case 7:ft.domain=it.string();break;case 5:ft.attribute&&ft.attribute.length||(ft.attribute=[]),ft.attribute.push(dt.onnx.AttributeProto.decode(it,it.uint32()));break;case 6:ft.docString=it.string();break;default:it.skipType(7&gt)}}return ft},st.decodeDelimited=function(it){return it instanceof at||(it=new at(it)),this.decode(it,it.uint32())},st.verify=function(it){if(typeof it!="object"||it===null)return"object expected";if(it.input!=null&&it.hasOwnProperty("input")){if(!Array.isArray(it.input))return"input: array expected";for(var ut=0;ut<it.input.length;++ut)if(!ct.isString(it.input[ut]))return"input: string[] expected"}if(it.output!=null&&it.hasOwnProperty("output")){if(!Array.isArray(it.output))return"output: array expected";for(ut=0;ut<it.output.length;++ut)if(!ct.isString(it.output[ut]))return"output: string[] expected"}if(it.name!=null&&it.hasOwnProperty("name")&&!ct.isString(it.name))return"name: string expected";if(it.opType!=null&&it.hasOwnProperty("opType")&&!ct.isString(it.opType))return"opType: string expected";if(it.domain!=null&&it.hasOwnProperty("domain")&&!ct.isString(it.domain))return"domain: string expected";if(it.attribute!=null&&it.hasOwnProperty("attribute")){if(!Array.isArray(it.attribute))return"attribute: array expected";for(ut=0;ut<it.attribute.length;++ut){var ht=dt.onnx.AttributeProto.verify(it.attribute[ut]);if(ht)return"attribute."+ht}}return it.docString!=null&&it.hasOwnProperty("docString")&&!ct.isString(it.docString)?"docString: string expected":null},st.fromObject=function(it){if(it instanceof dt.onnx.NodeProto)return it;var ut=new dt.onnx.NodeProto;if(it.input){if(!Array.isArray(it.input))throw TypeError(".onnx.NodeProto.input: array expected");ut.input=[];for(var ht=0;ht<it.input.length;++ht)ut.input[ht]=String(it.input[ht])}if(it.output){if(!Array.isArray(it.output))throw TypeError(".onnx.NodeProto.output: array expected");for(ut.output=[],ht=0;ht<it.output.length;++ht)ut.output[ht]=String(it.output[ht])}if(it.name!=null&&(ut.name=String(it.name)),it.opType!=null&&(ut.opType=String(it.opType)),it.domain!=null&&(ut.domain=String(it.domain)),it.attribute){if(!Array.isArray(it.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(ut.attribute=[],ht=0;ht<it.attribute.length;++ht){if(typeof it.attribute[ht]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");ut.attribute[ht]=dt.onnx.AttributeProto.fromObject(it.attribute[ht])}}return it.docString!=null&&(ut.docString=String(it.docString)),ut},st.toObject=function(it,ut){ut||(ut={});var ht={};if((ut.arrays||ut.defaults)&&(ht.input=[],ht.output=[],ht.attribute=[]),ut.defaults&&(ht.name="",ht.opType="",ht.docString="",ht.domain=""),it.input&&it.input.length){ht.input=[];for(var ft=0;ft<it.input.length;++ft)ht.input[ft]=it.input[ft]}if(it.output&&it.output.length)for(ht.output=[],ft=0;ft<it.output.length;++ft)ht.output[ft]=it.output[ft];if(it.name!=null&&it.hasOwnProperty("name")&&(ht.name=it.name),it.opType!=null&&it.hasOwnProperty("opType")&&(ht.opType=it.opType),it.attribute&&it.attribute.length)for(ht.attribute=[],ft=0;ft<it.attribute.length;++ft)ht.attribute[ft]=dt.onnx.AttributeProto.toObject(it.attribute[ft],ut);return it.docString!=null&&it.hasOwnProperty("docString")&&(ht.docString=it.docString),it.domain!=null&&it.hasOwnProperty("domain")&&(ht.domain=it.domain),ht},st.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},st}(),nt.ModelProto=function(){function st(it){if(this.opsetImport=[],this.metadataProps=[],it)for(var ut=Object.keys(it),ht=0;ht<ut.length;++ht)it[ut[ht]]!=null&&(this[ut[ht]]=it[ut[ht]])}return st.prototype.irVersion=ct.Long?ct.Long.fromBits(0,0,!1):0,st.prototype.opsetImport=ct.emptyArray,st.prototype.producerName="",st.prototype.producerVersion="",st.prototype.domain="",st.prototype.modelVersion=ct.Long?ct.Long.fromBits(0,0,!1):0,st.prototype.docString="",st.prototype.graph=null,st.prototype.metadataProps=ct.emptyArray,st.create=function(it){return new st(it)},st.encode=function(it,ut){if(ut||(ut=lt.create()),it.irVersion!=null&&it.hasOwnProperty("irVersion")&&ut.uint32(8).int64(it.irVersion),it.producerName!=null&&it.hasOwnProperty("producerName")&&ut.uint32(18).string(it.producerName),it.producerVersion!=null&&it.hasOwnProperty("producerVersion")&&ut.uint32(26).string(it.producerVersion),it.domain!=null&&it.hasOwnProperty("domain")&&ut.uint32(34).string(it.domain),it.modelVersion!=null&&it.hasOwnProperty("modelVersion")&&ut.uint32(40).int64(it.modelVersion),it.docString!=null&&it.hasOwnProperty("docString")&&ut.uint32(50).string(it.docString),it.graph!=null&&it.hasOwnProperty("graph")&&dt.onnx.GraphProto.encode(it.graph,ut.uint32(58).fork()).ldelim(),it.opsetImport!=null&&it.opsetImport.length)for(var ht=0;ht<it.opsetImport.length;++ht)dt.onnx.OperatorSetIdProto.encode(it.opsetImport[ht],ut.uint32(66).fork()).ldelim();if(it.metadataProps!=null&&it.metadataProps.length)for(ht=0;ht<it.metadataProps.length;++ht)dt.onnx.StringStringEntryProto.encode(it.metadataProps[ht],ut.uint32(114).fork()).ldelim();return ut},st.encodeDelimited=function(it,ut){return this.encode(it,ut).ldelim()},st.decode=function(it,ut){it instanceof at||(it=at.create(it));for(var ht=ut===void 0?it.len:it.pos+ut,ft=new dt.onnx.ModelProto;it.pos<ht;){var gt=it.uint32();switch(gt>>>3){case 1:ft.irVersion=it.int64();break;case 8:ft.opsetImport&&ft.opsetImport.length||(ft.opsetImport=[]),ft.opsetImport.push(dt.onnx.OperatorSetIdProto.decode(it,it.uint32()));break;case 2:ft.producerName=it.string();break;case 3:ft.producerVersion=it.string();break;case 4:ft.domain=it.string();break;case 5:ft.modelVersion=it.int64();break;case 6:ft.docString=it.string();break;case 7:ft.graph=dt.onnx.GraphProto.decode(it,it.uint32());break;case 14:ft.metadataProps&&ft.metadataProps.length||(ft.metadataProps=[]),ft.metadataProps.push(dt.onnx.StringStringEntryProto.decode(it,it.uint32()));break;default:it.skipType(7&gt)}}return ft},st.decodeDelimited=function(it){return it instanceof at||(it=new at(it)),this.decode(it,it.uint32())},st.verify=function(it){if(typeof it!="object"||it===null)return"object expected";if(it.irVersion!=null&&it.hasOwnProperty("irVersion")&&!(ct.isInteger(it.irVersion)||it.irVersion&&ct.isInteger(it.irVersion.low)&&ct.isInteger(it.irVersion.high)))return"irVersion: integer|Long expected";if(it.opsetImport!=null&&it.hasOwnProperty("opsetImport")){if(!Array.isArray(it.opsetImport))return"opsetImport: array expected";for(var ut=0;ut<it.opsetImport.length;++ut)if(ht=dt.onnx.OperatorSetIdProto.verify(it.opsetImport[ut]))return"opsetImport."+ht}if(it.producerName!=null&&it.hasOwnProperty("producerName")&&!ct.isString(it.producerName))return"producerName: string expected";if(it.producerVersion!=null&&it.hasOwnProperty("producerVersion")&&!ct.isString(it.producerVersion))return"producerVersion: string expected";if(it.domain!=null&&it.hasOwnProperty("domain")&&!ct.isString(it.domain))return"domain: string expected";if(it.modelVersion!=null&&it.hasOwnProperty("modelVersion")&&!(ct.isInteger(it.modelVersion)||it.modelVersion&&ct.isInteger(it.modelVersion.low)&&ct.isInteger(it.modelVersion.high)))return"modelVersion: integer|Long expected";if(it.docString!=null&&it.hasOwnProperty("docString")&&!ct.isString(it.docString))return"docString: string expected";if(it.graph!=null&&it.hasOwnProperty("graph")&&(ht=dt.onnx.GraphProto.verify(it.graph)))return"graph."+ht;if(it.metadataProps!=null&&it.hasOwnProperty("metadataProps")){if(!Array.isArray(it.metadataProps))return"metadataProps: array expected";for(ut=0;ut<it.metadataProps.length;++ut){var ht;if(ht=dt.onnx.StringStringEntryProto.verify(it.metadataProps[ut]))return"metadataProps."+ht}}return null},st.fromObject=function(it){if(it instanceof dt.onnx.ModelProto)return it;var ut=new dt.onnx.ModelProto;if(it.irVersion!=null&&(ct.Long?(ut.irVersion=ct.Long.fromValue(it.irVersion)).unsigned=!1:typeof it.irVersion=="string"?ut.irVersion=parseInt(it.irVersion,10):typeof it.irVersion=="number"?ut.irVersion=it.irVersion:typeof it.irVersion=="object"&&(ut.irVersion=new ct.LongBits(it.irVersion.low>>>0,it.irVersion.high>>>0).toNumber())),it.opsetImport){if(!Array.isArray(it.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");ut.opsetImport=[];for(var ht=0;ht<it.opsetImport.length;++ht){if(typeof it.opsetImport[ht]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");ut.opsetImport[ht]=dt.onnx.OperatorSetIdProto.fromObject(it.opsetImport[ht])}}if(it.producerName!=null&&(ut.producerName=String(it.producerName)),it.producerVersion!=null&&(ut.producerVersion=String(it.producerVersion)),it.domain!=null&&(ut.domain=String(it.domain)),it.modelVersion!=null&&(ct.Long?(ut.modelVersion=ct.Long.fromValue(it.modelVersion)).unsigned=!1:typeof it.modelVersion=="string"?ut.modelVersion=parseInt(it.modelVersion,10):typeof it.modelVersion=="number"?ut.modelVersion=it.modelVersion:typeof it.modelVersion=="object"&&(ut.modelVersion=new ct.LongBits(it.modelVersion.low>>>0,it.modelVersion.high>>>0).toNumber())),it.docString!=null&&(ut.docString=String(it.docString)),it.graph!=null){if(typeof it.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");ut.graph=dt.onnx.GraphProto.fromObject(it.graph)}if(it.metadataProps){if(!Array.isArray(it.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(ut.metadataProps=[],ht=0;ht<it.metadataProps.length;++ht){if(typeof it.metadataProps[ht]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");ut.metadataProps[ht]=dt.onnx.StringStringEntryProto.fromObject(it.metadataProps[ht])}}return ut},st.toObject=function(it,ut){ut||(ut={});var ht={};if((ut.arrays||ut.defaults)&&(ht.opsetImport=[],ht.metadataProps=[]),ut.defaults){if(ct.Long){var ft=new ct.Long(0,0,!1);ht.irVersion=ut.longs===String?ft.toString():ut.longs===Number?ft.toNumber():ft}else ht.irVersion=ut.longs===String?"0":0;ht.producerName="",ht.producerVersion="",ht.domain="",ct.Long?(ft=new ct.Long(0,0,!1),ht.modelVersion=ut.longs===String?ft.toString():ut.longs===Number?ft.toNumber():ft):ht.modelVersion=ut.longs===String?"0":0,ht.docString="",ht.graph=null}if(it.irVersion!=null&&it.hasOwnProperty("irVersion")&&(typeof it.irVersion=="number"?ht.irVersion=ut.longs===String?String(it.irVersion):it.irVersion:ht.irVersion=ut.longs===String?ct.Long.prototype.toString.call(it.irVersion):ut.longs===Number?new ct.LongBits(it.irVersion.low>>>0,it.irVersion.high>>>0).toNumber():it.irVersion),it.producerName!=null&&it.hasOwnProperty("producerName")&&(ht.producerName=it.producerName),it.producerVersion!=null&&it.hasOwnProperty("producerVersion")&&(ht.producerVersion=it.producerVersion),it.domain!=null&&it.hasOwnProperty("domain")&&(ht.domain=it.domain),it.modelVersion!=null&&it.hasOwnProperty("modelVersion")&&(typeof it.modelVersion=="number"?ht.modelVersion=ut.longs===String?String(it.modelVersion):it.modelVersion:ht.modelVersion=ut.longs===String?ct.Long.prototype.toString.call(it.modelVersion):ut.longs===Number?new ct.LongBits(it.modelVersion.low>>>0,it.modelVersion.high>>>0).toNumber():it.modelVersion),it.docString!=null&&it.hasOwnProperty("docString")&&(ht.docString=it.docString),it.graph!=null&&it.hasOwnProperty("graph")&&(ht.graph=dt.onnx.GraphProto.toObject(it.graph,ut)),it.opsetImport&&it.opsetImport.length){ht.opsetImport=[];for(var gt=0;gt<it.opsetImport.length;++gt)ht.opsetImport[gt]=dt.onnx.OperatorSetIdProto.toObject(it.opsetImport[gt],ut)}if(it.metadataProps&&it.metadataProps.length)for(ht.metadataProps=[],gt=0;gt<it.metadataProps.length;++gt)ht.metadataProps[gt]=dt.onnx.StringStringEntryProto.toObject(it.metadataProps[gt],ut);return ht},st.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},st}(),nt.StringStringEntryProto=function(){function st(it){if(it)for(var ut=Object.keys(it),ht=0;ht<ut.length;++ht)it[ut[ht]]!=null&&(this[ut[ht]]=it[ut[ht]])}return st.prototype.key="",st.prototype.value="",st.create=function(it){return new st(it)},st.encode=function(it,ut){return ut||(ut=lt.create()),it.key!=null&&it.hasOwnProperty("key")&&ut.uint32(10).string(it.key),it.value!=null&&it.hasOwnProperty("value")&&ut.uint32(18).string(it.value),ut},st.encodeDelimited=function(it,ut){return this.encode(it,ut).ldelim()},st.decode=function(it,ut){it instanceof at||(it=at.create(it));for(var ht=ut===void 0?it.len:it.pos+ut,ft=new dt.onnx.StringStringEntryProto;it.pos<ht;){var gt=it.uint32();switch(gt>>>3){case 1:ft.key=it.string();break;case 2:ft.value=it.string();break;default:it.skipType(7&gt)}}return ft},st.decodeDelimited=function(it){return it instanceof at||(it=new at(it)),this.decode(it,it.uint32())},st.verify=function(it){return typeof it!="object"||it===null?"object expected":it.key!=null&&it.hasOwnProperty("key")&&!ct.isString(it.key)?"key: string expected":it.value!=null&&it.hasOwnProperty("value")&&!ct.isString(it.value)?"value: string expected":null},st.fromObject=function(it){if(it instanceof dt.onnx.StringStringEntryProto)return it;var ut=new dt.onnx.StringStringEntryProto;return it.key!=null&&(ut.key=String(it.key)),it.value!=null&&(ut.value=String(it.value)),ut},st.toObject=function(it,ut){ut||(ut={});var ht={};return ut.defaults&&(ht.key="",ht.value=""),it.key!=null&&it.hasOwnProperty("key")&&(ht.key=it.key),it.value!=null&&it.hasOwnProperty("value")&&(ht.value=it.value),ht},st.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},st}(),nt.TensorAnnotation=function(){function st(it){if(this.quantParameterTensorNames=[],it)for(var ut=Object.keys(it),ht=0;ht<ut.length;++ht)it[ut[ht]]!=null&&(this[ut[ht]]=it[ut[ht]])}return st.prototype.tensorName="",st.prototype.quantParameterTensorNames=ct.emptyArray,st.create=function(it){return new st(it)},st.encode=function(it,ut){if(ut||(ut=lt.create()),it.tensorName!=null&&it.hasOwnProperty("tensorName")&&ut.uint32(10).string(it.tensorName),it.quantParameterTensorNames!=null&&it.quantParameterTensorNames.length)for(var ht=0;ht<it.quantParameterTensorNames.length;++ht)dt.onnx.StringStringEntryProto.encode(it.quantParameterTensorNames[ht],ut.uint32(18).fork()).ldelim();return ut},st.encodeDelimited=function(it,ut){return this.encode(it,ut).ldelim()},st.decode=function(it,ut){it instanceof at||(it=at.create(it));for(var ht=ut===void 0?it.len:it.pos+ut,ft=new dt.onnx.TensorAnnotation;it.pos<ht;){var gt=it.uint32();switch(gt>>>3){case 1:ft.tensorName=it.string();break;case 2:ft.quantParameterTensorNames&&ft.quantParameterTensorNames.length||(ft.quantParameterTensorNames=[]),ft.quantParameterTensorNames.push(dt.onnx.StringStringEntryProto.decode(it,it.uint32()));break;default:it.skipType(7&gt)}}return ft},st.decodeDelimited=function(it){return it instanceof at||(it=new at(it)),this.decode(it,it.uint32())},st.verify=function(it){if(typeof it!="object"||it===null)return"object expected";if(it.tensorName!=null&&it.hasOwnProperty("tensorName")&&!ct.isString(it.tensorName))return"tensorName: string expected";if(it.quantParameterTensorNames!=null&&it.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(it.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var ut=0;ut<it.quantParameterTensorNames.length;++ut){var ht=dt.onnx.StringStringEntryProto.verify(it.quantParameterTensorNames[ut]);if(ht)return"quantParameterTensorNames."+ht}}return null},st.fromObject=function(it){if(it instanceof dt.onnx.TensorAnnotation)return it;var ut=new dt.onnx.TensorAnnotation;if(it.tensorName!=null&&(ut.tensorName=String(it.tensorName)),it.quantParameterTensorNames){if(!Array.isArray(it.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");ut.quantParameterTensorNames=[];for(var ht=0;ht<it.quantParameterTensorNames.length;++ht){if(typeof it.quantParameterTensorNames[ht]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");ut.quantParameterTensorNames[ht]=dt.onnx.StringStringEntryProto.fromObject(it.quantParameterTensorNames[ht])}}return ut},st.toObject=function(it,ut){ut||(ut={});var ht={};if((ut.arrays||ut.defaults)&&(ht.quantParameterTensorNames=[]),ut.defaults&&(ht.tensorName=""),it.tensorName!=null&&it.hasOwnProperty("tensorName")&&(ht.tensorName=it.tensorName),it.quantParameterTensorNames&&it.quantParameterTensorNames.length){ht.quantParameterTensorNames=[];for(var ft=0;ft<it.quantParameterTensorNames.length;++ft)ht.quantParameterTensorNames[ft]=dt.onnx.StringStringEntryProto.toObject(it.quantParameterTensorNames[ft],ut)}return ht},st.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},st}(),nt.GraphProto=function(){function st(it){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],it)for(var ut=Object.keys(it),ht=0;ht<ut.length;++ht)it[ut[ht]]!=null&&(this[ut[ht]]=it[ut[ht]])}return st.prototype.node=ct.emptyArray,st.prototype.name="",st.prototype.initializer=ct.emptyArray,st.prototype.docString="",st.prototype.input=ct.emptyArray,st.prototype.output=ct.emptyArray,st.prototype.valueInfo=ct.emptyArray,st.prototype.quantizationAnnotation=ct.emptyArray,st.create=function(it){return new st(it)},st.encode=function(it,ut){if(ut||(ut=lt.create()),it.node!=null&&it.node.length)for(var ht=0;ht<it.node.length;++ht)dt.onnx.NodeProto.encode(it.node[ht],ut.uint32(10).fork()).ldelim();if(it.name!=null&&it.hasOwnProperty("name")&&ut.uint32(18).string(it.name),it.initializer!=null&&it.initializer.length)for(ht=0;ht<it.initializer.length;++ht)dt.onnx.TensorProto.encode(it.initializer[ht],ut.uint32(42).fork()).ldelim();if(it.docString!=null&&it.hasOwnProperty("docString")&&ut.uint32(82).string(it.docString),it.input!=null&&it.input.length)for(ht=0;ht<it.input.length;++ht)dt.onnx.ValueInfoProto.encode(it.input[ht],ut.uint32(90).fork()).ldelim();if(it.output!=null&&it.output.length)for(ht=0;ht<it.output.length;++ht)dt.onnx.ValueInfoProto.encode(it.output[ht],ut.uint32(98).fork()).ldelim();if(it.valueInfo!=null&&it.valueInfo.length)for(ht=0;ht<it.valueInfo.length;++ht)dt.onnx.ValueInfoProto.encode(it.valueInfo[ht],ut.uint32(106).fork()).ldelim();if(it.quantizationAnnotation!=null&&it.quantizationAnnotation.length)for(ht=0;ht<it.quantizationAnnotation.length;++ht)dt.onnx.TensorAnnotation.encode(it.quantizationAnnotation[ht],ut.uint32(114).fork()).ldelim();return ut},st.encodeDelimited=function(it,ut){return this.encode(it,ut).ldelim()},st.decode=function(it,ut){it instanceof at||(it=at.create(it));for(var ht=ut===void 0?it.len:it.pos+ut,ft=new dt.onnx.GraphProto;it.pos<ht;){var gt=it.uint32();switch(gt>>>3){case 1:ft.node&&ft.node.length||(ft.node=[]),ft.node.push(dt.onnx.NodeProto.decode(it,it.uint32()));break;case 2:ft.name=it.string();break;case 5:ft.initializer&&ft.initializer.length||(ft.initializer=[]),ft.initializer.push(dt.onnx.TensorProto.decode(it,it.uint32()));break;case 10:ft.docString=it.string();break;case 11:ft.input&&ft.input.length||(ft.input=[]),ft.input.push(dt.onnx.ValueInfoProto.decode(it,it.uint32()));break;case 12:ft.output&&ft.output.length||(ft.output=[]),ft.output.push(dt.onnx.ValueInfoProto.decode(it,it.uint32()));break;case 13:ft.valueInfo&&ft.valueInfo.length||(ft.valueInfo=[]),ft.valueInfo.push(dt.onnx.ValueInfoProto.decode(it,it.uint32()));break;case 14:ft.quantizationAnnotation&&ft.quantizationAnnotation.length||(ft.quantizationAnnotation=[]),ft.quantizationAnnotation.push(dt.onnx.TensorAnnotation.decode(it,it.uint32()));break;default:it.skipType(7&gt)}}return ft},st.decodeDelimited=function(it){return it instanceof at||(it=new at(it)),this.decode(it,it.uint32())},st.verify=function(it){if(typeof it!="object"||it===null)return"object expected";if(it.node!=null&&it.hasOwnProperty("node")){if(!Array.isArray(it.node))return"node: array expected";for(var ut=0;ut<it.node.length;++ut)if(ht=dt.onnx.NodeProto.verify(it.node[ut]))return"node."+ht}if(it.name!=null&&it.hasOwnProperty("name")&&!ct.isString(it.name))return"name: string expected";if(it.initializer!=null&&it.hasOwnProperty("initializer")){if(!Array.isArray(it.initializer))return"initializer: array expected";for(ut=0;ut<it.initializer.length;++ut)if(ht=dt.onnx.TensorProto.verify(it.initializer[ut]))return"initializer."+ht}if(it.docString!=null&&it.hasOwnProperty("docString")&&!ct.isString(it.docString))return"docString: string expected";if(it.input!=null&&it.hasOwnProperty("input")){if(!Array.isArray(it.input))return"input: array expected";for(ut=0;ut<it.input.length;++ut)if(ht=dt.onnx.ValueInfoProto.verify(it.input[ut]))return"input."+ht}if(it.output!=null&&it.hasOwnProperty("output")){if(!Array.isArray(it.output))return"output: array expected";for(ut=0;ut<it.output.length;++ut)if(ht=dt.onnx.ValueInfoProto.verify(it.output[ut]))return"output."+ht}if(it.valueInfo!=null&&it.hasOwnProperty("valueInfo")){if(!Array.isArray(it.valueInfo))return"valueInfo: array expected";for(ut=0;ut<it.valueInfo.length;++ut)if(ht=dt.onnx.ValueInfoProto.verify(it.valueInfo[ut]))return"valueInfo."+ht}if(it.quantizationAnnotation!=null&&it.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(it.quantizationAnnotation))return"quantizationAnnotation: array expected";for(ut=0;ut<it.quantizationAnnotation.length;++ut){var ht;if(ht=dt.onnx.TensorAnnotation.verify(it.quantizationAnnotation[ut]))return"quantizationAnnotation."+ht}}return null},st.fromObject=function(it){if(it instanceof dt.onnx.GraphProto)return it;var ut=new dt.onnx.GraphProto;if(it.node){if(!Array.isArray(it.node))throw TypeError(".onnx.GraphProto.node: array expected");ut.node=[];for(var ht=0;ht<it.node.length;++ht){if(typeof it.node[ht]!="object")throw TypeError(".onnx.GraphProto.node: object expected");ut.node[ht]=dt.onnx.NodeProto.fromObject(it.node[ht])}}if(it.name!=null&&(ut.name=String(it.name)),it.initializer){if(!Array.isArray(it.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(ut.initializer=[],ht=0;ht<it.initializer.length;++ht){if(typeof it.initializer[ht]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");ut.initializer[ht]=dt.onnx.TensorProto.fromObject(it.initializer[ht])}}if(it.docString!=null&&(ut.docString=String(it.docString)),it.input){if(!Array.isArray(it.input))throw TypeError(".onnx.GraphProto.input: array expected");for(ut.input=[],ht=0;ht<it.input.length;++ht){if(typeof it.input[ht]!="object")throw TypeError(".onnx.GraphProto.input: object expected");ut.input[ht]=dt.onnx.ValueInfoProto.fromObject(it.input[ht])}}if(it.output){if(!Array.isArray(it.output))throw TypeError(".onnx.GraphProto.output: array expected");for(ut.output=[],ht=0;ht<it.output.length;++ht){if(typeof it.output[ht]!="object")throw TypeError(".onnx.GraphProto.output: object expected");ut.output[ht]=dt.onnx.ValueInfoProto.fromObject(it.output[ht])}}if(it.valueInfo){if(!Array.isArray(it.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(ut.valueInfo=[],ht=0;ht<it.valueInfo.length;++ht){if(typeof it.valueInfo[ht]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");ut.valueInfo[ht]=dt.onnx.ValueInfoProto.fromObject(it.valueInfo[ht])}}if(it.quantizationAnnotation){if(!Array.isArray(it.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(ut.quantizationAnnotation=[],ht=0;ht<it.quantizationAnnotation.length;++ht){if(typeof it.quantizationAnnotation[ht]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");ut.quantizationAnnotation[ht]=dt.onnx.TensorAnnotation.fromObject(it.quantizationAnnotation[ht])}}return ut},st.toObject=function(it,ut){ut||(ut={});var ht={};if((ut.arrays||ut.defaults)&&(ht.node=[],ht.initializer=[],ht.input=[],ht.output=[],ht.valueInfo=[],ht.quantizationAnnotation=[]),ut.defaults&&(ht.name="",ht.docString=""),it.node&&it.node.length){ht.node=[];for(var ft=0;ft<it.node.length;++ft)ht.node[ft]=dt.onnx.NodeProto.toObject(it.node[ft],ut)}if(it.name!=null&&it.hasOwnProperty("name")&&(ht.name=it.name),it.initializer&&it.initializer.length)for(ht.initializer=[],ft=0;ft<it.initializer.length;++ft)ht.initializer[ft]=dt.onnx.TensorProto.toObject(it.initializer[ft],ut);if(it.docString!=null&&it.hasOwnProperty("docString")&&(ht.docString=it.docString),it.input&&it.input.length)for(ht.input=[],ft=0;ft<it.input.length;++ft)ht.input[ft]=dt.onnx.ValueInfoProto.toObject(it.input[ft],ut);if(it.output&&it.output.length)for(ht.output=[],ft=0;ft<it.output.length;++ft)ht.output[ft]=dt.onnx.ValueInfoProto.toObject(it.output[ft],ut);if(it.valueInfo&&it.valueInfo.length)for(ht.valueInfo=[],ft=0;ft<it.valueInfo.length;++ft)ht.valueInfo[ft]=dt.onnx.ValueInfoProto.toObject(it.valueInfo[ft],ut);if(it.quantizationAnnotation&&it.quantizationAnnotation.length)for(ht.quantizationAnnotation=[],ft=0;ft<it.quantizationAnnotation.length;++ft)ht.quantizationAnnotation[ft]=dt.onnx.TensorAnnotation.toObject(it.quantizationAnnotation[ft],ut);return ht},st.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},st}(),nt.TensorProto=function(){function st(it){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],it)for(var ut=Object.keys(it),ht=0;ht<ut.length;++ht)it[ut[ht]]!=null&&(this[ut[ht]]=it[ut[ht]])}return st.prototype.dims=ct.emptyArray,st.prototype.dataType=0,st.prototype.segment=null,st.prototype.floatData=ct.emptyArray,st.prototype.int32Data=ct.emptyArray,st.prototype.stringData=ct.emptyArray,st.prototype.int64Data=ct.emptyArray,st.prototype.name="",st.prototype.docString="",st.prototype.rawData=ct.newBuffer([]),st.prototype.externalData=ct.emptyArray,st.prototype.dataLocation=0,st.prototype.doubleData=ct.emptyArray,st.prototype.uint64Data=ct.emptyArray,st.create=function(it){return new st(it)},st.encode=function(it,ut){if(ut||(ut=lt.create()),it.dims!=null&&it.dims.length){ut.uint32(10).fork();for(var ht=0;ht<it.dims.length;++ht)ut.int64(it.dims[ht]);ut.ldelim()}if(it.dataType!=null&&it.hasOwnProperty("dataType")&&ut.uint32(16).int32(it.dataType),it.segment!=null&&it.hasOwnProperty("segment")&&dt.onnx.TensorProto.Segment.encode(it.segment,ut.uint32(26).fork()).ldelim(),it.floatData!=null&&it.floatData.length){for(ut.uint32(34).fork(),ht=0;ht<it.floatData.length;++ht)ut.float(it.floatData[ht]);ut.ldelim()}if(it.int32Data!=null&&it.int32Data.length){for(ut.uint32(42).fork(),ht=0;ht<it.int32Data.length;++ht)ut.int32(it.int32Data[ht]);ut.ldelim()}if(it.stringData!=null&&it.stringData.length)for(ht=0;ht<it.stringData.length;++ht)ut.uint32(50).bytes(it.stringData[ht]);if(it.int64Data!=null&&it.int64Data.length){for(ut.uint32(58).fork(),ht=0;ht<it.int64Data.length;++ht)ut.int64(it.int64Data[ht]);ut.ldelim()}if(it.name!=null&&it.hasOwnProperty("name")&&ut.uint32(66).string(it.name),it.rawData!=null&&it.hasOwnProperty("rawData")&&ut.uint32(74).bytes(it.rawData),it.doubleData!=null&&it.doubleData.length){for(ut.uint32(82).fork(),ht=0;ht<it.doubleData.length;++ht)ut.double(it.doubleData[ht]);ut.ldelim()}if(it.uint64Data!=null&&it.uint64Data.length){for(ut.uint32(90).fork(),ht=0;ht<it.uint64Data.length;++ht)ut.uint64(it.uint64Data[ht]);ut.ldelim()}if(it.docString!=null&&it.hasOwnProperty("docString")&&ut.uint32(98).string(it.docString),it.externalData!=null&&it.externalData.length)for(ht=0;ht<it.externalData.length;++ht)dt.onnx.StringStringEntryProto.encode(it.externalData[ht],ut.uint32(106).fork()).ldelim();return it.dataLocation!=null&&it.hasOwnProperty("dataLocation")&&ut.uint32(112).int32(it.dataLocation),ut},st.encodeDelimited=function(it,ut){return this.encode(it,ut).ldelim()},st.decode=function(it,ut){it instanceof at||(it=at.create(it));for(var ht=ut===void 0?it.len:it.pos+ut,ft=new dt.onnx.TensorProto;it.pos<ht;){var gt=it.uint32();switch(gt>>>3){case 1:if(ft.dims&&ft.dims.length||(ft.dims=[]),(7&gt)==2)for(var mt=it.uint32()+it.pos;it.pos<mt;)ft.dims.push(it.int64());else ft.dims.push(it.int64());break;case 2:ft.dataType=it.int32();break;case 3:ft.segment=dt.onnx.TensorProto.Segment.decode(it,it.uint32());break;case 4:if(ft.floatData&&ft.floatData.length||(ft.floatData=[]),(7&gt)==2)for(mt=it.uint32()+it.pos;it.pos<mt;)ft.floatData.push(it.float());else ft.floatData.push(it.float());break;case 5:if(ft.int32Data&&ft.int32Data.length||(ft.int32Data=[]),(7&gt)==2)for(mt=it.uint32()+it.pos;it.pos<mt;)ft.int32Data.push(it.int32());else ft.int32Data.push(it.int32());break;case 6:ft.stringData&&ft.stringData.length||(ft.stringData=[]),ft.stringData.push(it.bytes());break;case 7:if(ft.int64Data&&ft.int64Data.length||(ft.int64Data=[]),(7&gt)==2)for(mt=it.uint32()+it.pos;it.pos<mt;)ft.int64Data.push(it.int64());else ft.int64Data.push(it.int64());break;case 8:ft.name=it.string();break;case 12:ft.docString=it.string();break;case 9:ft.rawData=it.bytes();break;case 13:ft.externalData&&ft.externalData.length||(ft.externalData=[]),ft.externalData.push(dt.onnx.StringStringEntryProto.decode(it,it.uint32()));break;case 14:ft.dataLocation=it.int32();break;case 10:if(ft.doubleData&&ft.doubleData.length||(ft.doubleData=[]),(7&gt)==2)for(mt=it.uint32()+it.pos;it.pos<mt;)ft.doubleData.push(it.double());else ft.doubleData.push(it.double());break;case 11:if(ft.uint64Data&&ft.uint64Data.length||(ft.uint64Data=[]),(7&gt)==2)for(mt=it.uint32()+it.pos;it.pos<mt;)ft.uint64Data.push(it.uint64());else ft.uint64Data.push(it.uint64());break;default:it.skipType(7&gt)}}return ft},st.decodeDelimited=function(it){return it instanceof at||(it=new at(it)),this.decode(it,it.uint32())},st.verify=function(it){if(typeof it!="object"||it===null)return"object expected";if(it.dims!=null&&it.hasOwnProperty("dims")){if(!Array.isArray(it.dims))return"dims: array expected";for(var ut=0;ut<it.dims.length;++ut)if(!(ct.isInteger(it.dims[ut])||it.dims[ut]&&ct.isInteger(it.dims[ut].low)&&ct.isInteger(it.dims[ut].high)))return"dims: integer|Long[] expected"}if(it.dataType!=null&&it.hasOwnProperty("dataType")&&!ct.isInteger(it.dataType))return"dataType: integer expected";if(it.segment!=null&&it.hasOwnProperty("segment")&&(ht=dt.onnx.TensorProto.Segment.verify(it.segment)))return"segment."+ht;if(it.floatData!=null&&it.hasOwnProperty("floatData")){if(!Array.isArray(it.floatData))return"floatData: array expected";for(ut=0;ut<it.floatData.length;++ut)if(typeof it.floatData[ut]!="number")return"floatData: number[] expected"}if(it.int32Data!=null&&it.hasOwnProperty("int32Data")){if(!Array.isArray(it.int32Data))return"int32Data: array expected";for(ut=0;ut<it.int32Data.length;++ut)if(!ct.isInteger(it.int32Data[ut]))return"int32Data: integer[] expected"}if(it.stringData!=null&&it.hasOwnProperty("stringData")){if(!Array.isArray(it.stringData))return"stringData: array expected";for(ut=0;ut<it.stringData.length;++ut)if(!(it.stringData[ut]&&typeof it.stringData[ut].length=="number"||ct.isString(it.stringData[ut])))return"stringData: buffer[] expected"}if(it.int64Data!=null&&it.hasOwnProperty("int64Data")){if(!Array.isArray(it.int64Data))return"int64Data: array expected";for(ut=0;ut<it.int64Data.length;++ut)if(!(ct.isInteger(it.int64Data[ut])||it.int64Data[ut]&&ct.isInteger(it.int64Data[ut].low)&&ct.isInteger(it.int64Data[ut].high)))return"int64Data: integer|Long[] expected"}if(it.name!=null&&it.hasOwnProperty("name")&&!ct.isString(it.name))return"name: string expected";if(it.docString!=null&&it.hasOwnProperty("docString")&&!ct.isString(it.docString))return"docString: string expected";if(it.rawData!=null&&it.hasOwnProperty("rawData")&&!(it.rawData&&typeof it.rawData.length=="number"||ct.isString(it.rawData)))return"rawData: buffer expected";if(it.externalData!=null&&it.hasOwnProperty("externalData")){if(!Array.isArray(it.externalData))return"externalData: array expected";for(ut=0;ut<it.externalData.length;++ut){var ht;if(ht=dt.onnx.StringStringEntryProto.verify(it.externalData[ut]))return"externalData."+ht}}if(it.dataLocation!=null&&it.hasOwnProperty("dataLocation"))switch(it.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(it.doubleData!=null&&it.hasOwnProperty("doubleData")){if(!Array.isArray(it.doubleData))return"doubleData: array expected";for(ut=0;ut<it.doubleData.length;++ut)if(typeof it.doubleData[ut]!="number")return"doubleData: number[] expected"}if(it.uint64Data!=null&&it.hasOwnProperty("uint64Data")){if(!Array.isArray(it.uint64Data))return"uint64Data: array expected";for(ut=0;ut<it.uint64Data.length;++ut)if(!(ct.isInteger(it.uint64Data[ut])||it.uint64Data[ut]&&ct.isInteger(it.uint64Data[ut].low)&&ct.isInteger(it.uint64Data[ut].high)))return"uint64Data: integer|Long[] expected"}return null},st.fromObject=function(it){if(it instanceof dt.onnx.TensorProto)return it;var ut=new dt.onnx.TensorProto;if(it.dims){if(!Array.isArray(it.dims))throw TypeError(".onnx.TensorProto.dims: array expected");ut.dims=[];for(var ht=0;ht<it.dims.length;++ht)ct.Long?(ut.dims[ht]=ct.Long.fromValue(it.dims[ht])).unsigned=!1:typeof it.dims[ht]=="string"?ut.dims[ht]=parseInt(it.dims[ht],10):typeof it.dims[ht]=="number"?ut.dims[ht]=it.dims[ht]:typeof it.dims[ht]=="object"&&(ut.dims[ht]=new ct.LongBits(it.dims[ht].low>>>0,it.dims[ht].high>>>0).toNumber())}if(it.dataType!=null&&(ut.dataType=0|it.dataType),it.segment!=null){if(typeof it.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");ut.segment=dt.onnx.TensorProto.Segment.fromObject(it.segment)}if(it.floatData){if(!Array.isArray(it.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(ut.floatData=[],ht=0;ht<it.floatData.length;++ht)ut.floatData[ht]=Number(it.floatData[ht])}if(it.int32Data){if(!Array.isArray(it.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(ut.int32Data=[],ht=0;ht<it.int32Data.length;++ht)ut.int32Data[ht]=0|it.int32Data[ht]}if(it.stringData){if(!Array.isArray(it.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(ut.stringData=[],ht=0;ht<it.stringData.length;++ht)typeof it.stringData[ht]=="string"?ct.base64.decode(it.stringData[ht],ut.stringData[ht]=ct.newBuffer(ct.base64.length(it.stringData[ht])),0):it.stringData[ht].length&&(ut.stringData[ht]=it.stringData[ht])}if(it.int64Data){if(!Array.isArray(it.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(ut.int64Data=[],ht=0;ht<it.int64Data.length;++ht)ct.Long?(ut.int64Data[ht]=ct.Long.fromValue(it.int64Data[ht])).unsigned=!1:typeof it.int64Data[ht]=="string"?ut.int64Data[ht]=parseInt(it.int64Data[ht],10):typeof it.int64Data[ht]=="number"?ut.int64Data[ht]=it.int64Data[ht]:typeof it.int64Data[ht]=="object"&&(ut.int64Data[ht]=new ct.LongBits(it.int64Data[ht].low>>>0,it.int64Data[ht].high>>>0).toNumber())}if(it.name!=null&&(ut.name=String(it.name)),it.docString!=null&&(ut.docString=String(it.docString)),it.rawData!=null&&(typeof it.rawData=="string"?ct.base64.decode(it.rawData,ut.rawData=ct.newBuffer(ct.base64.length(it.rawData)),0):it.rawData.length&&(ut.rawData=it.rawData)),it.externalData){if(!Array.isArray(it.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(ut.externalData=[],ht=0;ht<it.externalData.length;++ht){if(typeof it.externalData[ht]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");ut.externalData[ht]=dt.onnx.StringStringEntryProto.fromObject(it.externalData[ht])}}switch(it.dataLocation){case"DEFAULT":case 0:ut.dataLocation=0;break;case"EXTERNAL":case 1:ut.dataLocation=1}if(it.doubleData){if(!Array.isArray(it.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(ut.doubleData=[],ht=0;ht<it.doubleData.length;++ht)ut.doubleData[ht]=Number(it.doubleData[ht])}if(it.uint64Data){if(!Array.isArray(it.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(ut.uint64Data=[],ht=0;ht<it.uint64Data.length;++ht)ct.Long?(ut.uint64Data[ht]=ct.Long.fromValue(it.uint64Data[ht])).unsigned=!0:typeof it.uint64Data[ht]=="string"?ut.uint64Data[ht]=parseInt(it.uint64Data[ht],10):typeof it.uint64Data[ht]=="number"?ut.uint64Data[ht]=it.uint64Data[ht]:typeof it.uint64Data[ht]=="object"&&(ut.uint64Data[ht]=new ct.LongBits(it.uint64Data[ht].low>>>0,it.uint64Data[ht].high>>>0).toNumber(!0))}return ut},st.toObject=function(it,ut){ut||(ut={});var ht={};if((ut.arrays||ut.defaults)&&(ht.dims=[],ht.floatData=[],ht.int32Data=[],ht.stringData=[],ht.int64Data=[],ht.doubleData=[],ht.uint64Data=[],ht.externalData=[]),ut.defaults&&(ht.dataType=0,ht.segment=null,ht.name="",ut.bytes===String?ht.rawData="":(ht.rawData=[],ut.bytes!==Array&&(ht.rawData=ct.newBuffer(ht.rawData))),ht.docString="",ht.dataLocation=ut.enums===String?"DEFAULT":0),it.dims&&it.dims.length){ht.dims=[];for(var ft=0;ft<it.dims.length;++ft)typeof it.dims[ft]=="number"?ht.dims[ft]=ut.longs===String?String(it.dims[ft]):it.dims[ft]:ht.dims[ft]=ut.longs===String?ct.Long.prototype.toString.call(it.dims[ft]):ut.longs===Number?new ct.LongBits(it.dims[ft].low>>>0,it.dims[ft].high>>>0).toNumber():it.dims[ft]}if(it.dataType!=null&&it.hasOwnProperty("dataType")&&(ht.dataType=it.dataType),it.segment!=null&&it.hasOwnProperty("segment")&&(ht.segment=dt.onnx.TensorProto.Segment.toObject(it.segment,ut)),it.floatData&&it.floatData.length)for(ht.floatData=[],ft=0;ft<it.floatData.length;++ft)ht.floatData[ft]=ut.json&&!isFinite(it.floatData[ft])?String(it.floatData[ft]):it.floatData[ft];if(it.int32Data&&it.int32Data.length)for(ht.int32Data=[],ft=0;ft<it.int32Data.length;++ft)ht.int32Data[ft]=it.int32Data[ft];if(it.stringData&&it.stringData.length)for(ht.stringData=[],ft=0;ft<it.stringData.length;++ft)ht.stringData[ft]=ut.bytes===String?ct.base64.encode(it.stringData[ft],0,it.stringData[ft].length):ut.bytes===Array?Array.prototype.slice.call(it.stringData[ft]):it.stringData[ft];if(it.int64Data&&it.int64Data.length)for(ht.int64Data=[],ft=0;ft<it.int64Data.length;++ft)typeof it.int64Data[ft]=="number"?ht.int64Data[ft]=ut.longs===String?String(it.int64Data[ft]):it.int64Data[ft]:ht.int64Data[ft]=ut.longs===String?ct.Long.prototype.toString.call(it.int64Data[ft]):ut.longs===Number?new ct.LongBits(it.int64Data[ft].low>>>0,it.int64Data[ft].high>>>0).toNumber():it.int64Data[ft];if(it.name!=null&&it.hasOwnProperty("name")&&(ht.name=it.name),it.rawData!=null&&it.hasOwnProperty("rawData")&&(ht.rawData=ut.bytes===String?ct.base64.encode(it.rawData,0,it.rawData.length):ut.bytes===Array?Array.prototype.slice.call(it.rawData):it.rawData),it.doubleData&&it.doubleData.length)for(ht.doubleData=[],ft=0;ft<it.doubleData.length;++ft)ht.doubleData[ft]=ut.json&&!isFinite(it.doubleData[ft])?String(it.doubleData[ft]):it.doubleData[ft];if(it.uint64Data&&it.uint64Data.length)for(ht.uint64Data=[],ft=0;ft<it.uint64Data.length;++ft)typeof it.uint64Data[ft]=="number"?ht.uint64Data[ft]=ut.longs===String?String(it.uint64Data[ft]):it.uint64Data[ft]:ht.uint64Data[ft]=ut.longs===String?ct.Long.prototype.toString.call(it.uint64Data[ft]):ut.longs===Number?new ct.LongBits(it.uint64Data[ft].low>>>0,it.uint64Data[ft].high>>>0).toNumber(!0):it.uint64Data[ft];if(it.docString!=null&&it.hasOwnProperty("docString")&&(ht.docString=it.docString),it.externalData&&it.externalData.length)for(ht.externalData=[],ft=0;ft<it.externalData.length;++ft)ht.externalData[ft]=dt.onnx.StringStringEntryProto.toObject(it.externalData[ft],ut);return it.dataLocation!=null&&it.hasOwnProperty("dataLocation")&&(ht.dataLocation=ut.enums===String?dt.onnx.TensorProto.DataLocation[it.dataLocation]:it.dataLocation),ht},st.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},st.DataType=function(){var it={},ut=Object.create(it);return ut[it[0]="UNDEFINED"]=0,ut[it[1]="FLOAT"]=1,ut[it[2]="UINT8"]=2,ut[it[3]="INT8"]=3,ut[it[4]="UINT16"]=4,ut[it[5]="INT16"]=5,ut[it[6]="INT32"]=6,ut[it[7]="INT64"]=7,ut[it[8]="STRING"]=8,ut[it[9]="BOOL"]=9,ut[it[10]="FLOAT16"]=10,ut[it[11]="DOUBLE"]=11,ut[it[12]="UINT32"]=12,ut[it[13]="UINT64"]=13,ut[it[14]="COMPLEX64"]=14,ut[it[15]="COMPLEX128"]=15,ut[it[16]="BFLOAT16"]=16,ut}(),st.Segment=function(){function it(ut){if(ut)for(var ht=Object.keys(ut),ft=0;ft<ht.length;++ft)ut[ht[ft]]!=null&&(this[ht[ft]]=ut[ht[ft]])}return it.prototype.begin=ct.Long?ct.Long.fromBits(0,0,!1):0,it.prototype.end=ct.Long?ct.Long.fromBits(0,0,!1):0,it.create=function(ut){return new it(ut)},it.encode=function(ut,ht){return ht||(ht=lt.create()),ut.begin!=null&&ut.hasOwnProperty("begin")&&ht.uint32(8).int64(ut.begin),ut.end!=null&&ut.hasOwnProperty("end")&&ht.uint32(16).int64(ut.end),ht},it.encodeDelimited=function(ut,ht){return this.encode(ut,ht).ldelim()},it.decode=function(ut,ht){ut instanceof at||(ut=at.create(ut));for(var ft=ht===void 0?ut.len:ut.pos+ht,gt=new dt.onnx.TensorProto.Segment;ut.pos<ft;){var mt=ut.uint32();switch(mt>>>3){case 1:gt.begin=ut.int64();break;case 2:gt.end=ut.int64();break;default:ut.skipType(7&mt)}}return gt},it.decodeDelimited=function(ut){return ut instanceof at||(ut=new at(ut)),this.decode(ut,ut.uint32())},it.verify=function(ut){return typeof ut!="object"||ut===null?"object expected":ut.begin!=null&&ut.hasOwnProperty("begin")&&!(ct.isInteger(ut.begin)||ut.begin&&ct.isInteger(ut.begin.low)&&ct.isInteger(ut.begin.high))?"begin: integer|Long expected":ut.end!=null&&ut.hasOwnProperty("end")&&!(ct.isInteger(ut.end)||ut.end&&ct.isInteger(ut.end.low)&&ct.isInteger(ut.end.high))?"end: integer|Long expected":null},it.fromObject=function(ut){if(ut instanceof dt.onnx.TensorProto.Segment)return ut;var ht=new dt.onnx.TensorProto.Segment;return ut.begin!=null&&(ct.Long?(ht.begin=ct.Long.fromValue(ut.begin)).unsigned=!1:typeof ut.begin=="string"?ht.begin=parseInt(ut.begin,10):typeof ut.begin=="number"?ht.begin=ut.begin:typeof ut.begin=="object"&&(ht.begin=new ct.LongBits(ut.begin.low>>>0,ut.begin.high>>>0).toNumber())),ut.end!=null&&(ct.Long?(ht.end=ct.Long.fromValue(ut.end)).unsigned=!1:typeof ut.end=="string"?ht.end=parseInt(ut.end,10):typeof ut.end=="number"?ht.end=ut.end:typeof ut.end=="object"&&(ht.end=new ct.LongBits(ut.end.low>>>0,ut.end.high>>>0).toNumber())),ht},it.toObject=function(ut,ht){ht||(ht={});var ft={};if(ht.defaults){if(ct.Long){var gt=new ct.Long(0,0,!1);ft.begin=ht.longs===String?gt.toString():ht.longs===Number?gt.toNumber():gt}else ft.begin=ht.longs===String?"0":0;ct.Long?(gt=new ct.Long(0,0,!1),ft.end=ht.longs===String?gt.toString():ht.longs===Number?gt.toNumber():gt):ft.end=ht.longs===String?"0":0}return ut.begin!=null&&ut.hasOwnProperty("begin")&&(typeof ut.begin=="number"?ft.begin=ht.longs===String?String(ut.begin):ut.begin:ft.begin=ht.longs===String?ct.Long.prototype.toString.call(ut.begin):ht.longs===Number?new ct.LongBits(ut.begin.low>>>0,ut.begin.high>>>0).toNumber():ut.begin),ut.end!=null&&ut.hasOwnProperty("end")&&(typeof ut.end=="number"?ft.end=ht.longs===String?String(ut.end):ut.end:ft.end=ht.longs===String?ct.Long.prototype.toString.call(ut.end):ht.longs===Number?new ct.LongBits(ut.end.low>>>0,ut.end.high>>>0).toNumber():ut.end),ft},it.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},it}(),st.DataLocation=function(){var it={},ut=Object.create(it);return ut[it[0]="DEFAULT"]=0,ut[it[1]="EXTERNAL"]=1,ut}(),st}(),nt.TensorShapeProto=function(){function st(it){if(this.dim=[],it)for(var ut=Object.keys(it),ht=0;ht<ut.length;++ht)it[ut[ht]]!=null&&(this[ut[ht]]=it[ut[ht]])}return st.prototype.dim=ct.emptyArray,st.create=function(it){return new st(it)},st.encode=function(it,ut){if(ut||(ut=lt.create()),it.dim!=null&&it.dim.length)for(var ht=0;ht<it.dim.length;++ht)dt.onnx.TensorShapeProto.Dimension.encode(it.dim[ht],ut.uint32(10).fork()).ldelim();return ut},st.encodeDelimited=function(it,ut){return this.encode(it,ut).ldelim()},st.decode=function(it,ut){it instanceof at||(it=at.create(it));for(var ht=ut===void 0?it.len:it.pos+ut,ft=new dt.onnx.TensorShapeProto;it.pos<ht;){var gt=it.uint32();gt>>>3==1?(ft.dim&&ft.dim.length||(ft.dim=[]),ft.dim.push(dt.onnx.TensorShapeProto.Dimension.decode(it,it.uint32()))):it.skipType(7&gt)}return ft},st.decodeDelimited=function(it){return it instanceof at||(it=new at(it)),this.decode(it,it.uint32())},st.verify=function(it){if(typeof it!="object"||it===null)return"object expected";if(it.dim!=null&&it.hasOwnProperty("dim")){if(!Array.isArray(it.dim))return"dim: array expected";for(var ut=0;ut<it.dim.length;++ut){var ht=dt.onnx.TensorShapeProto.Dimension.verify(it.dim[ut]);if(ht)return"dim."+ht}}return null},st.fromObject=function(it){if(it instanceof dt.onnx.TensorShapeProto)return it;var ut=new dt.onnx.TensorShapeProto;if(it.dim){if(!Array.isArray(it.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");ut.dim=[];for(var ht=0;ht<it.dim.length;++ht){if(typeof it.dim[ht]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");ut.dim[ht]=dt.onnx.TensorShapeProto.Dimension.fromObject(it.dim[ht])}}return ut},st.toObject=function(it,ut){ut||(ut={});var ht={};if((ut.arrays||ut.defaults)&&(ht.dim=[]),it.dim&&it.dim.length){ht.dim=[];for(var ft=0;ft<it.dim.length;++ft)ht.dim[ft]=dt.onnx.TensorShapeProto.Dimension.toObject(it.dim[ft],ut)}return ht},st.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},st.Dimension=function(){function it(ht){if(ht)for(var ft=Object.keys(ht),gt=0;gt<ft.length;++gt)ht[ft[gt]]!=null&&(this[ft[gt]]=ht[ft[gt]])}var ut;return it.prototype.dimValue=ct.Long?ct.Long.fromBits(0,0,!1):0,it.prototype.dimParam="",it.prototype.denotation="",Object.defineProperty(it.prototype,"value",{get:ct.oneOfGetter(ut=["dimValue","dimParam"]),set:ct.oneOfSetter(ut)}),it.create=function(ht){return new it(ht)},it.encode=function(ht,ft){return ft||(ft=lt.create()),ht.dimValue!=null&&ht.hasOwnProperty("dimValue")&&ft.uint32(8).int64(ht.dimValue),ht.dimParam!=null&&ht.hasOwnProperty("dimParam")&&ft.uint32(18).string(ht.dimParam),ht.denotation!=null&&ht.hasOwnProperty("denotation")&&ft.uint32(26).string(ht.denotation),ft},it.encodeDelimited=function(ht,ft){return this.encode(ht,ft).ldelim()},it.decode=function(ht,ft){ht instanceof at||(ht=at.create(ht));for(var gt=ft===void 0?ht.len:ht.pos+ft,mt=new dt.onnx.TensorShapeProto.Dimension;ht.pos<gt;){var yt=ht.uint32();switch(yt>>>3){case 1:mt.dimValue=ht.int64();break;case 2:mt.dimParam=ht.string();break;case 3:mt.denotation=ht.string();break;default:ht.skipType(7&yt)}}return mt},it.decodeDelimited=function(ht){return ht instanceof at||(ht=new at(ht)),this.decode(ht,ht.uint32())},it.verify=function(ht){if(typeof ht!="object"||ht===null)return"object expected";var ft={};if(ht.dimValue!=null&&ht.hasOwnProperty("dimValue")&&(ft.value=1,!(ct.isInteger(ht.dimValue)||ht.dimValue&&ct.isInteger(ht.dimValue.low)&&ct.isInteger(ht.dimValue.high))))return"dimValue: integer|Long expected";if(ht.dimParam!=null&&ht.hasOwnProperty("dimParam")){if(ft.value===1)return"value: multiple values";if(ft.value=1,!ct.isString(ht.dimParam))return"dimParam: string expected"}return ht.denotation!=null&&ht.hasOwnProperty("denotation")&&!ct.isString(ht.denotation)?"denotation: string expected":null},it.fromObject=function(ht){if(ht instanceof dt.onnx.TensorShapeProto.Dimension)return ht;var ft=new dt.onnx.TensorShapeProto.Dimension;return ht.dimValue!=null&&(ct.Long?(ft.dimValue=ct.Long.fromValue(ht.dimValue)).unsigned=!1:typeof ht.dimValue=="string"?ft.dimValue=parseInt(ht.dimValue,10):typeof ht.dimValue=="number"?ft.dimValue=ht.dimValue:typeof ht.dimValue=="object"&&(ft.dimValue=new ct.LongBits(ht.dimValue.low>>>0,ht.dimValue.high>>>0).toNumber())),ht.dimParam!=null&&(ft.dimParam=String(ht.dimParam)),ht.denotation!=null&&(ft.denotation=String(ht.denotation)),ft},it.toObject=function(ht,ft){ft||(ft={});var gt={};return ft.defaults&&(gt.denotation=""),ht.dimValue!=null&&ht.hasOwnProperty("dimValue")&&(typeof ht.dimValue=="number"?gt.dimValue=ft.longs===String?String(ht.dimValue):ht.dimValue:gt.dimValue=ft.longs===String?ct.Long.prototype.toString.call(ht.dimValue):ft.longs===Number?new ct.LongBits(ht.dimValue.low>>>0,ht.dimValue.high>>>0).toNumber():ht.dimValue,ft.oneofs&&(gt.value="dimValue")),ht.dimParam!=null&&ht.hasOwnProperty("dimParam")&&(gt.dimParam=ht.dimParam,ft.oneofs&&(gt.value="dimParam")),ht.denotation!=null&&ht.hasOwnProperty("denotation")&&(gt.denotation=ht.denotation),gt},it.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},it}(),st}(),nt.TypeProto=function(){function st(ut){if(ut)for(var ht=Object.keys(ut),ft=0;ft<ht.length;++ft)ut[ht[ft]]!=null&&(this[ht[ft]]=ut[ht[ft]])}var it;return st.prototype.tensorType=null,st.prototype.denotation="",Object.defineProperty(st.prototype,"value",{get:ct.oneOfGetter(it=["tensorType"]),set:ct.oneOfSetter(it)}),st.create=function(ut){return new st(ut)},st.encode=function(ut,ht){return ht||(ht=lt.create()),ut.tensorType!=null&&ut.hasOwnProperty("tensorType")&&dt.onnx.TypeProto.Tensor.encode(ut.tensorType,ht.uint32(10).fork()).ldelim(),ut.denotation!=null&&ut.hasOwnProperty("denotation")&&ht.uint32(50).string(ut.denotation),ht},st.encodeDelimited=function(ut,ht){return this.encode(ut,ht).ldelim()},st.decode=function(ut,ht){ut instanceof at||(ut=at.create(ut));for(var ft=ht===void 0?ut.len:ut.pos+ht,gt=new dt.onnx.TypeProto;ut.pos<ft;){var mt=ut.uint32();switch(mt>>>3){case 1:gt.tensorType=dt.onnx.TypeProto.Tensor.decode(ut,ut.uint32());break;case 6:gt.denotation=ut.string();break;default:ut.skipType(7&mt)}}return gt},st.decodeDelimited=function(ut){return ut instanceof at||(ut=new at(ut)),this.decode(ut,ut.uint32())},st.verify=function(ut){if(typeof ut!="object"||ut===null)return"object expected";if(ut.tensorType!=null&&ut.hasOwnProperty("tensorType")){var ht=dt.onnx.TypeProto.Tensor.verify(ut.tensorType);if(ht)return"tensorType."+ht}return ut.denotation!=null&&ut.hasOwnProperty("denotation")&&!ct.isString(ut.denotation)?"denotation: string expected":null},st.fromObject=function(ut){if(ut instanceof dt.onnx.TypeProto)return ut;var ht=new dt.onnx.TypeProto;if(ut.tensorType!=null){if(typeof ut.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");ht.tensorType=dt.onnx.TypeProto.Tensor.fromObject(ut.tensorType)}return ut.denotation!=null&&(ht.denotation=String(ut.denotation)),ht},st.toObject=function(ut,ht){ht||(ht={});var ft={};return ht.defaults&&(ft.denotation=""),ut.tensorType!=null&&ut.hasOwnProperty("tensorType")&&(ft.tensorType=dt.onnx.TypeProto.Tensor.toObject(ut.tensorType,ht),ht.oneofs&&(ft.value="tensorType")),ut.denotation!=null&&ut.hasOwnProperty("denotation")&&(ft.denotation=ut.denotation),ft},st.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},st.Tensor=function(){function ut(ht){if(ht)for(var ft=Object.keys(ht),gt=0;gt<ft.length;++gt)ht[ft[gt]]!=null&&(this[ft[gt]]=ht[ft[gt]])}return ut.prototype.elemType=0,ut.prototype.shape=null,ut.create=function(ht){return new ut(ht)},ut.encode=function(ht,ft){return ft||(ft=lt.create()),ht.elemType!=null&&ht.hasOwnProperty("elemType")&&ft.uint32(8).int32(ht.elemType),ht.shape!=null&&ht.hasOwnProperty("shape")&&dt.onnx.TensorShapeProto.encode(ht.shape,ft.uint32(18).fork()).ldelim(),ft},ut.encodeDelimited=function(ht,ft){return this.encode(ht,ft).ldelim()},ut.decode=function(ht,ft){ht instanceof at||(ht=at.create(ht));for(var gt=ft===void 0?ht.len:ht.pos+ft,mt=new dt.onnx.TypeProto.Tensor;ht.pos<gt;){var yt=ht.uint32();switch(yt>>>3){case 1:mt.elemType=ht.int32();break;case 2:mt.shape=dt.onnx.TensorShapeProto.decode(ht,ht.uint32());break;default:ht.skipType(7&yt)}}return mt},ut.decodeDelimited=function(ht){return ht instanceof at||(ht=new at(ht)),this.decode(ht,ht.uint32())},ut.verify=function(ht){if(typeof ht!="object"||ht===null)return"object expected";if(ht.elemType!=null&&ht.hasOwnProperty("elemType")&&!ct.isInteger(ht.elemType))return"elemType: integer expected";if(ht.shape!=null&&ht.hasOwnProperty("shape")){var ft=dt.onnx.TensorShapeProto.verify(ht.shape);if(ft)return"shape."+ft}return null},ut.fromObject=function(ht){if(ht instanceof dt.onnx.TypeProto.Tensor)return ht;var ft=new dt.onnx.TypeProto.Tensor;if(ht.elemType!=null&&(ft.elemType=0|ht.elemType),ht.shape!=null){if(typeof ht.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");ft.shape=dt.onnx.TensorShapeProto.fromObject(ht.shape)}return ft},ut.toObject=function(ht,ft){ft||(ft={});var gt={};return ft.defaults&&(gt.elemType=0,gt.shape=null),ht.elemType!=null&&ht.hasOwnProperty("elemType")&&(gt.elemType=ht.elemType),ht.shape!=null&&ht.hasOwnProperty("shape")&&(gt.shape=dt.onnx.TensorShapeProto.toObject(ht.shape,ft)),gt},ut.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},ut}(),st}(),nt.OperatorSetIdProto=function(){function st(it){if(it)for(var ut=Object.keys(it),ht=0;ht<ut.length;++ht)it[ut[ht]]!=null&&(this[ut[ht]]=it[ut[ht]])}return st.prototype.domain="",st.prototype.version=ct.Long?ct.Long.fromBits(0,0,!1):0,st.create=function(it){return new st(it)},st.encode=function(it,ut){return ut||(ut=lt.create()),it.domain!=null&&it.hasOwnProperty("domain")&&ut.uint32(10).string(it.domain),it.version!=null&&it.hasOwnProperty("version")&&ut.uint32(16).int64(it.version),ut},st.encodeDelimited=function(it,ut){return this.encode(it,ut).ldelim()},st.decode=function(it,ut){it instanceof at||(it=at.create(it));for(var ht=ut===void 0?it.len:it.pos+ut,ft=new dt.onnx.OperatorSetIdProto;it.pos<ht;){var gt=it.uint32();switch(gt>>>3){case 1:ft.domain=it.string();break;case 2:ft.version=it.int64();break;default:it.skipType(7&gt)}}return ft},st.decodeDelimited=function(it){return it instanceof at||(it=new at(it)),this.decode(it,it.uint32())},st.verify=function(it){return typeof it!="object"||it===null?"object expected":it.domain!=null&&it.hasOwnProperty("domain")&&!ct.isString(it.domain)?"domain: string expected":it.version!=null&&it.hasOwnProperty("version")&&!(ct.isInteger(it.version)||it.version&&ct.isInteger(it.version.low)&&ct.isInteger(it.version.high))?"version: integer|Long expected":null},st.fromObject=function(it){if(it instanceof dt.onnx.OperatorSetIdProto)return it;var ut=new dt.onnx.OperatorSetIdProto;return it.domain!=null&&(ut.domain=String(it.domain)),it.version!=null&&(ct.Long?(ut.version=ct.Long.fromValue(it.version)).unsigned=!1:typeof it.version=="string"?ut.version=parseInt(it.version,10):typeof it.version=="number"?ut.version=it.version:typeof it.version=="object"&&(ut.version=new ct.LongBits(it.version.low>>>0,it.version.high>>>0).toNumber())),ut},st.toObject=function(it,ut){ut||(ut={});var ht={};if(ut.defaults)if(ht.domain="",ct.Long){var ft=new ct.Long(0,0,!1);ht.version=ut.longs===String?ft.toString():ut.longs===Number?ft.toNumber():ft}else ht.version=ut.longs===String?"0":0;return it.domain!=null&&it.hasOwnProperty("domain")&&(ht.domain=it.domain),it.version!=null&&it.hasOwnProperty("version")&&(typeof it.version=="number"?ht.version=ut.longs===String?String(it.version):it.version:ht.version=ut.longs===String?ct.Long.prototype.toString.call(it.version):ut.longs===Number?new ct.LongBits(it.version.low>>>0,it.version.high>>>0).toNumber():it.version),ht},st.prototype.toJSON=function(){return this.constructor.toObject(this,ot.util.toJSONOptions)},st}(),nt),_e.exports=dt},2100:(_e,_,et)=>{_e.exports=et(9482)},9482:(_e,_,et)=>{var tt=_;function rt(){tt.util._configure(),tt.Writer._configure(tt.BufferWriter),tt.Reader._configure(tt.BufferReader)}tt.build="minimal",tt.Writer=et(1173),tt.BufferWriter=et(3155),tt.Reader=et(1408),tt.BufferReader=et(593),tt.util=et(9693),tt.rpc=et(5994),tt.roots=et(5054),tt.configure=rt,rt()},1408:(_e,_,et)=>{_e.exports=lt;var tt,rt=et(9693),nt=rt.LongBits,ot=rt.utf8;function at(ft,gt){return RangeError("index out of range: "+ft.pos+" + "+(gt||1)+" > "+ft.len)}function lt(ft){this.buf=ft,this.pos=0,this.len=ft.length}var ct,dt=typeof Uint8Array<"u"?function(ft){if(ft instanceof Uint8Array||Array.isArray(ft))return new lt(ft);throw Error("illegal buffer")}:function(ft){if(Array.isArray(ft))return new lt(ft);throw Error("illegal buffer")},st=function(){return rt.Buffer?function(ft){return(lt.create=function(gt){return rt.Buffer.isBuffer(gt)?new tt(gt):dt(gt)})(ft)}:dt};function it(){var ft=new nt(0,0),gt=0;if(!(this.len-this.pos>4)){for(;gt<3;++gt){if(this.pos>=this.len)throw at(this);if(ft.lo=(ft.lo|(127&this.buf[this.pos])<<7*gt)>>>0,this.buf[this.pos++]<128)return ft}return ft.lo=(ft.lo|(127&this.buf[this.pos++])<<7*gt)>>>0,ft}for(;gt<4;++gt)if(ft.lo=(ft.lo|(127&this.buf[this.pos])<<7*gt)>>>0,this.buf[this.pos++]<128)return ft;if(ft.lo=(ft.lo|(127&this.buf[this.pos])<<28)>>>0,ft.hi=(ft.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return ft;if(gt=0,this.len-this.pos>4){for(;gt<5;++gt)if(ft.hi=(ft.hi|(127&this.buf[this.pos])<<7*gt+3)>>>0,this.buf[this.pos++]<128)return ft}else for(;gt<5;++gt){if(this.pos>=this.len)throw at(this);if(ft.hi=(ft.hi|(127&this.buf[this.pos])<<7*gt+3)>>>0,this.buf[this.pos++]<128)return ft}throw Error("invalid varint encoding")}function ut(ft,gt){return(ft[gt-4]|ft[gt-3]<<8|ft[gt-2]<<16|ft[gt-1]<<24)>>>0}function ht(){if(this.pos+8>this.len)throw at(this,8);return new nt(ut(this.buf,this.pos+=4),ut(this.buf,this.pos+=4))}lt.create=st(),lt.prototype._slice=rt.Array.prototype.subarray||rt.Array.prototype.slice,lt.prototype.uint32=(ct=4294967295,function(){if(ct=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(ct=(ct|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(ct=(ct|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(ct=(ct|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(ct=(ct|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return ct;if((this.pos+=5)>this.len)throw this.pos=this.len,at(this,10);return ct}),lt.prototype.int32=function(){return 0|this.uint32()},lt.prototype.sint32=function(){var ft=this.uint32();return ft>>>1^-(1&ft)|0},lt.prototype.bool=function(){return this.uint32()!==0},lt.prototype.fixed32=function(){if(this.pos+4>this.len)throw at(this,4);return ut(this.buf,this.pos+=4)},lt.prototype.sfixed32=function(){if(this.pos+4>this.len)throw at(this,4);return 0|ut(this.buf,this.pos+=4)},lt.prototype.float=function(){if(this.pos+4>this.len)throw at(this,4);var ft=rt.float.readFloatLE(this.buf,this.pos);return this.pos+=4,ft},lt.prototype.double=function(){if(this.pos+8>this.len)throw at(this,4);var ft=rt.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,ft},lt.prototype.bytes=function(){var ft=this.uint32(),gt=this.pos,mt=this.pos+ft;if(mt>this.len)throw at(this,ft);return this.pos+=ft,Array.isArray(this.buf)?this.buf.slice(gt,mt):gt===mt?new this.buf.constructor(0):this._slice.call(this.buf,gt,mt)},lt.prototype.string=function(){var ft=this.bytes();return ot.read(ft,0,ft.length)},lt.prototype.skip=function(ft){if(typeof ft=="number"){if(this.pos+ft>this.len)throw at(this,ft);this.pos+=ft}else do if(this.pos>=this.len)throw at(this);while(128&this.buf[this.pos++]);return this},lt.prototype.skipType=function(ft){switch(ft){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(ft=7&this.uint32())!=4;)this.skipType(ft);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+ft+" at offset "+this.pos)}return this},lt._configure=function(ft){tt=ft,lt.create=st(),tt._configure();var gt=rt.Long?"toLong":"toNumber";rt.merge(lt.prototype,{int64:function(){return it.call(this)[gt](!1)},uint64:function(){return it.call(this)[gt](!0)},sint64:function(){return it.call(this).zzDecode()[gt](!1)},fixed64:function(){return ht.call(this)[gt](!0)},sfixed64:function(){return ht.call(this)[gt](!1)}})}},593:(_e,_,et)=>{_e.exports=nt;var tt=et(1408);(nt.prototype=Object.create(tt.prototype)).constructor=nt;var rt=et(9693);function nt(ot){tt.call(this,ot)}nt._configure=function(){rt.Buffer&&(nt.prototype._slice=rt.Buffer.prototype.slice)},nt.prototype.string=function(){var ot=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+ot,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+ot,this.len))},nt._configure()},5054:_e=>{_e.exports={}},5994:(_e,_,et)=>{_.Service=et(7948)},7948:(_e,_,et)=>{_e.exports=rt;var tt=et(9693);function rt(nt,ot,at){if(typeof nt!="function")throw TypeError("rpcImpl must be a function");tt.EventEmitter.call(this),this.rpcImpl=nt,this.requestDelimited=!!ot,this.responseDelimited=!!at}(rt.prototype=Object.create(tt.EventEmitter.prototype)).constructor=rt,rt.prototype.rpcCall=function nt(ot,at,lt,ct,dt){if(!ct)throw TypeError("request must be specified");var st=this;if(!dt)return tt.asPromise(nt,st,ot,at,lt,ct);if(st.rpcImpl)try{return st.rpcImpl(ot,at[st.requestDelimited?"encodeDelimited":"encode"](ct).finish(),function(it,ut){if(it)return st.emit("error",it,ot),dt(it);if(ut!==null){if(!(ut instanceof lt))try{ut=lt[st.responseDelimited?"decodeDelimited":"decode"](ut)}catch(ht){return st.emit("error",ht,ot),dt(ht)}return st.emit("data",ut,ot),dt(null,ut)}st.end(!0)})}catch(it){return st.emit("error",it,ot),void setTimeout(function(){dt(it)},0)}else setTimeout(function(){dt(Error("already ended"))},0)},rt.prototype.end=function(nt){return this.rpcImpl&&(nt||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(_e,_,et)=>{_e.exports=rt;var tt=et(9693);function rt(lt,ct){this.lo=lt>>>0,this.hi=ct>>>0}var nt=rt.zero=new rt(0,0);nt.toNumber=function(){return 0},nt.zzEncode=nt.zzDecode=function(){return this},nt.length=function(){return 1};var ot=rt.zeroHash="\0\0\0\0\0\0\0\0";rt.fromNumber=function(lt){if(lt===0)return nt;var ct=lt<0;ct&&(lt=-lt);var dt=lt>>>0,st=(lt-dt)/4294967296>>>0;return ct&&(st=~st>>>0,dt=~dt>>>0,++dt>4294967295&&(dt=0,++st>4294967295&&(st=0))),new rt(dt,st)},rt.from=function(lt){if(typeof lt=="number")return rt.fromNumber(lt);if(tt.isString(lt)){if(!tt.Long)return rt.fromNumber(parseInt(lt,10));lt=tt.Long.fromString(lt)}return lt.low||lt.high?new rt(lt.low>>>0,lt.high>>>0):nt},rt.prototype.toNumber=function(lt){if(!lt&&this.hi>>>31){var ct=1+~this.lo>>>0,dt=~this.hi>>>0;return ct||(dt=dt+1>>>0),-(ct+4294967296*dt)}return this.lo+4294967296*this.hi},rt.prototype.toLong=function(lt){return tt.Long?new tt.Long(0|this.lo,0|this.hi,!!lt):{low:0|this.lo,high:0|this.hi,unsigned:!!lt}};var at=String.prototype.charCodeAt;rt.fromHash=function(lt){return lt===ot?nt:new rt((at.call(lt,0)|at.call(lt,1)<<8|at.call(lt,2)<<16|at.call(lt,3)<<24)>>>0,(at.call(lt,4)|at.call(lt,5)<<8|at.call(lt,6)<<16|at.call(lt,7)<<24)>>>0)},rt.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},rt.prototype.zzEncode=function(){var lt=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^lt)>>>0,this.lo=(this.lo<<1^lt)>>>0,this},rt.prototype.zzDecode=function(){var lt=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^lt)>>>0,this.hi=(this.hi>>>1^lt)>>>0,this},rt.prototype.length=function(){var lt=this.lo,ct=(this.lo>>>28|this.hi<<4)>>>0,dt=this.hi>>>24;return dt===0?ct===0?lt<16384?lt<128?1:2:lt<2097152?3:4:ct<16384?ct<128?5:6:ct<2097152?7:8:dt<128?9:10}},9693:function(_e,_,et){var tt=_;function rt(ot,at,lt){for(var ct=Object.keys(at),dt=0;dt<ct.length;++dt)ot[ct[dt]]!==void 0&&lt||(ot[ct[dt]]=at[ct[dt]]);return ot}function nt(ot){function at(lt,ct){if(!(this instanceof at))return new at(lt,ct);Object.defineProperty(this,"message",{get:function(){return lt}}),Error.captureStackTrace?Error.captureStackTrace(this,at):Object.defineProperty(this,"stack",{value:new Error().stack||""}),ct&&rt(this,ct)}return(at.prototype=Object.create(Error.prototype)).constructor=at,Object.defineProperty(at.prototype,"name",{get:function(){return ot}}),at.prototype.toString=function(){return this.name+": "+this.message},at}tt.asPromise=et(4537),tt.base64=et(7419),tt.EventEmitter=et(9211),tt.float=et(945),tt.inquire=et(7199),tt.utf8=et(4997),tt.pool=et(6662),tt.LongBits=et(1945),tt.isNode=!!(et.g!==void 0&&et.g&&et.g.process&&et.g.process.versions&&et.g.process.versions.node),tt.global=tt.isNode&&et.g||typeof window<"u"&&window||typeof self<"u"&&self||this,tt.emptyArray=Object.freeze?Object.freeze([]):[],tt.emptyObject=Object.freeze?Object.freeze({}):{},tt.isInteger=Number.isInteger||function(ot){return typeof ot=="number"&&isFinite(ot)&&Math.floor(ot)===ot},tt.isString=function(ot){return typeof ot=="string"||ot instanceof String},tt.isObject=function(ot){return ot&&typeof ot=="object"},tt.isset=tt.isSet=function(ot,at){var lt=ot[at];return!(lt==null||!ot.hasOwnProperty(at))&&(typeof lt!="object"||(Array.isArray(lt)?lt.length:Object.keys(lt).length)>0)},tt.Buffer=function(){try{var ot=tt.inquire("buffer").Buffer;return ot.prototype.utf8Write?ot:null}catch{return null}}(),tt._Buffer_from=null,tt._Buffer_allocUnsafe=null,tt.newBuffer=function(ot){return typeof ot=="number"?tt.Buffer?tt._Buffer_allocUnsafe(ot):new tt.Array(ot):tt.Buffer?tt._Buffer_from(ot):typeof Uint8Array>"u"?ot:new Uint8Array(ot)},tt.Array=typeof Uint8Array<"u"?Uint8Array:Array,tt.Long=tt.global.dcodeIO&&tt.global.dcodeIO.Long||tt.global.Long||tt.inquire("long"),tt.key2Re=/^true|false|0|1$/,tt.key32Re=/^-?(?:0|[1-9][0-9]*)$/,tt.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,tt.longToHash=function(ot){return ot?tt.LongBits.from(ot).toHash():tt.LongBits.zeroHash},tt.longFromHash=function(ot,at){var lt=tt.LongBits.fromHash(ot);return tt.Long?tt.Long.fromBits(lt.lo,lt.hi,at):lt.toNumber(!!at)},tt.merge=rt,tt.lcFirst=function(ot){return ot.charAt(0).toLowerCase()+ot.substring(1)},tt.newError=nt,tt.ProtocolError=nt("ProtocolError"),tt.oneOfGetter=function(ot){for(var at={},lt=0;lt<ot.length;++lt)at[ot[lt]]=1;return function(){for(var ct=Object.keys(this),dt=ct.length-1;dt>-1;--dt)if(at[ct[dt]]===1&&this[ct[dt]]!==void 0&&this[ct[dt]]!==null)return ct[dt]}},tt.oneOfSetter=function(ot){return function(at){for(var lt=0;lt<ot.length;++lt)ot[lt]!==at&&delete this[ot[lt]]}},tt.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},tt._configure=function(){var ot=tt.Buffer;ot?(tt._Buffer_from=ot.from!==Uint8Array.from&&ot.from||function(at,lt){return new ot(at,lt)},tt._Buffer_allocUnsafe=ot.allocUnsafe||function(at){return new ot(at)}):tt._Buffer_from=tt._Buffer_allocUnsafe=null}},1173:(_e,_,et)=>{_e.exports=st;var tt,rt=et(9693),nt=rt.LongBits,ot=rt.base64,at=rt.utf8;function lt(yt,bt,vt){this.fn=yt,this.len=bt,this.next=void 0,this.val=vt}function ct(){}function dt(yt){this.head=yt.head,this.tail=yt.tail,this.len=yt.len,this.next=yt.states}function st(){this.len=0,this.head=new lt(ct,0,0),this.tail=this.head,this.states=null}var it=function(){return rt.Buffer?function(){return(st.create=function(){return new tt})()}:function(){return new st}};function ut(yt,bt,vt){bt[vt]=255&yt}function ht(yt,bt){this.len=yt,this.next=void 0,this.val=bt}function ft(yt,bt,vt){for(;yt.hi;)bt[vt++]=127&yt.lo|128,yt.lo=(yt.lo>>>7|yt.hi<<25)>>>0,yt.hi>>>=7;for(;yt.lo>127;)bt[vt++]=127&yt.lo|128,yt.lo=yt.lo>>>7;bt[vt++]=yt.lo}function gt(yt,bt,vt){bt[vt]=255&yt,bt[vt+1]=yt>>>8&255,bt[vt+2]=yt>>>16&255,bt[vt+3]=yt>>>24}st.create=it(),st.alloc=function(yt){return new rt.Array(yt)},rt.Array!==Array&&(st.alloc=rt.pool(st.alloc,rt.Array.prototype.subarray)),st.prototype._push=function(yt,bt,vt){return this.tail=this.tail.next=new lt(yt,bt,vt),this.len+=bt,this},ht.prototype=Object.create(lt.prototype),ht.prototype.fn=function(yt,bt,vt){for(;yt>127;)bt[vt++]=127&yt|128,yt>>>=7;bt[vt]=yt},st.prototype.uint32=function(yt){return this.len+=(this.tail=this.tail.next=new ht((yt>>>=0)<128?1:yt<16384?2:yt<2097152?3:yt<268435456?4:5,yt)).len,this},st.prototype.int32=function(yt){return yt<0?this._push(ft,10,nt.fromNumber(yt)):this.uint32(yt)},st.prototype.sint32=function(yt){return this.uint32((yt<<1^yt>>31)>>>0)},st.prototype.uint64=function(yt){var bt=nt.from(yt);return this._push(ft,bt.length(),bt)},st.prototype.int64=st.prototype.uint64,st.prototype.sint64=function(yt){var bt=nt.from(yt).zzEncode();return this._push(ft,bt.length(),bt)},st.prototype.bool=function(yt){return this._push(ut,1,yt?1:0)},st.prototype.fixed32=function(yt){return this._push(gt,4,yt>>>0)},st.prototype.sfixed32=st.prototype.fixed32,st.prototype.fixed64=function(yt){var bt=nt.from(yt);return this._push(gt,4,bt.lo)._push(gt,4,bt.hi)},st.prototype.sfixed64=st.prototype.fixed64,st.prototype.float=function(yt){return this._push(rt.float.writeFloatLE,4,yt)},st.prototype.double=function(yt){return this._push(rt.float.writeDoubleLE,8,yt)};var mt=rt.Array.prototype.set?function(yt,bt,vt){bt.set(yt,vt)}:function(yt,bt,vt){for(var xt=0;xt<yt.length;++xt)bt[vt+xt]=yt[xt]};st.prototype.bytes=function(yt){var bt=yt.length>>>0;if(!bt)return this._push(ut,1,0);if(rt.isString(yt)){var vt=st.alloc(bt=ot.length(yt));ot.decode(yt,vt,0),yt=vt}return this.uint32(bt)._push(mt,bt,yt)},st.prototype.string=function(yt){var bt=at.length(yt);return bt?this.uint32(bt)._push(at.write,bt,yt):this._push(ut,1,0)},st.prototype.fork=function(){return this.states=new dt(this),this.head=this.tail=new lt(ct,0,0),this.len=0,this},st.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new lt(ct,0,0),this.len=0),this},st.prototype.ldelim=function(){var yt=this.head,bt=this.tail,vt=this.len;return this.reset().uint32(vt),vt&&(this.tail.next=yt.next,this.tail=bt,this.len+=vt),this},st.prototype.finish=function(){for(var yt=this.head.next,bt=this.constructor.alloc(this.len),vt=0;yt;)yt.fn(yt.val,bt,vt),vt+=yt.len,yt=yt.next;return bt},st._configure=function(yt){tt=yt,st.create=it(),tt._configure()}},3155:(_e,_,et)=>{_e.exports=nt;var tt=et(1173);(nt.prototype=Object.create(tt.prototype)).constructor=nt;var rt=et(9693);function nt(){tt.call(this)}function ot(at,lt,ct){at.length<40?rt.utf8.write(at,lt,ct):lt.utf8Write?lt.utf8Write(at,ct):lt.write(at,ct)}nt._configure=function(){nt.alloc=rt._Buffer_allocUnsafe,nt.writeBytesBuffer=rt.Buffer&&rt.Buffer.prototype instanceof Uint8Array&&rt.Buffer.prototype.set.name==="set"?function(at,lt,ct){lt.set(at,ct)}:function(at,lt,ct){if(at.copy)at.copy(lt,ct,0,at.length);else for(var dt=0;dt<at.length;)lt[ct++]=at[dt++]}},nt.prototype.bytes=function(at){rt.isString(at)&&(at=rt._Buffer_from(at,"base64"));var lt=at.length>>>0;return this.uint32(lt),lt&&this._push(nt.writeBytesBuffer,lt,at),this},nt.prototype.string=function(at){var lt=rt.Buffer.byteLength(at);return this.uint32(lt),lt&&this._push(ot,lt,at),this},nt._configure()},7714:(_e,_,et)=>{_.R=void 0;const tt=et(6919),rt=et(7448);_.R=new class{async init(){}async createSessionHandler(nt,ot){const at=new tt.Session(ot);return await at.loadModel(nt),new rt.OnnxjsSessionHandler(at)}}},4200:(_e,_,et)=>{_.c8=_.rX=void 0;const tt=et(1670),rt=et(5381),nt=et(2157),ot=et(2306);_.rX=()=>{if((typeof tt.env.wasm.initTimeout!="number"||tt.env.wasm.initTimeout<0)&&(tt.env.wasm.initTimeout=0),typeof tt.env.wasm.simd!="boolean"&&(tt.env.wasm.simd=!0),typeof tt.env.wasm.proxy!="boolean"&&(tt.env.wasm.proxy=!1),typeof tt.env.wasm.numThreads!="number"||!Number.isInteger(tt.env.wasm.numThreads)||tt.env.wasm.numThreads<=0){const at=typeof navigator>"u"?(0,rt.cpus)().length:navigator.hardwareConcurrency;tt.env.wasm.numThreads=Math.min(4,Math.ceil((at||1)/2))}},_.c8=new class{async init(){(0,_.rX)(),await(0,nt.initWasm)()}async createSessionHandler(at,lt){const ct=new ot.OnnxruntimeWebAssemblySessionHandler;return await ct.loadModel(at,lt),Promise.resolve(ct)}}},6018:function(_e,_,et){var tt=this&&this.__createBinding||(Object.create?function(ot,at,lt,ct){ct===void 0&&(ct=lt);var dt=Object.getOwnPropertyDescriptor(at,lt);dt&&!("get"in dt?!at.__esModule:dt.writable||dt.configurable)||(dt={enumerable:!0,get:function(){return at[lt]}}),Object.defineProperty(ot,ct,dt)}:function(ot,at,lt,ct){ct===void 0&&(ct=lt),ot[ct]=at[lt]}),rt=this&&this.__exportStar||function(ot,at){for(var lt in ot)lt==="default"||Object.prototype.hasOwnProperty.call(at,lt)||tt(at,ot,lt)};Object.defineProperty(_,"__esModule",{value:!0}),rt(et(1670),_);const nt=et(1670);{const ot=et(7714).R;(0,nt.registerBackend)("webgl",ot,-10)}{const ot=et(4200).c8;(0,nt.registerBackend)("cpu",ot,10),(0,nt.registerBackend)("wasm",ot,10),(0,nt.registerBackend)("xnnpack",ot,9)}},246:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createAttributeWithCacheKey=void 0;class et{constructor(rt){Object.assign(this,rt)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(rt=>`${this[rt]}`).join(";")),this._cacheKey}}_.createAttributeWithCacheKey=tt=>new et(tt)},7778:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Attribute=void 0;const tt=et(1446),rt=et(9395),nt=et(9162),ot=et(2517);var at=rt.onnxruntime.experimental.fbs;class lt{constructor(dt){if(this._attributes=new Map,dt!=null){for(const st of dt)st instanceof tt.onnx.AttributeProto?this._attributes.set(st.name,[lt.getValue(st),lt.getType(st)]):st instanceof at.Attribute&&this._attributes.set(st.name(),[lt.getValue(st),lt.getType(st)]);if(this._attributes.size<dt.length)throw new Error("duplicated attribute names")}}set(dt,st,it){this._attributes.set(dt,[it,st])}delete(dt){this._attributes.delete(dt)}getFloat(dt,st){return this.get(dt,"float",st)}getInt(dt,st){return this.get(dt,"int",st)}getString(dt,st){return this.get(dt,"string",st)}getTensor(dt,st){return this.get(dt,"tensor",st)}getFloats(dt,st){return this.get(dt,"floats",st)}getInts(dt,st){return this.get(dt,"ints",st)}getStrings(dt,st){return this.get(dt,"strings",st)}getTensors(dt,st){return this.get(dt,"tensors",st)}get(dt,st,it){const ut=this._attributes.get(dt);if(ut===void 0){if(it!==void 0)return it;throw new Error(`required attribute not found: ${dt}`)}if(ut[1]!==st)throw new Error(`type mismatch: expected ${st} but got ${ut[1]}`);return ut[0]}static getType(dt){const st=dt instanceof tt.onnx.AttributeProto?dt.type:dt.type();switch(st){case tt.onnx.AttributeProto.AttributeType.FLOAT:return"float";case tt.onnx.AttributeProto.AttributeType.INT:return"int";case tt.onnx.AttributeProto.AttributeType.STRING:return"string";case tt.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case tt.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case tt.onnx.AttributeProto.AttributeType.INTS:return"ints";case tt.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case tt.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${tt.onnx.AttributeProto.AttributeType[st]}`)}}static getValue(dt){const st=dt instanceof tt.onnx.AttributeProto?dt.type:dt.type();if(st===tt.onnx.AttributeProto.AttributeType.GRAPH||st===tt.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const it=this.getValueNoCheck(dt);if(st===tt.onnx.AttributeProto.AttributeType.INT&&ot.LongUtil.isLong(it))return ot.LongUtil.longToNumber(it);if(st===tt.onnx.AttributeProto.AttributeType.INTS){const ut=it,ht=new Array(ut.length);for(let ft=0;ft<ut.length;ft++){const gt=ut[ft];ht[ft]=ot.LongUtil.longToNumber(gt)}return ht}if(st===tt.onnx.AttributeProto.AttributeType.TENSOR)return dt instanceof tt.onnx.AttributeProto?nt.Tensor.fromProto(it):nt.Tensor.fromOrtTensor(it);if(st===tt.onnx.AttributeProto.AttributeType.TENSORS){if(dt instanceof tt.onnx.AttributeProto)return it.map(ut=>nt.Tensor.fromProto(ut));if(dt instanceof at.Attribute)return it.map(ut=>nt.Tensor.fromOrtTensor(ut))}if(st===tt.onnx.AttributeProto.AttributeType.STRING&&dt instanceof tt.onnx.AttributeProto){const ut=it;return(0,ot.decodeUtf8String)(ut)}return st===tt.onnx.AttributeProto.AttributeType.STRINGS&&dt instanceof tt.onnx.AttributeProto?it.map(ot.decodeUtf8String):it}static getValueNoCheck(dt){return dt instanceof tt.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(dt):this.getValueNoCheckFromOrtFormat(dt)}static getValueNoCheckFromOnnxFormat(dt){switch(dt.type){case tt.onnx.AttributeProto.AttributeType.FLOAT:return dt.f;case tt.onnx.AttributeProto.AttributeType.INT:return dt.i;case tt.onnx.AttributeProto.AttributeType.STRING:return dt.s;case tt.onnx.AttributeProto.AttributeType.TENSOR:return dt.t;case tt.onnx.AttributeProto.AttributeType.GRAPH:return dt.g;case tt.onnx.AttributeProto.AttributeType.FLOATS:return dt.floats;case tt.onnx.AttributeProto.AttributeType.INTS:return dt.ints;case tt.onnx.AttributeProto.AttributeType.STRINGS:return dt.strings;case tt.onnx.AttributeProto.AttributeType.TENSORS:return dt.tensors;case tt.onnx.AttributeProto.AttributeType.GRAPHS:return dt.graphs;default:throw new Error(`unsupported attribute type: ${tt.onnx.AttributeProto.AttributeType[dt.type]}`)}}static getValueNoCheckFromOrtFormat(dt){switch(dt.type()){case at.AttributeType.FLOAT:return dt.f();case at.AttributeType.INT:return dt.i();case at.AttributeType.STRING:return dt.s();case at.AttributeType.TENSOR:return dt.t();case at.AttributeType.GRAPH:return dt.g();case at.AttributeType.FLOATS:return dt.floatsArray();case at.AttributeType.INTS:{const st=[];for(let it=0;it<dt.intsLength();it++)st.push(dt.ints(it));return st}case at.AttributeType.STRINGS:{const st=[];for(let it=0;it<dt.stringsLength();it++)st.push(dt.strings(it));return st}case at.AttributeType.TENSORS:{const st=[];for(let it=0;it<dt.tensorsLength();it++)st.push(dt.tensors(it));return st}default:throw new Error(`unsupported attribute type: ${at.AttributeType[dt.type()]}`)}}}_.Attribute=lt},7091:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.resolveBackend=_.backend=void 0;const tt=et(5038),rt=new Map;async function nt(ot){const at=_.backend;if(at[ot]!==void 0&&function(lt){const ct=lt;return"initialize"in ct&&typeof ct.initialize=="function"&&"createSessionHandler"in ct&&typeof ct.createSessionHandler=="function"&&"dispose"in ct&&typeof ct.dispose=="function"}(at[ot])){const lt=at[ot];let ct=lt.initialize();if(typeof ct=="object"&&"then"in ct&&(ct=await ct),ct)return rt.set(ot,lt),lt}}_.backend={webgl:new tt.WebGLBackend},_.resolveBackend=async function ot(at){if(!at)return ot(["webgl"]);{const lt=typeof at=="string"?[at]:at;for(const ct of lt){const dt=rt.get(ct);if(dt)return dt;const st=await nt(ct);if(st)return st}}throw new Error("no available backend to use")}},5038:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLBackend=void 0;const tt=et(1670),rt=et(6231),nt=et(6416),ot=et(7305);_.WebGLBackend=class{get contextId(){return tt.env.webgl.contextId}set contextId(at){tt.env.webgl.contextId=at}get matmulMaxBatchSize(){return tt.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(at){tt.env.webgl.matmulMaxBatchSize=at}get textureCacheMode(){return tt.env.webgl.textureCacheMode}set textureCacheMode(at){tt.env.webgl.textureCacheMode=at}get pack(){return tt.env.webgl.pack}set pack(at){tt.env.webgl.pack=at}get async(){return tt.env.webgl.async}set async(at){tt.env.webgl.async=at}initialize(){try{return this.glContext=(0,ot.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),rt.Logger.setWithEnv(tt.env),rt.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(at){return rt.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${at}`),!1}}createSessionHandler(at){return new nt.WebGLSessionHandler(this,at)}dispose(){this.glContext.dispose()}}},5107:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CoordsGlslLib=void 0;const tt=et(2517),rt=et(8520),nt=et(5060),ot=et(7859),at=et(9390);class lt extends rt.GlslLib{constructor(dt){super(dt)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new rt.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new rt.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const dt=this.context.outputTextureLayout;return dt.isPacked?this.getPackedOutputSamplingSnippet(dt):this.getUnpackedOutputSamplingSnippet(dt)}getPackedOutputSamplingSnippet(dt){const st=dt.unpackedShape,it=[dt.width,dt.height],ut={},ht="getOutputCoords";switch(st.length){case 0:ut[ht]=this.getOutputScalarCoords();break;case 1:ut[ht]=this.getOutputPacked1DCoords(st,it);break;case 2:ut[ht]=this.getOutputPacked2DCoords(st,it);break;case 3:ut[ht]=this.getOutputPacked3DCoords(st,it);break;default:ut[ht]=this.getOutputPackedNDCoords(st,it)}const ft=`
      void setOutput(vec4 val) {
        ${(0,nt.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return ut.floatTextureSetRGBA=new rt.GlslLibRoutine(ft),ut}getUnpackedOutputSamplingSnippet(dt){const st=dt.unpackedShape,it=[dt.width,dt.height],ut={},ht="getOutputCoords";switch(st.length){case 0:ut[ht]=this.getOutputScalarCoords();break;case 1:ut[ht]=this.getOutputUnpacked1DCoords(st,it);break;case 2:ut[ht]=this.getOutputUnpacked2DCoords(st,it);break;case 3:ut[ht]=this.getOutputUnpacked3DCoords(st,it);break;case 4:ut[ht]=this.getOutputUnpacked4DCoords(st,it);break;case 5:ut[ht]=this.getOutputUnpacked5DCoords(st,it);break;case 6:ut[ht]=this.getOutputUnpacked6DCoords(st,it);break;default:throw new Error(`Unsupported output dimensionality: ${st.length}`)}const ft=`
        void setOutput(float val) {
          ${(0,nt.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return ut.floatTextureSetR=new rt.GlslLibRoutine(ft),ut}getOutputScalarCoords(){return new rt.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(dt,st){const it=st;let ut="";return it[0]===1?(ut=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${it[1]}.0);
          }
        `,new rt.GlslLibRoutine(ut)):it[1]===1?(ut=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${it[0]}.0);
          }
        `,new rt.GlslLibRoutine(ut)):(ut=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${it[0]}, ${it[1]}));
          return 2 * (resTexRC.y * ${it[0]} + resTexRC.x);
        }
      `,new rt.GlslLibRoutine(ut))}getOutputPacked2DCoords(dt,st){let it="";if(tt.ArrayUtil.arraysEqual(dt,st))return it=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${st[0]}, ${st[1]}));
        }
      `,new rt.GlslLibRoutine(it);const ut=st,ht=Math.ceil(dt[1]/2);return it=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ut[0]}, ${ut[1]}));

          int index = resTexRC.y * ${ut[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${ht}) * 2;
          int c = 2 * (index / ${ht});

          return ivec2(r, c);
        }
      `,new rt.GlslLibRoutine(it)}getOutputPacked3DCoords(dt,st){const it=[st[0],st[1]],ut=Math.ceil(dt[2]/2),ht=ut*Math.ceil(dt[1]/2),ft=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${it[0]}, ${it[1]}));
          int index = resTexRC.y * ${it[0]} + resTexRC.x;

          int b = index / ${ht};
          index -= b * ${ht};

          // reverse r and c order for packed texture
          int r = imod(index, ${ut}) * 2;
          int c = 2 * (index / ${ut});

          return ivec3(b, r, c);
        }
      `;return new rt.GlslLibRoutine(ft)}getOutputPackedNDCoords(dt,st){const it=[st[0],st[1]],ut=Math.ceil(dt[dt.length-1]/2),ht=ut*Math.ceil(dt[dt.length-2]/2);let ft=ht,gt="",mt="b, r, c";for(let bt=2;bt<dt.length-1;bt++)ft*=dt[dt.length-bt-1],gt=`
      int b${bt} = index / ${ft};
      index -= b${bt} * ${ft};
    `+gt,mt=`b${bt}, `+mt;const yt=`
      ivec${dt.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${it[0]}, ${it[1]}));
        int index = resTexRC.y * ${it[0]} + resTexRC.x;

        ${gt}

        int b = index / ${ht};
        index -= b * ${ht};

        // reverse r and c order for packed texture
        int r = imod(index, ${ut}) * 2;
        int c = 2 * (index / ${ut});

        return ivec${dt.length}(${mt});
      }
    `;return new rt.GlslLibRoutine(yt)}getOutputUnpacked1DCoords(dt,st){const it=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${st[0]}, ${st[1]}));
          return resTexRC.y * ${st[0]} + resTexRC.x;
        }
      `;return new rt.GlslLibRoutine(it)}getOutputUnpacked2DCoords(dt,st){const it=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${st[0]}, ${st[1]}));
          int index = resTexRC.y * ${st[0]} + resTexRC.x;
          int r = index / ${dt[1]};
          int c = index - r * ${dt[1]};
          return ivec2(r, c);
        }
      `;return new rt.GlslLibRoutine(it)}getOutputUnpacked3DCoords(dt,st){let it="";const ut=dt.length;let ht=null;ut<2&&(ht=[]),ht=new Array(ut-1),ht[ut-2]=dt[ut-1];for(let mt=ut-3;mt>=0;--mt)ht[mt]=ht[mt+1]*dt[mt+1];const ft=["r","c","d"],gt=ht.map((mt,yt)=>`int ${ft[yt]} = index / ${mt}; ${yt===ht.length-1?`int ${ft[yt+1]} = index - ${ft[yt]} * ${mt}`:`index -= ${ft[yt]} * ${mt}`};`).join("");return it=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${st[0]}, ${st[1]}));
          int index = resTexRC.y * ${st[0]} + resTexRC.x;
          ${gt}
          return ivec3(r, c, d);
        }
      `,new rt.GlslLibRoutine(it)}getOutputUnpacked4DCoords(dt,st){let it="";const ut=dt.length;let ht=null;ut<2&&(ht=[]),ht=new Array(ut-1),ht[ut-2]=dt[ut-1];for(let mt=ut-3;mt>=0;--mt)ht[mt]=ht[mt+1]*dt[mt+1];const ft=["r","c","d","d2"],gt=ht.map((mt,yt)=>`int ${ft[yt]} = index / ${mt}; ${yt===ht.length-1?`int ${ft[yt+1]} = index - ${ft[yt]} * ${mt}`:`index -= ${ft[yt]} * ${mt}`};`).join("");return it=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${st[0]}, ${st[1]}));
          int index = resTexRC.y * ${st[0]} + resTexRC.x;
          ${gt}
          return ivec4(r, c, d, d2);
        }
      `,new rt.GlslLibRoutine(it)}getOutputUnpacked5DCoords(dt,st){let it="";const ut=dt.length;let ht=null;ut<2&&(ht=[]),ht=new Array(ut-1),ht[ut-2]=dt[ut-1];for(let mt=ut-3;mt>=0;--mt)ht[mt]=ht[mt+1]*dt[mt+1];const ft=["r","c","d","d2","d3"],gt=ht.map((mt,yt)=>`int ${ft[yt]} = index / ${mt}; ${yt===ht.length-1?`int ${ft[yt+1]} = index - ${ft[yt]} * ${mt}`:`index -= ${ft[yt]} * ${mt}`};`).join("");return it=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${st[0]}, ${st[1]}));
          int index = resTexRC.y * ${st[0]} + resTexRC.x;
          ${gt}
          return ivec5(r, c, d, d2, d3);
        }
      `,new rt.GlslLibRoutine(it)}getOutputUnpacked6DCoords(dt,st){let it="";const ut=dt.length;let ht=null;ut<2&&(ht=[]),ht=new Array(ut-1),ht[ut-2]=dt[ut-1];for(let mt=ut-3;mt>=0;--mt)ht[mt]=ht[mt+1]*dt[mt+1];const ft=["r","c","d","d2","d3","d4"],gt=ht.map((mt,yt)=>`int ${ft[yt]} = index / ${mt}; ${yt===ht.length-1?`int ${ft[yt+1]} = index - ${ft[yt]} * ${mt}`:`index -= ${ft[yt]} * ${mt}`};`).join("");return it=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${st[0]}, ${st[1]}));
         int index = resTexRC.y * ${st[0]} + resTexRC.x;
         ${gt}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new rt.GlslLibRoutine(it)}getCommonUtilFuncs(){const dt={};let st="uvFromFlat";dt[st]=new rt.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),st="packedUVfrom1D",dt[st]=new rt.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),st="packedUVfrom2D",dt[st]=new rt.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),st="packedUVfrom3D",dt[st]=new rt.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),st="sampleTexture";const it=(0,nt.getGlsl)(this.context.glContext.version);return dt[st]=new rt.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${it.texture2D}(textureSampler, uv).r;
        }`),dt}getInputsSamplingSnippets(){const dt={},st=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((it,ut)=>{const ht=this.context.inputTextureLayouts[ut],ft=(0,at.generateShaderFuncNameFromInputSamplerName)(it);ht.isPacked?dt[ft]=this.getPackedSamplerFromInput(ft,it,ht):dt[ft]=this.getUnpackedSamplerFromInput(ft,it,ht);const gt=(0,at.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(it);ht.unpackedShape.length<=st.unpackedShape.length&&(ht.isPacked?dt[gt]=this.getPackedSamplerAtOutputCoords(gt,ht,st,it):dt[gt]=this.getUnpackedSamplerAtOutputCoords(gt,ht,st,it))}),dt}getPackedSamplerAtOutputCoords(dt,st,it,ut){const ht=st.unpackedShape,ft=it.unpackedShape,gt=ut,mt=(0,at.generateShaderFuncNameFromInputSamplerName)(gt),yt=ht.length,bt=ft.length,vt=tt.BroadcastUtil.getBroadcastDims(ht,ft),xt=(0,at.getCoordsDataType)(bt),wt=bt-yt;let St;const Et=(0,at.getGlChannels)();St=yt===0?"":bt<2&&vt.length>=1?"coords = 0;":vt.map(Ct=>`coords.${Et[Ct+wt]} = 0;`).join(`
`);let _t="";_t=bt<2&&yt>0?"coords":ht.map((Ct,$t)=>`coords.${Et[$t+wt]}`).join(", ");let Tt="return outputValue;";const Rt=tt.ShapeUtil.size(ht)===1,Ot=tt.ShapeUtil.size(ft)===1;if(yt!==1||Rt||Ot){if(Rt&&!Ot)Tt=bt===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(vt.length){const Ct=yt-2,$t=yt-1;vt.indexOf(Ct)>-1&&vt.indexOf($t)>-1?Tt="return vec4(outputValue.x);":vt.indexOf(Ct)>-1?Tt="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":vt.indexOf($t)>-1&&(Tt="return vec4(outputValue.xx, outputValue.zz);")}}else Tt=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const At=`
      vec4 ${dt}() {
        ${xt} coords = getOutputCoords();
        
        int lastDim = coords.${Et[bt-1]};
        coords.${Et[bt-1]} = coords.${Et[bt-2]};
        coords.${Et[bt-2]} = lastDim;
      
        ${St}
        vec4 outputValue = ${mt}(${_t});
        ${Tt}
      }
    `;return new rt.GlslLibRoutine(At,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(dt,st,it,ut){const ht=[it.width,it.height],ft=[st.width,st.height],gt=st.unpackedShape.length,mt=it.unpackedShape.length,yt=st.unpackedShape,bt=it.unpackedShape,vt=(0,at.generateShaderFuncNameFromInputSamplerName)(ut);if(gt===mt&&tt.ArrayUtil.arraysEqual(ft,ht)){const Ot=`
          float ${dt}() {
            return sampleTexture(${ut}, TexCoords);
          }
        `;return new rt.GlslLibRoutine(Ot,["coordinates.sampleTexture"])}const xt=(0,at.getCoordsDataType)(mt),wt=tt.BroadcastUtil.getBroadcastDims(yt,bt),St=mt-gt;let Et;const _t=(0,at.getGlChannels)();Et=gt===0?"":mt<2&&wt.length>=1?"coords = 0;":wt.map(Ot=>`coords.${_t[Ot+St]} = 0;`).join(`
`);let Tt="";Tt=mt<2&&gt>0?"coords":st.unpackedShape.map((Ot,At)=>`coords.${_t[At+St]}`).join(", ");const Rt=`
        float ${dt}() {
          ${xt} coords = getOutputCoords();
          ${Et}
          return ${vt}(${Tt});
        }
      `;return new rt.GlslLibRoutine(Rt,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(dt,st,it){switch(it.unpackedShape.length){case 0:return this.getPackedSamplerScalar(dt,st);case 1:return this.getPackedSampler1D(dt,st,it);case 2:return this.getPackedSampler2D(dt,st,it);case 3:return this.getPackedSampler3D(dt,st,it);default:return this.getPackedSamplerND(dt,st,it)}}getUnpackedSamplerFromInput(dt,st,it){const ut=it.unpackedShape;switch(ut.length){case 0:return this.getUnpackedSamplerScalar(dt,st,it);case 1:return this.getUnpackedSampler1D(dt,st,it);case 2:return this.getUnpackedSampler2D(dt,st,it);case 3:return this.getUnpackedSampler3D(dt,st,it);case 4:return this.getUnpackedSampler4D(dt,st,it);case 5:return this.getUnpackedSampler5D(dt,st,it);case 6:return this.getUnpackedSampler6D(dt,st,it);default:throw new Error(`Unsupported dimension ${ut.length}-D`)}}getPackedSamplerScalar(dt,st){const it=`
          vec4 ${dt}() {
            return ${(0,nt.getGlsl)(this.context.glContext.version).texture2D}(${st}, halfCR);
          }
        `;return new rt.GlslLibRoutine(it)}getPackedSampler1D(dt,st,it){const ut=[it.width,it.height],ht=[ut[1],ut[0]],ft=(0,nt.getGlsl)(this.context.glContext.version),gt=`vec4 ${dt}(int index) {
      vec2 uv = packedUVfrom1D(
      ${ht[0]}, ${ht[1]}, index);
      return ${ft.texture2D}(${st}, uv);
    }`;return new rt.GlslLibRoutine(gt,["coordinates.packedUVfrom1D"])}getPackedSampler2D(dt,st,it){const ut=it.unpackedShape,ht=[it.width,it.height],ft=(0,nt.getGlsl)(this.context.glContext.version),gt=ht[0],mt=ht[1];if(ht!=null&&tt.ArrayUtil.arraysEqual(ut,ht)){const xt=`vec4 ${dt}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${mt}.0, ${gt}.0);
        return ${ft.texture2D}(${st}, uv);
      }`;return new rt.GlslLibRoutine(xt)}const yt=ht,bt=Math.ceil(ut[1]/2),vt=`vec4 ${dt}(int row, int col) {
      vec2 uv = packedUVfrom2D(${yt[1]}, ${yt[0]}, ${bt}, row, col);
      return ${ft.texture2D}(${st}, uv);
    }`;return new rt.GlslLibRoutine(vt,["coordinates.packedUVfrom2D"])}getPackedSampler3D(dt,st,it){const ut=it.unpackedShape,ht=[it.width,it.height],ft=[ht[0],ht[1]],gt=(0,nt.getGlsl)(this.context.glContext.version);if(ut[0]===1){const xt=ut.slice(1),wt=[1,2],St=(0,at.squeezeInputShape)(ut,xt),Et=["b","row","col"],_t=JSON.parse(JSON.stringify(it));_t.unpackedShape=St;const Tt=this.getPackedSamplerFromInput(dt,st,_t),Rt=`${Tt.routineBody}
      vec4 ${dt}(int b, int row, int col) {
        return ${dt}(${(0,at.getSqueezedParams)(Et,wt)});
      } `;return new rt.GlslLibRoutine(Rt,Tt.dependencies)}const mt=ft[0],yt=ft[1],bt=Math.ceil(ut[2]/2),vt=`vec4 ${dt}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${yt}, ${mt}, ${bt*Math.ceil(ut[1]/2)}, ${bt}, b, row, col);
      return ${gt.texture2D}(${st}, uv);}`;return new rt.GlslLibRoutine(vt,["coordinates.packedUVfrom3D"])}getPackedSamplerND(dt,st,it){const ut=it.unpackedShape,ht=ut.length,ft=[it.width,it.height],gt=(0,nt.getGlsl)(this.context.glContext.version),mt=[ft[0],ft[1]],yt=mt[1],bt=mt[0],vt=Math.ceil(ut[ht-1]/2);let xt=vt*Math.ceil(ut[ht-2]/2),wt="int b, int row, int col",St=`b * ${xt} + (row / 2) * ${vt} + (col / 2)`;for(let _t=2;_t<ht-1;_t++)wt=`int b${_t}, `+wt,xt*=ut[ht-_t-1],St=`b${_t} * ${xt} + `+St;const Et=`vec4 ${dt}(${wt}) {
      int index = ${St};
      int texR = index / ${bt};
      int texC = index - texR * ${bt};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${bt}, ${yt});
      return ${gt.texture2D}(${st}, uv);
    }`;return new rt.GlslLibRoutine(Et)}getUnpackedSamplerScalar(dt,st,it){const[ut,ht]=[it.width,it.height];if(ut===1&&ht===1){const gt=`
          float ${dt}() {
            return sampleTexture(${st}, halfCR);
          }
        `;return new rt.GlslLibRoutine(gt,["coordinates.sampleTexture"])}const ft=`
        float ${dt}() {
          int offset_${st} = coordsToOffset(TexCoords, ${ut}, ${ht});
          vec2 uv = uvFromFlat(${ut}, ${ht}, offset_${st});
          return sampleTexture(${st}, uv);
        }
      `;return new rt.GlslLibRoutine(ft,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(dt,st,it){const ut=it.width,ht=it.height;if(ht===1&&ut===1){const gt=`
        float ${dt}(int index) {
          return sampleTexture(${st}, halfCR);
        }
      `;return new rt.GlslLibRoutine(gt,["coordinates.sampleTexture"])}if(ht===1){const gt=`
          float ${dt}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${ut}.0, 0.5);
            return sampleTexture(${st}, uv);
          }
        `;return new rt.GlslLibRoutine(gt,["coordinates.sampleTexture"])}if(ut===1){const gt=`
          float ${dt}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${ht}.0);
            return sampleTexture(${st}, uv);
          }
        `;return new rt.GlslLibRoutine(gt,["coordinates.sampleTexture"])}const ft=`
        float ${dt}(int index) {
          vec2 uv = uvFromFlat(${ut}, ${ht}, index);
          return sampleTexture(${st}, uv);
        }
      `;return new rt.GlslLibRoutine(ft,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(dt,st,it){const ut=it.unpackedShape,ht=[it.height,it.width];if(ht!=null&&tt.ArrayUtil.arraysEqual(ut,ht)){const xt=`
          float ${dt}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${ht[1]}.0, ${ht[0]}.0);
            return sampleTexture(${st}, uv);
          }
        `;return new rt.GlslLibRoutine(xt,["coordinates.sampleTexture"])}const{newShape:ft,keptDims:gt}=(0,ot.squeezeShape)(ut),mt=ft;if(mt.length<ut.length){const xt=(0,at.squeezeInputShape)(ut,mt),wt=JSON.parse(JSON.stringify(it));wt.unpackedShape=xt;const St=["col","row"],Et=`
          ${this.getUnpackedSamplerFromInput(dt,st,wt).routineBody}
          float ${dt}(int row, int col) {
            return ${dt}(${(0,at.getSqueezedParams)(St,gt)});
          }
        `;return new rt.GlslLibRoutine(Et,["coordinates.sampleTexture"])}const yt=ht[1],bt=ht[0];if(bt===1){const xt=`
          float ${dt}(int row, int col) {
            int offset_${st} = coordsToOffset(TexCoords, ${yt}, ${bt});
            float index = dot(vec3(row, col, offset_${st}), vec3(${ut[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${yt}.0);
            return sampleTexture(${st}, uv);
          }
        `;return new rt.GlslLibRoutine(xt,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(yt===1){const xt=`
          float ${dt}(int row, int col) {
            int offset_${st} = coordsToOffset(TexCoords, ${yt}, ${bt});
            float index = dot(vec3(row, col, offset_${st}), vec3(${ut[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${bt}.0, 0.5);
            return sampleTexture(${st}, uv);
          }
        `;return new rt.GlslLibRoutine(xt,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const vt=`
        float ${dt}(int row, int col) {
          int index = col * ${ut[1]} + row;
          vec2 uv = uvFromFlat(${yt}, ${bt}, index);
          return sampleTexture(${st}, uv);
        }
      `;return new rt.GlslLibRoutine(vt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(dt,st,it){const ut=it.unpackedShape,ht=ut[1]*ut[2],ft=ut[2],{newShape:gt,keptDims:mt}=(0,ot.squeezeShape)(ut),yt=gt;if(yt.length<ut.length){const vt=(0,at.squeezeInputShape)(ut,yt),xt=["batch","col","row"],wt=JSON.parse(JSON.stringify(it));wt.unpackedShape=vt;const St=this.getUnpackedSamplerFromInput(dt,st,wt),Et=mt.reverse(),_t=`
          ${St.routineBody}
          float ${dt}(int batch, int row, int col) {
            return ${dt}(${(0,at.getSqueezedParams)(xt,Et)});
          }
        `;return new rt.GlslLibRoutine(_t,St.dependencies)}const bt=`
          float ${dt}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${ht} + col * ${ft} + row;
            vec2 uv = uvFromFlat(${it.width}, ${it.height}, index);
            return sampleTexture(${st}, uv);
          }
      `;return new rt.GlslLibRoutine(bt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(dt,st,it){const ut=it.unpackedShape,ht=ut[3],ft=ut[2]*ht,gt=`
        float ${dt}(int row, int col, int depth, int depth2) {
          int index = row * ${ut[1]*ft} + col * ${ft} +
              depth2 * ${ht} + depth;
          vec2 uv = uvFromFlat(${it.width}, ${it.height}, index);
          return sampleTexture(${st}, uv);
        }
      `;return new rt.GlslLibRoutine(gt,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(dt,st,it){const ut=it.unpackedShape,ht=ut[4],ft=ut[3]*ht,gt=ut[2]*ft,mt=ut[1]*gt,{newShape:yt,keptDims:bt}=(0,ot.squeezeShape)(ut);if(yt.length<ut.length){const xt=(0,at.squeezeInputShape)(ut,yt),wt=["row","col","depth","depth2","depth3"],St=JSON.parse(JSON.stringify(it));St.unpackedShape=xt;const Et=`
          ${this.getUnpackedSamplerFromInput(dt,st,St).routineBody}
          float ${dt}(int row, int col, int depth, int depth2, int depth3) {
            return ${dt}(${(0,at.getSqueezedParams)(wt,bt)});
          }
        `;return new rt.GlslLibRoutine(Et,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const vt=`
        float ${dt}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${mt} + col * ${gt} + depth * ${ft} +
          depth3 * ${ht} + depth2;
          vec2 uv = uvFromFlat(${it.width}, ${it.height}, index);
          return sampleTexture(${st}, uv);
        }
      `;return new rt.GlslLibRoutine(vt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(dt,st,it){const ut=it.unpackedShape,ht=ut[5],ft=ut[4]*ht,gt=ut[3]*ft,mt=ut[2]*gt,yt=ut[1]*mt,{newShape:bt,keptDims:vt}=(0,ot.squeezeShape)(ut);if(bt.length<ut.length){const wt=(0,at.squeezeInputShape)(ut,bt),St=["row","col","depth","depth2","depth3","depth4"],Et=JSON.parse(JSON.stringify(it));Et.unpackedShape=wt;const _t=`
            ${this.getUnpackedSamplerFromInput(dt,st,Et).routineBody}
            float ${dt}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${dt}(${(0,at.getSqueezedParams)(St,vt)});
            }
          `;return new rt.GlslLibRoutine(_t,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const xt=`
          float ${dt}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${yt} + col * ${mt} + depth * ${gt} +
            depth2 * ${ft} + depth3 * ${ht} + depth4;
            vec2 uv = uvFromFlat(${it.width}, ${it.height}, index);
            return sampleTexture(${st}, uv);
          }
        `;return new rt.GlslLibRoutine(xt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const dt=this.context.outputTextureLayout,st=dt.shape.length,it=dt.strides,ut=dt.width,ht=dt.height,ft=[];for(let mt=0;mt<st-1;++mt)ft.push(`
        c[${mt}] = offset / ${it[mt]};`),ft.push(`
        offset -= c[${mt}] * ${it[mt]};`);ft.push(`
        c[${st-1}] = offset;`);const gt=`
      void toVec(vec2 texCoords, out int c[${st}]) {
        int offset = coordsToOffset(texCoords, ${ut}, ${ht});
        ${ft.join("")}
      }
      void toVec(int offset, out int c[${st}]) {
        ${ft.join("")}
      }
    `;return{toVec:new rt.GlslLibRoutine(gt,["coordinates.coordsToOffset"])}}valueFrom(){const dt={};return this.context.programInfo.inputNames.forEach((st,it)=>{const ut=this.context.inputTextureLayouts[it],ht=(ut.unpackedShape.length>0?ut.unpackedShape:ut.shape).length;let ft=`_${st}`;dt[ft]=new rt.GlslLibRoutine(this.getValueFromSingle(st,ht,ut.width,ut.height,!1),[`shapeUtils.indicesToOffset${ft}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),ft+="_T",dt[ft]=new rt.GlslLibRoutine(this.getValueFromSingle(st,ht,ut.width,ut.height,!0),[`shapeUtils.indicesToOffset${ft}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),dt}getValueFromSingle(dt,st,it,ut,ht){let ft=`_${dt}`;return ht&&(ft+="_T"),`
        float ${ft}(int m[${st}]) {
          int offset = indicesToOffset${ft}(m);
          vec2 coords = offsetToCoords(offset, ${it}, ${ut});
          float value = getColorAsFloat(${(0,nt.getGlsl)(this.context.glContext.version).texture2D}(${dt}, coords));
          return value;
        }
        `}getPackedValueFrom(dt,st,it,ut,ht){let ft=`_${dt}_Pack`;return ht&&(ft+="_T"),`
        vec4 ${ft}(int m[${st}]) {
          int offset = indicesToOffset_${dt}(m);
          vec2 coords = offsetToCoords(offset, ${it}, ${ut});
          return ${(0,nt.getGlsl)(this.context.glContext.version).texture2D}(${dt}, coords);
        }
        `}}_.CoordsGlslLib=lt},8520:(_e,_)=>{var et;Object.defineProperty(_,"__esModule",{value:!0}),_.TopologicalSortGlslRoutines=_.GlslLibRoutineNode=_.GlslLibRoutine=_.GlslLib=_.GlslContext=_.FunctionType=void 0,(et=_.FunctionType||(_.FunctionType={}))[et.ValueBased=0]="ValueBased",et[et.Positional=1]="Positional",_.GlslContext=class{constructor(tt,rt,nt,ot){this.glContext=tt,this.programInfo=rt,this.inputTextureLayouts=nt,this.outputTextureLayout=ot}},_.GlslLib=class{constructor(tt){this.context=tt}},_.GlslLibRoutine=class{constructor(tt,rt){this.routineBody=tt,this.dependencies=rt}},_.GlslLibRoutineNode=class{constructor(tt,rt,nt){this.name=tt,this.dependencies=nt||[],rt&&(this.routineBody=rt)}addDependency(tt){tt&&this.dependencies.push(tt)}},_.TopologicalSortGlslRoutines=class{static returnOrderedNodes(tt){if(!tt||tt.length===0)return[];if(tt.length===1)return tt;const rt=new Set,nt=new Set,ot=new Array;return this.createOrderedNodes(tt,rt,nt,ot),ot}static createOrderedNodes(tt,rt,nt,ot){for(let at=0;at<tt.length;++at)this.dfsTraverse(tt[at],rt,nt,ot)}static dfsTraverse(tt,rt,nt,ot){if(!tt||nt.has(tt.name))return;if(rt.has(tt.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");rt.add(tt.name);const at=tt.dependencies;if(at&&at.length>0)for(let lt=0;lt<at.length;++lt)this.dfsTraverse(at[lt],rt,nt,ot);ot.push(tt),nt.add(tt.name),rt.delete(tt.name)}}},7341:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.EncodingGlslLib=void 0;const tt=et(8520);class rt extends tt.GlslLib{constructor(ot){super(ot)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new tt.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new tt.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const ot=rt.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new tt.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${ot}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const ot=rt.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new tt.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${ot}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const ot=new ArrayBuffer(4),at=new Uint32Array(ot),lt=new Uint8Array(ot);if(at[0]=3735928559,lt[0]===239)return!0;if(lt[0]===222)return!1;throw new Error("unknown endianness")}}_.EncodingGlslLib=rt},9894:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.FragColorGlslLib=void 0;const tt=et(8520),rt=et(5060);class nt extends tt.GlslLib{constructor(at){super(at)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const at=(0,rt.getGlsl)(this.context.glContext.version);return{setFragColor:new tt.GlslLibRoutine(`
        void setFragColor(float value) {
            ${at.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new tt.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}_.FragColorGlslLib=nt},2848:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.replaceInlines=void 0;const et=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;_.replaceInlines=function(tt){const rt={};let nt;for(;(nt=et.exec(tt))!==null;){const ot=nt[3].split(",").map(at=>{const lt=at.trim().split(" ");return lt&&lt.length===2?{type:lt[0],name:lt[1]}:null}).filter(at=>at!==null);rt[nt[2]]={params:ot,body:nt[4]}}for(const ot in rt){const at="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",ot),lt=new RegExp(at,"gm");for(;(nt=lt.exec(tt))!==null;){const ct=nt[1],dt=nt[2],st=nt[3].split(","),it=ct?`${ct} ${dt};`:"";let ut=rt[ot].body,ht="";rt[ot].params.forEach((gt,mt)=>{gt&&(ht+=`${gt.type} ${gt.name} = ${st[mt]};
`)}),ut=`${ht}
 ${ut}`,ut=ut.replace("return",`${dt} = `);const ft=`
      ${it}
      {
        ${ut}
      }
      `;tt=tt.replace(nt[0],ft)}}return tt.replace(et,"")}},8879:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GlslPreprocessor=void 0;const tt=et(8520),rt=et(2848),nt=et(5483),ot=et(5060);_.GlslPreprocessor=class{constructor(at,lt,ct,dt){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new tt.GlslContext(at,lt,ct,dt),Object.keys(nt.glslRegistry).forEach(it=>{const ut=new nt.glslRegistry[it](this.context);this.libs[it]=ut});const st=this.glslLibRoutineDependencyGraph;for(const it in this.libs){const ut=this.libs[it].getFunctions();for(const ht in ut){const ft=it+"."+ht;let gt;st[ft]?(gt=st[ft],gt.routineBody=ut[ht].routineBody):(gt=new tt.GlslLibRoutineNode(ft,ut[ht].routineBody),st[ft]=gt);const mt=ut[ht].dependencies;if(mt)for(let yt=0;yt<mt.length;++yt)if(st[mt[yt]])gt.addDependency(st[mt[yt]]);else{const bt=new tt.GlslLibRoutineNode(mt[yt]);st[mt[yt]]=bt,gt.addDependency(bt)}}}}preprocess(){const at=this.context.programInfo;let lt=at.shaderSource;return this.context.programInfo.hasMain||(lt=`${lt}
      ${(0,ot.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),lt=(0,rt.replaceInlines)(lt),`${(0,ot.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(at.inputNames,at.variables)}
    ${this.getImports(lt)}
    ${lt}`}getImports(at){const lt=this.selectGlslLibRoutinesToBeIncluded(at);if(lt.length===0)return"";let ct="";for(let dt=0;dt<lt.length;++dt){if(!lt[dt].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${lt[dt].name}`);ct+=lt[dt].routineBody+`
`}return ct}selectGlslLibRoutinesToBeIncluded(at){const lt=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(ct=>{const dt=ct.split(".")[1];at.indexOf(dt)!==-1&&lt.push(this.glslLibRoutineDependencyGraph[ct])}),tt.TopologicalSortGlslRoutines.returnOrderedNodes(lt)}getUniforms(at,lt){const ct=[];if(at)for(const dt of at)ct.push(`uniform sampler2D ${dt};`);if(lt)for(const dt of lt)ct.push(`uniform ${dt.type} ${dt.name}${dt.arrayLength?`[${dt.arrayLength}]`:""};`);return ct.join(`
`)}}},5483:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.glslRegistry=void 0;const tt=et(5107),rt=et(7341),nt=et(9894),ot=et(2655),at=et(3891);_.glslRegistry={encoding:rt.EncodingGlslLib,fragcolor:nt.FragColorGlslLib,vec:at.VecGlslLib,shapeUtils:ot.ShapeUtilsGlslLib,coordinates:tt.CoordsGlslLib}},2655:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ShapeUtilsGlslLib=void 0;const tt=et(8520);class rt extends tt.GlslLib{constructor(ot){super(ot)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const ot=this.context.outputTextureLayout.shape.length,at={};return this.context.programInfo.inputNames.forEach((lt,ct)=>{const dt=this.context.inputTextureLayouts[ct].unpackedShape;if(dt.length<=ot){const st=dt.length,it=ot-st,ut=`bcastIndices_${lt}`;let ht="";for(let gt=0;gt<st;++gt)ht+=`
          realIndices[${gt}] = int( mod(float(bcastedIndices[${it+gt}]), ${dt[gt]}.0) );
          `;const ft=`
        void ${ut} (int bcastedIndices[${ot}], out int realIndices[${st}]) {
          ${ht}
        }
        `;at[ut]=new tt.GlslLibRoutine(ft)}}),at}bcastMatmulIndex(){const ot=this.context.outputTextureLayout.shape.length,at={};return this.context.programInfo.inputNames.forEach((lt,ct)=>{const dt=this.context.inputTextureLayouts[ct].shape;if(!(dt.length<2||dt.length>ot)){const st=dt.length,it=ot-st,ut=`bcastMatmulIndices_${lt}`;let ht="";for(let gt=0;gt<st-2;++gt)ht+=`
          realIndices[${gt}] = int( mod(float(bcastedIndices[${it+gt}]), ${dt[gt]}.0) );
          `;const ft=`
        void ${ut}(int bcastedIndices[${ot}], out int realIndices[${st}]) {
          ${ht}
          realIndices[${st-1}] = bcastedIndices[${ot-1}];
          realIndices[${st-2}] = bcastedIndices[${ot-2}];
        }
        `;at[ut]=new tt.GlslLibRoutine(ft)}}),at}indicesToOffset(){const ot={};return this.context.programInfo.inputNames.forEach((at,lt)=>{const ct=this.context.inputTextureLayouts[lt].shape,dt=this.context.inputTextureLayouts[lt].strides,st=ct.length;let it=`indicesToOffset_${at}`;ot[it]=new tt.GlslLibRoutine(rt.indexToOffsetSingle(it,st,dt)),it=`indicesToOffset_${at}_T`,ot[it]=new tt.GlslLibRoutine(rt.indexToOffsetSingle(it,st,dt.slice().reverse()))}),ot}static indexToOffsetSingle(ot,at,lt){let ct="";for(let dt=at-1;dt>=0;--dt)ct+=`
        offset += indices[${dt}] * ${lt[dt]};
        `;return`
      int ${ot}(int indices[${at}]) {
        int offset = 0;
        ${ct}
        return offset;
      }
      `}offsetToIndices(){const ot={};return this.context.programInfo.inputNames.forEach((at,lt)=>{const ct=this.context.inputTextureLayouts[lt].shape,dt=this.context.inputTextureLayouts[lt].strides,st=ct.length;let it=`offsetToIndices_${at}`;ot[it]=new tt.GlslLibRoutine(rt.offsetToIndicesSingle(it,st,dt)),it=`offsetToIndices_${at}_T`,ot[it]=new tt.GlslLibRoutine(rt.offsetToIndicesSingle(it,st,dt.slice().reverse()))}),ot}static offsetToIndicesSingle(ot,at,lt){const ct=[];for(let dt=0;dt<at-1;++dt)ct.push(`
      indices[${dt}] = offset / ${lt[dt]};`),ct.push(`
        offset -= indices[${dt}] * ${lt[dt]};`);return ct.push(`
      indices[${at-1}] = offset;`),`
      void ${ot}(int offset, out int indices[${at}]) {
        ${ct.join("")}
      }
      `}incrementIndices(){const ot={};return this.context.programInfo.inputNames.forEach((at,lt)=>{const ct=this.context.inputTextureLayouts[lt].shape,dt=ct.length,st=`incrementIndices_${at}`;let it="";for(let ht=0;ht<dt;++ht)it+=`
        shape[${ht}] = ${ct[ht]};`;const ut=`
        void ${st}(int axis, out int indices[${dt}]) {
          int shape[${dt}];
          ${it};
          for(int i = ${dt} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;ot[st]=new tt.GlslLibRoutine(ut)}),ot}}_.ShapeUtilsGlslLib=rt},5060:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getDefaultFragShaderMain=_.getFragShaderPreamble=_.getVertexShaderSource=_.getGlsl=void 0;const et={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},tt={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function rt(nt){return nt===1?et:tt}_.getGlsl=rt,_.getVertexShaderSource=function(nt){const ot=rt(nt);return`${ot.version}
      precision highp float;
      ${ot.attribute} vec3 position;
      ${ot.attribute} vec2 textureCoord;

      ${ot.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},_.getFragShaderPreamble=function(nt){const ot=rt(nt);return`${ot.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${ot.varyingFrag} vec2 TexCoords;
    ${ot.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},_.getDefaultFragShaderMain=function(nt,ot){return`
  void main() {
    int indices[${ot}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${rt(nt).output} = result;
  }
  `}},3891:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.VecGlslLib=void 0;const tt=et(8520);class rt extends tt.GlslLib{constructor(ot){super(ot)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const ot=this.context.outputTextureLayout.shape.length,at={add:"+=",sub:"-=",mul:"*=",div:"/="},lt={};for(const ct in at){const dt=`${ct}Vec`;let st="";for(let ut=0;ut<ot;++ut)st+=`
          dest[${ut}] ${at[ct]} src[${ut}];
          `;const it=`
        void ${dt}(int src[${ot}], out int dest[${ot}]) {
          ${st}
        }
        `;lt[dt]=new tt.GlslLibRoutine(it)}return lt}copyVec(){const ot=this.context.outputTextureLayout.shape.length;let at="";for(let ct=0;ct<ot;++ct)at+=`
        dest[${ct}] = src[${ct}];
        `;const lt=`
      void copyVec(int src[${ot}], out int dest[${ot}]) {
        ${at}
      }
      `;return{copyVec:new tt.GlslLibRoutine(lt)}}setVecItem(){const ot=this.context.outputTextureLayout.shape.length;let at=`
        if(index < 0)
            index =${ot} + index;
        if (index == 0)
            m[0] = value;
        `;for(let ct=1;ct<ot-1;++ct)at+=`
        else if (index == ${ct})
            m[${ct}] = value;
            `;at+=`
        else
            m[${ot-1}] = value;
        `;const lt=`
      void setVecItem(out int m[${ot}], int index, int value) {
        ${at}
      }
        `;return{setVecItem:new tt.GlslLibRoutine(lt)}}getVecItem(){const ot=this.context.outputTextureLayout.shape.length;let at=`
        if(index < 0)
            index = ${ot} + index;
        if (index == 0)
            return m[0];
      `;for(let ct=1;ct<ot-1;++ct)at+=`
        else if (index == ${ct})
            return m[${ct}];
      `;at+=`
        else
            return m[${ot-1}];
        `;const lt=`
      int getVecItem(int m[${ot}], int index) {
        ${at}
      }
    `;return{getVecItem:new tt.GlslLibRoutine(lt)}}}_.VecGlslLib=rt},8316:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLInferenceHandler=void 0;const tt=et(6231),rt=et(9162),nt=et(2517),ot=et(2403),at=et(7019),lt=et(8710),ct=et(5611),dt=et(4057),st=et(2039);_.WebGLInferenceHandler=class{constructor(it){this.session=it,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(it,ut){return(0,dt.calculateTextureWidthAndHeight)(this.session.layoutStrategy,it,ut)}executeProgram(it,ut){if(ut.length<it.inputNames.length)throw new Error(`Input size mustn't be less than ${it.inputNames.length}.`);if(it.inputNames.length!==it.inputTypes.length)throw new Error("input names size does not match input types");const ht=[];for(let vt=0;vt<it.inputNames.length;++vt)ht[vt]=this.getOrCreateTextureData(ut[vt],it.inputTypes[vt]);const ft=((vt,xt)=>{const wt=xt.map(Et=>`${Et.unpackedShape.join(",")};${Et.width}x${Et.height}`).join("_");let St=vt.name;return vt.cacheHint&&(St+="["+vt.cacheHint+"]"),St+=":"+wt,St})(it,ht);let gt=this.session.programManager.getArtifact(ft);const mt=gt?gt.programInfo:typeof it.get=="function"?it.get():it,yt=(0,dt.createTextureLayoutFromTextureType)(this.session.layoutStrategy,mt.output.dims,mt.output.textureType),bt=this.createTextureData(yt,mt.output.type);return gt||(gt=this.session.programManager.build(mt,ht,bt),this.session.programManager.setArtifact(ft,gt)),this.runProgram(gt,ht,bt),bt}run(it,ut){return this.executeProgram(it,ut).tensor}runProgram(it,ut,ht){for(let ft=0;ft<ut.length;++ft)if(!!ut[ft].isPacked!=(it.programInfo.inputTypes[ft]===st.TextureType.packed))throw new Error(`input[${ft}] property packed inconsistent`);if(!!ht.isPacked!=(it.programInfo.output.textureType===st.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(it,ut,ht)}getOrCreateTextureData(it,ut){let ht=this.getTextureData(it.dataId,ut===st.TextureType.packed);if(!ht&&(ht=this.getTextureData(it.dataId,ut!==st.TextureType.packed),ht))return ut===st.TextureType.packed?this.pack(ht):this.unpack(ht);if(!ht){const ft=(0,dt.createTextureLayoutFromTextureType)(this.session.layoutStrategy,it.dims,ut);if(ut===st.TextureType.packedLastDimension){const yt=it.dims;if(yt.length===4){const bt=[yt[0],Math.ceil(yt[1]*yt[2]*yt[3]/4)],vt=(0,dt.createTextureLayoutFromTextureType)(this.session.layoutStrategy,bt,ut);let xt=it.numberData;if(yt[1]*yt[2]*yt[3]%4!=0){const wt=yt[0],St=yt[1]*yt[2]*yt[3],Et=Math.ceil(St*1/4)*4;xt=new Float32Array(wt*Et);for(let _t=0;_t<wt;++_t){const Tt=_t*St,Rt=_t*Et+_t%1*St;xt.set(it.numberData.subarray(Tt,Tt+St),Rt)}}return this.createTextureData(vt,it.type,xt,it,1)}}if(ut===st.TextureType.packed){const gt=(0,dt.createTextureLayoutFromShape)(this.session.layoutStrategy,it.dims,1,[],{reverseWH:!0}),mt=this.createTextureData(gt,it.type,it.numberData,it,1);ht=this.pack(mt)}else ht=this.createTextureData(ft,it.type,it.numberData,it,1)}return ht}createTextureDataFromLayoutBindTensor(it,ut,ht,ft){return this.createTextureData(it,ut,ht,ft,1)}createTextureData(it,ut,ht,ft,gt){tt.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(it)}]`);const mt=this.session.textureManager.createTextureFromLayout(ut,it,ht,gt);return this.createTextureDataFromTexture(it,ut,mt,ft)}reshapeUnpacked(it,ut){const ht=this.getOrCreateTextureData(it,st.TextureType.unpacked),ft={channels:ht.channels,height:ht.height,width:ht.width,shape:ut.length!==0?ut:[1],strides:nt.ShapeUtil.computeStrides(ut),unpackedShape:ut};return this.createTextureDataFromTexture(ft,it.type,ht.texture).tensor}reshapePacked(it,ut){const ht=this.getOrCreateTextureData(it,st.TextureType.packed);if((0,at.isReshapeCheap)(it.dims,ut)){const bt={channels:ht.channels,height:ht.height,width:ht.width,shape:ut.length!==0?ut:[1],strides:nt.ShapeUtil.computeStrides(ut),unpackedShape:ut,isPacked:!0};return this.createTextureDataFromTexture(bt,it.type,ht.texture).tensor}const ft=(0,at.processDims3D)(it.dims),gt=(0,at.processDims3D)(ut),mt=this.reshapePacked(it,ft),yt=this.run((0,at.createPackedReshape3DProgramInfoLoader)(this,mt,gt),[mt]);return this.reshapePacked(yt,ut)}cast(it,ut){const ht=this.getOrCreateTextureData(it,st.TextureType.unpacked);return this.createTextureDataFromTexture(ht,ut,ht.texture).tensor}createTextureDataFromTexture(it,ut,ht,ft,gt){const mt=Object.assign(Object.assign({},it),{tensor:ft||new rt.Tensor(it.unpackedShape,ut,yt=>this.readTexture(mt),async yt=>this.readTextureAsync(mt),void 0,gt),texture:ht});return this.setTextureData(mt.tensor.dataId,mt,it.isPacked),mt}getTextureData(it,ut=!1){return this.session.isInitializer(it)?this.session.getTextureData(it,ut):ut?this.packedTextureDataCache.get(it):this.unpackedTextureDataCache.get(it)}setTextureData(it,ut,ht=!1){this.session.isInitializer(it)?this.session.setTextureData(it,ut,ht):(ht?this.packedTextureDataCache:this.unpackedTextureDataCache).set(it,ut)}isTextureLayoutCached(it,ut=!1){return!!this.getTextureData(it.dataId,ut)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(it=>this.session.textureManager.releaseTexture(it)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(it=>this.session.textureManager.releaseTexture(it)),this.unpackedTextureDataCache=new Map}readTexture(it){return it.isPacked?this.readTexture(this.unpack(it)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(it,it.tensor.type,it.channels):this.session.textureManager.readUint8TextureAsFloat((0,lt.encodeAsUint8)(this,it))}async readTextureAsync(it){return it.isPacked?this.readTextureAsync(this.unpack(it)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(it,it.tensor.type,it.channels):this.session.textureManager.readUint8TextureAsFloat((0,lt.encodeAsUint8)(this,it))}pack(it){return this.executeProgram((0,ot.createPackProgramInfoLoader)(this,it.tensor),[it.tensor])}unpack(it){return this.executeProgram((0,ct.createUnpackProgramInfoLoader)(this,it.tensor),[it.tensor])}}},1640:function(_e,_,et){var tt=this&&this.__createBinding||(Object.create?function(Bt,Ut,Vt,Jt){Jt===void 0&&(Jt=Vt);var lr=Object.getOwnPropertyDescriptor(Ut,Vt);lr&&!("get"in lr?!Ut.__esModule:lr.writable||lr.configurable)||(lr={enumerable:!0,get:function(){return Ut[Vt]}}),Object.defineProperty(Bt,Jt,lr)}:function(Bt,Ut,Vt,Jt){Jt===void 0&&(Jt=Vt),Bt[Jt]=Ut[Vt]}),rt=this&&this.__setModuleDefault||(Object.create?function(Bt,Ut){Object.defineProperty(Bt,"default",{enumerable:!0,value:Ut})}:function(Bt,Ut){Bt.default=Ut}),nt=this&&this.__importStar||function(Bt){if(Bt&&Bt.__esModule)return Bt;var Ut={};if(Bt!=null)for(var Vt in Bt)Vt!=="default"&&Object.prototype.hasOwnProperty.call(Bt,Vt)&&tt(Ut,Bt,Vt);return rt(Ut,Bt),Ut};Object.defineProperty(_,"__esModule",{value:!0}),_.WEBGL_OP_RESOLVE_RULES=void 0;const ot=et(2898),at=nt(et(7839)),lt=et(4196),ct=et(2069),dt=et(8138),st=et(9663),it=et(5193),ut=et(7992),ht=et(1253),ft=et(4776),gt=et(6572),mt=et(3346),yt=et(5623),bt=et(2870),vt=et(2143),xt=et(4939),wt=et(718),St=et(2268),Et=et(8117),_t=et(2278),Tt=et(5524),Rt=et(5975),Ot=et(3933),At=et(6558),Ct=et(5723),$t=et(3738),Mt=nt(et(4909)),Dt=et(8428),Nt=et(9793);_.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",Mt.abs],["Acos","","7+",Mt.acos],["Add","","7+",at.add],["And","","7+",at.and],["Asin","","7+",Mt.asin],["Atan","","7+",Mt.atan],["AveragePool","","7+",vt.averagePool,vt.parseAveragePoolAttributes],["BatchNormalization","","7+",ot.batchNormalization,ot.parseBatchNormalizationAttributes],["Cast","","6+",lt.cast,lt.parseCastAttributes],["Ceil","","6+",Mt.ceil],["Clip","","6-10",Mt.clip,Mt.parseClipAttributes],["Clip","","11+",Mt.clipV11],["Concat","","4+",ct.concat,ct.parseConcatAttributes],["Conv","","1+",dt.conv,dt.parseConvAttributes],["ConvTranspose","","1+",st.convTranspose,st.parseConvTransposeAttributes],["Cos","","7+",Mt.cos],["Div","","7+",at.div],["Dropout","","7+",Mt.identity],["DepthToSpace","","1+",it.depthToSpace,it.parseDepthToSpaceAttributes],["Equal","","7+",at.equal],["Elu","","6+",Mt.elu,Mt.parseEluAttributes],["Exp","","6+",Mt.exp],["Flatten","","1+",ut.flatten,ut.parseFlattenAttributes],["Floor","","6+",Mt.floor],["FusedConv","com.microsoft","1+",dt.conv,dt.parseConvAttributes],["Gather","","1+",ht.gather,ht.parseGatherAttributes],["Gemm","","7-10",ft.gemm,ft.parseGemmAttributesV7],["Gemm","","11+",ft.gemm,ft.parseGemmAttributesV11],["GlobalAveragePool","","1+",vt.globalAveragePool,vt.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",vt.globalMaxPool],["Greater","","7+",at.greater],["Identity","","1+",Mt.identity],["ImageScaler","","1+",gt.imageScaler,gt.parseImageScalerAttributes],["InstanceNormalization","","6+",mt.instanceNormalization,mt.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",Mt.leakyRelu,Mt.parseLeakyReluAttributes],["Less","","7+",at.less],["Log","","6+",Mt.log],["MatMul","","1+",yt.matMul,yt.parseMatMulAttributes],["MaxPool","","1+",vt.maxPool,vt.parseMaxPoolAttributes],["Mul","","7+",at.mul],["Neg","","6+",Mt.neg],["Not","","1+",Mt.not],["Or","","7+",at.or],["Pad","","2-10",bt.padV2,bt.parsePadAttributesV2],["Pad","","11+",bt.padV11,bt.parsePadAttributesV11],["Pow","","7+",at.pow],["PRelu","","7+",at.pRelu],["ReduceLogSum","","1+",xt.reduceLogSum,xt.parseReduceAttributes],["ReduceMax","","1+",xt.reduceMax,xt.parseReduceAttributes],["ReduceMean","","1+",xt.reduceMean,xt.parseReduceAttributes],["ReduceMin","","1+",xt.reduceMin,xt.parseReduceAttributes],["ReduceProd","","1+",xt.reduceProd,xt.parseReduceAttributes],["ReduceSum","","1-12",xt.reduceSum,xt.parseReduceAttributes],["ReduceSumSquare","","1+",xt.reduceLogSumSquare,xt.parseReduceAttributes],["Relu","","6+",Mt.relu],["Reshape","","5+",wt.reshape],["Resize","","10",St.resize,St.parseResizeAttributesV10],["Resize","","11+",St.resize,St.parseResizeAttributesV11],["Shape","","1+",Et.shape],["Sigmoid","","6+",Mt.sigmoid],["Sin","","7+",Mt.sin],["Slice","","10+",_t.sliceV10],["Slice","","1-9",_t.slice,_t.parseSliceAttributes],["Softmax","","1-12",Tt.softmax,Tt.parseSoftmaxAttributes],["Softmax","","13+",Tt.softmaxV13,Tt.parseSoftmaxAttributesV13],["Split","","2-12",Rt.split,Rt.parseSplitAttributes],["Sqrt","","6+",Mt.sqrt],["Squeeze","","1-12",Ot.squeeze,Ot.parseSqueezeAttributes],["Squeeze","","13+",Ot.squeezeV13],["Sub","","7+",at.sub],["Sum","","6+",At.sum],["Tan","","7+",Mt.tan],["Tanh","","6+",Mt.tanh],["Tile","","6+",Ct.tile],["Transpose","","1+",$t.transpose,$t.parseTransposeAttributes],["Upsample","","7-8",Nt.upsample,Nt.parseUpsampleAttributesV7],["Upsample","","9",Nt.upsample,Nt.parseUpsampleAttributesV9],["Unsqueeze","","1-12",Dt.unsqueeze,Dt.parseUnsqueezeAttributes],["Unsqueeze","","13+",Dt.unsqueezeV13],["Xor","","7+",at.xor]]},2898:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseBatchNormalizationAttributes=_.batchNormalization=void 0;const tt=et(246),rt=et(5060),nt=et(2039),ot={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[nt.TextureType.unpacked,nt.TextureType.unpacked,nt.TextureType.unpacked,nt.TextureType.unpacked,nt.TextureType.unpacked]};_.batchNormalization=(ct,dt,st)=>(lt(dt),[ct.run(Object.assign(Object.assign({},ot),{cacheHint:st.cacheKey,get:()=>at(ct,dt,st)}),dt)]),_.parseBatchNormalizationAttributes=ct=>{const dt=ct.attributes.getFloat("epsilon",1e-5),st=ct.attributes.getFloat("momentum",.9),it=ct.attributes.getInt("spatial",1);return(0,tt.createAttributeWithCacheKey)({epsilon:dt,momentum:st,spatial:it})};const at=(ct,dt,st)=>{const it=(0,rt.getGlsl)(ct.session.backend.glContext.version),ut=dt[0].dims.length,[ht,ft]=ct.calculateTextureWidthAndHeight(dt[1].dims,nt.TextureType.unpacked),gt=`
  float process(int[${ut}] indices) {
    vec2 position = offsetToCoords(indices[1], ${ht}, ${ft});
    float scale = getColorAsFloat(${it.texture2D}(Scale, position));
    float mean = getColorAsFloat(${it.texture2D}(Mean, position));
    float variance = getColorAsFloat(${it.texture2D}(Variance, position));
    float b = getColorAsFloat(${it.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${st.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},ot),{output:{dims:dt[0].dims,type:dt[0].type,textureType:nt.TextureType.unpacked},shaderSource:gt})},lt=ct=>{if(!ct||ct.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const dt=ct[0],st=ct[1],it=ct[2],ut=ct[3],ht=ct[4];if(dt.dims.length<3||st.dims.length!==1||it.dims.length!==1||ut.dims.length!==1||ht.dims.length!==1)throw new Error("invalid input shape.");if(st.dims[0]!==dt.dims[1]||it.dims[0]!==dt.dims[1]||ut.dims[0]!==dt.dims[1]||ht.dims[0]!==dt.dims[1])throw new Error("invalid input shape.");if(dt.type!=="float32"&&dt.type!=="float64"||st.type!=="float32"&&st.type!=="float64"||it.type!=="float32"&&it.type!=="float64"||ut.type!=="float32"&&ut.type!=="float64"||ht.type!=="float32"&&ht.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.xor=_.sub=_.pRelu=_.pow=_.or=_.mul=_.less=_.greater=_.equal=_.div=_.and=_.add=_.glslPRelu=_.glslPow=_.glslXor=_.glslOr=_.glslAnd=_.glslLess=_.glslGreater=_.glslEqual=_.glslSub=_.glslMul=_.glslDiv=_.glslAdd=void 0;const tt=et(2517),rt=et(8520),nt=et(5060),ot=et(2039);function at(){const xt="add_";return{body:`
  float ${xt}(float a, float b) {
    return a + b;
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:xt,type:rt.FunctionType.ValueBased}}function lt(){const xt="div_";return{body:`
  float ${xt}(float a, float b) {
    return a / b;
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:xt,type:rt.FunctionType.ValueBased}}function ct(){const xt="mul_";return{body:`
  float ${xt}(float a, float b) {
    return a * b;
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:xt,type:rt.FunctionType.ValueBased}}function dt(){const xt="sub_";return{body:`
  float ${xt}(float a, float b) {
    return a - b;
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:xt,type:rt.FunctionType.ValueBased}}function st(){const xt="equal_";return{body:`
  float ${xt}(float a, float b) {
    return float(a == b);
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:xt,type:rt.FunctionType.ValueBased}}function it(){const xt="greater_";return{body:`
  float ${xt}(float a, float b) {
    return float(a > b);
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:xt,type:rt.FunctionType.ValueBased}}function ut(){const xt="less_";return{body:`
  float ${xt}(float a, float b) {
    return float(a < b);
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:xt,type:rt.FunctionType.ValueBased}}function ht(){const xt="and_";return{body:`
  float ${xt}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:xt,type:rt.FunctionType.ValueBased}}function ft(){const xt="or_";return{body:`
  float ${xt}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:xt,type:rt.FunctionType.ValueBased}}function gt(){const xt="xor_";return{body:`
  float ${xt}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:xt,type:rt.FunctionType.ValueBased}}function mt(){return function(xt){const wt=`${xt}_`;return{body:`
  float ${wt}(float a, float b) {
    return ${xt}(a, b);
  }
  vec4 ${wt}(vec4 v1, vec4 v2) {
    return ${xt}(v1, v2);
  }
  `,name:wt,type:rt.FunctionType.ValueBased}}("pow")}function yt(){const xt="prelu_";return{body:`
  float ${xt}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:xt,type:rt.FunctionType.ValueBased}}_.glslAdd=at,_.glslDiv=lt,_.glslMul=ct,_.glslSub=dt,_.glslEqual=st,_.glslGreater=it,_.glslLess=ut,_.glslAnd=ht,_.glslOr=ft,_.glslXor=gt,_.glslPow=mt,_.glslPRelu=yt;const bt=(xt,wt,St,Et=wt[0].type,_t)=>{const Tt=xt.session.pack?ot.TextureType.packed:ot.TextureType.unpacked;return{name:St.name,inputNames:["A","B"],inputTypes:[Tt,Tt],cacheHint:_t,get:()=>vt(xt,wt,St,Et)}},vt=(xt,wt,St,Et=wt[0].type)=>{const _t=xt.session.pack?ot.TextureType.packed:ot.TextureType.unpacked,Tt=!tt.ShapeUtil.areEqual(wt[0].dims,wt[1].dims);let Rt=wt[0].dims;const Ot=xt.session.pack;if(Tt){const $t=tt.BroadcastUtil.calcShape(wt[0].dims,wt[1].dims,!1);if(!$t)throw new Error("Can't perform binary op on the given tensors");Rt=$t;const Mt=Rt.length,Dt=wt[0].dims.length!==0?wt[0].dims.length:1,Nt=wt[1].dims.length!==0?wt[1].dims.length:1,Bt=wt[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",Ut=wt[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Vt=(0,nt.getGlsl)(xt.session.backend.glContext.version),Jt=Ot?`
      ${St.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${St.name}(a, b);
        ${Vt.output} = result;
      }`:`
      ${St.body}
      float process(int indices[${Mt}]) {
        int aindices[${Dt}];
        int bindices[${Nt}];
        ${Bt}
        ${Ut}
        return ${St.name}(_A(aindices), _B(bindices));
      }`;return{name:St.name,inputNames:["A","B"],inputTypes:[_t,_t],output:{dims:Rt,type:Et,textureType:_t},shaderSource:Jt,hasMain:Ot}}const At=(0,nt.getGlsl)(xt.session.backend.glContext.version),Ct=`
    ${St.body}
    void main() {
      vec4 v1 = ${At.texture2D}(A, TexCoords);
      vec4 v2 = ${At.texture2D}(B, TexCoords);
      vec4 result = ${St.name}(v1, v2);
      ${At.output} = result;
    }
    `;return{name:St.name,inputNames:["A","B"],inputTypes:[_t,_t],output:{dims:wt[0].dims,type:Et,textureType:_t},shaderSource:Ct,hasMain:!0}};_.add=(xt,wt)=>[xt.run(bt(xt,wt,at()),wt)],_.and=(xt,wt)=>[xt.run(bt(xt,wt,ht(),"bool"),wt)],_.div=(xt,wt)=>[xt.run(bt(xt,wt,lt()),wt)],_.equal=(xt,wt)=>[xt.run(bt(xt,wt,st(),"bool"),wt)],_.greater=(xt,wt)=>[xt.run(bt(xt,wt,it(),"bool"),wt)],_.less=(xt,wt)=>[xt.run(bt(xt,wt,ut(),"bool"),wt)],_.mul=(xt,wt)=>[xt.run(bt(xt,wt,ct()),wt)],_.or=(xt,wt)=>[xt.run(bt(xt,wt,ft(),"bool"),wt)],_.pow=(xt,wt)=>[xt.run(bt(xt,wt,mt()),wt)],_.pRelu=(xt,wt)=>[xt.run(bt(xt,wt,yt()),wt)],_.sub=(xt,wt)=>[xt.run(bt(xt,wt,dt()),wt)],_.xor=(xt,wt)=>[xt.run(bt(xt,wt,gt(),"bool"),wt)]},4196:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseCastAttributes=_.cast=void 0;const tt=et(2517);_.cast=(nt,ot,at)=>(rt(ot),[nt.cast(ot[0],at)]),_.parseCastAttributes=nt=>tt.ProtoUtil.tensorDataTypeFromProto(nt.attributes.getInt("to"));const rt=nt=>{if(!nt||nt.length!==1)throw new Error("Cast requires 1 input.");if(nt[0].type==="string")throw new Error("Invalid input type.")}},1163:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedConcatProgramInfoLoader=void 0;const tt=et(5060),rt=et(2039),nt=et(9390),ot=et(2827);_.createPackedConcatProgramInfoLoader=(lt,ct,dt)=>{const st=(it=ct.length,ut=dt.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:it},(ht,ft)=>`X${ft}`),inputTypes:Array(it).fill(rt.TextureType.packed),cacheHint:ut});var it,ut;return Object.assign(Object.assign({},st),{get:()=>((ht,ft,gt,mt)=>{const yt=gt[0].dims.slice();if(mt>=yt.length||mt<-1*yt.length)throw new Error("axis specified for concat doesn't match input dimensionality");mt<0&&(mt=yt.length+mt);const bt=yt.slice(0);for(let Bt=1;Bt<gt.length;Bt++){const Ut=gt[Bt].dims.slice();for(let Vt=0;Vt<yt.length;Vt++)if(Vt===mt)bt[mt]+=Ut[Vt];else if(yt[Vt]!==Ut[Vt])throw new Error("non concat dimensions must match")}const vt=bt.length,xt=(0,ot.getChannels)("coords",vt),wt=(0,nt.getCoordsDataType)(vt),St=(0,ot.unpackFromChannel)(),Et=gt.map(Bt=>Bt.dims),_t=(0,nt.getGlChannels)(vt),Tt=new Array(Et.length-1);Tt[0]=Et[0][mt];for(let Bt=1;Bt<Tt.length;Bt++)Tt[Bt]=Tt[Bt-1]+Et[Bt][mt];const Rt=_t[mt],Ot=_t.slice(-2),At=_t.join();let Ct=`if (${Rt} < ${Tt[0]}) {
        return getChannel(
            getX0(${At}), vec2(${Ot.join()}));
        }`;for(let Bt=1;Bt<Tt.length;Bt++){const Ut=Tt[Bt-1];Ct+=`
            if (${Rt} < ${Tt[Bt]}  && ${Rt} >= ${Tt[Bt-1]}) {
              return getChannel(
                getX${Bt}(${at(_t,Rt,Ut)}),
                vec2(${at(Ot,Rt,Ut)}));
            }`}const $t=Tt.length,Mt=Tt[Tt.length-1];Ct+=`
            return getChannel(
              getX${$t}(${at(_t,Rt,Mt)}),
              vec2(${at(Ot,Rt,Mt)}));`;const Dt=(0,tt.getGlsl)(ht.session.backend.glContext.version),Nt=`
          ${St}
          float getValue(${_t.map(Bt=>"int "+Bt)}) {
            ${Ct}
          }

          void main() {
            ${wt} coords = getOutputCoords();
            int lastDim = coords.${_t[vt-1]};
            coords.${_t[vt-1]} = coords.${_t[vt-2]};
            coords.${_t[vt-2]} = lastDim;

            vec4 result = vec4(getValue(${xt}), 0., 0., 0.);

            ${xt[vt-1]} = ${xt[vt-1]} + 1;
            if (${xt[vt-1]} < ${bt[vt-1]}) {
              result.g = getValue(${xt});
            }

            ${xt[vt-2]} = ${xt[vt-2]} + 1;
            if (${xt[vt-2]} < ${bt[vt-2]}) {
              result.a = getValue(${xt});
            }

            ${xt[vt-1]} = ${xt[vt-1]} - 1;
            if (${xt[vt-2]} < ${bt[vt-2]} &&
                ${xt[vt-1]} < ${bt[vt-1]}) {
              result.b = getValue(${xt});
            }
            ${Dt.output} = result;
          }
        `;return Object.assign(Object.assign({},ft),{output:{dims:bt,type:gt[0].type,textureType:rt.TextureType.packed},shaderSource:Nt,hasMain:!0})})(lt,st,ct,dt.axis)})};const at=(lt,ct,dt)=>{const st=lt.indexOf(ct);return lt.map((it,ut)=>ut===st?`${it} - ${dt}`:it).join()}},2069:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConcatAttributes=_.concat=void 0;const tt=et(246),rt=et(2039),nt=et(1163);_.concat=(it,ut,ht)=>(st(ut),it.session.pack&&ut[0].dims.length>1?[it.run((0,nt.createPackedConcatProgramInfoLoader)(it,ut,ht),ut)]:[it.run(ot(it,ut,ht),ut)]);const ot=(it,ut,ht)=>{const ft=(gt=ut.length,mt=ht.cacheKey,{name:"Concat",inputNames:Array.from({length:gt},(yt,bt)=>`X${bt}`),inputTypes:Array(gt).fill(rt.TextureType.unpacked),cacheHint:mt});var gt,mt;return Object.assign(Object.assign({},ft),{get:()=>((yt,bt,vt,xt)=>{const wt=vt[0].dims.slice();if(xt>=wt.length||xt<-1*wt.length)throw new Error("axis specified for concat doesn't match input dimensionality");xt<0&&(xt=wt.length+xt);const St=wt.slice(0);for(let At=1;At<vt.length;At++){const Ct=vt[At].dims.slice();for(let $t=0;$t<wt.length;$t++)if($t===xt)St[xt]+=Ct[$t];else if(wt[$t]!==Ct[$t])throw new Error("non concat dimensions must match")}const Et=St.length,_t=new Array(vt.length);let Tt=0;for(let At=0;At<_t.length;++At)Tt+=vt[At].dims[xt],_t[At]=Tt;let Rt="";Rt=vt.length<5?at(_t):lt(_t);const Ot=`
        ${ct(vt.length,Et)}
        ${dt(_t)}
        ${Rt}
        float process(int indices[${Et}]) {
          int textureIndex = getTextureWhereDataResides (indices[${xt}]);

          if(textureIndex != 0) {
            indices[${xt}] = indices[${xt}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},bt),{output:{dims:St,type:vt[0].type,textureType:rt.TextureType.unpacked},shaderSource:Ot})})(0,ft,ut,ht.axis)})},at=it=>`int getTextureWhereDataResides(int index) {
      ${it.map((ut,ht)=>`if(index<${ut}) {return ${ht};}
`).join("")}
    }`,lt=it=>at(it),ct=(it,ut)=>{const ht=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${ut}]) {`];for(let ft=0;ft<it;++ft)ft===0?ht.push(`	if (textureIndex == ${ft}) { return _X${ft}(indices); }`):ft===it-1?ht.push(`	else { return _X${ft}(indices); }`):ht.push(`	else if (textureIndex == ${ft}) { return _X${ft}(indices); }`);return ht.push("	}"),ht.join(`
`)},dt=it=>{const ut=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let ht=0;ht<it.length;++ht)ht===0?ut.push(`	if (index == ${ht}) { return ${it[ht]}; }`):ht===it.length-1?ut.push(`	else { return ${it[ht]}; }`):ut.push(`	else if (index == ${ht}) { return ${it[ht]}; }`);return ut.push("	}"),ut.join(`
`)};_.parseConcatAttributes=it=>(0,tt.createAttributeWithCacheKey)({axis:it.attributes.getInt("axis")});const st=it=>{if(!it||it.length<1)throw new Error("too few inputs");const ut=it[0].type,ht=it[0].dims.length;if(ut==="string")throw new Error("string tensor is not supported yet");for(const ft of it){if(ft.type!==ut)throw new Error("input tensors should be one type");if(ft.dims.length!==ht)throw new Error("input tensors should have the same shape")}}},4770:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createUnpackedGroupedConvProgramInfoLoader=void 0;const tt=et(6231),rt=et(5060),nt=et(2039),ot=et(8138),at=et(2823);_.createUnpackedGroupedConvProgramInfoLoader=(lt,ct,dt)=>{const st=(it=ct.length>2,ut=dt.cacheKey,{name:"GroupedConv",inputNames:it?["X","W","Bias"]:["X","W"],inputTypes:it?[nt.TextureType.unpacked,nt.TextureType.unpacked,nt.TextureType.unpacked]:[nt.TextureType.unpacked,nt.TextureType.unpacked],cacheHint:ut});var it,ut;return Object.assign(Object.assign({},st),{get:()=>((ht,ft,gt,mt)=>{const yt=ft.length>2?"value += getBias(output_channel);":"",bt=ft[0].dims.slice(),vt=ft[1].dims.slice(),xt=vt[0]/mt.group;tt.Logger.verbose("GroupedConv",`autpPad:${mt.autoPad}, dilations:${mt.dilations}, group:${mt.group}, kernelShape:${mt.kernelShape}, pads:${mt.pads}, strides:${mt.strides}`);const wt=(0,ot.calculateOutputShape)(bt,vt,mt.dilations,mt.pads,mt.strides),St=(0,rt.getGlsl)(ht.session.backend.glContext.version),{activationFunction:Et,applyActivation:_t}=(0,at.getActivationSnippet)(mt),Tt=`
  const ivec2 strides = ivec2(${mt.strides[0]}, ${mt.strides[1]});
  const ivec2 pads = ivec2(${mt.pads[0]}, ${mt.pads[1]});
  ${Et}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${xt};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${vt[1]}; wInChannel++) {
      int input_channel = group_id * ${vt[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${vt[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${mt.dilations[0]};

        if (xHeight < 0 || xHeight >= ${bt[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${vt[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${mt.dilations[1]};
          if (xWidth < 0 || xWidth >= ${bt[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${yt}
    ${_t}
    ${St.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},gt),{output:{dims:wt,type:ft[0].type,textureType:nt.TextureType.unpacked},shaderSource:Tt,hasMain:!0})})(lt,ct,st,dt)})}},1386:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.conv2DPacked=_.conv2DPackedPointwise=void 0;const tt=et(8138),rt=et(8555),nt=et(708);_.conv2DPackedPointwise=(ot,at,lt)=>{const ct=at[0].dims,dt=at[1].dims,st=(0,tt.calculateOutputShape)(ct,dt,lt.dilations,lt.pads,lt.strides),it=ot.reshapePacked(at[0],[ct[1],ct[2]*ct[3]]),ut=ot.reshapePacked(at[1],[dt[0],dt[1]]),ht=at.length>2?[ut,it,at[2]]:[ut,it],ft=ot.run((0,nt.createPackedMatmulProgramInfoLoader)(ot,ht,lt),ht);return ot.reshapePacked(ft,st)},_.conv2DPacked=(ot,at,lt)=>{const ct=at[0].dims,dt=at[1].dims,st=(0,tt.calculateOutputShape)(ct,dt,lt.dilations,lt.pads,lt.strides),it=ot.run((0,rt.createPackedIm2ColProgramInfoLoader)(ot,at[0],at[1],st,lt),[at[0]]),ut=ot.reshapePacked(at[1],[dt[0],dt[1]*dt[2]*dt[3]]),ht=at.length===3?[ut,it,at[2]]:[ut,it],ft=ot.run((0,nt.createPackedMatmulProgramInfoLoader)(ot,ht,lt),ht);return ot.reshapePacked(ft,st)}},9663:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConvTransposeAttributes=_.convTranspose=void 0;const tt=et(246),rt=et(5060),nt=et(2039),ot=et(2823),at=(ut,ht,ft,gt,mt,yt)=>(ut-1)*ht+ft+(gt-1)*mt+1-yt,lt=(ut,ht,ft,gt,mt)=>{const yt=Math.floor(ut/2);ht==="SAME_UPPER"?(ft[gt]=yt,ft[mt]=ut-yt):ht==="SAME_LOWER"&&(ft[gt]=ut-yt,ft[mt]=yt)};_.convTranspose=(ut,ht,ft)=>(it(ht,ft),ct(ut,ht,ft));const ct=(ut,ht,ft)=>{const gt=st(ft,ht);return[dt(ut,ht,gt)]},dt=(ut,ht,ft)=>ut.run(((gt,mt,yt)=>{const bt=(vt=mt.length>2,xt=yt.cacheKey,{name:"ConvTranspose",inputNames:vt?["X","W","B"]:["X","W"],inputTypes:vt?[nt.TextureType.unpacked,nt.TextureType.unpacked,nt.TextureType.unpacked]:[nt.TextureType.unpacked,nt.TextureType.unpacked],cacheHint:xt});var vt,xt;return Object.assign(Object.assign({},bt),{get:()=>((wt,St,Et,_t)=>{const Tt=St.length>2?"getB(output_channel)":"0.0",Rt=St[0].dims,Ot=St[1].dims,At=Ot[1],Ct=Ot[0]/_t.group,$t=[St[0].dims[0],St[1].dims[1]*_t.group,..._t.outputShape],Mt=(0,rt.getGlsl)(wt.session.backend.glContext.version),{activationFunction:Dt,applyActivation:Nt}=(0,ot.getActivationSnippet)(_t),Bt=`
  const ivec2 strides = ivec2(${_t.strides[0]}, ${_t.strides[1]});
  const ivec2 pads = ivec2(${_t.pads[0]}, ${_t.pads[1]});
  ${Dt}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${At};
    int wOutChannel = output_channel - group_id * ${At};

    float value = ${Tt};
    for (int inChannelOffset = 0; inChannelOffset < ${Ct}; inChannelOffset++) {
      int input_channel = group_id * ${Ct} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${Ot[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${Ot[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${_t.dilations[0]}, wHOff * ${_t.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${Rt[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${Rt[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${Nt}
    ${Mt.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},Et),{output:{dims:$t,type:St[0].type,textureType:nt.TextureType.unpacked},shaderSource:Bt,hasMain:!0})})(gt,mt,bt,yt)})})(ut,ht,ft),ht),st=(ut,ht)=>{const ft=ut.kernelShape.slice();if(ut.kernelShape.length===0)for(let bt=2;bt<ht[1].dims.length;++bt)ft.push(ht[1].dims[bt]);const gt=ut.pads.slice(),mt=ut.outputShape.slice();((bt,vt,xt,wt,St,Et,_t,Tt)=>{const Rt=bt.length-2,Ot=Tt.length===0;for(let At=0;At<Rt;++At){const Ct=Ot?bt[At+2]*Et[At]:Tt[At],$t=at(bt[At+2],Et[At],St[At],vt[At],xt[At],Ct);lt($t,wt,St,At,At+Rt),Ot&&Tt.push(Et[At]*(bt[At+2]-1)+_t[At]+(vt[At]-1)*xt[At]+1-St[At]-St[At+Rt])}})(ht[0].dims,ft,ut.dilations,ut.autoPad,gt,ut.strides,ut.outputPadding,mt);const yt=Object.assign({},ut);return Object.assign(yt,{kernelShape:ft,pads:gt,outputShape:mt,cacheKey:ut.cacheKey}),yt};_.parseConvTransposeAttributes=ut=>{const ht=ut.attributes,ft=(0,ot.parseInternalActivationAttributes)(ht),gt=ht.getString("auto_pad","NOTSET"),mt=ht.getInts("dilations",[1,1]),yt=ht.getInt("group",1),bt=ht.getInts("kernel_shape",[]),vt=ht.getInts("output_padding",[0,0]),xt=ht.getInts("output_shape",[]),wt=ht.getInts("pads",[0,0,0,0]),St=ht.getInts("strides",[1,1]);return(0,tt.createAttributeWithCacheKey)(Object.assign({autoPad:gt,dilations:mt,group:yt,kernelShape:bt,outputPadding:vt,outputShape:xt,pads:wt,strides:St},ft))};const it=(ut,ht)=>{if(!ut||ut.length!==2&&ut.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(ut[0].dims.length!==4||ut[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(ut[0].dims[1]!==ut[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const ft=ut[1].dims[1]*ht.group;if(ut.length===3&&(ut[2].dims.length!==1||ut[2].dims[0]!==ft))throw new Error("invalid bias");const gt=ut[0].dims.length-2;if(ht.dilations.length!==gt)throw new Error(`dilations should be ${gt}D`);if(ht.strides.length!==gt)throw new Error(`strides should be ${gt}D`);if(ht.pads.length!==2*gt)throw new Error(`pads should be ${2*gt}D`);if(ht.outputPadding.length!==gt)throw new Error(`output_padding should be ${gt}D`);if(ht.kernelShape.length!==0&&ht.kernelShape.length!==ut[1].dims.length-2)throw new Error("invalid kernel shape");if(ht.outputShape.length!==0&&ht.outputShape.length!==ut[0].dims.length-2)throw new Error("invalid output shape");if(ut[0].type!=="float32"||ut[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(ut.length===3&&ut[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConvAttributes=_.conv=_.calculateOutputShape=void 0;const tt=et(246),rt=et(2517),nt=et(4770),ot=et(1386),at=et(9828),lt=et(2823),ct=et(3248),dt=et(5623);_.calculateOutputShape=(gt,mt,yt,bt,vt)=>{const xt=gt[0],wt=gt.slice(2),St=wt.length,Et=mt[0],_t=mt.slice(2).map((Rt,Ot)=>Rt+(Rt-1)*(yt[Ot]-1)),Tt=wt.map((Rt,Ot)=>Rt+bt[Ot]+bt[Ot+St]).map((Rt,Ot)=>Math.floor((Rt-_t[Ot]+vt[Ot])/vt[Ot]));return[xt,Et].concat(...Tt)},_.conv=(gt,mt,yt)=>(ft(mt,yt),st(gt,mt,yt));const st=(gt,mt,yt)=>{const bt=ht(yt,mt),vt=gt.session.pack,xt=bt.kernelShape[0]===1&&bt.kernelShape[1]===1;return bt.group>1?[gt.run((0,nt.createUnpackedGroupedConvProgramInfoLoader)(gt,mt,bt),mt)]:xt&&vt?[it(gt,mt,bt)]:vt&&mt[0].dims.length===4&&mt[0].dims[0]===1&&!xt?[(0,ot.conv2DPacked)(gt,mt,bt)]:[ut(gt,mt,bt)]},it=(gt,mt,yt)=>{const bt=mt[0].dims,vt=mt[1].dims,xt=(0,_.calculateOutputShape)(bt,vt,yt.dilations,yt.pads,yt.strides),wt=gt.reshapeUnpacked(mt[0],[bt[1],bt[2]*bt[3]]),St=gt.reshapeUnpacked(mt[1],[vt[0],vt[1]]),Et=mt.length>2?[St,wt,mt[2]]:[St,wt],_t=gt.run((0,dt.createMatmulProgramInfoLoader)(Et,yt),Et);return gt.reshapeUnpacked(_t,xt)},ut=(gt,mt,yt)=>{const bt=mt[0].dims,vt=mt[1].dims,xt=(0,_.calculateOutputShape)(bt,vt,yt.dilations,yt.pads,yt.strides),wt=gt.run((0,ct.createIm2ColProgramInfoLoader)(gt,mt[0],mt[1],xt,yt),[mt[0]]),St=mt.length===3?[wt,mt[1],mt[2]]:[wt,mt[1]];return gt.run((0,at.createDotProductProgramInfoLoader)(gt,mt,xt,yt),St)},ht=(gt,mt)=>{const yt=gt.kernelShape.slice();if(gt.kernelShape.length===0)for(let xt=2;xt<mt[1].dims.length;++xt)yt.push(mt[1].dims[xt]);const bt=gt.pads.slice();rt.PoolConvUtil.adjustPadsBasedOnAutoPad(mt[0].dims,gt.strides,gt.dilations,yt,bt,gt.autoPad);const vt=Object.assign({},gt);return Object.assign(vt,{kernelShape:yt,pads:bt,cacheKey:gt.cacheKey}),vt};_.parseConvAttributes=gt=>{const mt=gt.attributes,yt=(0,lt.parseInternalActivationAttributes)(mt),bt=mt.getString("auto_pad","NOTSET"),vt=mt.getInts("dilations",[1,1]),xt=mt.getInt("group",1),wt=mt.getInts("kernel_shape",[]),St=mt.getInts("pads",[0,0,0,0]),Et=mt.getInts("strides",[1,1]);return(0,tt.createAttributeWithCacheKey)(Object.assign({autoPad:bt,dilations:vt,group:xt,kernelShape:wt,pads:St,strides:Et},yt))};const ft=(gt,mt)=>{if(!gt||gt.length!==2&&gt.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(gt[0].dims.length!==4||gt[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(gt[0].dims[1]!==gt[1].dims[1]*mt.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(gt.length===3&&(gt[2].dims.length!==1||gt[1].dims[0]!==gt[2].dims[0]))throw new Error("invalid bias");const yt=gt[0].dims.length-2;if(mt.dilations.length!==yt)throw new Error(`dilations should be ${yt}D`);if(mt.strides.length!==yt)throw new Error(`strides should be ${yt}D`);if(mt.pads.length!==2*yt)throw new Error(`pads should be ${2*yt}D`);if(mt.kernelShape.length!==0&&mt.kernelShape.length!==gt[1].dims.length-2)throw new Error("invalid kernel shape");if(gt[0].type!=="float32"||gt[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(gt.length===3&&gt[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseDepthToSpaceAttributes=_.depthToSpace=void 0;const tt=et(3738);_.depthToSpace=(nt,ot,at)=>{rt(ot);const lt=at.blocksize,ct=lt*lt,dt=at.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],st=at.mode==="DCR"?[ot[0].dims[0],lt,lt,ot[0].dims[1]/ct,ot[0].dims[2],ot[0].dims[3]]:[ot[0].dims[0],ot[0].dims[1]/ct,lt,lt,ot[0].dims[2],ot[0].dims[3]],it=nt.reshapeUnpacked(ot[0],st),ut={perm:dt,cacheKey:`${dt}`},[ht]=(0,tt.transpose)(nt,[it],ut),ft=[ot[0].dims[0],ot[0].dims[1]/ct,ot[0].dims[2]*lt,ot[0].dims[3]*lt];return[nt.reshapeUnpacked(ht,ft)]},_.parseDepthToSpaceAttributes=nt=>{const ot=nt.attributes.getInt("blocksize");if(ot<1)throw new Error(`blocksize must be >= 1, but got : ${ot} for DepthToSpace`);const at=nt.attributes.getString("mode","DCR");if(at!=="DCR"&&at!=="CRD")throw new Error(`unrecognized mode: ${at} for DepthToSpace`);return{mode:at,blocksize:ot}};const rt=nt=>{if(nt.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${nt.length}`);if(nt[0].type==="string"||nt[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createDotProductProgramInfoLoader=void 0;const tt=et(2517),rt=et(5060),nt=et(2039),ot=et(2823),at=et(3248);_.createDotProductProgramInfoLoader=(lt,ct,dt,st)=>{const it=((ut,ht)=>({name:"ConvDotProduct",inputNames:ut?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:ut?[nt.TextureType.unpacked,nt.TextureType.packedLastDimension,nt.TextureType.unpacked]:[nt.TextureType.unpacked,nt.TextureType.packedLastDimension],cacheKey:ht.activationCacheKey}))(ct.length>2,st);return Object.assign(Object.assign({},it),{get:()=>((ut,ht,ft,gt,mt)=>{const yt=ft[0].dims,bt=ft[1].dims,vt=[bt[0],Math.ceil(yt[1]*bt[2]*bt[3]/4)],xt=(0,at.calculateIm2ColDims)(yt,bt,gt),[wt,St]=ut.calculateTextureWidthAndHeight(vt,nt.TextureType.packedLastDimension),Et=tt.ShapeUtil.computeStrides(xt),[_t,Tt]=ut.calculateTextureWidthAndHeight(xt,nt.TextureType.packedLastDimension),Rt=gt.length,Ot=ft.length<3?"0.0":"_B(b)",At=Math.ceil(yt[1]*bt[2]*bt[3]/4),{activationFunction:Ct,applyActivation:$t}=(0,ot.getActivationSnippet)(mt),Mt=(0,rt.getGlsl)(ut.session.backend.glContext.version),Dt=`
${Ct}
float process(int indices[${Rt}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${Et[0]} + im2col[1] * ${Et[1]} + im2col[2] * ${Et[2]};
  int kernelOffset = indices[1] * ${vt[1]};
  float value = ${Ot};
  for (int i = 0; i < ${At}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${_t}, ${Tt});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${wt}, ${St});
    value += dot(${Mt.texture2D}(Im2Col, im2colCoords), ${Mt.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${$t}
  return value;
}`;return Object.assign(Object.assign({},ht),{output:{dims:gt,type:ft[0].type,textureType:nt.TextureType.unpacked},shaderSource:Dt})})(lt,it,ct,dt,st)})}},7992:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseFlattenAttributes=_.flatten=void 0;const tt=et(2517);_.flatten=(nt,ot,at)=>{rt(ot,at);const lt=tt.ShapeUtil.flattenShape(ot[0].dims,at);return[nt.reshapeUnpacked(ot[0],lt)]},_.parseFlattenAttributes=nt=>nt.attributes.getInt("axis",1);const rt=(nt,ot)=>{if(!nt||nt.length!==1)throw new Error("Flatten requires 1 input.");const at=nt[0].dims.length;if(at===0)throw new Error("scalar tensor is not supported.");if(ot<-at||ot>at)throw new Error("Invalid axis");if(nt[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseInternalActivationAttributes=_.getActivationSnippet=void 0;const tt=et(2517),rt=et(4909);_.getActivationSnippet=function(nt){let ot;switch(nt.activation){case"Relu":ot=(0,rt.glslRelu)();break;case"Sigmoid":ot=(0,rt.glslSigmoid)();break;case"Clip":ot=(0,rt.glslClip)(nt.clipMin,nt.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const at=ot.name;return{activationFunction:ot.body,applyActivation:`value = ${at}_(value);`}},_.parseInternalActivationAttributes=nt=>{const ot=nt.getString("activation","");if(ot==="Clip"){const[at,lt]=nt.getFloats("activation_params",[tt.MIN_CLIP,tt.MAX_CLIP]);return{activation:ot,clipMax:lt,clipMin:at,activationCacheKey:`${ot}:${at},${lt}`}}return{activation:ot,activationCacheKey:ot}}},1253:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseGatherAttributes=_.gather=void 0;const tt=et(246),rt=et(782),nt=et(2517),ot=et(2039);_.gather=(dt,st,it)=>(ct(st,it.axis),[dt.run(lt(dt,st,it),st)]),_.parseGatherAttributes=dt=>(0,tt.createAttributeWithCacheKey)({axis:dt.attributes.getInt("axis",0)});const at={name:"Gather",inputNames:["A","B"],inputTypes:[ot.TextureType.unpacked,ot.TextureType.unpacked]},lt=(dt,st,it)=>{const ut=Object.assign(Object.assign({},at),{cacheHint:it.cacheKey});return Object.assign(Object.assign({},ut),{get:()=>((ht,ft,gt,mt)=>{const yt=gt[0].dims.slice(),bt=gt[1].dims.slice(),vt=new Array(yt.length+bt.length-1);mt=nt.ShapeUtil.normalizeAxis(mt,yt.length);const xt=[];for(let St=0;St<vt.length;St++)St<mt?(vt[St]=yt[St],xt.push(`inputIdx[${St}] = outputIdx[${St}];`)):St<mt+bt.length?(vt[St]=bt[St-mt],xt.push(`indexDataIdx[${St-mt}] = outputIdx[${St}];`)):(vt[St]=yt[St-bt.length+1],xt.push(`inputIdx[${St-bt.length+1}] = outputIdx[${St}];`));const wt=`
      float process(int outputIdx[${vt.length||1}]) {
        int inputIdx[${yt.length}];
        int indexDataIdx[${bt.length||1}];
        indexDataIdx[0] = 0;
        ${xt.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${mt}] = idx < 0 ? idx + ${yt[mt]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},ft),{output:{dims:vt,type:gt[0].type,textureType:ot.TextureType.unpacked},shaderSource:wt})})(0,ut,st,it.axis)})},ct=(dt,st)=>{if(!dt||dt.length!==2)throw new Error("Gather requires 2 inputs.");const it=dt[0].dims.length;if(it<1)throw new Error("Invalid input shape.");if(st<-it||st>it-1)throw new Error("Invalid axis.");if(rt.NUMBER_TYPES.indexOf(dt[0].type)===-1)throw new Error("Invaid input type.");if(dt[1].type!=="int32"&&dt[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseGemmAttributesV11=_.parseGemmAttributesV7=_.gemm=void 0;const tt=et(246),rt=et(2517),nt=et(2039);_.gemm=(dt,st,it)=>(ct(st,it),[dt.run(at(st,it),st)]);const ot=(dt,st)=>{const it=dt.attributes.getInt("transA",0)!==0,ut=dt.attributes.getInt("transB",0)!==0,ht=dt.attributes.getFloat("alpha",1),ft=dt.attributes.getFloat("beta",1);return(0,tt.createAttributeWithCacheKey)({transA:it,transB:ut,alpha:ht,beta:ft,isOptionalC:st})};_.parseGemmAttributesV7=dt=>ot(dt,!1),_.parseGemmAttributesV11=dt=>ot(dt,!0);const at=(dt,st)=>{const it={name:"Gemm",inputNames:dt.length===3?["A","B","C"]:["A","B"],inputTypes:dt.length===3?[nt.TextureType.unpacked,nt.TextureType.unpacked,nt.TextureType.unpacked]:[nt.TextureType.unpacked,nt.TextureType.unpacked],key:st.cacheKey};return Object.assign(Object.assign({},it),{get:()=>lt(it,dt,st)})},lt=(dt,st,it)=>{const ut=st[0].dims.slice(),ht=st[1].dims.slice(),[ft,gt]=rt.GemmUtil.getShapeOfGemmResult(ut,it.transA,ht,it.transB,st.length===3?st[2].dims:void 0),mt=[ft,gt];if(!mt)throw new Error("Can't use gemm on the given tensors");let yt=ut[ut.length-1],bt="";it.transA&&(yt=ut[0]),it.transA&&it.transB?bt="value += _A_T(a) * _B_T(b);":it.transA&&!it.transB?bt="value += _A_T(a) * _B(b);":!it.transA&&it.transB?bt="value += _A(a) * _B_T(b);":it.transA||it.transB||(bt="value += _A(a) * _B(b);");const vt=mt.length,xt=`
      float process(int indices[${vt}]) {
          int a[${vt}];
          int b[${vt}];
          ${st.length===3?`int c[${st[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${st.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${yt}; ++k) {
              a[${vt-1}] = k;
              b[${vt-2}] = k;
              ${bt}
          }

          value = value * alpha;
          ${st.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},dt),{output:{dims:mt,type:st[0].type,textureType:nt.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:it.alpha},{name:"beta",type:"float",data:it.beta}],shaderSource:xt})},ct=(dt,st)=>{if(!dt)throw new Error("Input is missing");if(st.isOptionalC&&(dt.length<2||dt.length>3))throw new Error("Invaid input shape.");if(!st.isOptionalC&&dt.length!==3)throw new Error("Gemm requires 3 inputs");if(dt.length===3&&dt[2].dims.length!==1&&dt[2].dims.length!==2)throw new Error("Invalid input shape of C");if(dt[0].type!=="float32"&&dt[0].type!=="float64"||dt[1].type!=="float32"&&dt[1].type!=="float64"||dt.length===3&&dt[2].type!=="float32"&&dt[2].type!=="float64")throw new Error("Invalid input type.");if(dt[0].type!==dt[1].type||dt.length===3&&dt[0].type!==dt[2].type)throw new Error("Input types are mismatched")}},8555:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedIm2ColProgramInfoLoader=void 0;const tt=et(5060),rt=et(2039),nt=et(2827);_.createPackedIm2ColProgramInfoLoader=(ot,at,lt,ct,dt)=>{const st=(it=dt.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[rt.TextureType.packed],cacheHint:it});var it;return Object.assign(Object.assign({},st),{get:()=>((ut,ht,ft,gt,mt,yt)=>{const bt=ft.dims,vt=gt.dims,xt=mt.length,wt=[vt[1]*vt[2]*vt[3],mt[2]*mt[3]],St=vt[2]*vt[3],Et=(0,nt.unpackFromChannel)(),_t=(0,tt.getGlsl)(ut.session.backend.glContext.version);let Tt="";for(let Ot=0;Ot<=1;Ot++)for(let At=0;At<=1;At++)Tt+=`
            blockIndex = rc.x + ${At};
            pos = rc.y + ${Ot};

            if(blockIndex < ${wt[1]} && pos < ${wt[0]}) {
              offsetY = int(blockIndex / (${mt[xt-1]})) * ${yt.strides[0]} -
                ${yt.pads[0]};
              d0 = offsetY + ${yt.dilations[0]} * (imod(pos, ${St}) / ${vt[2]});

              if(d0 < ${bt[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${mt[xt-1]}) * ${yt.strides[1]} -
                  ${yt.pads[1]};
                d1 = offsetX + ${yt.dilations[1]} * imod(imod(pos, ${St}), ${vt[2]});

                if(d1 < ${bt[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${St}.);
                    innerDims = vec2(d0, d1);
                    result[${2*Ot+At}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const Rt=`
      ${Et}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${Tt}
          ${_t.output} = result;
      }
            `;return Object.assign(Object.assign({},ht),{output:{dims:wt,type:ft.type,textureType:rt.TextureType.packed},shaderSource:Rt,hasMain:!0})})(ot,st,at,lt,ct,dt)})}},3248:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.calculateIm2ColDims=_.createIm2ColProgramInfoLoader=void 0;const tt=et(2039);_.createIm2ColProgramInfoLoader=(rt,nt,ot,at,lt)=>{const ct=(dt=lt.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[tt.TextureType.unpacked],cacheHint:dt});var dt;return Object.assign(Object.assign({},ct),{get:()=>((st,it,ut,ht,ft,gt)=>{const mt=ut.dims,yt=ht.dims,bt=ft.length,vt=(0,_.calculateIm2ColDims)(mt,yt,ft,4),xt=`
        const int XC = ${mt[1]};
        const int XH = ${mt[2]};
        const int XW = ${mt[3]};
        const int KH = ${gt.kernelShape[0]};
        const int KW = ${gt.kernelShape[1]};
        const int dilationH = ${gt.dilations[0]};
        const int dilationW = ${gt.dilations[1]};
        const int strideH = ${gt.strides[0]};
        const int strideW = ${gt.strides[1]};
        const int padH = ${gt.pads[0]};
        const int padW = ${gt.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${bt}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${mt.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},it),{output:{dims:vt,type:ut.type,textureType:tt.TextureType.packedLastDimension},shaderSource:xt})})(0,ct,nt,ot,at,lt)})},_.calculateIm2ColDims=(rt,nt,ot,at=4)=>[ot[0],ot[2],ot[3],Math.ceil(rt[1]*nt[2]*nt[3]/at)]},6572:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseImageScalerAttributes=_.imageScaler=void 0;const tt=et(246),rt=et(2039);_.imageScaler=(ct,dt,st)=>(lt(dt),[ct.run(ot(ct,dt,st),dt)]),_.parseImageScalerAttributes=ct=>{const dt=ct.attributes.getFloat("scale"),st=ct.attributes.getFloats("bias");return(0,tt.createAttributeWithCacheKey)({scale:dt,bias:st})};const nt={name:"ImageScaler",inputNames:["X"],inputTypes:[rt.TextureType.unpacked]},ot=(ct,dt,st)=>{const it=Object.assign(Object.assign({},nt),{cacheHint:st.cacheKey});return Object.assign(Object.assign({},it),{get:()=>((ut,ht,ft,gt)=>{const mt=ft[0].dims.slice(),yt=mt.length,bt=`
      ${at(gt.bias.length)}
      float process(int indices[${yt}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},ht),{output:{dims:mt,type:ft[0].type,textureType:rt.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:gt.bias.length,data:gt.bias},{name:"scale",type:"float",data:gt.scale}],shaderSource:bt})})(0,it,dt,st)})},at=ct=>{const dt=[`float getBias(float bias[${ct}], int channel) {`];for(let st=0;st<ct;++st)st===0?dt.push(`	if (channel == ${st}) { return bias[${st}]; }`):st===ct-1?dt.push(`	else { return bias[${st}]; }`):dt.push(`	else if (channel == ${st}) { return bias[${st}]; }`);return dt.push("	}"),dt.join(`
`)},lt=ct=>{if(!ct||ct.length!==1)throw new Error("ImageScaler requires 1 input.");if(ct[0].dims.length!==4)throw new Error("Invalid input shape.");if(ct[0].type!=="float32"&&ct[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseInstanceNormalizationAttributes=_.instanceNormalization=void 0;const tt=et(5060),rt=et(2039);_.instanceNormalization=(dt,st,it)=>{ct(st);const ut=dt.run(ot(st[0]),st);return[dt.run(lt(dt,st[0],it,ut.dims),[st[0],ut,st[1],st[2]])]},_.parseInstanceNormalizationAttributes=dt=>dt.attributes.getFloat("epsilon",1e-5);const nt={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[rt.TextureType.unpacked]},ot=dt=>Object.assign(Object.assign({},nt),{get:()=>((st,it)=>{const ut=it.dims.slice(),ht=ut[1],ft=ut[2]*ut[3],gt=[ut[0],ht],mt=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${ut[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${ut[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${ft});
        temp = 0.0;
        for(int a2=0; a2<${ut[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${ut[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${ft});

        return v;
      }`;return Object.assign(Object.assign({},st),{output:{dims:gt,type:it.type,textureType:rt.TextureType.packedLastDimension},shaderSource:mt})})(nt,dt)}),at={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[rt.TextureType.unpacked,rt.TextureType.packedLastDimension,rt.TextureType.unpacked,rt.TextureType.unpacked]},lt=(dt,st,it,ut)=>{const ht=Object.assign(Object.assign({},at),{cacheHint:`${it}`});return Object.assign(Object.assign({},ht),{get:()=>((ft,gt,mt,yt,bt)=>{const vt=(0,tt.getGlsl)(ft.session.backend.glContext.version),[xt,wt]=ft.calculateTextureWidthAndHeight(bt,rt.TextureType.packedLastDimension),[St,Et]=[xt/4,wt],_t=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${St}, ${Et});
        return ${vt.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},gt),{output:{dims:mt.dims,type:mt.type,textureType:rt.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:yt}],shaderSource:_t})})(dt,ht,st,it,ut)})},ct=dt=>{if(!dt||dt.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const st=dt[0],it=dt[1],ut=dt[2];if(st.dims.length<3||it.dims.length!==1||ut.dims.length!==1)throw new Error("Invalid input shape.");if(it.dims[0]!==st.dims[1]||ut.dims[0]!==st.dims[1])throw new Error("Input shapes are mismatched.");if(st.type!=="float32"&&st.type!=="float64"||it.type!=="float32"&&it.type!=="float64"||ut.type!=="float32"&&ut.type!=="float64")throw new Error("Invalid input type.");if(dt[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedMatmulProgramInfoLoader=void 0;const tt=et(2517),rt=et(5060),nt=et(2039),ot=et(9390),at=et(2823),lt=et(5623);_.createPackedMatmulProgramInfoLoader=(ct,dt,st)=>{const it=(ut=dt.length>2,ht=st.activationCacheKey,{name:"MatMul (packed)",inputNames:ut?["A","B","Bias"]:["A","B"],inputTypes:ut?[nt.TextureType.packed,nt.TextureType.packed,nt.TextureType.packed]:[nt.TextureType.packed,nt.TextureType.packed],cacheHint:ht});var ut,ht;return Object.assign(Object.assign({},it),{get:()=>((ft,gt,mt,yt)=>{const bt=mt.length>2,vt=bt?"value += getBiasForMatmul();":"",xt=mt[0].dims,wt=mt[1].dims,St=tt.BroadcastUtil.calcShape(xt,wt,!0),Et=!tt.ShapeUtil.areEqual(mt[0].dims,mt[1].dims);if(!St)throw new Error("Can't use matmul on the given tensors");const _t=xt[xt.length-1],Tt=Math.ceil(_t/2),Rt=xt.length,Ot=wt.length,At=(0,rt.getGlsl)(ft.session.backend.glContext.version),Ct=(0,ot.getCoordsDataType)(St.length),$t=St.length,Mt=(0,ot.getGlChannels)(),{activationFunction:Dt,applyActivation:Nt}=(0,at.getActivationSnippet)(yt),Bt=bt?`${(0,lt.getBiasForMatmul)(Ct,Mt,mt[2].dims,St,!0)}`:"",Ut=Et?`${function(nr,ir,cr,hr){let Zt=[],Qt=[];const rr=cr[0].dims,ar=cr[1].dims,pr=rr.length,ur=ar.length,mr=hr.length,Or=mr-pr,$r=mr-ur;Zt=rr.map((Mr,Ur)=>`coords.${ir[Ur+Or]}`),Zt[pr-1]="i*2",Zt.join(", "),Qt=ar.map((Mr,Ur)=>`coords.${ir[Ur+$r]}`),Qt[ur-2]="i*2",Qt.join(", ");const Gr=tt.BroadcastUtil.getBroadcastDims(rr,hr),Br=tt.BroadcastUtil.getBroadcastDims(ar,hr),Jr=Gr.map(Mr=>`coords.${ir[Mr+Or]} = 0;`).join(`
`),Wr=Br.map(Mr=>`coords.${ir[Mr+$r]} = 0;`).join(`
`),Hr=`int lastDim = coords.${ir[mr-1]};
  coords.${ir[mr-1]} = coords.${ir[mr-2]};
  coords.${ir[mr-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${nr} coords = getOutputCoords();
  ${Hr}
  ${Jr}
  vec4 outputValue = getA(${Zt});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${nr} coords = getOutputCoords();
  ${Hr}
  ${Wr}
  vec4 outputValue = getB(${Qt});
  return outputValue;
}`}(Ct,Mt,mt,St)}`:"",Vt=Et?"getAAtOutCoordsMatmul(i)":`getA(${function(nr,ir){let cr="";for(let hr=0;hr<ir-2;hr++)cr+=`rc.${nr[hr]}, `;return cr+=`rc.${nr[ir-2]}, i*2`,cr}(Mt,Rt)})`,Jt=Et?"getBAtOutCoordsMatmul(i)":`getB(${function(nr,ir){let cr="";for(let hr=0;hr<ir-2;hr++)cr+=`rc.${nr[hr]}, `;return cr+=`i*2, rc.${nr[ir-1]}`,cr}(Mt,Ot)})`,lr=`
            ${Ut}
            ${Bt}
            ${Dt}
            void main() {
              ${Et?"":`${Ct} rc =
          getOutputCoords(); int lastDim = rc.${Mt[$t-1]}; rc.${Mt[$t-1]} =
          rc.${Mt[$t-2]}; rc.${Mt[$t-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${Tt}; i++) {
                vec4 a = ${Vt};
                vec4 b = ${Jt};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${vt}
              ${Nt}
              ${At.output} = value;
            }`;return Object.assign(Object.assign({},gt),{output:{dims:St,type:mt[0].type,textureType:nt.TextureType.packed},shaderSource:lr,hasMain:!0})})(ct,it,dt,st)})}},5623:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getBiasForMatmul=_.createMatmulProgramInfoLoader=_.parseMatMulAttributes=_.matMul=void 0;const tt=et(2517),rt=et(2039),nt=et(9390),ot=et(2823),at=et(708);function lt(st,it){const ut=(ht=st.length>2,ft=it.activationCacheKey,{name:"MatMul",inputNames:ht?["A","B","Bias"]:["A","B"],inputTypes:ht?[rt.TextureType.unpacked,rt.TextureType.unpacked,rt.TextureType.unpacked]:[rt.TextureType.unpacked,rt.TextureType.unpacked],cacheHint:ft});var ht,ft;return Object.assign(Object.assign({},ut),{get:()=>function(gt,mt,yt){const bt=mt[0].dims,vt=mt[1].dims,xt=tt.BroadcastUtil.calcShape(bt,vt,!0);if(!xt)throw new Error("Can't use matmul on the given tensors");const wt=(0,nt.getCoordsDataType)(xt.length),St=(0,nt.getGlChannels)(),{activationFunction:Et,applyActivation:_t}=(0,ot.getActivationSnippet)(yt),Tt=mt.length>2,Rt=Tt?"value += getBiasForMatmul();":"",Ot=Tt?`${dt(wt,St,mt[2].dims,xt,!1)}`:"",At=xt.length,Ct=bt.length,$t=vt.length,Mt=`
    ${Et}
    ${Ot}
    float process(int indices[${At}]) {
        int a[${Ct}];
        int b[${$t}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${bt[bt.length-1]}; ++k) {
            a[${Ct-1}] = k;
            b[${$t-2}] = k;
            value += _A(a) * _B(b);
        }
        ${Rt}
        ${_t}
        return value;
    }`;return Object.assign(Object.assign({},gt),{output:{dims:xt,type:mt[0].type,textureType:rt.TextureType.unpacked},shaderSource:Mt})}(ut,st,it)})}_.matMul=(st,it,ut)=>(ct(it),st.session.pack?[st.run((0,at.createPackedMatmulProgramInfoLoader)(st,it,ut),it)]:[st.run(lt(it,ut),it)]),_.parseMatMulAttributes=st=>(0,ot.parseInternalActivationAttributes)(st.attributes),_.createMatmulProgramInfoLoader=lt;const ct=st=>{if(!st||st.length!==2)throw new Error("MatMul requires 2 inputs.");if(st[0].dims[st[0].dims.length-1]!==st[1].dims[st[1].dims.length-2])throw new Error("shared dimension does not match.");if(st[0].type!=="float32"&&st[0].type!=="float64"||st[1].type!=="float32"&&st[1].type!=="float64")throw new Error("inputs should be float type");if(st[0].type!==st[1].type)throw new Error("inputs types should match")};function dt(st,it,ut,ht,ft){let gt="";const mt=ut.length,yt=ht.length,bt=yt-mt;gt=yt<2&&mt>0?"coords":ut.map((wt,St)=>`coords.${it[St+bt]}`).join(", ");const vt=tt.BroadcastUtil.getBroadcastDims(ut,ht).map(wt=>`coords.${it[wt+bt]} = 0;`).join(`
`);let xt="vec4(outputValue.xx, outputValue.yy)";return tt.ShapeUtil.size(ut)===1&&(xt="vec4(outputValue.x)"),ft?`
vec4 getBiasForMatmul() {
  ${st} coords = getOutputCoords();
  ${vt}
  vec4 outputValue = getBias(${gt});
  return ${xt};
}`:`
float getBiasForMatmul() {
  ${st} coords = getOutputCoords();
  ${vt}
  return getBias(coords.x);
}`}_.getBiasForMatmul=dt},2403:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackProgramInfoLoader=void 0;const tt=et(5060),rt=et(2039),nt=et(9390),ot=et(2827),at={name:"pack",inputNames:["A"],inputTypes:[rt.TextureType.unpackedReversed]};_.createPackProgramInfoLoader=(lt,ct)=>Object.assign(Object.assign({},at),{get:()=>((dt,st)=>{const it=(0,tt.getGlsl)(dt.session.backend.glContext.version),ut=st.dims,ht=ut.length,ft=st.dims.length,gt=(0,nt.getCoordsDataType)(ft),mt=(0,ot.getChannels)("rc",ft),yt=(bt=ft,vt=mt,xt=ut[ut.length-2],wt=ut[ut.length-1],bt===0||bt===1?"":`
    int r = ${vt[bt-2]};
    int c = ${vt[bt-1]};
    int rp1 = ${vt[bt-2]} + 1;
    int cp1 = ${vt[bt-1]} + 1;
    bool rEdge = rp1 >= ${wt};
    bool cEdge = cp1 >= ${xt};
    `);var bt,vt,xt,wt;let St;St=ht===0?[1,1]:ht===1?[ut[0],1]:[ut[ft-1],ut[ft-2]];const Et=function(Rt,Ot,At){if(Rt===0)return"false";if(Rt===1)return`rc > ${Ot[0]}`;let Ct="";for(let $t=Rt-2;$t<Rt;$t++)Ct+=`${At[$t]} >= ${Ot[$t-Rt+2]}`,$t<Rt-1&&(Ct+="||");return Ct}(ft,St,mt),_t=function(Rt,Ot){const At=Rt.length;if(At===0)return"getA(), 0, 0, 0";if(At===1)return`getA(rc),
            rc + 1 >= ${Rt[0]} ? 0. : getA(rc + 1),
            0, 0`;let Ct="";if(At>2)for(let $t=0;$t<At-2;++$t)Ct+=`${Ot[$t]},`;return`getA(${Ct}r, c),
          rEdge ? 0. : getA(${Ct}rp1, c),
          cEdge ? 0. : getA(${Ct}r, cp1),
          rEdge || cEdge ? 0. : getA(${Ct}rp1, cp1)`}(ut,mt),Tt=`
        void main() {
          ${gt} rc = getOutputCoords();

          if(${Et}) {
            ${it.output} = vec4(0);
          } else {
            ${yt}

            ${it.output} = vec4(${_t});
          }
        }
      `;return Object.assign(Object.assign({},at),{hasMain:!0,output:{dims:st.dims,type:st.type,textureType:rt.TextureType.packed},shaderSource:Tt})})(lt,ct)})},2827:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.unpackFromChannel=_.getChannels=_.getVecChannels=void 0;const tt=et(9390);function rt(nt,ot){return(0,tt.getGlChannels)(ot).map(at=>`${nt}.${at}`)}_.getVecChannels=rt,_.getChannels=function(nt,ot){return ot===1?[nt]:rt(nt,ot)},_.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parsePadAttributesV11=_.padV11=_.parsePadAttributesV2=_.padV2=void 0;const tt=et(246),rt=et(2517),nt=et(5060),ot=et(2039),at={name:"Pad",inputNames:["A"],inputTypes:[ot.TextureType.unpacked]};_.padV2=(gt,mt,yt)=>(dt(mt),[gt.run(Object.assign(Object.assign({},at),{cacheHint:yt.cacheKey,get:()=>ct(gt,mt[0],yt)}),mt)]),_.parsePadAttributesV2=gt=>{const mt=gt.attributes.getString("mode","constant"),yt=gt.attributes.getFloat("value",0),bt=gt.attributes.getInts("pads");return(0,tt.createAttributeWithCacheKey)({mode:mt,value:yt,pads:bt})},_.padV11=(gt,mt,yt)=>{st(mt);const bt=lt(gt,mt,yt);return(0,_.padV2)(gt,[mt[0]],bt)},_.parsePadAttributesV11=gt=>gt.attributes.getString("mode","constant");const lt=(gt,mt,yt)=>{if(!gt.session.isInitializer(mt[1].dataId)||mt.length>=3&&!gt.session.isInitializer(mt[2].dataId))throw new Error("dynamic pad attributes are not allowed");const bt=Array.from(mt[1].integerData),vt=mt.length>=3?mt[2].floatData[0]:0;return(0,tt.createAttributeWithCacheKey)({mode:yt,pads:bt,value:vt})},ct=(gt,mt,yt)=>{const bt=rt.ShapeUtil.padShape(mt.dims.slice(),yt.pads),vt=bt.length,xt=`
      ${it(gt,mt,yt)}
      float process(int[${vt}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[ot.TextureType.unpacked],output:{dims:bt,type:mt.type,textureType:ot.TextureType.unpacked},shaderSource:xt}},dt=gt=>{if(!gt||gt.length!==1)throw new Error("Pad requires 1 input");if(gt[0].type!=="float32"&&gt[0].type!=="float64")throw new Error("Invalid input type.")},st=gt=>{if(!gt||gt.length!==2&&gt.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(gt[1].type!=="int32")throw new Error("Invalid input type.");if(gt.length>=3&&gt[2].type==="string")throw new Error("Invalid input type.")},it=(gt,mt,yt)=>{const bt=(0,nt.getGlsl)(gt.session.backend.glContext.version),[vt,xt]=gt.calculateTextureWidthAndHeight(mt.dims,ot.TextureType.unpacked),wt=rt.ShapeUtil.computeStrides(mt.dims);switch(yt.mode){case"constant":return ut(bt,mt.dims,wt,vt,xt,yt.pads,yt.value);case"reflect":return ht(bt,mt.dims,wt,vt,xt,yt.pads);case"edge":return ft(bt,mt.dims,wt,vt,xt,yt.pads);default:throw new Error("Invalid mode")}},ut=(gt,mt,yt,bt,vt,xt,wt)=>{const St=mt.length;let Et="";for(let _t=St-1;_t>=0;--_t)Et+=`
        k = m[${_t}] - ${xt[_t]};
        if (k < 0)  return constant;
        if (k >= ${mt[_t]}) return constant;
        offset += k * ${yt[_t]};
        `;return`
      float padA(int m[${St}]) {
        const float constant = float(${wt});
        int offset = 0;
        int k = 0;
        ${Et}
        vec2 coords = offsetToCoords(offset, ${bt}, ${vt});
        float value = getColorAsFloat(${gt.texture2D}(A, coords));
        return value;
      }
      `},ht=(gt,mt,yt,bt,vt,xt)=>{const wt=mt.length;let St="";for(let Et=wt-1;Et>=0;--Et)St+=`
        k = m[${Et}] - ${xt[Et]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(mt[Et]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${mt[Et]}) { k = _2n_1 - k; }
        }
        offset += k * ${yt[Et]};
        `;return`
      float padA(int m[${wt}]) {
        int offset = 0;
        int k = 0;
        ${St}
        vec2 coords = offsetToCoords(offset, ${bt}, ${vt});
        float value = getColorAsFloat(${gt.texture2D}(A, coords));
        return value;
      }
      `},ft=(gt,mt,yt,bt,vt,xt)=>{const wt=mt.length;let St="";for(let Et=wt-1;Et>=0;--Et)St+=`
        k = m[${Et}] - ${xt[Et]};
        if (k < 0)  k = 0;
        if (k >= ${mt[Et]}) k = ${mt[Et]-1};
        offset += k * ${yt[Et]};
      `;return`
      float padA(int m[${wt}]) {
        int offset = 0;
        int k = 0;
        ${St}
        vec2 coords = offsetToCoords(offset, ${bt}, ${vt});
        float value = getColorAsFloat(${gt.texture2D}(A, coords));
        return value;
      }
      `}},2143:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.globalMaxPool=_.parseMaxPoolAttributes=_.maxPool=_.parseGlobalAveragePoolAttributes=_.globalAveragePool=_.parseAveragePoolAttributes=_.averagePool=void 0;const tt=et(246),rt=et(2517),nt=et(2039);_.averagePool=(ft,gt,mt)=>{st(gt);const yt={name:"AveragePool",inputNames:["X"],inputTypes:[nt.TextureType.unpacked],cacheHint:mt.cacheKey};return[ft.run(Object.assign(Object.assign({},yt),{get:()=>ot(gt,yt,!1,mt)}),gt)]},_.parseAveragePoolAttributes=ft=>{const gt=ft.attributes.getString("auto_pad","NOTSET"),mt=ft.attributes.getInt("ceil_mode",0),yt=ft.attributes.getInt("count_include_pad",0)!==0,bt=ft.attributes.getInts("kernel_shape"),vt=ft.attributes.getInts("strides",[]),xt=ft.attributes.getInts("pads",[]);if(mt!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,tt.createAttributeWithCacheKey)({autoPad:gt,ceilMode:mt,countIncludePad:yt,kernelShape:bt,strides:vt,pads:xt})};const ot=(ft,gt,mt,yt)=>{const[bt,vt]=lt(ft,yt,mt),xt=rt.ShapeUtil.size(bt.kernelShape);let wt="";bt.countIncludePad?wt+=`value /= float(${xt});`:wt+=`value /= float(${xt} - pad);`;const St=`
        ${it(ft[0].dims,bt,"value += _X(x);",wt,"0.0")}
      `;return Object.assign(Object.assign({},gt),{output:{dims:vt,type:ft[0].type,textureType:nt.TextureType.unpacked},shaderSource:St})};_.globalAveragePool=(ft,gt,mt)=>{st(gt);const yt={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[nt.TextureType.unpacked],cacheHint:`${mt.countIncludePad}`};return[ft.run(Object.assign(Object.assign({},yt),{get:()=>ot(gt,yt,!0,mt)}),gt)]},_.parseGlobalAveragePoolAttributes=ft=>{const gt=ft.attributes.getInt("count_include_pad",0)!==0;return(0,tt.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:gt,kernelShape:[],strides:[],pads:[]})},_.maxPool=(ft,gt,mt)=>{st(gt);const yt={name:"MaxPool",inputNames:["X"],inputTypes:[nt.TextureType.unpacked],cacheHint:mt.cacheKey};return[ft.run(Object.assign(Object.assign({},yt),{get:()=>at(gt,yt,!1,mt)}),gt)]},_.parseMaxPoolAttributes=ft=>{const gt=ft.attributes.getString("auto_pad","NOTSET"),mt=ft.attributes.getInt("ceil_mode",0),yt=ft.attributes.getInts("kernel_shape"),bt=ft.attributes.getInts("strides",[]),vt=ft.attributes.getInts("pads",[]),xt=ft.attributes.getInt("storage_order",0),wt=ft.attributes.getInts("dilations",[]);if(xt!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(mt!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,tt.createAttributeWithCacheKey)({autoPad:gt,ceilMode:mt,countIncludePad:!1,kernelShape:yt,strides:bt,pads:vt,storageOrder:xt,dilations:wt})};const at=(ft,gt,mt,yt)=>{const[bt,vt]=lt(ft,yt,mt),xt=`
      ${it(ft[0].dims,bt,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},gt),{output:{dims:vt,type:ft[0].type,textureType:nt.TextureType.unpacked},shaderSource:xt})},lt=(ft,gt,mt)=>{const yt=ft[0].dims.slice(),bt=Object.hasOwnProperty.call(gt,"dilations"),vt=gt.kernelShape.slice(),xt=gt.strides.slice(),wt=bt?gt.dilations.slice():[],St=gt.pads.slice();rt.PoolConvUtil.adjustPoolAttributes(mt,yt,vt,xt,wt,St);const Et=rt.PoolConvUtil.computePoolOutputShape(mt,yt,xt,wt,vt,St,gt.autoPad),_t=Object.assign({},gt);return bt?Object.assign(_t,{kernelShape:vt,strides:xt,pads:St,dilations:wt,cacheKey:gt.cacheKey}):Object.assign(_t,{kernelShape:vt,strides:xt,pads:St,cacheKey:gt.cacheKey}),[_t,Et]},ct={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},dt={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[nt.TextureType.unpacked]};_.globalMaxPool=(ft,gt)=>(st(gt),[ft.run(Object.assign(Object.assign({},dt),{get:()=>at(gt,dt,!0,ct)}),gt)]);const st=ft=>{if(!ft||ft.length!==1)throw new Error("Pool ops requires 1 input.");if(ft[0].type!=="float32"&&ft[0].type!=="float64")throw new Error("Invalid input type.")},it=(ft,gt,mt,yt,bt)=>{const vt=ft.length;if(gt.kernelShape.length<=2){const xt=gt.kernelShape[gt.kernelShape.length-1],wt=gt.strides[gt.strides.length-1],St=gt.pads[gt.pads.length/2-1],Et=gt.pads[gt.pads.length-1],_t=ft[vt-1];let Tt="",Rt="",Ot="";if(Tt=St+Et!==0?`
          for (int i = 0; i < ${xt}; i++) {
            x[${vt} - 1] = indices[${vt} - 1] * ${wt} - ${St} + i;
            if (x[${vt} - 1] < 0 || x[${vt} - 1] >= ${_t}) {
              pad++;
              continue;
            }
            ${mt}
          }`:`
          for (int i = 0; i < ${xt}; i++) {
            x[${vt} - 1] = indices[${vt} - 1] * ${wt} - ${St} + i;
            ${mt}
          }`,gt.kernelShape.length===2){const At=gt.kernelShape[gt.kernelShape.length-2],Ct=gt.strides[gt.strides.length-2],$t=gt.pads[gt.pads.length/2-2],Mt=gt.pads[gt.pads.length-2],Dt=ft[vt-2];Rt=$t+Mt!==0?`
            for (int j = 0; j < ${At}; j++) {
              x[${vt} - 2] = indices[${vt} - 2] * ${Ct} - ${$t} + j;
              if (x[${vt} - 2] < 0 || x[${vt} - 2] >= ${Dt}) {
                pad+= ${xt};
                continue;
              }
          `:`
            for (int j = 0; j < ${At}; j++) {
              x[${vt} - 2] = indices[${vt} - 2] * ${Ct} - ${$t} + j;
            `,Ot=`
          }
        `}return`
        float process(int indices[${vt}]) {
          int x[${vt}];
          copyVec(indices, x);

          float value = ${bt};
          int pad = 0;
          ${Rt}
          ${Tt}
          ${Ot}
          ${yt}
          return value;
        }
      `}{const xt=rt.ShapeUtil.size(gt.kernelShape),wt=rt.ShapeUtil.computeStrides(gt.kernelShape),St=wt.length,Et=gt.pads.length,_t=ht(St),Tt=ut(ft,"inputDims"),Rt=ut(gt.pads,"pads"),Ot=ut(wt,"kernelStrides"),At=ut(gt.strides,"strides");let Ct="";return Ct=gt.pads.reduce(($t,Mt)=>$t+Mt)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${mt}
          }`:`
          }
          ${mt}
        `,`
        ${_t}
        float process(int indices[${vt}]) {
          int x[${vt}];
          copyVec(indices, x);
          int offset[${St}];
          int pads[${Et}];
          int inputDims[${vt}];
          int kernelStrides[${St}];
          int strides[${St}];
          ${Rt}
          ${Tt}
          ${At}
          ${Ot}

          float value = ${bt};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${xt}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${vt} - ${St}; j < ${vt}; j++) {
              x[j] = indices[j] * strides[j - ${vt} + ${St}]
                + offset[j - ${vt} + ${St}] - pads[j - 2];
              ${Ct}
          }
          ${yt}

          return value;
        }
      `}},ut=(ft,gt)=>{let mt="";for(let yt=0;yt<ft.length;yt++)mt+=`
      ${gt}[${yt}] = ${ft[yt]};
    `;return mt},ht=ft=>`
  void offsetToIndices(int offset, int[${ft}] strides, out int[${ft}] indices) {
    if (${ft} == 0) {
      return;
    }
    for (int i = 0; i < ${ft} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${ft} - 1] = offset;
  }`},4939:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.reduceLogSumSquare=_.reduceLogSum=_.reduceProd=_.reduceMin=_.reduceMax=_.reduceMean=_.reduceSum=_.parseReduceAttributes=void 0;const tt=et(246),rt=et(782),nt=et(2517),ot=et(2039),at=(dt,st,it,ut,ht)=>{ct(st);const ft={name:ut,inputNames:["A"],inputTypes:[ot.TextureType.unpacked]};return[dt.run(Object.assign(Object.assign({},ft),{cacheHint:it.cacheKey,get:()=>lt(dt,st,it,ut,ht,ft)}),st)]};_.parseReduceAttributes=dt=>{const st=dt.attributes.getInts("axes",[]),it=dt.attributes.getInt("keepdims",1)===1;return(0,tt.createAttributeWithCacheKey)({axes:st,keepDims:it})};const lt=(dt,st,it,ut,ht,ft)=>{const gt=[],mt=st[0].dims.length||1,yt=[],bt=nt.ShapeUtil.normalizeAxes(it.axes,st[0].dims.length),vt=ht(st,bt);let xt=vt[1];for(let St=0;St<st[0].dims.length;St++)bt.indexOf(St)>=0||bt.length===0?(it.keepDims&&gt.push(1),xt=`
          for(int j${St} = 0; j${St} < ${st[0].dims[St]}; j${St}++) {
            inputIdx[${St}] = j${St};
            ${xt}
          }`):(yt.push(`inputIdx[${St}] = outputIdx[${gt.length}];`),gt.push(st[0].dims[St]));const wt=`
      float process(int outputIdx[${gt.length||1}]) {
        float value;                 // final result
        int inputIdx[${mt}];      // addressing input data
        ${yt.join(`
`)}
        ${vt[0]}       // init ops for reduce max/min
        ${xt}
        ${vt[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},ft),{output:{dims:gt,type:st[0].type,textureType:ot.TextureType.unpacked},shaderSource:wt})},ct=dt=>{if(!dt||dt.length!==1)throw new Error("Reduce op requires 1 input.");if(rt.NUMBER_TYPES.indexOf(dt[0].type)===-1)throw new Error("Invalid input type.")};_.reduceSum=(dt,st,it)=>at(dt,st,it,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),_.reduceMean=(dt,st,it)=>at(dt,st,it,"ReduceMean",(ut,ht)=>{let ft=1;for(let gt=0;gt<ut[0].dims.length;gt++)(ht.indexOf(gt)>=0||ht.length===0)&&(ft*=ut[0].dims[gt]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${ft}.;`]}),_.reduceMax=(dt,st,it)=>at(dt,st,it,"ReduceMax",(ut,ht)=>{const ft=[];for(let gt=0;gt<ut[0].dims.length;gt++)(ht.indexOf(gt)>=0||ht.length===0)&&ft.push(`inputIdx[${gt}] = 0;`);return[`${ft.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),_.reduceMin=(dt,st,it)=>at(dt,st,it,"ReduceMin",(ut,ht)=>{const ft=[];for(let gt=0;gt<ut[0].dims.length;gt++)(ht.indexOf(gt)>=0||ht.length===0)&&ft.push(`inputIdx[${gt}] = 0;`);return[`${ft.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),_.reduceProd=(dt,st,it)=>at(dt,st,it,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),_.reduceLogSum=(dt,st,it)=>at(dt,st,it,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),_.reduceLogSumSquare=(dt,st,it)=>at(dt,st,it,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.isReshapeCheap=_.processDims3D=_.createPackedReshape3DProgramInfoLoader=void 0;const tt=et(2517),rt=et(5060),nt=et(2039),ot=et(2827);_.createPackedReshape3DProgramInfoLoader=(at,lt,ct)=>{const dt=(st=>({name:"Reshape (packed)",inputTypes:[nt.TextureType.packed],inputNames:["A"],cacheHint:`${st}`}))(ct);return Object.assign(Object.assign({},dt),{get:()=>((st,it,ut,ht)=>{const ft=it.dims,gt=ht;let mt="";for(let vt=0;vt<4;vt++){let xt="";switch(vt){case 0:xt="outputCoords = rc;";break;case 1:xt="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:xt="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:xt="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}mt+=`
        ${xt}
        ${vt>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${vt}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${vt>0?"}":""}
      `}const yt=(0,rt.getGlsl)(st.session.backend.glContext.version),bt=`
      ${function(vt){const xt=tt.ShapeUtil.computeStrides(vt),wt=["b","r","c"],St="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${xt.map((Et,_t)=>`int ${wt[_t]} = ${St} / ${Et}; ${_t===xt.length-1?`int ${wt[_t+1]} = ${St} - ${wt[_t]} * ${Et}`:`index -= ${wt[_t]} * ${Et}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(ft)}
      ${function(vt){const xt=tt.ShapeUtil.computeStrides(vt);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${xt[0]} + coords.z * ${xt[1]} + coords.y;
  }
`}(gt)}
      ${(0,ot.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${gt[2]};
        int cols = ${gt[1]};

        ${mt}
        ${yt.output} = result;
      }
    `;return Object.assign(Object.assign({},ut),{output:{dims:gt,type:it.type,textureType:nt.TextureType.packed},shaderSource:bt,hasMain:!0})})(at,lt,dt,ct)})},_.processDims3D=function(at){if(at.length===0)return[1,1,1];let lt=1;for(let ct=0;ct<at.length-2;++ct)lt*=at[ct];return[lt,at.length>1?at[at.length-2]:1,at[at.length-1]]},_.isReshapeCheap=function(at,lt){let ct=!1;return ct=at.length===0||lt.length===0||(at.length<2||lt.length<2?at[at.length-1]===lt[lt.length-1]:at[at.length-1]===lt[lt.length-1]&&at[at.length-2]===lt[lt.length-2]),ct}},718:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.reshape=void 0;const tt=et(2517);_.reshape=(rt,nt)=>{const ot=tt.ShapeUtil.calculateReshapedDims(nt[0].dims,nt[1].integerData);return rt.session.pack?[rt.reshapePacked(nt[0],ot)]:[rt.reshapeUnpacked(nt[0],ot)]}},2268:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseResizeAttributesV11=_.parseResizeAttributesV10=_.resize=void 0;const tt=et(5060),rt=et(2039),nt=et(9390),ot=et(2827),at=et(9793),lt={name:"Resize",inputNames:["A"],inputTypes:[rt.TextureType.packed]};_.resize=(ut,ht,ft)=>((0,at.validateInputs)(ht,ft),[ut.run(Object.assign(Object.assign({},lt),{cacheHint:ft.cacheKey,get:()=>ct(ut,ht,ft)}),ht)]),_.parseResizeAttributesV10=ut=>(0,at.parseUpsampleAttributes)(ut,10),_.parseResizeAttributesV11=ut=>(0,at.parseUpsampleAttributes)(ut,11);const ct=(ut,ht,ft)=>{const gt=(0,tt.getGlsl)(ut.session.backend.glContext.version),[mt,yt]=dt(ht,ft);if(mt.every(Ct=>Ct===1)&&ft.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},lt),{output:{dims:yt,type:ht[0].type,textureType:rt.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${gt.texture2D}(X, TexCoords);
                    ${gt.output} = v;
                }`});const bt=yt.length;if(bt<2)throw new Error(`output dimension should be at least 2, but got ${bt}`);const vt=yt[bt-2],xt=yt[bt-1],wt=ht[0].dims;if(bt!==wt.length)throw new Error(`output dimension should match input ${wt.length}, but got ${bt}`);const St=wt[bt-2],Et=wt[bt-1],_t=mt[bt-2],Tt=mt[bt-1];let Rt="";if(ft.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${ft.mode}'`);switch(ft.coordinateTransformMode){case"asymmetric":Rt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":Rt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":Rt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${xt}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${vt}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${xt}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${vt}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":Rt=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${xt}.0 - 1.0, ${vt}.0 - 1.0, ${xt}.0 - 1.0,
                            ${vt}.0 - 1.0);
                        vec4 original = vec4(${Et}.0 - 1.0, ${St}.0 - 1.0, ${Et}.0 - 1.0,
                            ${St}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${ft.coordinateTransformMode}'`)}const Ot=(0,nt.getCoordsDataType)(bt),At=`
            const vec2 inputWH = vec2(${St}.0, ${Et}.0);
            const vec4 scaleWHWH = vec4(float(${_t}), float(${Tt}), float(${_t}), float(${Tt}));
            ${(0,ot.unpackFromChannel)()}
            ${Rt}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${Ot} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${vt-1};
                bool hasNextCol = rc.z < ${xt-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${gt.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},lt),{output:{dims:yt,type:ht[0].type,textureType:rt.TextureType.packed},hasMain:!0,shaderSource:At})},dt=(ut,ht)=>{const ft=ut[0].dims;let gt,mt=ht.scales;if(mt.length===0){const bt=ut[ht.scalesInputIdx];if(bt&&bt.size!==0){if(ut[ht.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");mt=st(bt,ht.mode,ht.isResize)}else{const vt=ut[ht.sizesInputIdx];if(!vt||vt.size===0)throw new Error("Either scales or sizes MUST be provided as input.");gt=Array.from(vt.integerData),mt=it(gt,ft,ht.mode,ht.isResize)}}else if(ut[ht.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const yt=gt||ft.map((bt,vt)=>Math.floor(bt*mt[vt]));return[mt,yt]},st=(ut,ht,ft)=>{const gt=Array.from(ut.floatData);return(0,at.scalesValidation)(gt,ht,ft),gt},it=(ut,ht,ft,gt)=>{const mt=ht.length,yt=new Array(mt);for(let bt=0,vt=mt;bt<vt;bt++)if(ht[bt]===0){if(ut[bt]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");yt[bt]=1}else yt[bt]=ut[bt]/ht[bt];return(0,at.scalesValidation)(yt,ft,gt),yt}},8117:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.shape=void 0;const tt=et(9162);_.shape=(nt,ot)=>(rt(ot),[new tt.Tensor([ot[0].dims.length],"int32",void 0,void 0,new Int32Array(ot[0].dims))]);const rt=nt=>{if(!nt||nt.length!==1)throw new Error("Shape requires 1 input.")}},2278:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.sliceV10=_.parseSliceAttributes=_.slice=void 0;const tt=et(246),rt=et(782),nt=et(2517),ot=et(2039),at={name:"Slice",inputNames:["A"],inputTypes:[ot.TextureType.unpacked]};_.slice=(it,ut,ht)=>(ct(ut),[it.run(Object.assign(Object.assign({},at),{cacheHint:ht.cacheKey,get:()=>lt(it,ut[0],ht)}),ut)]),_.parseSliceAttributes=it=>{const ut=it.attributes.getInts("starts"),ht=it.attributes.getInts("ends"),ft=it.attributes.getInts("axes",[]);return(0,tt.createAttributeWithCacheKey)({starts:ut,ends:ht,axes:ft})};const lt=(it,ut,ht)=>{const ft=ht.axes.length===0?ut.dims.slice(0).map((wt,St)=>St):ht.axes,gt=nt.ShapeUtil.normalizeAxes(ft,ut.dims.length),mt=ht.starts.map((wt,St)=>wt>ut.dims[gt[St]]-1?ut.dims[gt[St]]:nt.ShapeUtil.normalizeAxis(wt,ut.dims[gt[St]])),yt=ht.ends.map((wt,St)=>wt>ut.dims[gt[St]]-1?ut.dims[gt[St]]:nt.ShapeUtil.normalizeAxis(wt,ut.dims[gt[St]])),bt=ut.dims.slice(),vt=[];for(let wt=0;wt<gt.length;wt++)bt[gt[wt]]=yt[wt]-mt[wt],mt[wt]>0&&vt.push(`outputIdx[${gt[wt]}] += ${mt[wt]};`);const xt=`
      float process(int outputIdx[${bt.length}]) {
        ${vt.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},at),{output:{dims:bt,type:ut.type,textureType:ot.TextureType.unpacked},shaderSource:xt})},ct=it=>{if(!it||it.length!==1)throw new Error("Slice requires 1 input.");if(rt.NUMBER_TYPES.indexOf(it[0].type)===-1)throw new Error("Invalid input type.")};_.sliceV10=(it,ut)=>{st(ut);const ht=dt(it,ut);return[it.run(Object.assign(Object.assign({},at),{cacheHint:ht.cacheKey,get:()=>lt(it,ut[0],ht)}),[ut[0]])]};const dt=(it,ut)=>{if(!it.session.isInitializer(ut[1].dataId)||!it.session.isInitializer(ut[2].dataId)||ut.length>=4&&!it.session.isInitializer(ut[3].dataId)||ut.length>=5&&!it.session.isInitializer(ut[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(ut.length>=5&&ut[4].integerData.some(mt=>mt!==1))throw new Error("currently non-1 steps is not supported for Slice");const ht=Array.from(ut[1].integerData),ft=Array.from(ut[2].integerData),gt=ut.length>=4?Array.from(ut[3].integerData):[];return{starts:ht,ends:ft,axes:gt,cacheKey:`${gt};${ht};${ft}`}},st=it=>{if(!it||it.length<3||it.length>5)throw new Error("Invalid input number.");if(it[1].type!=="int32"||it[1].dims.length!==1)throw new Error("Invalid input type.");if(it[2].type!=="int32"||it[2].dims.length!==1)throw new Error("Invalid input type.");if(it.length>=4&&(it[3].type!=="int32"||it[3].dims.length!==1))throw new Error("Invalid input type.");if(it.length>=5&&(it[4].type!=="int32"||it[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.softmaxV13=_.parseSoftmaxAttributesV13=_.parseSoftmaxAttributes=_.softmax=void 0;const tt=et(246),rt=et(2517),nt=et(5060),ot=et(2039),at=et(3738),lt={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[ot.TextureType.unpacked]},ct={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[ot.TextureType.unpacked,ot.TextureType.unpacked]},dt={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[ot.TextureType.unpacked,ot.TextureType.unpacked,ot.TextureType.unpacked]};_.softmax=(gt,mt,yt)=>{ft(mt);const bt=mt[0].dims.slice(),vt=rt.ShapeUtil.normalizeAxis(yt.axis,bt.length),xt=rt.ShapeUtil.sizeToDimension(bt,vt),wt=rt.ShapeUtil.sizeFromDimension(bt,vt);return st(gt,mt,yt,xt,wt)},_.parseSoftmaxAttributes=gt=>(0,tt.createAttributeWithCacheKey)({axis:gt.attributes.getInt("axis",1)}),_.parseSoftmaxAttributesV13=gt=>(0,tt.createAttributeWithCacheKey)({axis:gt.attributes.getInt("axis",-1)}),_.softmaxV13=(gt,mt,yt)=>{ft(mt);const bt=mt[0].dims.slice(),vt=rt.ShapeUtil.normalizeAxis(yt.axis,bt.length),xt=bt.length,wt=vt!==xt-1,St=[];let Et,_t=[],Tt=[];wt&&(_t=Array.from({length:xt}).map((Ct,$t)=>$t),_t[vt]=xt-1,_t[xt-1]=vt,_t.map(Ct=>St.push(bt[Ct])),Et=(0,tt.createAttributeWithCacheKey)({perm:_t}),Tt=(0,at.transpose)(gt,mt,Et));const Rt=wt?rt.ShapeUtil.sizeToDimension(St,xt-1):rt.ShapeUtil.sizeToDimension(bt,xt-1),Ot=wt?rt.ShapeUtil.sizeFromDimension(St,xt-1):rt.ShapeUtil.sizeFromDimension(bt,xt-1),At=st(gt,wt?Tt:mt,yt,Rt,Ot);return wt?(0,at.transpose)(gt,At,Et):At};const st=(gt,mt,yt,bt,vt)=>{const xt=it(gt,mt[0],bt,vt,[bt]),wt=gt.run(Object.assign(Object.assign({},lt),{cacheHint:yt.cacheKey,get:()=>xt}),mt),St=ut(gt,mt[0],bt,vt,xt.output.dims,[bt]),Et=gt.run(Object.assign(Object.assign({},ct),{cacheHint:yt.cacheKey,get:()=>St}),[mt[0],wt]),_t=ht(gt,mt[0],bt,vt,xt.output.dims,St.output.dims);return[gt.run(Object.assign(Object.assign({},dt),{cacheHint:yt.cacheKey,get:()=>_t}),[mt[0],wt,Et])]},it=(gt,mt,yt,bt,vt)=>{const[xt,wt]=gt.calculateTextureWidthAndHeight(mt.dims,ot.TextureType.unpacked),St=vt.length;if(yt<1||bt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(vt.length!==1)throw new Error("Dimensionality of the output should be 1");if(vt[0]!==yt)throw new Error("Shape of the output should be equal to logical row count");const Et=(0,nt.getGlsl)(gt.session.backend.glContext.version),_t=`
      float process(int[${St}] indices) {
        int logical_row_start_offset = indices[0] * ${bt};

        float max = getColorAsFloat(${Et.texture2D}(A, offsetToCoords(logical_row_start_offset, ${xt},
        ${wt} )));
        for(int i=1; i<${bt}; ++i)
        {
          float current = getColorAsFloat(${Et.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${xt}, ${wt})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},lt),{output:{dims:vt,type:mt.type,textureType:ot.TextureType.unpacked},shaderSource:_t})},ut=(gt,mt,yt,bt,vt,xt)=>{const[wt,St]=gt.calculateTextureWidthAndHeight(mt.dims,ot.TextureType.unpacked),Et=xt.length;if(yt<1||bt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(xt.length!==1)throw new Error("Dimensionality of the output should be 1");if(xt[0]!==yt)throw new Error("Shape of the output should be equal to logical row count");if(vt.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(vt[0]!==yt)throw new Error("Shape of the intermediate results should be equal to logical row count");const _t=`
      float process(int[${Et}] indices) {
        int logical_row_start_offset = indices[0] * ${bt};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${bt}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,nt.getGlsl)(gt.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${wt}, ${St}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},ct),{output:{dims:xt,type:mt.type,textureType:ot.TextureType.unpacked},shaderSource:_t})},ht=(gt,mt,yt,bt,vt,xt)=>{const[wt,St]=gt.calculateTextureWidthAndHeight(mt.dims,ot.TextureType.unpacked),Et=mt.dims.length;if(yt<1||bt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(vt.length!==1||xt.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(vt[0]!==yt||xt[0]!==yt)throw new Error("Shape of the intermediate results should be equal to logical row count");const _t=`
      float process(int[${Et}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${wt}, ${St});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${bt};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},dt),{output:{dims:mt.dims,type:mt.type,textureType:ot.TextureType.unpacked},shaderSource:_t})},ft=gt=>{if(!gt||gt.length!==1)throw new Error("Softmax requires 1 input.");if(gt[0].type!=="float32"&&gt[0].type!=="float64")throw new Error("Invalid input type")}},5975:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseSplitAttributes=_.split=void 0;const tt=et(246),rt=et(2517),nt=et(2039),ot={name:"Split",inputNames:["A"],inputTypes:[nt.TextureType.unpacked]};_.split=(dt,st,it)=>{ct(st);const ut=rt.ShapeUtil.normalizeAxis(it.axis,st[0].dims.length),ht=at(dt,st,ut,it),ft=[];for(let gt=0;gt<ht;++gt)ft.push(dt.run(Object.assign(Object.assign({},ot),{cacheHint:`${it.cacheKey};${gt}`,get:()=>lt(dt,st[0],it,ut,gt)}),st));return ft},_.parseSplitAttributes=dt=>{const st=dt.attributes.getInt("axis",0),it=dt.attributes.getInts("split",[]),ut=dt.outputs.length;return(0,tt.createAttributeWithCacheKey)({axis:st,split:it,numOutputs:ut})};const at=(dt,st,it,ut)=>{const[,ht]=rt.SplitUtil.splitShape(st[0].dims,it,ut.split,ut.numOutputs);return ht.length},lt=(dt,st,it,ut,ht)=>{const[ft,gt]=rt.SplitUtil.splitShape(st.dims,ut,it.split,it.numOutputs),mt=gt[ht],yt=ft[ht],bt=`
      float process(int indices[${yt.length}]) {
        indices[${ut}] += ${mt};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},ot),{cacheHint:`${it.cacheKey}:${ht}`,output:{dims:yt,type:st.type,textureType:nt.TextureType.unpacked},shaderSource:bt})},ct=dt=>{if(!dt||dt.length!==1)throw new Error("Split requires one input.");if(dt[0].type!=="int8"&&dt[0].type!=="uint8"&&dt[0].type!=="int16"&&dt[0].type!=="uint16"&&dt[0].type!=="int32"&&dt[0].type!=="uint32"&&dt[0].type!=="float32"&&dt[0].type!=="float64"&&dt[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseSqueezeAttributes=_.squeezeV13=_.squeeze=void 0;const tt=et(2517);_.squeeze=(ot,at,lt)=>{rt(at);const ct=tt.ShapeUtil.squeezeShape(at[0].dims,lt);return[ot.reshapeUnpacked(at[0],ct)]},_.squeezeV13=(ot,at)=>(nt(at),(0,_.squeeze)(ot,[at[0]],Array.from(at[1].integerData))),_.parseSqueezeAttributes=ot=>ot.attributes.getInts("axes");const rt=ot=>{if(!ot||ot.length!==1)throw new Error("Squeeze requires 1 input.");if(ot[0].type==="string")throw new Error("invalid input tensor types.")},nt=ot=>{if(!ot||ot.length!==2)throw new Error("Squeeze requires 2 inputs.");if(ot[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.sum=void 0;const tt=et(5060),rt=et(2039);_.sum=(at,lt)=>{ot(lt);const ct={name:"Sum",inputNames:lt.map((dt,st)=>`X${st}`),inputTypes:new Array(lt.length).fill(rt.TextureType.unpacked)};return[at.run(Object.assign(Object.assign({},ct),{get:()=>nt(at,lt,ct)}),lt)]};const nt=(at,lt,ct)=>{const dt=(0,tt.getGlsl)(at.session.backend.glContext.version),st=lt[0].dims.slice(),it=`
      void main() {
        vec4 result = ${lt.map((ut,ht)=>`${dt.texture2D}(X${ht},TexCoords)`).join(" + ")};
        ${dt.output} = result;
      }
    `;return Object.assign(Object.assign({},ct),{output:{dims:st,type:lt[0].type,textureType:rt.TextureType.unpacked},hasMain:!0,shaderSource:it})},ot=at=>{if(!at||at.length===0)throw new Error("Sum requires inputs.");const lt=at[0].dims.length;for(let ct=1;ct<at.length;ct++){if(lt!==at[ct].dims.length)throw new Error("Input shapes are mismatched.");for(let dt=0;dt<lt;dt++)if(at[0].dims[dt]!==at[ct].dims[dt])throw new Error("Input shapes are not matched.")}if(at[0].type!=="float32"&&at[0].type!=="float64")throw new Error("Invalid input type.");for(let ct=1;ct<at.length;ct++)if(at[0].type!==at[ct].type)throw new Error("Input types are not matched.")}},5723:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.tile=void 0;const tt=et(782),rt=et(2039);_.tile=(at,lt)=>{ot(lt);const ct={name:"Tile",inputNames:["A"],inputTypes:[rt.TextureType.unpacked]};return[at.run(Object.assign(Object.assign({},ct),{get:()=>nt(at,lt,ct)}),lt)]};const nt=(at,lt,ct)=>{const dt=lt[0].dims.slice(),st=new Array(dt.length),it=[];for(let ft=0;ft<dt.length;ft++)st[ft]=dt[ft]*lt[1].numberData[ft],it.push(`inputIdx[${ft}] = int(mod(float(outputIdx[${ft}]), ${dt[ft]}.));`);const ut=st.length,ht=`
      float process(int outputIdx[${ut}]) {
        int inputIdx[${ut}];
        ${it.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},ct),{output:{dims:st,type:lt[0].type,textureType:rt.TextureType.unpacked},shaderSource:ht})},ot=at=>{if(!at||at.length!==2)throw new Error("Tile requires 2 input.");if(at[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(at[1].dims[0]!==at[0].dims.length)throw new Error("Invalid input shape.");if(tt.NUMBER_TYPES.indexOf(at[0].type)===-1)throw new Error("Invalid input type.");if(at[1].type!=="int32"&&at[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseTransposeAttributes=_.transpose=void 0;const tt=et(246),rt=et(2517),nt=et(2039),ot={name:"Transpose",inputNames:["A"],inputTypes:[nt.TextureType.unpacked]};_.transpose=(it,ut,ht)=>(st(ut),[it.run(Object.assign(Object.assign({},ot),{cacheHint:ht.cacheKey,get:()=>at(it,ut[0],ht.perm)}),ut)]),_.parseTransposeAttributes=it=>(0,tt.createAttributeWithCacheKey)({perm:it.attributes.getInts("perm",[])});const at=(it,ut,ht)=>{const ft=ut.dims;ht=lt(ft,ht);const gt=ct(ft,ht),mt=ft.length,yt=`
      ${dt("perm",ht,mt)}
      float process(int indices[${mt}]) {
        int a[${mt}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},ot),{output:{dims:gt,type:ut.type,textureType:nt.TextureType.unpacked},shaderSource:yt})},lt=(it,ut)=>(ut&&ut.length!==it.length&&(ut=[...it.keys()].reverse()),ut),ct=(it,ut)=>(ut=lt(it,ut),rt.ShapeUtil.sortBasedOnPerm(it,ut)),dt=(it,ut,ht)=>{const ft=[];ft.push(`void ${it}(out int a[${ht}], int src[${ht}]) {`);for(let gt=0;gt<ht;++gt)ft.push(`	a[${ut[gt]}]=src[${gt}];`);return ft.push("	}"),ft.join(`
`)},st=it=>{if(!it||it.length!==1)throw new Error("Transpose requires 1 input.");if(it[0].type!=="float32"&&it[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.encodeAsUint8=void 0;const tt=et(5060),rt=et(2039);_.encodeAsUint8=(nt,ot)=>{const at=ot.shape,lt=(0,tt.getGlsl)(nt.session.backend.glContext.version),ct=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${lt.texture2D}(X,TexCoords).r;
      ${lt.output} = encodeAsUint8(value);
    }`,dt={name:"Uint8Encode",inputTypes:[rt.TextureType.unpacked],inputNames:["X"],output:{dims:at,type:ot.tensor.type,textureType:rt.TextureType.downloadUint8AsFloat},shaderSource:ct,hasMain:!0};return nt.executeProgram(dt,[ot.tensor])}},4909:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.tanh=_.tan=_.sqrt=_.sin=_.sigmoid=_.relu=_.not=_.neg=_.log=_.parseLeakyReluAttributes=_.leakyRelu=_.identity=_.floor=_.exp=_.parseEluAttributes=_.elu=_.cos=_.ceil=_.clipV11=_.parseClipAttributes=_.clip=_.atan=_.asin=_.acos=_.abs=_.glslTanh=_.glslTan=_.glslSqrt=_.glslSigmoid=_.glslRelu=_.glslSin=_.glslNot=_.glslNeg=_.glslLog=_.glslLeakyRelu=_.glslIdentity=_.glslClip=_.glslFloor=_.glslExp=_.glslElu=_.glslCos=_.glslCeil=_.glslAtan=_.glslAsin=_.glslAcos=_.glslAbs=void 0;const tt=et(246),rt=et(2517),nt=et(8520),ot=et(5060),at=et(2039);function lt(){return At("abs")}function ct(){return At("acos")}function dt(){return At("asin")}function st(){return At("atan")}function it(){return At("ceil")}function ut(){return At("cos")}function ht(Mt){const Dt="elu";return{body:`
  const float alpha = float(${Mt});

  float ${Dt}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${Dt}_(vec4 v) {
    return vec4(${Dt}_(v.x), ${Dt}_(v.y), ${Dt}_(v.z), ${Dt}_(v.w));
  }
  `,name:Dt,type:nt.FunctionType.ValueBased}}function ft(){return At("exp")}function gt(){return At("floor")}function mt(Mt,Dt){const Nt="clip";return{body:`
  const float min = float(${Mt});
  const float max = float(${Dt});

  float ${Nt}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${Nt}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:Nt,type:nt.FunctionType.ValueBased}}function yt(){const Mt="indentity";return{body:`
  float ${Mt}_(float a) {
    return a;
  }
  vec4 ${Mt}_(vec4 v) {
    return v;
  }
  `,name:Mt,type:nt.FunctionType.ValueBased}}function bt(Mt){const Dt="leakyRelu";return{body:`
  const float alpha = float(${Mt});

  float ${Dt}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${Dt}_(vec4 v) {
    return vec4(${Dt}_(v.x), ${Dt}_(v.y), ${Dt}_(v.z), ${Dt}_(v.w));
  }
  `,name:Dt,type:nt.FunctionType.ValueBased}}function vt(){return At("log")}function xt(){const Mt="neg";return{body:`
  float ${Mt}_(float a) {
    return -a;
  }
  vec4 ${Mt}_(vec4 v) {
    return -v;
  }
  `,name:Mt,type:nt.FunctionType.ValueBased}}function wt(){const Mt="not";return{body:`
  float ${Mt}_(float a) {
    return float( ! bool(a) );
  }
  bool ${Mt}_(bool a) {
    return !a;
  }
  vec4 ${Mt}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${Mt}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:Mt,type:nt.FunctionType.ValueBased}}function St(){return At("sin")}function Et(){const Mt="relu";return{body:`
  float ${Mt}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${Mt}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:Mt,type:nt.FunctionType.ValueBased}}function _t(){const Mt="sigmoid";return{body:`
  float ${Mt}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${Mt}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:Mt,type:nt.FunctionType.ValueBased}}function Tt(){return At("sqrt")}function Rt(){return At("tan")}function Ot(){const Mt="tanh";return{body:`
  float ${Mt}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${Mt}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:Mt,type:nt.FunctionType.ValueBased}}function At(Mt){return{body:`
  float ${Mt}_(float a) {
    return ${Mt}(a);
  }
  vec4 ${Mt}_(vec4 v) {
    return ${Mt}(v);
  }
  `,name:Mt,type:nt.FunctionType.ValueBased}}_.glslAbs=lt,_.glslAcos=ct,_.glslAsin=dt,_.glslAtan=st,_.glslCeil=it,_.glslCos=ut,_.glslElu=ht,_.glslExp=ft,_.glslFloor=gt,_.glslClip=mt,_.glslIdentity=yt,_.glslLeakyRelu=bt,_.glslLog=vt,_.glslNeg=xt,_.glslNot=wt,_.glslSin=St,_.glslRelu=Et,_.glslSigmoid=_t,_.glslSqrt=Tt,_.glslTan=Rt,_.glslTanh=Ot;const Ct=(Mt,Dt,Nt,Bt)=>{const Ut=Mt.session.pack?at.TextureType.packed:at.TextureType.unpacked,Vt={name:Nt.name,inputTypes:[Ut],inputNames:["A"],cacheHint:Bt};return Object.assign(Object.assign({},Vt),{get:()=>((Jt,lr,nr,ir)=>{const cr=Jt.session.pack?at.TextureType.packed:at.TextureType.unpacked,hr=(0,ot.getGlsl)(Jt.session.backend.glContext.version);return Object.assign(Object.assign({},lr),{output:{dims:nr.dims,type:nr.type,textureType:cr},shaderSource:`
     ${ir.body}
     void main() {
       vec4 v = ${hr.texture2D}(A, TexCoords);
       v = ${ir.name}_(v);
       ${hr.output} = v;
     }
     `,hasMain:!0})})(Mt,Vt,Dt,Nt)})};_.abs=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],lt()),Dt)],_.acos=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],ct()),Dt)],_.asin=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],dt()),Dt)],_.atan=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],st()),Dt)],_.clip=(Mt,Dt,Nt)=>[Mt.run(Ct(Mt,Dt[0],mt(Nt.min,Nt.max),Nt.cacheKey),Dt)],_.parseClipAttributes=Mt=>(0,tt.createAttributeWithCacheKey)({min:Mt.attributes.getFloat("min",rt.MIN_CLIP),max:Mt.attributes.getFloat("max",rt.MAX_CLIP)}),_.clipV11=(Mt,Dt)=>{const Nt=$t(Mt,Dt);return(0,_.clip)(Mt,[Dt[0]],Nt)};const $t=(Mt,Dt)=>{if(Dt.length>=3&&(!Mt.session.isInitializer(Dt[1].dataId)||!Mt.session.isInitializer(Dt[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const Nt=Dt.length>=3?Dt[1].numberData[0]:rt.MIN_CLIP,Bt=Dt.length>=3?Dt[2].numberData[0]:rt.MAX_CLIP;return(0,tt.createAttributeWithCacheKey)({min:Nt,max:Bt})};_.ceil=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],it()),Dt)],_.cos=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],ut()),Dt)],_.elu=(Mt,Dt,Nt)=>[Mt.run(Ct(Mt,Dt[0],ht(Nt.alpha),Nt.cacheKey),Dt)],_.parseEluAttributes=Mt=>(0,tt.createAttributeWithCacheKey)({alpha:Mt.attributes.getFloat("alpha",1)}),_.exp=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],ft()),Dt)],_.floor=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],gt()),Dt)],_.identity=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],yt()),Dt)],_.leakyRelu=(Mt,Dt,Nt)=>[Mt.run(Ct(Mt,Dt[0],bt(Nt.alpha),Nt.cacheKey),Dt)],_.parseLeakyReluAttributes=Mt=>(0,tt.createAttributeWithCacheKey)({alpha:Mt.attributes.getFloat("alpha",.01)}),_.log=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],vt()),Dt)],_.neg=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],xt()),Dt)],_.not=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],wt()),Dt)],_.relu=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],Et()),Dt)],_.sigmoid=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],_t()),Dt)],_.sin=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],St()),Dt)],_.sqrt=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],Tt()),Dt)],_.tan=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],Rt()),Dt)],_.tanh=(Mt,Dt)=>[Mt.run(Ct(Mt,Dt[0],Ot()),Dt)]},5611:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createUnpackProgramInfoLoader=_.createUnpackProgramInfo=void 0;const tt=et(5060),rt=et(2039),nt=et(9390),ot=et(2827),at={name:"unpack",inputNames:["A"],inputTypes:[rt.TextureType.packed]};_.createUnpackProgramInfo=(lt,ct)=>{const dt=ct.dims.length,st=(0,ot.getChannels)("rc",dt),it=st.slice(-2),ut=(0,nt.getCoordsDataType)(dt),ht=(0,ot.unpackFromChannel)(),ft=ct.dims.length===0?"":function(yt,bt){if(yt===1)return"rc";let vt="";for(let xt=0;xt<yt;xt++)vt+=bt[xt],xt<yt-1&&(vt+=",");return vt}(dt,st),gt=dt<=1?"rc":`vec2(${it.join(",")})`,mt=`
    ${ht}
    void main() {
      ${ut} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${ft});

       ${(0,tt.getGlsl)(lt.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${gt}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},at),{hasMain:!0,output:{dims:ct.dims,type:ct.type,textureType:rt.TextureType.unpacked},shaderSource:mt})},_.createUnpackProgramInfoLoader=(lt,ct)=>Object.assign(Object.assign({},at),{get:()=>(0,_.createUnpackProgramInfo)(lt,ct)})},8428:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseUnsqueezeAttributes=_.unsqueezeV13=_.unsqueeze=void 0;const tt=et(2517);_.unsqueeze=(ot,at,lt)=>{rt(at);const ct=tt.ShapeUtil.unsqueezeShape(at[0].dims,lt);return[ot.reshapeUnpacked(at[0],ct)]},_.unsqueezeV13=(ot,at)=>(nt(at),(0,_.unsqueeze)(ot,[at[0]],Array.from(at[1].integerData))),_.parseUnsqueezeAttributes=ot=>ot.attributes.getInts("axes");const rt=ot=>{if(!ot||ot.length!==1)throw new Error("Unsqueeze requires 1 input.");if(ot[0].type==="string")throw new Error("invalid input tensor types.")},nt=ot=>{if(!ot||ot.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(ot[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.scalesValidation=_.validateInputs=_.parseUpsampleAttributes=_.parseUpsampleAttributesV9=_.parseUpsampleAttributesV7=_.upsample=void 0;const tt=et(246),rt=et(5060),nt=et(2039),ot={name:"Upsample",inputNames:["X"],inputTypes:[nt.TextureType.unpacked]};_.upsample=(lt,ct,dt)=>((0,_.validateInputs)(ct,dt),[lt.run(Object.assign(Object.assign({},ot),{cacheHint:dt.cacheKey,get:()=>at(lt,ct,dt)}),ct)]),_.parseUpsampleAttributesV7=lt=>(0,_.parseUpsampleAttributes)(lt,7),_.parseUpsampleAttributesV9=lt=>(0,_.parseUpsampleAttributes)(lt,9),_.parseUpsampleAttributes=(lt,ct)=>{const dt=ct>=10,st=lt.attributes.getString("mode","nearest");if(st!=="nearest"&&st!=="linear"&&(ct<11||st!=="cubic"))throw new Error(`unrecognized mode: ${st}`);let it=[];ct<9&&(it=lt.attributes.getFloats("scales"),(0,_.scalesValidation)(it,st,dt));const ut=lt.attributes.getFloat("extrapolation_value",0),ht=ct>10?lt.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(ht)===-1)throw new Error(`coordinate_transform_mode '${ht}' is not supported`);const ft=ht==="tf_crop_and_resize",gt=ft,mt=st==="nearest"&&ct>=11?lt.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(mt)===-1)throw new Error(`nearest_mode '${mt}' is not supported`);const yt=lt.attributes.getFloat("cubic_coeff_a",-.75),bt=lt.attributes.getInt("exclude_outside",0)!==0;if(bt&&st!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const vt=ct<11||st==="nearest"&&ht==="asymmetric"&&mt==="floor";let xt=0,wt=0,St=0;return ct>10?lt.inputs.length>2?(xt=1,wt=2,St=3):(wt=1,St=2):ct===9&&(wt=1),(0,tt.createAttributeWithCacheKey)({opset:ct,isResize:dt,mode:st,scales:it,extrapolationValue:ut,coordinateTransformMode:ht,useExtrapolation:gt,needRoiInput:ft,nearestMode:mt,cubicCoefficientA:yt,excludeOutside:bt,useNearest2xOptimization:vt,roiInputIdx:xt,scalesInputIdx:wt,sizesInputIdx:St})};const at=(lt,ct,dt)=>{const st=(0,rt.getGlsl)(lt.session.backend.glContext.version),[it,ut]=lt.calculateTextureWidthAndHeight(ct[0].dims,nt.TextureType.unpacked),ht=ct[0].dims.map((St,Et)=>Math.floor(St*dt.scales[Et])),[ft,gt]=lt.calculateTextureWidthAndHeight(ht,nt.TextureType.unpacked),mt=ht.length,yt=new Array(mt),bt=new Array(mt);let vt=`
      int output_pitches[${mt}];
      int input_pitches[${mt}];
      `;for(let St=mt-1;St>=0;St--)yt[St]=St===mt-1?1:yt[St+1]*ht[St+1],bt[St]=St===mt-1?1:bt[St+1]*ct[0].dims[St+1],vt+=`
        output_pitches[${St}] = ${yt[St]};
        input_pitches[${St}] = ${bt[St]};
        `;const xt=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${it}, ${ut});
        float value = getColorAsFloat(${st.texture2D}(X, coords));
        return value;
      }
      `,wt=dt.mode==="nearest"?`
    ${xt}
    float process(int indices[${mt}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ft}, ${gt});

      ${vt}

      int d, m;
      for (int dim = 0; dim < ${mt}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:mt===4?`
    ${xt}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ft}, ${gt});

      ${vt}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${ct[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${xt}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ft}, ${gt});

      ${vt}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${ct[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},ot),{output:{dims:ht,type:ct[0].type,textureType:nt.TextureType.unpacked},shaderSource:wt,variables:[{name:"scales",type:"int",arrayLength:dt.scales.length,data:dt.scales.map(St=>Math.ceil(St))}]})};_.validateInputs=(lt,ct)=>{if(!lt||ct.opset<9&&lt.length!==1||ct.opset>=9&&ct.opset<11&&lt.length!==2||ct.opset>=11&&lt.length<2)throw new Error("invalid inputs.");if(ct.scales.length>0&&lt[0].dims.length!==ct.scales.length)throw new Error("Invalid input shape.");if(lt[0].type==="string")throw new Error("Invalid input tensor types.")},_.scalesValidation=(lt,ct,dt)=>{if(dt){for(const st of lt)if(st<=0)throw new Error("Scale value should be greater than 0.")}else for(const st of lt)if(st<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(ct!=="linear"&&ct!=="cubic"||lt.length===2||lt.length===4&&lt[0]===1&&lt[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${dt?"Resize":"Upsample"} opeartor.`)}},1958:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ProgramManager=void 0;const tt=et(1670),rt=et(6231),nt=et(8879),ot=et(5060);_.ProgramManager=class{constructor(at,lt,ct){this.profiler=at,this.glContext=lt,this.textureLayoutStrategy=ct,this.repo=new Map,this.attributesBound=!1}getArtifact(at){return this.repo.get(at)}setArtifact(at,lt){this.repo.set(at,lt)}run(at,lt,ct){var dt;this.profiler.event("op",`ProgramManager.run ${(dt=at.programInfo.name)!==null&&dt!==void 0?dt:"unknown kernel"}`,()=>{var st;const it=this.glContext.gl,ut=at.program;it.useProgram(ut);try{this.bindOutput(ct),this.attributesBound||this.bindAttributes(at.attribLocations),this.bindUniforms(at.uniformLocations,(st=at.programInfo.variables)!==null&&st!==void 0?st:[],lt)}catch(ht){throw rt.Logger.error("ProgramManager",at.programInfo.shaderSource),ht}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(at=>this.glContext.deleteProgram(at.program))}build(at,lt,ct){return this.profiler.event("backend","ProgramManager.build",()=>{const dt=new nt.GlslPreprocessor(this.glContext,at,lt,ct),st=dt.preprocess(),it=this.compile(st);return{programInfo:at,program:it,uniformLocations:this.getUniformLocations(it,dt.context.programInfo.inputNames,dt.context.programInfo.variables),attribLocations:this.getAttribLocations(it)}})}compile(at){if(!this.vertexShader){rt.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const dt=(0,ot.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(dt,this.glContext.gl.VERTEX_SHADER)}tt.env.debug&&rt.Logger.verbose("ProrgramManager",`FragShader:
${at}
`);const lt=this.glContext.compileShader(at,this.glContext.gl.FRAGMENT_SHADER),ct=this.glContext.createProgram(this.vertexShader,lt);return this.glContext.deleteShader(lt),ct}bindOutput(at){const lt=at.width,ct=at.height;rt.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${lt}/${ct}, shape=${at.shape}, type=${at.tensor.type}`),this.glContext.attachFramebuffer(at.texture,lt,ct)}bindAttributes(at){const lt=at.position,ct=at.textureCoord;this.glContext.setVertexAttributes(lt,ct),this.attributesBound=!0}bindUniforms(at,lt,ct){var dt;const st=this.glContext.gl;let it=0;for(const{name:ut,type:ht,location:ft,arrayLength:gt}of at){const mt=(dt=lt.find(yt=>yt.name===ut))===null||dt===void 0?void 0:dt.data;if(ht!=="sampler2D"&&!mt)throw new Error(`variable '${ut}' does not have data defined in program info`);switch(ht){case"sampler2D":this.bindTexture(ct[it],ft,it),it++;break;case"float":gt?st.uniform1fv(ft,mt):st.uniform1f(ft,mt);break;case"int":gt?st.uniform1iv(ft,mt):st.uniform1i(ft,mt);break;default:throw new Error(`Uniform not implemented: ${ht}`)}}}bindTexture(at,lt,ct){this.glContext.bindTextureToUniform(at.texture,ct,lt)}getAttribLocations(at){return{position:this.getAttribLocation(at,"position"),textureCoord:this.getAttribLocation(at,"textureCoord")}}getUniformLocations(at,lt,ct){const dt=[];if(lt)for(const st of lt)dt.push({name:st,type:"sampler2D",location:this.getUniformLocation(at,st)});if(ct)for(const st of ct)dt.push(Object.assign(Object.assign({},st),{location:this.getUniformLocation(at,st.name)}));return dt}getUniformLocation(at,lt){const ct=this.glContext.gl.getUniformLocation(at,lt);if(ct===null)throw new Error(`Uniform ${lt} not found.`);return ct}getAttribLocation(at,lt){return this.glContext.gl.getAttribLocation(at,lt)}}},6416:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLSessionHandler=void 0;const tt=et(6231),rt=et(1047),nt=et(8316),ot=et(1640),at=et(1958),lt=et(7859),ct=et(5702);_.WebGLSessionHandler=class{constructor(dt,st){this.backend=dt,this.context=st,this.layoutStrategy=new lt.PreferLogicalStrategy(dt.glContext.maxTextureSize),this.programManager=new at.ProgramManager(this.context.profiler,dt.glContext,this.layoutStrategy),this.textureManager=new ct.TextureManager(dt.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:dt.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=dt.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new nt.WebGLInferenceHandler(this)}onGraphInitialized(dt){const st=dt.getValues().filter(it=>it.from===-1&&it.tensor).map(it=>it.tensor.dataId);this.initializers=new Set(st)}isInitializer(dt){return!!this.initializers&&this.initializers.has(dt)}addInitializer(dt){this.initializers.add(dt)}getTextureData(dt,st){return st?this.packedTextureDataCache.get(dt):this.unpackedTextureDataCache.get(dt)}setTextureData(dt,st,it=!1){tt.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),it?this.packedTextureDataCache.set(dt,st):this.unpackedTextureDataCache.set(dt,st)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(dt=>this.textureManager.releaseTexture(dt,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(dt=>this.textureManager.releaseTexture(dt,!0)),this.unpackedTextureDataCache=new Map}resolve(dt,st,it){const ut=(0,rt.resolveOperator)(dt,st,ot.WEBGL_OP_RESOLVE_RULES);return{impl:ut.opImpl,context:ut.opInit?ut.opInit(dt,it):dt}}}},7769:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Uint8DataEncoder=_.RGBAFloatDataEncoder=_.RedFloat32DataEncoder=void 0;const tt=et(6231);_.RedFloat32DataEncoder=class{constructor(rt,nt=1){if(nt===1)this.internalFormat=rt.R32F,this.format=rt.RED,this.textureType=rt.FLOAT,this.channelSize=nt;else{if(nt!==4)throw new Error(`Invalid number of channels: ${nt}`);this.internalFormat=rt.RGBA32F,this.format=rt.RGBA,this.textureType=rt.FLOAT,this.channelSize=nt}}encode(rt,nt){let ot,at;return rt.constructor!==Float32Array&&(tt.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),at=new Float32Array(rt)),nt*this.channelSize>rt.length?(tt.Logger.warning("Encoder","Source data too small. Allocating larger array"),at=rt,ot=this.allocate(nt*this.channelSize),at.forEach((lt,ct)=>ot[ct]=lt)):(at=rt,ot=at),ot}allocate(rt){return new Float32Array(4*rt)}decode(rt,nt){return this.channelSize===1?rt.filter((ot,at)=>at%4==0).subarray(0,nt):rt.subarray(0,nt)}},_.RGBAFloatDataEncoder=class{constructor(rt,nt=1,ot){if(nt!==1&&nt!==4)throw new Error(`Invalid number of channels: ${nt}`);this.internalFormat=rt.RGBA,this.format=rt.RGBA,this.channelSize=nt,this.textureType=ot||rt.FLOAT}encode(rt,nt){let ot=rt;return this.channelSize===1&&(tt.Logger.verbose("Encoder","Exploding into a larger array"),ot=this.allocate(nt),rt.forEach((at,lt)=>ot[4*lt]=at)),ot}allocate(rt){return new Float32Array(4*rt)}decode(rt,nt){return this.channelSize===1?rt.filter((ot,at)=>at%4==0).subarray(0,nt):rt.subarray(0,nt)}},_.Uint8DataEncoder=class{constructor(rt,nt=1){if(this.channelSize=4,nt===1)this.internalFormat=rt.ALPHA,this.format=rt.ALPHA,this.textureType=rt.UNSIGNED_BYTE,this.channelSize=nt;else{if(nt!==4)throw new Error(`Invalid number of channels: ${nt}`);this.internalFormat=rt.RGBA,this.format=rt.RGBA,this.textureType=rt.UNSIGNED_BYTE,this.channelSize=nt}}encode(rt,nt){return new Uint8Array(rt.buffer,rt.byteOffset,rt.byteLength)}allocate(rt){return new Uint8Array(rt*this.channelSize)}decode(rt,nt){if(rt instanceof Uint8Array)return rt.subarray(0,nt);throw new Error(`Invalid array type: ${rt.constructor}`)}}},7859:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getBatchDim=_.sizeToSquarishShape=_.getRowsCols=_.sizeFromShape=_.isInt=_.parseAxisParam=_.squeezeShape=_.PreferLogicalStrategy=_.AlwaysKeepOriginalSizeStrategy=void 0;const tt=et(6231),rt=et(2517);function nt(dt,st){const it=[],ut=[],ht=st!=null&&Array.isArray(st)&&st.length===0,ft=st==null||ht?null:ot(st,dt).sort();let gt=0;for(let mt=0;mt<dt.length;++mt){if(ft!=null){if(ft[gt]===mt&&dt[mt]!==1)throw new Error(`Can't squeeze axis ${mt} since its dim '${dt[mt]}' is not 1`);(ft[gt]==null||ft[gt]>mt)&&dt[mt]===1&&(it.push(dt[mt]),ut.push(mt)),ft[gt]<=mt&&gt++}dt[mt]!==1&&(it.push(dt[mt]),ut.push(mt))}return{newShape:it,keptDims:ut}}function ot(dt,st){const it=st.length;return dt=dt==null?st.map((ut,ht)=>ht):[].concat(dt),(0,rt.assert)(dt.every(ut=>ut>=-it&&ut<it),()=>`All values in axis param must be in range [-${it}, ${it}) but got axis ${dt}`),(0,rt.assert)(dt.every(at),()=>`All values in axis param must be integers but got axis ${dt}`),dt.map(ut=>ut<0?it+ut:ut)}function at(dt){return dt%1==0}function lt(dt){if(dt.length===0)return 1;let st=dt[0];for(let it=1;it<dt.length;it++)st*=dt[it];return st}function ct(dt){const st=Math.ceil(Math.sqrt(dt));return[st,Math.ceil(dt/st)]}_.AlwaysKeepOriginalSizeStrategy=class{constructor(dt){this.maxTextureSize=dt}computeTextureWH(dt,st){if(dt.length===0)return[1,1];const it=this.maxTextureSize;if(st&&st.breakAxis!==void 0){const ft=st.breakAxis>=dt.length?1:dt.slice(st.breakAxis).reduce((mt,yt)=>mt*yt),gt=st.breakAxis<=0?1:dt.slice(0,st.breakAxis).reduce((mt,yt)=>mt*yt);if(!(ft>it||gt>it))return[ft,gt];tt.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${dt}, breakAxis:${st.breakAxis}`)}const ut=dt.reduce((ft,gt)=>ft*gt);let ht=Math.floor(Math.sqrt(ut));for(;ht<it&&ht<ut&&ut%ht!=0;ht++);if(ht>=it||ut%ht!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${dt}`);return[ht,ut/ht]}},_.PreferLogicalStrategy=class{constructor(dt){this.maxTextureSize=dt}computeTextureWH(dt,st){const it=this.computeTexture(dt,st);return st&&st.isPacked&&(it[0]/=2,it[1]/=2),st&&st.reverseWH?[it[1],it[0]]:it}computeTexture(dt,st){const it=st&&st.isPacked;if(dt.length===0)return it?[2,2]:[1,1];let ut=this.maxTextureSize;if(st&&st.breakAxis!==void 0){const gt=st.breakAxis>=dt.length?1:dt.slice(st.breakAxis).reduce((yt,bt)=>yt*bt),mt=st.breakAxis<=0?1:dt.slice(0,st.breakAxis).reduce((yt,bt)=>yt*bt);if(!(gt>ut||mt>ut))return[gt,mt];tt.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${dt}, breakAxis:${st.breakAxis}`)}let ht=dt.slice(0);it&&(ut*=2,ht=ht.map((gt,mt)=>mt>=ht.length-2?ht[mt]%2==0?ht[mt]:ht[mt]+1:ht[mt]),ht.length===1&&(ht=[2,ht[0]])),ht.length!==2&&(ht=nt(ht).newShape);const ft=lt(ht);return ht.length<=1&&ft<=ut?[1,ft]:ht.length===2&&ht[0]<=ut&&ht[1]<=ut?ht:ht.length===3&&ht[0]*ht[1]<=ut&&ht[2]<=ut?[ht[0]*ht[1],ht[2]]:ht.length===3&&ht[0]<=ut&&ht[1]*ht[2]<=ut?[ht[0],ht[1]*ht[2]]:ht.length===4&&ht[0]*ht[1]*ht[2]<=ut&&ht[3]<=ut?[ht[0]*ht[1]*ht[2],ht[3]]:ht.length===4&&ht[0]<=ut&&ht[1]*ht[2]*ht[3]<=ut?[ht[0],ht[1]*ht[2]*ht[3]]:it?ct(ft/4).map(gt=>2*gt):ct(ft)}},_.squeezeShape=nt,_.parseAxisParam=ot,_.isInt=at,_.sizeFromShape=lt,_.getRowsCols=function(dt){if(dt.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[dt.length>1?dt[dt.length-2]:1,dt[dt.length-1]]},_.sizeToSquarishShape=ct,_.getBatchDim=function(dt,st=2){return lt(dt.slice(0,dt.length-st))}},4057:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createTextureLayoutFromShape=_.calculateTextureWidthAndHeight=_.createTextureLayoutFromTextureType=void 0;const tt=et(2517),rt=et(2039);_.createTextureLayoutFromTextureType=(nt,ot,at)=>{const lt=at===rt.TextureType.unpacked||at===rt.TextureType.unpackedReversed?1:4,ct=at===rt.TextureType.packed,dt=at===rt.TextureType.unpackedReversed||at===rt.TextureType.packed,st=at===rt.TextureType.packedLastDimension?ot.length-1:void 0,it=at===rt.TextureType.packedLastDimension?ot.map((ut,ht)=>ht===ot.length-1?4*ut:ut):void 0;return(0,_.createTextureLayoutFromShape)(nt,ot,lt,it,{isPacked:ct,reverseWH:dt,breakAxis:st})},_.calculateTextureWidthAndHeight=(nt,ot,at)=>{const lt=(0,_.createTextureLayoutFromTextureType)(nt,ot,at);return[lt.width,lt.height]},_.createTextureLayoutFromShape=(nt,ot,at=1,lt,ct)=>{const dt=!(!ct||!ct.isPacked),[st,it]=nt.computeTextureWH(dt&&lt||ot,ct),ut=ot.length;let ht=ot.slice(0);if(ut===0&&(ht=[1]),at===1)lt=ot;else if(dt){if(at!==4)throw new Error("a packed texture must be 4-channel");lt=ot,ut>0&&(ht[ut-1]=Math.ceil(ht[ut-1]/2)),ut>1&&(ht[ut-2]=Math.ceil(ht[ut-2]/2))}else if(!lt)throw new Error("Unpacked shape is needed when using channels > 1");return{width:st,height:it,channels:at,isPacked:dt,shape:ht,strides:tt.ShapeUtil.computeStrides(ht),unpackedShape:lt,reversedWH:ct&&ct.reverseWH}}},5702:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextureManager=void 0;const tt=et(6231);_.TextureManager=class{constructor(rt,nt,ot,at){this.glContext=rt,this.layoutStrategy=nt,this.profiler=ot,this.config=at,this.pendingRead=new Map,at.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(rt,nt,ot,at){const lt=this.toEncoderType(rt),ct=this.glContext.getEncoder(lt,nt.channels||1,at);if(nt.isPacked&&at===1)throw new Error("not implemented");const dt=nt.width,st=nt.height;let it,ut;if(this.config.reuseTextures){it=`${dt}x${st}_${ct.format}_${ct.internalFormat}_${ct.textureType}`,ut=this.inUseTextures.get(it),ut||(ut=[],this.inUseTextures.set(it,ut));const ft=this.idleTextures.get(it);if(ft&&ft.length>0){const gt=ft.pop();return ut.push(gt),at===1&&this.glContext.updateTexture(gt,dt,st,ct,this.toTextureData(rt,ot)),gt}}tt.Logger.verbose("TextureManager",`Creating new texture of size ${nt.width}x${nt.height}`);const ht=this.glContext.allocateTexture(dt,st,ct,this.toTextureData(rt,ot));return this.config.reuseTextures&&(ut.push(ht),this.textureLookup.set(ht,it)),ht}readTexture(rt,nt,ot){return ot||(ot=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const at=rt.shape.reduce((ct,dt)=>ct*dt)*ot,lt=this.glContext.readTexture(rt.texture,rt.width,rt.height,at,this.toEncoderType(nt),ot);return this.toTensorData(nt,lt)})}async readTextureAsync(rt,nt,ot){const at=rt.tensor.dataId;if(ot||(ot=1),this.pendingRead.has(at)){const lt=this.pendingRead.get(at);return new Promise(ct=>lt==null?void 0:lt.push(ct))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(at,[]);const lt=rt.shape.reduce((it,ut)=>it*ut)*ot;await this.glContext.createAndWaitForFence();const ct=this.glContext.readTexture(rt.texture,rt.width,rt.height,lt,this.toEncoderType(nt),ot),dt=this.toTensorData(nt,ct),st=this.pendingRead.get(at);return this.pendingRead.delete(at),st==null||st.forEach(it=>it(dt)),dt})}readUint8TextureAsFloat(rt){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const nt=rt.shape.reduce((at,lt)=>at*lt),ot=this.glContext.readTexture(rt.texture,rt.width,rt.height,4*nt,"byte",4);return new Float32Array(ot.buffer,ot.byteOffset,nt)})}releaseTexture(rt,nt){let ot;if(this.config.reuseTextures&&(ot=this.textureLookup.get(rt.texture),ot)){nt&&this.textureLookup.delete(ot);const at=this.inUseTextures.get(ot);if(at){const lt=at.indexOf(rt.texture);if(lt!==-1){at.splice(lt,1);let ct=this.idleTextures.get(ot);ct||(ct=[],this.idleTextures.set(ot,ct)),ct.push(rt.texture)}}}ot&&!nt||(tt.Logger.verbose("TextureManager",`Deleting texture of size ${rt.width}x${rt.height}`),this.glContext.deleteTexture(rt.texture))}toTensorData(rt,nt){switch(rt){case"int16":return nt instanceof Int16Array?nt:Int16Array.from(nt);case"int32":return nt instanceof Int32Array?nt:Int32Array.from(nt);case"int8":return nt instanceof Int8Array?nt:Int8Array.from(nt);case"uint16":return nt instanceof Uint16Array?nt:Uint16Array.from(nt);case"uint32":return nt instanceof Uint32Array?nt:Uint32Array.from(nt);case"uint8":case"bool":return nt instanceof Uint8Array?nt:Uint8Array.from(nt);case"float32":return nt instanceof Float32Array?nt:Float32Array.from(nt);case"float64":return nt instanceof Float64Array?nt:Float64Array.from(nt);default:throw new Error(`TensorData type ${rt} is not supported`)}}toTextureData(rt,nt){if(nt)return nt instanceof Float32Array?nt:new Float32Array(nt)}toEncoderType(rt){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(_e,_)=>{var et;Object.defineProperty(_,"__esModule",{value:!0}),_.TextureType=void 0,(et=_.TextureType||(_.TextureType={}))[et.unpacked=0]="unpacked",et[et.unpackedReversed=1]="unpackedReversed",et[et.packed=2]="packed",et[et.downloadUint8AsFloat=3]="downloadUint8AsFloat",et[et.packedLastDimension=4]="packedLastDimension"},9390:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getGlChannels=_.getCoordsDataType=_.getSqueezedParams=_.squeezeInputShape=_.generateShaderFuncNameFromInputSamplerNameAtOutCoords=_.generateShaderFuncNameFromInputSamplerName=_.repeatedTry=_.getPackedShape=void 0;const tt=et(2517);_.getPackedShape=function(rt){const nt=rt.length;return rt.slice(0,nt-1).concat(rt[nt-1]/4)},_.repeatedTry=async function(rt,nt=at=>0,ot){return new Promise((at,lt)=>{let ct=0;const dt=()=>{if(rt())return void at();ct++;const st=nt(ct);ot!=null&&ct>=ot?lt():setTimeout(dt,st)};dt()})},_.generateShaderFuncNameFromInputSamplerName=function(rt){return(0,tt.assert)(rt!==void 0&&rt.length!==0,()=>"empty string found for sampler name"),"get"+rt.charAt(0).toUpperCase()+rt.slice(1)},_.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(rt){return(0,tt.assert)(rt!==void 0&&rt.length!==0,()=>"empty string found for sampler name"),"get"+rt.charAt(0).toUpperCase()+rt.slice(1)+"AtOutCoords"},_.squeezeInputShape=function(rt,nt){let ot=JSON.parse(JSON.stringify(rt));return ot=nt,ot},_.getSqueezedParams=function(rt,nt){return nt.map(ot=>rt[ot]).join(", ")},_.getCoordsDataType=function(rt){if(rt<=1)return"int";if(rt===2)return"ivec2";if(rt===3)return"ivec3";if(rt===4)return"ivec4";if(rt===5)return"ivec5";if(rt===6)return"ivec6";throw Error(`GPU for rank ${rt} is not yet supported`)},_.getGlChannels=function(rt=6){return["x","y","z","w","u","v"].slice(0,rt)}},7305:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createNewWebGLContext=_.createWebGLContext=void 0;const tt=et(6231),rt=et(1713),nt={};function ot(at){const lt=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const st=document.createElement("canvas");return st.width=1,st.height=1,st}();let ct;const dt={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!at||at==="webgl2")&&(ct=lt.getContext("webgl2",dt),ct))try{return new rt.WebGLContext(ct,2)}catch(st){tt.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${st}`)}if((!at||at==="webgl")&&(ct=lt.getContext("webgl",dt)||lt.getContext("experimental-webgl",dt),ct))try{return new rt.WebGLContext(ct,1)}catch(st){tt.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${st}`)}throw new Error("WebGL is not supported")}_.createWebGLContext=function at(lt){let ct;lt&&lt!=="webgl2"||!("webgl2"in nt)?lt&&lt!=="webgl"||!("webgl"in nt)||(ct=nt.webgl):ct=nt.webgl2,ct=ct||ot(lt),lt=lt||ct.version===1?"webgl":"webgl2";const dt=ct.gl;return nt[lt]=ct,dt.isContextLost()?(delete nt[lt],at(lt)):(dt.disable(dt.DEPTH_TEST),dt.disable(dt.STENCIL_TEST),dt.disable(dt.BLEND),dt.disable(dt.DITHER),dt.disable(dt.POLYGON_OFFSET_FILL),dt.disable(dt.SAMPLE_COVERAGE),dt.enable(dt.SCISSOR_TEST),dt.enable(dt.CULL_FACE),dt.cullFace(dt.BACK),ct)},_.createNewWebGLContext=ot},1713:function(_e,_,et){var tt=this&&this.__createBinding||(Object.create?function(dt,st,it,ut){ut===void 0&&(ut=it);var ht=Object.getOwnPropertyDescriptor(st,it);ht&&!("get"in ht?!st.__esModule:ht.writable||ht.configurable)||(ht={enumerable:!0,get:function(){return st[it]}}),Object.defineProperty(dt,ut,ht)}:function(dt,st,it,ut){ut===void 0&&(ut=it),dt[ut]=st[it]}),rt=this&&this.__setModuleDefault||(Object.create?function(dt,st){Object.defineProperty(dt,"default",{enumerable:!0,value:st})}:function(dt,st){dt.default=st}),nt=this&&this.__importStar||function(dt){if(dt&&dt.__esModule)return dt;var st={};if(dt!=null)for(var it in dt)it!=="default"&&Object.prototype.hasOwnProperty.call(dt,it)&&tt(st,dt,it);return rt(st,dt),st};Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLContext=_.linearSearchLastTrue=void 0;const ot=et(1670),at=nt(et(7769)),lt=et(9390);function ct(dt){let st=0;for(;st<dt.length&&dt[st]();++st);return st-1}_.linearSearchLastTrue=ct,_.WebGLContext=class{constructor(dt,st){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=dt,this.version=st,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(dt,st,it,ut){const ht=this.gl,ft=ht.createTexture();ht.bindTexture(ht.TEXTURE_2D,ft),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MIN_FILTER,ht.NEAREST),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MAG_FILTER,ht.NEAREST),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_S,ht.CLAMP_TO_EDGE),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_T,ht.CLAMP_TO_EDGE);const gt=ut?it.encode(ut,dt*st):null;return ht.texImage2D(ht.TEXTURE_2D,0,it.internalFormat,dt,st,0,it.format,it.textureType,gt),this.checkError(),ft}updateTexture(dt,st,it,ut,ht){const ft=this.gl;ft.bindTexture(ft.TEXTURE_2D,dt);const gt=ut.encode(ht,st*it);ft.texSubImage2D(ft.TEXTURE_2D,0,0,0,st,it,ut.format,ut.textureType,gt),this.checkError()}attachFramebuffer(dt,st,it){const ut=this.gl;ut.bindTexture(ut.TEXTURE_2D,dt),ut.bindFramebuffer(ut.FRAMEBUFFER,this.framebuffer),ut.framebufferTexture2D(ut.FRAMEBUFFER,ut.COLOR_ATTACHMENT0,ut.TEXTURE_2D,dt,0),this.checkError(),ut.viewport(0,0,st,it),ut.scissor(0,0,st,it)}readTexture(dt,st,it,ut,ht,ft){const gt=this.gl;ft||(ft=1),this.frameBufferBound||this.attachFramebuffer(dt,st,it);const mt=this.getEncoder(ht,ft),yt=mt.allocate(st*it);return gt.bindTexture(gt.TEXTURE_2D,dt),gt.framebufferTexture2D(gt.FRAMEBUFFER,gt.COLOR_ATTACHMENT0,gt.TEXTURE_2D,dt,0),gt.readPixels(0,0,st,it,gt.RGBA,mt.textureType,yt),this.checkError(),mt.decode(yt,ut)}isFramebufferReady(){return!0}getActiveTexture(){const dt=this.gl;return"TEXTURE"+(dt.getParameter(this.gl.ACTIVE_TEXTURE)-dt.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(dt,st){const it=this.gl;it.vertexAttribPointer(dt,3,it.FLOAT,!1,20,0),it.enableVertexAttribArray(dt),st!==-1&&(it.vertexAttribPointer(st,2,it.FLOAT,!1,20,12),it.enableVertexAttribArray(st)),this.checkError()}createProgram(dt,st){const it=this.gl,ut=it.createProgram();return it.attachShader(ut,dt),it.attachShader(ut,st),it.linkProgram(ut),ut}compileShader(dt,st){const it=this.gl,ut=it.createShader(st);if(!ut)throw new Error(`createShader() returned null with type ${st}`);if(it.shaderSource(ut,dt),it.compileShader(ut),it.getShaderParameter(ut,it.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${it.getShaderInfoLog(ut)}
Shader source:
${dt}`);return ut}deleteShader(dt){this.gl.deleteShader(dt)}bindTextureToUniform(dt,st,it){const ut=this.gl;ut.activeTexture(ut.TEXTURE0+st),this.checkError(),ut.bindTexture(ut.TEXTURE_2D,dt),this.checkError(),ut.uniform1i(it,st),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(ot.env.debug){const dt=this.gl,st=dt.getError();let it="";switch(st){case dt.NO_ERROR:return;case dt.INVALID_ENUM:it="INVALID_ENUM";break;case dt.INVALID_VALUE:it="INVALID_VALUE";break;case dt.INVALID_OPERATION:it="INVALID_OPERATION";break;case dt.INVALID_FRAMEBUFFER_OPERATION:it="INVALID_FRAMEBUFFER_OPERATION";break;case dt.OUT_OF_MEMORY:it="OUT_OF_MEMORY";break;case dt.CONTEXT_LOST_WEBGL:it="CONTEXT_LOST_WEBGL";break;default:it=`Unknown WebGL Error: ${st.toString(16)}`}throw new Error(it)}}deleteTexture(dt){this.gl.deleteTexture(dt)}deleteProgram(dt){this.gl.deleteProgram(dt)}getEncoder(dt,st,it=0){if(this.version===2)return new at.RedFloat32DataEncoder(this.gl,st);switch(dt){case"float":return it===1||this.isRenderFloat32Supported?new at.RGBAFloatDataEncoder(this.gl,st):new at.RGBAFloatDataEncoder(this.gl,st,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new at.Uint8DataEncoder(this.gl,st);default:throw new Error(`Invalid dataType: ${dt}`)}}clearActiveTextures(){const dt=this.gl;for(let st=0;st<this.maxTextureImageUnits;++st)dt.activeTexture(dt.TEXTURE0+st),dt.bindTexture(dt.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const dt=this.gl;dt.bindFramebuffer(dt.FRAMEBUFFER,null),dt.deleteFramebuffer(this.framebuffer),dt.bindBuffer(dt.ARRAY_BUFFER,null),dt.deleteBuffer(this.vertexbuffer),dt.bindBuffer(dt.ELEMENT_ARRAY_BUFFER,null),dt.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const dt=this.gl,st=dt.createBuffer();if(!st)throw new Error("createBuffer() returned null");const it=this.createDefaultGeometry();return dt.bindBuffer(dt.ARRAY_BUFFER,st),dt.bufferData(dt.ARRAY_BUFFER,it,dt.STATIC_DRAW),this.checkError(),st}createFramebuffer(){const dt=this.gl.createFramebuffer();if(!dt)throw new Error("createFramebuffer returned null");return dt}queryVitalParameters(){const dt=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=dt.getParameter(dt.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=dt.getParameter(dt.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const dt=this.gl,st=dt.createTexture();dt.bindTexture(dt.TEXTURE_2D,st);const it=this.version===2?dt.RGBA32F:dt.RGBA;dt.texImage2D(dt.TEXTURE_2D,0,it,1,1,0,dt.RGBA,dt.FLOAT,null);const ut=dt.createFramebuffer();dt.bindFramebuffer(dt.FRAMEBUFFER,ut),dt.framebufferTexture2D(dt.FRAMEBUFFER,dt.COLOR_ATTACHMENT0,dt.TEXTURE_2D,st,0);const ht=dt.checkFramebufferStatus(dt.FRAMEBUFFER)===dt.FRAMEBUFFER_COMPLETE;return dt.bindTexture(dt.TEXTURE_2D,null),dt.bindFramebuffer(dt.FRAMEBUFFER,null),dt.deleteTexture(st),dt.deleteFramebuffer(ut),ht}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const dt=this.gl;let st,it,ut,ht,ft;try{st=dt.createTexture(),it=dt.createFramebuffer(),dt.bindTexture(dt.TEXTURE_2D,st);const gt=this.version===2?dt.RGBA32F:dt.RGBA;return dt.texImage2D(dt.TEXTURE_2D,0,gt,1,1,0,dt.RGBA,dt.FLOAT,null),dt.bindFramebuffer(dt.FRAMEBUFFER,it),dt.framebufferTexture2D(dt.FRAMEBUFFER,dt.COLOR_ATTACHMENT0,dt.TEXTURE_2D,st,0),dt.enable(dt.BLEND),ut=dt.createShader(dt.VERTEX_SHADER),!!ut&&(dt.shaderSource(ut,"void main(){}"),dt.compileShader(ut),ht=dt.createShader(dt.FRAGMENT_SHADER),!!ht&&(dt.shaderSource(ht,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),dt.compileShader(ht),ft=dt.createProgram(),!!ft&&(dt.attachShader(ft,ut),dt.attachShader(ft,ht),dt.linkProgram(ft),dt.useProgram(ft),dt.drawArrays(dt.POINTS,0,1),dt.getError()===dt.NO_ERROR)))}finally{dt.disable(dt.BLEND),ft&&dt.deleteProgram(ft),ut&&dt.deleteShader(ut),ht&&dt.deleteShader(ht),it&&(dt.bindFramebuffer(dt.FRAMEBUFFER,null),dt.deleteFramebuffer(it)),st&&(dt.bindTexture(dt.TEXTURE_2D,null),dt.deleteTexture(st))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const dt=this.gl,st=this.disjointTimerQueryWebgl2Extension,it=dt.createQuery();return dt.beginQuery(st.TIME_ELAPSED_EXT,it),it}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const dt=this.gl,st=this.disjointTimerQueryWebgl2Extension;dt.endQuery(st.TIME_ELAPSED_EXT)}}isTimerResultAvailable(dt){let st=!1,it=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const ut=this.gl,ht=this.disjointTimerQueryWebgl2Extension;st=ut.getQueryParameter(dt,ut.QUERY_RESULT_AVAILABLE),it=ut.getParameter(ht.GPU_DISJOINT_EXT)}return st&&!it}getTimerResult(dt){let st=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const it=this.gl;st=it.getQueryParameter(dt,it.QUERY_RESULT),it.deleteQuery(dt)}return st/1e6}async waitForQueryAndGetTime(dt){return await(0,lt.repeatedTry)(()=>this.isTimerResultAvailable(dt)),this.getTimerResult(dt)}async createAndWaitForFence(){const dt=this.createFence(this.gl);return this.pollFence(dt)}createFence(dt){let st;const it=dt,ut=it.fenceSync(it.SYNC_GPU_COMMANDS_COMPLETE,0);return dt.flush(),st=ut===null?()=>!0:()=>{const ht=it.clientWaitSync(ut,0,0);return ht===it.ALREADY_SIGNALED||ht===it.CONDITION_SATISFIED},{query:ut,isFencePassed:st}}async pollFence(dt){return new Promise(st=>{this.addItemToPoll(()=>dt.isFencePassed(),()=>st())})}pollItems(){const dt=ct(this.itemsToPoll.map(st=>st.isDoneFn));for(let st=0;st<=dt;++st){const{resolveFn:it}=this.itemsToPoll[st];it()}this.itemsToPoll=this.itemsToPoll.slice(dt+1)}async addItemToPoll(dt,st){this.itemsToPoll.push({isDoneFn:dt,resolveFn:st}),this.itemsToPoll.length>1||await(0,lt.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},1036:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ExecutionPlan=void 0;const tt=et(6231);class rt{constructor(ot,at){this.op=ot,this.node=at}}_.ExecutionPlan=class{constructor(nt,ot,at){this.graph=nt,this.profiler=at,this.initialize(ot)}initialize(nt){this.profiler.event("session","ExecutionPlan.initialize",()=>{const ot=this.graph.getNodes();if(ot.length!==nt.length)throw new Error("The size of nodes and OPs do not match.");this._ops=nt.map((at,lt)=>new rt(at,ot[lt])),this.reset(),this._starter=[],this._ops.forEach((at,lt)=>{let ct=!0;for(const dt of at.node.inputs)if(!this._values[dt]&&this.graph.getInputIndices().indexOf(dt)===-1){ct=!1;break}ct&&this._starter.push(lt)})})}reset(){this._values=this.graph.getValues().map(nt=>nt.tensor)}async execute(nt,ot){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const at=nt.createInferenceHandler(),lt=this.graph.getInputIndices();if(ot.length!==lt.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${ot.length} expected: ${lt.length}`);ot.forEach((ht,ft)=>{const gt=lt[ft];this._values[gt]=ht});const ct=this._starter.slice(0),dt=this.graph.getValues(),st=this.graph.getNodes();let it=0;for(;it<ct.length;){const ht=ct[it++],ft=this._ops[ht],gt=ft.node.inputs.map(vt=>this._values[vt]);if(gt.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${ft.node}`);const mt=gt;tt.Logger.verbose("ExecPlan",`Runing op:${ft.node.name} (${mt.map((vt,xt)=>`'${ft.node.inputs[xt]}': ${vt.type}[${vt.dims.join(",")}]`).join(", ")})`);const yt=await this.profiler.event("node",ft.node.name,async()=>ft.op.impl(at,mt,ft.op.context));if(yt.length!==ft.node.outputs.length)throw new Error("the size of output does not match model definition.");yt.forEach((vt,xt)=>{const wt=ft.node.outputs[xt];if(this._values[wt])throw new Error(`output [${wt}] already has value: op:${ft.node.name}`);this._values[wt]=vt});const bt=new Set;yt.forEach((vt,xt)=>{const wt=ft.node.outputs[xt];for(const St of dt[wt].to){const Et=st[St];let _t=!0;for(const Tt of Et.inputs)if(!this._values[Tt]){_t=!1;break}_t&&bt.add(St)}}),ct.push(...bt)}const ut=[];for(let ht=0;ht<this.graph.getOutputIndices().length;ht++){const ft=this.graph.getOutputIndices()[ht],gt=this._values[ft];if(gt===void 0)throw new Error(`required output [${ft}] does not have value`);ft===0?await gt.getData():gt.data,ut.push(gt)}return tt.Logger.verbose("ExecPlan","disposing of inferenceHandler"),at.dispose(),ut})}}},7070:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Graph=void 0;const tt=et(1446),rt=et(7778),nt=et(9395),ot=et(9162),at=et(2517);var lt=nt.onnxruntime.experimental.fbs;_.Graph={from:(it,ut)=>new st(it,ut)};class ct{constructor(ut){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,ut&&(this.type=at.ProtoUtil.tensorValueTypeFromProto(ut.type.tensorType))}get from(){return this._from}get to(){return this._to}}class dt{constructor(ut,ht){ut instanceof tt.onnx.NodeProto?(this.name=ut.name,this.opType=ut.opType,this.attributes=new rt.Attribute(ut.attribute)):ut instanceof lt.Node&&(this.name=ht??ut.name(),this.opType=ut.opType(),this.attributes=new rt.Attribute(at.ProtoUtil.tensorAttributesFromORTFormat(ut))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class st{constructor(ut,ht){if(!ut)throw new TypeError("graph is empty");this.buildGraph(ut),this.transformGraph(ht),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(ut){if(ut instanceof tt.onnx.GraphProto)this.buildGraphFromOnnxFormat(ut);else{if(!(ut instanceof lt.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(ut)}}buildGraphFromOnnxFormat(ut){const ht=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const ft=new Map;if(!ut.input)throw new Error("missing information in graph: input");const gt=[];for(const mt of ut.input){if(ht.has(mt.name))throw new Error(`duplicated input name: ${mt.name}`);const yt=this._allData.push(new ct(mt))-1;ht.set(mt.name,yt),gt.push(mt.name)}if(!ut.initializer)throw new Error("missing information in graph: initializer");for(const mt of ut.initializer){let yt=ht.get(mt.name);if(yt===void 0){const bt=new ct;bt.type={shape:{dims:at.ProtoUtil.tensorDimsFromProto(mt.dims)},tensorType:at.ProtoUtil.tensorDataTypeFromProto(mt.dataType)},yt=this._allData.push(bt)-1,ht.set(mt.name,yt)}this._allData[yt]._from=-1,this._allData[yt].tensor=ot.Tensor.fromProto(mt)}for(let mt=0;mt<this._allData.length;mt++)this._allData[mt].tensor||(this._allInputIndices.push(mt),this._allInputNames.push(gt[mt]));if(!ut.output)throw new Error("missing information in graph: output");for(const mt of ut.output){if(ht.has(mt.name))throw new Error(`duplicated output name: ${mt.name}`);const yt=this._allData.push(new ct(mt))-1;ht.set(mt.name,yt),this._allOutputIndices.push(yt),this._allOutputNames.push(mt.name)}if(!ut.node)throw new Error("missing information in graph: node");for(const mt of ut.node){if(!mt.name)for(let bt=0;;bt++){const vt=`unnamed_${mt.opType}_${bt}`;if(!ft.has(vt)){mt.name=vt;break}}if(ft.has(mt.name))throw new Error(`duplicated node name: ${mt.name}`);const yt=this._nodes.push(new dt(mt))-1;ft.set(mt.name,yt)}for(let mt=0;mt<this._nodes.length;mt++){const yt=this._nodes[mt],bt=ut.node[mt];if(!bt.output)throw new Error(`missing output for node: ${bt.name}`);for(const vt of bt.output){let xt=ht.get(vt);if(xt===void 0&&(xt=this._allData.push(new ct)-1,ht.set(vt,xt)),yt.outputs.push(xt),this._allData[xt]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${xt}`);if(this._allData[xt]._from=mt,bt.opType==="Constant"){if(!bt.attribute||bt.attribute.length!==1||!bt.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!bt.output||bt.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");yt.outputs.pop(),yt.executeNode=!1,this._allData[xt]._from=-1,this._allData[xt].tensor=ot.Tensor.fromProto(bt.attribute[0].t)}}}for(let mt=0;mt<this._nodes.length;mt++){const yt=this._nodes[mt],bt=ut.node[mt];if(!bt.input)throw new Error(`missing input for node: ${bt.name}`);for(const vt of bt.input){const xt=ht.get(vt);if(xt===void 0){if(vt===""&&bt.input.length===3&&bt.opType==="Resize")continue;throw new Error(`unrecognized input '${vt}' for node: ${bt.name}`)}yt.inputs.push(xt),this._allData[xt]._to.push(mt)}}return!0}buildGraphFromOrtFormat(ut){var ht,ft,gt;const mt=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const yt=new Map,bt=[];for(let vt=0;vt<ut.inputsLength();vt++){const xt=ut.inputs(vt);if(mt.has(xt))throw new Error(`duplicated input name: ${xt}`);for(let wt=0;wt<ut.nodeArgsLength();wt++)if(((ht=ut.nodeArgs(wt))===null||ht===void 0?void 0:ht.name())===xt){const St=new ct;if(((gt=(ft=ut.nodeArgs(wt))===null||ft===void 0?void 0:ft.type())===null||gt===void 0?void 0:gt.valueType())!==lt.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const Et=ut.nodeArgs(wt).type().value(new lt.TensorTypeAndShape),_t=at.ProtoUtil.tensorDataTypeFromProto(Et.elemType()),Tt=Et.shape(),Rt=[];for(let At=0;At<Tt.dimLength();At++)Rt.push(at.LongUtil.longToNumber(Tt.dim(At).value().dimValue()));St.type={shape:{dims:Rt},tensorType:_t};const Ot=this._allData.push(St)-1;mt.set(xt,Ot),bt.push(xt)}}for(let vt=0;vt<ut.initializersLength();vt++){const xt=ut.initializers(vt);let wt=mt.get(xt.name());if(wt===void 0){const St=new ct,Et=at.ProtoUtil.tensorDimsFromORTFormat(xt),_t=at.ProtoUtil.tensorDataTypeFromProto(xt.dataType());St.type={shape:{dims:Et},tensorType:_t},wt=this._allData.push(St)-1,mt.set(xt.name(),wt)}this._allData[wt]._from=-1,this._allData[wt].tensor=ot.Tensor.fromOrtTensor(xt)}for(let vt=0;vt<this._allData.length;vt++)this._allData[vt].tensor||(this._allInputIndices.push(vt),this._allInputNames.push(bt[vt]));for(let vt=0;vt<ut.outputsLength();vt++){const xt=ut.outputs(vt);if(mt.has(xt))throw new Error(`duplicated output name: ${xt}`);const wt=this._allData.push(new ct)-1;mt.set(xt,wt),this._allOutputIndices.push(wt),this._allOutputNames.push(xt)}if(!ut.nodes)throw new Error("missing information in graph: node");for(let vt=0;vt<ut.nodesLength();vt++){const xt=ut.nodes(vt);let wt=xt.name();if(!wt)for(let Et=0;wt=`unnamed_${xt.opType()}_${Et}`,yt.has(wt);Et++);if(yt.has(wt))throw new Error(`duplicated node name: ${wt}`);const St=this._nodes.push(new dt(xt,wt))-1;yt.set(wt,St)}for(let vt=0;vt<this._nodes.length;vt++){const xt=this._nodes[vt],wt=ut.nodes(vt);if(wt==null)throw new Error(`No node exists at index ${vt}`);if((wt==null?void 0:wt.outputsLength())===0)throw new Error(`missing output for node: ${wt.name}`);for(let St=0;St<(wt==null?void 0:wt.outputsLength());St++){const Et=wt==null?void 0:wt.outputs(St);let _t=mt.get(Et);if(_t===void 0&&(_t=this._allData.push(new ct)-1,mt.set(Et,_t)),xt.outputs.push(_t),this._allData[_t]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${_t}`);if(this._allData[_t]._from=vt,wt.opType()==="Constant"){if(wt.attributesLength()!==1||!wt.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(wt.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");xt.outputs.pop(),xt.executeNode=!1,this._allData[_t]._from=-1,this._allData[_t].tensor=ot.Tensor.fromOrtTensor(wt.attributes(0).t())}}}for(let vt=0;vt<this._nodes.length;vt++){const xt=this._nodes[vt],wt=ut.nodes(vt);if(wt.inputsLength()===0)throw new Error(`missing input for node: ${wt.name}`);for(let St=0;St<wt.inputsLength();St++){const Et=wt.inputs(St),_t=mt.get(Et);if(_t===void 0)throw new Error(`unrecognized input '${Et}' for node: ${wt.name()}`);xt.inputs.push(_t),this._allData[_t]._to.push(vt)}}}checkIsAcyclic(){const ut=new Set;this._allInputIndices.forEach(gt=>{this._allData[gt]._to.forEach(mt=>{ut.add(mt)})});const ht=Array.from(ut),ft=new Array(this._nodes.length).fill("white");for(;ht.length>0;){const gt=ht.pop();ft[gt]==="gray"?ft[gt]="black":(ht.push(gt),ft[gt]="gray",this._nodes[gt].outputs.forEach(mt=>{const yt=this._allData[mt];if(yt.tensor!==void 0)throw new Error("node outputs should not be initialized");if(yt._from!==gt)throw new Error("from property of the Value object doesn't match index of Node being processed");yt._to.forEach(bt=>{if(ft[bt]==="gray")throw new Error("model graph is cyclic");ft[bt]==="white"&&ht.push(bt)})}))}}transformGraph(ut){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),ut&&ut.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let ut=0;for(let ht=0;ht<this._nodes.length;ht++)this._nodes[ht].executeNode?ut>0&&(this._nodes[ht].inputs.forEach(ft=>{const gt=this._allData[ft]._to.indexOf(ht+ut);gt!==-1&&(this._allData[ft]._to[gt]=ht)}),this._nodes[ht].outputs.forEach(ft=>{this._allData[ft]._from&&this._allData[ft]._from===ht+ut&&(this._allData[ft]._from=ht)})):(ut++,this._nodes[ht].outputs.forEach(ft=>{this._allData[ft]._from=-2}),this._nodes.splice(ht,1),ht--);ut=0;for(let ht=0;ht<this._allData.length;ht++)if(this._allData[ht].from!==-2||this._allOutputIndices.indexOf(ht+ut)!==-1){if(ut>0){let ft=-1;this._allData[ht].from!==void 0&&this._allData[ht].from!==-1?(ft=this._nodes[this._allData[ht].from].outputs.indexOf(ht+ut),ft!==-1&&(this._nodes[this._allData[ht].from].outputs[ft]=ht)):(ft=this._allInputIndices.indexOf(ht+ut),ft!==-1&&(this._allInputIndices[ft]=ht)),this._allData[ht].to.forEach(gt=>{ft=this._nodes[gt].inputs.indexOf(ht+ut),ft!==-1&&(this._nodes[gt].inputs[ft]=ht)}),this._allData[ht].to.length===0&&(ft=this._allOutputIndices.indexOf(ht+ut),ft!==-1&&(this._allOutputIndices[ft]=ht))}}else ut++,this._allData.splice(ht,1),ht--}deleteNode(ut){const ht=this._nodes[ut];if(ht.outputs.length>1){for(let vt=1;vt<ht.outputs.length;vt++)if(this._allData[ht.outputs[vt]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}ht.executeNode=!1;const ft=ht.inputs[0],gt=ht.outputs[0],mt=this._allData[gt].to,yt=this._allData[ft].to.indexOf(ut);if(yt===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[ft].to.splice(yt,1),this._allData[gt]._to=[];const bt=this._allOutputIndices.indexOf(gt);if(bt!==-1&&(this._allOutputIndices[bt]=ft),mt&&mt.length>0)for(const vt of mt){const xt=this._nodes[vt].inputs.indexOf(gt);if(xt===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[vt].inputs[xt]=ft,this._allData[ft].to.push(vt)}}removeAllDropoutNodes(){let ut=0;for(const ht of this._nodes){if(ht.opType==="Dropout"){if(ht.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(ht.outputs.length!==1&&ht.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(ht.outputs.length===2&&this._allData[ht.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(ut)}ut++}}removeAllIdentityNodes(){let ut=0;for(const ht of this._nodes)ht.opType==="Identity"&&this.deleteNode(ut),ut++}isActivation(ut){switch(ut.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const ut of this._nodes)if(ut.opType==="Conv"){const ht=this._allData[ut.outputs[0]]._to;if(ht.length===1&&this.isActivation(this._nodes[ht[0]])){const ft=this._nodes[ht[0]];if(ft.opType==="Clip")if(ft.inputs.length===1)try{ut.attributes.set("activation_params","floats",[ft.attributes.getFloat("min"),ft.attributes.getFloat("max")])}catch{ut.attributes.set("activation_params","floats",[at.MIN_CLIP,at.MAX_CLIP])}else{if(!(ft.inputs.length>=3&&this._allData[ft.inputs[1]].tensor!==void 0&&this._allData[ft.inputs[2]].tensor!==void 0))continue;ut.attributes.set("activation_params","floats",[this._allData[ft.inputs[1]].tensor.floatData[0],this._allData[ft.inputs[2]].tensor.floatData[0]])}ut.attributes.set("activation","string",ft.opType),this.deleteNode(ht[0])}}}}},6231:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.now=_.Profiler=_.Logger=void 0;const et={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},tt={none:new class{log(dt,st,it){}},console:new class{log(dt,st,it){console.log(`${this.color(dt)} ${it?"\x1B[35m"+it+"\x1B[0m ":""}${st}`)}color(dt){switch(dt){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${dt}`)}}}},rt={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let nt={"":rt};function ot(dt,st,it,ut){if(st===void 0)return ht=dt,{verbose:ot.verbose.bind(null,ht),info:ot.info.bind(null,ht),warning:ot.warning.bind(null,ht),error:ot.error.bind(null,ht),fatal:ot.fatal.bind(null,ht)};if(it===void 0)at(dt,st);else if(typeof it=="number"&&ut===void 0)at(dt,st);else if(typeof it=="string"&&ut===void 0)at(dt,it,0,st);else{if(typeof it!="string"||typeof ut!="number")throw new TypeError("input is valid");at(dt,it,0,st)}var ht}function at(dt,st,it,ut){const ht=nt[ut||""]||nt[""];et[dt]<et[ht.minimalSeverity]||(ht.logDateTime&&(st=`${new Date().toISOString()}|${st}`),ht.logSourceLocation,tt[ht.provider].log(dt,st,ut))}(function(dt){function st(ut){nt={},it("",ut||{})}function it(ut,ht){if(ut==="*")st(ht);else{const ft=nt[ut]||rt;nt[ut]={provider:ht.provider||ft.provider,minimalSeverity:ht.minimalSeverity||ft.minimalSeverity,logDateTime:ht.logDateTime===void 0?ft.logDateTime:ht.logDateTime,logSourceLocation:ht.logSourceLocation===void 0?ft.logSourceLocation:ht.logSourceLocation}}}dt.verbose=function(ut,ht){dt("verbose",ut,ht)},dt.info=function(ut,ht){dt("info",ut,ht)},dt.warning=function(ut,ht){dt("warning",ut,ht)},dt.error=function(ut,ht){dt("error",ut,ht)},dt.fatal=function(ut,ht){dt("fatal",ut,ht)},dt.reset=st,dt.set=it,dt.setWithEnv=function(ut){const ht={};ut.logLevel&&(ht.minimalSeverity=ut.logLevel),it("",ht)}})(ot),_.Logger=ot;class lt{constructor(st,it,ut,ht,ft,gt){this.category=st,this.name=it,this.startTime=ut,this.endCallback=ht,this.timer=ft,this.ctx=gt}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class ct{constructor(st,it,ut,ht){this.category=st,this.name=it,this.startTime=ut,this.endTime=ht}}_.Profiler=class{static create(dt){return dt===void 0?new this:new this(dt.maxNumberEvents,dt.flushBatchSize,dt.flushIntervalInMilliseconds)}constructor(dt,st,it){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=dt===void 0?1e4:dt,this._flushBatchSize=st===void 0?10:st,this._flushIntervalInMilliseconds=it===void 0?5e3:it}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,_.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(dt,st,it,ut){const ht=this._started?this.begin(dt,st,ut):void 0;let ft=!1;const gt=it();if(gt&&typeof gt.then=="function")return ft=!0,new Promise((mt,yt)=>{gt.then(async bt=>{ht&&await ht.end(),mt(bt)},async bt=>{ht&&await ht.end(),yt(bt)})});if(!ft&&ht){const mt=ht.end();if(mt&&typeof mt.then=="function")return new Promise((yt,bt)=>{mt.then(()=>{yt(gt)},vt=>{bt(vt)})})}return gt}begin(dt,st,it){if(!this._started)throw new Error("profiler is not started yet");if(it===void 0){const ut=(0,_.now)();return this.flush(ut),new lt(dt,st,ut,ht=>this.endSync(ht))}{const ut=it.beginTimer();return new lt(dt,st,0,async ht=>this.end(ht),ut,it)}}async end(dt){const st=await dt.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new ct(dt.category,dt.name,dt.startTime,st)),this.flush(st))}endSync(dt){const st=(0,_.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new ct(dt.category,dt.name,dt.startTime,st)),this.flush(st))}logOneEvent(dt){_.Logger.verbose(`Profiler.${dt.category}`,`${(dt.endTime-dt.startTime).toFixed(2)}ms on event '${dt.name}' at ${dt.endTime.toFixed(2)}`)}flush(dt){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||dt-this._flushTime>=this._flushIntervalInMilliseconds){for(const st=this._flushPointer;this._flushPointer<st+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,_.now)()}}get started(){return this._started}},_.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Model=void 0;const tt=et(5686),rt=et(1446),nt=et(7070),ot=et(9395),at=et(2517);var lt=ot.onnxruntime.experimental.fbs;_.Model=class{constructor(){}load(ct,dt,st){if(!st)try{return void this.loadFromOnnxFormat(ct,dt)}catch(it){if(st!==void 0)throw it}this.loadFromOrtFormat(ct,dt)}loadFromOnnxFormat(ct,dt){const st=rt.onnx.ModelProto.decode(ct);if(at.LongUtil.longToNumber(st.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=st.opsetImport.map(it=>({domain:it.domain,version:at.LongUtil.longToNumber(it.version)})),this._graph=nt.Graph.from(st.graph,dt)}loadFromOrtFormat(ct,dt){const st=new tt.flatbuffers.ByteBuffer(ct),it=lt.InferenceSession.getRootAsInferenceSession(st).model();if(at.LongUtil.longToNumber(it.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let ut=0;ut<it.opsetImportLength();ut++){const ht=it.opsetImport(ut);this._opsets.push({domain:ht==null?void 0:ht.domain(),version:at.LongUtil.longToNumber(ht.version())})}this._graph=nt.Graph.from(it.graph(),dt)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.FLOAT_TYPES=_.INT_TYPES=_.NUMBER_TYPES=void 0,_.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],_.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],_.FLOAT_TYPES=["float32","float64"]},1047:(_e,_)=>{function et(tt,rt){if(rt.endsWith("+")){const nt=Number.parseInt(rt.substring(0,rt.length-1),10);return!isNaN(nt)&&nt<=tt}if(rt.split("-").length===2){const nt=rt.split("-"),ot=Number.parseInt(nt[0],10),at=Number.parseInt(nt[1],10);return!isNaN(ot)&&!isNaN(at)&&ot<=tt&&tt<=at}return Number.parseInt(rt,10)===tt}Object.defineProperty(_,"__esModule",{value:!0}),_.resolveOperator=void 0,_.resolveOperator=function(tt,rt,nt){for(const ot of nt){const at=ot[0],lt=ot[1],ct=ot[2],dt=ot[3],st=ot[4];if(tt.opType===at){for(const it of rt)if((it.domain===lt||it.domain==="ai.onnx"&&lt==="")&&et(it.version,ct))return{opImpl:dt,opInit:st}}}throw new TypeError(`cannot resolve operator '${tt.opType}' with opsets: ${rt.map(ot=>`${ot.domain||"ai.onnx"} v${ot.version}`).join(", ")}`)}},9395:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.onnxruntime=void 0;const tt=et(5686);var rt,nt;rt=_.onnxruntime||(_.onnxruntime={}),function(ot){(function(at){at[at.UNDEFINED=0]="UNDEFINED",at[at.FLOAT=1]="FLOAT",at[at.INT=2]="INT",at[at.STRING=3]="STRING",at[at.TENSOR=4]="TENSOR",at[at.GRAPH=5]="GRAPH",at[at.FLOATS=6]="FLOATS",at[at.INTS=7]="INTS",at[at.STRINGS=8]="STRINGS",at[at.TENSORS=9]="TENSORS",at[at.GRAPHS=10]="GRAPHS",at[at.SPARSE_TENSOR=11]="SPARSE_TENSOR",at[at.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(ot.AttributeType||(ot.AttributeType={}))}((nt=rt.experimental||(rt.experimental={})).fbs||(nt.fbs={})),function(ot){(function(at){(function(lt){(function(ct){ct[ct.UNKNOWN=0]="UNKNOWN",ct[ct.VALUE=1]="VALUE",ct[ct.PARAM=2]="PARAM"})(lt.DimensionValueType||(lt.DimensionValueType={}))})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){(function(ct){ct[ct.UNDEFINED=0]="UNDEFINED",ct[ct.FLOAT=1]="FLOAT",ct[ct.UINT8=2]="UINT8",ct[ct.INT8=3]="INT8",ct[ct.UINT16=4]="UINT16",ct[ct.INT16=5]="INT16",ct[ct.INT32=6]="INT32",ct[ct.INT64=7]="INT64",ct[ct.STRING=8]="STRING",ct[ct.BOOL=9]="BOOL",ct[ct.FLOAT16=10]="FLOAT16",ct[ct.DOUBLE=11]="DOUBLE",ct[ct.UINT32=12]="UINT32",ct[ct.UINT64=13]="UINT64",ct[ct.COMPLEX64=14]="COMPLEX64",ct[ct.COMPLEX128=15]="COMPLEX128",ct[ct.BFLOAT16=16]="BFLOAT16"})(lt.TensorDataType||(lt.TensorDataType={}))})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){(function(ct){ct[ct.Primitive=0]="Primitive",ct[ct.Fused=1]="Fused"})(lt.NodeType||(lt.NodeType={}))})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){(function(ct){ct[ct.NONE=0]="NONE",ct[ct.tensor_type=1]="tensor_type",ct[ct.sequence_type=2]="sequence_type",ct[ct.map_type=3]="map_type"})(lt.TypeInfoValue||(lt.TypeInfoValue={}))})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsShape(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsShape(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}dim(st,it){let ut=this.bb.__offset(this.bb_pos,4);return ut?(it||new ot.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ut)+4*st),this.bb):null}dimLength(){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.__vector_len(this.bb_pos+st):0}static startShape(st){st.startObject(1)}static addDim(st,it){st.addFieldOffset(0,it,0)}static createDimVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startDimVector(st,it){st.startVector(4,it,4)}static endShape(st){return st.endObject()}static createShape(st,it){return ct.startShape(st),ct.addDim(st,it),ct.endShape(st)}}lt.Shape=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsDimension(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsDimension(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}value(st){let it=this.bb.__offset(this.bb_pos,4);return it?(st||new ot.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+it),this.bb):null}denotation(st){let it=this.bb.__offset(this.bb_pos,6);return it?this.bb.__string(this.bb_pos+it,st):null}static startDimension(st){st.startObject(2)}static addValue(st,it){st.addFieldOffset(0,it,0)}static addDenotation(st,it){st.addFieldOffset(1,it,0)}static endDimension(st){return st.endObject()}static createDimension(st,it,ut){return ct.startDimension(st),ct.addValue(st,it),ct.addDenotation(st,ut),ct.endDimension(st)}}lt.Dimension=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsDimensionValue(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsDimensionValue(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}dimType(){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.readInt8(this.bb_pos+st):ot.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let st=this.bb.__offset(this.bb_pos,6);return st?this.bb.readInt64(this.bb_pos+st):this.bb.createLong(0,0)}dimParam(st){let it=this.bb.__offset(this.bb_pos,8);return it?this.bb.__string(this.bb_pos+it,st):null}static startDimensionValue(st){st.startObject(3)}static addDimType(st,it){st.addFieldInt8(0,it,ot.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(st,it){st.addFieldInt64(1,it,st.createLong(0,0))}static addDimParam(st,it){st.addFieldOffset(2,it,0)}static endDimensionValue(st){return st.endObject()}static createDimensionValue(st,it,ut,ht){return ct.startDimensionValue(st),ct.addDimType(st,it),ct.addDimValue(st,ut),ct.addDimParam(st,ht),ct.endDimensionValue(st)}}lt.DimensionValue=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsTensorTypeAndShape(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsTensorTypeAndShape(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}elemType(){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.readInt32(this.bb_pos+st):ot.experimental.fbs.TensorDataType.UNDEFINED}shape(st){let it=this.bb.__offset(this.bb_pos,6);return it?(st||new ot.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+it),this.bb):null}static startTensorTypeAndShape(st){st.startObject(2)}static addElemType(st,it){st.addFieldInt32(0,it,ot.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(st,it){st.addFieldOffset(1,it,0)}static endTensorTypeAndShape(st){return st.endObject()}static createTensorTypeAndShape(st,it,ut){return ct.startTensorTypeAndShape(st),ct.addElemType(st,it),ct.addShape(st,ut),ct.endTensorTypeAndShape(st)}}lt.TensorTypeAndShape=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsMapType(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsMapType(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}keyType(){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.readInt32(this.bb_pos+st):ot.experimental.fbs.TensorDataType.UNDEFINED}valueType(st){let it=this.bb.__offset(this.bb_pos,6);return it?(st||new ot.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+it),this.bb):null}static startMapType(st){st.startObject(2)}static addKeyType(st,it){st.addFieldInt32(0,it,ot.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(st,it){st.addFieldOffset(1,it,0)}static endMapType(st){return st.endObject()}static createMapType(st,it,ut){return ct.startMapType(st),ct.addKeyType(st,it),ct.addValueType(st,ut),ct.endMapType(st)}}lt.MapType=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsSequenceType(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsSequenceType(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}elemType(st){let it=this.bb.__offset(this.bb_pos,4);return it?(st||new ot.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+it),this.bb):null}static startSequenceType(st){st.startObject(1)}static addElemType(st,it){st.addFieldOffset(0,it,0)}static endSequenceType(st){return st.endObject()}static createSequenceType(st,it){return ct.startSequenceType(st),ct.addElemType(st,it),ct.endSequenceType(st)}}lt.SequenceType=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(at.fbs||(at.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(lt,ct){return this.bb_pos=lt,this.bb=ct,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(lt,ct,dt,st){return lt.prep(4,12),lt.writeInt32(st),lt.writeInt32(dt),lt.writeInt32(ct),lt.offset()}}})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsNodeEdge(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsNodeEdge(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}nodeIndex(){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.readUint32(this.bb_pos+st):0}inputEdges(st,it){let ut=this.bb.__offset(this.bb_pos,6);return ut?(it||new ot.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+ut)+12*st,this.bb):null}inputEdgesLength(){let st=this.bb.__offset(this.bb_pos,6);return st?this.bb.__vector_len(this.bb_pos+st):0}outputEdges(st,it){let ut=this.bb.__offset(this.bb_pos,8);return ut?(it||new ot.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+ut)+12*st,this.bb):null}outputEdgesLength(){let st=this.bb.__offset(this.bb_pos,8);return st?this.bb.__vector_len(this.bb_pos+st):0}static startNodeEdge(st){st.startObject(3)}static addNodeIndex(st,it){st.addFieldInt32(0,it,0)}static addInputEdges(st,it){st.addFieldOffset(1,it,0)}static startInputEdgesVector(st,it){st.startVector(12,it,4)}static addOutputEdges(st,it){st.addFieldOffset(2,it,0)}static startOutputEdgesVector(st,it){st.startVector(12,it,4)}static endNodeEdge(st){return st.endObject()}static createNodeEdge(st,it,ut,ht){return ct.startNodeEdge(st),ct.addNodeIndex(st,it),ct.addInputEdges(st,ut),ct.addOutputEdges(st,ht),ct.endNodeEdge(st)}}lt.NodeEdge=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsNode(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsNode(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}name(st){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.__string(this.bb_pos+it,st):null}docString(st){let it=this.bb.__offset(this.bb_pos,6);return it?this.bb.__string(this.bb_pos+it,st):null}domain(st){let it=this.bb.__offset(this.bb_pos,8);return it?this.bb.__string(this.bb_pos+it,st):null}sinceVersion(){let st=this.bb.__offset(this.bb_pos,10);return st?this.bb.readInt32(this.bb_pos+st):0}index(){let st=this.bb.__offset(this.bb_pos,12);return st?this.bb.readUint32(this.bb_pos+st):0}opType(st){let it=this.bb.__offset(this.bb_pos,14);return it?this.bb.__string(this.bb_pos+it,st):null}type(){let st=this.bb.__offset(this.bb_pos,16);return st?this.bb.readInt32(this.bb_pos+st):ot.experimental.fbs.NodeType.Primitive}executionProviderType(st){let it=this.bb.__offset(this.bb_pos,18);return it?this.bb.__string(this.bb_pos+it,st):null}inputs(st,it){let ut=this.bb.__offset(this.bb_pos,20);return ut?this.bb.__string(this.bb.__vector(this.bb_pos+ut)+4*st,it):null}inputsLength(){let st=this.bb.__offset(this.bb_pos,20);return st?this.bb.__vector_len(this.bb_pos+st):0}outputs(st,it){let ut=this.bb.__offset(this.bb_pos,22);return ut?this.bb.__string(this.bb.__vector(this.bb_pos+ut)+4*st,it):null}outputsLength(){let st=this.bb.__offset(this.bb_pos,22);return st?this.bb.__vector_len(this.bb_pos+st):0}attributes(st,it){let ut=this.bb.__offset(this.bb_pos,24);return ut?(it||new ot.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ut)+4*st),this.bb):null}attributesLength(){let st=this.bb.__offset(this.bb_pos,24);return st?this.bb.__vector_len(this.bb_pos+st):0}inputArgCounts(st){let it=this.bb.__offset(this.bb_pos,26);return it?this.bb.readInt32(this.bb.__vector(this.bb_pos+it)+4*st):0}inputArgCountsLength(){let st=this.bb.__offset(this.bb_pos,26);return st?this.bb.__vector_len(this.bb_pos+st):0}inputArgCountsArray(){let st=this.bb.__offset(this.bb_pos,26);return st?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+st),this.bb.__vector_len(this.bb_pos+st)):null}implicitInputs(st,it){let ut=this.bb.__offset(this.bb_pos,28);return ut?this.bb.__string(this.bb.__vector(this.bb_pos+ut)+4*st,it):null}implicitInputsLength(){let st=this.bb.__offset(this.bb_pos,28);return st?this.bb.__vector_len(this.bb_pos+st):0}static startNode(st){st.startObject(13)}static addName(st,it){st.addFieldOffset(0,it,0)}static addDocString(st,it){st.addFieldOffset(1,it,0)}static addDomain(st,it){st.addFieldOffset(2,it,0)}static addSinceVersion(st,it){st.addFieldInt32(3,it,0)}static addIndex(st,it){st.addFieldInt32(4,it,0)}static addOpType(st,it){st.addFieldOffset(5,it,0)}static addType(st,it){st.addFieldInt32(6,it,ot.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(st,it){st.addFieldOffset(7,it,0)}static addInputs(st,it){st.addFieldOffset(8,it,0)}static createInputsVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startInputsVector(st,it){st.startVector(4,it,4)}static addOutputs(st,it){st.addFieldOffset(9,it,0)}static createOutputsVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startOutputsVector(st,it){st.startVector(4,it,4)}static addAttributes(st,it){st.addFieldOffset(10,it,0)}static createAttributesVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startAttributesVector(st,it){st.startVector(4,it,4)}static addInputArgCounts(st,it){st.addFieldOffset(11,it,0)}static createInputArgCountsVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addInt32(it[ut]);return st.endVector()}static startInputArgCountsVector(st,it){st.startVector(4,it,4)}static addImplicitInputs(st,it){st.addFieldOffset(12,it,0)}static createImplicitInputsVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startImplicitInputsVector(st,it){st.startVector(4,it,4)}static endNode(st){return st.endObject()}static createNode(st,it,ut,ht,ft,gt,mt,yt,bt,vt,xt,wt,St,Et){return ct.startNode(st),ct.addName(st,it),ct.addDocString(st,ut),ct.addDomain(st,ht),ct.addSinceVersion(st,ft),ct.addIndex(st,gt),ct.addOpType(st,mt),ct.addType(st,yt),ct.addExecutionProviderType(st,bt),ct.addInputs(st,vt),ct.addOutputs(st,xt),ct.addAttributes(st,wt),ct.addInputArgCounts(st,St),ct.addImplicitInputs(st,Et),ct.endNode(st)}}lt.Node=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsValueInfo(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsValueInfo(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}name(st){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.__string(this.bb_pos+it,st):null}docString(st){let it=this.bb.__offset(this.bb_pos,6);return it?this.bb.__string(this.bb_pos+it,st):null}type(st){let it=this.bb.__offset(this.bb_pos,8);return it?(st||new ot.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+it),this.bb):null}static startValueInfo(st){st.startObject(3)}static addName(st,it){st.addFieldOffset(0,it,0)}static addDocString(st,it){st.addFieldOffset(1,it,0)}static addType(st,it){st.addFieldOffset(2,it,0)}static endValueInfo(st){return st.endObject()}static createValueInfo(st,it,ut,ht){return ct.startValueInfo(st),ct.addName(st,it),ct.addDocString(st,ut),ct.addType(st,ht),ct.endValueInfo(st)}}lt.ValueInfo=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsTypeInfo(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsTypeInfo(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}denotation(st){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.__string(this.bb_pos+it,st):null}valueType(){let st=this.bb.__offset(this.bb_pos,6);return st?this.bb.readUint8(this.bb_pos+st):ot.experimental.fbs.TypeInfoValue.NONE}value(st){let it=this.bb.__offset(this.bb_pos,8);return it?this.bb.__union(st,this.bb_pos+it):null}static startTypeInfo(st){st.startObject(3)}static addDenotation(st,it){st.addFieldOffset(0,it,0)}static addValueType(st,it){st.addFieldInt8(1,it,ot.experimental.fbs.TypeInfoValue.NONE)}static addValue(st,it){st.addFieldOffset(2,it,0)}static endTypeInfo(st){return st.endObject()}static createTypeInfo(st,it,ut,ht){return ct.startTypeInfo(st),ct.addDenotation(st,it),ct.addValueType(st,ut),ct.addValue(st,ht),ct.endTypeInfo(st)}}lt.TypeInfo=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsOperatorSetId(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsOperatorSetId(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}domain(st){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.__string(this.bb_pos+it,st):null}version(){let st=this.bb.__offset(this.bb_pos,6);return st?this.bb.readInt64(this.bb_pos+st):this.bb.createLong(0,0)}static startOperatorSetId(st){st.startObject(2)}static addDomain(st,it){st.addFieldOffset(0,it,0)}static addVersion(st,it){st.addFieldInt64(1,it,st.createLong(0,0))}static endOperatorSetId(st){return st.endObject()}static createOperatorSetId(st,it,ut){return ct.startOperatorSetId(st),ct.addDomain(st,it),ct.addVersion(st,ut),ct.endOperatorSetId(st)}}lt.OperatorSetId=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsTensor(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsTensor(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}name(st){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.__string(this.bb_pos+it,st):null}docString(st){let it=this.bb.__offset(this.bb_pos,6);return it?this.bb.__string(this.bb_pos+it,st):null}dims(st){let it=this.bb.__offset(this.bb_pos,8);return it?this.bb.readInt64(this.bb.__vector(this.bb_pos+it)+8*st):this.bb.createLong(0,0)}dimsLength(){let st=this.bb.__offset(this.bb_pos,8);return st?this.bb.__vector_len(this.bb_pos+st):0}dataType(){let st=this.bb.__offset(this.bb_pos,10);return st?this.bb.readInt32(this.bb_pos+st):ot.experimental.fbs.TensorDataType.UNDEFINED}rawData(st){let it=this.bb.__offset(this.bb_pos,12);return it?this.bb.readUint8(this.bb.__vector(this.bb_pos+it)+st):0}rawDataLength(){let st=this.bb.__offset(this.bb_pos,12);return st?this.bb.__vector_len(this.bb_pos+st):0}rawDataArray(){let st=this.bb.__offset(this.bb_pos,12);return st?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+st),this.bb.__vector_len(this.bb_pos+st)):null}stringData(st,it){let ut=this.bb.__offset(this.bb_pos,14);return ut?this.bb.__string(this.bb.__vector(this.bb_pos+ut)+4*st,it):null}stringDataLength(){let st=this.bb.__offset(this.bb_pos,14);return st?this.bb.__vector_len(this.bb_pos+st):0}static startTensor(st){st.startObject(6)}static addName(st,it){st.addFieldOffset(0,it,0)}static addDocString(st,it){st.addFieldOffset(1,it,0)}static addDims(st,it){st.addFieldOffset(2,it,0)}static createDimsVector(st,it){st.startVector(8,it.length,8);for(let ut=it.length-1;ut>=0;ut--)st.addInt64(it[ut]);return st.endVector()}static startDimsVector(st,it){st.startVector(8,it,8)}static addDataType(st,it){st.addFieldInt32(3,it,ot.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(st,it){st.addFieldOffset(4,it,0)}static createRawDataVector(st,it){st.startVector(1,it.length,1);for(let ut=it.length-1;ut>=0;ut--)st.addInt8(it[ut]);return st.endVector()}static startRawDataVector(st,it){st.startVector(1,it,1)}static addStringData(st,it){st.addFieldOffset(5,it,0)}static createStringDataVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startStringDataVector(st,it){st.startVector(4,it,4)}static endTensor(st){return st.endObject()}static createTensor(st,it,ut,ht,ft,gt,mt){return ct.startTensor(st),ct.addName(st,it),ct.addDocString(st,ut),ct.addDims(st,ht),ct.addDataType(st,ft),ct.addRawData(st,gt),ct.addStringData(st,mt),ct.endTensor(st)}}lt.Tensor=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsSparseTensor(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsSparseTensor(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}values(st){let it=this.bb.__offset(this.bb_pos,4);return it?(st||new ot.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+it),this.bb):null}indices(st){let it=this.bb.__offset(this.bb_pos,6);return it?(st||new ot.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+it),this.bb):null}dims(st){let it=this.bb.__offset(this.bb_pos,8);return it?this.bb.readInt64(this.bb.__vector(this.bb_pos+it)+8*st):this.bb.createLong(0,0)}dimsLength(){let st=this.bb.__offset(this.bb_pos,8);return st?this.bb.__vector_len(this.bb_pos+st):0}static startSparseTensor(st){st.startObject(3)}static addValues(st,it){st.addFieldOffset(0,it,0)}static addIndices(st,it){st.addFieldOffset(1,it,0)}static addDims(st,it){st.addFieldOffset(2,it,0)}static createDimsVector(st,it){st.startVector(8,it.length,8);for(let ut=it.length-1;ut>=0;ut--)st.addInt64(it[ut]);return st.endVector()}static startDimsVector(st,it){st.startVector(8,it,8)}static endSparseTensor(st){return st.endObject()}static createSparseTensor(st,it,ut,ht){return ct.startSparseTensor(st),ct.addValues(st,it),ct.addIndices(st,ut),ct.addDims(st,ht),ct.endSparseTensor(st)}}lt.SparseTensor=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsAttribute(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsAttribute(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}name(st){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.__string(this.bb_pos+it,st):null}docString(st){let it=this.bb.__offset(this.bb_pos,6);return it?this.bb.__string(this.bb_pos+it,st):null}type(){let st=this.bb.__offset(this.bb_pos,8);return st?this.bb.readInt32(this.bb_pos+st):ot.experimental.fbs.AttributeType.UNDEFINED}f(){let st=this.bb.__offset(this.bb_pos,10);return st?this.bb.readFloat32(this.bb_pos+st):0}i(){let st=this.bb.__offset(this.bb_pos,12);return st?this.bb.readInt64(this.bb_pos+st):this.bb.createLong(0,0)}s(st){let it=this.bb.__offset(this.bb_pos,14);return it?this.bb.__string(this.bb_pos+it,st):null}t(st){let it=this.bb.__offset(this.bb_pos,16);return it?(st||new ot.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+it),this.bb):null}g(st){let it=this.bb.__offset(this.bb_pos,18);return it?(st||new ot.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+it),this.bb):null}floats(st){let it=this.bb.__offset(this.bb_pos,20);return it?this.bb.readFloat32(this.bb.__vector(this.bb_pos+it)+4*st):0}floatsLength(){let st=this.bb.__offset(this.bb_pos,20);return st?this.bb.__vector_len(this.bb_pos+st):0}floatsArray(){let st=this.bb.__offset(this.bb_pos,20);return st?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+st),this.bb.__vector_len(this.bb_pos+st)):null}ints(st){let it=this.bb.__offset(this.bb_pos,22);return it?this.bb.readInt64(this.bb.__vector(this.bb_pos+it)+8*st):this.bb.createLong(0,0)}intsLength(){let st=this.bb.__offset(this.bb_pos,22);return st?this.bb.__vector_len(this.bb_pos+st):0}strings(st,it){let ut=this.bb.__offset(this.bb_pos,24);return ut?this.bb.__string(this.bb.__vector(this.bb_pos+ut)+4*st,it):null}stringsLength(){let st=this.bb.__offset(this.bb_pos,24);return st?this.bb.__vector_len(this.bb_pos+st):0}tensors(st,it){let ut=this.bb.__offset(this.bb_pos,26);return ut?(it||new ot.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ut)+4*st),this.bb):null}tensorsLength(){let st=this.bb.__offset(this.bb_pos,26);return st?this.bb.__vector_len(this.bb_pos+st):0}graphs(st,it){let ut=this.bb.__offset(this.bb_pos,28);return ut?(it||new ot.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ut)+4*st),this.bb):null}graphsLength(){let st=this.bb.__offset(this.bb_pos,28);return st?this.bb.__vector_len(this.bb_pos+st):0}static startAttribute(st){st.startObject(13)}static addName(st,it){st.addFieldOffset(0,it,0)}static addDocString(st,it){st.addFieldOffset(1,it,0)}static addType(st,it){st.addFieldInt32(2,it,ot.experimental.fbs.AttributeType.UNDEFINED)}static addF(st,it){st.addFieldFloat32(3,it,0)}static addI(st,it){st.addFieldInt64(4,it,st.createLong(0,0))}static addS(st,it){st.addFieldOffset(5,it,0)}static addT(st,it){st.addFieldOffset(6,it,0)}static addG(st,it){st.addFieldOffset(7,it,0)}static addFloats(st,it){st.addFieldOffset(8,it,0)}static createFloatsVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addFloat32(it[ut]);return st.endVector()}static startFloatsVector(st,it){st.startVector(4,it,4)}static addInts(st,it){st.addFieldOffset(9,it,0)}static createIntsVector(st,it){st.startVector(8,it.length,8);for(let ut=it.length-1;ut>=0;ut--)st.addInt64(it[ut]);return st.endVector()}static startIntsVector(st,it){st.startVector(8,it,8)}static addStrings(st,it){st.addFieldOffset(10,it,0)}static createStringsVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startStringsVector(st,it){st.startVector(4,it,4)}static addTensors(st,it){st.addFieldOffset(11,it,0)}static createTensorsVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startTensorsVector(st,it){st.startVector(4,it,4)}static addGraphs(st,it){st.addFieldOffset(12,it,0)}static createGraphsVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startGraphsVector(st,it){st.startVector(4,it,4)}static endAttribute(st){return st.endObject()}static createAttribute(st,it,ut,ht,ft,gt,mt,yt,bt,vt,xt,wt,St,Et){return ct.startAttribute(st),ct.addName(st,it),ct.addDocString(st,ut),ct.addType(st,ht),ct.addF(st,ft),ct.addI(st,gt),ct.addS(st,mt),ct.addT(st,yt),ct.addG(st,bt),ct.addFloats(st,vt),ct.addInts(st,xt),ct.addStrings(st,wt),ct.addTensors(st,St),ct.addGraphs(st,Et),ct.endAttribute(st)}}lt.Attribute=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsGraph(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsGraph(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}initializers(st,it){let ut=this.bb.__offset(this.bb_pos,4);return ut?(it||new ot.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ut)+4*st),this.bb):null}initializersLength(){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.__vector_len(this.bb_pos+st):0}nodeArgs(st,it){let ut=this.bb.__offset(this.bb_pos,6);return ut?(it||new ot.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ut)+4*st),this.bb):null}nodeArgsLength(){let st=this.bb.__offset(this.bb_pos,6);return st?this.bb.__vector_len(this.bb_pos+st):0}nodes(st,it){let ut=this.bb.__offset(this.bb_pos,8);return ut?(it||new ot.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ut)+4*st),this.bb):null}nodesLength(){let st=this.bb.__offset(this.bb_pos,8);return st?this.bb.__vector_len(this.bb_pos+st):0}maxNodeIndex(){let st=this.bb.__offset(this.bb_pos,10);return st?this.bb.readUint32(this.bb_pos+st):0}nodeEdges(st,it){let ut=this.bb.__offset(this.bb_pos,12);return ut?(it||new ot.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ut)+4*st),this.bb):null}nodeEdgesLength(){let st=this.bb.__offset(this.bb_pos,12);return st?this.bb.__vector_len(this.bb_pos+st):0}inputs(st,it){let ut=this.bb.__offset(this.bb_pos,14);return ut?this.bb.__string(this.bb.__vector(this.bb_pos+ut)+4*st,it):null}inputsLength(){let st=this.bb.__offset(this.bb_pos,14);return st?this.bb.__vector_len(this.bb_pos+st):0}outputs(st,it){let ut=this.bb.__offset(this.bb_pos,16);return ut?this.bb.__string(this.bb.__vector(this.bb_pos+ut)+4*st,it):null}outputsLength(){let st=this.bb.__offset(this.bb_pos,16);return st?this.bb.__vector_len(this.bb_pos+st):0}sparseInitializers(st,it){let ut=this.bb.__offset(this.bb_pos,18);return ut?(it||new ot.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ut)+4*st),this.bb):null}sparseInitializersLength(){let st=this.bb.__offset(this.bb_pos,18);return st?this.bb.__vector_len(this.bb_pos+st):0}static startGraph(st){st.startObject(8)}static addInitializers(st,it){st.addFieldOffset(0,it,0)}static createInitializersVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startInitializersVector(st,it){st.startVector(4,it,4)}static addNodeArgs(st,it){st.addFieldOffset(1,it,0)}static createNodeArgsVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startNodeArgsVector(st,it){st.startVector(4,it,4)}static addNodes(st,it){st.addFieldOffset(2,it,0)}static createNodesVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startNodesVector(st,it){st.startVector(4,it,4)}static addMaxNodeIndex(st,it){st.addFieldInt32(3,it,0)}static addNodeEdges(st,it){st.addFieldOffset(4,it,0)}static createNodeEdgesVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startNodeEdgesVector(st,it){st.startVector(4,it,4)}static addInputs(st,it){st.addFieldOffset(5,it,0)}static createInputsVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startInputsVector(st,it){st.startVector(4,it,4)}static addOutputs(st,it){st.addFieldOffset(6,it,0)}static createOutputsVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startOutputsVector(st,it){st.startVector(4,it,4)}static addSparseInitializers(st,it){st.addFieldOffset(7,it,0)}static createSparseInitializersVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startSparseInitializersVector(st,it){st.startVector(4,it,4)}static endGraph(st){return st.endObject()}static createGraph(st,it,ut,ht,ft,gt,mt,yt,bt){return ct.startGraph(st),ct.addInitializers(st,it),ct.addNodeArgs(st,ut),ct.addNodes(st,ht),ct.addMaxNodeIndex(st,ft),ct.addNodeEdges(st,gt),ct.addInputs(st,mt),ct.addOutputs(st,yt),ct.addSparseInitializers(st,bt),ct.endGraph(st)}}lt.Graph=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsModel(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsModel(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}irVersion(){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.readInt64(this.bb_pos+st):this.bb.createLong(0,0)}opsetImport(st,it){let ut=this.bb.__offset(this.bb_pos,6);return ut?(it||new ot.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ut)+4*st),this.bb):null}opsetImportLength(){let st=this.bb.__offset(this.bb_pos,6);return st?this.bb.__vector_len(this.bb_pos+st):0}producerName(st){let it=this.bb.__offset(this.bb_pos,8);return it?this.bb.__string(this.bb_pos+it,st):null}producerVersion(st){let it=this.bb.__offset(this.bb_pos,10);return it?this.bb.__string(this.bb_pos+it,st):null}domain(st){let it=this.bb.__offset(this.bb_pos,12);return it?this.bb.__string(this.bb_pos+it,st):null}modelVersion(){let st=this.bb.__offset(this.bb_pos,14);return st?this.bb.readInt64(this.bb_pos+st):this.bb.createLong(0,0)}docString(st){let it=this.bb.__offset(this.bb_pos,16);return it?this.bb.__string(this.bb_pos+it,st):null}graph(st){let it=this.bb.__offset(this.bb_pos,18);return it?(st||new ot.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+it),this.bb):null}graphDocString(st){let it=this.bb.__offset(this.bb_pos,20);return it?this.bb.__string(this.bb_pos+it,st):null}static startModel(st){st.startObject(9)}static addIrVersion(st,it){st.addFieldInt64(0,it,st.createLong(0,0))}static addOpsetImport(st,it){st.addFieldOffset(1,it,0)}static createOpsetImportVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startOpsetImportVector(st,it){st.startVector(4,it,4)}static addProducerName(st,it){st.addFieldOffset(2,it,0)}static addProducerVersion(st,it){st.addFieldOffset(3,it,0)}static addDomain(st,it){st.addFieldOffset(4,it,0)}static addModelVersion(st,it){st.addFieldInt64(5,it,st.createLong(0,0))}static addDocString(st,it){st.addFieldOffset(6,it,0)}static addGraph(st,it){st.addFieldOffset(7,it,0)}static addGraphDocString(st,it){st.addFieldOffset(8,it,0)}static endModel(st){return st.endObject()}static createModel(st,it,ut,ht,ft,gt,mt,yt,bt,vt){return ct.startModel(st),ct.addIrVersion(st,it),ct.addOpsetImport(st,ut),ct.addProducerName(st,ht),ct.addProducerVersion(st,ft),ct.addDomain(st,gt),ct.addModelVersion(st,mt),ct.addDocString(st,yt),ct.addGraph(st,bt),ct.addGraphDocString(st,vt),ct.endModel(st)}}lt.Model=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsKernelCreateInfos(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsKernelCreateInfos(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}nodeIndices(st){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.readUint32(this.bb.__vector(this.bb_pos+it)+4*st):0}nodeIndicesLength(){let st=this.bb.__offset(this.bb_pos,4);return st?this.bb.__vector_len(this.bb_pos+st):0}nodeIndicesArray(){let st=this.bb.__offset(this.bb_pos,4);return st?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+st),this.bb.__vector_len(this.bb_pos+st)):null}kernelDefHashes(st){let it=this.bb.__offset(this.bb_pos,6);return it?this.bb.readUint64(this.bb.__vector(this.bb_pos+it)+8*st):this.bb.createLong(0,0)}kernelDefHashesLength(){let st=this.bb.__offset(this.bb_pos,6);return st?this.bb.__vector_len(this.bb_pos+st):0}static startKernelCreateInfos(st){st.startObject(2)}static addNodeIndices(st,it){st.addFieldOffset(0,it,0)}static createNodeIndicesVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addInt32(it[ut]);return st.endVector()}static startNodeIndicesVector(st,it){st.startVector(4,it,4)}static addKernelDefHashes(st,it){st.addFieldOffset(1,it,0)}static createKernelDefHashesVector(st,it){st.startVector(8,it.length,8);for(let ut=it.length-1;ut>=0;ut--)st.addInt64(it[ut]);return st.endVector()}static startKernelDefHashesVector(st,it){st.startVector(8,it,8)}static endKernelCreateInfos(st){return st.endObject()}static createKernelCreateInfos(st,it,ut){return ct.startKernelCreateInfos(st),ct.addNodeIndices(st,it),ct.addKernelDefHashes(st,ut),ct.endKernelCreateInfos(st)}}lt.KernelCreateInfos=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsSubGraphSessionState(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsSubGraphSessionState(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}graphId(st){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.__string(this.bb_pos+it,st):null}sessionState(st){let it=this.bb.__offset(this.bb_pos,6);return it?(st||new ot.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+it),this.bb):null}static startSubGraphSessionState(st){st.startObject(2)}static addGraphId(st,it){st.addFieldOffset(0,it,0)}static addSessionState(st,it){st.addFieldOffset(1,it,0)}static endSubGraphSessionState(st){let it=st.endObject();return st.requiredField(it,4),it}static createSubGraphSessionState(st,it,ut){return ct.startSubGraphSessionState(st),ct.addGraphId(st,it),ct.addSessionState(st,ut),ct.endSubGraphSessionState(st)}}lt.SubGraphSessionState=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsSessionState(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsSessionState(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}kernels(st){let it=this.bb.__offset(this.bb_pos,4);return it?(st||new ot.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+it),this.bb):null}subGraphSessionStates(st,it){let ut=this.bb.__offset(this.bb_pos,6);return ut?(it||new ot.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ut)+4*st),this.bb):null}subGraphSessionStatesLength(){let st=this.bb.__offset(this.bb_pos,6);return st?this.bb.__vector_len(this.bb_pos+st):0}static startSessionState(st){st.startObject(2)}static addKernels(st,it){st.addFieldOffset(0,it,0)}static addSubGraphSessionStates(st,it){st.addFieldOffset(1,it,0)}static createSubGraphSessionStatesVector(st,it){st.startVector(4,it.length,4);for(let ut=it.length-1;ut>=0;ut--)st.addOffset(it[ut]);return st.endVector()}static startSubGraphSessionStatesVector(st,it){st.startVector(4,it,4)}static endSessionState(st){return st.endObject()}static createSessionState(st,it,ut){return ct.startSessionState(st),ct.addKernels(st,it),ct.addSubGraphSessionStates(st,ut),ct.endSessionState(st)}}lt.SessionState=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(ot){(function(at){(function(lt){class ct{constructor(){this.bb=null,this.bb_pos=0}__init(st,it){return this.bb_pos=st,this.bb=it,this}static getRootAsInferenceSession(st,it){return(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static getSizePrefixedRootAsInferenceSession(st,it){return st.setPosition(st.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(it||new ct).__init(st.readInt32(st.position())+st.position(),st)}static bufferHasIdentifier(st){return st.__has_identifier("ORTM")}ortVersion(st){let it=this.bb.__offset(this.bb_pos,4);return it?this.bb.__string(this.bb_pos+it,st):null}model(st){let it=this.bb.__offset(this.bb_pos,6);return it?(st||new ot.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+it),this.bb):null}sessionState(st){let it=this.bb.__offset(this.bb_pos,8);return it?(st||new ot.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+it),this.bb):null}static startInferenceSession(st){st.startObject(3)}static addOrtVersion(st,it){st.addFieldOffset(0,it,0)}static addModel(st,it){st.addFieldOffset(1,it,0)}static addSessionState(st,it){st.addFieldOffset(2,it,0)}static endInferenceSession(st){return st.endObject()}static finishInferenceSessionBuffer(st,it){st.finish(it,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(st,it){st.finish(it,"ORTM",!0)}static createInferenceSession(st,it,ut,ht){return ct.startInferenceSession(st),ct.addOrtVersion(st,it),ct.addModel(st,ut),ct.addSessionState(st,ht),ct.endInferenceSession(st)}}lt.InferenceSession=ct})(at.fbs||(at.fbs={}))})(ot.experimental||(ot.experimental={}))}(_.onnxruntime||(_.onnxruntime={}))},7448:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.OnnxjsSessionHandler=void 0;const tt=et(1670),rt=et(9162);_.OnnxjsSessionHandler=class{constructor(nt){this.session=nt,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(nt,ot,at){const lt=new Map;for(const st in nt)if(Object.hasOwnProperty.call(nt,st)){const it=nt[st];lt.set(st,new rt.Tensor(it.dims,it.type,void 0,void 0,it.data))}const ct=await this.session.run(lt),dt={};return ct.forEach((st,it)=>{dt[it]=new tt.Tensor(st.type,st.data,st.dims)}),dt}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Session=void 0;const tt=et(7067),rt=et(1296),nt=et(7091),ot=et(1036),at=et(6231),lt=et(2644);_.Session=class{constructor(ct={}){this._initialized=!1,this.backendHint=ct.backendHint,this.profiler=at.Profiler.create(ct.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(ct,dt,st){await this.profiler.event("session","Session.loadModel",async()=>{const it=await(0,nt.resolveBackend)(this.backendHint);if(this.sessionHandler=it.createSessionHandler(this.context),this._model=new lt.Model,typeof ct=="string"){const ut=ct.endsWith(".ort");if(typeof fetch>"u"){const ht=await(0,rt.promisify)(tt.readFile)(ct);this.initialize(ht,ut)}else{const ht=await fetch(ct),ft=await ht.arrayBuffer();this.initialize(new Uint8Array(ft),ut)}}else if(ArrayBuffer.isView(ct))this.initialize(ct);else{const ut=new Uint8Array(ct,dt||0,st||ct.byteLength);this.initialize(ut)}})}initialize(ct,dt){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const st=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(ct,st,dt),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new ot.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(ct){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const dt=this.normalizeAndValidateInputs(ct),st=await this._executionPlan.execute(this.sessionHandler,dt);return this.createOutput(st)})}normalizeAndValidateInputs(ct){const dt=this._model.graph.getInputNames();if(Array.isArray(ct)){if(ct.length!==dt.length)throw new Error(`incorrect input array length: expected ${dt.length} but got ${ct.length}`)}else{if(ct.size!==dt.length)throw new Error(`incorrect input map size: expected ${dt.length} but got ${ct.size}`);const st=new Array(ct.size);let it=0;for(let ut=0;ut<dt.length;++ut){const ht=ct.get(dt[ut]);if(!ht)throw new Error(`missing input tensor for: '${name}'`);st[it++]=ht}ct=st}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,ct,!1);else{const st=this._model.graph.getInputIndices(),it=this._model.graph.getValues(),ut=new Array(st.length);for(let ht=0;ht<st.length;++ht){const ft=it[st[ht]];ut[ht]=ft.type.shape.dims,this.context.graphInputTypes.push(ft.type.tensorType),this.context.graphInputDims.push(ct[ht].dims)}this.validateInputTensorDims(ut,ct,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,ct),ct}validateInputTensorTypes(ct,dt){for(let st=0;st<dt.length;st++){const it=ct[st],ut=dt[st].type;if(it!==ut)throw new Error(`input tensor[${st}] check failed: expected type '${it}' but got ${ut}`)}}validateInputTensorDims(ct,dt,st){for(let it=0;it<dt.length;it++){const ut=ct[it],ht=dt[it].dims;if(!this.compareTensorDims(ut,ht,st))throw new Error(`input tensor[${it}] check failed: expected shape '[${ut.join(",")}]' but got [${ht.join(",")}]`)}}compareTensorDims(ct,dt,st){if(ct.length!==dt.length)return!1;for(let it=0;it<ct.length;++it)if(ct[it]!==dt[it]&&(!st||ct[it]!==0))return!1;return!0}createOutput(ct){const dt=this._model.graph.getOutputNames();if(ct.length!==dt.length)throw new Error("expected number of outputs do not match number of generated outputs");const st=new Map;for(let it=0;it<dt.length;++it)st.set(dt[it],ct[it]);return st}initializeOps(ct){const dt=ct.getNodes();this._ops=new Array(dt.length);for(let st=0;st<dt.length;st++)this._ops[st]=this.sessionHandler.resolve(dt[st],this._model.opsets,ct)}}},9162:function(_e,_,et){var tt=this&&this.__importDefault||function(ft){return ft&&ft.__esModule?ft:{default:ft}};Object.defineProperty(_,"__esModule",{value:!0}),_.Tensor=void 0;const rt=et(3442),nt=tt(et(3720)),ot=et(1446),at=et(9395),lt=et(2517);var ct=at.onnxruntime.experimental.fbs;class dt{get data(){if(this.cache===void 0){const gt=this.dataProvider(this.dataId);if(gt.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=gt}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(gt){return this.data[lt.ShapeUtil.indicesToOffset(gt,this.strides)]}set(gt,mt){this.data[lt.ShapeUtil.indicesToOffset(gt,this.strides)]=mt}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=lt.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(gt,mt,yt,bt,vt,xt=rt.Guid.create()){this.dims=gt,this.type=mt,this.dataProvider=yt,this.asyncDataProvider=bt,this.cache=vt,this.dataId=xt,this.size=lt.ShapeUtil.validateDimsAndCalcSize(gt);const wt=this.size,St=yt===void 0&&bt===void 0&&vt===void 0;if(vt!==void 0&&vt.length!==wt)throw new RangeError("Input dims doesn't match data length.");if(mt==="string"){if(!(vt===void 0||Array.isArray(vt)&&vt.every(Et=>typeof Et=="string")))throw new TypeError("cache should be a string array");St&&(this.cache=new Array(wt))}else{if(vt!==void 0){const Et=it(mt);if(!(vt instanceof Et))throw new TypeError(`cache should be type ${Et.name}`)}if(St){const Et=new ArrayBuffer(wt*function(_t){switch(_t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${_t}`)}}(mt));this.cache=function(_t,Tt){return new(it(Tt))(_t)}(Et,mt)}}}static fromProto(gt){if(!gt)throw new Error("cannot construct Value from an empty tensor");const mt=lt.ProtoUtil.tensorDataTypeFromProto(gt.dataType),yt=lt.ProtoUtil.tensorDimsFromProto(gt.dims),bt=new dt(yt,mt);if(mt==="string")gt.stringData.forEach((vt,xt)=>{bt.data[xt]=(0,lt.decodeUtf8String)(vt)});else if(gt.rawData&&typeof gt.rawData.byteLength=="number"&&gt.rawData.byteLength>0){const vt=bt.data,xt=new DataView(gt.rawData.buffer,gt.rawData.byteOffset,gt.rawData.byteLength),wt=st(gt.dataType),St=gt.rawData.byteLength/wt;if(gt.rawData.byteLength%wt!=0)throw new Error("invalid buffer length");if(vt.length!==St)throw new Error("buffer length mismatch");for(let Et=0;Et<St;Et++){const _t=ht(xt,gt.dataType,Et*wt);vt[Et]=_t}}else{let vt;switch(gt.dataType){case ot.onnx.TensorProto.DataType.FLOAT:vt=gt.floatData;break;case ot.onnx.TensorProto.DataType.INT32:case ot.onnx.TensorProto.DataType.INT16:case ot.onnx.TensorProto.DataType.UINT16:case ot.onnx.TensorProto.DataType.INT8:case ot.onnx.TensorProto.DataType.UINT8:case ot.onnx.TensorProto.DataType.BOOL:vt=gt.int32Data;break;case ot.onnx.TensorProto.DataType.INT64:vt=gt.int64Data;break;case ot.onnx.TensorProto.DataType.DOUBLE:vt=gt.doubleData;break;case ot.onnx.TensorProto.DataType.UINT32:case ot.onnx.TensorProto.DataType.UINT64:vt=gt.uint64Data;break;default:throw new Error("unspecific error")}if(vt==null)throw new Error("failed to populate data from a tensorproto value");const xt=bt.data;if(xt.length!==vt.length)throw new Error("array length mismatch");for(let wt=0;wt<vt.length;wt++){const St=vt[wt];nt.default.isLong(St)?xt[wt]=ut(St,gt.dataType):xt[wt]=St}}return bt}static fromData(gt,mt,yt){return new dt(mt,yt,void 0,void 0,gt)}static fromOrtTensor(gt){if(!gt)throw new Error("cannot construct Value from an empty tensor");const mt=lt.ProtoUtil.tensorDimsFromORTFormat(gt),yt=lt.ProtoUtil.tensorDataTypeFromProto(gt.dataType()),bt=new dt(mt,yt);if(yt==="string")for(let vt=0;vt<gt.stringDataLength();vt++)bt.data[vt]=gt.stringData(vt);else if(gt.rawDataArray()&&typeof gt.rawDataLength()=="number"&&gt.rawDataLength()>0){const vt=bt.data,xt=new DataView(gt.rawDataArray().buffer,gt.rawDataArray().byteOffset,gt.rawDataLength()),wt=st(gt.dataType()),St=gt.rawDataLength()/wt;if(gt.rawDataLength()%wt!=0)throw new Error("invalid buffer length");if(vt.length!==St)throw new Error("buffer length mismatch");for(let Et=0;Et<St;Et++){const _t=ht(xt,gt.dataType(),Et*wt);vt[Et]=_t}}return bt}}function st(ft){switch(ft){case ot.onnx.TensorProto.DataType.UINT8:case ot.onnx.TensorProto.DataType.INT8:case ot.onnx.TensorProto.DataType.BOOL:return 1;case ot.onnx.TensorProto.DataType.UINT16:case ot.onnx.TensorProto.DataType.INT16:return 2;case ot.onnx.TensorProto.DataType.FLOAT:case ot.onnx.TensorProto.DataType.INT32:case ot.onnx.TensorProto.DataType.UINT32:return 4;case ot.onnx.TensorProto.DataType.INT64:case ot.onnx.TensorProto.DataType.DOUBLE:case ot.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${ot.onnx.TensorProto.DataType[ft]}`)}}function it(ft){switch(ft){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function ut(ft,gt){if(gt===ot.onnx.TensorProto.DataType.INT64||gt===ct.TensorDataType.INT64){if(ft.greaterThanOrEqual(2147483648)||ft.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(gt!==ot.onnx.TensorProto.DataType.UINT32&&gt!==ct.TensorDataType.UINT32&&gt!==ot.onnx.TensorProto.DataType.UINT64&&gt!==ct.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${ot.onnx.TensorProto.DataType[gt]}`);if(ft.greaterThanOrEqual(4294967296)||ft.lessThan(0))throw new TypeError("uint64 is not supported")}return ft.toNumber()}function ht(ft,gt,mt){switch(gt){case ot.onnx.TensorProto.DataType.BOOL:case ot.onnx.TensorProto.DataType.UINT8:return ft.getUint8(mt);case ot.onnx.TensorProto.DataType.INT8:return ft.getInt8(mt);case ot.onnx.TensorProto.DataType.UINT16:return ft.getUint16(mt,!0);case ot.onnx.TensorProto.DataType.INT16:return ft.getInt16(mt,!0);case ot.onnx.TensorProto.DataType.FLOAT:return ft.getFloat32(mt,!0);case ot.onnx.TensorProto.DataType.INT32:return ft.getInt32(mt,!0);case ot.onnx.TensorProto.DataType.UINT32:return ft.getUint32(mt,!0);case ot.onnx.TensorProto.DataType.INT64:return ut(nt.default.fromBits(ft.getUint32(mt,!0),ft.getUint32(mt+4,!0),!1),gt);case ot.onnx.TensorProto.DataType.DOUBLE:return ft.getFloat64(mt,!0);case ot.onnx.TensorProto.DataType.UINT64:return ut(nt.default.fromBits(ft.getUint32(mt,!0),ft.getUint32(mt+4,!0),!0),gt);default:throw new Error(`cannot read from DataView for type ${ot.onnx.TensorProto.DataType[gt]}`)}}_.Tensor=dt},2517:function(_e,_,et){var tt=this&&this.__importDefault||function(gt){return gt&&gt.__esModule?gt:{default:gt}};Object.defineProperty(_,"__esModule",{value:!0}),_.decodeUtf8String=_.MAX_CLIP=_.MIN_CLIP=_.PoolConvUtil=_.ReduceUtil=_.SplitUtil=_.MathUtil=_.ShapeUtil=_.LongUtil=_.ProtoUtil=_.GemmUtil=_.arrayCopyHelper=_.BroadcastUtil=_.MatMulUtil=_.ArrayUtil=_.assert=_.checkInputsShape=void 0;const rt=et(5686),nt=tt(et(3720)),ot=et(1446),at=et(9162);_.checkInputsShape=function(gt,...mt){if(!gt||gt.length!==mt.length)return!1;for(let yt=0;yt<gt.length;yt++)if(!gt[yt].dims||gt[yt].dims.length!==mt[yt])return!1;return!0},_.assert=function(gt,mt){if(!gt)throw new Error(typeof mt=="string"?mt:mt())},_.ArrayUtil=class{static arraysEqual(gt,mt){if(gt.length!==mt.length)return!1;for(let yt=0;yt<gt.length;yt++)if(gt[yt]!==mt[yt])return!1;return!0}};class lt{static preprocessInputShapes(mt,yt){return[mt.length===1?[1,mt[0]]:mt,yt.length===1?[yt[0],1]:yt]}static postprocessOutputShape(mt,yt,bt){yt===1&&mt.splice(mt.length-2,1),bt===1&&mt.pop()}static calcMatMulShape(mt,yt){return mt[1]!==yt[0]?void 0:[mt[0],yt[1]]}}_.MatMulUtil=lt;class ct{static calcShape(mt,yt,bt=!1){const vt=mt.length,xt=yt.length;if(vt===0)return yt;if(xt===0)return mt;const wt=Math.max(mt.length,yt.length),St=new Array(wt);if(bt){if(vt<2||xt<2)return;const Et=lt.calcMatMulShape([mt[vt-2],mt[vt-1]],[yt[xt-2],yt[xt-1]]);if(Et===void 0)return;[St[wt-2],St[wt-1]]=Et}for(let Et=bt?3:1;Et<=wt;Et++){const _t=vt-Et<0?1:mt[vt-Et],Tt=xt-Et<0?1:yt[xt-Et];if(_t!==Tt&&_t>1&&Tt>1)return;St[wt-Et]=Math.max(_t,Tt)}return St}static index(mt,yt){const bt=new Array(yt.length);return ct.fillIndex(mt,yt,bt),bt}static fillIndex(mt,yt,bt){const vt=mt.length-yt.length;for(let xt=0;xt<yt.length;xt++)bt[xt]=mt[vt+xt]%yt[xt]}static calc(mt,yt,bt,vt,xt){const wt=ct.calcShape(mt.dims,yt.dims);if(wt){if(vt&&!it.areEqual(wt,mt.dims))return;const St=it.size(wt),Et=vt?mt:new at.Tensor(wt,xt||mt.type);if(wt.length===0)Et.set([],bt(mt.get([]),yt.get([])));else{const _t=new Array(wt.length),Tt=new Array(mt.dims.length),Rt=new Array(yt.dims.length);let Ot,At=0,Ct=0,$t=!1,Mt=!1;mt.dims.length===0&&(At=mt.get([]),$t=!0),yt.dims.length===0&&(Ct=yt.get([]),Mt=!0);for(let Dt=0;Dt<St;Dt++){Ot=Dt;for(let Nt=wt.length-1;Nt>=0;Nt--)_t[Nt]=Ot%wt[Nt],Ot=Math.floor(Ot/wt[Nt]);$t||(ct.fillIndex(_t,mt.dims,Tt),At=mt.get(Tt)),Mt||(ct.fillIndex(_t,yt.dims,Rt),Ct=yt.get(Rt)),Et.set(_t,bt(At,Ct))}}return Et}}static isValidBroadcast(mt,yt){const bt=mt.length,vt=yt.length;if(bt>vt)return!1;for(let xt=1;xt<=bt;xt++)if(mt[bt-xt]!==1&&mt[bt-xt]!==yt[vt-xt])return!1;return!0}static getBroadcastDims(mt,yt){const bt=mt.length,vt=[];for(let xt=0;xt<bt;xt++){const wt=bt-1-xt,St=mt[wt]||1;(yt[yt.length-1-xt]||1)>1&&St===1&&vt.unshift(wt)}return vt}}_.BroadcastUtil=ct,_.arrayCopyHelper=function(gt,mt,yt,bt,vt){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+vt>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+vt>gt.length)throw new Error("target array is too small to hold result");for(let xt=0;xt<vt;xt++)gt[yt+xt]=mt[bt+xt]},_.GemmUtil=class{static getShapeOfGemmResult(gt,mt,yt,bt,vt){if(gt.length!==2||yt.length!==2)throw new Error("shape need to be of size 2");let xt,wt,St;mt?(xt=gt[1],wt=gt[0]):(xt=gt[0],wt=gt[1]);let Et=-1;if(bt?(St=yt[0],Et=1):(St=yt[1],Et=0),yt[Et]!==wt)throw new Error("dimension mismatch");if(xt<=0||St<=0||wt<=0)throw new Error("invalid shape specified");if(vt&&!ct.isValidBroadcast(vt,[xt,St]))throw new Error("gemm: invalid bias shape for broadcast");return[xt,St,wt]}};class dt{static tensorDataTypeFromProto(mt){switch(mt){case ot.onnx.TensorProto.DataType.INT8:return"int8";case ot.onnx.TensorProto.DataType.UINT8:return"uint8";case ot.onnx.TensorProto.DataType.BOOL:return"bool";case ot.onnx.TensorProto.DataType.INT16:return"int16";case ot.onnx.TensorProto.DataType.UINT16:return"uint16";case ot.onnx.TensorProto.DataType.INT32:return"int32";case ot.onnx.TensorProto.DataType.UINT32:return"uint32";case ot.onnx.TensorProto.DataType.FLOAT:return"float32";case ot.onnx.TensorProto.DataType.DOUBLE:return"float64";case ot.onnx.TensorProto.DataType.STRING:return"string";case ot.onnx.TensorProto.DataType.INT64:return"int32";case ot.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${ot.onnx.TensorProto.DataType[mt]}`)}}static tensorDataTypeStringToEnum(mt){switch(mt){case"int8":return ot.onnx.TensorProto.DataType.INT8;case"uint8":return ot.onnx.TensorProto.DataType.UINT8;case"bool":return ot.onnx.TensorProto.DataType.BOOL;case"int16":return ot.onnx.TensorProto.DataType.INT16;case"uint16":return ot.onnx.TensorProto.DataType.UINT16;case"int32":return ot.onnx.TensorProto.DataType.INT32;case"uint32":return ot.onnx.TensorProto.DataType.UINT32;case"float32":return ot.onnx.TensorProto.DataType.FLOAT;case"float64":return ot.onnx.TensorProto.DataType.DOUBLE;case"string":return ot.onnx.TensorProto.DataType.STRING;case"int64":return ot.onnx.TensorProto.DataType.INT64;case"uint64":return ot.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${mt}`)}}static tensorDimsFromProto(mt){return mt.map(yt=>nt.default.isLong(yt)?yt.toNumber():yt)}static tensorValueTypeFromProto(mt){return{tensorType:dt.tensorDataTypeFromProto(mt.elemType),shape:{dims:dt.tensorDimsFromProto(mt.shape.dim.map(yt=>yt.dimValue))}}}static tensorDimsFromORTFormat(mt){const yt=[];for(let bt=0;bt<mt.dimsLength();bt++)yt.push(st.longToNumber(mt.dims(bt)));return yt}static tensorAttributesFromORTFormat(mt){const yt=[];for(let bt=0;bt<mt.attributesLength();bt++)yt.push(mt.attributes(bt));return yt}}_.ProtoUtil=dt;class st{static longToNumber(mt,yt){return nt.default.isLong(mt)?mt.toNumber():mt instanceof rt.flatbuffers.Long?nt.default.fromValue({low:mt.low,high:mt.high,unsigned:yt!=null&&yt}).toNumber():mt}static isLong(mt){return nt.default.isLong(mt)||mt instanceof rt.flatbuffers.Long}}_.LongUtil=st;class it{static size(mt){return it.getSizeFromDimensionRange(mt,0,mt.length)}static sizeFromDimension(mt,yt){if(yt<0||yt>mt.length)throw new Error(`invalid dimension of ${yt} for sizeFromDimension as Tensor has ${mt.length} dimensions.`);return it.getSizeFromDimensionRange(mt,yt,mt.length)}static sizeToDimension(mt,yt){if(yt<0||yt>mt.length)throw new Error(`invalid dimension of ${yt} for sizeToDimension as Tensor has ${mt.length} dimensions.`);return it.getSizeFromDimensionRange(mt,0,yt)}static getSizeFromDimensionRange(mt,yt,bt){let vt=1;for(let xt=yt;xt<bt;xt++){if(mt[xt]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");vt*=mt[xt]}return vt}static computeStrides(mt){const yt=mt.length;if(yt===0)return[];if(yt===1)return[1];const bt=new Array(yt);bt[yt-1]=1,bt[yt-2]=mt[yt-1];for(let vt=yt-3;vt>=0;--vt)bt[vt]=bt[vt+1]*mt[vt+1];return bt}static transpose(mt){return mt.slice().reverse()}static indicesToOffset(mt,yt,bt){bt===void 0&&(bt=mt.length);let vt=0;for(let xt=0;xt<bt;++xt)vt+=yt[xt]*mt[xt];return vt}static offsetToIndices(mt,yt){const bt=yt.length;if(bt===0)return[];if(bt===1)return[mt*yt[0]];const vt=new Array(yt.length);for(let xt=0;xt<vt.length-1;++xt)vt[xt]=Math.floor(mt/yt[xt]),mt-=vt[xt]*yt[xt];return vt[vt.length-1]=mt,vt}static normalizeAxis(mt,yt){if(mt<-yt&&mt>=yt)throw new Error("unsupported axis for this operation.");return mt<0?mt+yt:mt}static normalizeAxes(mt,yt){return mt.map(bt=>this.normalizeAxis(bt,yt))}static incrementIndex(mt,yt,bt){if(yt.length===0||mt.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(bt===void 0)bt=yt.length;else if(bt<=0||bt>yt.length)throw new Error("Incorrect axis to increment on");for(let vt=bt-1;vt>=0&&(mt[vt]++,!(mt[vt]<yt[vt]));--vt)mt[vt]=0}static calculateReshapedDims(mt,yt){if(yt.length===0){if(mt.length===0||it.size(mt)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const bt=yt.length,vt=new Array(bt);let xt=-1,wt=1;for(let Et=0;Et<bt;Et++){if(yt[Et]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(yt[Et]===-1){if(xt!==-1)throw new Error("at most one dimension in shape hints can be -1");xt=Et}else{if(yt[Et]===0){if(Et>=mt.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");vt[Et]=mt[Et]}else vt[Et]=yt[Et];wt*=vt[Et]}}const St=it.size(mt);if(xt!==-1){if(St%wt!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${mt}] Output shape: [${yt}]`);vt[xt]=St/wt}else if(wt!==St)throw new Error("reshapedDims and originalDims don't have matching sizes");return vt}static sortBasedOnPerm(mt,yt){return yt?yt.map(bt=>mt[bt]):mt.slice().reverse()}static padShape(mt,yt){const bt=mt.length;return mt.map((vt,xt)=>vt+yt[xt]+yt[xt+bt])}static areEqual(mt,yt){return mt.length===yt.length&&mt.every((bt,vt)=>bt===yt[vt])}static validateDimsAndCalcSize(mt){if(mt.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let yt=1;for(const bt of mt){if(!Number.isInteger(bt))throw new TypeError(`Invalid shape: ${bt} is not an integer`);if(bt<0||bt>2147483647)throw new TypeError(`Invalid shape: length ${bt} is not allowed`);yt*=bt}return yt}static flattenShape(mt,yt){yt<0&&(yt+=mt.length);const bt=mt.reduce((xt,wt)=>xt*wt,1),vt=mt.slice(yt).reduce((xt,wt)=>xt*wt,1);return[bt/vt,vt]}static squeezeShape(mt,yt){const bt=new Array;yt=it.normalizeAxes(yt,mt.length);for(let vt=0;vt<mt.length;vt++){const xt=yt.indexOf(vt)>=0;if(xt&&mt[vt]!==1)throw new Error("squeeze an axis of size different than 1");(yt.length===0&&mt[vt]>1||yt.length>0&&!xt)&&bt.push(mt[vt])}return bt}static unsqueezeShape(mt,yt){const bt=new Array(mt.length+yt.length);bt.fill(0);for(let xt=0;xt<yt.length;xt++){const wt=it.normalizeAxis(yt[xt],bt.length);if(wt>=bt.length)throw new Error("'axes' has an out of range axis");if(bt[wt]!==0)throw new Error("'axes' has a duplicate axis");bt[wt]=1}let vt=0;for(let xt=0;xt<bt.length;xt++)bt[xt]===0&&(bt[xt]=mt[vt++]);if(vt!==mt.length)throw new Error("the unsqueezed dimension could not be established");return bt}}_.ShapeUtil=it,_.MathUtil=class{static sqr(gt,mt,yt,bt,vt){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+vt>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+vt>gt.length)throw new Error("target array is too small to hold result");for(let xt=0;xt<vt;xt++)gt[yt+xt]+=Math.pow(mt[bt+xt],2)}static axpy(gt,mt,yt,bt,vt,xt){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+vt>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+vt>gt.length)throw new Error("target array is too small to hold result");for(let wt=0;wt<vt;wt++)gt[yt+wt]+=xt*mt[bt+wt]}static powx(gt,mt,yt,bt,vt,xt){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+vt>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+vt>gt.length)throw new Error("target array is too small to hold result");for(let wt=0;wt<vt;wt++)gt[yt+wt]=Math.pow(mt[bt+wt],xt)}static mul(gt,mt,yt,bt,vt){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+vt>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+vt>gt.length)throw new Error("target array is too small to hold result");for(let xt=0;xt<vt;xt++)gt[yt+xt]=mt[bt+xt]*gt[yt+xt]}};class ut{static splitShape(mt,yt,bt,vt){if(bt.length===0){if(!vt)throw new Error("need to know number of outputs when the 'split' attribute is not specified");ut.determineSplit(mt[yt],vt,bt)}const xt=[],wt=[0];for(let St=0;St<bt.length;++St){St!==0&&wt.push(wt[St-1]+bt[St-1]);const Et=mt.slice();Et[yt]=bt[St],xt.push(Et)}return[xt,wt]}static determineSplit(mt,yt,bt){if(mt%yt!=0)throw new Error("cannot split tensor to equal sized parts");for(let vt=0;vt<yt;++vt)bt.push(mt/yt)}}_.SplitUtil=ut;class ht{static calcReduce(mt,yt,bt,vt,xt){const wt=mt.dims.slice(0);yt.length===0&&wt.forEach((At,Ct)=>yt.push(Ct));const St=ht.calcReduceShape(wt,yt,!0),Et=it.size(St),_t=new at.Tensor(St,mt.type),Tt=it.computeStrides(St),Rt=it.computeStrides(wt),Ot=new Array(wt.length);for(let At=0;At<Et;At++){const Ct=it.offsetToIndices(At,Tt);ct.fillIndex(Ct,wt,Ot),_t.set(Ct,ht.calcReduceByAxis(mt.numberData,yt,wt,0,it.indicesToOffset(Ot,Rt),vt,xt))}return bt?_t:new at.Tensor(ht.calcReduceShape(wt,yt,bt),_t.type,void 0,void 0,_t.data,_t.dataId)}static calcReduceByAxis(mt,yt,bt,vt,xt,wt,St){let Et=0;if(vt>=yt.length)return wt(mt[xt]);const _t=yt[vt],Tt=_t>=bt.length?1:it.size(bt.slice(_t+1));for(let Rt=0;Rt<bt[_t];Rt++)Et=Rt===0?ht.calcReduceByAxis(mt,yt,bt,vt+1,xt,wt,St):St(Et,ht.calcReduceByAxis(mt,yt,bt,vt+1,xt,wt,St)),xt+=Tt;return Et}static calcReduceShape(mt,yt,bt){const vt=mt.slice();for(let xt=0;xt<yt.length;xt++)vt[yt[xt]]=bt?1:0;return vt.filter(xt=>xt!==0)}}_.ReduceUtil=ht;class ft{static adjustPoolAttributes(mt,yt,bt,vt,xt,wt){if(!mt&&bt.length!==yt.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(mt)for(let St=0;St<yt.length-2;St++)St>=bt.length?bt.push(yt[St+2]):bt[St]=yt[St+2];for(let St=0;St<bt.length;St++)if(St<vt.length){if(vt[St]<0)throw new Error("strides should be greater than or equal to 1")}else vt.push(1);for(let St=0;St<bt.length;St++)if(St<xt.length){if(xt[St]<0)throw new Error("dilations should be greater than or equal to 1")}else xt.push(1);for(let St=0;St<2*bt.length;St++)if(St<wt.length){if(wt[St]<0)throw new Error("pad should be greater than or equal to 1")}else wt.push(0);for(let St=0;St<bt.length;St++){if(bt[St]<=0)throw new Error("kernel shapes need to be greater than 0");if(wt[St]>=bt[St]||wt[St+bt.length]>=bt[St])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(mt,yt,bt,vt,xt,wt){if(wt){if(xt.length!==2*(mt.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(yt.length!==mt.length-2)throw new Error("length of strides should be the length of data dimensions");if(vt.length!==mt.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let St=0;St<mt.length-2;St++)ft.adjustPadAndReturnShape(mt[St+2],yt[St],bt[St],vt[St],xt,St,St+mt.length-2,wt)}}static computePoolOutputShape(mt,yt,bt,vt,xt,wt,St){if(yt.length<=0)throw new Error("input shape must be of size greater than 0");const Et=[yt[0],yt[1]];return ft.computeShapeHelper(mt,yt,Et,bt,vt,xt,wt,St),Et}static computeConvOutputShape(mt,yt,bt,vt,xt,wt,St){if(mt.length<=0||yt.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const Et=[mt[0],yt[0]];return ft.computeShapeHelper(!1,mt,Et,bt,vt,xt,wt,St),Et}static computeShapeHelper(mt,yt,bt,vt,xt,wt,St,Et){if(mt)for(let _t=0;_t<yt.length-2;_t++)bt.push(1);else for(let _t=0;_t<yt.length-2;_t++)bt.push(ft.adjustPadAndReturnShape(yt[_t+2],vt[_t],xt[_t],wt[_t],St,_t,_t+yt.length-2,Et))}static adjustPadAndReturnShape(mt,yt,bt,vt,xt,wt,St,Et){const _t=bt*(vt-1)+1;if(!Et||Et==="NOTSET")return Math.floor((mt+xt[wt]+xt[St]-_t)/yt+1);switch(Et){case"VALID":return xt[wt]=0,xt[St]=0,Math.floor((mt-_t)/yt+1);case"SAME_LOWER":case"SAME_UPPER":if(bt!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const Tt=((mt+yt-1)/yt-1)*yt+vt-mt;return xt[wt]=Math.floor(Et==="SAME_LOWER"?(Tt+1)/2:Tt/2),xt[St]=Tt-xt[wt],Math.floor((mt+Tt-vt)/yt+1)}default:throw new Error("Unsupported AutoPad type")}}}_.PoolConvUtil=ft,_.MIN_CLIP=-34028234663852886e22,_.MAX_CLIP=34028234663852886e22,_.decodeUtf8String=function(gt){return new TextDecoder().decode(gt)}},7967:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.iterateExtraOptions=void 0,_.iterateExtraOptions=(et,tt,rt,nt)=>{if(typeof et=="object"&&et!==null){if(rt.has(et))throw new Error("Circular reference in options");rt.add(et)}Object.entries(et).forEach(([ot,at])=>{const lt=tt?tt+ot:ot;if(typeof at=="object")(0,_.iterateExtraOptions)(at,lt+".",rt,nt);else if(typeof at=="string"||typeof at=="number")nt(lt,at.toString());else{if(typeof at!="boolean")throw new Error("Can't handle extra config type: "+typeof at);nt(lt,at?"1":"0")}})}},2157:function(_e,_,et){var tt,rt=this&&this.__createBinding||(Object.create?function(Tt,Rt,Ot,At){At===void 0&&(At=Ot);var Ct=Object.getOwnPropertyDescriptor(Rt,Ot);Ct&&!("get"in Ct?!Rt.__esModule:Ct.writable||Ct.configurable)||(Ct={enumerable:!0,get:function(){return Rt[Ot]}}),Object.defineProperty(Tt,At,Ct)}:function(Tt,Rt,Ot,At){At===void 0&&(At=Ot),Tt[At]=Rt[Ot]}),nt=this&&this.__setModuleDefault||(Object.create?function(Tt,Rt){Object.defineProperty(Tt,"default",{enumerable:!0,value:Rt})}:function(Tt,Rt){Tt.default=Rt}),ot=this&&this.__importStar||function(Tt){if(Tt&&Tt.__esModule)return Tt;var Rt={};if(Tt!=null)for(var Ot in Tt)Ot!=="default"&&Object.prototype.hasOwnProperty.call(Tt,Ot)&&rt(Rt,Tt,Ot);return nt(Rt,Tt),Rt};Object.defineProperty(_,"__esModule",{value:!0}),_.endProfiling=_.run=_.releaseSession=_.createSession=_.createSessionFinalize=_.createSessionAllocate=_.initOrt=_.initWasm=void 0;const at=et(1670),lt=ot(et(349)),ct=et(6361),dt=()=>!!at.env.wasm.proxy&&typeof document<"u";let st,it,ut,ht=!1,ft=!1,gt=!1;const mt=[],yt=[],bt=[],vt=[],xt=[],wt=[],St=()=>{if(ht||!ft||gt||!st)throw new Error("worker not ready")},Et=Tt=>{switch(Tt.data.type){case"init-wasm":ht=!1,Tt.data.err?(gt=!0,it[1](Tt.data.err)):(ft=!0,it[0]());break;case"init-ort":Tt.data.err?ut[1](Tt.data.err):ut[0]();break;case"create_allocate":Tt.data.err?mt.shift()[1](Tt.data.err):mt.shift()[0](Tt.data.out);break;case"create_finalize":Tt.data.err?yt.shift()[1](Tt.data.err):yt.shift()[0](Tt.data.out);break;case"create":Tt.data.err?bt.shift()[1](Tt.data.err):bt.shift()[0](Tt.data.out);break;case"release":Tt.data.err?vt.shift()[1](Tt.data.err):vt.shift()[0]();break;case"run":Tt.data.err?xt.shift()[1](Tt.data.err):xt.shift()[0](Tt.data.out);break;case"end-profiling":Tt.data.err?wt.shift()[1](Tt.data.err):wt.shift()[0]()}},_t=typeof document<"u"?(tt=document==null?void 0:document.currentScript)===null||tt===void 0?void 0:tt.src:void 0;_.initWasm=async()=>{if(dt()){if(ft)return;if(ht)throw new Error("multiple calls to 'initWasm()' detected.");if(gt)throw new Error("previous call to 'initWasm()' failed.");return ht=!0,at.env.wasm.wasmPaths===void 0&&_t&&_t.indexOf("blob:")!==0&&(at.env.wasm.wasmPaths=_t.substr(0,+_t.lastIndexOf("/")+1)),new Promise((Tt,Rt)=>{st==null||st.terminate(),st=et(9710).Z(),st.onmessage=Et,it=[Tt,Rt];const Ot={type:"init-wasm",in:at.env.wasm};st.postMessage(Ot)})}return(0,ct.initializeWebAssembly)(at.env.wasm)},_.initOrt=async(Tt,Rt)=>{if(dt())return St(),new Promise((Ot,At)=>{ut=[Ot,At];const Ct={type:"init-ort",in:{numThreads:Tt,loggingLevel:Rt}};st.postMessage(Ct)});lt.initOrt(Tt,Rt)},_.createSessionAllocate=async Tt=>dt()?(St(),new Promise((Rt,Ot)=>{mt.push([Rt,Ot]);const At={type:"create_allocate",in:{model:Tt}};st.postMessage(At,[Tt.buffer])})):lt.createSessionAllocate(Tt),_.createSessionFinalize=async(Tt,Rt)=>dt()?(St(),new Promise((Ot,At)=>{yt.push([Ot,At]);const Ct={type:"create_finalize",in:{modeldata:Tt,options:Rt}};st.postMessage(Ct)})):lt.createSessionFinalize(Tt,Rt),_.createSession=async(Tt,Rt)=>dt()?(St(),new Promise((Ot,At)=>{bt.push([Ot,At]);const Ct={type:"create",in:{model:Tt,options:Rt}};st.postMessage(Ct,[Tt.buffer])})):lt.createSession(Tt,Rt),_.releaseSession=async Tt=>{if(dt())return St(),new Promise((Rt,Ot)=>{vt.push([Rt,Ot]);const At={type:"release",in:Tt};st.postMessage(At)});lt.releaseSession(Tt)},_.run=async(Tt,Rt,Ot,At,Ct)=>dt()?(St(),new Promise(($t,Mt)=>{xt.push([$t,Mt]);const Dt={type:"run",in:{sessionId:Tt,inputIndices:Rt,inputs:Ot,outputIndices:At,options:Ct}};st.postMessage(Dt,lt.extractTransferableBuffers(Ot))})):lt.run(Tt,Rt,Ot,At,Ct),_.endProfiling=async Tt=>{if(dt())return St(),new Promise((Rt,Ot)=>{wt.push([Rt,Ot]);const At={type:"end-profiling",in:Tt};st.postMessage(At)});lt.endProfiling(Tt)}},586:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.setRunOptions=void 0;const tt=et(7967),rt=et(4983),nt=et(6361);_.setRunOptions=ot=>{const at=(0,nt.getInstance)();let lt=0;const ct=[],dt=ot||{};try{if((ot==null?void 0:ot.logSeverityLevel)===void 0)dt.logSeverityLevel=2;else if(typeof ot.logSeverityLevel!="number"||!Number.isInteger(ot.logSeverityLevel)||ot.logSeverityLevel<0||ot.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${ot.logSeverityLevel}`);if((ot==null?void 0:ot.logVerbosityLevel)===void 0)dt.logVerbosityLevel=0;else if(typeof ot.logVerbosityLevel!="number"||!Number.isInteger(ot.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${ot.logVerbosityLevel}`);(ot==null?void 0:ot.terminate)===void 0&&(dt.terminate=!1);let st=0;if((ot==null?void 0:ot.tag)!==void 0&&(st=(0,rt.allocWasmString)(ot.tag,ct)),lt=at._OrtCreateRunOptions(dt.logSeverityLevel,dt.logVerbosityLevel,!!dt.terminate,st),lt===0)throw new Error("Can't create run options");return(ot==null?void 0:ot.extra)!==void 0&&(0,tt.iterateExtraOptions)(ot.extra,"",new WeakSet,(it,ut)=>{const ht=(0,rt.allocWasmString)(it,ct),ft=(0,rt.allocWasmString)(ut,ct);if(at._OrtAddRunConfigEntry(lt,ht,ft)!==0)throw new Error(`Can't set a run config entry: ${it} - ${ut}`)}),[lt,ct]}catch(st){throw lt!==0&&at._OrtReleaseRunOptions(lt),ct.forEach(at._free),st}}},2306:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.OnnxruntimeWebAssemblySessionHandler=void 0;const tt=et(2806),rt=et(1670),nt=et(2850),ot=et(2157);let at;_.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(lt){const ct=await fetch(lt),dt=await ct.arrayBuffer();return(0,ot.createSessionAllocate)(new Uint8Array(dt))}async loadModel(lt,ct){if(at||(await(0,ot.initOrt)(rt.env.wasm.numThreads,(dt=>{switch(dt){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${dt}`)}})(rt.env.logLevel)),at=!0),typeof lt=="string")if(typeof fetch>"u"){const dt=await(0,nt.promisify)(tt.readFile)(lt);[this.sessionId,this.inputNames,this.outputNames]=await(0,ot.createSession)(dt,ct)}else{const dt=await this.createSessionAllocate(lt);[this.sessionId,this.inputNames,this.outputNames]=await(0,ot.createSessionFinalize)(dt,ct)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,ot.createSession)(lt,ct)}async dispose(){return(0,ot.releaseSession)(this.sessionId)}async run(lt,ct,dt){const st=[],it=[];Object.entries(lt).forEach(gt=>{const mt=gt[0],yt=gt[1],bt=this.inputNames.indexOf(mt);if(bt===-1)throw new Error(`invalid input '${mt}'`);st.push(yt),it.push(bt)});const ut=[];Object.entries(ct).forEach(gt=>{const mt=gt[0],yt=this.outputNames.indexOf(mt);if(yt===-1)throw new Error(`invalid output '${mt}'`);ut.push(yt)});const ht=await(0,ot.run)(this.sessionId,it,st.map(gt=>[gt.type,gt.dims,gt.data]),ut,dt),ft={};for(let gt=0;gt<ht.length;gt++)ft[this.outputNames[ut[gt]]]=new rt.Tensor(ht[gt][0],ht[gt][2],ht[gt][1]);return ft}startProfiling(){}endProfiling(){(0,ot.endProfiling)(this.sessionId)}}},4919:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.setSessionOptions=void 0;const tt=et(7967),rt=et(4983),nt=et(6361);_.setSessionOptions=ot=>{const at=(0,nt.getInstance)();let lt=0;const ct=[],dt=ot||{};(st=>{st.extra||(st.extra={}),st.extra.session||(st.extra.session={});const it=st.extra.session;it.use_ort_model_bytes_directly||(it.use_ort_model_bytes_directly="1")})(dt);try{(ot==null?void 0:ot.graphOptimizationLevel)===void 0&&(dt.graphOptimizationLevel="all");const st=(ht=>{switch(ht){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${ht}`)}})(dt.graphOptimizationLevel);(ot==null?void 0:ot.enableCpuMemArena)===void 0&&(dt.enableCpuMemArena=!0),(ot==null?void 0:ot.enableMemPattern)===void 0&&(dt.enableMemPattern=!0),(ot==null?void 0:ot.executionMode)===void 0&&(dt.executionMode="sequential");const it=(ht=>{switch(ht){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${ht}`)}})(dt.executionMode);let ut=0;if((ot==null?void 0:ot.logId)!==void 0&&(ut=(0,rt.allocWasmString)(ot.logId,ct)),(ot==null?void 0:ot.logSeverityLevel)===void 0)dt.logSeverityLevel=2;else if(typeof ot.logSeverityLevel!="number"||!Number.isInteger(ot.logSeverityLevel)||ot.logSeverityLevel<0||ot.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${ot.logSeverityLevel}`);if((ot==null?void 0:ot.logVerbosityLevel)===void 0)dt.logVerbosityLevel=0;else if(typeof ot.logVerbosityLevel!="number"||!Number.isInteger(ot.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${ot.logVerbosityLevel}`);if((ot==null?void 0:ot.enableProfiling)===void 0&&(dt.enableProfiling=!1),lt=at._OrtCreateSessionOptions(st,!!dt.enableCpuMemArena,!!dt.enableMemPattern,it,!!dt.enableProfiling,0,ut,dt.logSeverityLevel,dt.logVerbosityLevel),lt===0)throw new Error("Can't create session options");return ot!=null&&ot.executionProviders&&((ht,ft,gt)=>{for(const mt of ft){let yt=typeof mt=="string"?mt:mt.name;switch(yt){case"xnnpack":yt="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${yt}`)}const bt=(0,rt.allocWasmString)(yt,gt);if((0,nt.getInstance)()._OrtAppendExecutionProvider(ht,bt)!==0)throw new Error(`Can't append execution provider: ${yt}`)}})(lt,ot.executionProviders,ct),(ot==null?void 0:ot.extra)!==void 0&&(0,tt.iterateExtraOptions)(ot.extra,"",new WeakSet,(ht,ft)=>{const gt=(0,rt.allocWasmString)(ht,ct),mt=(0,rt.allocWasmString)(ft,ct);if(at._OrtAddSessionConfigEntry(lt,gt,mt)!==0)throw new Error(`Can't set a session config entry: ${ht} - ${ft}`)}),[lt,ct]}catch(st){throw lt!==0&&at._OrtReleaseSessionOptions(lt),ct.forEach(at._free),st}}},4983:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.allocWasmString=void 0;const tt=et(6361);_.allocWasmString=(rt,nt)=>{const ot=(0,tt.getInstance)(),at=ot.lengthBytesUTF8(rt)+1,lt=ot._malloc(at);return ot.stringToUTF8(rt,lt,at),nt.push(lt),lt}},349:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.extractTransferableBuffers=_.endProfiling=_.run=_.releaseSession=_.createSession=_.createSessionFinalize=_.createSessionAllocate=_.initOrt=void 0;const tt=et(586),rt=et(4919),nt=et(4983),ot=et(6361);_.initOrt=(st,it)=>{const ut=(0,ot.getInstance)()._OrtInit(st,it);if(ut!==0)throw new Error(`Can't initialize onnxruntime. error code = ${ut}`)};const at=new Map;_.createSessionAllocate=st=>{const it=(0,ot.getInstance)(),ut=it._malloc(st.byteLength);return it.HEAPU8.set(st,ut),[ut,st.byteLength]},_.createSessionFinalize=(st,it)=>{const ut=(0,ot.getInstance)();let ht=0,ft=0,gt=[];try{if([ft,gt]=(0,rt.setSessionOptions)(it),ht=ut._OrtCreateSession(st[0],st[1],ft),ht===0)throw new Error("Can't create a session")}finally{ut._free(st[0]),ut._OrtReleaseSessionOptions(ft),gt.forEach(ut._free)}const mt=ut._OrtGetInputCount(ht),yt=ut._OrtGetOutputCount(ht),bt=[],vt=[],xt=[],wt=[];for(let St=0;St<mt;St++){const Et=ut._OrtGetInputName(ht,St);if(Et===0)throw new Error("Can't get an input name");vt.push(Et),bt.push(ut.UTF8ToString(Et))}for(let St=0;St<yt;St++){const Et=ut._OrtGetOutputName(ht,St);if(Et===0)throw new Error("Can't get an output name");wt.push(Et),xt.push(ut.UTF8ToString(Et))}return at.set(ht,[ht,vt,wt]),[ht,bt,xt]},_.createSession=(st,it)=>{const ut=(0,_.createSessionAllocate)(st);return(0,_.createSessionFinalize)(ut,it)},_.releaseSession=st=>{const it=(0,ot.getInstance)(),ut=at.get(st);if(!ut)throw new Error("invalid session id");const ht=ut[0],ft=ut[1],gt=ut[2];ft.forEach(it._OrtFree),gt.forEach(it._OrtFree),it._OrtReleaseSession(ht),at.delete(st)};const lt=st=>{switch(st){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${st}`)}},ct=st=>{switch(st){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${st}`)}},dt=st=>{switch(st){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${st}`)}};_.run=(st,it,ut,ht,ft)=>{const gt=(0,ot.getInstance)(),mt=at.get(st);if(!mt)throw new Error("invalid session id");const yt=mt[0],bt=mt[1],vt=mt[2],xt=it.length,wt=ht.length;let St=0,Et=[];const _t=[],Tt=[];try{[St,Et]=(0,tt.setRunOptions)(ft);for(let Mt=0;Mt<xt;Mt++){const Dt=ut[Mt][0],Nt=ut[Mt][1],Bt=ut[Mt][2];let Ut,Vt;if(Array.isArray(Bt)){Vt=4*Bt.length,Ut=gt._malloc(Vt),Tt.push(Ut);let nr=Ut/4;for(let ir=0;ir<Bt.length;ir++){if(typeof Bt[ir]!="string")throw new TypeError(`tensor data at index ${ir} is not a string`);gt.HEAPU32[nr++]=(0,nt.allocWasmString)(Bt[ir],Tt)}}else Vt=Bt.byteLength,Ut=gt._malloc(Vt),Tt.push(Ut),gt.HEAPU8.set(new Uint8Array(Bt.buffer,Bt.byteOffset,Vt),Ut);const Jt=gt.stackSave(),lr=gt.stackAlloc(4*Nt.length);try{let nr=lr/4;Nt.forEach(cr=>gt.HEAP32[nr++]=cr);const ir=gt._OrtCreateTensor(lt(Dt),Ut,Vt,lr,Nt.length);if(ir===0)throw new Error("Can't create a tensor");_t.push(ir)}finally{gt.stackRestore(Jt)}}const Rt=gt.stackSave(),Ot=gt.stackAlloc(4*xt),At=gt.stackAlloc(4*xt),Ct=gt.stackAlloc(4*wt),$t=gt.stackAlloc(4*wt);try{let Mt=Ot/4,Dt=At/4,Nt=Ct/4,Bt=$t/4;for(let Jt=0;Jt<xt;Jt++)gt.HEAPU32[Mt++]=_t[Jt],gt.HEAPU32[Dt++]=bt[it[Jt]];for(let Jt=0;Jt<wt;Jt++)gt.HEAPU32[Nt++]=0,gt.HEAPU32[Bt++]=vt[ht[Jt]];let Ut=gt._OrtRun(yt,At,Ot,xt,$t,wt,Ct,St);const Vt=[];if(Ut===0)for(let Jt=0;Jt<wt;Jt++){const lr=gt.HEAPU32[Ct/4+Jt],nr=gt.stackSave(),ir=gt.stackAlloc(16);let cr,hr=0;try{if(Ut=gt._OrtGetTensorData(lr,ir,ir+4,ir+8,ir+12),Ut!==0)throw new Error(`Can't access output tensor data. error code = ${Ut}`);let Zt=ir/4;const Qt=gt.HEAPU32[Zt++];hr=gt.HEAPU32[Zt++];const rr=gt.HEAPU32[Zt++],ar=gt.HEAPU32[Zt++],pr=[];for(let mr=0;mr<ar;mr++)pr.push(gt.HEAPU32[rr/4+mr]);gt._OrtFree(rr);const ur=pr.length===0?1:pr.reduce((mr,Or)=>mr*Or);if(cr=ct(Qt),cr==="string"){const mr=[];let Or=hr/4;for(let $r=0;$r<ur;$r++){const Gr=gt.HEAPU32[Or++],Br=$r===ur-1?void 0:gt.HEAPU32[Or]-Gr;mr.push(gt.UTF8ToString(Gr,Br))}Vt.push([cr,pr,mr])}else{const mr=new(dt(cr))(ur);new Uint8Array(mr.buffer,mr.byteOffset,mr.byteLength).set(gt.HEAPU8.subarray(hr,hr+mr.byteLength)),Vt.push([cr,pr,mr])}}finally{gt.stackRestore(nr),cr==="string"&&hr&&gt._free(hr),gt._OrtReleaseTensor(lr)}}if(Ut===0)return Vt;throw new Error(`failed to call OrtRun(). error code = ${Ut}.`)}finally{gt.stackRestore(Rt)}}finally{_t.forEach(gt._OrtReleaseTensor),Tt.forEach(gt._free),gt._OrtReleaseRunOptions(St),Et.forEach(gt._free)}},_.endProfiling=st=>{const it=(0,ot.getInstance)(),ut=at.get(st);if(!ut)throw new Error("invalid session id");const ht=ut[0],ft=it._OrtEndProfiling(ht);if(ft===0)throw new Error("Can't get an profile file name");it._OrtFree(ft)},_.extractTransferableBuffers=st=>{const it=[];for(const ut of st){const ht=ut[2];!Array.isArray(ht)&&ht.buffer&&it.push(ht.buffer)}return it}},6361:function(_e,_,et){var tt=this&&this.__createBinding||(Object.create?function(ft,gt,mt,yt){yt===void 0&&(yt=mt);var bt=Object.getOwnPropertyDescriptor(gt,mt);bt&&!("get"in bt?!gt.__esModule:bt.writable||bt.configurable)||(bt={enumerable:!0,get:function(){return gt[mt]}}),Object.defineProperty(ft,yt,bt)}:function(ft,gt,mt,yt){yt===void 0&&(yt=mt),ft[yt]=gt[mt]}),rt=this&&this.__setModuleDefault||(Object.create?function(ft,gt){Object.defineProperty(ft,"default",{enumerable:!0,value:gt})}:function(ft,gt){ft.default=gt}),nt=this&&this.__importStar||function(ft){if(ft&&ft.__esModule)return ft;var gt={};if(ft!=null)for(var mt in ft)mt!=="default"&&Object.prototype.hasOwnProperty.call(ft,mt)&&tt(gt,ft,mt);return rt(gt,ft),gt},ot=this&&this.__importDefault||function(ft){return ft&&ft.__esModule?ft:{default:ft}};Object.defineProperty(_,"__esModule",{value:!0}),_.dispose=_.getInstance=_.initializeWebAssembly=void 0;const at=nt(et(6449)),lt=ot(et(932)),ct=et(3474);let dt,st=!1,it=!1,ut=!1;const ht=(ft,gt)=>gt?ft?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":ft?"ort-wasm-simd.wasm":"ort-wasm.wasm";_.initializeWebAssembly=async ft=>{if(st)return Promise.resolve();if(it)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(ut)throw new Error("previous call to 'initializeWebAssembly()' failed.");it=!0;const gt=ft.initTimeout,mt=ft.numThreads,yt=ft.simd,bt=mt>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),vt=yt&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),xt=typeof ft.wasmPaths=="string"?ft.wasmPaths:void 0,wt=ht(!1,bt),St=ht(vt,bt),Et=typeof ft.wasmPaths=="object"?ft.wasmPaths[St]:void 0;let _t=!1;const Tt=[];if(gt>0&&Tt.push(new Promise(Rt=>{setTimeout(()=>{_t=!0,Rt()},gt)})),Tt.push(new Promise((Rt,Ot)=>{const At=bt?ct:lt.default,Ct={locateFile:($t,Mt)=>bt&&$t.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([et(4154)],{type:"text/javascript"})):$t===wt?Et??(xt??Mt)+St:Mt+$t};if(bt)if(typeof Blob>"u")Ct.mainScriptUrlOrBlob=at.join("/","ort-wasm-threaded.js");else{const $t=`var ortWasmThreaded=(function(){var _scriptDir;return ${At.toString()}})();`;Ct.mainScriptUrlOrBlob=new Blob([$t],{type:"text/javascript"})}At(Ct).then($t=>{it=!1,st=!0,dt=$t,Rt()},$t=>{it=!1,ut=!0,Ot($t)})})),await Promise.race(Tt),_t)throw new Error(`WebAssembly backend initializing failed due to timeout: ${gt}ms`)},_.getInstance=()=>{if(st&&dt)return dt;throw new Error("WebAssembly is not initialized yet.")},_.dispose=()=>{var ft;!st||it||ut||(it=!0,(ft=dt.PThread)===null||ft===void 0||ft.terminateAllThreads(),dt=void 0,it=!1,st=!1,ut=!0)}},9710:(_e,_,et)=>{et.d(_,{Z:()=>nt});var tt=et(477),rt=et.n(tt);function nt(){return rt()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:_e=>{_e.exports=function(_,et,tt,rt){var nt=self||window;try{try{var ot;try{ot=new nt.Blob([_])}catch{(ot=new(nt.BlobBuilder||nt.WebKitBlobBuilder||nt.MozBlobBuilder||nt.MSBlobBuilder)).append(_),ot=ot.getBlob()}var at=nt.URL||nt.webkitURL,lt=at.createObjectURL(ot),ct=new nt[et](lt,tt);return at.revokeObjectURL(lt),ct}catch{return new nt[et]("data:application/javascript,".concat(encodeURIComponent(_)),tt)}}catch{if(!rt)throw Error("Inline worker is not supported");return new nt[et](rt,tt)}}},4154:_e=>{_e.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:_e=>{_e.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(_e,_,et)=>{et.r(_),et.d(_,{flatbuffers:()=>tt});var tt={};tt.Offset,tt.Table,tt.SIZEOF_SHORT=2,tt.SIZEOF_INT=4,tt.FILE_IDENTIFIER_LENGTH=4,tt.SIZE_PREFIX_LENGTH=4,tt.Encoding={UTF8_BYTES:1,UTF16_STRING:2},tt.int32=new Int32Array(2),tt.float32=new Float32Array(tt.int32.buffer),tt.float64=new Float64Array(tt.int32.buffer),tt.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,tt.Long=function(rt,nt){this.low=0|rt,this.high=0|nt},tt.Long.create=function(rt,nt){return rt==0&&nt==0?tt.Long.ZERO:new tt.Long(rt,nt)},tt.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},tt.Long.prototype.equals=function(rt){return this.low==rt.low&&this.high==rt.high},tt.Long.ZERO=new tt.Long(0,0),tt.Builder=function(rt){if(rt)nt=rt;else var nt=1024;this.bb=tt.ByteBuffer.allocate(nt),this.space=nt,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},tt.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},tt.Builder.prototype.forceDefaults=function(rt){this.force_defaults=rt},tt.Builder.prototype.dataBuffer=function(){return this.bb},tt.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},tt.Builder.prototype.prep=function(rt,nt){rt>this.minalign&&(this.minalign=rt);for(var ot=1+~(this.bb.capacity()-this.space+nt)&rt-1;this.space<ot+rt+nt;){var at=this.bb.capacity();this.bb=tt.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-at}this.pad(ot)},tt.Builder.prototype.pad=function(rt){for(var nt=0;nt<rt;nt++)this.bb.writeInt8(--this.space,0)},tt.Builder.prototype.writeInt8=function(rt){this.bb.writeInt8(this.space-=1,rt)},tt.Builder.prototype.writeInt16=function(rt){this.bb.writeInt16(this.space-=2,rt)},tt.Builder.prototype.writeInt32=function(rt){this.bb.writeInt32(this.space-=4,rt)},tt.Builder.prototype.writeInt64=function(rt){this.bb.writeInt64(this.space-=8,rt)},tt.Builder.prototype.writeFloat32=function(rt){this.bb.writeFloat32(this.space-=4,rt)},tt.Builder.prototype.writeFloat64=function(rt){this.bb.writeFloat64(this.space-=8,rt)},tt.Builder.prototype.addInt8=function(rt){this.prep(1,0),this.writeInt8(rt)},tt.Builder.prototype.addInt16=function(rt){this.prep(2,0),this.writeInt16(rt)},tt.Builder.prototype.addInt32=function(rt){this.prep(4,0),this.writeInt32(rt)},tt.Builder.prototype.addInt64=function(rt){this.prep(8,0),this.writeInt64(rt)},tt.Builder.prototype.addFloat32=function(rt){this.prep(4,0),this.writeFloat32(rt)},tt.Builder.prototype.addFloat64=function(rt){this.prep(8,0),this.writeFloat64(rt)},tt.Builder.prototype.addFieldInt8=function(rt,nt,ot){(this.force_defaults||nt!=ot)&&(this.addInt8(nt),this.slot(rt))},tt.Builder.prototype.addFieldInt16=function(rt,nt,ot){(this.force_defaults||nt!=ot)&&(this.addInt16(nt),this.slot(rt))},tt.Builder.prototype.addFieldInt32=function(rt,nt,ot){(this.force_defaults||nt!=ot)&&(this.addInt32(nt),this.slot(rt))},tt.Builder.prototype.addFieldInt64=function(rt,nt,ot){!this.force_defaults&&nt.equals(ot)||(this.addInt64(nt),this.slot(rt))},tt.Builder.prototype.addFieldFloat32=function(rt,nt,ot){(this.force_defaults||nt!=ot)&&(this.addFloat32(nt),this.slot(rt))},tt.Builder.prototype.addFieldFloat64=function(rt,nt,ot){(this.force_defaults||nt!=ot)&&(this.addFloat64(nt),this.slot(rt))},tt.Builder.prototype.addFieldOffset=function(rt,nt,ot){(this.force_defaults||nt!=ot)&&(this.addOffset(nt),this.slot(rt))},tt.Builder.prototype.addFieldStruct=function(rt,nt,ot){nt!=ot&&(this.nested(nt),this.slot(rt))},tt.Builder.prototype.nested=function(rt){if(rt!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},tt.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},tt.Builder.prototype.slot=function(rt){this.vtable[rt]=this.offset()},tt.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},tt.Builder.growByteBuffer=function(rt){var nt=rt.capacity();if(3221225472&nt)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var ot=nt<<1,at=tt.ByteBuffer.allocate(ot);return at.setPosition(ot-nt),at.bytes().set(rt.bytes(),ot-nt),at},tt.Builder.prototype.addOffset=function(rt){this.prep(tt.SIZEOF_INT,0),this.writeInt32(this.offset()-rt+tt.SIZEOF_INT)},tt.Builder.prototype.startObject=function(rt){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=rt;for(var nt=0;nt<rt;nt++)this.vtable[nt]=0;this.isNested=!0,this.object_start=this.offset()},tt.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var rt=this.offset(),nt=this.vtable_in_use-1;nt>=0&&this.vtable[nt]==0;nt--);for(var ot=nt+1;nt>=0;nt--)this.addInt16(this.vtable[nt]!=0?rt-this.vtable[nt]:0);this.addInt16(rt-this.object_start);var at=(ot+2)*tt.SIZEOF_SHORT;this.addInt16(at);var lt=0,ct=this.space;e:for(nt=0;nt<this.vtables.length;nt++){var dt=this.bb.capacity()-this.vtables[nt];if(at==this.bb.readInt16(dt)){for(var st=tt.SIZEOF_SHORT;st<at;st+=tt.SIZEOF_SHORT)if(this.bb.readInt16(ct+st)!=this.bb.readInt16(dt+st))continue e;lt=this.vtables[nt];break}}return lt?(this.space=this.bb.capacity()-rt,this.bb.writeInt32(this.space,lt-rt)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-rt,this.offset()-rt)),this.isNested=!1,rt},tt.Builder.prototype.finish=function(rt,nt,ot){var at=ot?tt.SIZE_PREFIX_LENGTH:0;if(nt){var lt=nt;if(this.prep(this.minalign,tt.SIZEOF_INT+tt.FILE_IDENTIFIER_LENGTH+at),lt.length!=tt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+tt.FILE_IDENTIFIER_LENGTH);for(var ct=tt.FILE_IDENTIFIER_LENGTH-1;ct>=0;ct--)this.writeInt8(lt.charCodeAt(ct))}this.prep(this.minalign,tt.SIZEOF_INT+at),this.addOffset(rt),at&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},tt.Builder.prototype.finishSizePrefixed=function(rt,nt){this.finish(rt,nt,!0)},tt.Builder.prototype.requiredField=function(rt,nt){var ot=this.bb.capacity()-rt,at=ot-this.bb.readInt32(ot);if(this.bb.readInt16(at+nt)==0)throw new Error("FlatBuffers: field "+nt+" must be set")},tt.Builder.prototype.startVector=function(rt,nt,ot){this.notNested(),this.vector_num_elems=nt,this.prep(tt.SIZEOF_INT,rt*nt),this.prep(ot,rt*nt)},tt.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},tt.Builder.prototype.createString=function(rt){if(rt instanceof Uint8Array)var nt=rt;else{nt=[];for(var ot=0;ot<rt.length;){var at,lt=rt.charCodeAt(ot++);(at=lt<55296||lt>=56320?lt:(lt<<10)+rt.charCodeAt(ot++)+-56613888)<128?nt.push(at):(at<2048?nt.push(at>>6&31|192):(at<65536?nt.push(at>>12&15|224):nt.push(at>>18&7|240,at>>12&63|128),nt.push(at>>6&63|128)),nt.push(63&at|128))}}this.addInt8(0),this.startVector(1,nt.length,1),this.bb.setPosition(this.space-=nt.length),ot=0;for(var ct=this.space,dt=this.bb.bytes();ot<nt.length;ot++)dt[ct++]=nt[ot];return this.endVector()},tt.Builder.prototype.createLong=function(rt,nt){return tt.Long.create(rt,nt)},tt.ByteBuffer=function(rt){this.bytes_=rt,this.position_=0},tt.ByteBuffer.allocate=function(rt){return new tt.ByteBuffer(new Uint8Array(rt))},tt.ByteBuffer.prototype.clear=function(){this.position_=0},tt.ByteBuffer.prototype.bytes=function(){return this.bytes_},tt.ByteBuffer.prototype.position=function(){return this.position_},tt.ByteBuffer.prototype.setPosition=function(rt){this.position_=rt},tt.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},tt.ByteBuffer.prototype.readInt8=function(rt){return this.readUint8(rt)<<24>>24},tt.ByteBuffer.prototype.readUint8=function(rt){return this.bytes_[rt]},tt.ByteBuffer.prototype.readInt16=function(rt){return this.readUint16(rt)<<16>>16},tt.ByteBuffer.prototype.readUint16=function(rt){return this.bytes_[rt]|this.bytes_[rt+1]<<8},tt.ByteBuffer.prototype.readInt32=function(rt){return this.bytes_[rt]|this.bytes_[rt+1]<<8|this.bytes_[rt+2]<<16|this.bytes_[rt+3]<<24},tt.ByteBuffer.prototype.readUint32=function(rt){return this.readInt32(rt)>>>0},tt.ByteBuffer.prototype.readInt64=function(rt){return new tt.Long(this.readInt32(rt),this.readInt32(rt+4))},tt.ByteBuffer.prototype.readUint64=function(rt){return new tt.Long(this.readUint32(rt),this.readUint32(rt+4))},tt.ByteBuffer.prototype.readFloat32=function(rt){return tt.int32[0]=this.readInt32(rt),tt.float32[0]},tt.ByteBuffer.prototype.readFloat64=function(rt){return tt.int32[tt.isLittleEndian?0:1]=this.readInt32(rt),tt.int32[tt.isLittleEndian?1:0]=this.readInt32(rt+4),tt.float64[0]},tt.ByteBuffer.prototype.writeInt8=function(rt,nt){this.bytes_[rt]=nt},tt.ByteBuffer.prototype.writeUint8=function(rt,nt){this.bytes_[rt]=nt},tt.ByteBuffer.prototype.writeInt16=function(rt,nt){this.bytes_[rt]=nt,this.bytes_[rt+1]=nt>>8},tt.ByteBuffer.prototype.writeUint16=function(rt,nt){this.bytes_[rt]=nt,this.bytes_[rt+1]=nt>>8},tt.ByteBuffer.prototype.writeInt32=function(rt,nt){this.bytes_[rt]=nt,this.bytes_[rt+1]=nt>>8,this.bytes_[rt+2]=nt>>16,this.bytes_[rt+3]=nt>>24},tt.ByteBuffer.prototype.writeUint32=function(rt,nt){this.bytes_[rt]=nt,this.bytes_[rt+1]=nt>>8,this.bytes_[rt+2]=nt>>16,this.bytes_[rt+3]=nt>>24},tt.ByteBuffer.prototype.writeInt64=function(rt,nt){this.writeInt32(rt,nt.low),this.writeInt32(rt+4,nt.high)},tt.ByteBuffer.prototype.writeUint64=function(rt,nt){this.writeUint32(rt,nt.low),this.writeUint32(rt+4,nt.high)},tt.ByteBuffer.prototype.writeFloat32=function(rt,nt){tt.float32[0]=nt,this.writeInt32(rt,tt.int32[0])},tt.ByteBuffer.prototype.writeFloat64=function(rt,nt){tt.float64[0]=nt,this.writeInt32(rt,tt.int32[tt.isLittleEndian?0:1]),this.writeInt32(rt+4,tt.int32[tt.isLittleEndian?1:0])},tt.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+tt.SIZEOF_INT+tt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var rt="",nt=0;nt<tt.FILE_IDENTIFIER_LENGTH;nt++)rt+=String.fromCharCode(this.readInt8(this.position_+tt.SIZEOF_INT+nt));return rt},tt.ByteBuffer.prototype.__offset=function(rt,nt){var ot=rt-this.readInt32(rt);return nt<this.readInt16(ot)?this.readInt16(ot+nt):0},tt.ByteBuffer.prototype.__union=function(rt,nt){return rt.bb_pos=nt+this.readInt32(nt),rt.bb=this,rt},tt.ByteBuffer.prototype.__string=function(rt,nt){rt+=this.readInt32(rt);var ot=this.readInt32(rt),at="",lt=0;if(rt+=tt.SIZEOF_INT,nt===tt.Encoding.UTF8_BYTES)return this.bytes_.subarray(rt,rt+ot);for(;lt<ot;){var ct,dt=this.readUint8(rt+lt++);if(dt<192)ct=dt;else{var st=this.readUint8(rt+lt++);if(dt<224)ct=(31&dt)<<6|63&st;else{var it=this.readUint8(rt+lt++);ct=dt<240?(15&dt)<<12|(63&st)<<6|63&it:(7&dt)<<18|(63&st)<<12|(63&it)<<6|63&this.readUint8(rt+lt++)}}ct<65536?at+=String.fromCharCode(ct):(ct-=65536,at+=String.fromCharCode(55296+(ct>>10),56320+(1023&ct)))}return at},tt.ByteBuffer.prototype.__indirect=function(rt){return rt+this.readInt32(rt)},tt.ByteBuffer.prototype.__vector=function(rt){return rt+this.readInt32(rt)+tt.SIZEOF_INT},tt.ByteBuffer.prototype.__vector_len=function(rt){return this.readInt32(rt+this.readInt32(rt))},tt.ByteBuffer.prototype.__has_identifier=function(rt){if(rt.length!=tt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+tt.FILE_IDENTIFIER_LENGTH);for(var nt=0;nt<tt.FILE_IDENTIFIER_LENGTH;nt++)if(rt.charCodeAt(nt)!=this.readInt8(this.position_+tt.SIZEOF_INT+nt))return!1;return!0},tt.ByteBuffer.prototype.createLong=function(rt,nt){return tt.Long.create(rt,nt)}}},__webpack_module_cache__={};function __webpack_require__(_e){var _=__webpack_module_cache__[_e];if(_!==void 0)return _.exports;var et=__webpack_module_cache__[_e]={exports:{}};return __webpack_modules__[_e].call(et.exports,et,et.exports,__webpack_require__),et.exports}__webpack_require__.n=_e=>{var _=_e&&_e.__esModule?()=>_e.default:()=>_e;return __webpack_require__.d(_,{a:_}),_},__webpack_require__.d=(_e,_)=>{for(var et in _)__webpack_require__.o(_,et)&&!__webpack_require__.o(_e,et)&&Object.defineProperty(_e,et,{enumerable:!0,get:_[et]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(_e,_)=>Object.prototype.hasOwnProperty.call(_e,_),__webpack_require__.r=_e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())})(ortWeb_min);var ortWeb_minExports=ortWeb_min.exports,assetPath={};Object.defineProperty(assetPath,"__esModule",{value:!0});assetPath.baseAssetPath=void 0;const isWeb=typeof window<"u"&&typeof window.document<"u",currentScript=isWeb?window.document.currentScript:null;let basePath="/";currentScript&&(basePath=currentScript.src.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"));assetPath.baseAssetPath=basePath;var defaultModelFetcher$1={};Object.defineProperty(defaultModelFetcher$1,"__esModule",{value:!0});defaultModelFetcher$1.defaultModelFetcher=void 0;const defaultModelFetcher=_e=>fetch(_e).then(_=>_.arrayBuffer());defaultModelFetcher$1.defaultModelFetcher=defaultModelFetcher;var frameProcessor={},logging={};(function(_e){Object.defineProperty(_e,"__esModule",{value:!0}),_e.log=_e.LOG_PREFIX=void 0,_e.LOG_PREFIX="[VAD]";const _=["error","debug","warn"];function et(rt){return(...nt)=>{console[rt](_e.LOG_PREFIX,...nt)}}const tt=_.reduce((rt,nt)=>(rt[nt]=et(nt),rt),{});_e.log=tt})(logging);var messages={};Object.defineProperty(messages,"__esModule",{value:!0});messages.Message=void 0;var Message;(function(_e){_e.AudioFrame="AUDIO_FRAME",_e.SpeechStart="SPEECH_START",_e.VADMisfire="VAD_MISFIRE",_e.SpeechEnd="SPEECH_END",_e.SpeechStop="SPEECH_STOP"})(Message||(messages.Message=Message={}));Object.defineProperty(frameProcessor,"__esModule",{value:!0});frameProcessor.FrameProcessor=frameProcessor.validateOptions=frameProcessor.defaultV5FrameProcessorOptions=frameProcessor.defaultLegacyFrameProcessorOptions=void 0;const logging_1$3=logging,messages_1=messages,RECOMMENDED_FRAME_SAMPLES=[512,1024,1536];frameProcessor.defaultLegacyFrameProcessorOptions={positiveSpeechThreshold:.5,negativeSpeechThreshold:.5-.15,preSpeechPadFrames:1,redemptionFrames:8,frameSamples:1536,minSpeechFrames:3,submitUserSpeechOnPause:!1};frameProcessor.defaultV5FrameProcessorOptions={positiveSpeechThreshold:.5,negativeSpeechThreshold:.5-.15,preSpeechPadFrames:3,redemptionFrames:24,frameSamples:512,minSpeechFrames:9,submitUserSpeechOnPause:!1};function validateOptions(_e){RECOMMENDED_FRAME_SAMPLES.includes(_e.frameSamples)||logging_1$3.log.warn("You are using an unusual frame size"),(_e.positiveSpeechThreshold<0||_e.positiveSpeechThreshold>1)&&logging_1$3.log.error("positiveSpeechThreshold should be a number between 0 and 1"),(_e.negativeSpeechThreshold<0||_e.negativeSpeechThreshold>_e.positiveSpeechThreshold)&&logging_1$3.log.error("negativeSpeechThreshold should be between 0 and positiveSpeechThreshold"),_e.preSpeechPadFrames<0&&logging_1$3.log.error("preSpeechPadFrames should be positive"),_e.redemptionFrames<0&&logging_1$3.log.error("redemptionFrames should be positive")}frameProcessor.validateOptions=validateOptions;const concatArrays=_e=>{const _=_e.reduce((tt,rt)=>(tt.push(tt.at(-1)+rt.length),tt),[0]),et=new Float32Array(_.at(-1));return _e.forEach((tt,rt)=>{const nt=_[rt];et.set(tt,nt)}),et};class FrameProcessor{constructor(_,et,tt){this.modelProcessFunc=_,this.modelResetFunc=et,this.options=tt,this.speaking=!1,this.redemptionCounter=0,this.active=!1,this.reset=()=>{this.speaking=!1,this.audioBuffer=[],this.modelResetFunc(),this.redemptionCounter=0},this.pause=()=>(this.active=!1,this.options.submitUserSpeechOnPause?this.endSegment():(this.reset(),{})),this.resume=()=>{this.active=!0},this.endSegment=()=>{const rt=this.audioBuffer;this.audioBuffer=[];const nt=this.speaking;this.reset();const ot=rt.reduce((at,lt)=>at+ +lt.isSpeech,0);if(nt)if(ot>=this.options.minSpeechFrames){const at=concatArrays(rt.map(lt=>lt.frame));return{msg:messages_1.Message.SpeechEnd,audio:at}}else return{msg:messages_1.Message.VADMisfire};return{}},this.process=async rt=>{if(!this.active)return{};const nt=await this.modelProcessFunc(rt);if(this.audioBuffer.push({frame:rt,isSpeech:nt.isSpeech>=this.options.positiveSpeechThreshold}),nt.isSpeech>=this.options.positiveSpeechThreshold&&this.redemptionCounter&&(this.redemptionCounter=0),nt.isSpeech>=this.options.positiveSpeechThreshold&&!this.speaking)return this.speaking=!0,{probs:nt,msg:messages_1.Message.SpeechStart,frame:rt};if(nt.isSpeech<this.options.negativeSpeechThreshold&&this.speaking&&++this.redemptionCounter>=this.options.redemptionFrames){this.redemptionCounter=0,this.speaking=!1;const ot=this.audioBuffer;if(this.audioBuffer=[],ot.reduce((lt,ct)=>lt+ +ct.isSpeech,0)>=this.options.minSpeechFrames){const lt=concatArrays(ot.map(ct=>ct.frame));return{probs:nt,msg:messages_1.Message.SpeechEnd,audio:lt,frame:rt}}else return{probs:nt,msg:messages_1.Message.VADMisfire,frame:rt}}if(!this.speaking)for(;this.audioBuffer.length>this.options.preSpeechPadFrames;)this.audioBuffer.shift();return{probs:nt,frame:rt}},this.audioBuffer=[],this.reset()}}frameProcessor.FrameProcessor=FrameProcessor;var nonRealTimeVad={},models={},common={};Object.defineProperty(common,"__esModule",{value:!0});var legacy={},_a$1;Object.defineProperty(legacy,"__esModule",{value:!0});legacy.SileroLegacy=void 0;const logging_1$2=logging;class SileroLegacy{constructor(_,et,tt,rt,nt){this.ortInstance=_,this._session=et,this._h=tt,this._c=rt,this._sr=nt,this.reset_state=()=>{const ot=Array(128).fill(0);this._h=new this.ortInstance.Tensor("float32",ot,[2,1,64]),this._c=new this.ortInstance.Tensor("float32",ot,[2,1,64])},this.process=async ot=>{var it;const lt={input:new this.ortInstance.Tensor("float32",ot,[1,ot.length]),h:this._h,c:this._c,sr:this._sr},ct=await this._session.run(lt);this._h=ct.hn,this._c=ct.cn;const[dt]=(it=ct.output)==null?void 0:it.data;return{notSpeech:1-dt,isSpeech:dt}}}}legacy.SileroLegacy=SileroLegacy;_a$1=SileroLegacy;SileroLegacy.new=async(_e,_)=>{logging_1$2.log.debug("initializing vad");const et=await _(),tt=await _e.InferenceSession.create(et),rt=new _e.Tensor("int64",[16000n]),nt=Array(2*64).fill(0),ot=new _e.Tensor("float32",nt,[2,1,64]),at=new _e.Tensor("float32",nt,[2,1,64]);return logging_1$2.log.debug("vad is initialized"),new _a$1(_e,tt,ot,at,rt)};var v5={},_a;Object.defineProperty(v5,"__esModule",{value:!0});v5.SileroV5=void 0;const logging_1$1=logging;function getNewState(_e){const _=Array(256).fill(0);return new _e.Tensor("float32",_,[2,1,128])}class SileroV5{constructor(_,et,tt,rt){this._session=_,this._state=et,this._sr=tt,this.ortInstance=rt,this.reset_state=()=>{this._state=getNewState(this.ortInstance)},this.process=async nt=>{var st;const at={input:new this.ortInstance.Tensor("float32",nt,[1,nt.length]),state:this._state,sr:this._sr},lt=await this._session.run(at);this._state=lt.stateN;const[ct]=(st=lt.output)==null?void 0:st.data;return{notSpeech:1-ct,isSpeech:ct}}}}v5.SileroV5=SileroV5;_a=SileroV5;SileroV5.new=async(_e,_)=>{logging_1$1.log.debug("Loading VAD...");const et=await _(),tt=await _e.InferenceSession.create(et),rt=new _e.Tensor("int64",[16000n]),nt=getNewState(_e);return logging_1$1.log.debug("...finished loading VAD"),new _a(tt,nt,rt,_e)};(function(_e){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(nt,ot,at,lt){lt===void 0&&(lt=at);var ct=Object.getOwnPropertyDescriptor(ot,at);(!ct||("get"in ct?!ot.__esModule:ct.writable||ct.configurable))&&(ct={enumerable:!0,get:function(){return ot[at]}}),Object.defineProperty(nt,lt,ct)}:function(nt,ot,at,lt){lt===void 0&&(lt=at),nt[lt]=ot[at]}),et=commonjsGlobal&&commonjsGlobal.__exportStar||function(nt,ot){for(var at in nt)at!=="default"&&!Object.prototype.hasOwnProperty.call(ot,at)&&_(ot,nt,at)};Object.defineProperty(_e,"__esModule",{value:!0}),_e.SileroV5=_e.SileroLegacy=void 0,et(common,_e);var tt=legacy;Object.defineProperty(_e,"SileroLegacy",{enumerable:!0,get:function(){return tt.SileroLegacy}});var rt=v5;Object.defineProperty(_e,"SileroV5",{enumerable:!0,get:function(){return rt.SileroV5}})})(models);var resampler={};Object.defineProperty(resampler,"__esModule",{value:!0});resampler.Resampler=void 0;const logging_1=logging;class Resampler{constructor(_){this.options=_,this.process=et=>{const tt=[];for(const rt of et)for(this.inputBuffer.push(rt);this.hasEnoughDataForFrame();){const nt=this.generateOutputFrame();tt.push(nt)}return tt},this.stream=async function*(et){for(const tt of et)for(this.inputBuffer.push(tt);this.hasEnoughDataForFrame();)yield this.generateOutputFrame()},_.nativeSampleRate<16e3&&logging_1.log.error("nativeSampleRate is too low. Should have 16000 = targetSampleRate <= nativeSampleRate"),this.inputBuffer=[]}hasEnoughDataForFrame(){return this.inputBuffer.length*this.options.targetSampleRate/this.options.nativeSampleRate>=this.options.targetFrameSize}generateOutputFrame(){const _=new Float32Array(this.options.targetFrameSize);let et=0,tt=0;for(;et<this.options.targetFrameSize;){let rt=0,nt=0;for(;tt<Math.min(this.inputBuffer.length,(et+1)*this.options.nativeSampleRate/this.options.targetSampleRate);){const ot=this.inputBuffer[tt];ot!==void 0&&(rt+=ot,nt++),tt++}_[et]=rt/nt,et++}return this.inputBuffer=this.inputBuffer.slice(tt),_}}resampler.Resampler=Resampler;(function(_e){Object.defineProperty(_e,"__esModule",{value:!0}),_e.PlatformAgnosticNonRealTimeVAD=_e.defaultNonRealTimeVADOptions=void 0;const _=frameProcessor,et=messages,tt=models,rt=resampler;_e.defaultNonRealTimeVADOptions={..._.defaultLegacyFrameProcessorOptions,ortConfig:void 0};class nt{static async _new(at,lt,ct={}){const dt={..._e.defaultNonRealTimeVADOptions,...ct};dt.ortConfig!==void 0&&dt.ortConfig(lt);const st=new this(at,lt,dt);return await st.init(),st}constructor(at,lt,ct){this.modelFetcher=at,this.ort=lt,this.options=ct,this.init=async()=>{const dt=await tt.SileroLegacy.new(this.ort,this.modelFetcher);this.frameProcessor=new _.FrameProcessor(dt.process,dt.reset_state,{frameSamples:this.options.frameSamples,positiveSpeechThreshold:this.options.positiveSpeechThreshold,negativeSpeechThreshold:this.options.negativeSpeechThreshold,redemptionFrames:this.options.redemptionFrames,preSpeechPadFrames:this.options.preSpeechPadFrames,minSpeechFrames:this.options.minSpeechFrames,submitUserSpeechOnPause:this.options.submitUserSpeechOnPause}),this.frameProcessor.resume()},this.run=async function*(dt,st){const it={nativeSampleRate:st,targetSampleRate:16e3,targetFrameSize:this.options.frameSamples},ut=new rt.Resampler(it);let ht=0,ft=0,gt=0;for await(const bt of ut.stream(dt)){const{msg:vt,audio:xt}=await this.frameProcessor.process(bt);switch(vt){case et.Message.SpeechStart:ht=gt*this.options.frameSamples/16;break;case et.Message.SpeechEnd:ft=(gt+1)*this.options.frameSamples/16,yield{audio:xt,start:ht,end:ft};break}gt++}const{msg:mt,audio:yt}=this.frameProcessor.endSegment();mt==et.Message.SpeechEnd&&(yield{audio:yt,start:ht,end:gt*this.options.frameSamples/16})},(0,_.validateOptions)(ct)}}_e.PlatformAgnosticNonRealTimeVAD=nt})(nonRealTimeVad);var utils$3={};Object.defineProperty(utils$3,"__esModule",{value:!0});utils$3.audioFileToArray=utils$3.encodeWAV=utils$3.arrayBufferToBase64=utils$3.minFramesForTargetMS=void 0;function minFramesForTargetMS(_e,_,et=16e3){return Math.ceil(_e*et/1e3/_)}utils$3.minFramesForTargetMS=minFramesForTargetMS;function arrayBufferToBase64(_e){const _=new Uint8Array(_e),et=_.byteLength,tt=new Array(et);for(var rt=0;rt<et;rt++){const nt=_[rt];if(nt===void 0)break;tt[rt]=String.fromCharCode(nt)}return btoa(tt.join(""))}utils$3.arrayBufferToBase64=arrayBufferToBase64;function encodeWAV(_e,_=3,et=16e3,tt=1,rt=32){var nt=rt/8,ot=tt*nt,at=new ArrayBuffer(44+_e.length*nt),lt=new DataView(at);return writeString(lt,0,"RIFF"),lt.setUint32(4,36+_e.length*nt,!0),writeString(lt,8,"WAVE"),writeString(lt,12,"fmt "),lt.setUint32(16,16,!0),lt.setUint16(20,_,!0),lt.setUint16(22,tt,!0),lt.setUint32(24,et,!0),lt.setUint32(28,et*ot,!0),lt.setUint16(32,ot,!0),lt.setUint16(34,rt,!0),writeString(lt,36,"data"),lt.setUint32(40,_e.length*nt,!0),_===1?floatTo16BitPCM(lt,44,_e):writeFloat32(lt,44,_e),at}utils$3.encodeWAV=encodeWAV;function writeFloat32(_e,_,et){for(var tt=0;tt<et.length;tt++,_+=4)_e.setFloat32(_,et[tt],!0)}function floatTo16BitPCM(_e,_,et){for(var tt=0;tt<et.length;tt++,_+=2){var rt=Math.max(-1,Math.min(1,et[tt]));_e.setInt16(_,rt<0?rt*32768:rt*32767,!0)}}function writeString(_e,_,et){for(var tt=0;tt<et.length;tt++)_e.setUint8(_+tt,et.charCodeAt(tt))}async function audioFileToArray(_e){const _=new OfflineAudioContext(1,1,44100),et=new FileReader;let tt=null;if(await new Promise(ot=>{et.addEventListener("loadend",at=>{const lt=et.result;_.decodeAudioData(lt,ct=>{tt=ct,_.startRendering().then(dt=>{console.log("Rendering completed successfully"),ot()}).catch(dt=>{console.error(`Rendering failed: ${dt}`)})},ct=>{console.log(`Error with decoding audio data: ${ct}`)})}),et.readAsArrayBuffer(_e)}),tt===null)throw Error("some shit");let rt=tt,nt=new Float32Array(rt.length);for(let ot=0;ot<rt.length;ot++)for(let at=0;at<rt.numberOfChannels;at++)nt[ot]+=rt.getChannelData(at)[ot];return{audio:nt,sampleRate:rt.sampleRate}}utils$3.audioFileToArray=audioFileToArray;var realTimeVad={};(function(_e){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(mt,yt,bt,vt){vt===void 0&&(vt=bt);var xt=Object.getOwnPropertyDescriptor(yt,bt);(!xt||("get"in xt?!yt.__esModule:xt.writable||xt.configurable))&&(xt={enumerable:!0,get:function(){return yt[bt]}}),Object.defineProperty(mt,vt,xt)}:function(mt,yt,bt,vt){vt===void 0&&(vt=bt),mt[vt]=yt[bt]}),et=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(mt,yt){Object.defineProperty(mt,"default",{enumerable:!0,value:yt})}:function(mt,yt){mt.default=yt}),tt=commonjsGlobal&&commonjsGlobal.__importStar||function(mt){if(mt&&mt.__esModule)return mt;var yt={};if(mt!=null)for(var bt in mt)bt!=="default"&&Object.prototype.hasOwnProperty.call(mt,bt)&&_(yt,mt,bt);return et(yt,mt),yt};Object.defineProperty(_e,"__esModule",{value:!0}),_e.AudioNodeVAD=_e.MicVAD=_e.getDefaultRealTimeVADOptions=_e.ort=_e.DEFAULT_MODEL=void 0;const rt=tt(ortWeb_minExports),nt=defaultModelFetcher$1,ot=frameProcessor,at=logging,lt=messages,ct=models,dt=resampler;_e.DEFAULT_MODEL="legacy",_e.ort=rt;const st="vad.worklet.bundle.min.js",it="silero_vad_v5.onnx",ut="silero_vad_legacy.onnx",ht=mt=>({...mt==="v5"?ot.defaultV5FrameProcessorOptions:ot.defaultLegacyFrameProcessorOptions,onFrameProcessed:bt=>{},onVADMisfire:()=>{at.log.debug("VAD misfire")},onSpeechStart:()=>{at.log.debug("Detected speech start")},onSpeechEnd:()=>{at.log.debug("Detected speech end")},baseAssetPath:"https://cdn.jsdelivr.net/npm/@ricky0123/vad-web@0.0.22/dist/",onnxWASMBasePath:"https://cdn.jsdelivr.net/npm/onnxruntime-web@1.14.0/dist/",stream:void 0,ortConfig:void 0,model:_e.DEFAULT_MODEL,workletOptions:{}});_e.getDefaultRealTimeVADOptions=ht;class ft{static async new(yt={}){const bt={...(0,_e.getDefaultRealTimeVADOptions)(yt.model??_e.DEFAULT_MODEL),...yt};(0,ot.validateOptions)(bt);let vt;bt.stream===void 0?vt=await navigator.mediaDevices.getUserMedia({audio:{...bt.additionalAudioConstraints,channelCount:1,echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0}}):vt=bt.stream;const xt=new AudioContext,wt=new MediaStreamAudioSourceNode(xt,{mediaStream:vt}),St=await gt.new(xt,bt);return St.receive(wt),new ft(bt,xt,vt,St,wt)}constructor(yt,bt,vt,xt,wt,St=!1){this.options=yt,this.audioContext=bt,this.stream=vt,this.audioNodeVAD=xt,this.sourceNode=wt,this.listening=St,this.pause=()=>{this.audioNodeVAD.pause(),this.listening=!1},this.start=()=>{this.audioNodeVAD.start(),this.listening=!0},this.destroy=()=>{this.listening&&this.pause(),this.options.stream===void 0&&this.stream.getTracks().forEach(Et=>Et.stop()),this.sourceNode.disconnect(),this.audioNodeVAD.destroy(),this.audioContext.close()}}}_e.MicVAD=ft;class gt{static async new(yt,bt={}){const vt={...(0,_e.getDefaultRealTimeVADOptions)(bt.model??_e.DEFAULT_MODEL),...bt};(0,ot.validateOptions)(vt),_e.ort.env.wasm.wasmPaths=vt.onnxWASMBasePath,vt.ortConfig!==void 0&&vt.ortConfig(_e.ort);const xt=vt.model==="v5"?it:ut,wt=vt.baseAssetPath+xt,St=vt.model==="v5"?ct.SileroV5.new:ct.SileroLegacy.new;let Et;try{Et=await St(_e.ort,()=>(0,nt.defaultModelFetcher)(wt))}catch(Rt){throw console.error(`Encountered an error while loading model file ${wt}`),Rt}const _t=new ot.FrameProcessor(Et.process,Et.reset_state,{frameSamples:vt.frameSamples,positiveSpeechThreshold:vt.positiveSpeechThreshold,negativeSpeechThreshold:vt.negativeSpeechThreshold,redemptionFrames:vt.redemptionFrames,preSpeechPadFrames:vt.preSpeechPadFrames,minSpeechFrames:vt.minSpeechFrames,submitUserSpeechOnPause:vt.submitUserSpeechOnPause}),Tt=new gt(yt,vt,_t);return await Tt.setupAudioNode(),Tt}constructor(yt,bt,vt){this.ctx=yt,this.options=bt,this.bufferIndex=0,this.pause=()=>{const xt=this.frameProcessor.pause();this.handleFrameProcessorEvent(xt)},this.start=()=>{this.frameProcessor.resume()},this.receive=xt=>{xt.connect(this.audioNode)},this.processFrame=async xt=>{const wt=await this.frameProcessor.process(xt);this.handleFrameProcessorEvent(wt)},this.handleFrameProcessorEvent=xt=>{switch(xt.probs!==void 0&&this.options.onFrameProcessed(xt.probs,xt.frame),xt.msg){case lt.Message.SpeechStart:this.options.onSpeechStart();break;case lt.Message.VADMisfire:this.options.onVADMisfire();break;case lt.Message.SpeechEnd:this.options.onSpeechEnd(xt.audio);break}},this.destroy=()=>{var xt;this.audioNode instanceof AudioWorkletNode&&this.audioNode.port.postMessage({message:lt.Message.SpeechStop}),this.audioNode.disconnect(),(xt=this.gainNode)==null||xt.disconnect()},this.frameProcessor=vt}async setupAudioNode(){if("audioWorklet"in this.ctx&&typeof AudioWorkletNode=="function")try{const xt=this.options.baseAssetPath+st;await this.ctx.audioWorklet.addModule(xt);const wt=this.options.workletOptions??{};wt.processorOptions={...wt.processorOptions??{},frameSamples:this.options.frameSamples},this.audioNode=new AudioWorkletNode(this.ctx,"vad-helper-worklet",wt),this.audioNode.port.onmessage=async St=>{var Et;switch((Et=St.data)==null?void 0:Et.message){case lt.Message.AudioFrame:let _t=St.data.data;_t instanceof ArrayBuffer||(_t=new ArrayBuffer(St.data.data.byteLength),new Uint8Array(_t).set(new Uint8Array(St.data.data)));const Tt=new Float32Array(_t);await this.processFrame(Tt);break}};return}catch(xt){console.log("AudioWorklet setup failed, falling back to ScriptProcessor",xt)}this.resampler=new dt.Resampler({nativeSampleRate:this.ctx.sampleRate,targetSampleRate:16e3,targetFrameSize:this.options.frameSamples??480});const bt=4096;this.audioNode=this.ctx.createScriptProcessor(bt,1,1),this.gainNode=this.ctx.createGain(),this.gainNode.gain.value=0;let vt=!1;this.audioNode.onaudioprocess=async xt=>{if(!vt){vt=!0;try{const wt=xt.inputBuffer.getChannelData(0);if(xt.outputBuffer.getChannelData(0).fill(0),this.resampler){const Et=this.resampler.process(wt);for(const _t of Et)await this.processFrame(_t)}}catch(wt){console.error("Error processing audio:",wt)}finally{vt=!1}}},this.audioNode.connect(this.gainNode),this.gainNode.connect(this.ctx.destination)}}_e.AudioNodeVAD=gt})(realTimeVad);(function(_e){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ut,ht,ft,gt){gt===void 0&&(gt=ft);var mt=Object.getOwnPropertyDescriptor(ht,ft);(!mt||("get"in mt?!ht.__esModule:mt.writable||mt.configurable))&&(mt={enumerable:!0,get:function(){return ht[ft]}}),Object.defineProperty(ut,gt,mt)}:function(ut,ht,ft,gt){gt===void 0&&(gt=ft),ut[gt]=ht[ft]}),et=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(ut,ht){Object.defineProperty(ut,"default",{enumerable:!0,value:ht})}:function(ut,ht){ut.default=ht}),tt=commonjsGlobal&&commonjsGlobal.__importStar||function(ut){if(ut&&ut.__esModule)return ut;var ht={};if(ut!=null)for(var ft in ut)ft!=="default"&&Object.prototype.hasOwnProperty.call(ut,ft)&&_(ht,ut,ft);return et(ht,ut),ht};Object.defineProperty(_e,"__esModule",{value:!0}),_e.NonRealTimeVAD=_e.Message=_e.FrameProcessor=_e.getDefaultRealTimeVADOptions=_e.MicVAD=_e.DEFAULT_MODEL=_e.AudioNodeVAD=_e.utils=_e.defaultNonRealTimeVADOptions=void 0;const rt=tt(ortWeb_minExports),nt=assetPath,ot=defaultModelFetcher$1,at=frameProcessor;Object.defineProperty(_e,"FrameProcessor",{enumerable:!0,get:function(){return at.FrameProcessor}});const lt=messages;Object.defineProperty(_e,"Message",{enumerable:!0,get:function(){return lt.Message}});const ct=nonRealTimeVad,dt=utils$3;_e.defaultNonRealTimeVADOptions={modelURL:nt.baseAssetPath+"silero_vad_legacy.onnx",modelFetcher:ot.defaultModelFetcher};class st extends ct.PlatformAgnosticNonRealTimeVAD{static async new(ht={}){const{modelURL:ft,modelFetcher:gt}={..._e.defaultNonRealTimeVADOptions,...ht};return await this._new(()=>gt(ft),rt,ht)}}_e.NonRealTimeVAD=st,_e.utils={audioFileToArray:dt.audioFileToArray,minFramesForTargetMS:dt.minFramesForTargetMS,arrayBufferToBase64:dt.arrayBufferToBase64,encodeWAV:dt.encodeWAV};var it=realTimeVad;Object.defineProperty(_e,"AudioNodeVAD",{enumerable:!0,get:function(){return it.AudioNodeVAD}}),Object.defineProperty(_e,"DEFAULT_MODEL",{enumerable:!0,get:function(){return it.DEFAULT_MODEL}}),Object.defineProperty(_e,"MicVAD",{enumerable:!0,get:function(){return it.MicVAD}}),Object.defineProperty(_e,"getDefaultRealTimeVADOptions",{enumerable:!0,get:function(){return it.getDefaultRealTimeVADOptions}})})(dist);class TaskQueue{constructor(_=3e3){ln(this,"queue",[]);ln(this,"running",!1);ln(this,"taskInterval");this.taskInterval=_}addTask(_){this.queue.push(_),this.runNextTask()}clearQueue(){this.queue=[],this.running=!1}async runNextTask(){if(this.running||this.queue.length===0)return;this.running=!0;const _=this.queue.shift();try{await(_==null?void 0:_())}catch(et){console.error("Task Queue Error",et)}this.running=!1,setTimeout(()=>this.runNextTask(),this.taskInterval)}hasTask(){return this.queue.length>0}}const audioTaskQueue=new TaskQueue(20),ScreenCaptureContext=reactExports.createContext(void 0);function ScreenCaptureProvider({children:_e}){const[_,et]=reactExports.useState(null),[tt,rt]=reactExports.useState(!1),[nt,ot]=reactExports.useState(""),at=async()=>{try{let ct;if(window.electron){const st={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:await window.electron.ipcRenderer.invoke("get-screen-capture"),minWidth:1280,maxWidth:1280,minHeight:720,maxHeight:720}},audio:!1};ct=await navigator.mediaDevices.getUserMedia(st)}else{const dt={video:!0,audio:!1};ct=await navigator.mediaDevices.getDisplayMedia(dt)}et(ct),rt(!0),ot("")}catch(ct){ot("Failed to start screen capture"),toaster.create({title:`Failed to start screen capture: ${ct}`,type:"error",duration:2e3}),console.error(ct)}},lt=()=>{_&&(_.getTracks().forEach(ct=>ct.stop()),et(null),rt(!1))};return jsxRuntimeExports.jsx(ScreenCaptureContext.Provider,{value:{stream:_,isStreaming:tt,error:nt,startCapture:at,stopCapture:lt},children:_e})}const useScreenCaptureContext=()=>{const _e=reactExports.useContext(ScreenCaptureContext);if(_e===void 0)throw new Error("useScreenCaptureContext must be used within a ScreenCaptureProvider");return _e};function useMediaCapture(){const{stream:_e}=useCamera(),{stream:_}=useScreenCaptureContext(),et=reactExports.useCallback(async(rt,nt)=>{if(!rt)return console.warn(`No ${nt} stream available`),null;const ot=rt.getVideoTracks()[0];if(!ot)return console.warn(`No video track in ${nt} stream`),null;const at=new ImageCapture(ot);try{const lt=await at.grabFrame(),ct=document.createElement("canvas");ct.width=lt.width,ct.height=lt.height;const dt=ct.getContext("2d");return dt?(dt.drawImage(lt,0,0),ct.toDataURL("image/jpeg",.8)):(console.error("Failed to get canvas context"),null)}catch(lt){return console.error(`Error capturing ${nt} frame:`,lt),toaster.create({title:`Failed to capture ${nt} frame: ${lt}`,type:"error",duration:2e3}),null}},[]);return{captureAllMedia:reactExports.useCallback(async()=>{const rt=[];if(_e){const nt=await et(_e,"camera");nt&&rt.push({source:"camera",data:nt,mime_type:"image/jpeg"})}if(_){const nt=await et(_,"screen");nt&&rt.push({source:"screen",data:nt,mime_type:"image/jpeg"})}return console.log("images: ",rt),rt},[_e,_,et])}}function useSendAudio(){const{sendMessage:_e}=useWebSocket(),{captureAllMedia:_}=useMediaCapture();return{sendAudioPartition:reactExports.useCallback(async tt=>{for(let ot=0;ot<tt.length;ot+=4096){const at=Math.min(ot+4096,tt.length),lt=tt.slice(ot,at);_e({type:"mic-audio-data",audio:Array.from(lt)})}const nt=await _();_e({type:"mic-audio-end",images:nt})},[_e,_])}}var AiStateEnum=(_e=>(_e.IDLE="idle",_e.THINKING_SPEAKING="thinking-speaking",_e.INTERRUPTED="interrupted",_e.LOADING="loading",_e.LISTENING="listening",_e.WAITING="waiting",_e))(AiStateEnum||{});const initialState="loading",AiStateContext=reactExports.createContext(null);function AiStateProvider({children:_e}){const[_,et]=reactExports.useState(initialState),tt=reactExports.useRef(null),rt=reactExports.useCallback(lt=>{const ct=typeof lt=="function"?lt(_):lt;ct==="waiting"?_!=="thinking-speaking"&&(et(ct),tt.current&&clearTimeout(tt.current),tt.current=setTimeout(()=>{et("idle"),tt.current=null},2e3)):(et(ct),tt.current&&(clearTimeout(tt.current),tt.current=null))},[_]),nt=reactExports.useMemo(()=>({isIdle:_==="idle",isThinkingSpeaking:_==="thinking-speaking",isInterrupted:_==="interrupted",isLoading:_==="loading",isListening:_==="listening",isWaiting:_==="waiting"}),[_]),ot=reactExports.useCallback(()=>{rt("idle")},[rt]);reactExports.useEffect(()=>()=>{tt.current&&clearTimeout(tt.current)},[]);const at=reactExports.useMemo(()=>({aiState:_,setAiState:rt,...nt,resetState:ot}),[_,rt,nt,ot]);return jsxRuntimeExports.jsx(AiStateContext.Provider,{value:at,children:_e})}function useAiState(){const _e=reactExports.useContext(AiStateContext);if(!_e)throw new Error("useAiState must be used within a AiStateProvider");return _e}const DEFAULT_VAD_SETTINGS={positiveSpeechThreshold:50,negativeSpeechThreshold:35,redemptionFrames:35},DEFAULT_VAD_STATE={micOn:!1,autoStopMic:!1,autoStartMicOn:!1},VADContext=reactExports.createContext(null);function VADProvider({children:_e}){const _=reactExports.useRef(null),et=reactExports.useRef(0),[tt,rt]=useLocalStorage("micOn",DEFAULT_VAD_STATE.micOn),nt=reactExports.useRef(!0),[ot,at]=useLocalStorage("autoStopMic",DEFAULT_VAD_STATE.autoStopMic),[lt,ct]=useLocalStorage("vadSettings",DEFAULT_VAD_SETTINGS),[dt,st]=useLocalStorage("autoStartMicOn",DEFAULT_VAD_STATE.autoStartMicOn),it=reactExports.useRef(!1),[,ut]=reactExports.useReducer(Vt=>Vt+1,0),{interrupt:ht}=useInterrupt(),{sendAudioPartition:ft}=useSendAudio(),{setSubtitleText:gt}=reactExports.useContext(SubtitleContext),{aiState:mt,setAiState:yt}=reactExports.useContext(AiStateContext),bt=reactExports.useRef(ht),vt=reactExports.useRef(ft),xt=reactExports.useRef(mt),wt=reactExports.useRef(gt),St=reactExports.useRef(yt),Et=reactExports.useRef(!1);reactExports.useEffect(()=>{xt.current=mt},[mt]),reactExports.useEffect(()=>{bt.current=ht},[ht]),reactExports.useEffect(()=>{vt.current=ft},[ft]),reactExports.useEffect(()=>{wt.current=gt},[gt]),reactExports.useEffect(()=>{St.current=yt},[yt]),reactExports.useEffect(()=>{nt.current=ot},[]),reactExports.useEffect(()=>{it.current=dt},[]);const _t=reactExports.useCallback(Vt=>{et.current=Vt,ut()},[]),Tt=reactExports.useCallback(()=>{console.log("Speech started"),xt.current==="thinking-speaking"&&bt.current(),Et.current=!0,St.current("listening")},[]),Rt=reactExports.useCallback(Vt=>{Vt.isSpeech>et.current&&_t(Vt.isSpeech)},[]),Ot=reactExports.useCallback(Vt=>{Et.current&&(console.log("Speech ended"),audioTaskQueue.clearQueue(),nt.current?Dt():console.log("Auto stop mic is on, keeping mic active"),_t(0),vt.current(Vt),Et.current=!1)},[]),At=reactExports.useCallback(()=>{Et.current&&(console.log("VAD misfire detected"),_t(0),Et.current=!1,(xt.current==="interrupted"||xt.current==="listening")&&St.current("idle"),wt.current(""))},[]),Ct=reactExports.useCallback(Vt=>{ct(Vt),_.current&&(Dt(),setTimeout(()=>{Mt()},100))},[]),$t=async()=>{const Vt=await dist.MicVAD.new({model:"v5",preSpeechPadFrames:20,positiveSpeechThreshold:lt.positiveSpeechThreshold/100,negativeSpeechThreshold:lt.negativeSpeechThreshold/100,redemptionFrames:lt.redemptionFrames,onSpeechStart:Tt,onFrameProcessed:Rt,onSpeechEnd:Ot,onVADMisfire:At});_.current=Vt,Vt.start()},Mt=reactExports.useCallback(async()=>{try{_.current?(console.log("Starting VAD"),_.current.start()):(console.log("Initializing VAD"),await $t()),rt(!0)}catch(Vt){console.error("Failed to start VAD:",Vt),toaster.create({title:`Failed to start VAD: ${Vt}`,type:"error",duration:2e3})}},[]),Dt=reactExports.useCallback(()=>{console.log("Stopping VAD"),_.current?(_.current.pause(),console.log("VAD paused successfully"),_t(0)):console.log("VAD instance not found"),rt(!1)},[]),Nt=reactExports.useCallback(Vt=>{nt.current=Vt,at(Vt),ut()},[]),Bt=reactExports.useCallback(Vt=>{it.current=Vt,st(Vt),ut()},[]),Ut=reactExports.useMemo(()=>({autoStopMic:nt.current,micOn:tt,setMicOn:rt,setAutoStopMic:Nt,startMic:Mt,stopMic:Dt,previousTriggeredProbability:et.current,setPreviousTriggeredProbability:_t,settings:lt,updateSettings:Ct,autoStartMicOn:it.current,setAutoStartMicOn:Bt}),[tt,Mt,Dt,lt,Ct]);return jsxRuntimeExports.jsx(VADContext.Provider,{value:Ut,children:_e})}function useVAD(){const _e=reactExports.useContext(VADContext);if(!_e)throw new Error("useVAD must be used within a VADProvider");return _e}function useMicToggle(){const{startMic:_e,stopMic:_,micOn:et}=useVAD(),{aiState:tt,setAiState:rt}=useAiState();return{handleMicToggle:async()=>{et?(_(),tt==="listening"&&rt("idle")):await _e()},micOn:et}}function useSwitchCharacter(){const{sendMessage:_e}=useWebSocket(),{confName:_,getFilenameByName:et}=useConfig(),{interrupt:tt}=useInterrupt(),{stopMic:rt}=useVAD(),{setSubtitleText:nt}=useSubtitle(),{setAiState:ot}=useAiState(),{setModelInfo:at}=useLive2DConfig();return{switchCharacter:reactExports.useCallback(ct=>{if(et(_)===ct){console.log("Skipping character switch - same configuration file");return}nt("New Character Loading..."),tt(),rt(),ot("loading"),at(void 0),_e({type:"switch-config",file:ct}),console.log("Switch Character fileName: ",ct)},[_,et,_e,tt,rt,nt,ot])}}function useIpcHandlers({isPet:_e}){const{handleMicToggle:_}=useMicToggle(),{interrupt:et}=useInterrupt(),{modelInfo:tt,setModelInfo:rt}=useLive2DConfig(),{switchCharacter:nt}=useSwitchCharacter(),ot=reactExports.useCallback(()=>{_()},[_]),at=reactExports.useCallback(()=>{et()},[et]),lt=reactExports.useCallback(()=>{tt&&rt({...tt,scrollToResize:!tt.scrollToResize})},[tt,rt]),ct=reactExports.useCallback((dt,st)=>{nt(st)},[nt]);reactExports.useEffect(()=>{var dt;if((dt=window.electron)!=null&&dt.ipcRenderer&&_e)return window.electron.ipcRenderer.removeAllListeners("mic-toggle"),window.electron.ipcRenderer.removeAllListeners("interrupt"),window.electron.ipcRenderer.removeAllListeners("toggle-scroll-to-resize"),window.electron.ipcRenderer.removeAllListeners("switch-character"),window.electron.ipcRenderer.on("mic-toggle",ot),window.electron.ipcRenderer.on("interrupt",at),window.electron.ipcRenderer.on("toggle-scroll-to-resize",lt),window.electron.ipcRenderer.on("switch-character",ct),()=>{var st,it,ut,ht;(st=window.electron)==null||st.ipcRenderer.removeAllListeners("mic-toggle"),(it=window.electron)==null||it.ipcRenderer.removeAllListeners("interrupt"),(ut=window.electron)==null||ut.ipcRenderer.removeAllListeners("toggle-scroll-to-resize"),(ht=window.electron)==null||ht.ipcRenderer.removeAllListeners("switch-character")}},[ot,at,lt,ct,_e])}var ENV=(_e=>(_e[_e.WEBGL_LEGACY=0]="WEBGL_LEGACY",_e[_e.WEBGL=1]="WEBGL",_e[_e.WEBGL2=2]="WEBGL2",_e))(ENV||{}),RENDERER_TYPE=(_e=>(_e[_e.UNKNOWN=0]="UNKNOWN",_e[_e.WEBGL=1]="WEBGL",_e[_e.CANVAS=2]="CANVAS",_e))(RENDERER_TYPE||{}),BUFFER_BITS=(_e=>(_e[_e.COLOR=16384]="COLOR",_e[_e.DEPTH=256]="DEPTH",_e[_e.STENCIL=1024]="STENCIL",_e))(BUFFER_BITS||{}),BLEND_MODES=(_e=>(_e[_e.NORMAL=0]="NORMAL",_e[_e.ADD=1]="ADD",_e[_e.MULTIPLY=2]="MULTIPLY",_e[_e.SCREEN=3]="SCREEN",_e[_e.OVERLAY=4]="OVERLAY",_e[_e.DARKEN=5]="DARKEN",_e[_e.LIGHTEN=6]="LIGHTEN",_e[_e.COLOR_DODGE=7]="COLOR_DODGE",_e[_e.COLOR_BURN=8]="COLOR_BURN",_e[_e.HARD_LIGHT=9]="HARD_LIGHT",_e[_e.SOFT_LIGHT=10]="SOFT_LIGHT",_e[_e.DIFFERENCE=11]="DIFFERENCE",_e[_e.EXCLUSION=12]="EXCLUSION",_e[_e.HUE=13]="HUE",_e[_e.SATURATION=14]="SATURATION",_e[_e.COLOR=15]="COLOR",_e[_e.LUMINOSITY=16]="LUMINOSITY",_e[_e.NORMAL_NPM=17]="NORMAL_NPM",_e[_e.ADD_NPM=18]="ADD_NPM",_e[_e.SCREEN_NPM=19]="SCREEN_NPM",_e[_e.NONE=20]="NONE",_e[_e.SRC_OVER=0]="SRC_OVER",_e[_e.SRC_IN=21]="SRC_IN",_e[_e.SRC_OUT=22]="SRC_OUT",_e[_e.SRC_ATOP=23]="SRC_ATOP",_e[_e.DST_OVER=24]="DST_OVER",_e[_e.DST_IN=25]="DST_IN",_e[_e.DST_OUT=26]="DST_OUT",_e[_e.DST_ATOP=27]="DST_ATOP",_e[_e.ERASE=26]="ERASE",_e[_e.SUBTRACT=28]="SUBTRACT",_e[_e.XOR=29]="XOR",_e))(BLEND_MODES||{}),DRAW_MODES=(_e=>(_e[_e.POINTS=0]="POINTS",_e[_e.LINES=1]="LINES",_e[_e.LINE_LOOP=2]="LINE_LOOP",_e[_e.LINE_STRIP=3]="LINE_STRIP",_e[_e.TRIANGLES=4]="TRIANGLES",_e[_e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",_e[_e.TRIANGLE_FAN=6]="TRIANGLE_FAN",_e))(DRAW_MODES||{}),FORMATS=(_e=>(_e[_e.RGBA=6408]="RGBA",_e[_e.RGB=6407]="RGB",_e[_e.RG=33319]="RG",_e[_e.RED=6403]="RED",_e[_e.RGBA_INTEGER=36249]="RGBA_INTEGER",_e[_e.RGB_INTEGER=36248]="RGB_INTEGER",_e[_e.RG_INTEGER=33320]="RG_INTEGER",_e[_e.RED_INTEGER=36244]="RED_INTEGER",_e[_e.ALPHA=6406]="ALPHA",_e[_e.LUMINANCE=6409]="LUMINANCE",_e[_e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",_e[_e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",_e[_e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",_e))(FORMATS||{}),TARGETS=(_e=>(_e[_e.TEXTURE_2D=3553]="TEXTURE_2D",_e[_e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",_e[_e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",_e[_e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",_e[_e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",_e[_e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",_e[_e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",_e[_e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",_e[_e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",_e))(TARGETS||{}),TYPES=(_e=>(_e[_e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",_e[_e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",_e[_e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",_e[_e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",_e[_e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",_e[_e.UNSIGNED_INT=5125]="UNSIGNED_INT",_e[_e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",_e[_e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",_e[_e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",_e[_e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",_e[_e.BYTE=5120]="BYTE",_e[_e.SHORT=5122]="SHORT",_e[_e.INT=5124]="INT",_e[_e.FLOAT=5126]="FLOAT",_e[_e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",_e[_e.HALF_FLOAT=36193]="HALF_FLOAT",_e))(TYPES||{}),SAMPLER_TYPES=(_e=>(_e[_e.FLOAT=0]="FLOAT",_e[_e.INT=1]="INT",_e[_e.UINT=2]="UINT",_e))(SAMPLER_TYPES||{}),SCALE_MODES=(_e=>(_e[_e.NEAREST=0]="NEAREST",_e[_e.LINEAR=1]="LINEAR",_e))(SCALE_MODES||{}),WRAP_MODES=(_e=>(_e[_e.CLAMP=33071]="CLAMP",_e[_e.REPEAT=10497]="REPEAT",_e[_e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",_e))(WRAP_MODES||{}),MIPMAP_MODES=(_e=>(_e[_e.OFF=0]="OFF",_e[_e.POW2=1]="POW2",_e[_e.ON=2]="ON",_e[_e.ON_MANUAL=3]="ON_MANUAL",_e))(MIPMAP_MODES||{}),ALPHA_MODES=(_e=>(_e[_e.NPM=0]="NPM",_e[_e.UNPACK=1]="UNPACK",_e[_e.PMA=2]="PMA",_e[_e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",_e[_e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",_e[_e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",_e))(ALPHA_MODES||{}),CLEAR_MODES=(_e=>(_e[_e.NO=0]="NO",_e[_e.YES=1]="YES",_e[_e.AUTO=2]="AUTO",_e[_e.BLEND=0]="BLEND",_e[_e.CLEAR=1]="CLEAR",_e[_e.BLIT=2]="BLIT",_e))(CLEAR_MODES||{}),GC_MODES=(_e=>(_e[_e.AUTO=0]="AUTO",_e[_e.MANUAL=1]="MANUAL",_e))(GC_MODES||{}),PRECISION=(_e=>(_e.LOW="lowp",_e.MEDIUM="mediump",_e.HIGH="highp",_e))(PRECISION||{}),MASK_TYPES=(_e=>(_e[_e.NONE=0]="NONE",_e[_e.SCISSOR=1]="SCISSOR",_e[_e.STENCIL=2]="STENCIL",_e[_e.SPRITE=3]="SPRITE",_e[_e.COLOR=4]="COLOR",_e))(MASK_TYPES||{}),MSAA_QUALITY=(_e=>(_e[_e.NONE=0]="NONE",_e[_e.LOW=2]="LOW",_e[_e.MEDIUM=4]="MEDIUM",_e[_e.HIGH=8]="HIGH",_e))(MSAA_QUALITY||{}),BUFFER_TYPE=(_e=>(_e[_e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",_e[_e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",_e[_e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",_e))(BUFFER_TYPE||{});const BrowserAdapter={createCanvas:(_e,_)=>{const et=document.createElement("canvas");return et.width=_e,et.height=_,et},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(_e,_)=>fetch(_e,_),parseXML:_e=>new DOMParser().parseFromString(_e,"text/xml")},settings={ADAPTER:BrowserAdapter,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(_e){return typeof _e<"u"&&_e.platform==="MacIntel"&&typeof _e.maxTouchPoints=="number"&&_e.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch(_e){return function(_){return _.test(_e)}}function isMobile$1(_e){var _={userAgent:"",platform:"",maxTouchPoints:0};!_e&&typeof navigator<"u"?_={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof _e=="string"?_.userAgent=_e:_e&&_e.userAgent&&(_={userAgent:_e.userAgent,platform:_e.platform,maxTouchPoints:_e.maxTouchPoints||0});var et=_.userAgent,tt=et.split("[FBAN");typeof tt[1]<"u"&&(et=tt[0]),tt=et.split("Twitter"),typeof tt[1]<"u"&&(et=tt[0]);var rt=createMatch(et),nt={apple:{phone:rt(appleIphone)&&!rt(windowsPhone),ipod:rt(appleIpod),tablet:!rt(appleIphone)&&(rt(appleTablet)||isAppleTabletOnIos13(_))&&!rt(windowsPhone),universal:rt(appleUniversal),device:(rt(appleIphone)||rt(appleIpod)||rt(appleTablet)||rt(appleUniversal)||isAppleTabletOnIos13(_))&&!rt(windowsPhone)},amazon:{phone:rt(amazonPhone),tablet:!rt(amazonPhone)&&rt(amazonTablet),device:rt(amazonPhone)||rt(amazonTablet)},android:{phone:!rt(windowsPhone)&&rt(amazonPhone)||!rt(windowsPhone)&&rt(androidPhone),tablet:!rt(windowsPhone)&&!rt(amazonPhone)&&!rt(androidPhone)&&(rt(amazonTablet)||rt(androidTablet)),device:!rt(windowsPhone)&&(rt(amazonPhone)||rt(amazonTablet)||rt(androidPhone)||rt(androidTablet))||rt(/\bokhttp\b/i)},windows:{phone:rt(windowsPhone),tablet:rt(windowsTablet),device:rt(windowsPhone)||rt(windowsTablet)},other:{blackberry:rt(otherBlackBerry),blackberry10:rt(otherBlackBerry10),opera:rt(otherOpera),firefox:rt(otherFirefox),chrome:rt(otherChrome),device:rt(otherBlackBerry)||rt(otherBlackBerry10)||rt(otherOpera)||rt(otherFirefox)||rt(otherChrome)},any:!1,phone:!1,tablet:!1};return nt.any=nt.apple.device||nt.android.device||nt.windows.device||nt.other.device,nt.phone=nt.apple.phone||nt.android.phone||nt.windows.phone,nt.tablet=nt.apple.tablet||nt.android.tablet||nt.windows.tablet,nt}const isMobileCall=isMobile$1.default??isMobile$1,isMobile=isMobileCall(globalThis.navigator);settings.RETINA_PREFIX=/@([0-9\.]+)x/;settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var eventemitter3={exports:{}};(function(_e){var _=Object.prototype.hasOwnProperty,et="~";function tt(){}Object.create&&(tt.prototype=Object.create(null),new tt().__proto__||(et=!1));function rt(lt,ct,dt){this.fn=lt,this.context=ct,this.once=dt||!1}function nt(lt,ct,dt,st,it){if(typeof dt!="function")throw new TypeError("The listener must be a function");var ut=new rt(dt,st||lt,it),ht=et?et+ct:ct;return lt._events[ht]?lt._events[ht].fn?lt._events[ht]=[lt._events[ht],ut]:lt._events[ht].push(ut):(lt._events[ht]=ut,lt._eventsCount++),lt}function ot(lt,ct){--lt._eventsCount===0?lt._events=new tt:delete lt._events[ct]}function at(){this._events=new tt,this._eventsCount=0}at.prototype.eventNames=function(){var ct=[],dt,st;if(this._eventsCount===0)return ct;for(st in dt=this._events)_.call(dt,st)&&ct.push(et?st.slice(1):st);return Object.getOwnPropertySymbols?ct.concat(Object.getOwnPropertySymbols(dt)):ct},at.prototype.listeners=function(ct){var dt=et?et+ct:ct,st=this._events[dt];if(!st)return[];if(st.fn)return[st.fn];for(var it=0,ut=st.length,ht=new Array(ut);it<ut;it++)ht[it]=st[it].fn;return ht},at.prototype.listenerCount=function(ct){var dt=et?et+ct:ct,st=this._events[dt];return st?st.fn?1:st.length:0},at.prototype.emit=function(ct,dt,st,it,ut,ht){var ft=et?et+ct:ct;if(!this._events[ft])return!1;var gt=this._events[ft],mt=arguments.length,yt,bt;if(gt.fn){switch(gt.once&&this.removeListener(ct,gt.fn,void 0,!0),mt){case 1:return gt.fn.call(gt.context),!0;case 2:return gt.fn.call(gt.context,dt),!0;case 3:return gt.fn.call(gt.context,dt,st),!0;case 4:return gt.fn.call(gt.context,dt,st,it),!0;case 5:return gt.fn.call(gt.context,dt,st,it,ut),!0;case 6:return gt.fn.call(gt.context,dt,st,it,ut,ht),!0}for(bt=1,yt=new Array(mt-1);bt<mt;bt++)yt[bt-1]=arguments[bt];gt.fn.apply(gt.context,yt)}else{var vt=gt.length,xt;for(bt=0;bt<vt;bt++)switch(gt[bt].once&&this.removeListener(ct,gt[bt].fn,void 0,!0),mt){case 1:gt[bt].fn.call(gt[bt].context);break;case 2:gt[bt].fn.call(gt[bt].context,dt);break;case 3:gt[bt].fn.call(gt[bt].context,dt,st);break;case 4:gt[bt].fn.call(gt[bt].context,dt,st,it);break;default:if(!yt)for(xt=1,yt=new Array(mt-1);xt<mt;xt++)yt[xt-1]=arguments[xt];gt[bt].fn.apply(gt[bt].context,yt)}}return!0},at.prototype.on=function(ct,dt,st){return nt(this,ct,dt,st,!1)},at.prototype.once=function(ct,dt,st){return nt(this,ct,dt,st,!0)},at.prototype.removeListener=function(ct,dt,st,it){var ut=et?et+ct:ct;if(!this._events[ut])return this;if(!dt)return ot(this,ut),this;var ht=this._events[ut];if(ht.fn)ht.fn===dt&&(!it||ht.once)&&(!st||ht.context===st)&&ot(this,ut);else{for(var ft=0,gt=[],mt=ht.length;ft<mt;ft++)(ht[ft].fn!==dt||it&&!ht[ft].once||st&&ht[ft].context!==st)&&gt.push(ht[ft]);gt.length?this._events[ut]=gt.length===1?gt[0]:gt:ot(this,ut)}return this},at.prototype.removeAllListeners=function(ct){var dt;return ct?(dt=et?et+ct:ct,this._events[dt]&&ot(this,dt)):(this._events=new tt,this._eventsCount=0),this},at.prototype.off=at.prototype.removeListener,at.prototype.addListener=at.prototype.on,at.prefixed=et,at.EventEmitter=at,_e.exports=at})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var earcut$2={exports:{}};earcut$2.exports=earcut;earcut$2.exports.default=earcut;function earcut(_e,_,et){et=et||2;var tt=_&&_.length,rt=tt?_[0]*et:_e.length,nt=linkedList(_e,0,rt,et,!0),ot=[];if(!nt||nt.next===nt.prev)return ot;var at,lt,ct,dt,st,it,ut;if(tt&&(nt=eliminateHoles(_e,_,nt,et)),_e.length>80*et){at=ct=_e[0],lt=dt=_e[1];for(var ht=et;ht<rt;ht+=et)st=_e[ht],it=_e[ht+1],st<at&&(at=st),it<lt&&(lt=it),st>ct&&(ct=st),it>dt&&(dt=it);ut=Math.max(ct-at,dt-lt),ut=ut!==0?32767/ut:0}return earcutLinked(nt,ot,et,at,lt,ut,0),ot}function linkedList(_e,_,et,tt,rt){var nt,ot;if(rt===signedArea(_e,_,et,tt)>0)for(nt=_;nt<et;nt+=tt)ot=insertNode(nt,_e[nt],_e[nt+1],ot);else for(nt=et-tt;nt>=_;nt-=tt)ot=insertNode(nt,_e[nt],_e[nt+1],ot);return ot&&equals(ot,ot.next)&&(removeNode(ot),ot=ot.next),ot}function filterPoints(_e,_){if(!_e)return _e;_||(_=_e);var et=_e,tt;do if(tt=!1,!et.steiner&&(equals(et,et.next)||area(et.prev,et,et.next)===0)){if(removeNode(et),et=_=et.prev,et===et.next)break;tt=!0}else et=et.next;while(tt||et!==_);return _}function earcutLinked(_e,_,et,tt,rt,nt,ot){if(_e){!ot&&nt&&indexCurve(_e,tt,rt,nt);for(var at=_e,lt,ct;_e.prev!==_e.next;){if(lt=_e.prev,ct=_e.next,nt?isEarHashed(_e,tt,rt,nt):isEar(_e)){_.push(lt.i/et|0),_.push(_e.i/et|0),_.push(ct.i/et|0),removeNode(_e),_e=ct.next,at=ct.next;continue}if(_e=ct,_e===at){ot?ot===1?(_e=cureLocalIntersections(filterPoints(_e),_,et),earcutLinked(_e,_,et,tt,rt,nt,2)):ot===2&&splitEarcut(_e,_,et,tt,rt,nt):earcutLinked(filterPoints(_e),_,et,tt,rt,nt,1);break}}}}function isEar(_e){var _=_e.prev,et=_e,tt=_e.next;if(area(_,et,tt)>=0)return!1;for(var rt=_.x,nt=et.x,ot=tt.x,at=_.y,lt=et.y,ct=tt.y,dt=rt<nt?rt<ot?rt:ot:nt<ot?nt:ot,st=at<lt?at<ct?at:ct:lt<ct?lt:ct,it=rt>nt?rt>ot?rt:ot:nt>ot?nt:ot,ut=at>lt?at>ct?at:ct:lt>ct?lt:ct,ht=tt.next;ht!==_;){if(ht.x>=dt&&ht.x<=it&&ht.y>=st&&ht.y<=ut&&pointInTriangle(rt,at,nt,lt,ot,ct,ht.x,ht.y)&&area(ht.prev,ht,ht.next)>=0)return!1;ht=ht.next}return!0}function isEarHashed(_e,_,et,tt){var rt=_e.prev,nt=_e,ot=_e.next;if(area(rt,nt,ot)>=0)return!1;for(var at=rt.x,lt=nt.x,ct=ot.x,dt=rt.y,st=nt.y,it=ot.y,ut=at<lt?at<ct?at:ct:lt<ct?lt:ct,ht=dt<st?dt<it?dt:it:st<it?st:it,ft=at>lt?at>ct?at:ct:lt>ct?lt:ct,gt=dt>st?dt>it?dt:it:st>it?st:it,mt=zOrder(ut,ht,_,et,tt),yt=zOrder(ft,gt,_,et,tt),bt=_e.prevZ,vt=_e.nextZ;bt&&bt.z>=mt&&vt&&vt.z<=yt;){if(bt.x>=ut&&bt.x<=ft&&bt.y>=ht&&bt.y<=gt&&bt!==rt&&bt!==ot&&pointInTriangle(at,dt,lt,st,ct,it,bt.x,bt.y)&&area(bt.prev,bt,bt.next)>=0||(bt=bt.prevZ,vt.x>=ut&&vt.x<=ft&&vt.y>=ht&&vt.y<=gt&&vt!==rt&&vt!==ot&&pointInTriangle(at,dt,lt,st,ct,it,vt.x,vt.y)&&area(vt.prev,vt,vt.next)>=0))return!1;vt=vt.nextZ}for(;bt&&bt.z>=mt;){if(bt.x>=ut&&bt.x<=ft&&bt.y>=ht&&bt.y<=gt&&bt!==rt&&bt!==ot&&pointInTriangle(at,dt,lt,st,ct,it,bt.x,bt.y)&&area(bt.prev,bt,bt.next)>=0)return!1;bt=bt.prevZ}for(;vt&&vt.z<=yt;){if(vt.x>=ut&&vt.x<=ft&&vt.y>=ht&&vt.y<=gt&&vt!==rt&&vt!==ot&&pointInTriangle(at,dt,lt,st,ct,it,vt.x,vt.y)&&area(vt.prev,vt,vt.next)>=0)return!1;vt=vt.nextZ}return!0}function cureLocalIntersections(_e,_,et){var tt=_e;do{var rt=tt.prev,nt=tt.next.next;!equals(rt,nt)&&intersects(rt,tt,tt.next,nt)&&locallyInside(rt,nt)&&locallyInside(nt,rt)&&(_.push(rt.i/et|0),_.push(tt.i/et|0),_.push(nt.i/et|0),removeNode(tt),removeNode(tt.next),tt=_e=nt),tt=tt.next}while(tt!==_e);return filterPoints(tt)}function splitEarcut(_e,_,et,tt,rt,nt){var ot=_e;do{for(var at=ot.next.next;at!==ot.prev;){if(ot.i!==at.i&&isValidDiagonal(ot,at)){var lt=splitPolygon(ot,at);ot=filterPoints(ot,ot.next),lt=filterPoints(lt,lt.next),earcutLinked(ot,_,et,tt,rt,nt,0),earcutLinked(lt,_,et,tt,rt,nt,0);return}at=at.next}ot=ot.next}while(ot!==_e)}function eliminateHoles(_e,_,et,tt){var rt=[],nt,ot,at,lt,ct;for(nt=0,ot=_.length;nt<ot;nt++)at=_[nt]*tt,lt=nt<ot-1?_[nt+1]*tt:_e.length,ct=linkedList(_e,at,lt,tt,!1),ct===ct.next&&(ct.steiner=!0),rt.push(getLeftmost(ct));for(rt.sort(compareX),nt=0;nt<rt.length;nt++)et=eliminateHole(rt[nt],et);return et}function compareX(_e,_){return _e.x-_.x}function eliminateHole(_e,_){var et=findHoleBridge(_e,_);if(!et)return _;var tt=splitPolygon(et,_e);return filterPoints(tt,tt.next),filterPoints(et,et.next)}function findHoleBridge(_e,_){var et=_,tt=_e.x,rt=_e.y,nt=-1/0,ot;do{if(rt<=et.y&&rt>=et.next.y&&et.next.y!==et.y){var at=et.x+(rt-et.y)*(et.next.x-et.x)/(et.next.y-et.y);if(at<=tt&&at>nt&&(nt=at,ot=et.x<et.next.x?et:et.next,at===tt))return ot}et=et.next}while(et!==_);if(!ot)return null;var lt=ot,ct=ot.x,dt=ot.y,st=1/0,it;et=ot;do tt>=et.x&&et.x>=ct&&tt!==et.x&&pointInTriangle(rt<dt?tt:nt,rt,ct,dt,rt<dt?nt:tt,rt,et.x,et.y)&&(it=Math.abs(rt-et.y)/(tt-et.x),locallyInside(et,_e)&&(it<st||it===st&&(et.x>ot.x||et.x===ot.x&&sectorContainsSector(ot,et)))&&(ot=et,st=it)),et=et.next;while(et!==lt);return ot}function sectorContainsSector(_e,_){return area(_e.prev,_e,_.prev)<0&&area(_.next,_e,_e.next)<0}function indexCurve(_e,_,et,tt){var rt=_e;do rt.z===0&&(rt.z=zOrder(rt.x,rt.y,_,et,tt)),rt.prevZ=rt.prev,rt.nextZ=rt.next,rt=rt.next;while(rt!==_e);rt.prevZ.nextZ=null,rt.prevZ=null,sortLinked(rt)}function sortLinked(_e){var _,et,tt,rt,nt,ot,at,lt,ct=1;do{for(et=_e,_e=null,nt=null,ot=0;et;){for(ot++,tt=et,at=0,_=0;_<ct&&(at++,tt=tt.nextZ,!!tt);_++);for(lt=ct;at>0||lt>0&&tt;)at!==0&&(lt===0||!tt||et.z<=tt.z)?(rt=et,et=et.nextZ,at--):(rt=tt,tt=tt.nextZ,lt--),nt?nt.nextZ=rt:_e=rt,rt.prevZ=nt,nt=rt;et=tt}nt.nextZ=null,ct*=2}while(ot>1);return _e}function zOrder(_e,_,et,tt,rt){return _e=(_e-et)*rt|0,_=(_-tt)*rt|0,_e=(_e|_e<<8)&16711935,_e=(_e|_e<<4)&252645135,_e=(_e|_e<<2)&858993459,_e=(_e|_e<<1)&1431655765,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,_e|_<<1}function getLeftmost(_e){var _=_e,et=_e;do(_.x<et.x||_.x===et.x&&_.y<et.y)&&(et=_),_=_.next;while(_!==_e);return et}function pointInTriangle(_e,_,et,tt,rt,nt,ot,at){return(rt-ot)*(_-at)>=(_e-ot)*(nt-at)&&(_e-ot)*(tt-at)>=(et-ot)*(_-at)&&(et-ot)*(nt-at)>=(rt-ot)*(tt-at)}function isValidDiagonal(_e,_){return _e.next.i!==_.i&&_e.prev.i!==_.i&&!intersectsPolygon(_e,_)&&(locallyInside(_e,_)&&locallyInside(_,_e)&&middleInside(_e,_)&&(area(_e.prev,_e,_.prev)||area(_e,_.prev,_))||equals(_e,_)&&area(_e.prev,_e,_e.next)>0&&area(_.prev,_,_.next)>0)}function area(_e,_,et){return(_.y-_e.y)*(et.x-_.x)-(_.x-_e.x)*(et.y-_.y)}function equals(_e,_){return _e.x===_.x&&_e.y===_.y}function intersects(_e,_,et,tt){var rt=sign$3(area(_e,_,et)),nt=sign$3(area(_e,_,tt)),ot=sign$3(area(et,tt,_e)),at=sign$3(area(et,tt,_));return!!(rt!==nt&&ot!==at||rt===0&&onSegment(_e,et,_)||nt===0&&onSegment(_e,tt,_)||ot===0&&onSegment(et,_e,tt)||at===0&&onSegment(et,_,tt))}function onSegment(_e,_,et){return _.x<=Math.max(_e.x,et.x)&&_.x>=Math.min(_e.x,et.x)&&_.y<=Math.max(_e.y,et.y)&&_.y>=Math.min(_e.y,et.y)}function sign$3(_e){return _e>0?1:_e<0?-1:0}function intersectsPolygon(_e,_){var et=_e;do{if(et.i!==_e.i&&et.next.i!==_e.i&&et.i!==_.i&&et.next.i!==_.i&&intersects(et,et.next,_e,_))return!0;et=et.next}while(et!==_e);return!1}function locallyInside(_e,_){return area(_e.prev,_e,_e.next)<0?area(_e,_,_e.next)>=0&&area(_e,_e.prev,_)>=0:area(_e,_,_e.prev)<0||area(_e,_e.next,_)<0}function middleInside(_e,_){var et=_e,tt=!1,rt=(_e.x+_.x)/2,nt=(_e.y+_.y)/2;do et.y>nt!=et.next.y>nt&&et.next.y!==et.y&&rt<(et.next.x-et.x)*(nt-et.y)/(et.next.y-et.y)+et.x&&(tt=!tt),et=et.next;while(et!==_e);return tt}function splitPolygon(_e,_){var et=new Node$1(_e.i,_e.x,_e.y),tt=new Node$1(_.i,_.x,_.y),rt=_e.next,nt=_.prev;return _e.next=_,_.prev=_e,et.next=rt,rt.prev=et,tt.next=et,et.prev=tt,nt.next=tt,tt.prev=nt,tt}function insertNode(_e,_,et,tt){var rt=new Node$1(_e,_,et);return tt?(rt.next=tt.next,rt.prev=tt,tt.next.prev=rt,tt.next=rt):(rt.prev=rt,rt.next=rt),rt}function removeNode(_e){_e.next.prev=_e.prev,_e.prev.next=_e.next,_e.prevZ&&(_e.prevZ.nextZ=_e.nextZ),_e.nextZ&&(_e.nextZ.prevZ=_e.prevZ)}function Node$1(_e,_,et){this.i=_e,this.x=_,this.y=et,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(_e,_,et,tt){var rt=_&&_.length,nt=rt?_[0]*et:_e.length,ot=Math.abs(signedArea(_e,0,nt,et));if(rt)for(var at=0,lt=_.length;at<lt;at++){var ct=_[at]*et,dt=at<lt-1?_[at+1]*et:_e.length;ot-=Math.abs(signedArea(_e,ct,dt,et))}var st=0;for(at=0;at<tt.length;at+=3){var it=tt[at]*et,ut=tt[at+1]*et,ht=tt[at+2]*et;st+=Math.abs((_e[it]-_e[ht])*(_e[ut+1]-_e[it+1])-(_e[it]-_e[ut])*(_e[ht+1]-_e[it+1]))}return ot===0&&st===0?0:Math.abs((st-ot)/ot)};function signedArea(_e,_,et,tt){for(var rt=0,nt=_,ot=et-tt;nt<et;nt+=tt)rt+=(_e[ot]-_e[nt])*(_e[nt+1]+_e[ot+1]),ot=nt;return rt}earcut.flatten=function(_e){for(var _=_e[0][0].length,et={vertices:[],holes:[],dimensions:_},tt=0,rt=0;rt<_e.length;rt++){for(var nt=0;nt<_e[rt].length;nt++)for(var ot=0;ot<_;ot++)et.vertices.push(_e[rt][nt][ot]);rt>0&&(tt+=_e[rt-1].length,et.holes.push(tt))}return et};var earcutExports=earcut$2.exports;const earcut$1=getDefaultExportFromCjs(earcutExports);var punycode$1={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */punycode$1.exports;(function(_e,_){(function(et){var tt=_&&!_.nodeType&&_,rt=!_e.nodeType&&_e,nt=typeof commonjsGlobal=="object"&&commonjsGlobal;(nt.global===nt||nt.window===nt||nt.self===nt)&&(et=nt);var ot,at=2147483647,lt=36,ct=1,dt=26,st=38,it=700,ut=72,ht=128,ft="-",gt=/^xn--/,mt=/[^\x20-\x7E]/,yt=/[\x2E\u3002\uFF0E\uFF61]/g,bt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},vt=lt-ct,xt=Math.floor,wt=String.fromCharCode,St;function Et(Ut){throw new RangeError(bt[Ut])}function _t(Ut,Vt){for(var Jt=Ut.length,lr=[];Jt--;)lr[Jt]=Vt(Ut[Jt]);return lr}function Tt(Ut,Vt){var Jt=Ut.split("@"),lr="";Jt.length>1&&(lr=Jt[0]+"@",Ut=Jt[1]),Ut=Ut.replace(yt,".");var nr=Ut.split("."),ir=_t(nr,Vt).join(".");return lr+ir}function Rt(Ut){for(var Vt=[],Jt=0,lr=Ut.length,nr,ir;Jt<lr;)nr=Ut.charCodeAt(Jt++),nr>=55296&&nr<=56319&&Jt<lr?(ir=Ut.charCodeAt(Jt++),(ir&64512)==56320?Vt.push(((nr&1023)<<10)+(ir&1023)+65536):(Vt.push(nr),Jt--)):Vt.push(nr);return Vt}function Ot(Ut){return _t(Ut,function(Vt){var Jt="";return Vt>65535&&(Vt-=65536,Jt+=wt(Vt>>>10&1023|55296),Vt=56320|Vt&1023),Jt+=wt(Vt),Jt}).join("")}function At(Ut){return Ut-48<10?Ut-22:Ut-65<26?Ut-65:Ut-97<26?Ut-97:lt}function Ct(Ut,Vt){return Ut+22+75*(Ut<26)-((Vt!=0)<<5)}function $t(Ut,Vt,Jt){var lr=0;for(Ut=Jt?xt(Ut/it):Ut>>1,Ut+=xt(Ut/Vt);Ut>vt*dt>>1;lr+=lt)Ut=xt(Ut/vt);return xt(lr+(vt+1)*Ut/(Ut+st))}function Mt(Ut){var Vt=[],Jt=Ut.length,lr,nr=0,ir=ht,cr=ut,hr,Zt,Qt,rr,ar,pr,ur,mr,Or;for(hr=Ut.lastIndexOf(ft),hr<0&&(hr=0),Zt=0;Zt<hr;++Zt)Ut.charCodeAt(Zt)>=128&&Et("not-basic"),Vt.push(Ut.charCodeAt(Zt));for(Qt=hr>0?hr+1:0;Qt<Jt;){for(rr=nr,ar=1,pr=lt;Qt>=Jt&&Et("invalid-input"),ur=At(Ut.charCodeAt(Qt++)),(ur>=lt||ur>xt((at-nr)/ar))&&Et("overflow"),nr+=ur*ar,mr=pr<=cr?ct:pr>=cr+dt?dt:pr-cr,!(ur<mr);pr+=lt)Or=lt-mr,ar>xt(at/Or)&&Et("overflow"),ar*=Or;lr=Vt.length+1,cr=$t(nr-rr,lr,rr==0),xt(nr/lr)>at-ir&&Et("overflow"),ir+=xt(nr/lr),nr%=lr,Vt.splice(nr++,0,ir)}return Ot(Vt)}function Dt(Ut){var Vt,Jt,lr,nr,ir,cr,hr,Zt,Qt,rr,ar,pr=[],ur,mr,Or,$r;for(Ut=Rt(Ut),ur=Ut.length,Vt=ht,Jt=0,ir=ut,cr=0;cr<ur;++cr)ar=Ut[cr],ar<128&&pr.push(wt(ar));for(lr=nr=pr.length,nr&&pr.push(ft);lr<ur;){for(hr=at,cr=0;cr<ur;++cr)ar=Ut[cr],ar>=Vt&&ar<hr&&(hr=ar);for(mr=lr+1,hr-Vt>xt((at-Jt)/mr)&&Et("overflow"),Jt+=(hr-Vt)*mr,Vt=hr,cr=0;cr<ur;++cr)if(ar=Ut[cr],ar<Vt&&++Jt>at&&Et("overflow"),ar==Vt){for(Zt=Jt,Qt=lt;rr=Qt<=ir?ct:Qt>=ir+dt?dt:Qt-ir,!(Zt<rr);Qt+=lt)$r=Zt-rr,Or=lt-rr,pr.push(wt(Ct(rr+$r%Or,0))),Zt=xt($r/Or);pr.push(wt(Ct(Zt,0))),ir=$t(Jt,mr,lr==nr),Jt=0,++lr}++Jt,++Vt}return pr.join("")}function Nt(Ut){return Tt(Ut,function(Vt){return gt.test(Vt)?Mt(Vt.slice(4).toLowerCase()):Vt})}function Bt(Ut){return Tt(Ut,function(Vt){return mt.test(Vt)?"xn--"+Dt(Vt):Vt})}if(ot={version:"1.4.1",ucs2:{decode:Rt,encode:Ot},decode:Mt,encode:Dt,toASCII:Bt,toUnicode:Nt},tt&&rt)if(_e.exports==tt)rt.exports=ot;else for(St in ot)ot.hasOwnProperty(St)&&(tt[St]=ot[St]);else et.punycode=ot})(commonjsGlobal)})(punycode$1,punycode$1.exports);var punycodeExports=punycode$1.exports,type=TypeError;const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize$1=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace$1=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat$1=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||!0)?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(_e){return _e.__proto__}:null);function addNumericSeparator(_e,_){if(_e===1/0||_e===-1/0||_e!==_e||_e&&_e>-1e3&&_e<1e3||$test.call(/e/,_))return _;var et=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof _e=="number"){var tt=_e<0?-$floor(-_e):$floor(_e);if(tt!==_e){var rt=String(tt),nt=$slice.call(_,rt.length+1);return $replace$1.call(rt,et,"$&_")+"."+$replace$1.call($replace$1.call(nt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace$1.call(_,et,"$&_")}var utilInspect=require$$0,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null,quotes={__proto__:null,double:'"',single:"'"},quoteREs={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},objectInspect=function _e(_,et,tt,rt){var nt=et||{};if(has$3(nt,"quoteStyle")&&!has$3(quotes,nt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$3(nt,"maxStringLength")&&(typeof nt.maxStringLength=="number"?nt.maxStringLength<0&&nt.maxStringLength!==1/0:nt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ot=has$3(nt,"customInspect")?nt.customInspect:!0;if(typeof ot!="boolean"&&ot!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$3(nt,"indent")&&nt.indent!==null&&nt.indent!=="	"&&!(parseInt(nt.indent,10)===nt.indent&&nt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$3(nt,"numericSeparator")&&typeof nt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var at=nt.numericSeparator;if(typeof _>"u")return"undefined";if(_===null)return"null";if(typeof _=="boolean")return _?"true":"false";if(typeof _=="string")return inspectString(_,nt);if(typeof _=="number"){if(_===0)return 1/0/_>0?"0":"-0";var lt=String(_);return at?addNumericSeparator(_,lt):lt}if(typeof _=="bigint"){var ct=String(_)+"n";return at?addNumericSeparator(_,ct):ct}var dt=typeof nt.depth>"u"?5:nt.depth;if(typeof tt>"u"&&(tt=0),tt>=dt&&dt>0&&typeof _=="object")return isArray$3(_)?"[Array]":"[Object]";var st=getIndent(nt,tt);if(typeof rt>"u")rt=[];else if(indexOf(rt,_)>=0)return"[Circular]";function it(At,Ct,$t){if(Ct&&(rt=$arrSlice.call(rt),rt.push(Ct)),$t){var Mt={depth:nt.depth};return has$3(nt,"quoteStyle")&&(Mt.quoteStyle=nt.quoteStyle),_e(At,Mt,tt+1,rt)}return _e(At,nt,tt+1,rt)}if(typeof _=="function"&&!isRegExp$1(_)){var ut=nameOf(_),ht=arrObjKeys(_,it);return"[Function"+(ut?": "+ut:" (anonymous)")+"]"+(ht.length>0?" { "+$join.call(ht,", ")+" }":"")}if(isSymbol(_)){var ft=hasShammedSymbols?$replace$1.call(String(_),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(_);return typeof _=="object"&&!hasShammedSymbols?markBoxed(ft):ft}if(isElement(_)){for(var gt="<"+$toLowerCase.call(String(_.nodeName)),mt=_.attributes||[],yt=0;yt<mt.length;yt++)gt+=" "+mt[yt].name+"="+wrapQuotes(quote(mt[yt].value),"double",nt);return gt+=">",_.childNodes&&_.childNodes.length&&(gt+="..."),gt+="</"+$toLowerCase.call(String(_.nodeName))+">",gt}if(isArray$3(_)){if(_.length===0)return"[]";var bt=arrObjKeys(_,it);return st&&!singleLineValues(bt)?"["+indentedJoin(bt,st)+"]":"[ "+$join.call(bt,", ")+" ]"}if(isError(_)){var vt=arrObjKeys(_,it);return!("cause"in Error.prototype)&&"cause"in _&&!isEnumerable.call(_,"cause")?"{ ["+String(_)+"] "+$join.call($concat$1.call("[cause]: "+it(_.cause),vt),", ")+" }":vt.length===0?"["+String(_)+"]":"{ ["+String(_)+"] "+$join.call(vt,", ")+" }"}if(typeof _=="object"&&ot){if(inspectSymbol&&typeof _[inspectSymbol]=="function"&&utilInspect)return utilInspect(_,{depth:dt-tt});if(ot!=="symbol"&&typeof _.inspect=="function")return _.inspect()}if(isMap(_)){var xt=[];return mapForEach&&mapForEach.call(_,function(At,Ct){xt.push(it(Ct,_,!0)+" => "+it(At,_))}),collectionOf("Map",mapSize$1.call(_),xt,st)}if(isSet(_)){var wt=[];return setForEach&&setForEach.call(_,function(At){wt.push(it(At,_))}),collectionOf("Set",setSize.call(_),wt,st)}if(isWeakMap(_))return weakCollectionOf("WeakMap");if(isWeakSet(_))return weakCollectionOf("WeakSet");if(isWeakRef(_))return weakCollectionOf("WeakRef");if(isNumber(_))return markBoxed(it(Number(_)));if(isBigInt(_))return markBoxed(it(bigIntValueOf.call(_)));if(isBoolean(_))return markBoxed(booleanValueOf.call(_));if(isString(_))return markBoxed(it(String(_)));if(typeof window<"u"&&_===window)return"{ [object Window] }";if(typeof globalThis<"u"&&_===globalThis||typeof commonjsGlobal<"u"&&_===commonjsGlobal)return"{ [object globalThis] }";if(!isDate(_)&&!isRegExp$1(_)){var St=arrObjKeys(_,it),Et=gPO?gPO(_)===Object.prototype:_ instanceof Object||_.constructor===Object,_t=_ instanceof Object?"":"null prototype",Tt=!Et&&toStringTag&&Object(_)===_&&toStringTag in _?$slice.call(toStr$1(_),8,-1):_t?"Object":"",Rt=Et||typeof _.constructor!="function"?"":_.constructor.name?_.constructor.name+" ":"",Ot=Rt+(Tt||_t?"["+$join.call($concat$1.call([],Tt||[],_t||[]),": ")+"] ":"");return St.length===0?Ot+"{}":st?Ot+"{"+indentedJoin(St,st)+"}":Ot+"{ "+$join.call(St,", ")+" }"}return String(_)};function wrapQuotes(_e,_,et){var tt=et.quoteStyle||_,rt=quotes[tt];return rt+_e+rt}function quote(_e){return $replace$1.call(String(_e),/"/g,"&quot;")}function isArray$3(_e){return toStr$1(_e)==="[object Array]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isDate(_e){return toStr$1(_e)==="[object Date]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isRegExp$1(_e){return toStr$1(_e)==="[object RegExp]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isError(_e){return toStr$1(_e)==="[object Error]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isString(_e){return toStr$1(_e)==="[object String]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isNumber(_e){return toStr$1(_e)==="[object Number]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isBoolean(_e){return toStr$1(_e)==="[object Boolean]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isSymbol(_e){if(hasShammedSymbols)return _e&&typeof _e=="object"&&_e instanceof Symbol;if(typeof _e=="symbol")return!0;if(!_e||typeof _e!="object"||!symToString)return!1;try{return symToString.call(_e),!0}catch{}return!1}function isBigInt(_e){if(!_e||typeof _e!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(_e),!0}catch{}return!1}var hasOwn$1=Object.prototype.hasOwnProperty||function(_e){return _e in this};function has$3(_e,_){return hasOwn$1.call(_e,_)}function toStr$1(_e){return objectToString.call(_e)}function nameOf(_e){if(_e.name)return _e.name;var _=$match.call(functionToString.call(_e),/^function\s*([\w$]+)/);return _?_[1]:null}function indexOf(_e,_){if(_e.indexOf)return _e.indexOf(_);for(var et=0,tt=_e.length;et<tt;et++)if(_e[et]===_)return et;return-1}function isMap(_e){if(!mapSize$1||!_e||typeof _e!="object")return!1;try{mapSize$1.call(_e);try{setSize.call(_e)}catch{return!0}return _e instanceof Map}catch{}return!1}function isWeakMap(_e){if(!weakMapHas||!_e||typeof _e!="object")return!1;try{weakMapHas.call(_e,weakMapHas);try{weakSetHas.call(_e,weakSetHas)}catch{return!0}return _e instanceof WeakMap}catch{}return!1}function isWeakRef(_e){if(!weakRefDeref||!_e||typeof _e!="object")return!1;try{return weakRefDeref.call(_e),!0}catch{}return!1}function isSet(_e){if(!setSize||!_e||typeof _e!="object")return!1;try{setSize.call(_e);try{mapSize$1.call(_e)}catch{return!0}return _e instanceof Set}catch{}return!1}function isWeakSet(_e){if(!weakSetHas||!_e||typeof _e!="object")return!1;try{weakSetHas.call(_e,weakSetHas);try{weakMapHas.call(_e,weakMapHas)}catch{return!0}return _e instanceof WeakSet}catch{}return!1}function isElement(_e){return!_e||typeof _e!="object"?!1:typeof HTMLElement<"u"&&_e instanceof HTMLElement?!0:typeof _e.nodeName=="string"&&typeof _e.getAttribute=="function"}function inspectString(_e,_){if(_e.length>_.maxStringLength){var et=_e.length-_.maxStringLength,tt="... "+et+" more character"+(et>1?"s":"");return inspectString($slice.call(_e,0,_.maxStringLength),_)+tt}var rt=quoteREs[_.quoteStyle||"single"];rt.lastIndex=0;var nt=$replace$1.call($replace$1.call(_e,rt,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(nt,"single",_)}function lowbyte(_e){var _=_e.charCodeAt(0),et={8:"b",9:"t",10:"n",12:"f",13:"r"}[_];return et?"\\"+et:"\\x"+(_<16?"0":"")+$toUpperCase.call(_.toString(16))}function markBoxed(_e){return"Object("+_e+")"}function weakCollectionOf(_e){return _e+" { ? }"}function collectionOf(_e,_,et,tt){var rt=tt?indentedJoin(et,tt):$join.call(et,", ");return _e+" ("+_+") {"+rt+"}"}function singleLineValues(_e){for(var _=0;_<_e.length;_++)if(indexOf(_e[_],`
`)>=0)return!1;return!0}function getIndent(_e,_){var et;if(_e.indent==="	")et="	";else if(typeof _e.indent=="number"&&_e.indent>0)et=$join.call(Array(_e.indent+1)," ");else return null;return{base:et,prev:$join.call(Array(_+1),et)}}function indentedJoin(_e,_){if(_e.length===0)return"";var et=`
`+_.prev+_.base;return et+$join.call(_e,","+et)+`
`+_.prev}function arrObjKeys(_e,_){var et=isArray$3(_e),tt=[];if(et){tt.length=_e.length;for(var rt=0;rt<_e.length;rt++)tt[rt]=has$3(_e,rt)?_(_e[rt],_e):""}var nt=typeof gOPS=="function"?gOPS(_e):[],ot;if(hasShammedSymbols){ot={};for(var at=0;at<nt.length;at++)ot["$"+nt[at]]=nt[at]}for(var lt in _e)has$3(_e,lt)&&(et&&String(Number(lt))===lt&&lt<_e.length||hasShammedSymbols&&ot["$"+lt]instanceof Symbol||($test.call(/[^\w$]/,lt)?tt.push(_(lt,_e)+": "+_(_e[lt],_e)):tt.push(lt+": "+_(_e[lt],_e))));if(typeof gOPS=="function")for(var ct=0;ct<nt.length;ct++)isEnumerable.call(_e,nt[ct])&&tt.push("["+_(nt[ct])+"]: "+_(_e[nt[ct]],_e));return tt}var inspect$3=objectInspect,$TypeError$5=type,listGetNode=function(_e,_,et){for(var tt=_e,rt;(rt=tt.next)!=null;tt=rt)if(rt.key===_)return tt.next=rt.next,et||(rt.next=_e.next,_e.next=rt),rt},listGet=function(_e,_){if(_e){var et=listGetNode(_e,_);return et&&et.value}},listSet=function(_e,_,et){var tt=listGetNode(_e,_);tt?tt.value=et:_e.next={key:_,next:_e.next,value:et}},listHas=function(_e,_){return _e?!!listGetNode(_e,_):!1},listDelete=function(_e,_){if(_e)return listGetNode(_e,_,!0)},sideChannelList=function _e(){var _,et={assert:function(tt){if(!et.has(tt))throw new $TypeError$5("Side channel does not contain "+inspect$3(tt))},delete:function(tt){var rt=_&&_.next,nt=listDelete(_,tt);return nt&&rt&&rt===nt&&(_=void 0),!!nt},get:function(tt){return listGet(_,tt)},has:function(tt){return listHas(_,tt)},set:function(tt,rt){_||(_={next:void 0}),listSet(_,tt,rt)}};return et},esObjectAtoms=Object,esErrors=Error,_eval=EvalError,range=RangeError,ref=ReferenceError,syntax=SyntaxError,uri=URIError,abs$1=Math.abs,floor$1=Math.floor,max$2=Math.max,min$1=Math.min,pow$1=Math.pow,round$2=Math.round,_isNaN=Number.isNaN||function _e(_){return _!==_},$isNaN=_isNaN,sign$2=function _e(_){return $isNaN(_)||_===0?_:_<0?-1:1},gOPD=Object.getOwnPropertyDescriptor,$gOPD$1=gOPD;if($gOPD$1)try{$gOPD$1([],"length")}catch{$gOPD$1=null}var gopd=$gOPD$1,$defineProperty$1=Object.defineProperty||!1;if($defineProperty$1)try{$defineProperty$1({},"a",{value:1})}catch{$defineProperty$1=!1}var esDefineProperty=$defineProperty$1,shams,hasRequiredShams;function requireShams(){return hasRequiredShams||(hasRequiredShams=1,shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var _={},et=Symbol("test"),tt=Object(et);if(typeof et=="string"||Object.prototype.toString.call(et)!=="[object Symbol]"||Object.prototype.toString.call(tt)!=="[object Symbol]")return!1;var rt=42;_[et]=rt;for(var nt in _)return!1;if(typeof Object.keys=="function"&&Object.keys(_).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(_).length!==0)return!1;var ot=Object.getOwnPropertySymbols(_);if(ot.length!==1||ot[0]!==et||!Object.prototype.propertyIsEnumerable.call(_,et))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var at=Object.getOwnPropertyDescriptor(_,et);if(at.value!==rt||at.enumerable!==!0)return!1}return!0}),shams}var hasSymbols$1,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols$1;hasRequiredHasSymbols=1;var _e=typeof Symbol<"u"&&Symbol,_=requireShams();return hasSymbols$1=function(){return typeof _e!="function"||typeof Symbol!="function"||typeof _e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:_()},hasSymbols$1}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var _e=esObjectAtoms;return Object_getPrototypeOf=_e.getPrototypeOf||null,Object_getPrototypeOf}var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr=Object.prototype.toString,max$1=Math.max,funcType="[object Function]",concatty=function _e(_,et){for(var tt=[],rt=0;rt<_.length;rt+=1)tt[rt]=_[rt];for(var nt=0;nt<et.length;nt+=1)tt[nt+_.length]=et[nt];return tt},slicy=function _e(_,et){for(var tt=[],rt=et,nt=0;rt<_.length;rt+=1,nt+=1)tt[nt]=_[rt];return tt},joiny=function(_e,_){for(var et="",tt=0;tt<_e.length;tt+=1)et+=_e[tt],tt+1<_e.length&&(et+=_);return et},implementation$1=function _e(_){var et=this;if(typeof et!="function"||toStr.apply(et)!==funcType)throw new TypeError(ERROR_MESSAGE+et);for(var tt=slicy(arguments,1),rt,nt=function(){if(this instanceof rt){var dt=et.apply(this,concatty(tt,arguments));return Object(dt)===dt?dt:this}return et.apply(_,concatty(tt,arguments))},ot=max$1(0,et.length-tt.length),at=[],lt=0;lt<ot;lt++)at[lt]="$"+lt;if(rt=Function("binder","return function ("+joiny(at,",")+"){ return binder.apply(this,arguments); }")(nt),et.prototype){var ct=function(){};ct.prototype=et.prototype,rt.prototype=new ct,ct.prototype=null}return rt},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,functionCall=Function.prototype.call,functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply,bind$2=functionBind,$apply$1=requireFunctionApply(),$call$2=functionCall,$reflectApply=reflectApply,actualApply=$reflectApply||bind$2.call($call$2,$apply$1),bind$1=functionBind,$TypeError$4=type,$call$1=functionCall,$actualApply=actualApply,callBindApplyHelpers=function _e(_){if(_.length<1||typeof _[0]!="function")throw new $TypeError$4("a function is required");return $actualApply(bind$1,$call$1,_)},get,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var _e=callBindApplyHelpers,_=gopd,et;try{et=[].__proto__===Array.prototype}catch(ot){if(!ot||typeof ot!="object"||!("code"in ot)||ot.code!=="ERR_PROTO_ACCESS")throw ot}var tt=!!et&&_&&_(Object.prototype,"__proto__"),rt=Object,nt=rt.getPrototypeOf;return get=tt&&typeof tt.get=="function"?_e([tt.get]):typeof nt=="function"?function(at){return nt(at==null?at:rt(at))}:!1,get}var getProto$1,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto$1;hasRequiredGetProto=1;var _e=requireReflect_getPrototypeOf(),_=requireObject_getPrototypeOf(),et=requireGet();return getProto$1=_e?function(rt){return _e(rt)}:_?function(rt){if(!rt||typeof rt!="object"&&typeof rt!="function")throw new TypeError("getProto: not an object");return _(rt)}:et?function(rt){return et(rt)}:null,getProto$1}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var _e=Function.prototype.call,_=Object.prototype.hasOwnProperty,et=functionBind;return hasown=et.call(_e,_),hasown}var undefined$1,$Object=esObjectAtoms,$Error=esErrors,$EvalError=_eval,$RangeError=range,$ReferenceError=ref,$SyntaxError=syntax,$TypeError$3=type,$URIError=uri,abs=abs$1,floor=floor$1,max=max$2,min=min$1,pow=pow$1,round$1=round$2,sign$1=sign$2,$Function=Function,getEvalledConstructor=function(_e){try{return $Function('"use strict"; return ('+_e+").constructor;")()}catch{}},$gOPD=gopd,$defineProperty=esDefineProperty,throwTypeError=function(){throw new $TypeError$3},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=requireHasSymbols()(),getProto=requireGetProto(),$ObjectGPO=requireObject_getPrototypeOf(),$ReflectGPO=requireReflect_getPrototypeOf(),$apply=requireFunctionApply(),$call=functionCall,needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto?undefined$1:getProto(Uint8Array),INTRINSICS={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$Error,"%eval%":eval,"%EvalError%":$EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":$Object,"%Object.getOwnPropertyDescriptor%":$gOPD,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":$RangeError,"%ReferenceError%":$ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$3,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":$URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet,"%Function.prototype.call%":$call,"%Function.prototype.apply%":$apply,"%Object.defineProperty%":$defineProperty,"%Object.getPrototypeOf%":$ObjectGPO,"%Math.abs%":abs,"%Math.floor%":floor,"%Math.max%":max,"%Math.min%":min,"%Math.pow%":pow,"%Math.round%":round$1,"%Math.sign%":sign$1,"%Reflect.getPrototypeOf%":$ReflectGPO};if(getProto)try{null.error}catch(_e){var errorProto=getProto(getProto(_e));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function _e(_){var et;if(_==="%AsyncFunction%")et=getEvalledConstructor("async function () {}");else if(_==="%GeneratorFunction%")et=getEvalledConstructor("function* () {}");else if(_==="%AsyncGeneratorFunction%")et=getEvalledConstructor("async function* () {}");else if(_==="%AsyncGenerator%"){var tt=_e("%AsyncGeneratorFunction%");tt&&(et=tt.prototype)}else if(_==="%AsyncIteratorPrototype%"){var rt=_e("%AsyncGenerator%");rt&&getProto&&(et=getProto(rt.prototype))}return INTRINSICS[_]=et,et},LEGACY_ALIASES={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn=requireHasown(),$concat=bind.call($call,Array.prototype.concat),$spliceApply=bind.call($apply,Array.prototype.splice),$replace=bind.call($call,String.prototype.replace),$strSlice=bind.call($call,String.prototype.slice),$exec=bind.call($call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function _e(_){var et=$strSlice(_,0,1),tt=$strSlice(_,-1);if(et==="%"&&tt!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if(tt==="%"&&et!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var rt=[];return $replace(_,rePropName,function(nt,ot,at,lt){rt[rt.length]=at?$replace(lt,reEscapeChar,"$1"):ot||nt}),rt},getBaseIntrinsic=function _e(_,et){var tt=_,rt;if(hasOwn(LEGACY_ALIASES,tt)&&(rt=LEGACY_ALIASES[tt],tt="%"+rt[0]+"%"),hasOwn(INTRINSICS,tt)){var nt=INTRINSICS[tt];if(nt===needsEval&&(nt=doEval(tt)),typeof nt>"u"&&!et)throw new $TypeError$3("intrinsic "+_+" exists, but is not available. Please file an issue!");return{alias:rt,name:tt,value:nt}}throw new $SyntaxError("intrinsic "+_+" does not exist!")},getIntrinsic=function _e(_,et){if(typeof _!="string"||_.length===0)throw new $TypeError$3("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof et!="boolean")throw new $TypeError$3('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,_)===null)throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var tt=stringToPath(_),rt=tt.length>0?tt[0]:"",nt=getBaseIntrinsic("%"+rt+"%",et),ot=nt.name,at=nt.value,lt=!1,ct=nt.alias;ct&&(rt=ct[0],$spliceApply(tt,$concat([0,1],ct)));for(var dt=1,st=!0;dt<tt.length;dt+=1){var it=tt[dt],ut=$strSlice(it,0,1),ht=$strSlice(it,-1);if((ut==='"'||ut==="'"||ut==="`"||ht==='"'||ht==="'"||ht==="`")&&ut!==ht)throw new $SyntaxError("property names with quotes must have matching quotes");if((it==="constructor"||!st)&&(lt=!0),rt+="."+it,ot="%"+rt+"%",hasOwn(INTRINSICS,ot))at=INTRINSICS[ot];else if(at!=null){if(!(it in at)){if(!et)throw new $TypeError$3("base intrinsic for "+_+" exists, but the property is not available.");return}if($gOPD&&dt+1>=tt.length){var ft=$gOPD(at,it);st=!!ft,st&&"get"in ft&&!("originalValue"in ft.get)?at=ft.get:at=at[it]}else st=hasOwn(at,it),at=at[it];st&&!lt&&(INTRINSICS[ot]=at)}}return at},GetIntrinsic$2=getIntrinsic,callBindBasic=callBindApplyHelpers,$indexOf=callBindBasic([GetIntrinsic$2("%String.prototype.indexOf%")]),callBound$2=function _e(_,et){var tt=GetIntrinsic$2(_,!!et);return typeof tt=="function"&&$indexOf(_,".prototype.")>-1?callBindBasic([tt]):tt},GetIntrinsic$1=getIntrinsic,callBound$1=callBound$2,inspect$2=objectInspect,$TypeError$2=type,$Map=GetIntrinsic$1("%Map%",!0),$mapGet=callBound$1("Map.prototype.get",!0),$mapSet=callBound$1("Map.prototype.set",!0),$mapHas=callBound$1("Map.prototype.has",!0),$mapDelete=callBound$1("Map.prototype.delete",!0),$mapSize=callBound$1("Map.prototype.size",!0),sideChannelMap=!!$Map&&function _e(){var _,et={assert:function(tt){if(!et.has(tt))throw new $TypeError$2("Side channel does not contain "+inspect$2(tt))},delete:function(tt){if(_){var rt=$mapDelete(_,tt);return $mapSize(_)===0&&(_=void 0),rt}return!1},get:function(tt){if(_)return $mapGet(_,tt)},has:function(tt){return _?$mapHas(_,tt):!1},set:function(tt,rt){_||(_=new $Map),$mapSet(_,tt,rt)}};return et},GetIntrinsic=getIntrinsic,callBound=callBound$2,inspect$1=objectInspect,getSideChannelMap$1=sideChannelMap,$TypeError$1=type,$WeakMap=GetIntrinsic("%WeakMap%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$weakMapDelete=callBound("WeakMap.prototype.delete",!0),sideChannelWeakmap=$WeakMap?function _e(){var _,et,tt={assert:function(rt){if(!tt.has(rt))throw new $TypeError$1("Side channel does not contain "+inspect$1(rt))},delete:function(rt){if($WeakMap&&rt&&(typeof rt=="object"||typeof rt=="function")){if(_)return $weakMapDelete(_,rt)}else if(getSideChannelMap$1&&et)return et.delete(rt);return!1},get:function(rt){return $WeakMap&&rt&&(typeof rt=="object"||typeof rt=="function")&&_?$weakMapGet(_,rt):et&&et.get(rt)},has:function(rt){return $WeakMap&&rt&&(typeof rt=="object"||typeof rt=="function")&&_?$weakMapHas(_,rt):!!et&&et.has(rt)},set:function(rt,nt){$WeakMap&&rt&&(typeof rt=="object"||typeof rt=="function")?(_||(_=new $WeakMap),$weakMapSet(_,rt,nt)):getSideChannelMap$1&&(et||(et=getSideChannelMap$1()),et.set(rt,nt))}};return tt}:getSideChannelMap$1,$TypeError=type,inspect=objectInspect,getSideChannelList=sideChannelList,getSideChannelMap=sideChannelMap,getSideChannelWeakMap=sideChannelWeakmap,makeChannel=getSideChannelWeakMap||getSideChannelMap||getSideChannelList,sideChannel=function _e(){var _,et={assert:function(tt){if(!et.has(tt))throw new $TypeError("Side channel does not contain "+inspect(tt))},delete:function(tt){return!!_&&_.delete(tt)},get:function(tt){return _&&_.get(tt)},has:function(tt){return!!_&&_.has(tt)},set:function(tt,rt){_||(_=makeChannel()),_.set(tt,rt)}};return et},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$4={default:Format.RFC3986,formatters:{RFC1738:function(_e){return replace.call(_e,percentTwenties,"+")},RFC3986:function(_e){return String(_e)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$3=formats$4,has$2=Object.prototype.hasOwnProperty,isArray$2=Array.isArray,hexTable=function(){for(var _e=[],_=0;_<256;++_)_e.push("%"+((_<16?"0":"")+_.toString(16)).toUpperCase());return _e}(),compactQueue=function _e(_){for(;_.length>1;){var et=_.pop(),tt=et.obj[et.prop];if(isArray$2(tt)){for(var rt=[],nt=0;nt<tt.length;++nt)typeof tt[nt]<"u"&&rt.push(tt[nt]);et.obj[et.prop]=rt}}},arrayToObject=function _e(_,et){for(var tt=et&&et.plainObjects?{__proto__:null}:{},rt=0;rt<_.length;++rt)typeof _[rt]<"u"&&(tt[rt]=_[rt]);return tt},merge=function _e(_,et,tt){if(!et)return _;if(typeof et!="object"&&typeof et!="function"){if(isArray$2(_))_.push(et);else if(_&&typeof _=="object")(tt&&(tt.plainObjects||tt.allowPrototypes)||!has$2.call(Object.prototype,et))&&(_[et]=!0);else return[_,et];return _}if(!_||typeof _!="object")return[_].concat(et);var rt=_;return isArray$2(_)&&!isArray$2(et)&&(rt=arrayToObject(_,tt)),isArray$2(_)&&isArray$2(et)?(et.forEach(function(nt,ot){if(has$2.call(_,ot)){var at=_[ot];at&&typeof at=="object"&&nt&&typeof nt=="object"?_[ot]=_e(at,nt,tt):_.push(nt)}else _[ot]=nt}),_):Object.keys(et).reduce(function(nt,ot){var at=et[ot];return has$2.call(nt,ot)?nt[ot]=_e(nt[ot],at,tt):nt[ot]=at,nt},rt)},assign=function _e(_,et){return Object.keys(et).reduce(function(tt,rt){return tt[rt]=et[rt],tt},_)},decode=function(_e,_,et){var tt=_e.replace(/\+/g," ");if(et==="iso-8859-1")return tt.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(tt)}catch{return tt}},limit=1024,encode=function _e(_,et,tt,rt,nt){if(_.length===0)return _;var ot=_;if(typeof _=="symbol"?ot=Symbol.prototype.toString.call(_):typeof _!="string"&&(ot=String(_)),tt==="iso-8859-1")return escape(ot).replace(/%u[0-9a-f]{4}/gi,function(ut){return"%26%23"+parseInt(ut.slice(2),16)+"%3B"});for(var at="",lt=0;lt<ot.length;lt+=limit){for(var ct=ot.length>=limit?ot.slice(lt,lt+limit):ot,dt=[],st=0;st<ct.length;++st){var it=ct.charCodeAt(st);if(it===45||it===46||it===95||it===126||it>=48&&it<=57||it>=65&&it<=90||it>=97&&it<=122||nt===formats$3.RFC1738&&(it===40||it===41)){dt[dt.length]=ct.charAt(st);continue}if(it<128){dt[dt.length]=hexTable[it];continue}if(it<2048){dt[dt.length]=hexTable[192|it>>6]+hexTable[128|it&63];continue}if(it<55296||it>=57344){dt[dt.length]=hexTable[224|it>>12]+hexTable[128|it>>6&63]+hexTable[128|it&63];continue}st+=1,it=65536+((it&1023)<<10|ct.charCodeAt(st)&1023),dt[dt.length]=hexTable[240|it>>18]+hexTable[128|it>>12&63]+hexTable[128|it>>6&63]+hexTable[128|it&63]}at+=dt.join("")}return at},compact=function _e(_){for(var et=[{obj:{o:_},prop:"o"}],tt=[],rt=0;rt<et.length;++rt)for(var nt=et[rt],ot=nt.obj[nt.prop],at=Object.keys(ot),lt=0;lt<at.length;++lt){var ct=at[lt],dt=ot[ct];typeof dt=="object"&&dt!==null&&tt.indexOf(dt)===-1&&(et.push({obj:ot,prop:ct}),tt.push(dt))}return compactQueue(et),_},isRegExp=function _e(_){return Object.prototype.toString.call(_)==="[object RegExp]"},isBuffer=function _e(_){return!_||typeof _!="object"?!1:!!(_.constructor&&_.constructor.isBuffer&&_.constructor.isBuffer(_))},combine=function _e(_,et){return[].concat(_,et)},maybeMap=function _e(_,et){if(isArray$2(_)){for(var tt=[],rt=0;rt<_.length;rt+=1)tt.push(et(_[rt]));return tt}return et(_)},utils$2={arrayToObject,assign,combine,compact,decode,encode,isBuffer,isRegExp,maybeMap,merge},getSideChannel=sideChannel,utils$1=utils$2,formats$2=formats$4,has$1=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function _e(_){return _+"[]"},comma:"comma",indices:function _e(_,et){return _+"["+et+"]"},repeat:function _e(_){return _}},isArray$1=Array.isArray,push=Array.prototype.push,pushToArray=function(_e,_){push.apply(_e,isArray$1(_)?_:[_])},toISO=Date.prototype.toISOString,defaultFormat=formats$2.default,defaults$1={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:utils$1.encode,encodeValuesOnly:!1,filter:void 0,format:defaultFormat,formatter:formats$2.formatters[defaultFormat],indices:!1,serializeDate:function _e(_){return toISO.call(_)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function _e(_){return typeof _=="string"||typeof _=="number"||typeof _=="boolean"||typeof _=="symbol"||typeof _=="bigint"},sentinel={},stringify$1=function _e(_,et,tt,rt,nt,ot,at,lt,ct,dt,st,it,ut,ht,ft,gt,mt,yt){for(var bt=_,vt=yt,xt=0,wt=!1;(vt=vt.get(sentinel))!==void 0&&!wt;){var St=vt.get(_);if(xt+=1,typeof St<"u"){if(St===xt)throw new RangeError("Cyclic object value");wt=!0}typeof vt.get(sentinel)>"u"&&(xt=0)}if(typeof dt=="function"?bt=dt(et,bt):bt instanceof Date?bt=ut(bt):tt==="comma"&&isArray$1(bt)&&(bt=utils$1.maybeMap(bt,function(Ut){return Ut instanceof Date?ut(Ut):Ut})),bt===null){if(ot)return ct&&!gt?ct(et,defaults$1.encoder,mt,"key",ht):et;bt=""}if(isNonNullishPrimitive(bt)||utils$1.isBuffer(bt)){if(ct){var Et=gt?et:ct(et,defaults$1.encoder,mt,"key",ht);return[ft(Et)+"="+ft(ct(bt,defaults$1.encoder,mt,"value",ht))]}return[ft(et)+"="+ft(String(bt))]}var _t=[];if(typeof bt>"u")return _t;var Tt;if(tt==="comma"&&isArray$1(bt))gt&&ct&&(bt=utils$1.maybeMap(bt,ct)),Tt=[{value:bt.length>0?bt.join(",")||null:void 0}];else if(isArray$1(dt))Tt=dt;else{var Rt=Object.keys(bt);Tt=st?Rt.sort(st):Rt}var Ot=lt?String(et).replace(/\./g,"%2E"):String(et),At=rt&&isArray$1(bt)&&bt.length===1?Ot+"[]":Ot;if(nt&&isArray$1(bt)&&bt.length===0)return At+"[]";for(var Ct=0;Ct<Tt.length;++Ct){var $t=Tt[Ct],Mt=typeof $t=="object"&&$t&&typeof $t.value<"u"?$t.value:bt[$t];if(!(at&&Mt===null)){var Dt=it&&lt?String($t).replace(/\./g,"%2E"):String($t),Nt=isArray$1(bt)?typeof tt=="function"?tt(At,Dt):At:At+(it?"."+Dt:"["+Dt+"]");yt.set(_,xt);var Bt=getSideChannel();Bt.set(sentinel,yt),pushToArray(_t,_e(Mt,Nt,tt,rt,nt,ot,at,lt,tt==="comma"&&gt&&isArray$1(bt)?null:ct,dt,st,it,ut,ht,ft,gt,mt,Bt))}}return _t},normalizeStringifyOptions=function _e(_){if(!_)return defaults$1;if(typeof _.allowEmptyArrays<"u"&&typeof _.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof _.encodeDotInKeys<"u"&&typeof _.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(_.encoder!==null&&typeof _.encoder<"u"&&typeof _.encoder!="function")throw new TypeError("Encoder has to be a function.");var et=_.charset||defaults$1.charset;if(typeof _.charset<"u"&&_.charset!=="utf-8"&&_.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var tt=formats$2.default;if(typeof _.format<"u"){if(!has$1.call(formats$2.formatters,_.format))throw new TypeError("Unknown format option provided.");tt=_.format}var rt=formats$2.formatters[tt],nt=defaults$1.filter;(typeof _.filter=="function"||isArray$1(_.filter))&&(nt=_.filter);var ot;if(_.arrayFormat in arrayPrefixGenerators?ot=_.arrayFormat:"indices"in _?ot=_.indices?"indices":"repeat":ot=defaults$1.arrayFormat,"commaRoundTrip"in _&&typeof _.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var at=typeof _.allowDots>"u"?_.encodeDotInKeys===!0?!0:defaults$1.allowDots:!!_.allowDots;return{addQueryPrefix:typeof _.addQueryPrefix=="boolean"?_.addQueryPrefix:defaults$1.addQueryPrefix,allowDots:at,allowEmptyArrays:typeof _.allowEmptyArrays=="boolean"?!!_.allowEmptyArrays:defaults$1.allowEmptyArrays,arrayFormat:ot,charset:et,charsetSentinel:typeof _.charsetSentinel=="boolean"?_.charsetSentinel:defaults$1.charsetSentinel,commaRoundTrip:!!_.commaRoundTrip,delimiter:typeof _.delimiter>"u"?defaults$1.delimiter:_.delimiter,encode:typeof _.encode=="boolean"?_.encode:defaults$1.encode,encodeDotInKeys:typeof _.encodeDotInKeys=="boolean"?_.encodeDotInKeys:defaults$1.encodeDotInKeys,encoder:typeof _.encoder=="function"?_.encoder:defaults$1.encoder,encodeValuesOnly:typeof _.encodeValuesOnly=="boolean"?_.encodeValuesOnly:defaults$1.encodeValuesOnly,filter:nt,format:tt,formatter:rt,serializeDate:typeof _.serializeDate=="function"?_.serializeDate:defaults$1.serializeDate,skipNulls:typeof _.skipNulls=="boolean"?_.skipNulls:defaults$1.skipNulls,sort:typeof _.sort=="function"?_.sort:null,strictNullHandling:typeof _.strictNullHandling=="boolean"?_.strictNullHandling:defaults$1.strictNullHandling}},stringify_1=function(_e,_){var et=_e,tt=normalizeStringifyOptions(_),rt,nt;typeof tt.filter=="function"?(nt=tt.filter,et=nt("",et)):isArray$1(tt.filter)&&(nt=tt.filter,rt=nt);var ot=[];if(typeof et!="object"||et===null)return"";var at=arrayPrefixGenerators[tt.arrayFormat],lt=at==="comma"&&tt.commaRoundTrip;rt||(rt=Object.keys(et)),tt.sort&&rt.sort(tt.sort);for(var ct=getSideChannel(),dt=0;dt<rt.length;++dt){var st=rt[dt],it=et[st];tt.skipNulls&&it===null||pushToArray(ot,stringify$1(it,st,at,lt,tt.allowEmptyArrays,tt.strictNullHandling,tt.skipNulls,tt.encodeDotInKeys,tt.encode?tt.encoder:null,tt.filter,tt.sort,tt.allowDots,tt.serializeDate,tt.format,tt.formatter,tt.encodeValuesOnly,tt.charset,ct))}var ut=ot.join(tt.delimiter),ht=tt.addQueryPrefix===!0?"?":"";return tt.charsetSentinel&&(tt.charset==="iso-8859-1"?ht+="utf8=%26%2310003%3B&":ht+="utf8=%E2%9C%93&"),ut.length>0?ht+ut:""},utils=utils$2,has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:utils.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},interpretNumericEntities=function(_e){return _e.replace(/&#(\d+);/g,function(_,et){return String.fromCharCode(parseInt(et,10))})},parseArrayValue=function(_e,_){return _e&&typeof _e=="string"&&_.comma&&_e.indexOf(",")>-1?_e.split(","):_e},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function _e(_,et){var tt={__proto__:null},rt=et.ignoreQueryPrefix?_.replace(/^\?/,""):_;rt=rt.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var nt=et.parameterLimit===1/0?void 0:et.parameterLimit,ot=rt.split(et.delimiter,nt),at=-1,lt,ct=et.charset;if(et.charsetSentinel)for(lt=0;lt<ot.length;++lt)ot[lt].indexOf("utf8=")===0&&(ot[lt]===charsetSentinel?ct="utf-8":ot[lt]===isoSentinel&&(ct="iso-8859-1"),at=lt,lt=ot.length);for(lt=0;lt<ot.length;++lt)if(lt!==at){var dt=ot[lt],st=dt.indexOf("]="),it=st===-1?dt.indexOf("="):st+1,ut,ht;it===-1?(ut=et.decoder(dt,defaults.decoder,ct,"key"),ht=et.strictNullHandling?null:""):(ut=et.decoder(dt.slice(0,it),defaults.decoder,ct,"key"),ht=utils.maybeMap(parseArrayValue(dt.slice(it+1),et),function(gt){return et.decoder(gt,defaults.decoder,ct,"value")})),ht&&et.interpretNumericEntities&&ct==="iso-8859-1"&&(ht=interpretNumericEntities(String(ht))),dt.indexOf("[]=")>-1&&(ht=isArray(ht)?[ht]:ht);var ft=has.call(tt,ut);ft&&et.duplicates==="combine"?tt[ut]=utils.combine(tt[ut],ht):(!ft||et.duplicates==="last")&&(tt[ut]=ht)}return tt},parseObject=function(_e,_,et,tt){for(var rt=tt?_:parseArrayValue(_,et),nt=_e.length-1;nt>=0;--nt){var ot,at=_e[nt];if(at==="[]"&&et.parseArrays)ot=et.allowEmptyArrays&&(rt===""||et.strictNullHandling&&rt===null)?[]:[].concat(rt);else{ot=et.plainObjects?{__proto__:null}:{};var lt=at.charAt(0)==="["&&at.charAt(at.length-1)==="]"?at.slice(1,-1):at,ct=et.decodeDotInKeys?lt.replace(/%2E/g,"."):lt,dt=parseInt(ct,10);!et.parseArrays&&ct===""?ot={0:rt}:!isNaN(dt)&&at!==ct&&String(dt)===ct&&dt>=0&&et.parseArrays&&dt<=et.arrayLimit?(ot=[],ot[dt]=rt):ct!=="__proto__"&&(ot[ct]=rt)}rt=ot}return rt},parseKeys=function _e(_,et,tt,rt){if(_){var nt=tt.allowDots?_.replace(/\.([^.[]+)/g,"[$1]"):_,ot=/(\[[^[\]]*])/,at=/(\[[^[\]]*])/g,lt=tt.depth>0&&ot.exec(nt),ct=lt?nt.slice(0,lt.index):nt,dt=[];if(ct){if(!tt.plainObjects&&has.call(Object.prototype,ct)&&!tt.allowPrototypes)return;dt.push(ct)}for(var st=0;tt.depth>0&&(lt=at.exec(nt))!==null&&st<tt.depth;){if(st+=1,!tt.plainObjects&&has.call(Object.prototype,lt[1].slice(1,-1))&&!tt.allowPrototypes)return;dt.push(lt[1])}if(lt){if(tt.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+tt.depth+" and strictDepth is true");dt.push("["+nt.slice(lt.index)+"]")}return parseObject(dt,et,tt,rt)}},normalizeParseOptions=function _e(_){if(!_)return defaults;if(typeof _.allowEmptyArrays<"u"&&typeof _.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof _.decodeDotInKeys<"u"&&typeof _.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(_.decoder!==null&&typeof _.decoder<"u"&&typeof _.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof _.charset<"u"&&_.charset!=="utf-8"&&_.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var et=typeof _.charset>"u"?defaults.charset:_.charset,tt=typeof _.duplicates>"u"?defaults.duplicates:_.duplicates;if(tt!=="combine"&&tt!=="first"&&tt!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var rt=typeof _.allowDots>"u"?_.decodeDotInKeys===!0?!0:defaults.allowDots:!!_.allowDots;return{allowDots:rt,allowEmptyArrays:typeof _.allowEmptyArrays=="boolean"?!!_.allowEmptyArrays:defaults.allowEmptyArrays,allowPrototypes:typeof _.allowPrototypes=="boolean"?_.allowPrototypes:defaults.allowPrototypes,allowSparse:typeof _.allowSparse=="boolean"?_.allowSparse:defaults.allowSparse,arrayLimit:typeof _.arrayLimit=="number"?_.arrayLimit:defaults.arrayLimit,charset:et,charsetSentinel:typeof _.charsetSentinel=="boolean"?_.charsetSentinel:defaults.charsetSentinel,comma:typeof _.comma=="boolean"?_.comma:defaults.comma,decodeDotInKeys:typeof _.decodeDotInKeys=="boolean"?_.decodeDotInKeys:defaults.decodeDotInKeys,decoder:typeof _.decoder=="function"?_.decoder:defaults.decoder,delimiter:typeof _.delimiter=="string"||utils.isRegExp(_.delimiter)?_.delimiter:defaults.delimiter,depth:typeof _.depth=="number"||_.depth===!1?+_.depth:defaults.depth,duplicates:tt,ignoreQueryPrefix:_.ignoreQueryPrefix===!0,interpretNumericEntities:typeof _.interpretNumericEntities=="boolean"?_.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:typeof _.parameterLimit=="number"?_.parameterLimit:defaults.parameterLimit,parseArrays:_.parseArrays!==!1,plainObjects:typeof _.plainObjects=="boolean"?_.plainObjects:defaults.plainObjects,strictDepth:typeof _.strictDepth=="boolean"?!!_.strictDepth:defaults.strictDepth,strictNullHandling:typeof _.strictNullHandling=="boolean"?_.strictNullHandling:defaults.strictNullHandling}},parse$2=function(_e,_){var et=normalizeParseOptions(_);if(_e===""||_e===null||typeof _e>"u")return et.plainObjects?{__proto__:null}:{};for(var tt=typeof _e=="string"?parseValues(_e,et):_e,rt=et.plainObjects?{__proto__:null}:{},nt=Object.keys(tt),ot=0;ot<nt.length;++ot){var at=nt[ot],lt=parseKeys(at,tt[at],et,typeof _e=="string");rt=utils.merge(rt,lt,et)}return et.allowSparse===!0?rt:utils.compact(rt)},stringify=stringify_1,parse$1=parse$2,formats$1=formats$4,lib={formats:formats$1,parse:parse$1,stringify},punycode=punycodeExports;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=lib;function urlParse(_e,_,et){if(_e&&typeof _e=="object"&&_e instanceof Url)return _e;var tt=new Url;return tt.parse(_e,_,et),tt}Url.prototype.parse=function(_e,_,et){if(typeof _e!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof _e);var tt=_e.indexOf("?"),rt=tt!==-1&&tt<_e.indexOf("#")?"?":"#",nt=_e.split(rt),ot=/\\/g;nt[0]=nt[0].replace(ot,"/"),_e=nt.join(rt);var at=_e;if(at=at.trim(),!et&&_e.split("#").length===1){var lt=simplePathPattern.exec(at);if(lt)return this.path=at,this.href=at,this.pathname=lt[1],lt[2]?(this.search=lt[2],_?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):_&&(this.search="",this.query={}),this}var ct=protocolPattern.exec(at);if(ct){ct=ct[0];var dt=ct.toLowerCase();this.protocol=dt,at=at.substr(ct.length)}if(et||ct||at.match(/^\/\/[^@/]+@[^@/]+/)){var st=at.substr(0,2)==="//";st&&!(ct&&hostlessProtocol[ct])&&(at=at.substr(2),this.slashes=!0)}if(!hostlessProtocol[ct]&&(st||ct&&!slashedProtocol[ct])){for(var it=-1,ut=0;ut<hostEndingChars.length;ut++){var ht=at.indexOf(hostEndingChars[ut]);ht!==-1&&(it===-1||ht<it)&&(it=ht)}var ft,gt;it===-1?gt=at.lastIndexOf("@"):gt=at.lastIndexOf("@",it),gt!==-1&&(ft=at.slice(0,gt),at=at.slice(gt+1),this.auth=decodeURIComponent(ft)),it=-1;for(var ut=0;ut<nonHostChars.length;ut++){var ht=at.indexOf(nonHostChars[ut]);ht!==-1&&(it===-1||ht<it)&&(it=ht)}it===-1&&(it=at.length),this.host=at.slice(0,it),at=at.slice(it),this.parseHost(),this.hostname=this.hostname||"";var mt=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!mt)for(var yt=this.hostname.split(/\./),ut=0,bt=yt.length;ut<bt;ut++){var vt=yt[ut];if(vt&&!vt.match(hostnamePartPattern)){for(var xt="",wt=0,St=vt.length;wt<St;wt++)vt.charCodeAt(wt)>127?xt+="x":xt+=vt[wt];if(!xt.match(hostnamePartPattern)){var Et=yt.slice(0,ut),_t=yt.slice(ut+1),Tt=vt.match(hostnamePartStart);Tt&&(Et.push(Tt[1]),_t.unshift(Tt[2])),_t.length&&(at="/"+_t.join(".")+at),this.hostname=Et.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),mt||(this.hostname=punycode.toASCII(this.hostname));var Rt=this.port?":"+this.port:"",Ot=this.hostname||"";this.host=Ot+Rt,this.href+=this.host,mt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),at[0]!=="/"&&(at="/"+at))}if(!unsafeProtocol[dt])for(var ut=0,bt=autoEscape.length;ut<bt;ut++){var At=autoEscape[ut];if(at.indexOf(At)!==-1){var Ct=encodeURIComponent(At);Ct===At&&(Ct=escape(At)),at=at.split(At).join(Ct)}}var $t=at.indexOf("#");$t!==-1&&(this.hash=at.substr($t),at=at.slice(0,$t));var Mt=at.indexOf("?");if(Mt!==-1?(this.search=at.substr(Mt),this.query=at.substr(Mt+1),_&&(this.query=querystring.parse(this.query)),at=at.slice(0,Mt)):_&&(this.search="",this.query={}),at&&(this.pathname=at),slashedProtocol[dt]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Rt=this.pathname||"",Dt=this.search||"";this.path=Rt+Dt}return this.href=this.format(),this};function urlFormat(_e){return typeof _e=="string"&&(_e=urlParse(_e)),_e instanceof Url?_e.format():Url.prototype.format.call(_e)}Url.prototype.format=function(){var _e=this.auth||"";_e&&(_e=encodeURIComponent(_e),_e=_e.replace(/%3A/i,":"),_e+="@");var _=this.protocol||"",et=this.pathname||"",tt=this.hash||"",rt=!1,nt="";this.host?rt=_e+this.host:this.hostname&&(rt=_e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(rt+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(nt=querystring.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var ot=this.search||nt&&"?"+nt||"";return _&&_.substr(-1)!==":"&&(_+=":"),this.slashes||(!_||slashedProtocol[_])&&rt!==!1?(rt="//"+(rt||""),et&&et.charAt(0)!=="/"&&(et="/"+et)):rt||(rt=""),tt&&tt.charAt(0)!=="#"&&(tt="#"+tt),ot&&ot.charAt(0)!=="?"&&(ot="?"+ot),et=et.replace(/[?#]/g,function(at){return encodeURIComponent(at)}),ot=ot.replace("#","%23"),_+rt+et+ot+tt};function urlResolve(_e,_){return urlParse(_e,!1,!0).resolve(_)}Url.prototype.resolve=function(_e){return this.resolveObject(urlParse(_e,!1,!0)).format()};Url.prototype.resolveObject=function(_e){if(typeof _e=="string"){var _=new Url;_.parse(_e,!1,!0),_e=_}for(var et=new Url,tt=Object.keys(this),rt=0;rt<tt.length;rt++){var nt=tt[rt];et[nt]=this[nt]}if(et.hash=_e.hash,_e.href==="")return et.href=et.format(),et;if(_e.slashes&&!_e.protocol){for(var ot=Object.keys(_e),at=0;at<ot.length;at++){var lt=ot[at];lt!=="protocol"&&(et[lt]=_e[lt])}return slashedProtocol[et.protocol]&&et.hostname&&!et.pathname&&(et.pathname="/",et.path=et.pathname),et.href=et.format(),et}if(_e.protocol&&_e.protocol!==et.protocol){if(!slashedProtocol[_e.protocol]){for(var ct=Object.keys(_e),dt=0;dt<ct.length;dt++){var st=ct[dt];et[st]=_e[st]}return et.href=et.format(),et}if(et.protocol=_e.protocol,!_e.host&&!hostlessProtocol[_e.protocol]){for(var bt=(_e.pathname||"").split("/");bt.length&&!(_e.host=bt.shift()););_e.host||(_e.host=""),_e.hostname||(_e.hostname=""),bt[0]!==""&&bt.unshift(""),bt.length<2&&bt.unshift(""),et.pathname=bt.join("/")}else et.pathname=_e.pathname;if(et.search=_e.search,et.query=_e.query,et.host=_e.host||"",et.auth=_e.auth,et.hostname=_e.hostname||_e.host,et.port=_e.port,et.pathname||et.search){var it=et.pathname||"",ut=et.search||"";et.path=it+ut}return et.slashes=et.slashes||_e.slashes,et.href=et.format(),et}var ht=et.pathname&&et.pathname.charAt(0)==="/",ft=_e.host||_e.pathname&&_e.pathname.charAt(0)==="/",gt=ft||ht||et.host&&_e.pathname,mt=gt,yt=et.pathname&&et.pathname.split("/")||[],bt=_e.pathname&&_e.pathname.split("/")||[],vt=et.protocol&&!slashedProtocol[et.protocol];if(vt&&(et.hostname="",et.port=null,et.host&&(yt[0]===""?yt[0]=et.host:yt.unshift(et.host)),et.host="",_e.protocol&&(_e.hostname=null,_e.port=null,_e.host&&(bt[0]===""?bt[0]=_e.host:bt.unshift(_e.host)),_e.host=null),gt=gt&&(bt[0]===""||yt[0]==="")),ft)et.host=_e.host||_e.host===""?_e.host:et.host,et.hostname=_e.hostname||_e.hostname===""?_e.hostname:et.hostname,et.search=_e.search,et.query=_e.query,yt=bt;else if(bt.length)yt||(yt=[]),yt.pop(),yt=yt.concat(bt),et.search=_e.search,et.query=_e.query;else if(_e.search!=null){if(vt){et.host=yt.shift(),et.hostname=et.host;var xt=et.host&&et.host.indexOf("@")>0?et.host.split("@"):!1;xt&&(et.auth=xt.shift(),et.hostname=xt.shift(),et.host=et.hostname)}return et.search=_e.search,et.query=_e.query,(et.pathname!==null||et.search!==null)&&(et.path=(et.pathname?et.pathname:"")+(et.search?et.search:"")),et.href=et.format(),et}if(!yt.length)return et.pathname=null,et.search?et.path="/"+et.search:et.path=null,et.href=et.format(),et;for(var wt=yt.slice(-1)[0],St=(et.host||_e.host||yt.length>1)&&(wt==="."||wt==="..")||wt==="",Et=0,_t=yt.length;_t>=0;_t--)wt=yt[_t],wt==="."?yt.splice(_t,1):wt===".."?(yt.splice(_t,1),Et++):Et&&(yt.splice(_t,1),Et--);if(!gt&&!mt)for(;Et--;Et)yt.unshift("..");gt&&yt[0]!==""&&(!yt[0]||yt[0].charAt(0)!=="/")&&yt.unshift(""),St&&yt.join("/").substr(-1)!=="/"&&yt.push("");var Tt=yt[0]===""||yt[0]&&yt[0].charAt(0)==="/";if(vt){et.hostname=Tt?"":yt.length?yt.shift():"",et.host=et.hostname;var xt=et.host&&et.host.indexOf("@")>0?et.host.split("@"):!1;xt&&(et.auth=xt.shift(),et.hostname=xt.shift(),et.host=et.hostname)}return gt=gt||et.host&&yt.length,gt&&!Tt&&yt.unshift(""),yt.length>0?et.pathname=yt.join("/"):(et.pathname=null,et.path=null),(et.pathname!==null||et.search!==null)&&(et.path=(et.pathname?et.pathname:"")+(et.search?et.search:"")),et.auth=_e.auth||et.auth,et.slashes=et.slashes||_e.slashes,et.href=et.format(),et};Url.prototype.parseHost=function(){var _e=this.host,_=portPattern.exec(_e);_&&(_=_[0],_!==":"&&(this.port=_.substr(1)),_e=_e.substr(0,_e.length-_.length)),_e&&(this.hostname=_e)};var parse=urlParse,resolve=urlResolve,format=urlFormat;const warnings={};function deprecation(_e,_,et=3){if(warnings[_])return;let tt=new Error().stack;typeof tt>"u"?console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${_e}`):(tt=tt.split(`
`).splice(et).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${_}
Deprecated since v${_e}`),console.warn(tt),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${_e}`),console.warn(tt))),warnings[_]=!0}const url={get parse(){return deprecation("7.3.0","utils.url.parse is deprecated, use native URL API instead."),parse},get format(){return deprecation("7.3.0","utils.url.format is deprecated, use native URL API instead."),format},get resolve(){return deprecation("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),resolve}};function assertPath(_e){if(typeof _e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(_e)}`)}function removeUrlParams(_e){return _e.split("?")[0].split("#")[0]}function escapeRegExp(_e){return _e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(_e,_,et){return _e.replace(new RegExp(escapeRegExp(_),"g"),et)}function normalizeStringPosix(_e,_){let et="",tt=0,rt=-1,nt=0,ot=-1;for(let at=0;at<=_e.length;++at){if(at<_e.length)ot=_e.charCodeAt(at);else{if(ot===47)break;ot=47}if(ot===47){if(!(rt===at-1||nt===1))if(rt!==at-1&&nt===2){if(et.length<2||tt!==2||et.charCodeAt(et.length-1)!==46||et.charCodeAt(et.length-2)!==46){if(et.length>2){const lt=et.lastIndexOf("/");if(lt!==et.length-1){lt===-1?(et="",tt=0):(et=et.slice(0,lt),tt=et.length-1-et.lastIndexOf("/")),rt=at,nt=0;continue}}else if(et.length===2||et.length===1){et="",tt=0,rt=at,nt=0;continue}}}else et.length>0?et+=`/${_e.slice(rt+1,at)}`:et=_e.slice(rt+1,at),tt=at-rt-1;rt=at,nt=0}else ot===46&&nt!==-1?++nt:nt=-1}return et}const path={toPosix(_e){return replaceAll(_e,"\\","/")},isUrl(_e){return/^https?:/.test(this.toPosix(_e))},isDataUrl(_e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(_e)},isBlobUrl(_e){return _e.startsWith("blob:")},hasProtocol(_e){return/^[^/:]+:/.test(this.toPosix(_e))},getProtocol(_e){assertPath(_e),_e=this.toPosix(_e);const _=/^file:\/\/\//.exec(_e);if(_)return _[0];const et=/^[^/:]+:\/{0,2}/.exec(_e);return et?et[0]:""},toAbsolute(_e,_,et){if(assertPath(_e),this.isDataUrl(_e)||this.isBlobUrl(_e))return _e;const tt=removeUrlParams(this.toPosix(_??settings.ADAPTER.getBaseUrl())),rt=removeUrlParams(this.toPosix(et??this.rootname(tt)));return _e=this.toPosix(_e),_e.startsWith("/")?path.join(rt,_e.slice(1)):this.isAbsolute(_e)?_e:this.join(tt,_e)},normalize(_e){if(assertPath(_e),_e.length===0)return".";if(this.isDataUrl(_e)||this.isBlobUrl(_e))return _e;_e=this.toPosix(_e);let _="";const et=_e.startsWith("/");this.hasProtocol(_e)&&(_=this.rootname(_e),_e=_e.slice(_.length));const tt=_e.endsWith("/");return _e=normalizeStringPosix(_e),_e.length>0&&tt&&(_e+="/"),et?`/${_e}`:_+_e},isAbsolute(_e){return assertPath(_e),_e=this.toPosix(_e),this.hasProtocol(_e)?!0:_e.startsWith("/")},join(..._e){if(_e.length===0)return".";let _;for(let et=0;et<_e.length;++et){const tt=_e[et];if(assertPath(tt),tt.length>0)if(_===void 0)_=tt;else{const rt=_e[et-1]??"";this.joinExtensions.includes(this.extname(rt).toLowerCase())?_+=`/../${tt}`:_+=`/${tt}`}}return _===void 0?".":this.normalize(_)},dirname(_e){if(assertPath(_e),_e.length===0)return".";_e=this.toPosix(_e);let _=_e.charCodeAt(0);const et=_===47;let tt=-1,rt=!0;const nt=this.getProtocol(_e),ot=_e;_e=_e.slice(nt.length);for(let at=_e.length-1;at>=1;--at)if(_=_e.charCodeAt(at),_===47){if(!rt){tt=at;break}}else rt=!1;return tt===-1?et?"/":this.isUrl(ot)?nt+_e:nt:et&&tt===1?"//":nt+_e.slice(0,tt)},rootname(_e){assertPath(_e),_e=this.toPosix(_e);let _="";if(_e.startsWith("/")?_="/":_=this.getProtocol(_e),this.isUrl(_e)){const et=_e.indexOf("/",_.length);et!==-1?_=_e.slice(0,et):_=_e,_.endsWith("/")||(_+="/")}return _},basename(_e,_){assertPath(_e),_&&assertPath(_),_e=removeUrlParams(this.toPosix(_e));let et=0,tt=-1,rt=!0,nt;if(_!==void 0&&_.length>0&&_.length<=_e.length){if(_.length===_e.length&&_===_e)return"";let ot=_.length-1,at=-1;for(nt=_e.length-1;nt>=0;--nt){const lt=_e.charCodeAt(nt);if(lt===47){if(!rt){et=nt+1;break}}else at===-1&&(rt=!1,at=nt+1),ot>=0&&(lt===_.charCodeAt(ot)?--ot===-1&&(tt=nt):(ot=-1,tt=at))}return et===tt?tt=at:tt===-1&&(tt=_e.length),_e.slice(et,tt)}for(nt=_e.length-1;nt>=0;--nt)if(_e.charCodeAt(nt)===47){if(!rt){et=nt+1;break}}else tt===-1&&(rt=!1,tt=nt+1);return tt===-1?"":_e.slice(et,tt)},extname(_e){assertPath(_e),_e=removeUrlParams(this.toPosix(_e));let _=-1,et=0,tt=-1,rt=!0,nt=0;for(let ot=_e.length-1;ot>=0;--ot){const at=_e.charCodeAt(ot);if(at===47){if(!rt){et=ot+1;break}continue}tt===-1&&(rt=!1,tt=ot+1),at===46?_===-1?_=ot:nt!==1&&(nt=1):_!==-1&&(nt=-1)}return _===-1||tt===-1||nt===0||nt===1&&_===tt-1&&_===et+1?"":_e.slice(_,tt)},parse(_e){assertPath(_e);const _={root:"",dir:"",base:"",ext:"",name:""};if(_e.length===0)return _;_e=removeUrlParams(this.toPosix(_e));let et=_e.charCodeAt(0);const tt=this.isAbsolute(_e);let rt;_.root=this.rootname(_e),tt||this.hasProtocol(_e)?rt=1:rt=0;let nt=-1,ot=0,at=-1,lt=!0,ct=_e.length-1,dt=0;for(;ct>=rt;--ct){if(et=_e.charCodeAt(ct),et===47){if(!lt){ot=ct+1;break}continue}at===-1&&(lt=!1,at=ct+1),et===46?nt===-1?nt=ct:dt!==1&&(dt=1):nt!==-1&&(dt=-1)}return nt===-1||at===-1||dt===0||dt===1&&nt===at-1&&nt===ot+1?at!==-1&&(ot===0&&tt?_.base=_.name=_e.slice(1,at):_.base=_.name=_e.slice(ot,at)):(ot===0&&tt?(_.name=_e.slice(1,nt),_.base=_e.slice(1,at)):(_.name=_e.slice(ot,nt),_.base=_e.slice(ot,at)),_.ext=_e.slice(nt,at)),_.dir=this.dirname(_e),_},sep:"/",delimiter:":",joinExtensions:[".html"]};let promise;async function detectVideoAlphaMode(){return promise??(promise=(async()=>{var nt;const _e=document.createElement("canvas").getContext("webgl");if(!_e)return ALPHA_MODES.UNPACK;const _=await new Promise(ot=>{const at=document.createElement("video");at.onloadeddata=()=>ot(at),at.onerror=()=>ot(null),at.autoplay=!1,at.crossOrigin="anonymous",at.preload="auto",at.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",at.load()});if(!_)return ALPHA_MODES.UNPACK;const et=_e.createTexture();_e.bindTexture(_e.TEXTURE_2D,et);const tt=_e.createFramebuffer();_e.bindFramebuffer(_e.FRAMEBUFFER,tt),_e.framebufferTexture2D(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0,_e.TEXTURE_2D,et,0),_e.pixelStorei(_e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),_e.pixelStorei(_e.UNPACK_COLORSPACE_CONVERSION_WEBGL,_e.NONE),_e.texImage2D(_e.TEXTURE_2D,0,_e.RGBA,_e.RGBA,_e.UNSIGNED_BYTE,_);const rt=new Uint8Array(4);return _e.readPixels(0,0,1,1,_e.RGBA,_e.UNSIGNED_BYTE,rt),_e.deleteFramebuffer(tt),_e.deleteTexture(et),(nt=_e.getExtension("WEBGL_lose_context"))==null||nt.loseContext(),rt[0]<=rt[3]?ALPHA_MODES.PMA:ALPHA_MODES.UNPACK})()),promise}let supported;function isWebGLSupported(){return typeof supported>"u"&&(supported=function(){var _;const _e={stencil:!0,failIfMajorPerformanceCaveat:settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!settings.ADAPTER.getWebGLRenderingContext())return!1;const et=settings.ADAPTER.createCanvas();let tt=et.getContext("webgl",_e)||et.getContext("experimental-webgl",_e);const rt=!!((_=tt==null?void 0:tt.getContextAttributes())!=null&&_.stencil);if(tt){const nt=tt.getExtension("WEBGL_lose_context");nt&&nt.loseContext()}return tt=null,rt}catch{return!1}}()),supported}var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(_e){return typeof _e=="string"?_e.length>0:typeof _e=="number"},n=function(_e,_,et){return _===void 0&&(_=0),et===void 0&&(et=Math.pow(10,_)),Math.round(et*_e)/et+0},e=function(_e,_,et){return _===void 0&&(_=0),et===void 0&&(et=1),_e>et?et:_e>_?_e:_},u=function(_e){return(_e=isFinite(_e)?_e%360:0)>0?_e:_e+360},a=function(_e){return{r:e(_e.r,0,255),g:e(_e.g,0,255),b:e(_e.b,0,255),a:e(_e.a)}},o=function(_e){return{r:n(_e.r),g:n(_e.g),b:n(_e.b),a:n(_e.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(_e){var _=_e.toString(16);return _.length<2?"0"+_:_},h=function(_e){var _=_e.r,et=_e.g,tt=_e.b,rt=_e.a,nt=Math.max(_,et,tt),ot=nt-Math.min(_,et,tt),at=ot?nt===_?(et-tt)/ot:nt===et?2+(tt-_)/ot:4+(_-et)/ot:0;return{h:60*(at<0?at+6:at),s:nt?ot/nt*100:0,v:nt/255*100,a:rt}},b=function(_e){var _=_e.h,et=_e.s,tt=_e.v,rt=_e.a;_=_/360*6,et/=100,tt/=100;var nt=Math.floor(_),ot=tt*(1-et),at=tt*(1-(_-nt)*et),lt=tt*(1-(1-_+nt)*et),ct=nt%6;return{r:255*[tt,at,ot,ot,lt,tt][ct],g:255*[lt,tt,tt,at,ot,ot][ct],b:255*[ot,ot,lt,tt,tt,at][ct],a:rt}},g=function(_e){return{h:u(_e.h),s:e(_e.s,0,100),l:e(_e.l,0,100),a:e(_e.a)}},d=function(_e){return{h:n(_e.h),s:n(_e.s),l:n(_e.l),a:n(_e.a,3)}},f=function(_e){return b((et=(_=_e).s,{h:_.h,s:(et*=((tt=_.l)<50?tt:100-tt)/100)>0?2*et/(tt+et)*100:0,v:tt+et,a:_.a}));var _,et,tt},c=function(_e){return{h:(_=h(_e)).h,s:(rt=(200-(et=_.s))*(tt=_.v)/100)>0&&rt<200?et*tt/100/(rt<=100?rt:200-rt)*100:0,l:rt/2,a:_.a};var _,et,tt,rt},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y={string:[[function(_e){var _=i.exec(_e);return _?(_e=_[1]).length<=4?{r:parseInt(_e[0]+_e[0],16),g:parseInt(_e[1]+_e[1],16),b:parseInt(_e[2]+_e[2],16),a:_e.length===4?n(parseInt(_e[3]+_e[3],16)/255,2):1}:_e.length===6||_e.length===8?{r:parseInt(_e.substr(0,2),16),g:parseInt(_e.substr(2,2),16),b:parseInt(_e.substr(4,2),16),a:_e.length===8?n(parseInt(_e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(_e){var _=v.exec(_e)||m.exec(_e);return _?_[2]!==_[4]||_[4]!==_[6]?null:a({r:Number(_[1])/(_[2]?100/255:1),g:Number(_[3])/(_[4]?100/255:1),b:Number(_[5])/(_[6]?100/255:1),a:_[7]===void 0?1:Number(_[7])/(_[8]?100:1)}):null},"rgb"],[function(_e){var _=l.exec(_e)||p.exec(_e);if(!_)return null;var et,tt,rt=g({h:(et=_[1],tt=_[2],tt===void 0&&(tt="deg"),Number(et)*(r[tt]||1)),s:Number(_[3]),l:Number(_[4]),a:_[5]===void 0?1:Number(_[5])/(_[6]?100:1)});return f(rt)},"hsl"]],object:[[function(_e){var _=_e.r,et=_e.g,tt=_e.b,rt=_e.a,nt=rt===void 0?1:rt;return t(_)&&t(et)&&t(tt)?a({r:Number(_),g:Number(et),b:Number(tt),a:Number(nt)}):null},"rgb"],[function(_e){var _=_e.h,et=_e.s,tt=_e.l,rt=_e.a,nt=rt===void 0?1:rt;if(!t(_)||!t(et)||!t(tt))return null;var ot=g({h:Number(_),s:Number(et),l:Number(tt),a:Number(nt)});return f(ot)},"hsl"],[function(_e){var _=_e.h,et=_e.s,tt=_e.v,rt=_e.a,nt=rt===void 0?1:rt;if(!t(_)||!t(et)||!t(tt))return null;var ot=function(at){return{h:u(at.h),s:e(at.s,0,100),v:e(at.v,0,100),a:e(at.a)}}({h:Number(_),s:Number(et),v:Number(tt),a:Number(nt)});return b(ot)},"hsv"]]},N=function(_e,_){for(var et=0;et<_.length;et++){var tt=_[et][0](_e);if(tt)return[tt,_[et][1]]}return[null,void 0]},x=function(_e){return typeof _e=="string"?N(_e.trim(),y.string):typeof _e=="object"&&_e!==null?N(_e,y.object):[null,void 0]},M=function(_e,_){var et=c(_e);return{h:et.h,s:e(et.s+100*_,0,100),l:et.l,a:et.a}},H=function(_e){return(299*_e.r+587*_e.g+114*_e.b)/1e3/255},$=function(_e,_){var et=c(_e);return{h:et.h,s:et.s,l:e(et.l+100*_,0,100),a:et.a}},j=function(){function _e(_){this.parsed=x(_)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return _e.prototype.isValid=function(){return this.parsed!==null},_e.prototype.brightness=function(){return n(H(this.rgba),2)},_e.prototype.isDark=function(){return H(this.rgba)<.5},_e.prototype.isLight=function(){return H(this.rgba)>=.5},_e.prototype.toHex=function(){return _=o(this.rgba),et=_.r,tt=_.g,rt=_.b,ot=(nt=_.a)<1?s(n(255*nt)):"","#"+s(et)+s(tt)+s(rt)+ot;var _,et,tt,rt,nt,ot},_e.prototype.toRgb=function(){return o(this.rgba)},_e.prototype.toRgbString=function(){return _=o(this.rgba),et=_.r,tt=_.g,rt=_.b,(nt=_.a)<1?"rgba("+et+", "+tt+", "+rt+", "+nt+")":"rgb("+et+", "+tt+", "+rt+")";var _,et,tt,rt,nt},_e.prototype.toHsl=function(){return d(c(this.rgba))},_e.prototype.toHslString=function(){return _=d(c(this.rgba)),et=_.h,tt=_.s,rt=_.l,(nt=_.a)<1?"hsla("+et+", "+tt+"%, "+rt+"%, "+nt+")":"hsl("+et+", "+tt+"%, "+rt+"%)";var _,et,tt,rt,nt},_e.prototype.toHsv=function(){return _=h(this.rgba),{h:n(_.h),s:n(_.s),v:n(_.v),a:n(_.a,3)};var _},_e.prototype.invert=function(){return w({r:255-(_=this.rgba).r,g:255-_.g,b:255-_.b,a:_.a});var _},_e.prototype.saturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,_))},_e.prototype.desaturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,-_))},_e.prototype.grayscale=function(){return w(M(this.rgba,-1))},_e.prototype.lighten=function(_){return _===void 0&&(_=.1),w($(this.rgba,_))},_e.prototype.darken=function(_){return _===void 0&&(_=.1),w($(this.rgba,-_))},_e.prototype.rotate=function(_){return _===void 0&&(_=15),this.hue(this.hue()+_)},_e.prototype.alpha=function(_){return typeof _=="number"?w({r:(et=this.rgba).r,g:et.g,b:et.b,a:_}):n(this.rgba.a,3);var et},_e.prototype.hue=function(_){var et=c(this.rgba);return typeof _=="number"?w({h:_,s:et.s,l:et.l,a:et.a}):n(et.h)},_e.prototype.isEqual=function(_){return this.toHex()===w(_).toHex()},_e}(),w=function(_e){return _e instanceof j?_e:new j(_e)},S=[],k=function(_e){_e.forEach(function(_){S.indexOf(_)<0&&(_(j,y),S.push(_))})};function namesPlugin(_e,_){var et={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},tt={};for(var rt in et)tt[et[rt]]=rt;var nt={};_e.prototype.toName=function(ot){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var at,lt,ct=tt[this.toHex()];if(ct)return ct;if(ot!=null&&ot.closest){var dt=this.toRgb(),st=1/0,it="black";if(!nt.length)for(var ut in et)nt[ut]=new _e(et[ut]).toRgb();for(var ht in et){var ft=(at=dt,lt=nt[ht],Math.pow(at.r-lt.r,2)+Math.pow(at.g-lt.g,2)+Math.pow(at.b-lt.b,2));ft<st&&(st=ft,it=ht)}return it}},_.string.push([function(ot){var at=ot.toLowerCase(),lt=at==="transparent"?"#0000":et[at];return lt?new _e(lt).toRgb():null},"name"])}k([namesPlugin]);const _Color=class Jn{constructor(_=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=_}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(_){return this.value=_,this}set value(_){if(_ instanceof Jn)this._value=this.cloneSource(_._value),this._int=_._int,this._components.set(_._components);else{if(_===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,_))&&(this.normalize(_),this._value=this.cloneSource(_))}}get value(){return this._value}cloneSource(_){return typeof _=="string"||typeof _=="number"||_ instanceof Number||_===null?_:Array.isArray(_)||ArrayBuffer.isView(_)?_.slice(0):typeof _=="object"&&_!==null?{..._}:_}isSourceEqual(_,et){const tt=typeof _;if(tt!==typeof et)return!1;if(tt==="number"||tt==="string"||_ instanceof Number)return _===et;if(Array.isArray(_)&&Array.isArray(et)||ArrayBuffer.isView(_)&&ArrayBuffer.isView(et))return _.length!==et.length?!1:_.every((rt,nt)=>rt===et[nt]);if(_!==null&&et!==null){const rt=Object.keys(_),nt=Object.keys(et);return rt.length!==nt.length?!1:rt.every(ot=>_[ot]===et[ot])}return _===et}toRgba(){const[_,et,tt,rt]=this._components;return{r:_,g:et,b:tt,a:rt}}toRgb(){const[_,et,tt]=this._components;return{r:_,g:et,b:tt}}toRgbaString(){const[_,et,tt]=this.toUint8RgbArray();return`rgba(${_},${et},${tt},${this.alpha})`}toUint8RgbArray(_){const[et,tt,rt]=this._components;return _=_??[],_[0]=Math.round(et*255),_[1]=Math.round(tt*255),_[2]=Math.round(rt*255),_}toRgbArray(_){_=_??[];const[et,tt,rt]=this._components;return _[0]=et,_[1]=tt,_[2]=rt,_}toNumber(){return this._int}toLittleEndianNumber(){const _=this._int;return(_>>16)+(_&65280)+((_&255)<<16)}multiply(_){const[et,tt,rt,nt]=Jn.temp.setValue(_)._components;return this._components[0]*=et,this._components[1]*=tt,this._components[2]*=rt,this._components[3]*=nt,this.refreshInt(),this._value=null,this}premultiply(_,et=!0){return et&&(this._components[0]*=_,this._components[1]*=_,this._components[2]*=_),this._components[3]=_,this.refreshInt(),this._value=null,this}toPremultiplied(_,et=!0){if(_===1)return(255<<24)+this._int;if(_===0)return et?0:this._int;let tt=this._int>>16&255,rt=this._int>>8&255,nt=this._int&255;return et&&(tt=tt*_+.5|0,rt=rt*_+.5|0,nt=nt*_+.5|0),(_*255<<24)+(tt<<16)+(rt<<8)+nt}toHex(){const _=this._int.toString(16);return`#${"000000".substring(0,6-_.length)+_}`}toHexa(){const _=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-_.length)+_}setAlpha(_){return this._components[3]=this._clamp(_),this}round(_){const[et,tt,rt]=this._components;return this._components[0]=Math.round(et*_)/_,this._components[1]=Math.round(tt*_)/_,this._components[2]=Math.round(rt*_)/_,this.refreshInt(),this._value=null,this}toArray(_){_=_??[];const[et,tt,rt,nt]=this._components;return _[0]=et,_[1]=tt,_[2]=rt,_[3]=nt,_}normalize(_){let et,tt,rt,nt;if((typeof _=="number"||_ instanceof Number)&&_>=0&&_<=16777215){const ot=_;et=(ot>>16&255)/255,tt=(ot>>8&255)/255,rt=(ot&255)/255,nt=1}else if((Array.isArray(_)||_ instanceof Float32Array)&&_.length>=3&&_.length<=4)_=this._clamp(_),[et,tt,rt,nt=1]=_;else if((_ instanceof Uint8Array||_ instanceof Uint8ClampedArray)&&_.length>=3&&_.length<=4)_=this._clamp(_,0,255),[et,tt,rt,nt=255]=_,et/=255,tt/=255,rt/=255,nt/=255;else if(typeof _=="string"||typeof _=="object"){if(typeof _=="string"){const at=Jn.HEX_PATTERN.exec(_);at&&(_=`#${at[2]}`)}const ot=w(_);ot.isValid()&&({r:et,g:tt,b:rt,a:nt}=ot.rgba,et/=255,tt/=255,rt/=255)}if(et!==void 0)this._components[0]=et,this._components[1]=tt,this._components[2]=rt,this._components[3]=nt,this.refreshInt();else throw new Error(`Unable to convert color ${_}`)}refreshInt(){this._clamp(this._components);const[_,et,tt]=this._components;this._int=(_*255<<16)+(et*255<<8)+(tt*255|0)}_clamp(_,et=0,tt=1){return typeof _=="number"?Math.min(Math.max(_,et),tt):(_.forEach((rt,nt)=>{_[nt]=Math.min(Math.max(rt,et),tt)}),_)}};_Color.shared=new _Color,_Color.temp=new _Color,_Color.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Color=_Color;function hex2string(_e){return deprecation("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Color.shared.setValue(_e).toHex()}function rgb2hex(_e){return deprecation("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Color.shared.setValue(_e).toNumber()}function mapPremultipliedBlendModes(){const _e=[],_=[];for(let tt=0;tt<32;tt++)_e[tt]=tt,_[tt]=tt;_e[BLEND_MODES.NORMAL_NPM]=BLEND_MODES.NORMAL,_e[BLEND_MODES.ADD_NPM]=BLEND_MODES.ADD,_e[BLEND_MODES.SCREEN_NPM]=BLEND_MODES.SCREEN,_[BLEND_MODES.NORMAL]=BLEND_MODES.NORMAL_NPM,_[BLEND_MODES.ADD]=BLEND_MODES.ADD_NPM,_[BLEND_MODES.SCREEN]=BLEND_MODES.SCREEN_NPM;const et=[];return et.push(_),et.push(_e),et}const premultiplyBlendMode=mapPremultipliedBlendModes();function correctBlendMode(_e,_){return premultiplyBlendMode[_?1:0][_e]}function createIndicesForQuads(_e,_=null){const et=_e*6;if(_=_||new Uint16Array(et),_.length!==et)throw new Error(`Out buffer length is incorrect, got ${_.length} and expected ${et}`);for(let tt=0,rt=0;tt<et;tt+=6,rt+=4)_[tt+0]=rt+0,_[tt+1]=rt+1,_[tt+2]=rt+2,_[tt+3]=rt+0,_[tt+4]=rt+2,_[tt+5]=rt+3;return _}function getBufferType(_e){if(_e.BYTES_PER_ELEMENT===4)return _e instanceof Float32Array?"Float32Array":_e instanceof Uint32Array?"Uint32Array":"Int32Array";if(_e.BYTES_PER_ELEMENT===2){if(_e instanceof Uint16Array)return"Uint16Array"}else if(_e.BYTES_PER_ELEMENT===1&&_e instanceof Uint8Array)return"Uint8Array";return null}function nextPow2(_e){return _e+=_e===0?1:0,--_e,_e|=_e>>>1,_e|=_e>>>2,_e|=_e>>>4,_e|=_e>>>8,_e|=_e>>>16,_e+1}function isPow2(_e){return!(_e&_e-1)&&!!_e}function log2(_e){let _=(_e>65535?1:0)<<4;_e>>>=_;let et=(_e>255?1:0)<<3;return _e>>>=et,_|=et,et=(_e>15?1:0)<<2,_e>>>=et,_|=et,et=(_e>3?1:0)<<1,_e>>>=et,_|=et,_|_e>>1}function removeItems(_e,_,et){const tt=_e.length;let rt;if(_>=tt||et===0)return;et=_+et>tt?tt-_:et;const nt=tt-et;for(rt=_;rt<nt;++rt)_e[rt]=_e[rt+et];_e.length=nt}function sign(_e){return _e===0?0:_e<0?-1:1}let nextUid=0;function uid(){return++nextUid}const _BoundingBox=class{constructor(_e,_,et,tt){this.left=_e,this.top=_,this.right=et,this.bottom=tt}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};_BoundingBox.EMPTY=new _BoundingBox(0,0,0,0);let BoundingBox=_BoundingBox;const ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null);function destroyTextureCache(){let _e;for(_e in TextureCache)TextureCache[_e].destroy();for(_e in BaseTextureCache)BaseTextureCache[_e].destroy()}function clearTextureCache(){let _e;for(_e in TextureCache)delete TextureCache[_e];for(_e in BaseTextureCache)delete BaseTextureCache[_e]}class CanvasRenderTarget{constructor(_,et,tt){this._canvas=settings.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=tt||settings.RESOLUTION,this.resize(_,et)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(_,et){this._checkDestroyed(),this._canvas.width=Math.round(_*this.resolution),this._canvas.height=Math.round(et*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(_){this._checkDestroyed(),this._canvas.width=Math.round(_)}get height(){return this._checkDestroyed(),this._canvas.height}set height(_){this._checkDestroyed(),this._canvas.height=Math.round(_)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function checkRow(_e,_,et){for(let tt=0,rt=4*et*_;tt<_;++tt,rt+=4)if(_e[rt+3]!==0)return!1;return!0}function checkColumn(_e,_,et,tt,rt){const nt=4*_;for(let ot=tt,at=tt*nt+4*et;ot<=rt;++ot,at+=nt)if(_e[at+3]!==0)return!1;return!0}function getCanvasBoundingBox(_e){const{width:_,height:et}=_e,tt=_e.getContext("2d",{willReadFrequently:!0});if(tt===null)throw new TypeError("Failed to get canvas 2D context");const rt=tt.getImageData(0,0,_,et).data;let nt=0,ot=0,at=_-1,lt=et-1;for(;ot<et&&checkRow(rt,_,ot);)++ot;if(ot===et)return BoundingBox.EMPTY;for(;checkRow(rt,_,lt);)--lt;for(;checkColumn(rt,_,nt,ot,lt);)++nt;for(;checkColumn(rt,_,at,ot,lt);)--at;return++at,++lt,new BoundingBox(nt,ot,at,lt)}function trimCanvas(_e){const _=getCanvasBoundingBox(_e),{width:et,height:tt}=_;let rt=null;if(!_.isEmpty()){const nt=_e.getContext("2d");if(nt===null)throw new TypeError("Failed to get canvas 2D context");rt=nt.getImageData(_.left,_.top,et,tt)}return{width:et,height:tt,data:rt}}function determineCrossOrigin(_e,_=globalThis.location){if(_e.startsWith("data:"))return"";_=_||globalThis.location;const et=new URL(_e,document.baseURI);return et.hostname!==_.hostname||et.port!==_.port||et.protocol!==_.protocol?"anonymous":""}function getResolutionOfUrl(_e,_=1){var tt;const et=(tt=settings.RETINA_PREFIX)==null?void 0:tt.exec(_e);return et?parseFloat(et[1]):_}var ExtensionType=(_e=>(_e.Renderer="renderer",_e.Application="application",_e.RendererSystem="renderer-webgl-system",_e.RendererPlugin="renderer-webgl-plugin",_e.CanvasRendererSystem="renderer-canvas-system",_e.CanvasRendererPlugin="renderer-canvas-plugin",_e.Asset="asset",_e.LoadParser="load-parser",_e.ResolveParser="resolve-parser",_e.CacheParser="cache-parser",_e.DetectionParser="detection-parser",_e))(ExtensionType||{});const normalizeExtension=_e=>{if(typeof _e=="function"||typeof _e=="object"&&_e.extension){if(!_e.extension)throw new Error("Extension class must have an extension object");_e={...typeof _e.extension!="object"?{type:_e.extension}:_e.extension,ref:_e}}if(typeof _e=="object")_e={..._e};else throw new Error("Invalid extension type");return typeof _e.type=="string"&&(_e.type=[_e.type]),_e},normalizePriority=(_e,_)=>normalizeExtension(_e).priority??_,extensions$1={_addHandlers:{},_removeHandlers:{},_queue:{},remove(..._e){return _e.map(normalizeExtension).forEach(_=>{_.type.forEach(et=>{var tt,rt;return(rt=(tt=this._removeHandlers)[et])==null?void 0:rt.call(tt,_)})}),this},add(..._e){return _e.map(normalizeExtension).forEach(_=>{_.type.forEach(et=>{var nt,ot;const tt=this._addHandlers,rt=this._queue;tt[et]?(nt=tt[et])==null||nt.call(tt,_):(rt[et]=rt[et]||[],(ot=rt[et])==null||ot.push(_))})}),this},handle(_e,_,et){var ot;const tt=this._addHandlers,rt=this._removeHandlers;if(tt[_e]||rt[_e])throw new Error(`Extension type ${_e} already has a handler`);tt[_e]=_,rt[_e]=et;const nt=this._queue;return nt[_e]&&((ot=nt[_e])==null||ot.forEach(at=>_(at)),delete nt[_e]),this},handleByMap(_e,_){return this.handle(_e,et=>{et.name&&(_[et.name]=et.ref)},et=>{et.name&&delete _[et.name]})},handleByList(_e,_,et=-1){return this.handle(_e,tt=>{_.includes(tt.ref)||(_.push(tt.ref),_.sort((rt,nt)=>normalizePriority(nt,et)-normalizePriority(rt,et)))},tt=>{const rt=_.indexOf(tt.ref);rt!==-1&&_.splice(rt,1)})}};class ViewableBuffer{constructor(_){typeof _=="number"?this.rawBinaryData=new ArrayBuffer(_):_ instanceof Uint8Array?this.rawBinaryData=_.buffer:this.rawBinaryData=_,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(_){return this[`${_}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(_){switch(_){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${_} isn't a valid view type`)}}}const fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(_e){let _="";for(let et=0;et<_e;++et)et>0&&(_+=`
else `),et<_e-1&&(_+=`if(test == ${et}.0){}`);return _}function checkMaxIfStatementsInShader(_e,_){if(_e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const et=_.createShader(_.FRAGMENT_SHADER);for(;;){const tt=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc(_e));if(_.shaderSource(et,tt),_.compileShader(et),!_.getShaderParameter(et,_.COMPILE_STATUS))_e=_e/2|0;else break}return _e}const BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5;class State{constructor(){this.data=0,this.blendMode=BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<BLEND$1)}set blend(_){!!(this.data&1<<BLEND$1)!==_&&(this.data^=1<<BLEND$1)}get offsets(){return!!(this.data&1<<OFFSET$1)}set offsets(_){!!(this.data&1<<OFFSET$1)!==_&&(this.data^=1<<OFFSET$1)}get culling(){return!!(this.data&1<<CULLING$1)}set culling(_){!!(this.data&1<<CULLING$1)!==_&&(this.data^=1<<CULLING$1)}get depthTest(){return!!(this.data&1<<DEPTH_TEST$1)}set depthTest(_){!!(this.data&1<<DEPTH_TEST$1)!==_&&(this.data^=1<<DEPTH_TEST$1)}get depthMask(){return!!(this.data&1<<DEPTH_MASK$1)}set depthMask(_){!!(this.data&1<<DEPTH_MASK$1)!==_&&(this.data^=1<<DEPTH_MASK$1)}get clockwiseFrontFace(){return!!(this.data&1<<WINDING$1)}set clockwiseFrontFace(_){!!(this.data&1<<WINDING$1)!==_&&(this.data^=1<<WINDING$1)}get blendMode(){return this._blendMode}set blendMode(_){this.blend=_!==BLEND_MODES.NONE,this._blendMode=_}get polygonOffset(){return this._polygonOffset}set polygonOffset(_){this.offsets=!!_,this._polygonOffset=_}static for2d(){const _=new State;return _.depthTest=!1,_.blend=!0,_}}State.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const INSTALLED=[];function autoDetectResource(_e,_){if(!_e)return null;let et="";if(typeof _e=="string"){const tt=/\.(\w{3,4})(?:$|\?|#)/i.exec(_e);tt&&(et=tt[1].toLowerCase())}for(let tt=INSTALLED.length-1;tt>=0;--tt){const rt=INSTALLED[tt];if(rt.test&&rt.test(_e,et))return new rt(_e,_)}throw new Error("Unrecognized source type to auto-detect Resource")}class Runner{constructor(_){this.items=[],this._name=_,this._aliasCount=0}emit(_,et,tt,rt,nt,ot,at,lt){if(arguments.length>8)throw new Error("max arguments reached");const{name:ct,items:dt}=this;this._aliasCount++;for(let st=0,it=dt.length;st<it;st++)dt[st][ct](_,et,tt,rt,nt,ot,at,lt);return dt===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(_){return _[this._name]&&(this.ensureNonAliasedItems(),this.remove(_),this.items.push(_)),this}remove(_){const et=this.items.indexOf(_);return et!==-1&&(this.ensureNonAliasedItems(),this.items.splice(et,1)),this}contains(_){return this.items.includes(_)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});class Resource{constructor(_=0,et=0){this._width=_,this._height=et,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}bind(_){this.onResize.add(_),this.onUpdate.add(_),this.onError.add(_),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(_){this.onResize.remove(_),this.onUpdate.remove(_),this.onError.remove(_)}resize(_,et){(_!==this._width||et!==this._height)&&(this._width=_,this._height=et,this.onResize.emit(_,et))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(_,et,tt){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(_,et){return!1}}class BufferResource extends Resource{constructor(_,et){const{width:tt,height:rt}=et||{};if(!tt||!rt)throw new Error("BufferResource width or height invalid");super(tt,rt),this.data=_,this.unpackAlignment=et.unpackAlignment??4}upload(_,et,tt){const rt=_.gl;rt.pixelStorei(rt.UNPACK_ALIGNMENT,this.unpackAlignment),rt.pixelStorei(rt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,et.alphaMode===ALPHA_MODES.UNPACK);const nt=et.realWidth,ot=et.realHeight;return tt.width===nt&&tt.height===ot?rt.texSubImage2D(et.target,0,0,0,nt,ot,et.format,tt.type,this.data):(tt.width=nt,tt.height=ot,rt.texImage2D(et.target,0,tt.internalFormat,nt,ot,0,et.format,tt.type,this.data)),!0}dispose(){this.data=null}static test(_){return _===null||_ instanceof Int8Array||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array}}const defaultBufferOptions={scaleMode:SCALE_MODES.NEAREST,alphaMode:ALPHA_MODES.NPM},_BaseTexture=class _n extends EventEmitter{constructor(_=null,et=null){super(),et=Object.assign({},_n.defaultOptions,et);const{alphaMode:tt,mipmap:rt,anisotropicLevel:nt,scaleMode:ot,width:at,height:lt,wrapMode:ct,format:dt,type:st,target:it,resolution:ut,resourceOptions:ht}=et;_&&!(_ instanceof Resource)&&(_=autoDetectResource(_,ht),_.internal=!0),this.resolution=ut||settings.RESOLUTION,this.width=Math.round((at||0)*this.resolution)/this.resolution,this.height=Math.round((lt||0)*this.resolution)/this.resolution,this._mipmap=rt,this.anisotropicLevel=nt,this._wrapMode=ct,this._scaleMode=ot,this.format=dt,this.type=st,this.target=it,this.alphaMode=tt,this.uid=uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=at>0&&lt>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(_)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(_){this._mipmap!==_&&(this._mipmap=_,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(_){this._scaleMode!==_&&(this._scaleMode=_,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(_){this._wrapMode!==_&&(this._wrapMode=_,this.dirtyStyleId++)}setStyle(_,et){let tt;return _!==void 0&&_!==this.scaleMode&&(this.scaleMode=_,tt=!0),et!==void 0&&et!==this.mipmap&&(this.mipmap=et,tt=!0),tt&&this.dirtyStyleId++,this}setSize(_,et,tt){return tt=tt||this.resolution,this.setRealSize(_*tt,et*tt,tt)}setRealSize(_,et,tt){return this.resolution=tt||this.resolution,this.width=Math.round(_)/this.resolution,this.height=Math.round(et)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)}setResolution(_){const et=this.resolution;return et===_?this:(this.resolution=_,this.valid&&(this.width=Math.round(this.width*et)/_,this.height=Math.round(this.height*et)/_,this.emit("update",this)),this._refreshPOT(),this)}setResource(_){if(this.resource===_)return this;if(this.resource)throw new Error("Resource can be set only once");return _.bind(this),this.resource=_,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(_){this.emit("error",this,_)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),_n.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(_,et,tt=settings.STRICT_TEXTURE_CACHE){const rt=typeof _=="string";let nt=null;if(rt)nt=_;else{if(!_._pixiId){const at=(et==null?void 0:et.pixiIdPrefix)||"pixiid";_._pixiId=`${at}_${uid()}`}nt=_._pixiId}let ot=BaseTextureCache[nt];if(rt&&tt&&!ot)throw new Error(`The cacheId "${nt}" does not exist in BaseTextureCache.`);return ot||(ot=new _n(_,et),ot.cacheId=nt,_n.addToCache(ot,nt)),ot}static fromBuffer(_,et,tt,rt){_=_||new Float32Array(et*tt*4);const nt=new BufferResource(_,{width:et,height:tt,...rt==null?void 0:rt.resourceOptions});let ot,at;return _ instanceof Float32Array?(ot=FORMATS.RGBA,at=TYPES.FLOAT):_ instanceof Int32Array?(ot=FORMATS.RGBA_INTEGER,at=TYPES.INT):_ instanceof Uint32Array?(ot=FORMATS.RGBA_INTEGER,at=TYPES.UNSIGNED_INT):_ instanceof Int16Array?(ot=FORMATS.RGBA_INTEGER,at=TYPES.SHORT):_ instanceof Uint16Array?(ot=FORMATS.RGBA_INTEGER,at=TYPES.UNSIGNED_SHORT):_ instanceof Int8Array?(ot=FORMATS.RGBA,at=TYPES.BYTE):(ot=FORMATS.RGBA,at=TYPES.UNSIGNED_BYTE),nt.internal=!0,new _n(nt,Object.assign({},defaultBufferOptions,{type:at,format:ot},rt))}static addToCache(_,et){et&&(_.textureCacheIds.includes(et)||_.textureCacheIds.push(et),BaseTextureCache[et]&&BaseTextureCache[et]!==_&&console.warn(`BaseTexture added to the cache with an id [${et}] that already had an entry`),BaseTextureCache[et]=_)}static removeFromCache(_){if(typeof _=="string"){const et=BaseTextureCache[_];if(et){const tt=et.textureCacheIds.indexOf(_);return tt>-1&&et.textureCacheIds.splice(tt,1),delete BaseTextureCache[_],et}}else if(_!=null&&_.textureCacheIds){for(let et=0;et<_.textureCacheIds.length;++et)delete BaseTextureCache[_.textureCacheIds[et]];return _.textureCacheIds.length=0,_}return null}};_BaseTexture.defaultOptions={mipmap:MIPMAP_MODES.POW2,anisotropicLevel:0,scaleMode:SCALE_MODES.LINEAR,wrapMode:WRAP_MODES.CLAMP,alphaMode:ALPHA_MODES.UNPACK,target:TARGETS.TEXTURE_2D,format:FORMATS.RGBA,type:TYPES.UNSIGNED_BYTE},_BaseTexture._globalBatch=0;let BaseTexture=_BaseTexture;class BatchDrawCall{constructor(){this.texArray=null,this.blend=0,this.type=DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}}let UID$4=0;class Buffer{constructor(_,et=!0,tt=!1){this.data=_||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=tt,this.static=et,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}update(_){_ instanceof Array&&(_=new Float32Array(_)),this.data=_||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(_){this.type=_?BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE.ARRAY_BUFFER}get index(){return this.type===BUFFER_TYPE.ELEMENT_ARRAY_BUFFER}static from(_){return _ instanceof Array&&(_=new Float32Array(_)),new Buffer(_)}}class Attribute{constructor(_,et=0,tt=!1,rt=TYPES.FLOAT,nt,ot,at,lt=1){this.buffer=_,this.size=et,this.normalized=tt,this.type=rt,this.stride=nt,this.start=ot,this.instance=at,this.divisor=lt}destroy(){this.buffer=null}static from(_,et,tt,rt,nt){return new Attribute(_,et,tt,rt,nt)}}const map$1={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(_e,_){let et=0,tt=0;const rt={};for(let lt=0;lt<_e.length;lt++)tt+=_[lt],et+=_e[lt].length;const nt=new ArrayBuffer(et*4);let ot=null,at=0;for(let lt=0;lt<_e.length;lt++){const ct=_[lt],dt=_e[lt],st=getBufferType(dt);rt[st]||(rt[st]=new map$1[st](nt)),ot=rt[st];for(let it=0;it<dt.length;it++){const ut=(it/ct|0)*tt+at,ht=it%ct;ot[ut+ht]=dt[it]}at+=ct}return new Float32Array(nt)}const byteSizeMap$1={5126:4,5123:2,5121:1};let UID$3=0;const map={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Geometry{constructor(_=[],et={}){this.buffers=_,this.indexBuffer=null,this.attributes=et,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}addAttribute(_,et,tt=0,rt=!1,nt,ot,at,lt=!1){if(!et)throw new Error("You must pass a buffer when creating an attribute");et instanceof Buffer||(et instanceof Array&&(et=new Float32Array(et)),et=new Buffer(et));const ct=_.split("|");if(ct.length>1){for(let st=0;st<ct.length;st++)this.addAttribute(ct[st],et,tt,rt,nt);return this}let dt=this.buffers.indexOf(et);return dt===-1&&(this.buffers.push(et),dt=this.buffers.length-1),this.attributes[_]=new Attribute(dt,tt,rt,nt,ot,at,lt),this.instanced=this.instanced||lt,this}getAttribute(_){return this.attributes[_]}getBuffer(_){return this.buffers[this.getAttribute(_).buffer]}addIndex(_){return _ instanceof Buffer||(_ instanceof Array&&(_=new Uint16Array(_)),_=new Buffer(_)),_.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=_,this.buffers.includes(_)||this.buffers.push(_),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const _=[],et=[],tt=new Buffer;let rt;for(rt in this.attributes){const nt=this.attributes[rt],ot=this.buffers[nt.buffer];_.push(ot.data),et.push(nt.size*byteSizeMap$1[nt.type]/4),nt.buffer=0}for(tt.data=interleaveTypedArrays(_,et),rt=0;rt<this.buffers.length;rt++)this.buffers[rt]!==this.indexBuffer&&this.buffers[rt].destroy();return this.buffers=[tt],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const _ in this.attributes){const et=this.attributes[_];return this.buffers[et.buffer].data.length/(et.stride/4||et.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const _=new Geometry;for(let et=0;et<this.buffers.length;et++)_.buffers[et]=new Buffer(this.buffers[et].data.slice(0));for(const et in this.attributes){const tt=this.attributes[et];_.attributes[et]=new Attribute(tt.buffer,tt.size,tt.normalized,tt.type,tt.stride,tt.start,tt.instance)}return this.indexBuffer&&(_.indexBuffer=_.buffers[this.buffers.indexOf(this.indexBuffer)],_.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),_}static merge(_){const et=new Geometry,tt=[],rt=[],nt=[];let ot;for(let at=0;at<_.length;at++){ot=_[at];for(let lt=0;lt<ot.buffers.length;lt++)rt[lt]=rt[lt]||0,rt[lt]+=ot.buffers[lt].data.length,nt[lt]=0}for(let at=0;at<ot.buffers.length;at++)tt[at]=new map[getBufferType(ot.buffers[at].data)](rt[at]),et.buffers[at]=new Buffer(tt[at]);for(let at=0;at<_.length;at++){ot=_[at];for(let lt=0;lt<ot.buffers.length;lt++)tt[lt].set(ot.buffers[lt].data,nt[lt]),nt[lt]+=ot.buffers[lt].data.length}if(et.attributes=ot.attributes,ot.indexBuffer){et.indexBuffer=et.buffers[ot.buffers.indexOf(ot.indexBuffer)],et.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;let at=0,lt=0,ct=0,dt=0;for(let st=0;st<ot.buffers.length;st++)if(ot.buffers[st]!==ot.indexBuffer){dt=st;break}for(const st in ot.attributes){const it=ot.attributes[st];(it.buffer|0)===dt&&(lt+=it.size*byteSizeMap$1[it.type]/4)}for(let st=0;st<_.length;st++){const it=_[st].indexBuffer.data;for(let ut=0;ut<it.length;ut++)et.indexBuffer.data[ut+ct]+=at;at+=_[st].buffers[dt].data.length/lt,ct+=it.length}}return et}}class BatchGeometry extends Geometry{constructor(_=!1){super(),this._buffer=new Buffer(null,_,!1),this._indexBuffer=new Buffer(null,_,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,TYPES.FLOAT).addIndex(this._indexBuffer)}}const PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180;var SHAPES=(_e=>(_e[_e.POLY=0]="POLY",_e[_e.RECT=1]="RECT",_e[_e.CIRC=2]="CIRC",_e[_e.ELIP=3]="ELIP",_e[_e.RREC=4]="RREC",_e))(SHAPES||{});class Point{constructor(_=0,et=0){this.x=0,this.y=0,this.x=_,this.y=et}clone(){return new Point(this.x,this.y)}copyFrom(_){return this.set(_.x,_.y),this}copyTo(_){return _.set(this.x,this.y),_}equals(_){return _.x===this.x&&_.y===this.y}set(_=0,et=_){return this.x=_,this.y=et,this}}Point.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const tempPoints$1=[new Point,new Point,new Point,new Point];class Rectangle{constructor(_=0,et=0,tt=0,rt=0){this.x=Number(_),this.y=Number(et),this.width=Number(tt),this.height=Number(rt),this.type=SHAPES.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Rectangle(0,0,0,0)}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}copyFrom(_){return this.x=_.x,this.y=_.y,this.width=_.width,this.height=_.height,this}copyTo(_){return _.x=this.x,_.y=this.y,_.width=this.width,_.height=this.height,_}contains(_,et){return this.width<=0||this.height<=0?!1:_>=this.x&&_<this.x+this.width&&et>=this.y&&et<this.y+this.height}intersects(_,et){if(!et){const Et=this.x<_.x?_.x:this.x;if((this.right>_.right?_.right:this.right)<=Et)return!1;const _t=this.y<_.y?_.y:this.y;return(this.bottom>_.bottom?_.bottom:this.bottom)>_t}const tt=this.left,rt=this.right,nt=this.top,ot=this.bottom;if(rt<=tt||ot<=nt)return!1;const at=tempPoints$1[0].set(_.left,_.top),lt=tempPoints$1[1].set(_.left,_.bottom),ct=tempPoints$1[2].set(_.right,_.top),dt=tempPoints$1[3].set(_.right,_.bottom);if(ct.x<=at.x||lt.y<=at.y)return!1;const st=Math.sign(et.a*et.d-et.b*et.c);if(st===0||(et.apply(at,at),et.apply(lt,lt),et.apply(ct,ct),et.apply(dt,dt),Math.max(at.x,lt.x,ct.x,dt.x)<=tt||Math.min(at.x,lt.x,ct.x,dt.x)>=rt||Math.max(at.y,lt.y,ct.y,dt.y)<=nt||Math.min(at.y,lt.y,ct.y,dt.y)>=ot))return!1;const it=st*(lt.y-at.y),ut=st*(at.x-lt.x),ht=it*tt+ut*nt,ft=it*rt+ut*nt,gt=it*tt+ut*ot,mt=it*rt+ut*ot;if(Math.max(ht,ft,gt,mt)<=it*at.x+ut*at.y||Math.min(ht,ft,gt,mt)>=it*dt.x+ut*dt.y)return!1;const yt=st*(at.y-ct.y),bt=st*(ct.x-at.x),vt=yt*tt+bt*nt,xt=yt*rt+bt*nt,wt=yt*tt+bt*ot,St=yt*rt+bt*ot;return!(Math.max(vt,xt,wt,St)<=yt*at.x+bt*at.y||Math.min(vt,xt,wt,St)>=yt*dt.x+bt*dt.y)}pad(_=0,et=_){return this.x-=_,this.y-=et,this.width+=_*2,this.height+=et*2,this}fit(_){const et=Math.max(this.x,_.x),tt=Math.min(this.x+this.width,_.x+_.width),rt=Math.max(this.y,_.y),nt=Math.min(this.y+this.height,_.y+_.height);return this.x=et,this.width=Math.max(tt-et,0),this.y=rt,this.height=Math.max(nt-rt,0),this}ceil(_=1,et=.001){const tt=Math.ceil((this.x+this.width-et)*_)/_,rt=Math.ceil((this.y+this.height-et)*_)/_;return this.x=Math.floor((this.x+et)*_)/_,this.y=Math.floor((this.y+et)*_)/_,this.width=tt-this.x,this.height=rt-this.y,this}enlarge(_){const et=Math.min(this.x,_.x),tt=Math.max(this.x+this.width,_.x+_.width),rt=Math.min(this.y,_.y),nt=Math.max(this.y+this.height,_.y+_.height);return this.x=et,this.width=tt-et,this.y=rt,this.height=nt-rt,this}}Rectangle.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Circle{constructor(_=0,et=0,tt=0){this.x=_,this.y=et,this.radius=tt,this.type=SHAPES.CIRC}clone(){return new Circle(this.x,this.y,this.radius)}contains(_,et){if(this.radius<=0)return!1;const tt=this.radius*this.radius;let rt=this.x-_,nt=this.y-et;return rt*=rt,nt*=nt,rt+nt<=tt}getBounds(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Circle.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Ellipse{constructor(_=0,et=0,tt=0,rt=0){this.x=_,this.y=et,this.width=tt,this.height=rt,this.type=SHAPES.ELIP}clone(){return new Ellipse(this.x,this.y,this.width,this.height)}contains(_,et){if(this.width<=0||this.height<=0)return!1;let tt=(_-this.x)/this.width,rt=(et-this.y)/this.height;return tt*=tt,rt*=rt,tt+rt<=1}getBounds(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}}Ellipse.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Polygon{constructor(..._){let et=Array.isArray(_[0])?_[0]:_;if(typeof et[0]!="number"){const tt=[];for(let rt=0,nt=et.length;rt<nt;rt++)tt.push(et[rt].x,et[rt].y);et=tt}this.points=et,this.type=SHAPES.POLY,this.closeStroke=!0}clone(){const _=this.points.slice(),et=new Polygon(_);return et.closeStroke=this.closeStroke,et}contains(_,et){let tt=!1;const rt=this.points.length/2;for(let nt=0,ot=rt-1;nt<rt;ot=nt++){const at=this.points[nt*2],lt=this.points[nt*2+1],ct=this.points[ot*2],dt=this.points[ot*2+1];lt>et!=dt>et&&_<(ct-at)*((et-lt)/(dt-lt))+at&&(tt=!tt)}return tt}}Polygon.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((_e,_)=>`${_e}, ${_}`,"")}]`};class RoundedRectangle{constructor(_=0,et=0,tt=0,rt=0,nt=20){this.x=_,this.y=et,this.width=tt,this.height=rt,this.radius=nt,this.type=SHAPES.RREC}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}contains(_,et){if(this.width<=0||this.height<=0)return!1;if(_>=this.x&&_<=this.x+this.width&&et>=this.y&&et<=this.y+this.height){const tt=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(et>=this.y+tt&&et<=this.y+this.height-tt||_>=this.x+tt&&_<=this.x+this.width-tt)return!0;let rt=_-(this.x+tt),nt=et-(this.y+tt);const ot=tt*tt;if(rt*rt+nt*nt<=ot||(rt=_-(this.x+this.width-tt),rt*rt+nt*nt<=ot)||(nt=et-(this.y+this.height-tt),rt*rt+nt*nt<=ot)||(rt=_-(this.x+tt),rt*rt+nt*nt<=ot))return!0}return!1}}RoundedRectangle.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Matrix{constructor(_=1,et=0,tt=0,rt=1,nt=0,ot=0){this.array=null,this.a=_,this.b=et,this.c=tt,this.d=rt,this.tx=nt,this.ty=ot}fromArray(_){this.a=_[0],this.b=_[1],this.c=_[3],this.d=_[4],this.tx=_[2],this.ty=_[5]}set(_,et,tt,rt,nt,ot){return this.a=_,this.b=et,this.c=tt,this.d=rt,this.tx=nt,this.ty=ot,this}toArray(_,et){this.array||(this.array=new Float32Array(9));const tt=et||this.array;return _?(tt[0]=this.a,tt[1]=this.b,tt[2]=0,tt[3]=this.c,tt[4]=this.d,tt[5]=0,tt[6]=this.tx,tt[7]=this.ty,tt[8]=1):(tt[0]=this.a,tt[1]=this.c,tt[2]=this.tx,tt[3]=this.b,tt[4]=this.d,tt[5]=this.ty,tt[6]=0,tt[7]=0,tt[8]=1),tt}apply(_,et){et=et||new Point;const tt=_.x,rt=_.y;return et.x=this.a*tt+this.c*rt+this.tx,et.y=this.b*tt+this.d*rt+this.ty,et}applyInverse(_,et){et=et||new Point;const tt=1/(this.a*this.d+this.c*-this.b),rt=_.x,nt=_.y;return et.x=this.d*tt*rt+-this.c*tt*nt+(this.ty*this.c-this.tx*this.d)*tt,et.y=this.a*tt*nt+-this.b*tt*rt+(-this.ty*this.a+this.tx*this.b)*tt,et}translate(_,et){return this.tx+=_,this.ty+=et,this}scale(_,et){return this.a*=_,this.d*=et,this.c*=_,this.b*=et,this.tx*=_,this.ty*=et,this}rotate(_){const et=Math.cos(_),tt=Math.sin(_),rt=this.a,nt=this.c,ot=this.tx;return this.a=rt*et-this.b*tt,this.b=rt*tt+this.b*et,this.c=nt*et-this.d*tt,this.d=nt*tt+this.d*et,this.tx=ot*et-this.ty*tt,this.ty=ot*tt+this.ty*et,this}append(_){const et=this.a,tt=this.b,rt=this.c,nt=this.d;return this.a=_.a*et+_.b*rt,this.b=_.a*tt+_.b*nt,this.c=_.c*et+_.d*rt,this.d=_.c*tt+_.d*nt,this.tx=_.tx*et+_.ty*rt+this.tx,this.ty=_.tx*tt+_.ty*nt+this.ty,this}setTransform(_,et,tt,rt,nt,ot,at,lt,ct){return this.a=Math.cos(at+ct)*nt,this.b=Math.sin(at+ct)*nt,this.c=-Math.sin(at-lt)*ot,this.d=Math.cos(at-lt)*ot,this.tx=_-(tt*this.a+rt*this.c),this.ty=et-(tt*this.b+rt*this.d),this}prepend(_){const et=this.tx;if(_.a!==1||_.b!==0||_.c!==0||_.d!==1){const tt=this.a,rt=this.c;this.a=tt*_.a+this.b*_.c,this.b=tt*_.b+this.b*_.d,this.c=rt*_.a+this.d*_.c,this.d=rt*_.b+this.d*_.d}return this.tx=et*_.a+this.ty*_.c+_.tx,this.ty=et*_.b+this.ty*_.d+_.ty,this}decompose(_){const et=this.a,tt=this.b,rt=this.c,nt=this.d,ot=_.pivot,at=-Math.atan2(-rt,nt),lt=Math.atan2(tt,et),ct=Math.abs(at+lt);return ct<1e-5||Math.abs(PI_2-ct)<1e-5?(_.rotation=lt,_.skew.x=_.skew.y=0):(_.rotation=0,_.skew.x=at,_.skew.y=lt),_.scale.x=Math.sqrt(et*et+tt*tt),_.scale.y=Math.sqrt(rt*rt+nt*nt),_.position.x=this.tx+(ot.x*et+ot.y*rt),_.position.y=this.ty+(ot.x*tt+ot.y*nt),_}invert(){const _=this.a,et=this.b,tt=this.c,rt=this.d,nt=this.tx,ot=_*rt-et*tt;return this.a=rt/ot,this.b=-et/ot,this.c=-tt/ot,this.d=_/ot,this.tx=(tt*this.ty-rt*nt)/ot,this.ty=-(_*this.ty-et*nt)/ot,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const _=new Matrix;return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyTo(_){return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyFrom(_){return this.a=_.a,this.b=_.b,this.c=_.c,this.d=_.d,this.tx=_.tx,this.ty=_.ty,this}static get IDENTITY(){return new Matrix}static get TEMP_MATRIX(){return new Matrix}}Matrix.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(let _e=0;_e<16;_e++){const _=[];rotationCayley.push(_);for(let et=0;et<16;et++){const tt=signum(ux[_e]*ux[et]+vx[_e]*uy[et]),rt=signum(uy[_e]*ux[et]+vy[_e]*uy[et]),nt=signum(ux[_e]*vx[et]+vx[_e]*vy[et]),ot=signum(uy[_e]*vx[et]+vy[_e]*vy[et]);for(let at=0;at<16;at++)if(ux[at]===tt&&uy[at]===rt&&vx[at]===nt&&vy[at]===ot){_.push(at);break}}}for(let _e=0;_e<16;_e++){const _=new Matrix;_.set(ux[_e],uy[_e],vx[_e],vy[_e],0,0),rotationMatrices.push(_)}}init();const groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:_e=>ux[_e],uY:_e=>uy[_e],vX:_e=>vx[_e],vY:_e=>vy[_e],inv:_e=>_e&8?_e&15:-_e&7,add:(_e,_)=>rotationCayley[_e][_],sub:(_e,_)=>rotationCayley[_e][groupD8.inv(_)],rotate180:_e=>_e^4,isVertical:_e=>(_e&3)===2,byDirection:(_e,_)=>Math.abs(_e)*2<=Math.abs(_)?_>=0?groupD8.S:groupD8.N:Math.abs(_)*2<=Math.abs(_e)?_e>0?groupD8.E:groupD8.W:_>0?_e>0?groupD8.SE:groupD8.SW:_e>0?groupD8.NE:groupD8.NW,matrixAppendRotationInv:(_e,_,et=0,tt=0)=>{const rt=rotationMatrices[groupD8.inv(_)];rt.tx=et,rt.ty=tt,_e.append(rt)}};class ObservablePoint{constructor(_,et,tt=0,rt=0){this._x=tt,this._y=rt,this.cb=_,this.scope=et}clone(_=this.cb,et=this.scope){return new ObservablePoint(_,et,this._x,this._y)}set(_=0,et=_){return(this._x!==_||this._y!==et)&&(this._x=_,this._y=et,this.cb.call(this.scope)),this}copyFrom(_){return(this._x!==_.x||this._y!==_.y)&&(this._x=_.x,this._y=_.y,this.cb.call(this.scope)),this}copyTo(_){return _.set(this._x,this._y),_}equals(_){return _.x===this._x&&_.y===this._y}get x(){return this._x}set x(_){this._x!==_&&(this._x=_,this.cb.call(this.scope))}get y(){return this._y}set y(_){this._y!==_&&(this._y=_,this.cb.call(this.scope))}}ObservablePoint.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const _Transform=class{constructor(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const _e=this.localTransform;this._localID!==this._currentLocalID&&(_e.a=this._cx*this.scale.x,_e.b=this._sx*this.scale.x,_e.c=this._cy*this.scale.y,_e.d=this._sy*this.scale.y,_e.tx=this.position.x-(this.pivot.x*_e.a+this.pivot.y*_e.c),_e.ty=this.position.y-(this.pivot.x*_e.b+this.pivot.y*_e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(_e){const _=this.localTransform;if(this._localID!==this._currentLocalID&&(_.a=this._cx*this.scale.x,_.b=this._sx*this.scale.x,_.c=this._cy*this.scale.y,_.d=this._sy*this.scale.y,_.tx=this.position.x-(this.pivot.x*_.a+this.pivot.y*_.c),_.ty=this.position.y-(this.pivot.x*_.b+this.pivot.y*_.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==_e._worldID){const et=_e.worldTransform,tt=this.worldTransform;tt.a=_.a*et.a+_.b*et.c,tt.b=_.a*et.b+_.b*et.d,tt.c=_.c*et.a+_.d*et.c,tt.d=_.c*et.b+_.d*et.d,tt.tx=_.tx*et.a+_.ty*et.c+et.tx,tt.ty=_.tx*et.b+_.ty*et.d+et.ty,this._parentID=_e._worldID,this._worldID++}}setFromMatrix(_e){_e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(_e){this._rotation!==_e&&(this._rotation=_e,this.updateSkew())}};_Transform.IDENTITY=new _Transform;let Transform=_Transform;Transform.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function compileShader(_e,_,et){const tt=_e.createShader(_);return _e.shaderSource(tt,et),_e.compileShader(tt),tt}function booleanArray(_e){const _=new Array(_e);for(let et=0;et<_.length;et++)_[et]=!1;return _}function defaultValue(_e,_){switch(_e){case"float":return 0;case"vec2":return new Float32Array(2*_);case"vec3":return new Float32Array(3*_);case"vec4":return new Float32Array(4*_);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*_);case"ivec3":return new Int32Array(3*_);case"ivec4":return new Int32Array(4*_);case"uvec2":return new Uint32Array(2*_);case"uvec3":return new Uint32Array(3*_);case"uvec4":return new Uint32Array(4*_);case"bool":return!1;case"bvec2":return booleanArray(2*_);case"bvec3":return booleanArray(3*_);case"bvec4":return booleanArray(4*_);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const uniformParsers=[{test:_e=>_e.type==="float"&&_e.size===1&&!_e.isArray,code:_e=>`
            if(uv["${_e}"] !== ud["${_e}"].value)
            {
                ud["${_e}"].value = uv["${_e}"]
                gl.uniform1f(ud["${_e}"].location, uv["${_e}"])
            }
            `},{test:(_e,_)=>(_e.type==="sampler2D"||_e.type==="samplerCube"||_e.type==="sampler2DArray")&&_e.size===1&&!_e.isArray&&(_==null||_.castToBaseTexture!==void 0),code:_e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${_e}"], t);

            if(ud["${_e}"].value !== t)
            {
                ud["${_e}"].value = t;
                gl.uniform1i(ud["${_e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(_e,_)=>_e.type==="mat3"&&_e.size===1&&!_e.isArray&&_.a!==void 0,code:_e=>`
            gl.uniformMatrix3fv(ud["${_e}"].location, false, uv["${_e}"].toArray(true));
            `,codeUbo:_e=>`
                var ${_e}_matrix = uv.${_e}.toArray(true);

                data[offset] = ${_e}_matrix[0];
                data[offset+1] = ${_e}_matrix[1];
                data[offset+2] = ${_e}_matrix[2];
        
                data[offset + 4] = ${_e}_matrix[3];
                data[offset + 5] = ${_e}_matrix[4];
                data[offset + 6] = ${_e}_matrix[5];
        
                data[offset + 8] = ${_e}_matrix[6];
                data[offset + 9] = ${_e}_matrix[7];
                data[offset + 10] = ${_e}_matrix[8];
            `},{test:(_e,_)=>_e.type==="vec2"&&_e.size===1&&!_e.isArray&&_.x!==void 0,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${_e}"].location, v.x, v.y);
                }`,codeUbo:_e=>`
                v = uv.${_e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:_e=>_e.type==="vec2"&&_e.size===1&&!_e.isArray,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${_e}"].location, v[0], v[1]);
                }
            `},{test:(_e,_)=>_e.type==="vec4"&&_e.size===1&&!_e.isArray&&_.width!==void 0,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${_e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:_e=>`
                    v = uv.${_e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(_e,_)=>_e.type==="vec4"&&_e.size===1&&!_e.isArray&&_.red!==void 0,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${_e}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:_e=>`
                    v = uv.${_e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(_e,_)=>_e.type==="vec3"&&_e.size===1&&!_e.isArray&&_.red!==void 0,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${_e}"].location, v.red, v.green, v.blue)
                }`,codeUbo:_e=>`
                    v = uv.${_e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:_e=>_e.type==="vec4"&&_e.size===1&&!_e.isArray,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${_e}"].location, v[0], v[1], v[2], v[3])
                }`}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(_e,_){var tt;const et=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const rt in _e.uniforms){const nt=_[rt];if(!nt){((tt=_e.uniforms[rt])==null?void 0:tt.group)===!0&&(_e.uniforms[rt].ubo?et.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${rt}, '${rt}');
                    `):et.push(`
                        renderer.shader.syncUniformGroup(uv.${rt}, syncData);
                    `));continue}const ot=_e.uniforms[rt];let at=!1;for(let lt=0;lt<uniformParsers.length;lt++)if(uniformParsers[lt].test(nt,ot)){et.push(uniformParsers[lt].code(rt,ot)),at=!0;break}if(!at){const lt=(nt.size===1&&!nt.isArray?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS)[nt.type].replace("location",`ud["${rt}"].location`);et.push(`
            cu = ud["${rt}"];
            cv = cu.value;
            v = uv["${rt}"];
            ${lt};`)}}return new Function("ud","uv","renderer","syncData",et.join(`
`))}const unknownContext={};let context=unknownContext;function getTestContext(){if(context===unknownContext||context!=null&&context.isContextLost()){const _e=settings.ADAPTER.createCanvas();let _;settings.PREFER_ENV>=ENV.WEBGL2&&(_=_e.getContext("webgl2",{})),_||(_=_e.getContext("webgl",{})||_e.getContext("experimental-webgl",{}),_?_.getExtension("WEBGL_draw_buffers"):_=null),context=_}return context}let maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION.MEDIUM;const _e=getTestContext();if(_e&&_e.getShaderPrecisionFormat){const _=_e.getShaderPrecisionFormat(_e.FRAGMENT_SHADER,_e.HIGH_FLOAT);_&&(maxFragmentPrecision=_.precision?PRECISION.HIGH:PRECISION.MEDIUM)}}return maxFragmentPrecision}function logPrettyShaderError(_e,_){const et=_e.getShaderSource(_).split(`
`).map((ct,dt)=>`${dt}: ${ct}`),tt=_e.getShaderInfoLog(_),rt=tt.split(`
`),nt={},ot=rt.map(ct=>parseFloat(ct.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(ct=>ct&&!nt[ct]?(nt[ct]=!0,!0):!1),at=[""];ot.forEach(ct=>{et[ct-1]=`%c${et[ct-1]}%c`,at.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const lt=et.join(`
`);at[0]=lt,console.error(tt),console.groupCollapsed("click to view full shader code"),console.warn(...at),console.groupEnd()}function logProgramError(_e,_,et,tt){_e.getProgramParameter(_,_e.LINK_STATUS)||(_e.getShaderParameter(et,_e.COMPILE_STATUS)||logPrettyShaderError(_e,et),_e.getShaderParameter(tt,_e.COMPILE_STATUS)||logPrettyShaderError(_e,tt),console.error("PixiJS Error: Could not initialize shader."),_e.getProgramInfoLog(_)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",_e.getProgramInfoLog(_)))}const GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(_e){return GLSL_TO_SIZE[_e]}let GL_TABLE=null;const GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(_e,_){if(!GL_TABLE){const et=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(let tt=0;tt<et.length;++tt){const rt=et[tt];GL_TABLE[_e[rt]]=GL_TO_GLSL_TYPES[rt]}}return GL_TABLE[_]}function setPrecision(_e,_,et){if(_e.substring(0,9)!=="precision"){let tt=_;return _===PRECISION.HIGH&&et!==PRECISION.HIGH&&(tt=PRECISION.MEDIUM),`precision ${tt} float;
${_e}`}else if(et!==PRECISION.HIGH&&_e.substring(0,15)==="precision highp")return _e.replace("precision highp","precision mediump");return _e}let unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{unsafeEval=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}let UID$2=0;const nameCache={},_Program=class Sn{constructor(_,et,tt="pixi-shader",rt={}){this.extra={},this.id=UID$2++,this.vertexSrc=_||Sn.defaultVertexSrc,this.fragmentSrc=et||Sn.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=rt,this.vertexSrc.substring(0,8)!=="#version"&&(tt=tt.replace(/\s+/g,"-"),nameCache[tt]?(nameCache[tt]++,tt+=`-${nameCache[tt]}`):nameCache[tt]=1,this.vertexSrc=`#define SHADER_NAME ${tt}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${tt}
${this.fragmentSrc}`,this.vertexSrc=setPrecision(this.vertexSrc,Sn.defaultVertexPrecision,PRECISION.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,Sn.defaultFragmentPrecision,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return defaultVertex$3}static get defaultFragmentSrc(){return defaultFragment$2}static from(_,et,tt){const rt=_+et;let nt=ProgramCache[rt];return nt||(ProgramCache[rt]=nt=new Sn(_,et,tt)),nt}};_Program.defaultVertexPrecision=PRECISION.HIGH,_Program.defaultFragmentPrecision=isMobile.apple.device?PRECISION.HIGH:PRECISION.MEDIUM;let Program=_Program,UID$1=0;class UniformGroup{constructor(_,et,tt){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$1++,this.static=!!et,this.ubo=!!tt,_ instanceof Buffer?(this.buffer=_,this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=_,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(_,et,tt){if(!this.ubo)this.uniforms[_]=new UniformGroup(et,tt);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(_,et,tt){return new UniformGroup(_,et,tt)}static uboFrom(_,et){return new UniformGroup(_,et??!0,!0)}}class Shader{constructor(_,et){this.uniformBindCount=0,this.program=_,et?et instanceof UniformGroup?this.uniformGroup=et:this.uniformGroup=new UniformGroup(et):this.uniformGroup=new UniformGroup({}),this.disposeRunner=new Runner("disposeShader")}checkUniformExists(_,et){if(et.uniforms[_])return!0;for(const tt in et.uniforms){const rt=et.uniforms[tt];if(rt.group===!0&&this.checkUniformExists(_,rt))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(_,et,tt){const rt=Program.from(_,et);return new Shader(rt,tt)}}class BatchShaderGenerator{constructor(_,et){if(this.vertexSrc=_,this.fragTemplate=et,this.programCache={},this.defaultGroupCache={},!et.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!et.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(_){if(!this.programCache[_]){const tt=new Int32Array(_);for(let nt=0;nt<_;nt++)tt[nt]=nt;this.defaultGroupCache[_]=UniformGroup.from({uSamplers:tt},!0);let rt=this.fragTemplate;rt=rt.replace(/%count%/gi,`${_}`),rt=rt.replace(/%forloop%/gi,this.generateSampleSrc(_)),this.programCache[_]=new Program(this.vertexSrc,rt)}const et={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[_]};return new Shader(this.programCache[_],et)}generateSampleSrc(_){let et="";et+=`
`,et+=`
`;for(let tt=0;tt<_;tt++)tt>0&&(et+=`
else `),tt<_-1&&(et+=`if(vTextureId < ${tt}.5)`),et+=`
{`,et+=`
	color = texture2D(uSamplers[${tt}], vTextureCoord);`,et+=`
}`;return et+=`
`,et+=`
`,et}}class BatchTextureArray{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let _=0;_<this.count;_++)this.elements[_]=null;this.count=0}}function canUploadSameBuffer(){return!isMobile.apple.device}function maxRecommendedTextures(_e){let _=!0;const et=settings.ADAPTER.getNavigator();if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){const tt=et.userAgent.match(/OS (\d+)_(\d+)?/);tt&&parseInt(tt[1],10)<11&&(_=!1)}if(isMobile.android.device){const tt=et.userAgent.match(/Android\s([0-9.]*)/);tt&&parseInt(tt[1],10)<7&&(_=!1)}}return _?_e:4}class ObjectRenderer{constructor(_){this.renderer=_}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(_){}}var defaultFragment$1=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,defaultVertex$2=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const _BatchRenderer=class en extends ObjectRenderer{constructor(_){super(_),this.setShaderGenerator(),this.geometryClass=BatchGeometry,this.vertexSize=6,this.state=State.for2d(),this.size=en.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),_.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??maxRecommendedTextures(32),this._defaultMaxTextures}static set defaultMaxTextures(_){this._defaultMaxTextures=_}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??canUploadSameBuffer(),this._canUploadSameBuffer}static set canUploadSameBuffer(_){this._canUploadSameBuffer=_}get MAX_TEXTURES(){return deprecation("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return defaultVertex$2}static get defaultFragmentTemplate(){return defaultFragment$1}setShaderGenerator({vertex:_=en.defaultVertexSrc,fragment:et=en.defaultFragmentTemplate}={}){this.shaderGenerator=new BatchShaderGenerator(_,et)}contextChange(){const _=this.renderer.gl;settings.PREFER_ENV===ENV.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS),en.defaultMaxTextures),this.maxTextures=checkMaxIfStatementsInShader(this.maxTextures,_)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let et=0;et<this._packedGeometryPoolSize;et++)this._packedGeometries[et]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:_,_textureArrayPool:et}=en,tt=this.size/4,rt=Math.floor(tt/this.maxTextures)+1;for(;_.length<tt;)_.push(new BatchDrawCall);for(;et.length<rt;)et.push(new BatchTextureArray);for(let nt=0;nt<this.maxTextures;nt++)this._tempBoundTextures[nt]=null}onPrerender(){this._flushId=0}render(_){_._texture.valid&&(this._vertexCount+_.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=_.vertexData.length/2,this._indexCount+=_.indices.length,this._bufferedTextures[this._bufferSize]=_._texture.baseTexture,this._bufferedElements[this._bufferSize++]=_)}buildTexturesAndDrawCalls(){const{_bufferedTextures:_,maxTextures:et}=this,tt=en._textureArrayPool,rt=this.renderer.batch,nt=this._tempBoundTextures,ot=this.renderer.textureGC.count;let at=++BaseTexture._globalBatch,lt=0,ct=tt[0],dt=0;rt.copyBoundTextures(nt,et);for(let st=0;st<this._bufferSize;++st){const it=_[st];_[st]=null,it._batchEnabled!==at&&(ct.count>=et&&(rt.boundArray(ct,nt,at,et),this.buildDrawCalls(ct,dt,st),dt=st,ct=tt[++lt],++at),it._batchEnabled=at,it.touched=ot,ct.elements[ct.count++]=it)}ct.count>0&&(rt.boundArray(ct,nt,at,et),this.buildDrawCalls(ct,dt,this._bufferSize),++lt,++at);for(let st=0;st<nt.length;st++)nt[st]=null;BaseTexture._globalBatch=at}buildDrawCalls(_,et,tt){const{_bufferedElements:rt,_attributeBuffer:nt,_indexBuffer:ot,vertexSize:at}=this,lt=en._drawCallPool;let ct=this._dcIndex,dt=this._aIndex,st=this._iIndex,it=lt[ct];it.start=this._iIndex,it.texArray=_;for(let ut=et;ut<tt;++ut){const ht=rt[ut],ft=ht._texture.baseTexture,gt=premultiplyBlendMode[ft.alphaMode?1:0][ht.blendMode];rt[ut]=null,et<ut&&it.blend!==gt&&(it.size=st-it.start,et=ut,it=lt[++ct],it.texArray=_,it.start=st),this.packInterleavedGeometry(ht,nt,ot,dt,st),dt+=ht.vertexData.length/2*at,st+=ht.indices.length,it.blend=gt}et<tt&&(it.size=st-it.start,++ct),this._dcIndex=ct,this._aIndex=dt,this._iIndex=st}bindAndClearTexArray(_){const et=this.renderer.texture;for(let tt=0;tt<_.count;tt++)et.bind(_.elements[tt],_.ids[tt]),_.elements[tt]=null;_.count=0}updateGeometry(){const{_packedGeometries:_,_attributeBuffer:et,_indexBuffer:tt}=this;en.canUploadSameBuffer?(_[this._flushId]._buffer.update(et.rawBinaryData),_[this._flushId]._indexBuffer.update(tt),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,_[this._flushId]=new this.geometryClass),_[this._flushId]._buffer.update(et.rawBinaryData),_[this._flushId]._indexBuffer.update(tt),this.renderer.geometry.bind(_[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const _=this._dcIndex,{gl:et,state:tt}=this.renderer,rt=en._drawCallPool;let nt=null;for(let ot=0;ot<_;ot++){const{texArray:at,type:lt,size:ct,start:dt,blend:st}=rt[ot];nt!==at&&(nt=at,this.bindAndClearTexArray(at)),this.state.blendMode=st,tt.set(this.state),et.drawElements(lt,ct,et.UNSIGNED_SHORT,dt*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),en.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let _=0;_<this._packedGeometryPoolSize;_++)this._packedGeometries[_]&&this._packedGeometries[_].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(_){const et=nextPow2(Math.ceil(_/8)),tt=log2(et),rt=et*8;this._aBuffers.length<=tt&&(this._iBuffers.length=tt+1);let nt=this._aBuffers[rt];return nt||(this._aBuffers[rt]=nt=new ViewableBuffer(rt*this.vertexSize*4)),nt}getIndexBuffer(_){const et=nextPow2(Math.ceil(_/12)),tt=log2(et),rt=et*12;this._iBuffers.length<=tt&&(this._iBuffers.length=tt+1);let nt=this._iBuffers[tt];return nt||(this._iBuffers[tt]=nt=new Uint16Array(rt)),nt}packInterleavedGeometry(_,et,tt,rt,nt){const{uint32View:ot,float32View:at}=et,lt=rt/this.vertexSize,ct=_.uvs,dt=_.indices,st=_.vertexData,it=_._texture.baseTexture._batchLocation,ut=Math.min(_.worldAlpha,1),ht=Color.shared.setValue(_._tintRGB).toPremultiplied(ut,_._texture.baseTexture.alphaMode>0);for(let ft=0;ft<st.length;ft+=2)at[rt++]=st[ft],at[rt++]=st[ft+1],at[rt++]=ct[ft],at[rt++]=ct[ft+1],ot[rt++]=ht,at[rt++]=it;for(let ft=0;ft<dt.length;ft++)tt[nt++]=lt+dt[ft]}};_BatchRenderer.defaultBatchSize=4096,_BatchRenderer.extension={name:"batch",type:ExtensionType.RendererPlugin},_BatchRenderer._drawCallPool=[],_BatchRenderer._textureArrayPool=[];let BatchRenderer=_BatchRenderer;extensions$1.add(BatchRenderer);var defaultFragment=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,defaultVertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const _Filter=class Un extends Shader{constructor(_,et,tt){const rt=Program.from(_||Un.defaultVertexSrc,et||Un.defaultFragmentSrc);super(rt,tt),this.padding=0,this.resolution=Un.defaultResolution,this.multisample=Un.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new State}apply(_,et,tt,rt,nt){_.applyFilter(this,et,tt,rt)}get blendMode(){return this.state.blendMode}set blendMode(_){this.state.blendMode=_}get resolution(){return this._resolution}set resolution(_){this._resolution=_}static get defaultVertexSrc(){return defaultVertex$1}static get defaultFragmentSrc(){return defaultFragment}};_Filter.defaultResolution=1,_Filter.defaultMultisample=MSAA_QUALITY.NONE;let Filter=_Filter;class BackgroundSystem{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Color(0),this.alpha=1}init(_){this.clearBeforeRender=_.clearBeforeRender;const{backgroundColor:et,background:tt,backgroundAlpha:rt}=_,nt=tt??et;nt!==void 0&&(this.color=nt),this.alpha=rt}get color(){return this._backgroundColor.value}set color(_){this._backgroundColor.setValue(_)}get alpha(){return this._backgroundColor.alpha}set alpha(_){this._backgroundColor.setAlpha(_)}get backgroundColor(){return this._backgroundColor}destroy(){}}BackgroundSystem.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},BackgroundSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"background"};extensions$1.add(BackgroundSystem);class BatchSystem{constructor(_){this.renderer=_,this.emptyRenderer=new ObjectRenderer(_),this.currentRenderer=this.emptyRenderer}setObjectRenderer(_){this.currentRenderer!==_&&(this.currentRenderer.stop(),this.currentRenderer=_,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(_,et){const{boundTextures:tt}=this.renderer.texture;for(let rt=et-1;rt>=0;--rt)_[rt]=tt[rt]||null,_[rt]&&(_[rt]._batchLocation=rt)}boundArray(_,et,tt,rt){const{elements:nt,ids:ot,count:at}=_;let lt=0;for(let ct=0;ct<at;ct++){const dt=nt[ct],st=dt._batchLocation;if(st>=0&&st<rt&&et[st]===dt){ot[ct]=st;continue}for(;lt<rt;){const it=et[lt];if(it&&it._batchEnabled===tt&&it._batchLocation===lt){lt++;continue}ot[ct]=lt,dt._batchLocation=lt,et[lt]=dt;break}}}destroy(){this.renderer=null}}BatchSystem.extension={type:ExtensionType.RendererSystem,name:"batch"};extensions$1.add(BatchSystem);let CONTEXT_UID_COUNTER=0;class ContextSystem{constructor(_){this.renderer=_,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(_){this.gl=_,this.renderer.gl=_,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++}init(_){if(_.context)this.initFromContext(_.context);else{const et=this.renderer.background.alpha<1,tt=_.premultipliedAlpha;this.preserveDrawingBuffer=_.preserveDrawingBuffer,this.useContextAlpha=_.useContextAlpha,this.powerPreference=_.powerPreference,this.initFromOptions({alpha:et,premultipliedAlpha:tt,antialias:_.antialias,stencil:!0,preserveDrawingBuffer:_.preserveDrawingBuffer,powerPreference:_.powerPreference})}}initFromContext(_){this.gl=_,this.validateContext(_),this.renderer.gl=_,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(_);const et=this.renderer.view;et.addEventListener!==void 0&&(et.addEventListener("webglcontextlost",this.handleContextLost,!1),et.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(_){const et=this.createContext(this.renderer.view,_);this.initFromContext(et)}createContext(_,et){let tt;if(settings.PREFER_ENV>=ENV.WEBGL2&&(tt=_.getContext("webgl2",et)),tt)this.webGLVersion=2;else if(this.webGLVersion=1,tt=_.getContext("webgl",et)||_.getContext("experimental-webgl",et),!tt)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=tt,this.getExtensions(),this.gl}getExtensions(){const{gl:_}=this,et={loseContext:_.getExtension("WEBGL_lose_context"),anisotropicFiltering:_.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:_.getExtension("OES_texture_float_linear"),s3tc:_.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:_.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:_.getExtension("WEBGL_compressed_texture_etc"),etc1:_.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:_.getExtension("WEBGL_compressed_texture_pvrtc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:_.getExtension("WEBGL_compressed_texture_atc"),astc:_.getExtension("WEBGL_compressed_texture_astc"),bptc:_.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,et,{drawBuffers:_.getExtension("WEBGL_draw_buffers"),depthTexture:_.getExtension("WEBGL_depth_texture"),vertexArrayObject:_.getExtension("OES_vertex_array_object")||_.getExtension("MOZ_OES_vertex_array_object")||_.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:_.getExtension("OES_element_index_uint"),floatTexture:_.getExtension("OES_texture_float"),floatTextureLinear:_.getExtension("OES_texture_float_linear"),textureHalfFloat:_.getExtension("OES_texture_half_float"),textureHalfFloatLinear:_.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,et,{colorBufferFloat:_.getExtension("EXT_color_buffer_float")})}handleContextLost(_){_.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const _=this.renderer.view;this.renderer=null,_.removeEventListener!==void 0&&(_.removeEventListener("webglcontextlost",this.handleContextLost),_.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(_){const et=_.getContextAttributes(),tt="WebGL2RenderingContext"in globalThis&&_ instanceof globalThis.WebGL2RenderingContext;tt&&(this.webGLVersion=2),et&&!et.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const rt=tt||!!_.getExtension("OES_element_index_uint");this.supports.uint32Indices=rt,rt||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}ContextSystem.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},ContextSystem.extension={type:ExtensionType.RendererSystem,name:"context"};extensions$1.add(ContextSystem);class Framebuffer{constructor(_,et){if(this.width=Math.round(_),this.height=Math.round(et),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(_=0,et){return this.colorTextures[_]=et||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,mipmap:MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(_){return this.depthTexture=_||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES.OFF,format:FORMATS.DEPTH_COMPONENT,type:TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(_,et){if(_=Math.round(_),et=Math.round(et),!_||!et)throw new Error("Framebuffer width and height must not be zero");if(!(_===this.width&&et===this.height)){this.width=_,this.height=et,this.dirtyId++,this.dirtySize++;for(let tt=0;tt<this.colorTextures.length;tt++){const rt=this.colorTextures[tt],nt=rt.resolution;rt.setSize(_/nt,et/nt)}if(this.depthTexture){const tt=this.depthTexture.resolution;this.depthTexture.setSize(_/tt,et/tt)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class BaseRenderTexture extends BaseTexture{constructor(_={}){if(typeof _=="number"){const et=arguments[0],tt=arguments[1],rt=arguments[2],nt=arguments[3];_={width:et,height:tt,scaleMode:rt,resolution:nt}}_.width=_.width??100,_.height=_.height??100,_.multisample??(_.multisample=MSAA_QUALITY.NONE),super(null,_),this.mipmap=MIPMAP_MODES.OFF,this.valid=!0,this._clear=new Color([0,0,0,0]),this.framebuffer=new Framebuffer(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=_.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(_){this._clear.setValue(_)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(_){this.framebuffer.multisample=_}resize(_,et){this.framebuffer.resize(_*this.resolution,et*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class BaseImageResource extends Resource{constructor(_){const et=_,tt=et.naturalWidth||et.videoWidth||et.displayWidth||et.width,rt=et.naturalHeight||et.videoHeight||et.displayHeight||et.height;super(tt,rt),this.source=_,this.noSubImage=!1}static crossOrigin(_,et,tt){tt===void 0&&!et.startsWith("data:")?_.crossOrigin=determineCrossOrigin(et):tt!==!1&&(_.crossOrigin=typeof tt=="string"?tt:"anonymous")}upload(_,et,tt,rt){const nt=_.gl,ot=et.realWidth,at=et.realHeight;if(rt=rt||this.source,typeof HTMLImageElement<"u"&&rt instanceof HTMLImageElement){if(!rt.complete||rt.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&rt instanceof HTMLVideoElement&&rt.readyState<=1)return!1;return nt.pixelStorei(nt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,et.alphaMode===ALPHA_MODES.UNPACK),!this.noSubImage&&et.target===nt.TEXTURE_2D&&tt.width===ot&&tt.height===at?nt.texSubImage2D(nt.TEXTURE_2D,0,0,0,et.format,tt.type,rt):(tt.width=ot,tt.height=at,nt.texImage2D(et.target,0,tt.internalFormat,et.format,tt.type,rt)),!0}update(){if(this.destroyed)return;const _=this.source,et=_.naturalWidth||_.videoWidth||_.width,tt=_.naturalHeight||_.videoHeight||_.height;this.resize(et,tt),super.update()}dispose(){this.source=null}}class ImageResource extends BaseImageResource{constructor(_,et){if(et=et||{},typeof _=="string"){const tt=new Image;BaseImageResource.crossOrigin(tt,_,et.crossorigin),tt.src=_,_=tt}super(_),!_.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=_.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(et.createBitmap??settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof et.alphaMode=="number"?et.alphaMode:null,this.bitmap=null,this._load=null,et.autoLoad!==!1&&this.load()}load(_){return this._load?this._load:(_!==void 0&&(this.createBitmap=_),this._load=new Promise((et,tt)=>{const rt=this.source;this.url=rt.src;const nt=()=>{this.destroyed||(rt.onload=null,rt.onerror=null,this.update(),this._load=null,this.createBitmap?et(this.process()):et(this))};rt.complete&&rt.src?nt():(rt.onload=nt,rt.onerror=ot=>{tt(ot),this.onError.emit(ot)})}),this._load)}process(){const _=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const et=globalThis.createImageBitmap,tt=!_.crossOrigin||_.crossOrigin==="anonymous";return this._process=fetch(_.src,{mode:tt?"cors":"no-cors"}).then(rt=>rt.blob()).then(rt=>et(rt,0,0,_.width,_.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"})).then(rt=>this.destroyed?Promise.reject():(this.bitmap=rt,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(_,et,tt){if(typeof this.alphaMode=="number"&&(et.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(_,et,tt);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(_,et,tt,this.bitmap),!this.preserveBitmap){let rt=!0;const nt=et._glTextures;for(const ot in nt){const at=nt[ot];if(at!==tt&&at.dirtyId!==et.dirtyId){rt=!1;break}}rt&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(_){return typeof HTMLImageElement<"u"&&(typeof _=="string"||_ instanceof HTMLImageElement)}}class TextureUvs{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(_,et,tt){const rt=et.width,nt=et.height;if(tt){const ot=_.width/2/rt,at=_.height/2/nt,lt=_.x/rt+ot,ct=_.y/nt+at;tt=groupD8.add(tt,groupD8.NW),this.x0=lt+ot*groupD8.uX(tt),this.y0=ct+at*groupD8.uY(tt),tt=groupD8.add(tt,2),this.x1=lt+ot*groupD8.uX(tt),this.y1=ct+at*groupD8.uY(tt),tt=groupD8.add(tt,2),this.x2=lt+ot*groupD8.uX(tt),this.y2=ct+at*groupD8.uY(tt),tt=groupD8.add(tt,2),this.x3=lt+ot*groupD8.uX(tt),this.y3=ct+at*groupD8.uY(tt)}else this.x0=_.x/rt,this.y0=_.y/nt,this.x1=(_.x+_.width)/rt,this.y1=_.y/nt,this.x2=(_.x+_.width)/rt,this.y2=(_.y+_.height)/nt,this.x3=_.x/rt,this.y3=(_.y+_.height)/nt;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}TextureUvs.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const DEFAULT_UVS=new TextureUvs;function removeAllHandlers(_e){_e.destroy=function(){},_e.on=function(){},_e.once=function(){},_e.emit=function(){}}class Texture extends EventEmitter{constructor(_,et,tt,rt,nt,ot,at){if(super(),this.noFrame=!1,et||(this.noFrame=!0,et=new Rectangle(0,0,1,1)),_ instanceof Texture&&(_=_.baseTexture),this.baseTexture=_,this._frame=et,this.trim=rt,this.valid=!1,this.destroyed=!1,this._uvs=DEFAULT_UVS,this.uvMatrix=null,this.orig=tt||et,this._rotate=Number(nt||0),nt===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=ot?new Point(ot.x,ot.y):new Point(0,0),this.defaultBorders=at,this._updateID=0,this.textureCacheIds=[],_.valid?this.noFrame?_.valid&&this.onBaseTextureUpdated(_):this.frame=et:_.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&_.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(_){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=_.width,this._frame.height=_.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(_){if(this.baseTexture){if(_){const{resource:et}=this.baseTexture;et!=null&&et.url&&TextureCache[et.url]&&Texture.removeFromCache(et.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var rt;const _=this._frame.clone(),et=this._frame===this.orig?_:this.orig.clone(),tt=new Texture(this.baseTexture,!this.noFrame&&_,et,(rt=this.trim)==null?void 0:rt.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(tt._frame=_),tt}updateUvs(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(_,et={},tt=settings.STRICT_TEXTURE_CACHE){const rt=typeof _=="string";let nt=null;if(rt)nt=_;else if(_ instanceof BaseTexture){if(!_.cacheId){const at=(et==null?void 0:et.pixiIdPrefix)||"pixiid";_.cacheId=`${at}-${uid()}`,BaseTexture.addToCache(_,_.cacheId)}nt=_.cacheId}else{if(!_._pixiId){const at=(et==null?void 0:et.pixiIdPrefix)||"pixiid";_._pixiId=`${at}_${uid()}`}nt=_._pixiId}let ot=TextureCache[nt];if(rt&&tt&&!ot)throw new Error(`The cacheId "${nt}" does not exist in TextureCache.`);return!ot&&!(_ instanceof BaseTexture)?(et.resolution||(et.resolution=getResolutionOfUrl(_)),ot=new Texture(new BaseTexture(_,et)),ot.baseTexture.cacheId=nt,BaseTexture.addToCache(ot.baseTexture,nt),Texture.addToCache(ot,nt)):!ot&&_ instanceof BaseTexture&&(ot=new Texture(_),Texture.addToCache(ot,nt)),ot}static fromURL(_,et){const tt=Object.assign({autoLoad:!1},et==null?void 0:et.resourceOptions),rt=Texture.from(_,Object.assign({resourceOptions:tt},et),!1),nt=rt.baseTexture.resource;return rt.baseTexture.valid?Promise.resolve(rt):nt.load().then(()=>Promise.resolve(rt))}static fromBuffer(_,et,tt,rt){return new Texture(BaseTexture.fromBuffer(_,et,tt,rt))}static fromLoader(_,et,tt,rt){const nt=new BaseTexture(_,Object.assign({scaleMode:BaseTexture.defaultOptions.scaleMode,resolution:getResolutionOfUrl(et)},rt)),{resource:ot}=nt;ot instanceof ImageResource&&(ot.url=et);const at=new Texture(nt);return tt||(tt=et),BaseTexture.addToCache(at.baseTexture,tt),Texture.addToCache(at,tt),tt!==et&&(BaseTexture.addToCache(at.baseTexture,et),Texture.addToCache(at,et)),at.baseTexture.valid?Promise.resolve(at):new Promise(lt=>{at.baseTexture.once("loaded",()=>lt(at))})}static addToCache(_,et){et&&(_.textureCacheIds.includes(et)||_.textureCacheIds.push(et),TextureCache[et]&&TextureCache[et]!==_&&console.warn(`Texture added to the cache with an id [${et}] that already had an entry`),TextureCache[et]=_)}static removeFromCache(_){if(typeof _=="string"){const et=TextureCache[_];if(et){const tt=et.textureCacheIds.indexOf(_);return tt>-1&&et.textureCacheIds.splice(tt,1),delete TextureCache[_],et}}else if(_!=null&&_.textureCacheIds){for(let et=0;et<_.textureCacheIds.length;++et)TextureCache[_.textureCacheIds[et]]===_&&delete TextureCache[_.textureCacheIds[et]];return _.textureCacheIds.length=0,_}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(_){this._frame=_,this.noFrame=!1;const{x:et,y:tt,width:rt,height:nt}=_,ot=et+rt>this.baseTexture.width,at=tt+nt>this.baseTexture.height;if(ot||at){const lt=ot&&at?"and":"or",ct=`X: ${et} + ${rt} = ${et+rt} > ${this.baseTexture.width}`,dt=`Y: ${tt} + ${nt} = ${tt+nt} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${ct} ${lt} ${dt}`)}this.valid=rt&&nt&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=_),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(_){this._rotate=_,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Texture._EMPTY||(Texture._EMPTY=new Texture(new BaseTexture),removeAllHandlers(Texture._EMPTY),removeAllHandlers(Texture._EMPTY.baseTexture)),Texture._EMPTY}static get WHITE(){if(!Texture._WHITE){const _=settings.ADAPTER.createCanvas(16,16),et=_.getContext("2d");_.width=16,_.height=16,et.fillStyle="white",et.fillRect(0,0,16,16),Texture._WHITE=new Texture(BaseTexture.from(_)),removeAllHandlers(Texture._WHITE),removeAllHandlers(Texture._WHITE.baseTexture)}return Texture._WHITE}}class RenderTexture extends Texture{constructor(_,et){super(_,et),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(_){this.framebuffer.multisample=_}resize(_,et,tt=!0){const rt=this.baseTexture.resolution,nt=Math.round(_*rt)/rt,ot=Math.round(et*rt)/rt;this.valid=nt>0&&ot>0,this._frame.width=this.orig.width=nt,this._frame.height=this.orig.height=ot,tt&&this.baseTexture.resize(nt,ot),this.updateUvs()}setResolution(_){const{baseTexture:et}=this;et.resolution!==_&&(et.setResolution(_),this.resize(et.width,et.height,!1))}static create(_){return new RenderTexture(new BaseRenderTexture(_))}}class RenderTexturePool{constructor(_){this.texturePool={},this.textureOptions=_||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(_,et,tt=MSAA_QUALITY.NONE){const rt=new BaseRenderTexture(Object.assign({width:_,height:et,resolution:1,multisample:tt},this.textureOptions));return new RenderTexture(rt)}getOptimalTexture(_,et,tt=1,rt=MSAA_QUALITY.NONE){let nt;_=Math.max(Math.ceil(_*tt-1e-6),1),et=Math.max(Math.ceil(et*tt-1e-6),1),!this.enableFullScreen||_!==this._pixelsWidth||et!==this._pixelsHeight?(_=nextPow2(_),et=nextPow2(et),nt=((_&65535)<<16|et&65535)>>>0,rt>1&&(nt+=rt*4294967296)):nt=rt>1?-rt:-1,this.texturePool[nt]||(this.texturePool[nt]=[]);let ot=this.texturePool[nt].pop();return ot||(ot=this.createTexture(_,et,rt)),ot.filterPoolKey=nt,ot.setResolution(tt),ot}getFilterTexture(_,et,tt){const rt=this.getOptimalTexture(_.width,_.height,et||_.resolution,tt||MSAA_QUALITY.NONE);return rt.filterFrame=_.filterFrame,rt}returnTexture(_){const et=_.filterPoolKey;_.filterFrame=null,this.texturePool[et].push(_)}returnFilterTexture(_){this.returnTexture(_)}clear(_){if(_=_!==!1,_)for(const et in this.texturePool){const tt=this.texturePool[et];if(tt)for(let rt=0;rt<tt.length;rt++)tt[rt].destroy(!0)}this.texturePool={}}setScreenSize(_){if(!(_.width===this._pixelsWidth&&_.height===this._pixelsHeight)){this.enableFullScreen=_.width>0&&_.height>0;for(const et in this.texturePool){if(!(Number(et)<0))continue;const tt=this.texturePool[et];if(tt)for(let rt=0;rt<tt.length;rt++)tt[rt].destroy(!0);this.texturePool[et]=[]}this._pixelsWidth=_.width,this._pixelsHeight=_.height}}}RenderTexturePool.SCREEN_KEY=-1;class Quad extends Geometry{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class QuadUv extends Geometry{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Buffer(this.vertices),this.uvBuffer=new Buffer(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(_,et){let tt=0,rt=0;return this.uvs[0]=tt,this.uvs[1]=rt,this.uvs[2]=tt+et.width/_.width,this.uvs[3]=rt,this.uvs[4]=tt+et.width/_.width,this.uvs[5]=rt+et.height/_.height,this.uvs[6]=tt,this.uvs[7]=rt+et.height/_.height,tt=et.x,rt=et.y,this.vertices[0]=tt,this.vertices[1]=rt,this.vertices[2]=tt+et.width,this.vertices[3]=rt,this.vertices[4]=tt+et.width,this.vertices[5]=rt+et.height,this.vertices[6]=tt,this.vertices[7]=rt+et.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class FilterState{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const tempPoints=[new Point,new Point,new Point,new Point],tempMatrix$4=new Matrix;class FilterSystem{constructor(_){this.renderer=_,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(_,et){const tt=this.renderer,rt=this.defaultFilterStack,nt=this.statePool.pop()||new FilterState,ot=tt.renderTexture;let at,lt;if(ot.current){const gt=ot.current;at=gt.resolution,lt=gt.multisample}else at=tt.resolution,lt=tt.multisample;let ct=et[0].resolution||at,dt=et[0].multisample??lt,st=et[0].padding,it=et[0].autoFit,ut=et[0].legacy??!0;for(let gt=1;gt<et.length;gt++){const mt=et[gt];ct=Math.min(ct,mt.resolution||at),dt=Math.min(dt,mt.multisample??lt),st=this.useMaxPadding?Math.max(st,mt.padding):st+mt.padding,it=it&&mt.autoFit,ut=ut||(mt.legacy??!0)}rt.length===1&&(this.defaultFilterStack[0].renderTexture=ot.current),rt.push(nt),nt.resolution=ct,nt.multisample=dt,nt.legacy=ut,nt.target=_,nt.sourceFrame.copyFrom(_.filterArea||_.getBounds(!0)),nt.sourceFrame.pad(st);const ht=this.tempRect.copyFrom(ot.sourceFrame);tt.projection.transform&&this.transformAABB(tempMatrix$4.copyFrom(tt.projection.transform).invert(),ht),it?(nt.sourceFrame.fit(ht),(nt.sourceFrame.width<=0||nt.sourceFrame.height<=0)&&(nt.sourceFrame.width=0,nt.sourceFrame.height=0)):nt.sourceFrame.intersects(ht)||(nt.sourceFrame.width=0,nt.sourceFrame.height=0),this.roundFrame(nt.sourceFrame,ot.current?ot.current.resolution:tt.resolution,ot.sourceFrame,ot.destinationFrame,tt.projection.transform),nt.renderTexture=this.getOptimalFilterTexture(nt.sourceFrame.width,nt.sourceFrame.height,ct,dt),nt.filters=et,nt.destinationFrame.width=nt.renderTexture.width,nt.destinationFrame.height=nt.renderTexture.height;const ft=this.tempRect;ft.x=0,ft.y=0,ft.width=nt.sourceFrame.width,ft.height=nt.sourceFrame.height,nt.renderTexture.filterFrame=nt.sourceFrame,nt.bindingSourceFrame.copyFrom(ot.sourceFrame),nt.bindingDestinationFrame.copyFrom(ot.destinationFrame),nt.transform=tt.projection.transform,tt.projection.transform=null,ot.bind(nt.renderTexture,nt.sourceFrame,ft),tt.framebuffer.clear(0,0,0,0)}pop(){const _=this.defaultFilterStack,et=_.pop(),tt=et.filters;this.activeState=et;const rt=this.globalUniforms.uniforms;rt.outputFrame=et.sourceFrame,rt.resolution=et.resolution;const nt=rt.inputSize,ot=rt.inputPixel,at=rt.inputClamp;if(nt[0]=et.destinationFrame.width,nt[1]=et.destinationFrame.height,nt[2]=1/nt[0],nt[3]=1/nt[1],ot[0]=Math.round(nt[0]*et.resolution),ot[1]=Math.round(nt[1]*et.resolution),ot[2]=1/ot[0],ot[3]=1/ot[1],at[0]=.5*ot[2],at[1]=.5*ot[3],at[2]=et.sourceFrame.width*nt[2]-.5*ot[2],at[3]=et.sourceFrame.height*nt[3]-.5*ot[3],et.legacy){const ct=rt.filterArea;ct[0]=et.destinationFrame.width,ct[1]=et.destinationFrame.height,ct[2]=et.sourceFrame.x,ct[3]=et.sourceFrame.y,rt.filterClamp=rt.inputClamp}this.globalUniforms.update();const lt=_[_.length-1];if(this.renderer.framebuffer.blit(),tt.length===1)tt[0].apply(this,et.renderTexture,lt.renderTexture,CLEAR_MODES.BLEND,et),this.returnFilterTexture(et.renderTexture);else{let ct=et.renderTexture,dt=this.getOptimalFilterTexture(ct.width,ct.height,et.resolution);dt.filterFrame=ct.filterFrame;let st=0;for(st=0;st<tt.length-1;++st){st===1&&et.multisample>1&&(dt=this.getOptimalFilterTexture(ct.width,ct.height,et.resolution),dt.filterFrame=ct.filterFrame),tt[st].apply(this,ct,dt,CLEAR_MODES.CLEAR,et);const it=ct;ct=dt,dt=it}tt[st].apply(this,ct,lt.renderTexture,CLEAR_MODES.BLEND,et),st>1&&et.multisample>1&&this.returnFilterTexture(et.renderTexture),this.returnFilterTexture(ct),this.returnFilterTexture(dt)}et.clear(),this.statePool.push(et)}bindAndClear(_,et=CLEAR_MODES.CLEAR){const{renderTexture:tt,state:rt}=this.renderer;if(_===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,_==null?void 0:_.filterFrame){const ot=this.tempRect;ot.x=0,ot.y=0,ot.width=_.filterFrame.width,ot.height=_.filterFrame.height,tt.bind(_,_.filterFrame,ot)}else _!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?tt.bind(_):this.renderer.renderTexture.bind(_,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const nt=rt.stateId&1||this.forceClear;(et===CLEAR_MODES.CLEAR||et===CLEAR_MODES.BLIT&&nt)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(_,et,tt,rt){const nt=this.renderer;nt.state.set(_.state),this.bindAndClear(tt,rt),_.uniforms.uSampler=et,_.uniforms.filterGlobals=this.globalUniforms,nt.shader.bind(_),_.legacy=!!_.program.attributeData.aTextureCoord,_.legacy?(this.quadUv.map(et._frame,et.filterFrame),nt.geometry.bind(this.quadUv),nt.geometry.draw(DRAW_MODES.TRIANGLES)):(nt.geometry.bind(this.quad),nt.geometry.draw(DRAW_MODES.TRIANGLE_STRIP))}calculateSpriteMatrix(_,et){const{sourceFrame:tt,destinationFrame:rt}=this.activeState,{orig:nt}=et._texture,ot=_.set(rt.width,0,0,rt.height,tt.x,tt.y),at=et.worldTransform.copyTo(Matrix.TEMP_MATRIX);return at.invert(),ot.prepend(at),ot.scale(1/nt.width,1/nt.height),ot.translate(et.anchor.x,et.anchor.y),ot}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(_,et,tt=1,rt=MSAA_QUALITY.NONE){return this.texturePool.getOptimalTexture(_,et,tt,rt)}getFilterTexture(_,et,tt){if(typeof _=="number"){const nt=_;_=et,et=nt}_=_||this.activeState.renderTexture;const rt=this.texturePool.getOptimalTexture(_.width,_.height,et||_.resolution,tt||MSAA_QUALITY.NONE);return rt.filterFrame=_.filterFrame,rt}returnFilterTexture(_){this.texturePool.returnTexture(_)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(_,et){const tt=tempPoints[0],rt=tempPoints[1],nt=tempPoints[2],ot=tempPoints[3];tt.set(et.left,et.top),rt.set(et.left,et.bottom),nt.set(et.right,et.top),ot.set(et.right,et.bottom),_.apply(tt,tt),_.apply(rt,rt),_.apply(nt,nt),_.apply(ot,ot);const at=Math.min(tt.x,rt.x,nt.x,ot.x),lt=Math.min(tt.y,rt.y,nt.y,ot.y),ct=Math.max(tt.x,rt.x,nt.x,ot.x),dt=Math.max(tt.y,rt.y,nt.y,ot.y);et.x=at,et.y=lt,et.width=ct-at,et.height=dt-lt}roundFrame(_,et,tt,rt,nt){if(!(_.width<=0||_.height<=0||tt.width<=0||tt.height<=0)){if(nt){const{a:ot,b:at,c:lt,d:ct}=nt;if((Math.abs(at)>1e-4||Math.abs(lt)>1e-4)&&(Math.abs(ot)>1e-4||Math.abs(ct)>1e-4))return}nt=nt?tempMatrix$4.copyFrom(nt):tempMatrix$4.identity(),nt.translate(-tt.x,-tt.y).scale(rt.width/tt.width,rt.height/tt.height).translate(rt.x,rt.y),this.transformAABB(nt,_),_.ceil(et),this.transformAABB(nt.invert(),_)}}}FilterSystem.extension={type:ExtensionType.RendererSystem,name:"filter"};extensions$1.add(FilterSystem);class GLFramebuffer{constructor(_){this.framebuffer=_,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const tempRectangle=new Rectangle;class FramebufferSystem{constructor(_){this.renderer=_,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const _=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let et=this.renderer.context.extensions.drawBuffers,tt=this.renderer.context.extensions.depthTexture;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(et=null,tt=null),et?_.drawBuffers=rt=>et.drawBuffersWEBGL(rt):(this.hasMRT=!1,_.drawBuffers=()=>{}),tt||(this.writeDepthTexture=!1)}else this.msaaSamples=_.getInternalformatParameter(_.RENDERBUFFER,_.RGBA8,_.SAMPLES)}bind(_,et,tt=0){const{gl:rt}=this;if(_){const nt=_.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(_);this.current!==_&&(this.current=_,rt.bindFramebuffer(rt.FRAMEBUFFER,nt.framebuffer)),nt.mipLevel!==tt&&(_.dirtyId++,_.dirtyFormat++,nt.mipLevel=tt),nt.dirtyId!==_.dirtyId&&(nt.dirtyId=_.dirtyId,nt.dirtyFormat!==_.dirtyFormat?(nt.dirtyFormat=_.dirtyFormat,nt.dirtySize=_.dirtySize,this.updateFramebuffer(_,tt)):nt.dirtySize!==_.dirtySize&&(nt.dirtySize=_.dirtySize,this.resizeFramebuffer(_)));for(let ot=0;ot<_.colorTextures.length;ot++){const at=_.colorTextures[ot];this.renderer.texture.unbind(at.parentTextureArray||at)}if(_.depthTexture&&this.renderer.texture.unbind(_.depthTexture),et){const ot=et.width>>tt,at=et.height>>tt,lt=ot/et.width;this.setViewport(et.x*lt,et.y*lt,ot,at)}else{const ot=_.width>>tt,at=_.height>>tt;this.setViewport(0,0,ot,at)}}else this.current&&(this.current=null,rt.bindFramebuffer(rt.FRAMEBUFFER,null)),et?this.setViewport(et.x,et.y,et.width,et.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(_,et,tt,rt){const nt=this.viewport;_=Math.round(_),et=Math.round(et),tt=Math.round(tt),rt=Math.round(rt),(nt.width!==tt||nt.height!==rt||nt.x!==_||nt.y!==et)&&(nt.x=_,nt.y=et,nt.width=tt,nt.height=rt,this.gl.viewport(_,et,tt,rt))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(_,et,tt,rt,nt=BUFFER_BITS.COLOR|BUFFER_BITS.DEPTH){const{gl:ot}=this;ot.clearColor(_,et,tt,rt),ot.clear(nt)}initFramebuffer(_){const{gl:et}=this,tt=new GLFramebuffer(et.createFramebuffer());return tt.multisample=this.detectSamples(_.multisample),_.glFramebuffers[this.CONTEXT_UID]=tt,this.managedFramebuffers.push(_),_.disposeRunner.add(this),tt}resizeFramebuffer(_){const{gl:et}=this,tt=_.glFramebuffers[this.CONTEXT_UID];if(tt.stencil){et.bindRenderbuffer(et.RENDERBUFFER,tt.stencil);let ot;this.renderer.context.webGLVersion===1?ot=et.DEPTH_STENCIL:_.depth&&_.stencil?ot=et.DEPTH24_STENCIL8:_.depth?ot=et.DEPTH_COMPONENT24:ot=et.STENCIL_INDEX8,tt.msaaBuffer?et.renderbufferStorageMultisample(et.RENDERBUFFER,tt.multisample,ot,_.width,_.height):et.renderbufferStorage(et.RENDERBUFFER,ot,_.width,_.height)}const rt=_.colorTextures;let nt=rt.length;et.drawBuffers||(nt=Math.min(nt,1));for(let ot=0;ot<nt;ot++){const at=rt[ot],lt=at.parentTextureArray||at;this.renderer.texture.bind(lt,0),ot===0&&tt.msaaBuffer&&(et.bindRenderbuffer(et.RENDERBUFFER,tt.msaaBuffer),et.renderbufferStorageMultisample(et.RENDERBUFFER,tt.multisample,lt._glTextures[this.CONTEXT_UID].internalFormat,_.width,_.height))}_.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(_.depthTexture,0)}updateFramebuffer(_,et){const{gl:tt}=this,rt=_.glFramebuffers[this.CONTEXT_UID],nt=_.colorTextures;let ot=nt.length;tt.drawBuffers||(ot=Math.min(ot,1)),rt.multisample>1&&this.canMultisampleFramebuffer(_)?rt.msaaBuffer=rt.msaaBuffer||tt.createRenderbuffer():rt.msaaBuffer&&(tt.deleteRenderbuffer(rt.msaaBuffer),rt.msaaBuffer=null,rt.blitFramebuffer&&(rt.blitFramebuffer.dispose(),rt.blitFramebuffer=null));const at=[];for(let lt=0;lt<ot;lt++){const ct=nt[lt],dt=ct.parentTextureArray||ct;this.renderer.texture.bind(dt,0),lt===0&&rt.msaaBuffer?(tt.bindRenderbuffer(tt.RENDERBUFFER,rt.msaaBuffer),tt.renderbufferStorageMultisample(tt.RENDERBUFFER,rt.multisample,dt._glTextures[this.CONTEXT_UID].internalFormat,_.width,_.height),tt.framebufferRenderbuffer(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.RENDERBUFFER,rt.msaaBuffer)):(tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0+lt,ct.target,dt._glTextures[this.CONTEXT_UID].texture,et),at.push(tt.COLOR_ATTACHMENT0+lt))}if(at.length>1&&tt.drawBuffers(at),_.depthTexture&&this.writeDepthTexture){const lt=_.depthTexture;this.renderer.texture.bind(lt,0),tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.DEPTH_ATTACHMENT,tt.TEXTURE_2D,lt._glTextures[this.CONTEXT_UID].texture,et)}if((_.stencil||_.depth)&&!(_.depthTexture&&this.writeDepthTexture)){rt.stencil=rt.stencil||tt.createRenderbuffer();let lt,ct;this.renderer.context.webGLVersion===1?(lt=tt.DEPTH_STENCIL_ATTACHMENT,ct=tt.DEPTH_STENCIL):_.depth&&_.stencil?(lt=tt.DEPTH_STENCIL_ATTACHMENT,ct=tt.DEPTH24_STENCIL8):_.depth?(lt=tt.DEPTH_ATTACHMENT,ct=tt.DEPTH_COMPONENT24):(lt=tt.STENCIL_ATTACHMENT,ct=tt.STENCIL_INDEX8),tt.bindRenderbuffer(tt.RENDERBUFFER,rt.stencil),rt.msaaBuffer?tt.renderbufferStorageMultisample(tt.RENDERBUFFER,rt.multisample,ct,_.width,_.height):tt.renderbufferStorage(tt.RENDERBUFFER,ct,_.width,_.height),tt.framebufferRenderbuffer(tt.FRAMEBUFFER,lt,tt.RENDERBUFFER,rt.stencil)}else rt.stencil&&(tt.deleteRenderbuffer(rt.stencil),rt.stencil=null)}canMultisampleFramebuffer(_){return this.renderer.context.webGLVersion!==1&&_.colorTextures.length<=1&&!_.depthTexture}detectSamples(_){const{msaaSamples:et}=this;let tt=MSAA_QUALITY.NONE;if(_<=1||et===null)return tt;for(let rt=0;rt<et.length;rt++)if(et[rt]<=_){tt=et[rt];break}return tt===1&&(tt=MSAA_QUALITY.NONE),tt}blit(_,et,tt){const{current:rt,renderer:nt,gl:ot,CONTEXT_UID:at}=this;if(nt.context.webGLVersion!==2||!rt)return;const lt=rt.glFramebuffers[at];if(!lt)return;if(!_){if(!lt.msaaBuffer)return;const dt=rt.colorTextures[0];if(!dt)return;lt.blitFramebuffer||(lt.blitFramebuffer=new Framebuffer(rt.width,rt.height),lt.blitFramebuffer.addColorTexture(0,dt)),_=lt.blitFramebuffer,_.colorTextures[0]!==dt&&(_.colorTextures[0]=dt,_.dirtyId++,_.dirtyFormat++),(_.width!==rt.width||_.height!==rt.height)&&(_.width=rt.width,_.height=rt.height,_.dirtyId++,_.dirtySize++)}et||(et=tempRectangle,et.width=rt.width,et.height=rt.height),tt||(tt=et);const ct=et.width===tt.width&&et.height===tt.height;this.bind(_),ot.bindFramebuffer(ot.READ_FRAMEBUFFER,lt.framebuffer),ot.blitFramebuffer(et.left,et.top,et.right,et.bottom,tt.left,tt.top,tt.right,tt.bottom,ot.COLOR_BUFFER_BIT,ct?ot.NEAREST:ot.LINEAR),ot.bindFramebuffer(ot.READ_FRAMEBUFFER,_.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(_,et){const tt=_.glFramebuffers[this.CONTEXT_UID],rt=this.gl;if(!tt)return;delete _.glFramebuffers[this.CONTEXT_UID];const nt=this.managedFramebuffers.indexOf(_);nt>=0&&this.managedFramebuffers.splice(nt,1),_.disposeRunner.remove(this),et||(rt.deleteFramebuffer(tt.framebuffer),tt.msaaBuffer&&rt.deleteRenderbuffer(tt.msaaBuffer),tt.stencil&&rt.deleteRenderbuffer(tt.stencil)),tt.blitFramebuffer&&this.disposeFramebuffer(tt.blitFramebuffer,et)}disposeAll(_){const et=this.managedFramebuffers;this.managedFramebuffers=[];for(let tt=0;tt<et.length;tt++)this.disposeFramebuffer(et[tt],_)}forceStencil(){const _=this.current;if(!_)return;const et=_.glFramebuffers[this.CONTEXT_UID];if(!et||et.stencil&&_.stencil)return;_.stencil=!0;const tt=_.width,rt=_.height,nt=this.gl,ot=et.stencil=nt.createRenderbuffer();nt.bindRenderbuffer(nt.RENDERBUFFER,ot);let at,lt;this.renderer.context.webGLVersion===1?(at=nt.DEPTH_STENCIL_ATTACHMENT,lt=nt.DEPTH_STENCIL):_.depth?(at=nt.DEPTH_STENCIL_ATTACHMENT,lt=nt.DEPTH24_STENCIL8):(at=nt.STENCIL_ATTACHMENT,lt=nt.STENCIL_INDEX8),et.msaaBuffer?nt.renderbufferStorageMultisample(nt.RENDERBUFFER,et.multisample,lt,tt,rt):nt.renderbufferStorage(nt.RENDERBUFFER,lt,tt,rt),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,at,nt.RENDERBUFFER,ot)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle}destroy(){this.renderer=null}}FramebufferSystem.extension={type:ExtensionType.RendererSystem,name:"framebuffer"};extensions$1.add(FramebufferSystem);const byteSizeMap={5126:4,5123:2,5121:1};class GeometrySystem{constructor(_){this.renderer=_,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const _=this.gl=this.renderer.gl,et=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,et.webGLVersion!==2){let tt=this.renderer.context.extensions.vertexArrayObject;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(tt=null),tt?(_.createVertexArray=()=>tt.createVertexArrayOES(),_.bindVertexArray=rt=>tt.bindVertexArrayOES(rt),_.deleteVertexArray=rt=>tt.deleteVertexArrayOES(rt)):(this.hasVao=!1,_.createVertexArray=()=>null,_.bindVertexArray=()=>null,_.deleteVertexArray=()=>null)}if(et.webGLVersion!==2){const tt=_.getExtension("ANGLE_instanced_arrays");tt?(_.vertexAttribDivisor=(rt,nt)=>tt.vertexAttribDivisorANGLE(rt,nt),_.drawElementsInstanced=(rt,nt,ot,at,lt)=>tt.drawElementsInstancedANGLE(rt,nt,ot,at,lt),_.drawArraysInstanced=(rt,nt,ot,at)=>tt.drawArraysInstancedANGLE(rt,nt,ot,at)):this.hasInstance=!1}this.canUseUInt32ElementIndex=et.webGLVersion===2||!!et.extensions.uint32ElementIndex}bind(_,et){et=et||this.renderer.shader.shader;const{gl:tt}=this;let rt=_.glVertexArrayObjects[this.CONTEXT_UID],nt=!1;rt||(this.managedGeometries[_.id]=_,_.disposeRunner.add(this),_.glVertexArrayObjects[this.CONTEXT_UID]=rt={},nt=!0);const ot=rt[et.program.id]||this.initGeometryVao(_,et,nt);this._activeGeometry=_,this._activeVao!==ot&&(this._activeVao=ot,this.hasVao?tt.bindVertexArray(ot):this.activateVao(_,et.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const _=this._activeGeometry,et=this.renderer.buffer;for(let tt=0;tt<_.buffers.length;tt++){const rt=_.buffers[tt];et.update(rt)}}checkCompatibility(_,et){const tt=_.attributes,rt=et.attributeData;for(const nt in rt)if(!tt[nt])throw new Error(`shader and geometry incompatible, geometry missing the "${nt}" attribute`)}getSignature(_,et){const tt=_.attributes,rt=et.attributeData,nt=["g",_.id];for(const ot in tt)rt[ot]&&nt.push(ot,rt[ot].location);return nt.join("-")}initGeometryVao(_,et,tt=!0){const rt=this.gl,nt=this.CONTEXT_UID,ot=this.renderer.buffer,at=et.program;at.glPrograms[nt]||this.renderer.shader.generateProgram(et),this.checkCompatibility(_,at);const lt=this.getSignature(_,at),ct=_.glVertexArrayObjects[this.CONTEXT_UID];let dt=ct[lt];if(dt)return ct[at.id]=dt,dt;const st=_.buffers,it=_.attributes,ut={},ht={};for(const ft in st)ut[ft]=0,ht[ft]=0;for(const ft in it)!it[ft].size&&at.attributeData[ft]?it[ft].size=at.attributeData[ft].size:it[ft].size||console.warn(`PIXI Geometry attribute '${ft}' size cannot be determined (likely the bound shader does not have the attribute)`),ut[it[ft].buffer]+=it[ft].size*byteSizeMap[it[ft].type];for(const ft in it){const gt=it[ft],mt=gt.size;gt.stride===void 0&&(ut[gt.buffer]===mt*byteSizeMap[gt.type]?gt.stride=0:gt.stride=ut[gt.buffer]),gt.start===void 0&&(gt.start=ht[gt.buffer],ht[gt.buffer]+=mt*byteSizeMap[gt.type])}dt=rt.createVertexArray(),rt.bindVertexArray(dt);for(let ft=0;ft<st.length;ft++){const gt=st[ft];ot.bind(gt),tt&&gt._glBuffers[nt].refCount++}return this.activateVao(_,at),ct[at.id]=dt,ct[lt]=dt,rt.bindVertexArray(null),ot.unbind(BUFFER_TYPE.ARRAY_BUFFER),dt}disposeGeometry(_,et){var at;if(!this.managedGeometries[_.id])return;delete this.managedGeometries[_.id];const tt=_.glVertexArrayObjects[this.CONTEXT_UID],rt=this.gl,nt=_.buffers,ot=(at=this.renderer)==null?void 0:at.buffer;if(_.disposeRunner.remove(this),!!tt){if(ot)for(let lt=0;lt<nt.length;lt++){const ct=nt[lt]._glBuffers[this.CONTEXT_UID];ct&&(ct.refCount--,ct.refCount===0&&!et&&ot.dispose(nt[lt],et))}if(!et){for(const lt in tt)if(lt[0]==="g"){const ct=tt[lt];this._activeVao===ct&&this.unbind(),rt.deleteVertexArray(ct)}}delete _.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(_){const et=Object.keys(this.managedGeometries);for(let tt=0;tt<et.length;tt++)this.disposeGeometry(this.managedGeometries[et[tt]],_)}activateVao(_,et){const tt=this.gl,rt=this.CONTEXT_UID,nt=this.renderer.buffer,ot=_.buffers,at=_.attributes;_.indexBuffer&&nt.bind(_.indexBuffer);let lt=null;for(const ct in at){const dt=at[ct],st=ot[dt.buffer],it=st._glBuffers[rt];if(et.attributeData[ct]){lt!==it&&(nt.bind(st),lt=it);const ut=et.attributeData[ct].location;if(tt.enableVertexAttribArray(ut),tt.vertexAttribPointer(ut,dt.size,dt.type||tt.FLOAT,dt.normalized,dt.stride,dt.start),dt.instance)if(this.hasInstance)tt.vertexAttribDivisor(ut,dt.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(_,et,tt,rt){const{gl:nt}=this,ot=this._activeGeometry;if(ot.indexBuffer){const at=ot.indexBuffer.data.BYTES_PER_ELEMENT,lt=at===2?nt.UNSIGNED_SHORT:nt.UNSIGNED_INT;at===2||at===4&&this.canUseUInt32ElementIndex?ot.instanced?nt.drawElementsInstanced(_,et||ot.indexBuffer.data.length,lt,(tt||0)*at,rt||1):nt.drawElements(_,et||ot.indexBuffer.data.length,lt,(tt||0)*at):console.warn("unsupported index buffer type: uint32")}else ot.instanced?nt.drawArraysInstanced(_,tt,et||ot.getSize(),rt||1):nt.drawArrays(_,tt,et||ot.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}GeometrySystem.extension={type:ExtensionType.RendererSystem,name:"geometry"};extensions$1.add(GeometrySystem);const tempMat$1=new Matrix;class TextureMatrix{constructor(_,et){this._texture=_,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof et>"u"?.5:et,this.isSimple=!1}get texture(){return this._texture}set texture(_){this._texture=_,this._textureID=-1}multiplyUvs(_,et){et===void 0&&(et=_);const tt=this.mapCoord;for(let rt=0;rt<_.length;rt+=2){const nt=_[rt],ot=_[rt+1];et[rt]=nt*tt.a+ot*tt.c+tt.tx,et[rt+1]=nt*tt.b+ot*tt.d+tt.ty}return et}update(_){const et=this._texture;if(!et||!et.valid||!_&&this._textureID===et._updateID)return!1;this._textureID=et._updateID,this._updateID++;const tt=et._uvs;this.mapCoord.set(tt.x1-tt.x0,tt.y1-tt.y0,tt.x3-tt.x0,tt.y3-tt.y0,tt.x0,tt.y0);const rt=et.orig,nt=et.trim;nt&&(tempMat$1.set(rt.width/nt.width,0,0,rt.height/nt.height,-nt.x/nt.width,-nt.y/nt.height),this.mapCoord.append(tempMat$1));const ot=et.baseTexture,at=this.uClampFrame,lt=this.clampMargin/ot.resolution,ct=this.clampOffset;return at[0]=(et._frame.x+lt+ct)/ot.width,at[1]=(et._frame.y+lt+ct)/ot.height,at[2]=(et._frame.x+et._frame.width-lt+ct)/ot.width,at[3]=(et._frame.y+et._frame.height-lt+ct)/ot.height,this.uClampOffset[0]=ct/ot.realWidth,this.uClampOffset[1]=ct/ot.realHeight,this.isSimple=et._frame.width===ot.width&&et._frame.height===ot.height&&et.rotate===0,!0}}var fragment$7=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,vertex$4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class SpriteMaskFilter extends Filter{constructor(_,et,tt){let rt=null;typeof _!="string"&&et===void 0&&tt===void 0&&(rt=_,_=void 0,et=void 0,tt=void 0),super(_||vertex$4,et||fragment$7,tt),this.maskSprite=rt,this.maskMatrix=new Matrix}get maskSprite(){return this._maskSprite}set maskSprite(_){this._maskSprite=_,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(_,et,tt,rt){const nt=this._maskSprite,ot=nt._texture;ot.valid&&(ot.uvMatrix||(ot.uvMatrix=new TextureMatrix(ot,0)),ot.uvMatrix.update(),this.uniforms.npmAlpha=ot.baseTexture.alphaMode?0:1,this.uniforms.mask=ot,this.uniforms.otherMatrix=_.calculateSpriteMatrix(this.maskMatrix,nt).prepend(ot.uvMatrix.mapCoord),this.uniforms.alpha=nt.worldAlpha,this.uniforms.maskClamp=ot.uvMatrix.uClampFrame,_.applyFilter(this,et,tt,rt))}}class MaskData{constructor(_=null){this.type=MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=_||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Filter.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(_){_?this._filters?this._filters[0]=_:this._filters=[_]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(_){_?(this._stencilCounter=_._stencilCounter,this._scissorCounter=_._scissorCounter,this._scissorRect=_._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class MaskSystem{constructor(_){this.renderer=_,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(_){this.maskStack=_,this.renderer.scissor.setMaskStack(_),this.renderer.stencil.setMaskStack(_)}push(_,et){let tt=et;if(!tt.isMaskData){const nt=this.maskDataPool.pop()||new MaskData;nt.pooled=!0,nt.maskObject=et,tt=nt}const rt=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(tt.copyCountersOrReset(rt),tt._colorMask=rt?rt._colorMask:15,tt.autoDetect&&this.detect(tt),tt._target=_,tt.type!==MASK_TYPES.SPRITE&&this.maskStack.push(tt),tt.enabled)switch(tt.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.push(tt);break;case MASK_TYPES.STENCIL:this.renderer.stencil.push(tt);break;case MASK_TYPES.SPRITE:tt.copyCountersOrReset(null),this.pushSpriteMask(tt);break;case MASK_TYPES.COLOR:this.pushColorMask(tt);break}tt.type===MASK_TYPES.SPRITE&&this.maskStack.push(tt)}pop(_){const et=this.maskStack.pop();if(!(!et||et._target!==_)){if(et.enabled)switch(et.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.pop(et);break;case MASK_TYPES.STENCIL:this.renderer.stencil.pop(et.maskObject);break;case MASK_TYPES.SPRITE:this.popSpriteMask(et);break;case MASK_TYPES.COLOR:this.popColorMask(et);break}if(et.reset(),et.pooled&&this.maskDataPool.push(et),this.maskStack.length!==0){const tt=this.maskStack[this.maskStack.length-1];tt.type===MASK_TYPES.SPRITE&&tt._filters&&(tt._filters[0].maskSprite=tt.maskObject)}}}detect(_){const et=_.maskObject;et?et.isSprite?_.type=MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(_)?_.type=MASK_TYPES.SCISSOR:_.type=MASK_TYPES.STENCIL:_.type=MASK_TYPES.COLOR}pushSpriteMask(_){const{maskObject:et}=_,tt=_._target;let rt=_._filters;rt||(rt=this.alphaMaskPool[this.alphaMaskIndex],rt||(rt=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter])),rt[0].resolution=_.resolution,rt[0].multisample=_.multisample,rt[0].maskSprite=et;const nt=tt.filterArea;tt.filterArea=et.getBounds(!0),this.renderer.filter.push(tt,rt),tt.filterArea=nt,_._filters||this.alphaMaskIndex++}popSpriteMask(_){this.renderer.filter.pop(),_._filters?_._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(_){const et=_._colorMask,tt=_._colorMask=et&_.colorMask;tt!==et&&this.renderer.gl.colorMask((tt&1)!==0,(tt&2)!==0,(tt&4)!==0,(tt&8)!==0)}popColorMask(_){const et=_._colorMask,tt=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;tt!==et&&this.renderer.gl.colorMask((tt&1)!==0,(tt&2)!==0,(tt&4)!==0,(tt&8)!==0)}destroy(){this.renderer=null}}MaskSystem.extension={type:ExtensionType.RendererSystem,name:"mask"};extensions$1.add(MaskSystem);class AbstractMaskSystem{constructor(_){this.renderer=_,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(_){const{gl:et}=this.renderer,tt=this.getStackLength();this.maskStack=_;const rt=this.getStackLength();rt!==tt&&(rt===0?et.disable(this.glConst):(et.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const tempMatrix$3=new Matrix,rectPool=[],_ScissorSystem=class _i extends AbstractMaskSystem{constructor(_){super(_),this.glConst=settings.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const _=this.maskStack[this.maskStack.length-1];return _?_._scissorCounter:0}calcScissorRect(_){if(_._scissorRectLocal)return;const et=_._scissorRect,{maskObject:tt}=_,{renderer:rt}=this,nt=rt.renderTexture,ot=tt.getBounds(!0,rectPool.pop()??new Rectangle);this.roundFrameToPixels(ot,nt.current?nt.current.resolution:rt.resolution,nt.sourceFrame,nt.destinationFrame,rt.projection.transform),et&&ot.fit(et),_._scissorRectLocal=ot}static isMatrixRotated(_){if(!_)return!1;const{a:et,b:tt,c:rt,d:nt}=_;return(Math.abs(tt)>1e-4||Math.abs(rt)>1e-4)&&(Math.abs(et)>1e-4||Math.abs(nt)>1e-4)}testScissor(_){const{maskObject:et}=_;if(!et.isFastRect||!et.isFastRect()||_i.isMatrixRotated(et.worldTransform)||_i.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(_);const tt=_._scissorRectLocal;return tt.width>0&&tt.height>0}roundFrameToPixels(_,et,tt,rt,nt){_i.isMatrixRotated(nt)||(nt=nt?tempMatrix$3.copyFrom(nt):tempMatrix$3.identity(),nt.translate(-tt.x,-tt.y).scale(rt.width/tt.width,rt.height/tt.height).translate(rt.x,rt.y),this.renderer.filter.transformAABB(nt,_),_.fit(rt),_.x=Math.round(_.x*et),_.y=Math.round(_.y*et),_.width=Math.round(_.width*et),_.height=Math.round(_.height*et))}push(_){_._scissorRectLocal||this.calcScissorRect(_);const{gl:et}=this.renderer;_._scissorRect||et.enable(et.SCISSOR_TEST),_._scissorCounter++,_._scissorRect=_._scissorRectLocal,this._useCurrent()}pop(_){const{gl:et}=this.renderer;_&&rectPool.push(_._scissorRectLocal),this.getStackLength()>0?this._useCurrent():et.disable(et.SCISSOR_TEST)}_useCurrent(){const _=this.maskStack[this.maskStack.length-1]._scissorRect;let et;this.renderer.renderTexture.current?et=_.y:et=this.renderer.height-_.height-_.y,this.renderer.gl.scissor(_.x,et,_.width,_.height)}};_ScissorSystem.extension={type:ExtensionType.RendererSystem,name:"scissor"};let ScissorSystem=_ScissorSystem;extensions$1.add(ScissorSystem);class StencilSystem extends AbstractMaskSystem{constructor(_){super(_),this.glConst=settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const _=this.maskStack[this.maskStack.length-1];return _?_._stencilCounter:0}push(_){const et=_.maskObject,{gl:tt}=this.renderer,rt=_._stencilCounter;rt===0&&(this.renderer.framebuffer.forceStencil(),tt.clearStencil(0),tt.clear(tt.STENCIL_BUFFER_BIT),tt.enable(tt.STENCIL_TEST)),_._stencilCounter++;const nt=_._colorMask;nt!==0&&(_._colorMask=0,tt.colorMask(!1,!1,!1,!1)),tt.stencilFunc(tt.EQUAL,rt,4294967295),tt.stencilOp(tt.KEEP,tt.KEEP,tt.INCR),et.renderable=!0,et.render(this.renderer),this.renderer.batch.flush(),et.renderable=!1,nt!==0&&(_._colorMask=nt,tt.colorMask((nt&1)!==0,(nt&2)!==0,(nt&4)!==0,(nt&8)!==0)),this._useCurrent()}pop(_){const et=this.renderer.gl;if(this.getStackLength()===0)et.disable(et.STENCIL_TEST);else{const tt=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,rt=tt?tt._colorMask:15;rt!==0&&(tt._colorMask=0,et.colorMask(!1,!1,!1,!1)),et.stencilOp(et.KEEP,et.KEEP,et.DECR),_.renderable=!0,_.render(this.renderer),this.renderer.batch.flush(),_.renderable=!1,rt!==0&&(tt._colorMask=rt,et.colorMask((rt&1)!==0,(rt&2)!==0,(rt&4)!==0,(rt&8)!==0)),this._useCurrent()}}_useCurrent(){const _=this.renderer.gl;_.stencilFunc(_.EQUAL,this.getStackLength(),4294967295),_.stencilOp(_.KEEP,_.KEEP,_.KEEP)}}StencilSystem.extension={type:ExtensionType.RendererSystem,name:"stencil"};extensions$1.add(StencilSystem);class PluginSystem{constructor(_){this.renderer=_,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.extract has moved to renderer.extract"),_.extract}},prepare:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),_.prepare}},interaction:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),_.events}}})}init(){const _=this.rendererPlugins;for(const et in _)this.plugins[et]=new _[et](this.renderer)}destroy(){for(const _ in this.plugins)this.plugins[_].destroy(),this.plugins[_]=null}}PluginSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_plugin"};extensions$1.add(PluginSystem);class ProjectionSystem{constructor(_){this.renderer=_,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}update(_,et,tt,rt){this.destinationFrame=_||this.destinationFrame||this.defaultFrame,this.sourceFrame=et||this.sourceFrame||_,this.calculateProjection(this.destinationFrame,this.sourceFrame,tt,rt),this.transform&&this.projectionMatrix.append(this.transform);const nt=this.renderer;nt.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,nt.globalUniforms.update(),nt.shader.shader&&nt.shader.syncUniformGroup(nt.shader.shader.uniforms.globals)}calculateProjection(_,et,tt,rt){const nt=this.projectionMatrix,ot=rt?-1:1;nt.identity(),nt.a=1/et.width*2,nt.d=ot*(1/et.height*2),nt.tx=-1-et.x*nt.a,nt.ty=-ot-et.y*nt.d}setTransform(_){}destroy(){this.renderer=null}}ProjectionSystem.extension={type:ExtensionType.RendererSystem,name:"projection"};extensions$1.add(ProjectionSystem);const tempTransform=new Transform,tempRect$1=new Rectangle;class GenerateTextureSystem{constructor(_){this.renderer=_,this._tempMatrix=new Matrix}generateTexture(_,et){const{region:tt,...rt}=et||{},nt=(tt==null?void 0:tt.copyTo(tempRect$1))||_.getLocalBounds(tempRect$1,!0),ot=rt.resolution||this.renderer.resolution;nt.width=Math.max(nt.width,1/ot),nt.height=Math.max(nt.height,1/ot),rt.width=nt.width,rt.height=nt.height,rt.resolution=ot,rt.multisample??(rt.multisample=this.renderer.multisample);const at=RenderTexture.create(rt);this._tempMatrix.tx=-nt.x,this._tempMatrix.ty=-nt.y;const lt=_.transform;return _.transform=tempTransform,this.renderer.render(_,{renderTexture:at,transform:this._tempMatrix,skipUpdateTransform:!!_.parent,blit:!0}),_.transform=lt,at}destroy(){}}GenerateTextureSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"textureGenerator"};extensions$1.add(GenerateTextureSystem);const tempRect=new Rectangle,tempRect2=new Rectangle;class RenderTextureSystem{constructor(_){this.renderer=_,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}contextChange(){var et;const _=(et=this.renderer)==null?void 0:et.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(_&&_.alpha&&_.premultipliedAlpha)}bind(_=null,et,tt){const rt=this.renderer;this.current=_;let nt,ot,at;_?(nt=_.baseTexture,at=nt.resolution,et||(tempRect.width=_.frame.width,tempRect.height=_.frame.height,et=tempRect),tt||(tempRect2.x=_.frame.x,tempRect2.y=_.frame.y,tempRect2.width=et.width,tempRect2.height=et.height,tt=tempRect2),ot=nt.framebuffer):(at=rt.resolution,et||(tempRect.width=rt._view.screen.width,tempRect.height=rt._view.screen.height,et=tempRect),tt||(tt=tempRect,tt.width=et.width,tt.height=et.height));const lt=this.viewportFrame;lt.x=tt.x*at,lt.y=tt.y*at,lt.width=tt.width*at,lt.height=tt.height*at,_||(lt.y=rt.view.height-(lt.y+lt.height)),lt.ceil(),this.renderer.framebuffer.bind(ot,lt),this.renderer.projection.update(tt,et,at,!ot),_?this.renderer.mask.setMaskStack(nt.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(et),this.destinationFrame.copyFrom(tt)}clear(_,et){const tt=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,rt=Color.shared.setValue(_||tt);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&rt.premultiply(rt.alpha);const nt=this.destinationFrame,ot=this.current?this.current.baseTexture:this.renderer._view.screen,at=nt.width!==ot.width||nt.height!==ot.height;if(at){let{x:lt,y:ct,width:dt,height:st}=this.viewportFrame;lt=Math.round(lt),ct=Math.round(ct),dt=Math.round(dt),st=Math.round(st),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(lt,ct,dt,st)}this.renderer.framebuffer.clear(rt.red,rt.green,rt.blue,rt.alpha,et),at&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}RenderTextureSystem.extension={type:ExtensionType.RendererSystem,name:"renderTexture"};extensions$1.add(RenderTextureSystem);class GLProgram{constructor(_,et){this.program=_,this.uniformData=et,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function getAttributeData(_e,_){const et={},tt=_.getProgramParameter(_e,_.ACTIVE_ATTRIBUTES);for(let rt=0;rt<tt;rt++){const nt=_.getActiveAttrib(_e,rt);if(nt.name.startsWith("gl_"))continue;const ot=mapType(_,nt.type),at={type:ot,name:nt.name,size:mapSize(ot),location:_.getAttribLocation(_e,nt.name)};et[nt.name]=at}return et}function getUniformData(_e,_){const et={},tt=_.getProgramParameter(_e,_.ACTIVE_UNIFORMS);for(let rt=0;rt<tt;rt++){const nt=_.getActiveUniform(_e,rt),ot=nt.name.replace(/\[.*?\]$/,""),at=!!nt.name.match(/\[.*?\]$/),lt=mapType(_,nt.type);et[ot]={name:ot,index:rt,type:lt,size:nt.size,isArray:at,value:defaultValue(lt,nt.size)}}return et}function generateProgram(_e,_){var at;const et=compileShader(_e,_e.VERTEX_SHADER,_.vertexSrc),tt=compileShader(_e,_e.FRAGMENT_SHADER,_.fragmentSrc),rt=_e.createProgram();_e.attachShader(rt,et),_e.attachShader(rt,tt);const nt=(at=_.extra)==null?void 0:at.transformFeedbackVaryings;if(nt&&(typeof _e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):_e.transformFeedbackVaryings(rt,nt.names,nt.bufferMode==="separate"?_e.SEPARATE_ATTRIBS:_e.INTERLEAVED_ATTRIBS)),_e.linkProgram(rt),_e.getProgramParameter(rt,_e.LINK_STATUS)||logProgramError(_e,rt,et,tt),_.attributeData=getAttributeData(rt,_e),_.uniformData=getUniformData(rt,_e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(_.vertexSrc)){const lt=Object.keys(_.attributeData);lt.sort((ct,dt)=>ct>dt?1:-1);for(let ct=0;ct<lt.length;ct++)_.attributeData[lt[ct]].location=ct,_e.bindAttribLocation(rt,ct,lt[ct]);_e.linkProgram(rt)}_e.deleteShader(et),_e.deleteShader(tt);const ot={};for(const lt in _.uniformData){const ct=_.uniformData[lt];ot[lt]={location:_e.getUniformLocation(rt,lt),value:defaultValue(ct.type,ct.size)}}return new GLProgram(rt,ot)}function uboUpdate(_e,_,et,tt,rt){et.buffer.update(rt)}const UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(_e){const _=_e.map(nt=>({data:nt,offset:0,dataLen:0,dirty:0}));let et=0,tt=0,rt=0;for(let nt=0;nt<_.length;nt++){const ot=_[nt];if(et=GLSL_TO_STD40_SIZE[ot.data.type],ot.data.size>1&&(et=Math.max(et,16)*ot.data.size),ot.dataLen=et,tt%et!==0&&tt<16){const at=tt%et%16;tt+=at,rt+=at}tt+et>16?(rt=Math.ceil(rt/16)*16,ot.offset=rt,rt+=et,tt=et):(ot.offset=rt,tt+=et,rt+=et)}return rt=Math.ceil(rt/16)*16,{uboElements:_,size:rt}}function getUBOData(_e,_){const et=[];for(const tt in _e)_[tt]&&et.push(_[tt]);return et.sort((tt,rt)=>tt.index-rt.index),et}function generateUniformBufferSync(_e,_){if(!_e.autoManage)return{size:0,syncFunc:uboUpdate};const et=getUBOData(_e.uniforms,_),{uboElements:tt,size:rt}=createUBOElements(et),nt=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let ot=0;ot<tt.length;ot++){const at=tt[ot],lt=_e.uniforms[at.data.name],ct=at.data.name;let dt=!1;for(let st=0;st<uniformParsers.length;st++){const it=uniformParsers[st];if(it.codeUbo&&it.test(at.data,lt)){nt.push(`offset = ${at.offset/4};`,uniformParsers[st].codeUbo(at.data.name,lt)),dt=!0;break}}if(!dt)if(at.data.size>1){const st=mapSize(at.data.type),it=Math.max(GLSL_TO_STD40_SIZE[at.data.type]/16,1),ut=st/it,ht=(4-ut%4)%4;nt.push(`
                cv = ud.${ct}.value;
                v = uv.${ct};
                offset = ${at.offset/4};

                t = 0;

                for(var i=0; i < ${at.data.size*it}; i++)
                {
                    for(var j = 0; j < ${ut}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${ht};
                }

                `)}else{const st=UBO_TO_SINGLE_SETTERS[at.data.type];nt.push(`
                cv = ud.${ct}.value;
                v = uv.${ct};
                offset = ${at.offset/4};
                ${st};
                `)}}return nt.push(`
       renderer.buffer.update(buffer);
    `),{size:rt,syncFunc:new Function("ud","uv","renderer","syncData","buffer",nt.join(`
`))}}let UID=0;const defaultSyncData={textureCount:0,uboCount:0};class ShaderSystem{constructor(_){this.destroyed=!1,this.renderer=_,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}systemCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(_){this.gl=_,this.reset()}bind(_,et){_.disposeRunner.add(this),_.uniforms.globals=this.renderer.globalUniforms;const tt=_.program,rt=tt.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(_);return this.shader=_,this.program!==tt&&(this.program=tt,this.gl.useProgram(rt.program)),et||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(_.uniformGroup,defaultSyncData)),rt}setUniforms(_){const et=this.shader.program,tt=et.glPrograms[this.renderer.CONTEXT_UID];et.syncUniforms(tt.uniformData,_,this.renderer)}syncUniformGroup(_,et){const tt=this.getGlProgram();(!_.static||_.dirtyId!==tt.uniformDirtyGroups[_.id])&&(tt.uniformDirtyGroups[_.id]=_.dirtyId,this.syncUniforms(_,tt,et))}syncUniforms(_,et,tt){(_.syncUniforms[this.shader.program.id]||this.createSyncGroups(_))(et.uniformData,_.uniforms,this.renderer,tt)}createSyncGroups(_){const et=this.getSignature(_,this.shader.program.uniformData,"u");return this.cache[et]||(this.cache[et]=generateUniformsSync(_,this.shader.program.uniformData)),_.syncUniforms[this.shader.program.id]=this.cache[et],_.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(_,et){const tt=this.getGlProgram();if(!_.static||_.dirtyId!==0||!tt.uniformGroups[_.id]){_.dirtyId=0;const rt=tt.uniformGroups[_.id]||this.createSyncBufferGroup(_,tt,et);_.buffer.update(),rt(tt.uniformData,_.uniforms,this.renderer,defaultSyncData,_.buffer)}this.renderer.buffer.bindBufferBase(_.buffer,tt.uniformBufferBindings[et])}createSyncBufferGroup(_,et,tt){const{gl:rt}=this.renderer;this.renderer.buffer.bind(_.buffer);const nt=this.gl.getUniformBlockIndex(et.program,tt);et.uniformBufferBindings[tt]=this.shader.uniformBindCount,rt.uniformBlockBinding(et.program,nt,this.shader.uniformBindCount),this.shader.uniformBindCount++;const ot=this.getSignature(_,this.shader.program.uniformData,"ubo");let at=this._uboCache[ot];if(at||(at=this._uboCache[ot]=generateUniformBufferSync(_,this.shader.program.uniformData)),_.autoManage){const lt=new Float32Array(at.size/4);_.buffer.update(lt)}return et.uniformGroups[_.id]=at.syncFunc,et.uniformGroups[_.id]}getSignature(_,et,tt){const rt=_.uniforms,nt=[`${tt}-`];for(const ot in rt)nt.push(ot),et[ot]&&nt.push(et[ot].type);return nt.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(_){const et=this.gl,tt=_.program,rt=generateProgram(et,tt);return tt.glPrograms[this.renderer.CONTEXT_UID]=rt,rt}reset(){this.program=null,this.shader=null}disposeShader(_){this.shader===_&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ShaderSystem.extension={type:ExtensionType.RendererSystem,name:"shader"};extensions$1.add(ShaderSystem);class StartupSystem{constructor(_){this.renderer=_}run(_){const{renderer:et}=this;et.runners.init.emit(et.options),_.hello&&console.log(`PixiJS 7.4.2 - ${et.rendererLogId} - https://pixijs.com`),et.resize(et.screen.width,et.screen.height)}destroy(){}}StartupSystem.defaultOptions={hello:!1},StartupSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"startup"};extensions$1.add(StartupSystem);function mapWebGLBlendModesToPixi(_e,_=[]){return _[BLEND_MODES.NORMAL]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.ADD]=[_e.ONE,_e.ONE],_[BLEND_MODES.MULTIPLY]=[_e.DST_COLOR,_e.ONE_MINUS_SRC_ALPHA,_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SCREEN]=[_e.ONE,_e.ONE_MINUS_SRC_COLOR,_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.OVERLAY]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DARKEN]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.LIGHTEN]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR_DODGE]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR_BURN]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.HARD_LIGHT]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SOFT_LIGHT]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DIFFERENCE]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.EXCLUSION]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.HUE]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SATURATION]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.LUMINOSITY]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.NONE]=[0,0],_[BLEND_MODES.NORMAL_NPM]=[_e.SRC_ALPHA,_e.ONE_MINUS_SRC_ALPHA,_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.ADD_NPM]=[_e.SRC_ALPHA,_e.ONE,_e.ONE,_e.ONE],_[BLEND_MODES.SCREEN_NPM]=[_e.SRC_ALPHA,_e.ONE_MINUS_SRC_COLOR,_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SRC_IN]=[_e.DST_ALPHA,_e.ZERO],_[BLEND_MODES.SRC_OUT]=[_e.ONE_MINUS_DST_ALPHA,_e.ZERO],_[BLEND_MODES.SRC_ATOP]=[_e.DST_ALPHA,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DST_OVER]=[_e.ONE_MINUS_DST_ALPHA,_e.ONE],_[BLEND_MODES.DST_IN]=[_e.ZERO,_e.SRC_ALPHA],_[BLEND_MODES.DST_OUT]=[_e.ZERO,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DST_ATOP]=[_e.ONE_MINUS_DST_ALPHA,_e.SRC_ALPHA],_[BLEND_MODES.XOR]=[_e.ONE_MINUS_DST_ALPHA,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SUBTRACT]=[_e.ONE,_e.ONE,_e.ONE,_e.ONE,_e.FUNC_REVERSE_SUBTRACT,_e.FUNC_ADD],_}const BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,_StateSystem=class co{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State,this.defaultState.blend=!0}contextChange(_){this.gl=_,this.blendModes=mapWebGLBlendModesToPixi(_),this.set(this.defaultState),this.reset()}set(_){if(_=_||this.defaultState,this.stateId!==_.data){let et=this.stateId^_.data,tt=0;for(;et;)et&1&&this.map[tt].call(this,!!(_.data&1<<tt)),et=et>>1,tt++;this.stateId=_.data}for(let et=0;et<this.checks.length;et++)this.checks[et](this,_)}forceState(_){_=_||this.defaultState;for(let et=0;et<this.map.length;et++)this.map[et].call(this,!!(_.data&1<<et));for(let et=0;et<this.checks.length;et++)this.checks[et](this,_);this.stateId=_.data}setBlend(_){this.updateCheck(co.checkBlendMode,_),this.gl[_?"enable":"disable"](this.gl.BLEND)}setOffset(_){this.updateCheck(co.checkPolygonOffset,_),this.gl[_?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(_){this.gl[_?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(_){this.gl.depthMask(_)}setCullFace(_){this.gl[_?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(_){this.gl.frontFace(this.gl[_?"CW":"CCW"])}setBlendMode(_){if(_===this.blendMode)return;this.blendMode=_;const et=this.blendModes[_],tt=this.gl;et.length===2?tt.blendFunc(et[0],et[1]):tt.blendFuncSeparate(et[0],et[1],et[2],et[3]),et.length===6?(this._blendEq=!0,tt.blendEquationSeparate(et[4],et[5])):this._blendEq&&(this._blendEq=!1,tt.blendEquationSeparate(tt.FUNC_ADD,tt.FUNC_ADD))}setPolygonOffset(_,et){this.gl.polygonOffset(_,et)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(_,et){const tt=this.checks.indexOf(_);et&&tt===-1?this.checks.push(_):!et&&tt!==-1&&this.checks.splice(tt,1)}static checkBlendMode(_,et){_.setBlendMode(et.blendMode)}static checkPolygonOffset(_,et){_.setPolygonOffset(1,et.polygonOffset)}destroy(){this.gl=null}};_StateSystem.extension={type:ExtensionType.RendererSystem,name:"state"};let StateSystem=_StateSystem;extensions$1.add(StateSystem);class SystemManager extends EventEmitter{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(_){this.addRunners(..._.runners);const et=(_.priority??[]).filter(rt=>_.systems[rt]),tt=[...et,...Object.keys(_.systems).filter(rt=>!et.includes(rt))];for(const rt of tt)this.addSystem(_.systems[rt],rt)}addRunners(..._){_.forEach(et=>{this.runners[et]=new Runner(et)})}addSystem(_,et){const tt=new _(this);if(this[et])throw new Error(`Whoops! The name "${et}" is already in use`);this[et]=tt,this._systemsHash[et]=tt;for(const rt in this.runners)this.runners[rt].add(tt);return this}emitWithCustomOptions(_,et){const tt=Object.keys(this._systemsHash);_.items.forEach(rt=>{const nt=tt.find(ot=>this._systemsHash[ot]===rt);rt[_.name](et[nt])})}destroy(){Object.values(this.runners).forEach(_=>{_.destroy()}),this._systemsHash={}}}const _TextureGCSystem=class eo{constructor(_){this.renderer=_,this.count=0,this.checkCount=0,this.maxIdle=eo.defaultMaxIdle,this.checkCountMax=eo.defaultCheckCountMax,this.mode=eo.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const _=this.renderer.texture,et=_.managedTextures;let tt=!1;for(let rt=0;rt<et.length;rt++){const nt=et[rt];nt.resource&&this.count-nt.touched>this.maxIdle&&(_.destroyTexture(nt,!0),et[rt]=null,tt=!0)}if(tt){let rt=0;for(let nt=0;nt<et.length;nt++)et[nt]!==null&&(et[rt++]=et[nt]);et.length=rt}}unload(_){const et=this.renderer.texture,tt=_._texture;tt&&!tt.framebuffer&&et.destroyTexture(tt);for(let rt=_.children.length-1;rt>=0;rt--)this.unload(_.children[rt])}destroy(){this.renderer=null}};_TextureGCSystem.defaultMode=GC_MODES.AUTO,_TextureGCSystem.defaultMaxIdle=60*60,_TextureGCSystem.defaultCheckCountMax=60*10,_TextureGCSystem.extension={type:ExtensionType.RendererSystem,name:"textureGC"};let TextureGCSystem=_TextureGCSystem;extensions$1.add(TextureGCSystem);class GLTexture{constructor(_){this.texture=_,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES.UNSIGNED_BYTE,this.internalFormat=FORMATS.RGBA,this.samplerType=0}}function mapInternalFormatToSamplerType(_e){let _;return"WebGL2RenderingContext"in globalThis&&_e instanceof globalThis.WebGL2RenderingContext?_={[_e.RGB]:SAMPLER_TYPES.FLOAT,[_e.RGBA]:SAMPLER_TYPES.FLOAT,[_e.ALPHA]:SAMPLER_TYPES.FLOAT,[_e.LUMINANCE]:SAMPLER_TYPES.FLOAT,[_e.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[_e.R8]:SAMPLER_TYPES.FLOAT,[_e.R8_SNORM]:SAMPLER_TYPES.FLOAT,[_e.RG8]:SAMPLER_TYPES.FLOAT,[_e.RG8_SNORM]:SAMPLER_TYPES.FLOAT,[_e.RGB8]:SAMPLER_TYPES.FLOAT,[_e.RGB8_SNORM]:SAMPLER_TYPES.FLOAT,[_e.RGB565]:SAMPLER_TYPES.FLOAT,[_e.RGBA4]:SAMPLER_TYPES.FLOAT,[_e.RGB5_A1]:SAMPLER_TYPES.FLOAT,[_e.RGBA8]:SAMPLER_TYPES.FLOAT,[_e.RGBA8_SNORM]:SAMPLER_TYPES.FLOAT,[_e.RGB10_A2]:SAMPLER_TYPES.FLOAT,[_e.RGB10_A2UI]:SAMPLER_TYPES.FLOAT,[_e.SRGB8]:SAMPLER_TYPES.FLOAT,[_e.SRGB8_ALPHA8]:SAMPLER_TYPES.FLOAT,[_e.R16F]:SAMPLER_TYPES.FLOAT,[_e.RG16F]:SAMPLER_TYPES.FLOAT,[_e.RGB16F]:SAMPLER_TYPES.FLOAT,[_e.RGBA16F]:SAMPLER_TYPES.FLOAT,[_e.R32F]:SAMPLER_TYPES.FLOAT,[_e.RG32F]:SAMPLER_TYPES.FLOAT,[_e.RGB32F]:SAMPLER_TYPES.FLOAT,[_e.RGBA32F]:SAMPLER_TYPES.FLOAT,[_e.R11F_G11F_B10F]:SAMPLER_TYPES.FLOAT,[_e.RGB9_E5]:SAMPLER_TYPES.FLOAT,[_e.R8I]:SAMPLER_TYPES.INT,[_e.R8UI]:SAMPLER_TYPES.UINT,[_e.R16I]:SAMPLER_TYPES.INT,[_e.R16UI]:SAMPLER_TYPES.UINT,[_e.R32I]:SAMPLER_TYPES.INT,[_e.R32UI]:SAMPLER_TYPES.UINT,[_e.RG8I]:SAMPLER_TYPES.INT,[_e.RG8UI]:SAMPLER_TYPES.UINT,[_e.RG16I]:SAMPLER_TYPES.INT,[_e.RG16UI]:SAMPLER_TYPES.UINT,[_e.RG32I]:SAMPLER_TYPES.INT,[_e.RG32UI]:SAMPLER_TYPES.UINT,[_e.RGB8I]:SAMPLER_TYPES.INT,[_e.RGB8UI]:SAMPLER_TYPES.UINT,[_e.RGB16I]:SAMPLER_TYPES.INT,[_e.RGB16UI]:SAMPLER_TYPES.UINT,[_e.RGB32I]:SAMPLER_TYPES.INT,[_e.RGB32UI]:SAMPLER_TYPES.UINT,[_e.RGBA8I]:SAMPLER_TYPES.INT,[_e.RGBA8UI]:SAMPLER_TYPES.UINT,[_e.RGBA16I]:SAMPLER_TYPES.INT,[_e.RGBA16UI]:SAMPLER_TYPES.UINT,[_e.RGBA32I]:SAMPLER_TYPES.INT,[_e.RGBA32UI]:SAMPLER_TYPES.UINT,[_e.DEPTH_COMPONENT16]:SAMPLER_TYPES.FLOAT,[_e.DEPTH_COMPONENT24]:SAMPLER_TYPES.FLOAT,[_e.DEPTH_COMPONENT32F]:SAMPLER_TYPES.FLOAT,[_e.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT,[_e.DEPTH24_STENCIL8]:SAMPLER_TYPES.FLOAT,[_e.DEPTH32F_STENCIL8]:SAMPLER_TYPES.FLOAT}:_={[_e.RGB]:SAMPLER_TYPES.FLOAT,[_e.RGBA]:SAMPLER_TYPES.FLOAT,[_e.ALPHA]:SAMPLER_TYPES.FLOAT,[_e.LUMINANCE]:SAMPLER_TYPES.FLOAT,[_e.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[_e.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT},_}function mapTypeAndFormatToInternalFormat(_e){let _;return"WebGL2RenderingContext"in globalThis&&_e instanceof globalThis.WebGL2RenderingContext?_={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:_e.RGBA8,[FORMATS.RGB]:_e.RGB8,[FORMATS.RG]:_e.RG8,[FORMATS.RED]:_e.R8,[FORMATS.RGBA_INTEGER]:_e.RGBA8UI,[FORMATS.RGB_INTEGER]:_e.RGB8UI,[FORMATS.RG_INTEGER]:_e.RG8UI,[FORMATS.RED_INTEGER]:_e.R8UI,[FORMATS.ALPHA]:_e.ALPHA,[FORMATS.LUMINANCE]:_e.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:_e.LUMINANCE_ALPHA},[TYPES.BYTE]:{[FORMATS.RGBA]:_e.RGBA8_SNORM,[FORMATS.RGB]:_e.RGB8_SNORM,[FORMATS.RG]:_e.RG8_SNORM,[FORMATS.RED]:_e.R8_SNORM,[FORMATS.RGBA_INTEGER]:_e.RGBA8I,[FORMATS.RGB_INTEGER]:_e.RGB8I,[FORMATS.RG_INTEGER]:_e.RG8I,[FORMATS.RED_INTEGER]:_e.R8I},[TYPES.UNSIGNED_SHORT]:{[FORMATS.RGBA_INTEGER]:_e.RGBA16UI,[FORMATS.RGB_INTEGER]:_e.RGB16UI,[FORMATS.RG_INTEGER]:_e.RG16UI,[FORMATS.RED_INTEGER]:_e.R16UI,[FORMATS.DEPTH_COMPONENT]:_e.DEPTH_COMPONENT16},[TYPES.SHORT]:{[FORMATS.RGBA_INTEGER]:_e.RGBA16I,[FORMATS.RGB_INTEGER]:_e.RGB16I,[FORMATS.RG_INTEGER]:_e.RG16I,[FORMATS.RED_INTEGER]:_e.R16I},[TYPES.UNSIGNED_INT]:{[FORMATS.RGBA_INTEGER]:_e.RGBA32UI,[FORMATS.RGB_INTEGER]:_e.RGB32UI,[FORMATS.RG_INTEGER]:_e.RG32UI,[FORMATS.RED_INTEGER]:_e.R32UI,[FORMATS.DEPTH_COMPONENT]:_e.DEPTH_COMPONENT24},[TYPES.INT]:{[FORMATS.RGBA_INTEGER]:_e.RGBA32I,[FORMATS.RGB_INTEGER]:_e.RGB32I,[FORMATS.RG_INTEGER]:_e.RG32I,[FORMATS.RED_INTEGER]:_e.R32I},[TYPES.FLOAT]:{[FORMATS.RGBA]:_e.RGBA32F,[FORMATS.RGB]:_e.RGB32F,[FORMATS.RG]:_e.RG32F,[FORMATS.RED]:_e.R32F,[FORMATS.DEPTH_COMPONENT]:_e.DEPTH_COMPONENT32F},[TYPES.HALF_FLOAT]:{[FORMATS.RGBA]:_e.RGBA16F,[FORMATS.RGB]:_e.RGB16F,[FORMATS.RG]:_e.RG16F,[FORMATS.RED]:_e.R16F},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:_e.RGB565},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:_e.RGBA4},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:_e.RGB5_A1},[TYPES.UNSIGNED_INT_2_10_10_10_REV]:{[FORMATS.RGBA]:_e.RGB10_A2,[FORMATS.RGBA_INTEGER]:_e.RGB10_A2UI},[TYPES.UNSIGNED_INT_10F_11F_11F_REV]:{[FORMATS.RGB]:_e.R11F_G11F_B10F},[TYPES.UNSIGNED_INT_5_9_9_9_REV]:{[FORMATS.RGB]:_e.RGB9_E5},[TYPES.UNSIGNED_INT_24_8]:{[FORMATS.DEPTH_STENCIL]:_e.DEPTH24_STENCIL8},[TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[FORMATS.DEPTH_STENCIL]:_e.DEPTH32F_STENCIL8}}:_={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:_e.RGBA,[FORMATS.RGB]:_e.RGB,[FORMATS.ALPHA]:_e.ALPHA,[FORMATS.LUMINANCE]:_e.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:_e.LUMINANCE_ALPHA},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:_e.RGB},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:_e.RGBA},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:_e.RGBA}},_}class TextureSystem{constructor(_){this.renderer=_,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}contextChange(){const _=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(_),this.samplerTypes=mapInternalFormatToSamplerType(_);const et=_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=et;for(let rt=0;rt<et;rt++)this.boundTextures[rt]=null;this.emptyTextures={};const tt=new GLTexture(_.createTexture());_.bindTexture(_.TEXTURE_2D,tt.texture),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[_.TEXTURE_2D]=tt,this.emptyTextures[_.TEXTURE_CUBE_MAP]=new GLTexture(_.createTexture()),_.bindTexture(_.TEXTURE_CUBE_MAP,this.emptyTextures[_.TEXTURE_CUBE_MAP].texture);for(let rt=0;rt<6;rt++)_.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,null);_.texParameteri(_.TEXTURE_CUBE_MAP,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_CUBE_MAP,_.TEXTURE_MIN_FILTER,_.LINEAR);for(let rt=0;rt<this.boundTextures.length;rt++)this.bind(null,rt)}bind(_,et=0){const{gl:tt}=this;if(_=_==null?void 0:_.castToBaseTexture(),(_==null?void 0:_.valid)&&!_.parentTextureArray){_.touched=this.renderer.textureGC.count;const rt=_._glTextures[this.CONTEXT_UID]||this.initTexture(_);this.boundTextures[et]!==_&&(this.currentLocation!==et&&(this.currentLocation=et,tt.activeTexture(tt.TEXTURE0+et)),tt.bindTexture(_.target,rt.texture)),rt.dirtyId!==_.dirtyId?(this.currentLocation!==et&&(this.currentLocation=et,tt.activeTexture(tt.TEXTURE0+et)),this.updateTexture(_)):rt.dirtyStyleId!==_.dirtyStyleId&&this.updateTextureStyle(_),this.boundTextures[et]=_}else this.currentLocation!==et&&(this.currentLocation=et,tt.activeTexture(tt.TEXTURE0+et)),tt.bindTexture(tt.TEXTURE_2D,this.emptyTextures[tt.TEXTURE_2D].texture),this.boundTextures[et]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let _=0;_<this.boundTextures.length;_++)this.boundTextures[_]=this.unknownTexture}unbind(_){const{gl:et,boundTextures:tt}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let rt=0;rt<tt.length;rt++)tt[rt]===this.unknownTexture&&this.bind(null,rt)}for(let rt=0;rt<tt.length;rt++)tt[rt]===_&&(this.currentLocation!==rt&&(et.activeTexture(et.TEXTURE0+rt),this.currentLocation=rt),et.bindTexture(_.target,this.emptyTextures[_.target].texture),tt[rt]=null)}ensureSamplerType(_){const{boundTextures:et,hasIntegerTextures:tt,CONTEXT_UID:rt}=this;if(tt)for(let nt=_-1;nt>=0;--nt){const ot=et[nt];ot&&ot._glTextures[rt].samplerType!==SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(ot)}}initTexture(_){const et=new GLTexture(this.gl.createTexture());return et.dirtyId=-1,_._glTextures[this.CONTEXT_UID]=et,this.managedTextures.push(_),_.on("dispose",this.destroyTexture,this),et}initTextureType(_,et){var tt;et.internalFormat=((tt=this.internalFormats[_.type])==null?void 0:tt[_.format])??_.format,et.samplerType=this.samplerTypes[et.internalFormat]??SAMPLER_TYPES.FLOAT,this.webGLVersion===2&&_.type===TYPES.HALF_FLOAT?et.type=this.gl.HALF_FLOAT:et.type=_.type}updateTexture(_){var rt;const et=_._glTextures[this.CONTEXT_UID];if(!et)return;const tt=this.renderer;if(this.initTextureType(_,et),(rt=_.resource)==null?void 0:rt.upload(tt,_,et))et.samplerType!==SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{const nt=_.realWidth,ot=_.realHeight,at=tt.gl;(et.width!==nt||et.height!==ot||et.dirtyId<0)&&(et.width=nt,et.height=ot,at.texImage2D(_.target,0,et.internalFormat,nt,ot,0,_.format,et.type,null))}_.dirtyStyleId!==et.dirtyStyleId&&this.updateTextureStyle(_),et.dirtyId=_.dirtyId}destroyTexture(_,et){const{gl:tt}=this;if(_=_.castToBaseTexture(),_._glTextures[this.CONTEXT_UID]&&(this.unbind(_),tt.deleteTexture(_._glTextures[this.CONTEXT_UID].texture),_.off("dispose",this.destroyTexture,this),delete _._glTextures[this.CONTEXT_UID],!et)){const rt=this.managedTextures.indexOf(_);rt!==-1&&removeItems(this.managedTextures,rt,1)}}updateTextureStyle(_){var tt;const et=_._glTextures[this.CONTEXT_UID];et&&((_.mipmap===MIPMAP_MODES.POW2||this.webGLVersion!==2)&&!_.isPowerOfTwo?et.mipmap=!1:et.mipmap=_.mipmap>=1,this.webGLVersion!==2&&!_.isPowerOfTwo?et.wrapMode=WRAP_MODES.CLAMP:et.wrapMode=_.wrapMode,(tt=_.resource)!=null&&tt.style(this.renderer,_,et)||this.setStyle(_,et),et.dirtyStyleId=_.dirtyStyleId)}setStyle(_,et){const tt=this.gl;if(et.mipmap&&_.mipmap!==MIPMAP_MODES.ON_MANUAL&&tt.generateMipmap(_.target),tt.texParameteri(_.target,tt.TEXTURE_WRAP_S,et.wrapMode),tt.texParameteri(_.target,tt.TEXTURE_WRAP_T,et.wrapMode),et.mipmap){tt.texParameteri(_.target,tt.TEXTURE_MIN_FILTER,_.scaleMode===SCALE_MODES.LINEAR?tt.LINEAR_MIPMAP_LINEAR:tt.NEAREST_MIPMAP_NEAREST);const rt=this.renderer.context.extensions.anisotropicFiltering;if(rt&&_.anisotropicLevel>0&&_.scaleMode===SCALE_MODES.LINEAR){const nt=Math.min(_.anisotropicLevel,tt.getParameter(rt.MAX_TEXTURE_MAX_ANISOTROPY_EXT));tt.texParameterf(_.target,rt.TEXTURE_MAX_ANISOTROPY_EXT,nt)}}else tt.texParameteri(_.target,tt.TEXTURE_MIN_FILTER,_.scaleMode===SCALE_MODES.LINEAR?tt.LINEAR:tt.NEAREST);tt.texParameteri(_.target,tt.TEXTURE_MAG_FILTER,_.scaleMode===SCALE_MODES.LINEAR?tt.LINEAR:tt.NEAREST)}destroy(){this.renderer=null}}TextureSystem.extension={type:ExtensionType.RendererSystem,name:"texture"};extensions$1.add(TextureSystem);class TransformFeedbackSystem{constructor(_){this.renderer=_}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(_){const{gl:et,CONTEXT_UID:tt}=this,rt=_._glTransformFeedbacks[tt]||this.createGLTransformFeedback(_);et.bindTransformFeedback(et.TRANSFORM_FEEDBACK,rt)}unbind(){const{gl:_}=this;_.bindTransformFeedback(_.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(_,et){const{gl:tt,renderer:rt}=this;et&&rt.shader.bind(et),tt.beginTransformFeedback(_)}endTransformFeedback(){const{gl:_}=this;_.endTransformFeedback()}createGLTransformFeedback(_){const{gl:et,renderer:tt,CONTEXT_UID:rt}=this,nt=et.createTransformFeedback();_._glTransformFeedbacks[rt]=nt,et.bindTransformFeedback(et.TRANSFORM_FEEDBACK,nt);for(let ot=0;ot<_.buffers.length;ot++){const at=_.buffers[ot];at&&(tt.buffer.update(at),at._glBuffers[rt].refCount++,et.bindBufferBase(et.TRANSFORM_FEEDBACK_BUFFER,ot,at._glBuffers[rt].buffer||null))}return et.bindTransformFeedback(et.TRANSFORM_FEEDBACK,null),_.disposeRunner.add(this),nt}disposeTransformFeedback(_,et){const tt=_._glTransformFeedbacks[this.CONTEXT_UID],rt=this.gl;_.disposeRunner.remove(this);const nt=this.renderer.buffer;if(nt)for(let ot=0;ot<_.buffers.length;ot++){const at=_.buffers[ot];if(!at)continue;const lt=at._glBuffers[this.CONTEXT_UID];lt&&(lt.refCount--,lt.refCount===0&&!et&&nt.dispose(at,et))}tt&&(et||rt.deleteTransformFeedback(tt),delete _._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}TransformFeedbackSystem.extension={type:ExtensionType.RendererSystem,name:"transformFeedback"};extensions$1.add(TransformFeedbackSystem);class ViewSystem{constructor(_){this.renderer=_}init(_){this.screen=new Rectangle(0,0,_.width,_.height),this.element=_.view||settings.ADAPTER.createCanvas(),this.resolution=_.resolution||settings.RESOLUTION,this.autoDensity=!!_.autoDensity}resizeView(_,et){this.element.width=Math.round(_*this.resolution),this.element.height=Math.round(et*this.resolution);const tt=this.element.width/this.resolution,rt=this.element.height/this.resolution;this.screen.width=tt,this.screen.height=rt,this.autoDensity&&(this.element.style.width=`${tt}px`,this.element.style.height=`${rt}px`),this.renderer.emit("resize",tt,rt),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(_){var et;_&&((et=this.element.parentNode)==null||et.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}ViewSystem.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},ViewSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_view"};extensions$1.add(ViewSystem);settings.PREFER_ENV=ENV.WEBGL2;settings.STRICT_TEXTURE_CACHE=!1;settings.RENDER_OPTIONS={...ContextSystem.defaultOptions,...BackgroundSystem.defaultOptions,...ViewSystem.defaultOptions,...StartupSystem.defaultOptions};Object.defineProperties(settings,{WRAP_MODE:{get(){return BaseTexture.defaultOptions.wrapMode},set(_e){deprecation("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),BaseTexture.defaultOptions.wrapMode=_e}},SCALE_MODE:{get(){return BaseTexture.defaultOptions.scaleMode},set(_e){deprecation("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),BaseTexture.defaultOptions.scaleMode=_e}},MIPMAP_TEXTURES:{get(){return BaseTexture.defaultOptions.mipmap},set(_e){deprecation("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),BaseTexture.defaultOptions.mipmap=_e}},ANISOTROPIC_LEVEL:{get(){return BaseTexture.defaultOptions.anisotropicLevel},set(_e){deprecation("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),BaseTexture.defaultOptions.anisotropicLevel=_e}},FILTER_RESOLUTION:{get(){return deprecation("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Filter.defaultResolution},set(_e){Filter.defaultResolution=_e}},FILTER_MULTISAMPLE:{get(){return deprecation("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Filter.defaultMultisample},set(_e){Filter.defaultMultisample=_e}},SPRITE_MAX_TEXTURES:{get(){return BatchRenderer.defaultMaxTextures},set(_e){deprecation("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),BatchRenderer.defaultMaxTextures=_e}},SPRITE_BATCH_SIZE:{get(){return BatchRenderer.defaultBatchSize},set(_e){deprecation("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),BatchRenderer.defaultBatchSize=_e}},CAN_UPLOAD_SAME_BUFFER:{get(){return BatchRenderer.canUploadSameBuffer},set(_e){deprecation("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),BatchRenderer.canUploadSameBuffer=_e}},GC_MODE:{get(){return TextureGCSystem.defaultMode},set(_e){deprecation("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),TextureGCSystem.defaultMode=_e}},GC_MAX_IDLE:{get(){return TextureGCSystem.defaultMaxIdle},set(_e){deprecation("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),TextureGCSystem.defaultMaxIdle=_e}},GC_MAX_CHECK_COUNT:{get(){return TextureGCSystem.defaultCheckCountMax},set(_e){deprecation("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),TextureGCSystem.defaultCheckCountMax=_e}},PRECISION_VERTEX:{get(){return Program.defaultVertexPrecision},set(_e){deprecation("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Program.defaultVertexPrecision=_e}},PRECISION_FRAGMENT:{get(){return Program.defaultFragmentPrecision},set(_e){deprecation("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Program.defaultFragmentPrecision=_e}}});var UPDATE_PRIORITY=(_e=>(_e[_e.INTERACTION=50]="INTERACTION",_e[_e.HIGH=25]="HIGH",_e[_e.NORMAL=0]="NORMAL",_e[_e.LOW=-25]="LOW",_e[_e.UTILITY=-50]="UTILITY",_e))(UPDATE_PRIORITY||{});class TickerListener{constructor(_,et=null,tt=0,rt=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=_,this.context=et,this.priority=tt,this.once=rt}match(_,et=null){return this.fn===_&&this.context===et}emit(_){this.fn&&(this.context?this.fn.call(this.context,_):this.fn(_));const et=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),et}connect(_){this.previous=_,_.next&&(_.next.previous=this),this.next=_.next,_.next=this}destroy(_=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const et=this.next;return this.next=_?null:et,this.previous=null,et}}const _Ticker=class Kr{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/Kr.targetFPMS,this.elapsedMS=1/Kr.targetFPMS,this._tick=_=>{this._requestId=null,this.started&&(this.update(_),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(_,et,tt=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(_,et,tt))}addOnce(_,et,tt=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(_,et,tt,!0))}_addListener(_){let et=this._head.next,tt=this._head;if(!et)_.connect(tt);else{for(;et;){if(_.priority>et.priority){_.connect(tt);break}tt=et,et=et.next}_.previous||_.connect(tt)}return this._startIfPossible(),this}remove(_,et){let tt=this._head.next;for(;tt;)tt.match(_,et)?tt=tt.destroy():tt=tt.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let _=0,et=this._head;for(;et=et.next;)_++;return _}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let _=this._head.next;for(;_;)_=_.destroy(!0);this._head.destroy(),this._head=null}}update(_=performance.now()){let et;if(_>this.lastTime){if(et=this.elapsedMS=_-this.lastTime,et>this._maxElapsedMS&&(et=this._maxElapsedMS),et*=this.speed,this._minElapsedMS){const nt=_-this._lastFrame|0;if(nt<this._minElapsedMS)return;this._lastFrame=_-nt%this._minElapsedMS}this.deltaMS=et,this.deltaTime=this.deltaMS*Kr.targetFPMS;const tt=this._head;let rt=tt.next;for(;rt;)rt=rt.emit(this.deltaTime);tt.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=_}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(_){const et=Math.min(this.maxFPS,_),tt=Math.min(Math.max(0,et)/1e3,Kr.targetFPMS);this._maxElapsedMS=1/tt}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(_){if(_===0)this._minElapsedMS=0;else{const et=Math.max(this.minFPS,_);this._minElapsedMS=1/(et/1e3)}}static get shared(){if(!Kr._shared){const _=Kr._shared=new Kr;_.autoStart=!0,_._protected=!0}return Kr._shared}static get system(){if(!Kr._system){const _=Kr._system=new Kr;_.autoStart=!0,_._protected=!0}return Kr._system}};_Ticker.targetFPMS=.06;let Ticker=_Ticker;Object.defineProperties(settings,{TARGET_FPMS:{get(){return Ticker.targetFPMS},set(_e){deprecation("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ticker.targetFPMS=_e}}});class TickerPlugin{static init(_){_=Object.assign({autoStart:!0,sharedTicker:!1},_),Object.defineProperty(this,"ticker",{set(et){this._ticker&&this._ticker.remove(this.render,this),this._ticker=et,et&&et.add(this.render,this,UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=_.sharedTicker?Ticker.shared:new Ticker,_.autoStart&&this.start()}static destroy(){if(this._ticker){const _=this._ticker;this.ticker=null,_.destroy()}}}TickerPlugin.extension=ExtensionType.Application;extensions$1.add(TickerPlugin);const renderers=[];extensions$1.handleByList(ExtensionType.Renderer,renderers);function autoDetectRenderer(_e){for(const _ of renderers)if(_.test(_e))return new _(_e);throw new Error("Unable to auto-detect a suitable renderer.")}var $defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const defaultVertex=$defaultVertex,defaultFilterVertex=$defaultFilterVertex;class MultisampleSystem{constructor(_){this.renderer=_}contextChange(_){let et;if(this.renderer.context.webGLVersion===1){const tt=_.getParameter(_.FRAMEBUFFER_BINDING);_.bindFramebuffer(_.FRAMEBUFFER,null),et=_.getParameter(_.SAMPLES),_.bindFramebuffer(_.FRAMEBUFFER,tt)}else{const tt=_.getParameter(_.DRAW_FRAMEBUFFER_BINDING);_.bindFramebuffer(_.DRAW_FRAMEBUFFER,null),et=_.getParameter(_.SAMPLES),_.bindFramebuffer(_.DRAW_FRAMEBUFFER,tt)}et>=MSAA_QUALITY.HIGH?this.multisample=MSAA_QUALITY.HIGH:et>=MSAA_QUALITY.MEDIUM?this.multisample=MSAA_QUALITY.MEDIUM:et>=MSAA_QUALITY.LOW?this.multisample=MSAA_QUALITY.LOW:this.multisample=MSAA_QUALITY.NONE}destroy(){}}MultisampleSystem.extension={type:ExtensionType.RendererSystem,name:"_multisample"};extensions$1.add(MultisampleSystem);class GLBuffer{constructor(_){this.buffer=_||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class BufferSystem{constructor(_){this.renderer=_,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(_){const{gl:et,CONTEXT_UID:tt}=this,rt=_._glBuffers[tt]||this.createGLBuffer(_);et.bindBuffer(_.type,rt.buffer)}unbind(_){const{gl:et}=this;et.bindBuffer(_,null)}bindBufferBase(_,et){const{gl:tt,CONTEXT_UID:rt}=this;if(this.boundBufferBases[et]!==_){const nt=_._glBuffers[rt]||this.createGLBuffer(_);this.boundBufferBases[et]=_,tt.bindBufferBase(tt.UNIFORM_BUFFER,et,nt.buffer)}}bindBufferRange(_,et,tt){const{gl:rt,CONTEXT_UID:nt}=this;tt=tt||0;const ot=_._glBuffers[nt]||this.createGLBuffer(_);rt.bindBufferRange(rt.UNIFORM_BUFFER,et||0,ot.buffer,tt*256,256)}update(_){const{gl:et,CONTEXT_UID:tt}=this,rt=_._glBuffers[tt]||this.createGLBuffer(_);if(_._updateID!==rt.updateID)if(rt.updateID=_._updateID,et.bindBuffer(_.type,rt.buffer),rt.byteLength>=_.data.byteLength)et.bufferSubData(_.type,0,_.data);else{const nt=_.static?et.STATIC_DRAW:et.DYNAMIC_DRAW;rt.byteLength=_.data.byteLength,et.bufferData(_.type,_.data,nt)}}dispose(_,et){if(!this.managedBuffers[_.id])return;delete this.managedBuffers[_.id];const tt=_._glBuffers[this.CONTEXT_UID],rt=this.gl;_.disposeRunner.remove(this),tt&&(et||rt.deleteBuffer(tt.buffer),delete _._glBuffers[this.CONTEXT_UID])}disposeAll(_){const et=Object.keys(this.managedBuffers);for(let tt=0;tt<et.length;tt++)this.dispose(this.managedBuffers[et[tt]],_)}createGLBuffer(_){const{CONTEXT_UID:et,gl:tt}=this;return _._glBuffers[et]=new GLBuffer(tt.createBuffer()),this.managedBuffers[_.id]=_,_.disposeRunner.add(this),_._glBuffers[et]}}BufferSystem.extension={type:ExtensionType.RendererSystem,name:"buffer"};extensions$1.add(BufferSystem);class ObjectRendererSystem{constructor(_){this.renderer=_}render(_,et){const tt=this.renderer;let rt,nt,ot,at;if(et&&(rt=et.renderTexture,nt=et.clear,ot=et.transform,at=et.skipUpdateTransform),this.renderingToScreen=!rt,tt.runners.prerender.emit(),tt.emit("prerender"),tt.projection.transform=ot,!tt.context.isLost){if(rt||(this.lastObjectRendered=_),!at){const lt=_.enableTempParent();_.updateTransform(),_.disableTempParent(lt)}tt.renderTexture.bind(rt),tt.batch.currentRenderer.start(),(nt??tt.background.clearBeforeRender)&&tt.renderTexture.clear(),_.render(tt),tt.batch.currentRenderer.flush(),rt&&(et.blit&&tt.framebuffer.blit(),rt.baseTexture.update()),tt.runners.postrender.emit(),tt.projection.transform=null,tt.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ObjectRendererSystem.extension={type:ExtensionType.RendererSystem,name:"objectRenderer"};extensions$1.add(ObjectRendererSystem);const _Renderer=class ho extends SystemManager{constructor(_){super(),this.type=RENDERER_TYPE.WEBGL,_=Object.assign({},settings.RENDER_OPTIONS,_),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0);const et={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:ho.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(et),"useContextAlpha"in _&&(deprecation("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),_.premultipliedAlpha=_.useContextAlpha&&_.useContextAlpha!=="notMultiplied",_.backgroundAlpha=_.useContextAlpha===!1?1:_.backgroundAlpha),this._plugin.rendererPlugins=ho.__plugins,this.options=_,this.startup.run(this.options)}static test(_){return _!=null&&_.forceCanvas?!1:isWebGLSupported()}render(_,et){this.objectRenderer.render(_,et)}resize(_,et){this._view.resizeView(_,et)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(_=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:_}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(_){this._view.resolution=_,this.runners.resolutionChange.emit(_)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return deprecation("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return deprecation("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return deprecation("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(_){deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=_}get backgroundAlpha(){return deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(_){deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=_}get powerPreference(){return deprecation("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(_,et){return this.textureGenerator.generateTexture(_,et)}};_Renderer.extension={type:ExtensionType.Renderer,priority:1},_Renderer.__plugins={},_Renderer.__systems={};let Renderer=_Renderer;extensions$1.handleByMap(ExtensionType.RendererPlugin,Renderer.__plugins);extensions$1.handleByMap(ExtensionType.RendererSystem,Renderer.__systems);extensions$1.add(Renderer);class AbstractMultiResource extends Resource{constructor(_,et){const{width:tt,height:rt}=et||{};super(tt,rt),this.items=[],this.itemDirtyIds=[];for(let nt=0;nt<_;nt++){const ot=new BaseTexture;this.items.push(ot),this.itemDirtyIds.push(-2)}this.length=_,this._load=null,this.baseTexture=null}initFromArray(_,et){for(let tt=0;tt<this.length;tt++)_[tt]&&(_[tt].castToBaseTexture?this.addBaseTextureAt(_[tt].castToBaseTexture(),tt):_[tt]instanceof Resource?this.addResourceAt(_[tt],tt):this.addResourceAt(autoDetectResource(_[tt],et),tt))}dispose(){for(let _=0,et=this.length;_<et;_++)this.items[_].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(_,et){if(!this.items[et])throw new Error(`Index ${et} is out of bounds`);return _.valid&&!this.valid&&this.resize(_.width,_.height),this.items[et].setResource(_),this}bind(_){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(_);for(let et=0;et<this.length;et++)this.items[et].parentTextureArray=_,this.items[et].on("update",_.update,_)}unbind(_){super.unbind(_);for(let et=0;et<this.length;et++)this.items[et].parentTextureArray=null,this.items[et].off("update",_.update,_)}load(){if(this._load)return this._load;const _=this.items.map(et=>et.resource).filter(et=>et).map(et=>et.load());return this._load=Promise.all(_).then(()=>{const{realWidth:et,realHeight:tt}=this.items[0];return this.resize(et,tt),this.update(),Promise.resolve(this)}),this._load}}class ArrayResource extends AbstractMultiResource{constructor(_,et){const{width:tt,height:rt}=et||{};let nt,ot;Array.isArray(_)?(nt=_,ot=_.length):ot=_,super(ot,{width:tt,height:rt}),nt&&this.initFromArray(nt,et)}addBaseTextureAt(_,et){if(_.resource)this.addResourceAt(_.resource,et);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(_){super.bind(_),_.target=TARGETS.TEXTURE_2D_ARRAY}upload(_,et,tt){const{length:rt,itemDirtyIds:nt,items:ot}=this,{gl:at}=_;tt.dirtyId<0&&at.texImage3D(at.TEXTURE_2D_ARRAY,0,tt.internalFormat,this._width,this._height,rt,0,et.format,tt.type,null);for(let lt=0;lt<rt;lt++){const ct=ot[lt];nt[lt]<ct.dirtyId&&(nt[lt]=ct.dirtyId,ct.valid&&at.texSubImage3D(at.TEXTURE_2D_ARRAY,0,0,0,lt,ct.resource.width,ct.resource.height,1,et.format,tt.type,ct.resource.source))}return!0}}class CanvasResource extends BaseImageResource{constructor(_){super(_)}static test(_){const{OffscreenCanvas:et}=globalThis;return et&&_ instanceof et?!0:globalThis.HTMLCanvasElement&&_ instanceof HTMLCanvasElement}}const _CubeResource=class Vn extends AbstractMultiResource{constructor(_,et){const{width:tt,height:rt,autoLoad:nt,linkBaseTexture:ot}=et||{};if(_&&_.length!==Vn.SIDES)throw new Error(`Invalid length. Got ${_.length}, expected 6`);super(6,{width:tt,height:rt});for(let at=0;at<Vn.SIDES;at++)this.items[at].target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+at;this.linkBaseTexture=ot!==!1,_&&this.initFromArray(_,et),nt!==!1&&this.load()}bind(_){super.bind(_),_.target=TARGETS.TEXTURE_CUBE_MAP}addBaseTextureAt(_,et,tt){if(tt===void 0&&(tt=this.linkBaseTexture),!this.items[et])throw new Error(`Index ${et} is out of bounds`);if(!this.linkBaseTexture||_.parentTextureArray||Object.keys(_._glTextures).length>0)if(_.resource)this.addResourceAt(_.resource,et);else throw new Error("CubeResource does not support copying of renderTexture.");else _.target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+et,_.parentTextureArray=this.baseTexture,this.items[et]=_;return _.valid&&!this.valid&&this.resize(_.realWidth,_.realHeight),this.items[et]=_,this}upload(_,et,tt){const rt=this.itemDirtyIds;for(let nt=0;nt<Vn.SIDES;nt++){const ot=this.items[nt];(rt[nt]<ot.dirtyId||tt.dirtyId<et.dirtyId)&&(ot.valid&&ot.resource?(ot.resource.upload(_,ot,tt),rt[nt]=ot.dirtyId):rt[nt]<-1&&(_.gl.texImage2D(ot.target,0,tt.internalFormat,et.realWidth,et.realHeight,0,et.format,tt.type,null),rt[nt]=-1))}return!0}static test(_){return Array.isArray(_)&&_.length===Vn.SIDES}};_CubeResource.SIDES=6;let CubeResource=_CubeResource;class ImageBitmapResource extends BaseImageResource{constructor(_,et){et=et||{};let tt,rt,nt;typeof _=="string"?(tt=ImageBitmapResource.EMPTY,rt=_,nt=!0):(tt=_,rt=null,nt=!1),super(tt),this.url=rt,this.crossOrigin=et.crossOrigin??!0,this.alphaMode=typeof et.alphaMode=="number"?et.alphaMode:null,this.ownsImageBitmap=et.ownsImageBitmap??nt,this._load=null,et.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(_,et)=>{if(this.url===null){_(this);return}try{const tt=await settings.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const rt=await tt.blob();if(this.destroyed)return;const nt=await createImageBitmap(rt,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"});if(this.destroyed){nt.close();return}this.source=nt,this.update(),_(this)}catch(tt){if(this.destroyed)return;et(tt),this.onError.emit(tt)}}),this._load)}upload(_,et,tt){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(et.alphaMode=this.alphaMode),super.upload(_,et,tt)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(_){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof _=="string"||_ instanceof ImageBitmap)}static get EMPTY(){return ImageBitmapResource._EMPTY=ImageBitmapResource._EMPTY??settings.ADAPTER.createCanvas(0,0),ImageBitmapResource._EMPTY}}const _SVGResource=class to extends BaseImageResource{constructor(_,et){et=et||{},super(settings.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=_,this.scale=et.scale||1,this._overrideWidth=et.width,this._overrideHeight=et.height,this._resolve=null,this._crossorigin=et.crossorigin,this._load=null,et.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(_=>{if(this._resolve=()=>{this.update(),_(this)},to.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const _=new Image;BaseImageResource.crossOrigin(_,this.svg,this._crossorigin),_.src=this.svg,_.onerror=et=>{this._resolve&&(_.onerror=null,this.onError.emit(et))},_.onload=()=>{if(!this._resolve)return;const et=_.width,tt=_.height;if(!et||!tt)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let rt=et*this.scale,nt=tt*this.scale;(this._overrideWidth||this._overrideHeight)&&(rt=this._overrideWidth||this._overrideHeight/tt*et,nt=this._overrideHeight||this._overrideWidth/et*tt),rt=Math.round(rt),nt=Math.round(nt);const ot=this.source;ot.width=rt,ot.height=nt,ot._pixiId=`canvas_${uid()}`,ot.getContext("2d").drawImage(_,0,0,et,tt,0,0,rt,nt),this._resolve(),this._resolve=null}}static getSize(_){const et=to.SVG_SIZE.exec(_),tt={};return et&&(tt[et[1]]=Math.round(parseFloat(et[3])),tt[et[5]]=Math.round(parseFloat(et[7]))),tt}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(_,et){return et==="svg"||typeof _=="string"&&_.startsWith("data:image/svg+xml")||typeof _=="string"&&to.SVG_XML.test(_)}};_SVGResource.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,_SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let SVGResource=_SVGResource;class VideoFrameResource extends BaseImageResource{constructor(_){super(_)}static test(_){return!!globalThis.VideoFrame&&_ instanceof globalThis.VideoFrame}}const _VideoResource=class po extends BaseImageResource{constructor(_,et){if(et=et||{},!(_ instanceof HTMLVideoElement)){const tt=document.createElement("video");et.autoLoad!==!1&&tt.setAttribute("preload","auto"),et.playsinline!==!1&&(tt.setAttribute("webkit-playsinline",""),tt.setAttribute("playsinline","")),et.muted===!0&&(tt.setAttribute("muted",""),tt.muted=!0),et.loop===!0&&tt.setAttribute("loop",""),et.autoPlay!==!1&&tt.setAttribute("autoplay",""),typeof _=="string"&&(_=[_]);const rt=_[0].src||_[0];BaseImageResource.crossOrigin(tt,rt,et.crossorigin);for(let nt=0;nt<_.length;++nt){const ot=document.createElement("source");let{src:at,mime:lt}=_[nt];if(at=at||_[nt],at.startsWith("data:"))lt=at.slice(5,at.indexOf(";"));else if(!at.startsWith("blob:")){const ct=at.split("?").shift().toLowerCase(),dt=ct.slice(ct.lastIndexOf(".")+1);lt=lt||po.MIME_TYPES[dt]||`video/${dt}`}ot.src=at,lt&&(ot.type=lt),tt.appendChild(ot)}_=tt}super(_),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=et.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=et.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),et.autoLoad!==!1&&this.load()}update(_=0){if(!this.destroyed){if(this._updateFPS){const et=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-et)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const _=this.source;return(_.readyState===_.HAVE_ENOUGH_DATA||_.readyState===_.HAVE_FUTURE_DATA)&&_.width&&_.height&&(_.complete=!0),_.addEventListener("play",this._onPlayStart),_.addEventListener("pause",this._onPlayStop),_.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(_.addEventListener("canplay",this._onCanPlay),_.addEventListener("canplaythrough",this._onCanPlay),_.addEventListener("error",this._onError,!0)),this._load=new Promise((et,tt)=>{this.valid?et(this):(this._resolve=et,this._reject=tt,_.load())}),this._load}_onError(_){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(_),this._reject&&(this._reject(_),this._reject=null,this._resolve=null)}_isSourcePlaying(){const _=this.source;return!_.paused&&!_.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const _=this.source;_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlay);const et=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!et&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&_.play()}dispose(){this._configureAutoUpdate();const _=this.source;_&&(_.removeEventListener("play",this._onPlayStart),_.removeEventListener("pause",this._onPlayStop),_.removeEventListener("seeked",this._onSeeked),_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlay),_.removeEventListener("error",this._onError,!0),_.pause(),_.src="",_.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(_){_!==this._autoUpdate&&(this._autoUpdate=_,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(_){_!==this._updateFPS&&(this._updateFPS=_,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(_,et){return globalThis.HTMLVideoElement&&_ instanceof HTMLVideoElement||po.TYPES.includes(et)}};_VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],_VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let VideoResource=_VideoResource;INSTALLED.push(ImageBitmapResource,ImageResource,CanvasResource,VideoResource,VideoFrameResource,SVGResource,BufferResource,CubeResource,ArrayResource);class Bounds{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(_){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(_=_||new Rectangle(0,0,1,1),_.x=this.minX,_.y=this.minY,_.width=this.maxX-this.minX,_.height=this.maxY-this.minY,_)}addPoint(_){this.minX=Math.min(this.minX,_.x),this.maxX=Math.max(this.maxX,_.x),this.minY=Math.min(this.minY,_.y),this.maxY=Math.max(this.maxY,_.y)}addPointMatrix(_,et){const{a:tt,b:rt,c:nt,d:ot,tx:at,ty:lt}=_,ct=tt*et.x+nt*et.y+at,dt=rt*et.x+ot*et.y+lt;this.minX=Math.min(this.minX,ct),this.maxX=Math.max(this.maxX,ct),this.minY=Math.min(this.minY,dt),this.maxY=Math.max(this.maxY,dt)}addQuad(_){let et=this.minX,tt=this.minY,rt=this.maxX,nt=this.maxY,ot=_[0],at=_[1];et=ot<et?ot:et,tt=at<tt?at:tt,rt=ot>rt?ot:rt,nt=at>nt?at:nt,ot=_[2],at=_[3],et=ot<et?ot:et,tt=at<tt?at:tt,rt=ot>rt?ot:rt,nt=at>nt?at:nt,ot=_[4],at=_[5],et=ot<et?ot:et,tt=at<tt?at:tt,rt=ot>rt?ot:rt,nt=at>nt?at:nt,ot=_[6],at=_[7],et=ot<et?ot:et,tt=at<tt?at:tt,rt=ot>rt?ot:rt,nt=at>nt?at:nt,this.minX=et,this.minY=tt,this.maxX=rt,this.maxY=nt}addFrame(_,et,tt,rt,nt){this.addFrameMatrix(_.worldTransform,et,tt,rt,nt)}addFrameMatrix(_,et,tt,rt,nt){const ot=_.a,at=_.b,lt=_.c,ct=_.d,dt=_.tx,st=_.ty;let it=this.minX,ut=this.minY,ht=this.maxX,ft=this.maxY,gt=ot*et+lt*tt+dt,mt=at*et+ct*tt+st;it=gt<it?gt:it,ut=mt<ut?mt:ut,ht=gt>ht?gt:ht,ft=mt>ft?mt:ft,gt=ot*rt+lt*tt+dt,mt=at*rt+ct*tt+st,it=gt<it?gt:it,ut=mt<ut?mt:ut,ht=gt>ht?gt:ht,ft=mt>ft?mt:ft,gt=ot*et+lt*nt+dt,mt=at*et+ct*nt+st,it=gt<it?gt:it,ut=mt<ut?mt:ut,ht=gt>ht?gt:ht,ft=mt>ft?mt:ft,gt=ot*rt+lt*nt+dt,mt=at*rt+ct*nt+st,it=gt<it?gt:it,ut=mt<ut?mt:ut,ht=gt>ht?gt:ht,ft=mt>ft?mt:ft,this.minX=it,this.minY=ut,this.maxX=ht,this.maxY=ft}addVertexData(_,et,tt){let rt=this.minX,nt=this.minY,ot=this.maxX,at=this.maxY;for(let lt=et;lt<tt;lt+=2){const ct=_[lt],dt=_[lt+1];rt=ct<rt?ct:rt,nt=dt<nt?dt:nt,ot=ct>ot?ct:ot,at=dt>at?dt:at}this.minX=rt,this.minY=nt,this.maxX=ot,this.maxY=at}addVertices(_,et,tt,rt){this.addVerticesMatrix(_.worldTransform,et,tt,rt)}addVerticesMatrix(_,et,tt,rt,nt=0,ot=nt){const at=_.a,lt=_.b,ct=_.c,dt=_.d,st=_.tx,it=_.ty;let ut=this.minX,ht=this.minY,ft=this.maxX,gt=this.maxY;for(let mt=tt;mt<rt;mt+=2){const yt=et[mt],bt=et[mt+1],vt=at*yt+ct*bt+st,xt=dt*bt+lt*yt+it;ut=Math.min(ut,vt-nt),ft=Math.max(ft,vt+nt),ht=Math.min(ht,xt-ot),gt=Math.max(gt,xt+ot)}this.minX=ut,this.minY=ht,this.maxX=ft,this.maxY=gt}addBounds(_){const et=this.minX,tt=this.minY,rt=this.maxX,nt=this.maxY;this.minX=_.minX<et?_.minX:et,this.minY=_.minY<tt?_.minY:tt,this.maxX=_.maxX>rt?_.maxX:rt,this.maxY=_.maxY>nt?_.maxY:nt}addBoundsMask(_,et){const tt=_.minX>et.minX?_.minX:et.minX,rt=_.minY>et.minY?_.minY:et.minY,nt=_.maxX<et.maxX?_.maxX:et.maxX,ot=_.maxY<et.maxY?_.maxY:et.maxY;if(tt<=nt&&rt<=ot){const at=this.minX,lt=this.minY,ct=this.maxX,dt=this.maxY;this.minX=tt<at?tt:at,this.minY=rt<lt?rt:lt,this.maxX=nt>ct?nt:ct,this.maxY=ot>dt?ot:dt}}addBoundsMatrix(_,et){this.addFrameMatrix(et,_.minX,_.minY,_.maxX,_.maxY)}addBoundsArea(_,et){const tt=_.minX>et.x?_.minX:et.x,rt=_.minY>et.y?_.minY:et.y,nt=_.maxX<et.x+et.width?_.maxX:et.x+et.width,ot=_.maxY<et.y+et.height?_.maxY:et.y+et.height;if(tt<=nt&&rt<=ot){const at=this.minX,lt=this.minY,ct=this.maxX,dt=this.maxY;this.minX=tt<at?tt:at,this.minY=rt<lt?rt:lt,this.maxX=nt>ct?nt:ct,this.maxY=ot>dt?ot:dt}}pad(_=0,et=_){this.isEmpty()||(this.minX-=_,this.maxX+=_,this.minY-=et,this.maxY+=et)}addFramePad(_,et,tt,rt,nt,ot){_-=nt,et-=ot,tt+=nt,rt+=ot,this.minX=this.minX<_?this.minX:_,this.maxX=this.maxX>tt?this.maxX:tt,this.minY=this.minY<et?this.minY:et,this.maxY=this.maxY>rt?this.maxY:rt}}class DisplayObject extends EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bounds,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(_){const et=Object.keys(_);for(let tt=0;tt<et.length;++tt){const rt=et[tt];Object.defineProperty(DisplayObject.prototype,rt,Object.getOwnPropertyDescriptor(_,rt))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(_,et){return _||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),et||(this._boundsRect||(this._boundsRect=new Rectangle),et=this._boundsRect),this._bounds.getRectangle(et)}getLocalBounds(_){_||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),_=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds);const et=this.transform,tt=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(tt==null?void 0:tt.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const rt=this._bounds,nt=this._boundsID;this._bounds=this._localBounds;const ot=this.getBounds(!1,_);return this.parent=tt,this.transform=et,this._bounds=rt,this._bounds.updateID+=this._boundsID-nt,ot}toGlobal(_,et,tt=!1){return tt||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(_,et)}toLocal(_,et,tt,rt){return et&&(_=et.toGlobal(_,tt,rt)),rt||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(_,tt)}setParent(_){if(!_||!_.addChild)throw new Error("setParent: Argument must be a Container");return _.addChild(this),_}removeFromParent(){var _;(_=this.parent)==null||_.removeChild(this)}setTransform(_=0,et=0,tt=1,rt=1,nt=0,ot=0,at=0,lt=0,ct=0){return this.position.x=_,this.position.y=et,this.scale.x=tt||1,this.scale.y=rt||1,this.rotation=nt,this.skew.x=ot,this.skew.y=at,this.pivot.x=lt,this.pivot.y=ct,this}destroy(_){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent}enableTempParent(){const _=this.parent;return this.parent=this._tempDisplayObjectParent,_}disableTempParent(_){this.parent=_}get x(){return this.position.x}set x(_){this.transform.position.x=_}get y(){return this.position.y}set y(_){this.transform.position.y=_}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(_){this.transform.position.copyFrom(_)}get scale(){return this.transform.scale}set scale(_){this.transform.scale.copyFrom(_)}get pivot(){return this.transform.pivot}set pivot(_){this.transform.pivot.copyFrom(_)}get skew(){return this.transform.skew}set skew(_){this.transform.skew.copyFrom(_)}get rotation(){return this.transform.rotation}set rotation(_){this.transform.rotation=_}get angle(){return this.transform.rotation*RAD_TO_DEG}set angle(_){this.transform.rotation=_*DEG_TO_RAD}get zIndex(){return this._zIndex}set zIndex(_){this._zIndex!==_&&(this._zIndex=_,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let _=this;do{if(!_.visible)return!1;_=_.parent}while(_);return!0}get mask(){return this._mask}set mask(_){if(this._mask!==_){if(this._mask){const et=this._mask.isMaskData?this._mask.maskObject:this._mask;et&&(et._maskRefCount--,et._maskRefCount===0&&(et.renderable=!0,et.isMask=!1))}if(this._mask=_,this._mask){const et=this._mask.isMaskData?this._mask.maskObject:this._mask;et&&(et._maskRefCount===0&&(et.renderable=!1,et.isMask=!0),et._maskRefCount++)}}}}class TemporaryDisplayObject extends DisplayObject{constructor(){super(...arguments),this.sortDirty=null}}DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;const tempMatrix$2=new Matrix;function sortChildren(_e,_){return _e.zIndex===_.zIndex?_e._lastSortedIndex-_._lastSortedIndex:_e.zIndex-_.zIndex}const _Container=class fo extends DisplayObject{constructor(){super(),this.children=[],this.sortableChildren=fo.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(_){}addChild(..._){if(_.length>1)for(let et=0;et<_.length;et++)this.addChild(_[et]);else{const et=_[0];et.parent&&et.parent.removeChild(et),et.parent=this,this.sortDirty=!0,et.transform._parentID=-1,this.children.push(et),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",et,this,this.children.length-1),et.emit("added",this)}return _[0]}addChildAt(_,et){if(et<0||et>this.children.length)throw new Error(`${_}addChildAt: The index ${et} supplied is out of bounds ${this.children.length}`);return _.parent&&_.parent.removeChild(_),_.parent=this,this.sortDirty=!0,_.transform._parentID=-1,this.children.splice(et,0,_),this._boundsID++,this.onChildrenChange(et),_.emit("added",this),this.emit("childAdded",_,this,et),_}swapChildren(_,et){if(_===et)return;const tt=this.getChildIndex(_),rt=this.getChildIndex(et);this.children[tt]=et,this.children[rt]=_,this.onChildrenChange(tt<rt?tt:rt)}getChildIndex(_){const et=this.children.indexOf(_);if(et===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return et}setChildIndex(_,et){if(et<0||et>=this.children.length)throw new Error(`The index ${et} supplied is out of bounds ${this.children.length}`);const tt=this.getChildIndex(_);removeItems(this.children,tt,1),this.children.splice(et,0,_),this.onChildrenChange(et)}getChildAt(_){if(_<0||_>=this.children.length)throw new Error(`getChildAt: Index (${_}) does not exist.`);return this.children[_]}removeChild(..._){if(_.length>1)for(let et=0;et<_.length;et++)this.removeChild(_[et]);else{const et=_[0],tt=this.children.indexOf(et);if(tt===-1)return null;et.parent=null,et.transform._parentID=-1,removeItems(this.children,tt,1),this._boundsID++,this.onChildrenChange(tt),et.emit("removed",this),this.emit("childRemoved",et,this,tt)}return _[0]}removeChildAt(_){const et=this.getChildAt(_);return et.parent=null,et.transform._parentID=-1,removeItems(this.children,_,1),this._boundsID++,this.onChildrenChange(_),et.emit("removed",this),this.emit("childRemoved",et,this,_),et}removeChildren(_=0,et=this.children.length){const tt=_,rt=et,nt=rt-tt;let ot;if(nt>0&&nt<=rt){ot=this.children.splice(tt,nt);for(let at=0;at<ot.length;++at)ot[at].parent=null,ot[at].transform&&(ot[at].transform._parentID=-1);this._boundsID++,this.onChildrenChange(_);for(let at=0;at<ot.length;++at)ot[at].emit("removed",this),this.emit("childRemoved",ot[at],this,at);return ot}else if(nt===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let _=!1;for(let et=0,tt=this.children.length;et<tt;++et){const rt=this.children[et];rt._lastSortedIndex=et,!_&&rt.zIndex!==0&&(_=!0)}_&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let _=0,et=this.children.length;_<et;++_){const tt=this.children[_];tt.visible&&tt.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let _=0;_<this.children.length;_++){const et=this.children[_];if(!(!et.visible||!et.renderable))if(et.calculateBounds(),et._mask){const tt=et._mask.isMaskData?et._mask.maskObject:et._mask;tt?(tt.calculateBounds(),this._bounds.addBoundsMask(et._bounds,tt._bounds)):this._bounds.addBounds(et._bounds)}else et.filterArea?this._bounds.addBoundsArea(et._bounds,et.filterArea):this._bounds.addBounds(et._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(_,et=!1){const tt=super.getLocalBounds(_);if(!et)for(let rt=0,nt=this.children.length;rt<nt;++rt){const ot=this.children[rt];ot.visible&&ot.updateTransform()}return tt}_calculateBounds(){}_renderWithCulling(_){const et=_.renderTexture.sourceFrame;if(!(et.width>0&&et.height>0))return;let tt,rt;this.cullArea?(tt=this.cullArea,rt=this.worldTransform):this._render!==fo.prototype._render&&(tt=this.getBounds(!0));const nt=_.projection.transform;if(nt&&(rt?(rt=tempMatrix$2.copyFrom(rt),rt.prepend(nt)):rt=nt),tt&&et.intersects(tt,rt))this._render(_);else if(this.cullArea)return;for(let ot=0,at=this.children.length;ot<at;++ot){const lt=this.children[ot],ct=lt.cullable;lt.cullable=ct||!this.cullArea,lt.render(_),lt.cullable=ct}}render(_){var et;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(et=this.filters)!=null&&et.length)this.renderAdvanced(_);else if(this.cullable)this._renderWithCulling(_);else{this._render(_);for(let tt=0,rt=this.children.length;tt<rt;++tt)this.children[tt].render(_)}}renderAdvanced(_){var nt,ot,at;const et=this.filters,tt=this._mask;if(et){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let lt=0;lt<et.length;lt++)et[lt].enabled&&this._enabledFilters.push(et[lt])}const rt=et&&((nt=this._enabledFilters)==null?void 0:nt.length)||tt&&(!tt.isMaskData||tt.enabled&&(tt.autoDetect||tt.type!==MASK_TYPES.NONE));if(rt&&_.batch.flush(),et&&((ot=this._enabledFilters)!=null&&ot.length)&&_.filter.push(this,this._enabledFilters),tt&&_.mask.push(this,this._mask),this.cullable)this._renderWithCulling(_);else{this._render(_);for(let lt=0,ct=this.children.length;lt<ct;++lt)this.children[lt].render(_)}rt&&_.batch.flush(),tt&&_.mask.pop(this),et&&((at=this._enabledFilters)!=null&&at.length)&&_.filter.pop()}_render(_){}destroy(_){super.destroy(),this.sortDirty=!1;const et=typeof _=="boolean"?_:_==null?void 0:_.children,tt=this.removeChildren(0,this.children.length);if(et)for(let rt=0;rt<tt.length;++rt)tt[rt].destroy(_)}get width(){return this.scale.x*this.getLocalBounds().width}set width(_){const et=this.getLocalBounds().width;et!==0?this.scale.x=_/et:this.scale.x=1,this._width=_}get height(){return this.scale.y*this.getLocalBounds().height}set height(_){const et=this.getLocalBounds().height;et!==0?this.scale.y=_/et:this.scale.y=1,this._height=_}};_Container.defaultSortableChildren=!1;let Container=_Container;Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;Object.defineProperties(settings,{SORTABLE_CHILDREN:{get(){return Container.defaultSortableChildren},set(_e){deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Container.defaultSortableChildren=_e}}});const tempPoint$2=new Point,indices=new Uint16Array([0,1,2,0,2,3]);class Sprite extends Container{constructor(_){super(),this._anchor=new ObservablePoint(this._onAnchorUpdate,this,_?_.defaultAnchor.x:0,_?_.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Color(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=BLEND_MODES.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=_||Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=indices,this.pluginName="batch",this.isSprite=!0,this._roundPixels=settings.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const _=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===_._updateID)return;this._textureID!==_._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=_._updateID;const et=this.transform.worldTransform,tt=et.a,rt=et.b,nt=et.c,ot=et.d,at=et.tx,lt=et.ty,ct=this.vertexData,dt=_.trim,st=_.orig,it=this._anchor;let ut=0,ht=0,ft=0,gt=0;if(dt?(ht=dt.x-it._x*st.width,ut=ht+dt.width,gt=dt.y-it._y*st.height,ft=gt+dt.height):(ht=-it._x*st.width,ut=ht+st.width,gt=-it._y*st.height,ft=gt+st.height),ct[0]=tt*ht+nt*gt+at,ct[1]=ot*gt+rt*ht+lt,ct[2]=tt*ut+nt*gt+at,ct[3]=ot*gt+rt*ut+lt,ct[4]=tt*ut+nt*ft+at,ct[5]=ot*ft+rt*ut+lt,ct[6]=tt*ht+nt*ft+at,ct[7]=ot*ft+rt*ht+lt,this._roundPixels){const mt=settings.RESOLUTION;for(let yt=0;yt<ct.length;++yt)ct[yt]=Math.round(ct[yt]*mt)/mt}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const _=this._texture,et=this.vertexTrimmedData,tt=_.orig,rt=this._anchor,nt=this.transform.worldTransform,ot=nt.a,at=nt.b,lt=nt.c,ct=nt.d,dt=nt.tx,st=nt.ty,it=-rt._x*tt.width,ut=it+tt.width,ht=-rt._y*tt.height,ft=ht+tt.height;if(et[0]=ot*it+lt*ht+dt,et[1]=ct*ht+at*it+st,et[2]=ot*ut+lt*ht+dt,et[3]=ct*ht+at*ut+st,et[4]=ot*ut+lt*ft+dt,et[5]=ct*ft+at*ut+st,et[6]=ot*it+lt*ft+dt,et[7]=ct*ft+at*it+st,this._roundPixels){const gt=settings.RESOLUTION;for(let mt=0;mt<et.length;++mt)et[mt]=Math.round(et[mt]*gt)/gt}}_render(_){this.calculateVertices(),_.batch.setObjectRenderer(_.plugins[this.pluginName]),_.plugins[this.pluginName].render(this)}_calculateBounds(){const _=this._texture.trim,et=this._texture.orig;!_||_.width===et.width&&_.height===et.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(_){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),_||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),_=this._localBoundsRect),this._localBounds.getRectangle(_)):super.getLocalBounds.call(this,_)}containsPoint(_){this.worldTransform.applyInverse(_,tempPoint$2);const et=this._texture.orig.width,tt=this._texture.orig.height,rt=-et*this.anchor.x;let nt=0;return tempPoint$2.x>=rt&&tempPoint$2.x<rt+et&&(nt=-tt*this.anchor.y,tempPoint$2.y>=nt&&tempPoint$2.y<nt+tt)}destroy(_){if(super.destroy(_),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof _=="boolean"?_:_==null?void 0:_.texture){const et=typeof _=="boolean"?_:_==null?void 0:_.baseTexture;this._texture.destroy(!!et)}this._texture=null}static from(_,et){const tt=_ instanceof Texture?_:Texture.from(_,et);return new Sprite(tt)}set roundPixels(_){this._roundPixels!==_&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=_}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(_){const et=sign(this.scale.x)||1;this.scale.x=et*_/this._texture.orig.width,this._width=_}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(_){const et=sign(this.scale.y)||1;this.scale.y=et*_/this._texture.orig.height,this._height=_}get anchor(){return this._anchor}set anchor(_){this._anchor.copyFrom(_)}get tint(){return this._tintColor.value}set tint(_){this._tintColor.setValue(_),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(_){this._texture!==_&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=_||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,_&&(_.baseTexture.valid?this._onTextureUpdate():_.once("update",this._onTextureUpdate,this)))}}const _tempMatrix=new Matrix;DisplayObject.prototype._cacheAsBitmap=!1;DisplayObject.prototype._cacheData=null;DisplayObject.prototype._cacheAsBitmapResolution=null;DisplayObject.prototype._cacheAsBitmapMultisample=null;class CacheData{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(DisplayObject.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(_e){_e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=_e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(_e){_e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=_e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(_e){if(this._cacheAsBitmap===_e)return;this._cacheAsBitmap=_e;let _;_e?(this._cacheData||(this._cacheData=new CacheData),_=this._cacheData,_.originalRender=this.render,_.originalRenderCanvas=this.renderCanvas,_.originalUpdateTransform=this.updateTransform,_.originalCalculateBounds=this.calculateBounds,_.originalGetLocalBounds=this.getLocalBounds,_.originalDestroy=this.destroy,_.originalContainsPoint=this.containsPoint,_.originalMask=this._mask,_.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(_=this._cacheData,_.sprite&&this._destroyCachedDisplayObject(),this.render=_.originalRender,this.renderCanvas=_.originalRenderCanvas,this.calculateBounds=_.originalCalculateBounds,this.getLocalBounds=_.originalGetLocalBounds,this.destroy=_.originalDestroy,this.updateTransform=_.originalUpdateTransform,this.containsPoint=_.originalContainsPoint,this._mask=_.originalMask,this.filterArea=_.originalFilterArea)}}});DisplayObject.prototype._renderCached=function(_e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(_e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(_e))};DisplayObject.prototype._initCachedDisplayObject=function(_e){var it,ut;if((it=this._cacheData)!=null&&it.sprite)return;const _=this.alpha;this.alpha=1,_e.batch.flush();const et=this.getLocalBounds(new Rectangle,!0);if((ut=this.filters)!=null&&ut.length){const ht=this.filters[0].padding;et.pad(ht)}const tt=this.cacheAsBitmapResolution||_e.resolution;et.ceil(tt),et.width=Math.max(et.width,1/tt),et.height=Math.max(et.height,1/tt);const rt=_e.renderTexture.current,nt=_e.renderTexture.sourceFrame.clone(),ot=_e.renderTexture.destinationFrame.clone(),at=_e.projection.transform,lt=RenderTexture.create({width:et.width,height:et.height,resolution:tt,multisample:this.cacheAsBitmapMultisample??_e.multisample}),ct=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=ct,BaseTexture.addToCache(lt.baseTexture,ct),Texture.addToCache(lt,ct);const dt=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-et.x,-et.y);this.render=this._cacheData.originalRender,_e.render(this,{renderTexture:lt,clear:!0,transform:dt,skipUpdateTransform:!1}),_e.framebuffer.blit(),_e.projection.transform=at,_e.renderTexture.bind(rt,nt,ot),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=_;const st=new Sprite(lt);st.transform.worldTransform=this.transform.worldTransform,st.anchor.x=-(et.x/et.width),st.anchor.y=-(et.y/et.height),st.alpha=_,st._bounds=this._bounds,this._cacheData.sprite=st,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=st.containsPoint.bind(st)};DisplayObject.prototype._renderCachedCanvas=function(_e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(_e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(_e))};DisplayObject.prototype._initCachedDisplayObjectCanvas=function(_e){var dt;if((dt=this._cacheData)!=null&&dt.sprite)return;const _=this.getLocalBounds(new Rectangle,!0),et=this.alpha;this.alpha=1;const tt=_e.canvasContext.activeContext,rt=_e._projTransform,nt=this.cacheAsBitmapResolution||_e.resolution;_.ceil(nt),_.width=Math.max(_.width,1/nt),_.height=Math.max(_.height,1/nt);const ot=RenderTexture.create({width:_.width,height:_.height,resolution:nt}),at=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=at,BaseTexture.addToCache(ot.baseTexture,at),Texture.addToCache(ot,at);const lt=_tempMatrix;this.transform.localTransform.copyTo(lt),lt.invert(),lt.tx-=_.x,lt.ty-=_.y,this.renderCanvas=this._cacheData.originalRenderCanvas,_e.render(this,{renderTexture:ot,clear:!0,transform:lt,skipUpdateTransform:!1}),_e.canvasContext.activeContext=tt,_e._projTransform=rt,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=et;const ct=new Sprite(ot);ct.transform.worldTransform=this.transform.worldTransform,ct.anchor.x=-(_.x/_.width),ct.anchor.y=-(_.y/_.height),ct.alpha=et,ct._bounds=this._bounds,this._cacheData.sprite=ct,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=_e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=ct.containsPoint.bind(ct)};DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture.removeFromCache(this._cacheData.textureCacheId),Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};DisplayObject.prototype._cacheAsBitmapDestroy=function(_e){this.cacheAsBitmap=!1,this.destroy(_e)};DisplayObject.prototype.name=null;Container.prototype.getChildByName=function(_e,_){for(let et=0,tt=this.children.length;et<tt;et++)if(this.children[et].name===_e)return this.children[et];if(_)for(let et=0,tt=this.children.length;et<tt;et++){const rt=this.children[et];if(!rt.getChildByName)continue;const nt=rt.getChildByName(_e,!0);if(nt)return nt}return null};DisplayObject.prototype.getGlobalPosition=function(_e=new Point,_=!1){return this.parent?this.parent.toGlobal(this.position,_e,_):(_e.x=this.position.x,_e.y=this.position.y),_e};var fragment$6=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class AlphaFilter extends Filter{constructor(_=1){super(defaultVertex,fragment$6,{uAlpha:1}),this.alpha=_}get alpha(){return this.uniforms.uAlpha}set alpha(_){this.uniforms.uAlpha=_}}const GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(_e){const _=GAUSSIAN_VALUES[_e],et=_.length;let tt=fragTemplate,rt="";const nt="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let ot;for(let at=0;at<_e;at++){let lt=nt.replace("%index%",at.toString());ot=at,at>=et&&(ot=_e-at-1),lt=lt.replace("%value%",_[ot].toString()),rt+=lt,rt+=`
`}return tt=tt.replace("%blur%",rt),tt=tt.replace("%size%",_e.toString()),tt}const vertTemplate=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(_e,_){const et=Math.ceil(_e/2);let tt=vertTemplate,rt="",nt;_?nt="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":nt="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let ot=0;ot<_e;ot++){let at=nt.replace("%index%",ot.toString());at=at.replace("%sampleIndex%",`${ot-(et-1)}.0`),rt+=at,rt+=`
`}return tt=tt.replace("%blur%",rt),tt=tt.replace("%size%",_e.toString()),tt}class BlurFilterPass extends Filter{constructor(_,et=8,tt=4,rt=Filter.defaultResolution,nt=5){const ot=generateBlurVertSource(nt,_),at=generateBlurFragSource(nt);super(ot,at),this.horizontal=_,this.resolution=rt,this._quality=0,this.quality=tt,this.blur=et}apply(_,et,tt,rt){if(tt?this.horizontal?this.uniforms.strength=1/tt.width*(tt.width/et.width):this.uniforms.strength=1/tt.height*(tt.height/et.height):this.horizontal?this.uniforms.strength=1/_.renderer.width*(_.renderer.width/et.width):this.uniforms.strength=1/_.renderer.height*(_.renderer.height/et.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)_.applyFilter(this,et,tt,rt);else{const nt=_.getFilterTexture(),ot=_.renderer;let at=et,lt=nt;this.state.blend=!1,_.applyFilter(this,at,lt,CLEAR_MODES.CLEAR);for(let ct=1;ct<this.passes-1;ct++){_.bindAndClear(at,CLEAR_MODES.BLIT),this.uniforms.uSampler=lt;const dt=lt;lt=at,at=dt,ot.shader.bind(this),ot.geometry.draw(5)}this.state.blend=!0,_.applyFilter(this,lt,tt,rt),_.returnFilterTexture(nt)}}get blur(){return this.strength}set blur(_){this.padding=1+Math.abs(_)*2,this.strength=_}get quality(){return this._quality}set quality(_){this._quality=_,this.passes=_}}class BlurFilter extends Filter{constructor(_=8,et=4,tt=Filter.defaultResolution,rt=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new BlurFilterPass(!0,_,et,tt,rt),this.blurYFilter=new BlurFilterPass(!1,_,et,tt,rt),this.resolution=tt,this.quality=et,this.blur=_,this.repeatEdgePixels=!1}apply(_,et,tt,rt){const nt=Math.abs(this.blurXFilter.strength),ot=Math.abs(this.blurYFilter.strength);if(nt&&ot){const at=_.getFilterTexture();this.blurXFilter.apply(_,et,at,CLEAR_MODES.CLEAR),this.blurYFilter.apply(_,at,tt,rt),_.returnFilterTexture(at)}else ot?this.blurYFilter.apply(_,et,tt,rt):this.blurXFilter.apply(_,et,tt,rt)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(_){this.blurXFilter.blur=this.blurYFilter.blur=_,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(_){this.blurXFilter.quality=this.blurYFilter.quality=_}get blurX(){return this.blurXFilter.blur}set blurX(_){this.blurXFilter.blur=_,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(_){this.blurYFilter.blur=_,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(_){this.blurYFilter.blendMode=_}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(_){this._repeatEdgePixels=_,this.updatePadding()}}var fragment$5=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class ColorMatrixFilter extends Filter{constructor(){const _={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(defaultFilterVertex,fragment$5,_),this.alpha=1}_loadMatrix(_,et=!1){let tt=_;et&&(this._multiply(tt,this.uniforms.m,_),tt=this._colorMatrix(tt)),this.uniforms.m=tt}_multiply(_,et,tt){return _[0]=et[0]*tt[0]+et[1]*tt[5]+et[2]*tt[10]+et[3]*tt[15],_[1]=et[0]*tt[1]+et[1]*tt[6]+et[2]*tt[11]+et[3]*tt[16],_[2]=et[0]*tt[2]+et[1]*tt[7]+et[2]*tt[12]+et[3]*tt[17],_[3]=et[0]*tt[3]+et[1]*tt[8]+et[2]*tt[13]+et[3]*tt[18],_[4]=et[0]*tt[4]+et[1]*tt[9]+et[2]*tt[14]+et[3]*tt[19]+et[4],_[5]=et[5]*tt[0]+et[6]*tt[5]+et[7]*tt[10]+et[8]*tt[15],_[6]=et[5]*tt[1]+et[6]*tt[6]+et[7]*tt[11]+et[8]*tt[16],_[7]=et[5]*tt[2]+et[6]*tt[7]+et[7]*tt[12]+et[8]*tt[17],_[8]=et[5]*tt[3]+et[6]*tt[8]+et[7]*tt[13]+et[8]*tt[18],_[9]=et[5]*tt[4]+et[6]*tt[9]+et[7]*tt[14]+et[8]*tt[19]+et[9],_[10]=et[10]*tt[0]+et[11]*tt[5]+et[12]*tt[10]+et[13]*tt[15],_[11]=et[10]*tt[1]+et[11]*tt[6]+et[12]*tt[11]+et[13]*tt[16],_[12]=et[10]*tt[2]+et[11]*tt[7]+et[12]*tt[12]+et[13]*tt[17],_[13]=et[10]*tt[3]+et[11]*tt[8]+et[12]*tt[13]+et[13]*tt[18],_[14]=et[10]*tt[4]+et[11]*tt[9]+et[12]*tt[14]+et[13]*tt[19]+et[14],_[15]=et[15]*tt[0]+et[16]*tt[5]+et[17]*tt[10]+et[18]*tt[15],_[16]=et[15]*tt[1]+et[16]*tt[6]+et[17]*tt[11]+et[18]*tt[16],_[17]=et[15]*tt[2]+et[16]*tt[7]+et[17]*tt[12]+et[18]*tt[17],_[18]=et[15]*tt[3]+et[16]*tt[8]+et[17]*tt[13]+et[18]*tt[18],_[19]=et[15]*tt[4]+et[16]*tt[9]+et[17]*tt[14]+et[18]*tt[19]+et[19],_}_colorMatrix(_){const et=new Float32Array(_);return et[4]/=255,et[9]/=255,et[14]/=255,et[19]/=255,et}brightness(_,et){const tt=[_,0,0,0,0,0,_,0,0,0,0,0,_,0,0,0,0,0,1,0];this._loadMatrix(tt,et)}tint(_,et){const[tt,rt,nt]=Color.shared.setValue(_).toArray(),ot=[tt,0,0,0,0,0,rt,0,0,0,0,0,nt,0,0,0,0,0,1,0];this._loadMatrix(ot,et)}greyscale(_,et){const tt=[_,_,_,0,0,_,_,_,0,0,_,_,_,0,0,0,0,0,1,0];this._loadMatrix(tt,et)}blackAndWhite(_){const et=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(et,_)}hue(_,et){_=(_||0)/180*Math.PI;const tt=Math.cos(_),rt=Math.sin(_),nt=Math.sqrt,ot=1/3,at=nt(ot),lt=tt+(1-tt)*ot,ct=ot*(1-tt)-at*rt,dt=ot*(1-tt)+at*rt,st=ot*(1-tt)+at*rt,it=tt+ot*(1-tt),ut=ot*(1-tt)-at*rt,ht=ot*(1-tt)-at*rt,ft=ot*(1-tt)+at*rt,gt=tt+ot*(1-tt),mt=[lt,ct,dt,0,0,st,it,ut,0,0,ht,ft,gt,0,0,0,0,0,1,0];this._loadMatrix(mt,et)}contrast(_,et){const tt=(_||0)+1,rt=-.5*(tt-1),nt=[tt,0,0,0,rt,0,tt,0,0,rt,0,0,tt,0,rt,0,0,0,1,0];this._loadMatrix(nt,et)}saturate(_=0,et){const tt=_*2/3+1,rt=(tt-1)*-.5,nt=[tt,rt,rt,0,0,rt,tt,rt,0,0,rt,rt,tt,0,0,0,0,0,1,0];this._loadMatrix(nt,et)}desaturate(){this.saturate(-1)}negative(_){const et=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(et,_)}sepia(_){const et=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(et,_)}technicolor(_){const et=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(et,_)}polaroid(_){const et=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(et,_)}toBGR(_){const et=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(et,_)}kodachrome(_){const et=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(et,_)}browni(_){const et=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(et,_)}vintage(_){const et=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(et,_)}colorTone(_,et,tt,rt,nt){_=_||.2,et=et||.15,tt=tt||16770432,rt=rt||3375104;const ot=Color.shared,[at,lt,ct]=ot.setValue(tt).toArray(),[dt,st,it]=ot.setValue(rt).toArray(),ut=[.3,.59,.11,0,0,at,lt,ct,_,0,dt,st,it,et,0,at-dt,lt-st,ct-it,0,0];this._loadMatrix(ut,nt)}night(_,et){_=_||.1;const tt=[_*-2,-_,0,0,0,-_,0,_,0,0,0,_,_*2,0,0,0,0,0,1,0];this._loadMatrix(tt,et)}predator(_,et){const tt=[11.224130630493164*_,-4.794486999511719*_,-2.8746118545532227*_,0*_,.40342438220977783*_,-3.6330697536468506*_,9.193157196044922*_,-2.951810836791992*_,0*_,-1.316135048866272*_,-3.2184197902679443*_,-4.2375030517578125*_,7.476448059082031*_,0*_,.8044459223747253*_,0,0,0,1,0];this._loadMatrix(tt,et)}lsd(_){const et=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(et,_)}reset(){const _=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(_,!1)}get matrix(){return this.uniforms.m}set matrix(_){this.uniforms.m=_}get alpha(){return this.uniforms.uAlpha}set alpha(_){this.uniforms.uAlpha=_}}ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;var fragment$4=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vertex$3=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class DisplacementFilter extends Filter{constructor(_,et){const tt=new Matrix;_.renderable=!1,super(vertex$3,fragment$4,{mapSampler:_._texture,filterMatrix:tt,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=_,this.maskMatrix=tt,et==null&&(et=20),this.scale=new Point(et,et)}apply(_,et,tt,rt){this.uniforms.filterMatrix=_.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const nt=this.maskSprite.worldTransform,ot=Math.sqrt(nt.a*nt.a+nt.b*nt.b),at=Math.sqrt(nt.c*nt.c+nt.d*nt.d);ot!==0&&at!==0&&(this.uniforms.rotation[0]=nt.a/ot,this.uniforms.rotation[1]=nt.b/ot,this.uniforms.rotation[2]=nt.c/at,this.uniforms.rotation[3]=nt.d/at),_.applyFilter(this,et,tt,rt)}get map(){return this.uniforms.mapSampler}set map(_){this.uniforms.mapSampler=_}}var fragment$3=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,vertex$2=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class FXAAFilter extends Filter{constructor(){super(vertex$2,fragment$3)}}var fragment$2=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class NoiseFilter extends Filter{constructor(_=.5,et=Math.random()){super(defaultFilterVertex,fragment$2,{uNoise:0,uSeed:0}),this.noise=_,this.seed=et}get noise(){return this.uniforms.uNoise}set noise(_){this.uniforms.uNoise=_}get seed(){return this.uniforms.uSeed}set seed(_){this.uniforms.uSeed=_}}const filters={AlphaFilter,BlurFilter,BlurFilterPass,ColorMatrixFilter,DisplacementFilter,FXAAFilter,NoiseFilter};Object.entries(filters).forEach(([_e,_])=>{Object.defineProperty(filters,_e,{get(){return deprecation("7.1.0",`filters.${_e} has moved to ${_e}`),_}})});class EventsTickerClass{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(_){this.removeTickerListener(),this.events=_,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(_){this._pauseUpdate=_}addTickerListener(){this.tickerAdded||!this.domElement||(Ticker.system.add(this.tickerUpdate,this,UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const _=this.events.rootPointerEvent;this.events.supportsTouchEvents&&_.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:_.clientX,clientY:_.clientY}))}tickerUpdate(_){this._deltaTime+=_,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const EventsTicker=new EventsTickerClass;class FederatedEvent{constructor(_){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=FederatedEvent.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Point,this.page=new Point,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=_}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(_,et,tt){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(_,et,tt,rt,nt){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class FederatedMouseEvent extends FederatedEvent{constructor(){super(...arguments),this.client=new Point,this.movement=new Point,this.offset=new Point,this.global=new Point,this.screen=new Point}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(_,et,tt){return _.worldTransform.applyInverse(tt||this.global,et)}getModifierState(_){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(_)}initMouseEvent(_,et,tt,rt,nt,ot,at,lt,ct,dt,st,it,ut,ht,ft){throw new Error("Method not implemented.")}}class FederatedPointerEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class FederatedWheelEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}FederatedWheelEvent.DOM_DELTA_PIXEL=0,FederatedWheelEvent.DOM_DELTA_LINE=1,FederatedWheelEvent.DOM_DELTA_PAGE=2;const PROPAGATION_LIMIT=2048,tempHitLocation=new Point,tempLocalMapping=new Point;class EventBoundary{constructor(_){this.dispatch=new EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=_,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(_,et){this.mappingTable[_]||(this.mappingTable[_]=[]),this.mappingTable[_].push({fn:et,priority:0}),this.mappingTable[_].sort((tt,rt)=>tt.priority-rt.priority)}dispatchEvent(_,et){_.propagationStopped=!1,_.propagationImmediatelyStopped=!1,this.propagate(_,et),this.dispatch.emit(et||_.type,_)}mapEvent(_){if(!this.rootTarget)return;const et=this.mappingTable[_.type];if(et)for(let tt=0,rt=et.length;tt<rt;tt++)et[tt].fn(_);else console.warn(`[EventBoundary]: Event mapping not defined for ${_.type}`)}hitTest(_,et){EventsTicker.pauseUpdate=!0;const tt=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",rt=this[tt](this.rootTarget,this.rootTarget.eventMode,tempHitLocation.set(_,et),this.hitTestFn,this.hitPruneFn);return rt&&rt[0]}propagate(_,et){if(!_.target)return;const tt=_.composedPath();_.eventPhase=_.CAPTURING_PHASE;for(let rt=0,nt=tt.length-1;rt<nt;rt++)if(_.currentTarget=tt[rt],this.notifyTarget(_,et),_.propagationStopped||_.propagationImmediatelyStopped)return;if(_.eventPhase=_.AT_TARGET,_.currentTarget=_.target,this.notifyTarget(_,et),!(_.propagationStopped||_.propagationImmediatelyStopped)){_.eventPhase=_.BUBBLING_PHASE;for(let rt=tt.length-2;rt>=0;rt--)if(_.currentTarget=tt[rt],this.notifyTarget(_,et),_.propagationStopped||_.propagationImmediatelyStopped)return}}all(_,et,tt=this._allInteractiveElements){if(tt.length===0)return;_.eventPhase=_.BUBBLING_PHASE;const rt=Array.isArray(et)?et:[et];for(let nt=tt.length-1;nt>=0;nt--)rt.forEach(ot=>{_.currentTarget=tt[nt],this.notifyTarget(_,ot)})}propagationPath(_){const et=[_];for(let tt=0;tt<PROPAGATION_LIMIT&&_!==this.rootTarget;tt++){if(!_.parent)throw new Error("Cannot find propagation path to disconnected target");et.push(_.parent),_=_.parent}return et.reverse(),et}hitTestMoveRecursive(_,et,tt,rt,nt,ot=!1){let at=!1;if(this._interactivePrune(_))return null;if((_.eventMode==="dynamic"||et==="dynamic")&&(EventsTicker.pauseUpdate=!1),_.interactiveChildren&&_.children){const dt=_.children;for(let st=dt.length-1;st>=0;st--){const it=dt[st],ut=this.hitTestMoveRecursive(it,this._isInteractive(et)?et:it.eventMode,tt,rt,nt,ot||nt(_,tt));if(ut){if(ut.length>0&&!ut[ut.length-1].parent)continue;const ht=_.isInteractive();(ut.length>0||ht)&&(ht&&this._allInteractiveElements.push(_),ut.push(_)),this._hitElements.length===0&&(this._hitElements=ut),at=!0}}}const lt=this._isInteractive(et),ct=_.isInteractive();return lt&&ct&&this._allInteractiveElements.push(_),ot||this._hitElements.length>0?null:at?this._hitElements:lt&&!nt(_,tt)&&rt(_,tt)?ct?[_]:[]:null}hitTestRecursive(_,et,tt,rt,nt){if(this._interactivePrune(_)||nt(_,tt))return null;if((_.eventMode==="dynamic"||et==="dynamic")&&(EventsTicker.pauseUpdate=!1),_.interactiveChildren&&_.children){const lt=_.children;for(let ct=lt.length-1;ct>=0;ct--){const dt=lt[ct],st=this.hitTestRecursive(dt,this._isInteractive(et)?et:dt.eventMode,tt,rt,nt);if(st){if(st.length>0&&!st[st.length-1].parent)continue;const it=_.isInteractive();return(st.length>0||it)&&st.push(_),st}}}const ot=this._isInteractive(et),at=_.isInteractive();return ot&&rt(_,tt)?at?[_]:[]:null}_isInteractive(_){return _==="static"||_==="dynamic"}_interactivePrune(_){return!!(!_||_.isMask||!_.visible||!_.renderable||_.eventMode==="none"||_.eventMode==="passive"&&!_.interactiveChildren||_.isMask)}hitPruneFn(_,et){var tt;if(_.hitArea&&(_.worldTransform.applyInverse(et,tempLocalMapping),!_.hitArea.contains(tempLocalMapping.x,tempLocalMapping.y)))return!0;if(_._mask){const rt=_._mask.isMaskData?_._mask.maskObject:_._mask;if(rt&&!((tt=rt.containsPoint)!=null&&tt.call(rt,et)))return!0}return!1}hitTestFn(_,et){return _.eventMode==="passive"?!1:_.hitArea?!0:_.containsPoint?_.containsPoint(et):!1}notifyTarget(_,et){var nt,ot;et=et??_.type;const tt=`on${et}`;(ot=(nt=_.currentTarget)[tt])==null||ot.call(nt,_);const rt=_.eventPhase===_.CAPTURING_PHASE||_.eventPhase===_.AT_TARGET?`${et}capture`:et;this.notifyListeners(_,rt),_.eventPhase===_.AT_TARGET&&this.notifyListeners(_,et)}mapPointerDown(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=this.createPointerEvent(_);if(this.dispatchEvent(et,"pointerdown"),et.pointerType==="touch")this.dispatchEvent(et,"touchstart");else if(et.pointerType==="mouse"||et.pointerType==="pen"){const rt=et.button===2;this.dispatchEvent(et,rt?"rightdown":"mousedown")}const tt=this.trackingData(_.pointerId);tt.pressTargetsByButton[_.button]=et.composedPath(),this.freeEvent(et)}mapPointerMove(_){var lt,ct;if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const et=this.createPointerEvent(_);this._isPointerMoveEvent=!1;const tt=et.pointerType==="mouse"||et.pointerType==="pen",rt=this.trackingData(_.pointerId),nt=this.findMountedTarget(rt.overTargets);if(((lt=rt.overTargets)==null?void 0:lt.length)>0&&nt!==et.target){const dt=_.type==="mousemove"?"mouseout":"pointerout",st=this.createPointerEvent(_,dt,nt);if(this.dispatchEvent(st,"pointerout"),tt&&this.dispatchEvent(st,"mouseout"),!et.composedPath().includes(nt)){const it=this.createPointerEvent(_,"pointerleave",nt);for(it.eventPhase=it.AT_TARGET;it.target&&!et.composedPath().includes(it.target);)it.currentTarget=it.target,this.notifyTarget(it),tt&&this.notifyTarget(it,"mouseleave"),it.target=it.target.parent;this.freeEvent(it)}this.freeEvent(st)}if(nt!==et.target){const dt=_.type==="mousemove"?"mouseover":"pointerover",st=this.clonePointerEvent(et,dt);this.dispatchEvent(st,"pointerover"),tt&&this.dispatchEvent(st,"mouseover");let it=nt==null?void 0:nt.parent;for(;it&&it!==this.rootTarget.parent&&it!==et.target;)it=it.parent;if(!it||it===this.rootTarget.parent){const ut=this.clonePointerEvent(et,"pointerenter");for(ut.eventPhase=ut.AT_TARGET;ut.target&&ut.target!==nt&&ut.target!==this.rootTarget.parent;)ut.currentTarget=ut.target,this.notifyTarget(ut),tt&&this.notifyTarget(ut,"mouseenter"),ut.target=ut.target.parent;this.freeEvent(ut)}this.freeEvent(st)}const ot=[],at=this.enableGlobalMoveEvents??!0;this.moveOnAll?ot.push("pointermove"):this.dispatchEvent(et,"pointermove"),at&&ot.push("globalpointermove"),et.pointerType==="touch"&&(this.moveOnAll?ot.splice(1,0,"touchmove"):this.dispatchEvent(et,"touchmove"),at&&ot.push("globaltouchmove")),tt&&(this.moveOnAll?ot.splice(1,0,"mousemove"):this.dispatchEvent(et,"mousemove"),at&&ot.push("globalmousemove"),this.cursor=(ct=et.target)==null?void 0:ct.cursor),ot.length>0&&this.all(et,ot),this._allInteractiveElements.length=0,this._hitElements.length=0,rt.overTargets=et.composedPath(),this.freeEvent(et)}mapPointerOver(_){var ot;if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=this.trackingData(_.pointerId),tt=this.createPointerEvent(_),rt=tt.pointerType==="mouse"||tt.pointerType==="pen";this.dispatchEvent(tt,"pointerover"),rt&&this.dispatchEvent(tt,"mouseover"),tt.pointerType==="mouse"&&(this.cursor=(ot=tt.target)==null?void 0:ot.cursor);const nt=this.clonePointerEvent(tt,"pointerenter");for(nt.eventPhase=nt.AT_TARGET;nt.target&&nt.target!==this.rootTarget.parent;)nt.currentTarget=nt.target,this.notifyTarget(nt),rt&&this.notifyTarget(nt,"mouseenter"),nt.target=nt.target.parent;et.overTargets=tt.composedPath(),this.freeEvent(tt),this.freeEvent(nt)}mapPointerOut(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=this.trackingData(_.pointerId);if(et.overTargets){const tt=_.pointerType==="mouse"||_.pointerType==="pen",rt=this.findMountedTarget(et.overTargets),nt=this.createPointerEvent(_,"pointerout",rt);this.dispatchEvent(nt),tt&&this.dispatchEvent(nt,"mouseout");const ot=this.createPointerEvent(_,"pointerleave",rt);for(ot.eventPhase=ot.AT_TARGET;ot.target&&ot.target!==this.rootTarget.parent;)ot.currentTarget=ot.target,this.notifyTarget(ot),tt&&this.notifyTarget(ot,"mouseleave"),ot.target=ot.target.parent;et.overTargets=null,this.freeEvent(nt),this.freeEvent(ot)}this.cursor=null}mapPointerUp(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=performance.now(),tt=this.createPointerEvent(_);if(this.dispatchEvent(tt,"pointerup"),tt.pointerType==="touch")this.dispatchEvent(tt,"touchend");else if(tt.pointerType==="mouse"||tt.pointerType==="pen"){const at=tt.button===2;this.dispatchEvent(tt,at?"rightup":"mouseup")}const rt=this.trackingData(_.pointerId),nt=this.findMountedTarget(rt.pressTargetsByButton[_.button]);let ot=nt;if(nt&&!tt.composedPath().includes(nt)){let at=nt;for(;at&&!tt.composedPath().includes(at);){if(tt.currentTarget=at,this.notifyTarget(tt,"pointerupoutside"),tt.pointerType==="touch")this.notifyTarget(tt,"touchendoutside");else if(tt.pointerType==="mouse"||tt.pointerType==="pen"){const lt=tt.button===2;this.notifyTarget(tt,lt?"rightupoutside":"mouseupoutside")}at=at.parent}delete rt.pressTargetsByButton[_.button],ot=at}if(ot){const at=this.clonePointerEvent(tt,"click");at.target=ot,at.path=null,rt.clicksByButton[_.button]||(rt.clicksByButton[_.button]={clickCount:0,target:at.target,timeStamp:et});const lt=rt.clicksByButton[_.button];if(lt.target===at.target&&et-lt.timeStamp<200?++lt.clickCount:lt.clickCount=1,lt.target=at.target,lt.timeStamp=et,at.detail=lt.clickCount,at.pointerType==="mouse"){const ct=at.button===2;this.dispatchEvent(at,ct?"rightclick":"click")}else at.pointerType==="touch"&&this.dispatchEvent(at,"tap");this.dispatchEvent(at,"pointertap"),this.freeEvent(at)}this.freeEvent(tt)}mapPointerUpOutside(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=this.trackingData(_.pointerId),tt=this.findMountedTarget(et.pressTargetsByButton[_.button]),rt=this.createPointerEvent(_);if(tt){let nt=tt;for(;nt;)rt.currentTarget=nt,this.notifyTarget(rt,"pointerupoutside"),rt.pointerType==="touch"?this.notifyTarget(rt,"touchendoutside"):(rt.pointerType==="mouse"||rt.pointerType==="pen")&&this.notifyTarget(rt,rt.button===2?"rightupoutside":"mouseupoutside"),nt=nt.parent;delete et.pressTargetsByButton[_.button]}this.freeEvent(rt)}mapWheel(_){if(!(_ instanceof FederatedWheelEvent)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const et=this.createWheelEvent(_);this.dispatchEvent(et),this.freeEvent(et)}findMountedTarget(_){if(!_)return null;let et=_[0];for(let tt=1;tt<_.length&&_[tt].parent===et;tt++)et=_[tt];return et}createPointerEvent(_,et,tt){const rt=this.allocateEvent(FederatedPointerEvent);return this.copyPointerData(_,rt),this.copyMouseData(_,rt),this.copyData(_,rt),rt.nativeEvent=_.nativeEvent,rt.originalEvent=_,rt.target=tt??this.hitTest(rt.global.x,rt.global.y)??this._hitElements[0],typeof et=="string"&&(rt.type=et),rt}createWheelEvent(_){const et=this.allocateEvent(FederatedWheelEvent);return this.copyWheelData(_,et),this.copyMouseData(_,et),this.copyData(_,et),et.nativeEvent=_.nativeEvent,et.originalEvent=_,et.target=this.hitTest(et.global.x,et.global.y),et}clonePointerEvent(_,et){const tt=this.allocateEvent(FederatedPointerEvent);return tt.nativeEvent=_.nativeEvent,tt.originalEvent=_.originalEvent,this.copyPointerData(_,tt),this.copyMouseData(_,tt),this.copyData(_,tt),tt.target=_.target,tt.path=_.composedPath().slice(),tt.type=et??tt.type,tt}copyWheelData(_,et){et.deltaMode=_.deltaMode,et.deltaX=_.deltaX,et.deltaY=_.deltaY,et.deltaZ=_.deltaZ}copyPointerData(_,et){_ instanceof FederatedPointerEvent&&et instanceof FederatedPointerEvent&&(et.pointerId=_.pointerId,et.width=_.width,et.height=_.height,et.isPrimary=_.isPrimary,et.pointerType=_.pointerType,et.pressure=_.pressure,et.tangentialPressure=_.tangentialPressure,et.tiltX=_.tiltX,et.tiltY=_.tiltY,et.twist=_.twist)}copyMouseData(_,et){_ instanceof FederatedMouseEvent&&et instanceof FederatedMouseEvent&&(et.altKey=_.altKey,et.button=_.button,et.buttons=_.buttons,et.client.copyFrom(_.client),et.ctrlKey=_.ctrlKey,et.metaKey=_.metaKey,et.movement.copyFrom(_.movement),et.screen.copyFrom(_.screen),et.shiftKey=_.shiftKey,et.global.copyFrom(_.global))}copyData(_,et){et.isTrusted=_.isTrusted,et.srcElement=_.srcElement,et.timeStamp=performance.now(),et.type=_.type,et.detail=_.detail,et.view=_.view,et.which=_.which,et.layer.copyFrom(_.layer),et.page.copyFrom(_.page)}trackingData(_){return this.mappingState.trackingData[_]||(this.mappingState.trackingData[_]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[_]}allocateEvent(_){this.eventPool.has(_)||this.eventPool.set(_,[]);const et=this.eventPool.get(_).pop()||new _(this);return et.eventPhase=et.NONE,et.currentTarget=null,et.path=null,et.target=null,et}freeEvent(_){if(_.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const et=_.constructor;this.eventPool.has(et)||this.eventPool.set(et,[]),this.eventPool.get(et).push(_)}notifyListeners(_,et){const tt=_.currentTarget._events[et];if(tt&&_.currentTarget.isInteractive())if("fn"in tt)tt.once&&_.currentTarget.removeListener(et,tt.fn,void 0,!0),tt.fn.call(tt.context,_);else for(let rt=0,nt=tt.length;rt<nt&&!_.propagationImmediatelyStopped;rt++)tt[rt].once&&_.currentTarget.removeListener(et,tt[rt].fn,void 0,!0),tt[rt].fn.call(tt[rt].context,_)}}const MOUSE_POINTER_ID=1,TOUCH_TO_POINTER={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},_EventSystem=class go{constructor(_){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=_,this.rootBoundary=new EventBoundary(null),EventsTicker.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new FederatedPointerEvent(null),this.rootWheelEvent=new FederatedWheelEvent(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...go.defaultEventFeatures},{set:(et,tt,rt)=>(tt==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=rt),et[tt]=rt,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(_){const{view:et,resolution:tt}=this.renderer;this.setTargetElement(et),this.resolution=tt,go._defaultEventMode=_.eventMode??"auto",Object.assign(this.features,_.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(_){this.resolution=_}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(_){_=_||"default";let et=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(et=!1),this.currentCursor===_)return;this.currentCursor=_;const tt=this.cursorStyles[_];if(tt)switch(typeof tt){case"string":et&&(this.domElement.style.cursor=tt);break;case"function":tt(_);break;case"object":et&&Object.assign(this.domElement.style,tt);break}else et&&typeof _=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,_)&&(this.domElement.style.cursor=_)}get pointer(){return this.rootPointerEvent}onPointerDown(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const et=this.normalizeToPointerData(_);this.autoPreventDefault&&et[0].isNormalized&&(_.cancelable||!("cancelable"in _))&&_.preventDefault();for(let tt=0,rt=et.length;tt<rt;tt++){const nt=et[tt],ot=this.bootstrapEvent(this.rootPointerEvent,nt);this.rootBoundary.mapEvent(ot)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(_){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,EventsTicker.pointerMoved();const et=this.normalizeToPointerData(_);for(let tt=0,rt=et.length;tt<rt;tt++){const nt=this.bootstrapEvent(this.rootPointerEvent,et[tt]);this.rootBoundary.mapEvent(nt)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let et=_.target;_.composedPath&&_.composedPath().length>0&&(et=_.composedPath()[0]);const tt=et!==this.domElement?"outside":"",rt=this.normalizeToPointerData(_);for(let nt=0,ot=rt.length;nt<ot;nt++){const at=this.bootstrapEvent(this.rootPointerEvent,rt[nt]);at.type+=tt,this.rootBoundary.mapEvent(at)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const et=this.normalizeToPointerData(_);for(let tt=0,rt=et.length;tt<rt;tt++){const nt=this.bootstrapEvent(this.rootPointerEvent,et[tt]);this.rootBoundary.mapEvent(nt)}this.setCursor(this.rootBoundary.cursor)}onWheel(_){if(!this.features.wheel)return;const et=this.normalizeWheelEvent(_);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(et)}setTargetElement(_){this.removeEvents(),this.domElement=_,EventsTicker.domElement=_,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;EventsTicker.addTickerListener();const _=this.domElement.style;_&&(globalThis.navigator.msPointerEnabled?(_.msContentZooming="none",_.msTouchAction="none"):this.supportsPointerEvents&&(_.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;EventsTicker.removeTickerListener();const _=this.domElement.style;globalThis.navigator.msPointerEnabled?(_.msContentZooming="",_.msTouchAction=""):this.supportsPointerEvents&&(_.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(_,et,tt){const rt=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},nt=1/this.resolution;_.x=(et-rt.left)*(this.domElement.width/rt.width)*nt,_.y=(tt-rt.top)*(this.domElement.height/rt.height)*nt}normalizeToPointerData(_){const et=[];if(this.supportsTouchEvents&&_ instanceof TouchEvent)for(let tt=0,rt=_.changedTouches.length;tt<rt;tt++){const nt=_.changedTouches[tt];typeof nt.button>"u"&&(nt.button=0),typeof nt.buttons>"u"&&(nt.buttons=1),typeof nt.isPrimary>"u"&&(nt.isPrimary=_.touches.length===1&&_.type==="touchstart"),typeof nt.width>"u"&&(nt.width=nt.radiusX||1),typeof nt.height>"u"&&(nt.height=nt.radiusY||1),typeof nt.tiltX>"u"&&(nt.tiltX=0),typeof nt.tiltY>"u"&&(nt.tiltY=0),typeof nt.pointerType>"u"&&(nt.pointerType="touch"),typeof nt.pointerId>"u"&&(nt.pointerId=nt.identifier||0),typeof nt.pressure>"u"&&(nt.pressure=nt.force||.5),typeof nt.twist>"u"&&(nt.twist=0),typeof nt.tangentialPressure>"u"&&(nt.tangentialPressure=0),typeof nt.layerX>"u"&&(nt.layerX=nt.offsetX=nt.clientX),typeof nt.layerY>"u"&&(nt.layerY=nt.offsetY=nt.clientY),nt.isNormalized=!0,nt.type=_.type,et.push(nt)}else if(!globalThis.MouseEvent||_ instanceof MouseEvent&&(!this.supportsPointerEvents||!(_ instanceof globalThis.PointerEvent))){const tt=_;typeof tt.isPrimary>"u"&&(tt.isPrimary=!0),typeof tt.width>"u"&&(tt.width=1),typeof tt.height>"u"&&(tt.height=1),typeof tt.tiltX>"u"&&(tt.tiltX=0),typeof tt.tiltY>"u"&&(tt.tiltY=0),typeof tt.pointerType>"u"&&(tt.pointerType="mouse"),typeof tt.pointerId>"u"&&(tt.pointerId=MOUSE_POINTER_ID),typeof tt.pressure>"u"&&(tt.pressure=.5),typeof tt.twist>"u"&&(tt.twist=0),typeof tt.tangentialPressure>"u"&&(tt.tangentialPressure=0),tt.isNormalized=!0,et.push(tt)}else et.push(_);return et}normalizeWheelEvent(_){const et=this.rootWheelEvent;return this.transferMouseData(et,_),et.deltaX=_.deltaX,et.deltaY=_.deltaY,et.deltaZ=_.deltaZ,et.deltaMode=_.deltaMode,this.mapPositionToPoint(et.screen,_.clientX,_.clientY),et.global.copyFrom(et.screen),et.offset.copyFrom(et.screen),et.nativeEvent=_,et.type=_.type,et}bootstrapEvent(_,et){return _.originalEvent=null,_.nativeEvent=et,_.pointerId=et.pointerId,_.width=et.width,_.height=et.height,_.isPrimary=et.isPrimary,_.pointerType=et.pointerType,_.pressure=et.pressure,_.tangentialPressure=et.tangentialPressure,_.tiltX=et.tiltX,_.tiltY=et.tiltY,_.twist=et.twist,this.transferMouseData(_,et),this.mapPositionToPoint(_.screen,et.clientX,et.clientY),_.global.copyFrom(_.screen),_.offset.copyFrom(_.screen),_.isTrusted=et.isTrusted,_.type==="pointerleave"&&(_.type="pointerout"),_.type.startsWith("mouse")&&(_.type=_.type.replace("mouse","pointer")),_.type.startsWith("touch")&&(_.type=TOUCH_TO_POINTER[_.type]||_.type),_}transferMouseData(_,et){_.isTrusted=et.isTrusted,_.srcElement=et.srcElement,_.timeStamp=performance.now(),_.type=et.type,_.altKey=et.altKey,_.button=et.button,_.buttons=et.buttons,_.client.x=et.clientX,_.client.y=et.clientY,_.ctrlKey=et.ctrlKey,_.metaKey=et.metaKey,_.movement.x=et.movementX,_.movement.y=et.movementY,_.page.x=et.pageX,_.page.y=et.pageY,_.relatedTarget=null,_.shiftKey=et.shiftKey}};_EventSystem.extension={name:"events",type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem]},_EventSystem.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let EventSystem=_EventSystem;extensions$1.add(EventSystem);function convertEventModeToInteractiveMode(_e){return _e==="dynamic"||_e==="static"}const FederatedDisplayObject={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??convertEventModeToInteractiveMode(EventSystem.defaultEventMode)},set interactive(_e){deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=_e,this.eventMode=_e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??EventSystem.defaultEventMode},set eventMode(_e){this._internalInteractive=convertEventModeToInteractiveMode(_e),this._internalEventMode=_e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(_e,_,et){const tt=typeof et=="boolean"&&et||typeof et=="object"&&et.capture,rt=typeof et=="object"?et.signal:void 0,nt=typeof et=="object"?et.once===!0:!1,ot=typeof _=="function"?void 0:_;_e=tt?`${_e}capture`:_e;const at=typeof _=="function"?_:_.handleEvent,lt=this;rt&&rt.addEventListener("abort",()=>{lt.off(_e,at,ot)}),nt?lt.once(_e,at,ot):lt.on(_e,at,ot)},removeEventListener(_e,_,et){const tt=typeof et=="boolean"&&et||typeof et=="object"&&et.capture,rt=typeof _=="function"?void 0:_;_e=tt?`${_e}capture`:_e,_=typeof _=="function"?_:_.handleEvent,this.off(_e,_,rt)},dispatchEvent(_e){if(!(_e instanceof FederatedEvent))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return _e.defaultPrevented=!1,_e.path=null,_e.target=this,_e.manager.dispatchEvent(_e),!_e.defaultPrevented}};DisplayObject.mixin(FederatedDisplayObject);const accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};DisplayObject.mixin(accessibleTarget);const KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2;class AccessibilityManager{constructor(_){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile.tablet||isMobile.phone)&&this.createTouchHook();const et=document.createElement("div");et.style.width=`${DIV_TOUCH_SIZE}px`,et.style.height=`${DIV_TOUCH_SIZE}px`,et.style.position="absolute",et.style.top=`${DIV_TOUCH_POS_X}px`,et.style.left=`${DIV_TOUCH_POS_Y}px`,et.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=et,this.renderer=_,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const _=document.createElement("button");_.style.width=`${DIV_HOOK_SIZE}px`,_.style.height=`${DIV_HOOK_SIZE}px`,_.style.position="absolute",_.style.top=`${DIV_HOOK_POS_X}px`,_.style.left=`${DIV_HOOK_POS_Y}px`,_.style.zIndex=DIV_HOOK_ZINDEX.toString(),_.style.backgroundColor="#FF0000",_.title="select to enable accessibility for this content",_.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(_),this._hookDiv=_}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var _;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(_=this.renderer.view.parentNode)==null||_.appendChild(this.div))}deactivate(){var _;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(_=this.div.parentNode)==null||_.removeChild(this.div))}updateAccessibleObjects(_){if(!_.visible||!_.accessibleChildren)return;_.accessible&&_.isInteractive()&&(_._accessibleActive||this.addChild(_),_.renderId=this.renderId);const et=_.children;if(et)for(let tt=0;tt<et.length;tt++)this.updateAccessibleObjects(et[tt])}update(){const _=performance.now();if(isMobile.android.device&&_<this.androidUpdateCount||(this.androidUpdateCount=_+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:et,y:tt,width:rt,height:nt}=this.renderer.view.getBoundingClientRect(),{width:ot,height:at,resolution:lt}=this.renderer,ct=rt/ot*lt,dt=nt/at*lt;let st=this.div;st.style.left=`${et}px`,st.style.top=`${tt}px`,st.style.width=`${ot}px`,st.style.height=`${at}px`;for(let it=0;it<this.children.length;it++){const ut=this.children[it];if(ut.renderId!==this.renderId)ut._accessibleActive=!1,removeItems(this.children,it,1),this.div.removeChild(ut._accessibleDiv),this.pool.push(ut._accessibleDiv),ut._accessibleDiv=null,it--;else{st=ut._accessibleDiv;let ht=ut.hitArea;const ft=ut.worldTransform;ut.hitArea?(st.style.left=`${(ft.tx+ht.x*ft.a)*ct}px`,st.style.top=`${(ft.ty+ht.y*ft.d)*dt}px`,st.style.width=`${ht.width*ft.a*ct}px`,st.style.height=`${ht.height*ft.d*dt}px`):(ht=ut.getBounds(),this.capHitArea(ht),st.style.left=`${ht.x*ct}px`,st.style.top=`${ht.y*dt}px`,st.style.width=`${ht.width*ct}px`,st.style.height=`${ht.height*dt}px`,st.title!==ut.accessibleTitle&&ut.accessibleTitle!==null&&(st.title=ut.accessibleTitle),st.getAttribute("aria-label")!==ut.accessibleHint&&ut.accessibleHint!==null&&st.setAttribute("aria-label",ut.accessibleHint)),(ut.accessibleTitle!==st.title||ut.tabIndex!==st.tabIndex)&&(st.title=ut.accessibleTitle,st.tabIndex=ut.tabIndex,this.debug&&this.updateDebugHTML(st))}}this.renderId++}updateDebugHTML(_){_.innerHTML=`type: ${_.type}</br> title : ${_.title}</br> tabIndex: ${_.tabIndex}`}capHitArea(_){_.x<0&&(_.width+=_.x,_.x=0),_.y<0&&(_.height+=_.y,_.y=0);const{width:et,height:tt}=this.renderer;_.x+_.width>et&&(_.width=et-_.x),_.y+_.height>tt&&(_.height=tt-_.y)}addChild(_){let et=this.pool.pop();et||(et=document.createElement("button"),et.style.width=`${DIV_TOUCH_SIZE}px`,et.style.height=`${DIV_TOUCH_SIZE}px`,et.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",et.style.position="absolute",et.style.zIndex=DIV_TOUCH_ZINDEX.toString(),et.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?et.setAttribute("aria-live","off"):et.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?et.setAttribute("aria-relevant","additions"):et.setAttribute("aria-relevant","text"),et.addEventListener("click",this._onClick.bind(this)),et.addEventListener("focus",this._onFocus.bind(this)),et.addEventListener("focusout",this._onFocusOut.bind(this))),et.style.pointerEvents=_.accessiblePointerEvents,et.type=_.accessibleType,_.accessibleTitle&&_.accessibleTitle!==null?et.title=_.accessibleTitle:(!_.accessibleHint||_.accessibleHint===null)&&(et.title=`displayObject ${_.tabIndex}`),_.accessibleHint&&_.accessibleHint!==null&&et.setAttribute("aria-label",_.accessibleHint),this.debug&&this.updateDebugHTML(et),_._accessibleActive=!0,_._accessibleDiv=et,et.displayObject=_,this.children.push(_),this.div.appendChild(_._accessibleDiv),_._accessibleDiv.tabIndex=_.tabIndex}_dispatchEvent(_,et){const{displayObject:tt}=_.target,rt=this.renderer.events.rootBoundary,nt=Object.assign(new FederatedEvent(rt),{target:tt});rt.rootTarget=this.renderer.lastObjectRendered,et.forEach(ot=>rt.dispatchEvent(nt,ot))}_onClick(_){this._dispatchEvent(_,["click","pointertap","tap"])}_onFocus(_){_.target.getAttribute("aria-live")||_.target.setAttribute("aria-live","assertive"),this._dispatchEvent(_,["mouseover"])}_onFocusOut(_){_.target.getAttribute("aria-live")||_.target.setAttribute("aria-live","polite"),this._dispatchEvent(_,["mouseout"])}_onKeyDown(_){_.keyCode===KEY_CODE_TAB&&this.activate()}_onMouseMove(_){_.movementX===0&&_.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}AccessibilityManager.extension={name:"accessibility",type:[ExtensionType.RendererPlugin,ExtensionType.CanvasRendererPlugin]};extensions$1.add(AccessibilityManager);const _Application=class mo{constructor(_){this.stage=new Container,_=Object.assign({forceCanvas:!1},_),this.renderer=autoDetectRenderer(_),mo._plugins.forEach(et=>{et.init.call(this,_)})}render(){this.renderer.render(this.stage)}get view(){var _;return(_=this.renderer)==null?void 0:_.view}get screen(){var _;return(_=this.renderer)==null?void 0:_.screen}destroy(_,et){const tt=mo._plugins.slice(0);tt.reverse(),tt.forEach(rt=>{rt.destroy.call(this)}),this.stage.destroy(et),this.stage=null,this.renderer.destroy(_),this.renderer=null}};_Application._plugins=[];let Application=_Application;extensions$1.handleByList(ExtensionType.Application,Application._plugins);class ResizePlugin{static init(_){Object.defineProperty(this,"resizeTo",{set(et){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=et,et&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let et,tt;if(this._resizeTo===globalThis.window)et=globalThis.innerWidth,tt=globalThis.innerHeight;else{const{clientWidth:rt,clientHeight:nt}=this._resizeTo;et=rt,tt=nt}this.renderer.resize(et,tt),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=_.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}ResizePlugin.extension=ExtensionType.Application;extensions$1.add(ResizePlugin);const assetKeyMap={loader:ExtensionType.LoadParser,resolver:ExtensionType.ResolveParser,cache:ExtensionType.CacheParser,detection:ExtensionType.DetectionParser};extensions$1.handle(ExtensionType.Asset,_e=>{const _=_e.ref;Object.entries(assetKeyMap).filter(([et])=>!!_[et]).forEach(([et,tt])=>extensions$1.add(Object.assign(_[et],{extension:_[et].extension??tt})))},_e=>{const _=_e.ref;Object.keys(assetKeyMap).filter(et=>!!_[et]).forEach(et=>extensions$1.remove(_[et]))});class BackgroundLoader{constructor(_,et=!1){this._loader=_,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=et}add(_){_.forEach(et=>{this._assetList.push(et)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const _=[],et=Math.min(this._assetList.length,this._maxConcurrent);for(let tt=0;tt<et;tt++)_.push(this._assetList.pop());await this._loader.load(_),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(_){this._isActive!==_&&(this._isActive=_,_&&!this._isLoading&&this._next())}}function checkDataUrl(_e,_){if(Array.isArray(_)){for(const et of _)if(_e.startsWith(`data:${et}`))return!0;return!1}return _e.startsWith(`data:${_}`)}function checkExtension(_e,_){const et=_e.split("?")[0],tt=path.extname(et).toLowerCase();return Array.isArray(_)?_.includes(tt):tt===_}const convertToList=(_e,_,et=!1)=>(Array.isArray(_e)||(_e=[_e]),_?_e.map(tt=>typeof tt=="string"||et?_(tt):tt):_e),copySearchParams=(_e,_)=>{const et=_.split("?")[1];return et&&(_e+=`?${et}`),_e};function processX(_e,_,et,tt,rt){const nt=_[et];for(let ot=0;ot<nt.length;ot++){const at=nt[ot];et<_.length-1?processX(_e.replace(tt[et],at),_,et+1,tt,rt):rt.push(_e.replace(tt[et],at))}}function createStringVariations(_e){const _=/\{(.*?)\}/g,et=_e.match(_),tt=[];if(et){const rt=[];et.forEach(nt=>{const ot=nt.substring(1,nt.length-1).split(",");rt.push(ot)}),processX(_e,rt,0,et,tt)}else tt.push(_e);return tt}const isSingleItem=_e=>!Array.isArray(_e);class CacheClass{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(_){return this._cache.has(_)}get(_){const et=this._cache.get(_);return et||console.warn(`[Assets] Asset id ${_} was not found in the Cache`),et}set(_,et){const tt=convertToList(_);let rt;for(let at=0;at<this.parsers.length;at++){const lt=this.parsers[at];if(lt.test(et)){rt=lt.getCacheableAssets(tt,et);break}}rt||(rt={},tt.forEach(at=>{rt[at]=et}));const nt=Object.keys(rt),ot={cacheKeys:nt,keys:tt};if(tt.forEach(at=>{this._cacheMap.set(at,ot)}),nt.forEach(at=>{this._cache.has(at)&&this._cache.get(at)!==et&&console.warn("[Cache] already has key:",at),this._cache.set(at,rt[at])}),et instanceof Texture){const at=et;tt.forEach(lt=>{at.baseTexture!==Texture.EMPTY.baseTexture&&BaseTexture.addToCache(at.baseTexture,lt),Texture.addToCache(at,lt)})}}remove(_){if(!this._cacheMap.has(_)){console.warn(`[Assets] Asset id ${_} was not found in the Cache`);return}const et=this._cacheMap.get(_);et.cacheKeys.forEach(tt=>{this._cache.delete(tt)}),et.keys.forEach(tt=>{this._cacheMap.delete(tt)})}get parsers(){return this._parsers}}const Cache=new CacheClass;class Loader{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(_,et,tt)=>(this._parsersValidated=!1,_[et]=tt,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(_,et){const tt={promise:null,parser:null};return tt.promise=(async()=>{var ot,at;let rt=null,nt=null;if(et.loadParser&&(nt=this._parserHash[et.loadParser],nt||console.warn(`[Assets] specified load parser "${et.loadParser}" not found while loading ${_}`)),!nt){for(let lt=0;lt<this.parsers.length;lt++){const ct=this.parsers[lt];if(ct.load&&((ot=ct.test)!=null&&ot.call(ct,_,et,this))){nt=ct;break}}if(!nt)return console.warn(`[Assets] ${_} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}rt=await nt.load(_,et,this),tt.parser=nt;for(let lt=0;lt<this.parsers.length;lt++){const ct=this.parsers[lt];ct.parse&&ct.parse&&await((at=ct.testParse)==null?void 0:at.call(ct,rt,et,this))&&(rt=await ct.parse(rt,et,this)||rt,tt.parser=ct)}return rt})(),tt}async load(_,et){this._parsersValidated||this._validateParsers();let tt=0;const rt={},nt=isSingleItem(_),ot=convertToList(_,ct=>({alias:[ct],src:ct})),at=ot.length,lt=ot.map(async ct=>{const dt=path.toAbsolute(ct.src);if(!rt[ct.src])try{this.promiseCache[dt]||(this.promiseCache[dt]=this._getLoadPromiseAndParser(dt,ct)),rt[ct.src]=await this.promiseCache[dt].promise,et&&et(++tt/at)}catch(st){throw delete this.promiseCache[dt],delete rt[ct.src],new Error(`[Loader.load] Failed to load ${dt}.
${st}`)}});return await Promise.all(lt),nt?rt[ot[0].src]:rt}async unload(_){const et=convertToList(_,tt=>({alias:[tt],src:tt})).map(async tt=>{var ot,at;const rt=path.toAbsolute(tt.src),nt=this.promiseCache[rt];if(nt){const lt=await nt.promise;delete this.promiseCache[rt],(at=(ot=nt.parser)==null?void 0:ot.unload)==null||at.call(ot,lt,tt,this)}});await Promise.all(et)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(_=>_.name).reduce((_,et)=>(_[et.name]&&console.warn(`[Assets] loadParser name conflict "${et.name}"`),{..._,[et.name]:et}),{})}}var LoaderParserPriority=(_e=>(_e[_e.Low=0]="Low",_e[_e.Normal=1]="Normal",_e[_e.High=2]="High",_e))(LoaderParserPriority||{});const validJSONExtension=".json",validJSONMIME="application/json",loadJson={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadJson",test(_e){return checkDataUrl(_e,validJSONMIME)||checkExtension(_e,validJSONExtension)},async load(_e){return await(await settings.ADAPTER.fetch(_e)).json()}};extensions$1.add(loadJson);const validTXTExtension=".txt",validTXTMIME="text/plain",loadTxt={name:"loadTxt",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},test(_e){return checkDataUrl(_e,validTXTMIME)||checkExtension(_e,validTXTExtension)},async load(_e){return await(await settings.ADAPTER.fetch(_e)).text()}};extensions$1.add(loadTxt);const validWeights=["normal","bold","100","200","300","400","500","600","700","800","900"],validFontExtensions=[".ttf",".otf",".woff",".woff2"],validFontMIMEs=["font/ttf","font/otf","font/woff","font/woff2"],CSS_IDENT_TOKEN_REGEX=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function getFontFamilyName(_e){const _=path.extname(_e),et=path.basename(_e,_).replace(/(-|_)/g," ").toLowerCase().split(" ").map(nt=>nt.charAt(0).toUpperCase()+nt.slice(1));let tt=et.length>0;for(const nt of et)if(!nt.match(CSS_IDENT_TOKEN_REGEX)){tt=!1;break}let rt=et.join(" ");return tt||(rt=`"${rt.replace(/[\\"]/g,"\\$&")}"`),rt}const validURICharactersRegex=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function encodeURIWhenNeeded(_e){return validURICharactersRegex.test(_e)?_e:encodeURI(_e)}const loadWebFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadWebFont",test(_e){return checkDataUrl(_e,validFontMIMEs)||checkExtension(_e,validFontExtensions)},async load(_e,_){var tt,rt,nt;const et=settings.ADAPTER.getFontFaceSet();if(et){const ot=[],at=((tt=_.data)==null?void 0:tt.family)??getFontFamilyName(_e),lt=((nt=(rt=_.data)==null?void 0:rt.weights)==null?void 0:nt.filter(dt=>validWeights.includes(dt)))??["normal"],ct=_.data??{};for(let dt=0;dt<lt.length;dt++){const st=lt[dt],it=new FontFace(at,`url(${encodeURIWhenNeeded(_e)})`,{...ct,weight:st});await it.load(),et.add(it),ot.push(it)}return ot.length===1?ot[0]:ot}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(_e){(Array.isArray(_e)?_e:[_e]).forEach(_=>settings.ADAPTER.getFontFaceSet().delete(_))}};extensions$1.add(loadWebFont);const WORKER_CODE$1=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let WORKER_URL$1=null,WorkerInstance$1=class{constructor(){WORKER_URL$1||(WORKER_URL$1=URL.createObjectURL(new Blob([WORKER_CODE$1],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL$1)}};WorkerInstance$1.revokeObjectURL=function(){WORKER_URL$1&&(URL.revokeObjectURL(WORKER_URL$1),WORKER_URL$1=null)};const WORKER_CODE=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let WORKER_URL=null;class WorkerInstance{constructor(){WORKER_URL||(WORKER_URL=URL.createObjectURL(new Blob([WORKER_CODE],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL)}}WorkerInstance.revokeObjectURL=function(){WORKER_URL&&(URL.revokeObjectURL(WORKER_URL),WORKER_URL=null)};let UUID=0,MAX_WORKERS;class WorkerManagerClass{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(_=>{const{worker:et}=new WorkerInstance$1;et.addEventListener("message",tt=>{et.terminate(),WorkerInstance$1.revokeObjectURL(),_(tt.data)})}),this._isImageBitmapSupported)}loadImageBitmap(_){return this._run("loadImageBitmap",[_])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){MAX_WORKERS===void 0&&(MAX_WORKERS=navigator.hardwareConcurrency||4);let _=this.workerPool.pop();return!_&&this._createdWorkers<MAX_WORKERS&&(this._createdWorkers++,_=new WorkerInstance().worker,_.addEventListener("message",et=>{this.complete(et.data),this.returnWorker(et.target),this.next()})),_}returnWorker(_){this.workerPool.push(_)}complete(_){_.error!==void 0?this.resolveHash[_.uuid].reject(_.error):this.resolveHash[_.uuid].resolve(_.data),this.resolveHash[_.uuid]=null}async _run(_,et){await this._initWorkers();const tt=new Promise((rt,nt)=>{this.queue.push({id:_,arguments:et,resolve:rt,reject:nt})});return this.next(),tt}next(){if(!this.queue.length)return;const _=this.getWorker();if(!_)return;const et=this.queue.pop(),tt=et.id;this.resolveHash[UUID]={resolve:et.resolve,reject:et.reject},_.postMessage({data:et.arguments,uuid:UUID++,id:tt})}}const WorkerManager=new WorkerManagerClass;function createTexture$1(_e,_,et){_e.resource.internal=!0;const tt=new Texture(_e),rt=()=>{delete _.promiseCache[et],Cache.has(et)&&Cache.remove(et)};return tt.baseTexture.once("destroyed",()=>{et in _.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),rt())}),tt.once("destroyed",()=>{_e.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),rt())}),tt}const validImageExtensions=[".jpeg",".jpg",".png",".webp",".avif"],validImageMIMEs=["image/jpeg","image/png","image/webp","image/avif"];async function loadImageBitmap(_e){const _=await settings.ADAPTER.fetch(_e);if(!_.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${_e}: ${_.status} ${_.statusText}`);const et=await _.blob();return await createImageBitmap(et)}const loadTextures={name:"loadTextures",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(_e){return checkDataUrl(_e,validImageMIMEs)||checkExtension(_e,validImageExtensions)},async load(_e,_,et){var at;const tt=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let rt;tt?this.config.preferWorkers&&await WorkerManager.isImageBitmapSupported()?rt=await WorkerManager.loadImageBitmap(_e):rt=await loadImageBitmap(_e):rt=await new Promise((lt,ct)=>{const dt=new Image;dt.crossOrigin=this.config.crossOrigin,dt.src=_e,dt.complete?lt(dt):(dt.onload=()=>lt(dt),dt.onerror=st=>ct(st))});const nt={..._.data};nt.resolution??(nt.resolution=getResolutionOfUrl(_e)),tt&&((at=nt.resourceOptions)==null?void 0:at.ownsImageBitmap)===void 0&&(nt.resourceOptions={...nt.resourceOptions},nt.resourceOptions.ownsImageBitmap=!0);const ot=new BaseTexture(rt,nt);return ot.resource.src=_e,createTexture$1(ot,et,_e)},unload(_e){_e.destroy(!0)}};extensions$1.add(loadTextures);const validSVGExtension=".svg",validSVGMIME="image/svg+xml",loadSVG={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadSVG",test(_e){return checkDataUrl(_e,validSVGMIME)||checkExtension(_e,validSVGExtension)},async testParse(_e){return SVGResource.test(_e)},async parse(_e,_,et){var nt;const tt=new SVGResource(_e,(nt=_==null?void 0:_.data)==null?void 0:nt.resourceOptions);await tt.load();const rt=new BaseTexture(tt,{resolution:getResolutionOfUrl(_e),..._==null?void 0:_.data});return rt.resource.src=_.src,createTexture$1(rt,et,_.src)},async load(_e,_){return(await settings.ADAPTER.fetch(_e)).text()},unload:loadTextures.unload};extensions$1.add(loadSVG);const validVideoExtensions=[".mp4",".m4v",".webm",".ogv"],validVideoMIMEs=["video/mp4","video/webm","video/ogg"],loadVideo={name:"loadVideo",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(_e){return checkDataUrl(_e,validVideoMIMEs)||checkExtension(_e,validVideoExtensions)},async load(_e,_,et){var ot;let tt;const rt=await(await settings.ADAPTER.fetch(_e)).blob(),nt=URL.createObjectURL(rt);try{const at={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(ot=_==null?void 0:_.data)==null?void 0:ot.resourceOptions,autoLoad:!0},lt=new VideoResource(nt,at);await lt.load();const ct=new BaseTexture(lt,{alphaMode:await detectVideoAlphaMode(),resolution:getResolutionOfUrl(_e),..._==null?void 0:_.data});ct.resource.src=_e,tt=createTexture$1(ct,et,_e),tt.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(nt)})}catch(at){throw URL.revokeObjectURL(nt),at}return tt},unload(_e){_e.destroy(!0)}};extensions$1.add(loadVideo);class Resolver{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(_,et)=>`${_}${this._bundleIdConnector}${et}`,extractAssetIdFromBundle:(_,et)=>et.replace(`${_}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(_){if(this._bundleIdConnector=_.connector??this._bundleIdConnector,this._createBundleAssetId=_.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=_.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(..._){_.forEach(et=>{this._preferredOrder.push(et),et.priority||(et.priority=Object.keys(et.params))}),this._resolverHash={}}set basePath(_){this._basePath=_}get basePath(){return this._basePath}set rootPath(_){this._rootPath=_}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(_){if(typeof _=="string")this._defaultSearchParams=_;else{const et=_;this._defaultSearchParams=Object.keys(et).map(tt=>`${encodeURIComponent(tt)}=${encodeURIComponent(et[tt])}`).join("&")}}getAlias(_){const{alias:et,name:tt,src:rt,srcs:nt}=_;return convertToList(et||tt||rt||nt,ot=>typeof ot=="string"?ot:Array.isArray(ot)?ot.map(at=>(at==null?void 0:at.src)??(at==null?void 0:at.srcs)??at):ot!=null&&ot.src||ot!=null&&ot.srcs?ot.src??ot.srcs:ot,!0)}addManifest(_){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=_,_.bundles.forEach(et=>{this.addBundle(et.name,et.assets)})}addBundle(_,et){const tt=[];Array.isArray(et)?et.forEach(rt=>{const nt=rt.src??rt.srcs,ot=rt.alias??rt.name;let at;if(typeof ot=="string"){const lt=this._createBundleAssetId(_,ot);tt.push(lt),at=[ot,lt]}else{const lt=ot.map(ct=>this._createBundleAssetId(_,ct));tt.push(...lt),at=[...ot,...lt]}this.add({...rt,alias:at,src:nt})}):Object.keys(et).forEach(rt=>{const nt=[rt,this._createBundleAssetId(_,rt)];if(typeof et[rt]=="string")this.add({alias:nt,src:et[rt]});else if(Array.isArray(et[rt]))this.add({alias:nt,src:et[rt]});else{const ot=et[rt],at=ot.src??ot.srcs;this.add({...ot,alias:nt,src:Array.isArray(at)?at:[at]})}tt.push(...nt)}),this._bundles[_]=tt}add(_,et,tt,rt,nt){const ot=[];typeof _=="string"||Array.isArray(_)&&typeof _[0]=="string"?(deprecation("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),ot.push({alias:_,src:et,data:tt,format:rt,loadParser:nt})):Array.isArray(_)?ot.push(..._):ot.push(_);let at;at=lt=>{this.hasKey(lt)&&console.warn(`[Resolver] already has key: ${lt} overwriting`)},convertToList(ot).forEach(lt=>{const{src:ct,srcs:dt}=lt;let{data:st,format:it,loadParser:ut}=lt;const ht=convertToList(ct||dt).map(mt=>typeof mt=="string"?createStringVariations(mt):Array.isArray(mt)?mt:[mt]),ft=this.getAlias(lt);Array.isArray(ft)?ft.forEach(at):at(ft);const gt=[];ht.forEach(mt=>{mt.forEach(yt=>{let bt={};if(typeof yt!="object"){bt.src=yt;for(let vt=0;vt<this._parsers.length;vt++){const xt=this._parsers[vt];if(xt.test(yt)){bt=xt.parse(yt);break}}}else st=yt.data??st,it=yt.format??it,ut=yt.loadParser??ut,bt={...bt,...yt};if(!ft)throw new Error(`[Resolver] alias is undefined for this asset: ${bt.src}`);bt=this.buildResolvedAsset(bt,{aliases:ft,data:st,format:it,loadParser:ut}),gt.push(bt)})}),ft.forEach(mt=>{this._assetMap[mt]=gt})})}resolveBundle(_){const et=isSingleItem(_);_=convertToList(_);const tt={};return _.forEach(rt=>{const nt=this._bundles[rt];if(nt){const ot=this.resolve(nt),at={};for(const lt in ot){const ct=ot[lt];at[this._extractAssetIdFromBundle(rt,lt)]=ct}tt[rt]=at}}),et?tt[_[0]]:tt}resolveUrl(_){const et=this.resolve(_);if(typeof _!="string"){const tt={};for(const rt in et)tt[rt]=et[rt].src;return tt}return et.src}resolve(_){const et=isSingleItem(_);_=convertToList(_);const tt={};return _.forEach(rt=>{if(!this._resolverHash[rt])if(this._assetMap[rt]){let nt=this._assetMap[rt];const ot=nt[0],at=this._getPreferredOrder(nt);at==null||at.priority.forEach(lt=>{at.params[lt].forEach(ct=>{const dt=nt.filter(st=>st[lt]?st[lt]===ct:!1);dt.length&&(nt=dt)})}),this._resolverHash[rt]=nt[0]??ot}else this._resolverHash[rt]=this.buildResolvedAsset({alias:[rt],src:rt},{});tt[rt]=this._resolverHash[rt]}),et?tt[_[0]]:tt}hasKey(_){return!!this._assetMap[_]}hasBundle(_){return!!this._bundles[_]}_getPreferredOrder(_){for(let et=0;et<_.length;et++){const tt=_[0],rt=this._preferredOrder.find(nt=>nt.params.format.includes(tt.format));if(rt)return rt}return this._preferredOrder[0]}_appendDefaultSearchParams(_){if(!this._defaultSearchParams)return _;const et=/\?/.test(_)?"&":"?";return`${_}${et}${this._defaultSearchParams}`}buildResolvedAsset(_,et){const{aliases:tt,data:rt,loadParser:nt,format:ot}=et;return(this._basePath||this._rootPath)&&(_.src=path.toAbsolute(_.src,this._basePath,this._rootPath)),_.alias=tt??_.alias??[_.src],_.src=this._appendDefaultSearchParams(_.src),_.data={...rt||{},..._.data},_.loadParser=nt??_.loadParser,_.format=ot??_.format??path.extname(_.src).slice(1),_.srcs=_.src,_.name=_.alias,_}}class AssetsClass{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Resolver,this.loader=new Loader,this.cache=Cache,this._backgroundLoader=new BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(_={}){var nt,ot;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,_.defaultSearchParams&&this.resolver.setDefaultSearchParams(_.defaultSearchParams),_.basePath&&(this.resolver.basePath=_.basePath),_.bundleIdentifier&&this.resolver.setBundleIdentifier(_.bundleIdentifier),_.manifest){let at=_.manifest;typeof at=="string"&&(at=await this.load(at)),this.resolver.addManifest(at)}const et=((nt=_.texturePreference)==null?void 0:nt.resolution)??1,tt=typeof et=="number"?[et]:et,rt=await this._detectFormats({preferredFormats:(ot=_.texturePreference)==null?void 0:ot.format,skipDetections:_.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:rt,resolution:tt}}),_.preferences&&this.setPreferences(_.preferences)}add(_,et,tt,rt,nt){this.resolver.add(_,et,tt,rt,nt)}async load(_,et){this._initialized||await this.init();const tt=isSingleItem(_),rt=convertToList(_).map(at=>{if(typeof at!="string"){const lt=this.resolver.getAlias(at);return lt.some(ct=>!this.resolver.hasKey(ct))&&this.add(at),Array.isArray(lt)?lt[0]:lt}return this.resolver.hasKey(at)||this.add({alias:at,src:at}),at}),nt=this.resolver.resolve(rt),ot=await this._mapLoadToResolve(nt,et);return tt?ot[rt[0]]:ot}addBundle(_,et){this.resolver.addBundle(_,et)}async loadBundle(_,et){this._initialized||await this.init();let tt=!1;typeof _=="string"&&(tt=!0,_=[_]);const rt=this.resolver.resolveBundle(_),nt={},ot=Object.keys(rt);let at=0,lt=0;const ct=()=>{et==null||et(++at/lt)},dt=ot.map(st=>{const it=rt[st];return lt+=Object.keys(it).length,this._mapLoadToResolve(it,ct).then(ut=>{nt[st]=ut})});return await Promise.all(dt),tt?nt[_[0]]:nt}async backgroundLoad(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const et=this.resolver.resolve(_);this._backgroundLoader.add(Object.values(et))}async backgroundLoadBundle(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const et=this.resolver.resolveBundle(_);Object.values(et).forEach(tt=>{this._backgroundLoader.add(Object.values(tt))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(_){if(typeof _=="string")return Cache.get(_);const et={};for(let tt=0;tt<_.length;tt++)et[tt]=Cache.get(_[tt]);return et}async _mapLoadToResolve(_,et){const tt=Object.values(_),rt=Object.keys(_);this._backgroundLoader.active=!1;const nt=await this.loader.load(tt,et);this._backgroundLoader.active=!0;const ot={};return tt.forEach((at,lt)=>{const ct=nt[at.src],dt=[at.src];at.alias&&dt.push(...at.alias),ot[rt[lt]]=ct,Cache.set(dt,ct)}),ot}async unload(_){this._initialized||await this.init();const et=convertToList(_).map(rt=>typeof rt!="string"?rt.src:rt),tt=this.resolver.resolve(et);await this._unloadFromResolved(tt)}async unloadBundle(_){this._initialized||await this.init(),_=convertToList(_);const et=this.resolver.resolveBundle(_),tt=Object.keys(et).map(rt=>this._unloadFromResolved(et[rt]));await Promise.all(tt)}async _unloadFromResolved(_){const et=Object.values(_);et.forEach(tt=>{Cache.remove(tt.src)}),await this.loader.unload(et)}async _detectFormats(_){let et=[];_.preferredFormats&&(et=Array.isArray(_.preferredFormats)?_.preferredFormats:[_.preferredFormats]);for(const tt of _.detections)_.skipDetections||await tt.test()?et=await tt.add(et):_.skipDetections||(et=await tt.remove(et));return et=et.filter((tt,rt)=>et.indexOf(tt)===rt),et}get detections(){return this._detections}get preferWorkers(){return loadTextures.config.preferWorkers}set preferWorkers(_){deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:_})}setPreferences(_){this.loader.parsers.forEach(et=>{et.config&&Object.keys(et.config).filter(tt=>tt in _).forEach(tt=>{et.config[tt]=_[tt]})})}}const Assets=new AssetsClass;extensions$1.handleByList(ExtensionType.LoadParser,Assets.loader.parsers).handleByList(ExtensionType.ResolveParser,Assets.resolver.parsers).handleByList(ExtensionType.CacheParser,Assets.cache.parsers).handleByList(ExtensionType.DetectionParser,Assets.detections);const cacheTextureArray={extension:ExtensionType.CacheParser,test:_e=>Array.isArray(_e)&&_e.every(_=>_ instanceof Texture),getCacheableAssets:(_e,_)=>{const et={};return _e.forEach(tt=>{_.forEach((rt,nt)=>{et[tt+(nt===0?"":nt+1)]=rt})}),et}};extensions$1.add(cacheTextureArray);async function testImageFormat(_e){if("Image"in globalThis)return new Promise(_=>{const et=new Image;et.onload=()=>{_(!0)},et.onerror=()=>{_(!1)},et.src=_e});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const _=await(await fetch(_e)).blob();await createImageBitmap(_)}catch{return!1}return!0}return!1}const detectAvif={extension:{type:ExtensionType.DetectionParser,priority:1},test:async()=>testImageFormat("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async _e=>[..._e,"avif"],remove:async _e=>_e.filter(_=>_!=="avif")};extensions$1.add(detectAvif);const detectWebp={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testImageFormat("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async _e=>[..._e,"webp"],remove:async _e=>_e.filter(_=>_!=="webp")};extensions$1.add(detectWebp);const imageFormats=["png","jpg","jpeg"],detectDefaults={extension:{type:ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async _e=>[..._e,...imageFormats],remove:async _e=>_e.filter(_=>!imageFormats.includes(_))};extensions$1.add(detectDefaults);const inWorker="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function testVideoFormat(_e){return inWorker?!1:document.createElement("video").canPlayType(_e)!==""}const detectWebm={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/webm"),add:async _e=>[..._e,"webm"],remove:async _e=>_e.filter(_=>_!=="webm")};extensions$1.add(detectWebm);const detectMp4={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/mp4"),add:async _e=>[..._e,"mp4","m4v"],remove:async _e=>_e.filter(_=>_!=="mp4"&&_!=="m4v")};extensions$1.add(detectMp4);const detectOgv={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/ogg"),add:async _e=>[..._e,"ogv"],remove:async _e=>_e.filter(_=>_!=="ogv")};extensions$1.add(detectOgv);const resolveTextureUrl={extension:ExtensionType.ResolveParser,test:loadTextures.test,parse:_e=>{var _;return{resolution:parseFloat(((_=settings.RETINA_PREFIX.exec(_e))==null?void 0:_[1])??"1"),format:path.extname(_e).slice(1),src:_e}}};extensions$1.add(resolveTextureUrl);var INTERNAL_FORMATS=(_e=>(_e[_e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",_e[_e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",_e[_e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",_e[_e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",_e[_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",_e[_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",_e[_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",_e[_e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",_e[_e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",_e[_e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",_e[_e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",_e[_e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",_e[_e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",_e[_e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",_e[_e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",_e[_e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",_e[_e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",_e[_e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",_e[_e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",_e[_e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",_e[_e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",_e[_e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",_e[_e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",_e[_e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",_e[_e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",_e[_e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",_e[_e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",_e[_e.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",_e[_e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",_e[_e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",_e[_e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",_e))(INTERNAL_FORMATS||{});const INTERNAL_FORMAT_TO_BYTES_PER_PIXEL={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let storedGl,extensions;function getCompressedTextureExtensions(){extensions={bptc:storedGl.getExtension("EXT_texture_compression_bptc"),astc:storedGl.getExtension("WEBGL_compressed_texture_astc"),etc:storedGl.getExtension("WEBGL_compressed_texture_etc"),s3tc:storedGl.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:storedGl.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:storedGl.getExtension("WEBGL_compressed_texture_pvrtc")||storedGl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:storedGl.getExtension("WEBGL_compressed_texture_etc1"),atc:storedGl.getExtension("WEBGL_compressed_texture_atc")}}const detectCompressedTextures={extension:{type:ExtensionType.DetectionParser,priority:2},test:async()=>{const _e=settings.ADAPTER.createCanvas().getContext("webgl");return _e?(storedGl=_e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async _e=>{extensions||getCompressedTextureExtensions();const _=[];for(const et in extensions)extensions[et]&&_.push(et);return[..._,..._e]},remove:async _e=>(extensions||getCompressedTextureExtensions(),_e.filter(_=>!(_ in extensions)))};extensions$1.add(detectCompressedTextures);class BlobResource extends BufferResource{constructor(_,et={width:1,height:1,autoLoad:!0}){let tt,rt;typeof _=="string"?(tt=_,rt=new Uint8Array):(tt=null,rt=_),super(rt,et),this.origin=tt,this.buffer=rt?new ViewableBuffer(rt):null,this._load=null,this.loaded=!1,this.origin!==null&&et.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(_){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(_=>_.blob()).then(_=>_.arrayBuffer()).then(_=>(this.data=new Uint32Array(_),this.buffer=new ViewableBuffer(_),this.loaded=!0,this.onBlobLoaded(_),this.update(),this)),this._load)}}class CompressedTextureResource extends BlobResource{constructor(_,et){super(_,et),this.format=et.format,this.levels=et.levels||1,this._width=et.width,this._height=et.height,this._extension=CompressedTextureResource._formatToExtension(this.format),(et.levelBuffers||this.buffer)&&(this._levelBuffers=et.levelBuffers||CompressedTextureResource._createLevelBuffers(_ instanceof Uint8Array?_:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(_,et,tt){const rt=_.gl;if(!_.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;rt.pixelStorei(rt.UNPACK_ALIGNMENT,4);for(let nt=0,ot=this.levels;nt<ot;nt++){const{levelID:at,levelWidth:lt,levelHeight:ct,levelBuffer:dt}=this._levelBuffers[nt];rt.compressedTexImage2D(rt.TEXTURE_2D,at,this.format,lt,ct,0,dt)}return!0}onBlobLoaded(){this._levelBuffers=CompressedTextureResource._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(_){if(_>=33776&&_<=33779)return"s3tc";if(_>=35916&&_<=35919)return"s3tc_sRGB";if(_>=37488&&_<=37497)return"etc";if(_>=35840&&_<=35843)return"pvrtc";if(_===36196)return"etc1";if(_===35986||_===35987||_===34798)return"atc";if(_>=36492&&_<=36495)return"bptc";if(_===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${_}`)}static _createLevelBuffers(_,et,tt,rt,nt,ot,at){const lt=new Array(tt);let ct=_.byteOffset,dt=ot,st=at,it=dt+rt-1&~(rt-1),ut=st+nt-1&~(nt-1),ht=it*ut*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[et];for(let ft=0;ft<tt;ft++)lt[ft]={levelID:ft,levelWidth:tt>1?dt:it,levelHeight:tt>1?st:ut,levelBuffer:new Uint8Array(_.buffer,ct,ht)},ct+=ht,dt=dt>>1||1,st=st>>1||1,it=dt+rt-1&~(rt-1),ut=st+nt-1&~(nt-1),ht=it*ut*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[et];return lt}}const DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT={[FOURCC_DXT1]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[FOURCC_DXT3]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[FOURCC_DXT5]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT},DXGI_TO_FORMAT={70:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:INTERNAL_FORMATS.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:INTERNAL_FORMATS.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:INTERNAL_FORMATS.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function parseDDS(_e){const _=new Uint32Array(_e);if(_[0]!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");const et=new Uint32Array(_e,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),tt=et[DDS_FIELDS.HEIGHT],rt=et[DDS_FIELDS.WIDTH],nt=et[DDS_FIELDS.MIPMAP_COUNT],ot=new Uint32Array(_e,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),at=ot[PF_FLAGS];if(at&DDPF_FOURCC){const lt=ot[DDS_PF_FIELDS.FOURCC];if(lt!==FOURCC_DX10){const yt=FOURCC_TO_FORMAT[lt],bt=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,vt=new Uint8Array(_e,bt);return[new CompressedTextureResource(vt,{format:yt,width:rt,height:tt,levels:nt})]}const ct=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,dt=new Uint32Array(_.buffer,ct,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),st=dt[DDS_DX10_FIELDS.DXGI_FORMAT],it=dt[DDS_DX10_FIELDS.RESOURCE_DIMENSION],ut=dt[DDS_DX10_FIELDS.MISC_FLAG],ht=dt[DDS_DX10_FIELDS.ARRAY_SIZE],ft=DXGI_TO_FORMAT[st];if(ft===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${st}`);if(ut===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(it===6)throw new Error("DDSParser does not supported 3D texture data");const gt=new Array,mt=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(ht===1)gt.push(new Uint8Array(_e,mt));else{const yt=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[ft];let bt=0,vt=rt,xt=tt;for(let St=0;St<nt;St++){const Et=Math.max(1,vt+3&-4),_t=Math.max(1,xt+3&-4),Tt=Et*_t*yt;bt+=Tt,vt=vt>>>1,xt=xt>>>1}let wt=mt;for(let St=0;St<ht;St++)gt.push(new Uint8Array(_e,wt,bt)),wt+=bt}return gt.map(yt=>new CompressedTextureResource(yt,{format:ft,width:rt,height:tt,levels:nt}))}throw at&DDPF_RGB?new Error("DDSParser does not support uncompressed texture data."):at&DDPF_YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):at&DDPF_LUMINANCE?new Error("DDSParser does not support single-channel (lumninance) texture data!"):at&DDPF_ALPHA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT={[TYPES.UNSIGNED_BYTE]:1,[TYPES.UNSIGNED_SHORT]:2,[TYPES.INT]:4,[TYPES.UNSIGNED_INT]:4,[TYPES.FLOAT]:4,[TYPES.HALF_FLOAT]:8},FORMATS_TO_COMPONENTS={[FORMATS.RGBA]:4,[FORMATS.RGB]:3,[FORMATS.RG]:2,[FORMATS.RED]:1,[FORMATS.LUMINANCE]:1,[FORMATS.LUMINANCE_ALPHA]:2,[FORMATS.ALPHA]:1},TYPES_TO_BYTES_PER_PIXEL={[TYPES.UNSIGNED_SHORT_4_4_4_4]:2,[TYPES.UNSIGNED_SHORT_5_5_5_1]:2,[TYPES.UNSIGNED_SHORT_5_6_5]:2};function parseKTX(_e,_,et=!1){const tt=new DataView(_);if(!validate(_e,tt))return null;const rt=tt.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,nt=tt.getUint32(KTX_FIELDS.GL_TYPE,rt),ot=tt.getUint32(KTX_FIELDS.GL_FORMAT,rt),at=tt.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,rt),lt=tt.getUint32(KTX_FIELDS.PIXEL_WIDTH,rt),ct=tt.getUint32(KTX_FIELDS.PIXEL_HEIGHT,rt)||1,dt=tt.getUint32(KTX_FIELDS.PIXEL_DEPTH,rt)||1,st=tt.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,rt)||1,it=tt.getUint32(KTX_FIELDS.NUMBER_OF_FACES,rt),ut=tt.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,rt),ht=tt.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,rt);if(ct===0||dt!==1)throw new Error("Only 2D textures are supported");if(it!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(st!==1)throw new Error("WebGL does not support array textures");const ft=4,gt=4,mt=lt+3&-4,yt=ct+3&-4,bt=new Array(st);let vt=lt*ct;nt===0&&(vt=mt*yt);let xt;if(nt!==0?TYPES_TO_BYTES_PER_COMPONENT[nt]?xt=TYPES_TO_BYTES_PER_COMPONENT[nt]*FORMATS_TO_COMPONENTS[ot]:xt=TYPES_TO_BYTES_PER_PIXEL[nt]:xt=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[at],xt===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const wt=et?parseKvData(tt,ht,rt):null;let St=vt*xt,Et=lt,_t=ct,Tt=mt,Rt=yt,Ot=FILE_HEADER_SIZE+ht;for(let At=0;At<ut;At++){const Ct=tt.getUint32(Ot,rt);let $t=Ot+4;for(let Mt=0;Mt<st;Mt++){let Dt=bt[Mt];Dt||(Dt=bt[Mt]=new Array(ut)),Dt[At]={levelID:At,levelWidth:ut>1||nt!==0?Et:Tt,levelHeight:ut>1||nt!==0?_t:Rt,levelBuffer:new Uint8Array(_,$t,St)},$t+=St}Ot+=Ct+4,Ot=Ot%4!==0?Ot+4-Ot%4:Ot,Et=Et>>1||1,_t=_t>>1||1,Tt=Et+ft-1&~(ft-1),Rt=_t+gt-1&~(gt-1),St=Tt*Rt*xt}return nt!==0?{uncompressed:bt.map(At=>{let Ct=At[0].levelBuffer,$t=!1;return nt===TYPES.FLOAT?Ct=new Float32Array(At[0].levelBuffer.buffer,At[0].levelBuffer.byteOffset,At[0].levelBuffer.byteLength/4):nt===TYPES.UNSIGNED_INT?($t=!0,Ct=new Uint32Array(At[0].levelBuffer.buffer,At[0].levelBuffer.byteOffset,At[0].levelBuffer.byteLength/4)):nt===TYPES.INT&&($t=!0,Ct=new Int32Array(At[0].levelBuffer.buffer,At[0].levelBuffer.byteOffset,At[0].levelBuffer.byteLength/4)),{resource:new BufferResource(Ct,{width:At[0].levelWidth,height:At[0].levelHeight}),type:nt,format:$t?convertFormatToInteger(ot):ot}}),kvData:wt}:{compressed:bt.map(At=>new CompressedTextureResource(null,{format:at,width:lt,height:ct,levels:ut,levelBuffers:At})),kvData:wt}}function validate(_e,_){for(let et=0;et<FILE_IDENTIFIER.length;et++)if(_.getUint8(et)!==FILE_IDENTIFIER[et])return console.error(`${_e} is not a valid *.ktx file!`),!1;return!0}function convertFormatToInteger(_e){switch(_e){case FORMATS.RGBA:return FORMATS.RGBA_INTEGER;case FORMATS.RGB:return FORMATS.RGB_INTEGER;case FORMATS.RG:return FORMATS.RG_INTEGER;case FORMATS.RED:return FORMATS.RED_INTEGER;default:return _e}}function parseKvData(_e,_,et){const tt=new Map;let rt=0;for(;rt<_;){const nt=_e.getUint32(FILE_HEADER_SIZE+rt,et),ot=FILE_HEADER_SIZE+rt+4,at=3-(nt+3)%4;if(nt===0||nt>_-rt){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let lt=0;for(;lt<nt&&_e.getUint8(ot+lt)!==0;lt++);if(lt===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const ct=new TextDecoder().decode(new Uint8Array(_e.buffer,ot,lt)),dt=new DataView(_e.buffer,ot+lt+1,nt-lt-1);tt.set(ct,dt),rt+=4+nt+at}return tt}const loadDDS={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadDDS",test(_e){return checkExtension(_e,".dds")},async load(_e,_,et){const tt=await(await settings.ADAPTER.fetch(_e)).arrayBuffer(),rt=parseDDS(tt).map(nt=>{const ot=new BaseTexture(nt,{mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(_e),..._.data});return createTexture$1(ot,et,_e)});return rt.length===1?rt[0]:rt},unload(_e){Array.isArray(_e)?_e.forEach(_=>_.destroy(!0)):_e.destroy(!0)}};extensions$1.add(loadDDS);const loadKTX={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadKTX",test(_e){return checkExtension(_e,".ktx")},async load(_e,_,et){const tt=await(await settings.ADAPTER.fetch(_e)).arrayBuffer(),{compressed:rt,uncompressed:nt,kvData:ot}=parseKTX(_e,tt),at=rt??nt,lt={mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(_e),..._.data},ct=at.map(dt=>{at===nt&&Object.assign(lt,{type:dt.type,format:dt.format});const st=dt.resource??dt,it=new BaseTexture(st,lt);return it.ktxKeyValueData=ot,createTexture$1(it,et,_e)});return ct.length===1?ct[0]:ct},unload(_e){Array.isArray(_e)?_e.forEach(_=>_.destroy(!0)):_e.destroy(!0)}};extensions$1.add(loadKTX);const knownFormats=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],resolveCompressedTextureUrl={extension:ExtensionType.ResolveParser,test:_e=>{const _=path.extname(_e).slice(1);return["basis","ktx","dds"].includes(_)},parse:_e=>{var tt,rt;const _=_e.split("."),et=_.pop();if(["ktx","dds"].includes(et)){const nt=_.pop();if(knownFormats.includes(nt))return{resolution:parseFloat(((tt=settings.RETINA_PREFIX.exec(_e))==null?void 0:tt[1])??"1"),format:nt,src:_e}}return{resolution:parseFloat(((rt=settings.RETINA_PREFIX.exec(_e))==null?void 0:rt[1])??"1"),format:et,src:_e}}};extensions$1.add(resolveCompressedTextureUrl);const TEMP_RECT=new Rectangle,BYTES_PER_PIXEL=4,_Extract=class zn{constructor(_){this.renderer=_,this._rendererPremultipliedAlpha=!1}contextChange(){var et;const _=(et=this.renderer)==null?void 0:et.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(_&&_.alpha&&_.premultipliedAlpha)}async image(_,et,tt,rt){const nt=new Image;return nt.src=await this.base64(_,et,tt,rt),nt}async base64(_,et,tt,rt){const nt=this.canvas(_,rt);if(nt.toBlob!==void 0)return new Promise((ot,at)=>{nt.toBlob(lt=>{if(!lt){at(new Error("ICanvas.toBlob failed!"));return}const ct=new FileReader;ct.onload=()=>ot(ct.result),ct.onerror=at,ct.readAsDataURL(lt)},et,tt)});if(nt.toDataURL!==void 0)return nt.toDataURL(et,tt);if(nt.convertToBlob!==void 0){const ot=await nt.convertToBlob({type:et,quality:tt});return new Promise((at,lt)=>{const ct=new FileReader;ct.onload=()=>at(ct.result),ct.onerror=lt,ct.readAsDataURL(ot)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(_,et){const{pixels:tt,width:rt,height:nt,flipY:ot,premultipliedAlpha:at}=this._rawPixels(_,et);ot&&zn._flipY(tt,rt,nt),at&&zn._unpremultiplyAlpha(tt);const lt=new CanvasRenderTarget(rt,nt,1),ct=new ImageData(new Uint8ClampedArray(tt.buffer),rt,nt);return lt.context.putImageData(ct,0,0),lt.canvas}pixels(_,et){const{pixels:tt,width:rt,height:nt,flipY:ot,premultipliedAlpha:at}=this._rawPixels(_,et);return ot&&zn._flipY(tt,rt,nt),at&&zn._unpremultiplyAlpha(tt),tt}_rawPixels(_,et){const tt=this.renderer;if(!tt)throw new Error("The Extract has already been destroyed");let rt,nt=!1,ot=!1,at,lt=!1;_&&(_ instanceof RenderTexture?at=_:(at=tt.generateTexture(_,{region:et,resolution:tt.resolution,multisample:tt.multisample}),lt=!0,et&&(TEMP_RECT.width=et.width,TEMP_RECT.height=et.height,et=TEMP_RECT)));const ct=tt.gl;if(at){if(rt=at.baseTexture.resolution,et=et??at.frame,nt=!1,ot=at.baseTexture.alphaMode>0&&at.baseTexture.format===FORMATS.RGBA,!lt){tt.renderTexture.bind(at);const ut=at.framebuffer.glFramebuffers[tt.CONTEXT_UID];ut.blitFramebuffer&&tt.framebuffer.bind(ut.blitFramebuffer)}}else rt=tt.resolution,et||(et=TEMP_RECT,et.width=tt.width/rt,et.height=tt.height/rt),nt=!0,ot=this._rendererPremultipliedAlpha,tt.renderTexture.bind();const dt=Math.max(Math.round(et.width*rt),1),st=Math.max(Math.round(et.height*rt),1),it=new Uint8Array(BYTES_PER_PIXEL*dt*st);return ct.readPixels(Math.round(et.x*rt),Math.round(et.y*rt),dt,st,ct.RGBA,ct.UNSIGNED_BYTE,it),lt&&(at==null||at.destroy(!0)),{pixels:it,width:dt,height:st,flipY:nt,premultipliedAlpha:ot}}destroy(){this.renderer=null}static _flipY(_,et,tt){const rt=et<<2,nt=tt>>1,ot=new Uint8Array(rt);for(let at=0;at<nt;at++){const lt=at*rt,ct=(tt-at-1)*rt;ot.set(_.subarray(lt,lt+rt)),_.copyWithin(lt,ct,ct+rt),_.set(ot,ct)}}static _unpremultiplyAlpha(_){_ instanceof Uint8ClampedArray&&(_=new Uint8Array(_.buffer));const et=_.length;for(let tt=0;tt<et;tt+=4){const rt=_[tt+3];if(rt!==0){const nt=255.001/rt;_[tt]=_[tt]*nt+.5,_[tt+1]=_[tt+1]*nt+.5,_[tt+2]=_[tt+2]*nt+.5}}}};_Extract.extension={name:"extract",type:ExtensionType.RendererSystem};let Extract=_Extract;extensions$1.add(Extract);const buildCircle={build(_e){const _=_e.points;let et,tt,rt,nt,ot,at;if(_e.type===SHAPES.CIRC){const ht=_e.shape;et=ht.x,tt=ht.y,ot=at=ht.radius,rt=nt=0}else if(_e.type===SHAPES.ELIP){const ht=_e.shape;et=ht.x,tt=ht.y,ot=ht.width,at=ht.height,rt=nt=0}else{const ht=_e.shape,ft=ht.width/2,gt=ht.height/2;et=ht.x+ft,tt=ht.y+gt,ot=at=Math.max(0,Math.min(ht.radius,Math.min(ft,gt))),rt=ft-ot,nt=gt-at}if(!(ot>=0&&at>=0&&rt>=0&&nt>=0)){_.length=0;return}const lt=Math.ceil(2.3*Math.sqrt(ot+at)),ct=lt*8+(rt?4:0)+(nt?4:0);if(_.length=ct,ct===0)return;if(lt===0){_.length=8,_[0]=_[6]=et+rt,_[1]=_[3]=tt+nt,_[2]=_[4]=et-rt,_[5]=_[7]=tt-nt;return}let dt=0,st=lt*4+(rt?2:0)+2,it=st,ut=ct;{const ht=rt+ot,ft=nt,gt=et+ht,mt=et-ht,yt=tt+ft;if(_[dt++]=gt,_[dt++]=yt,_[--st]=yt,_[--st]=mt,nt){const bt=tt-ft;_[it++]=mt,_[it++]=bt,_[--ut]=bt,_[--ut]=gt}}for(let ht=1;ht<lt;ht++){const ft=Math.PI/2*(ht/lt),gt=rt+Math.cos(ft)*ot,mt=nt+Math.sin(ft)*at,yt=et+gt,bt=et-gt,vt=tt+mt,xt=tt-mt;_[dt++]=yt,_[dt++]=vt,_[--st]=vt,_[--st]=bt,_[it++]=bt,_[it++]=xt,_[--ut]=xt,_[--ut]=yt}{const ht=rt,ft=nt+at,gt=et+ht,mt=et-ht,yt=tt+ft,bt=tt-ft;_[dt++]=gt,_[dt++]=yt,_[--ut]=bt,_[--ut]=gt,rt&&(_[dt++]=mt,_[dt++]=yt,_[--ut]=bt,_[--ut]=mt)}},triangulate(_e,_){const et=_e.points,tt=_.points,rt=_.indices;if(et.length===0)return;let nt=tt.length/2;const ot=nt;let at,lt;if(_e.type!==SHAPES.RREC){const dt=_e.shape;at=dt.x,lt=dt.y}else{const dt=_e.shape;at=dt.x+dt.width/2,lt=dt.y+dt.height/2}const ct=_e.matrix;tt.push(_e.matrix?ct.a*at+ct.c*lt+ct.tx:at,_e.matrix?ct.b*at+ct.d*lt+ct.ty:lt),nt++,tt.push(et[0],et[1]);for(let dt=2;dt<et.length;dt+=2)tt.push(et[dt],et[dt+1]),rt.push(nt++,ot,nt);rt.push(ot+1,ot,nt)}};function fixOrientation(_e,_=!1){const et=_e.length;if(et<6)return;let tt=0;for(let rt=0,nt=_e[et-2],ot=_e[et-1];rt<et;rt+=2){const at=_e[rt],lt=_e[rt+1];tt+=(at-nt)*(lt+ot),nt=at,ot=lt}if(!_&&tt>0||_&&tt<=0){const rt=et/2;for(let nt=rt+rt%2;nt<et;nt+=2){const ot=et-nt-2,at=et-nt-1,lt=nt,ct=nt+1;[_e[ot],_e[lt]]=[_e[lt],_e[ot]],[_e[at],_e[ct]]=[_e[ct],_e[at]]}}}const buildPoly={build(_e){_e.points=_e.shape.points.slice()},triangulate(_e,_){let et=_e.points;const tt=_e.holes,rt=_.points,nt=_.indices;if(et.length>=6){fixOrientation(et,!1);const ot=[];for(let ct=0;ct<tt.length;ct++){const dt=tt[ct];fixOrientation(dt.points,!0),ot.push(et.length/2),et=et.concat(dt.points)}const at=earcut$1(et,ot,2);if(!at)return;const lt=rt.length/2;for(let ct=0;ct<at.length;ct+=3)nt.push(at[ct]+lt),nt.push(at[ct+1]+lt),nt.push(at[ct+2]+lt);for(let ct=0;ct<et.length;ct++)rt.push(et[ct])}}},buildRectangle={build(_e){const _=_e.shape,et=_.x,tt=_.y,rt=_.width,nt=_.height,ot=_e.points;ot.length=0,rt>=0&&nt>=0&&ot.push(et,tt,et+rt,tt,et+rt,tt+nt,et,tt+nt)},triangulate(_e,_){const et=_e.points,tt=_.points;if(et.length===0)return;const rt=tt.length/2;tt.push(et[0],et[1],et[2],et[3],et[6],et[7],et[4],et[5]),_.indices.push(rt,rt+1,rt+2,rt+1,rt+2,rt+3)}},buildRoundedRectangle={build(_e){buildCircle.build(_e)},triangulate(_e,_){buildCircle.triangulate(_e,_)}};var LINE_JOIN=(_e=>(_e.MITER="miter",_e.BEVEL="bevel",_e.ROUND="round",_e))(LINE_JOIN||{}),LINE_CAP=(_e=>(_e.BUTT="butt",_e.ROUND="round",_e.SQUARE="square",_e))(LINE_CAP||{});const curves={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(_e,_=20){if(!this.adaptive||!_e||isNaN(_e))return _;let et=Math.ceil(_e/this.maxLength);return et<this.minSegments?et=this.minSegments:et>this.maxSegments&&(et=this.maxSegments),et}};class ArcUtils{static curveTo(_,et,tt,rt,nt,ot){const at=ot[ot.length-2],lt=ot[ot.length-1]-et,ct=at-_,dt=rt-et,st=tt-_,it=Math.abs(lt*st-ct*dt);if(it<1e-8||nt===0)return(ot[ot.length-2]!==_||ot[ot.length-1]!==et)&&ot.push(_,et),null;const ut=lt*lt+ct*ct,ht=dt*dt+st*st,ft=lt*dt+ct*st,gt=nt*Math.sqrt(ut)/it,mt=nt*Math.sqrt(ht)/it,yt=gt*ft/ut,bt=mt*ft/ht,vt=gt*st+mt*ct,xt=gt*dt+mt*lt,wt=ct*(mt+yt),St=lt*(mt+yt),Et=st*(gt+bt),_t=dt*(gt+bt),Tt=Math.atan2(St-xt,wt-vt),Rt=Math.atan2(_t-xt,Et-vt);return{cx:vt+_,cy:xt+et,radius:nt,startAngle:Tt,endAngle:Rt,anticlockwise:ct*dt>st*lt}}static arc(_,et,tt,rt,nt,ot,at,lt,ct){const dt=at-ot,st=curves._segmentsCount(Math.abs(dt)*nt,Math.ceil(Math.abs(dt)/PI_2)*40),it=dt/(st*2),ut=it*2,ht=Math.cos(it),ft=Math.sin(it),gt=st-1,mt=gt%1/gt;for(let yt=0;yt<=gt;++yt){const bt=yt+mt*yt,vt=it+ot+ut*bt,xt=Math.cos(vt),wt=-Math.sin(vt);ct.push((ht*xt+ft*wt)*nt+tt,(ht*-wt+ft*xt)*nt+rt)}}}class BatchPart{constructor(){this.reset()}begin(_,et,tt){this.reset(),this.style=_,this.start=et,this.attribStart=tt}end(_,et){this.attribSize=et-this.attribStart,this.size=_-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class BezierUtils{static curveLength(_,et,tt,rt,nt,ot,at,lt){let ct=0,dt=0,st=0,it=0,ut=0,ht=0,ft=0,gt=0,mt=0,yt=0,bt=0,vt=_,xt=et;for(let wt=1;wt<=10;++wt)dt=wt/10,st=dt*dt,it=st*dt,ut=1-dt,ht=ut*ut,ft=ht*ut,gt=ft*_+3*ht*dt*tt+3*ut*st*nt+it*at,mt=ft*et+3*ht*dt*rt+3*ut*st*ot+it*lt,yt=vt-gt,bt=xt-mt,vt=gt,xt=mt,ct+=Math.sqrt(yt*yt+bt*bt);return ct}static curveTo(_,et,tt,rt,nt,ot,at){const lt=at[at.length-2],ct=at[at.length-1];at.length-=2;const dt=curves._segmentsCount(BezierUtils.curveLength(lt,ct,_,et,tt,rt,nt,ot));let st=0,it=0,ut=0,ht=0,ft=0;at.push(lt,ct);for(let gt=1,mt=0;gt<=dt;++gt)mt=gt/dt,st=1-mt,it=st*st,ut=it*st,ht=mt*mt,ft=ht*mt,at.push(ut*lt+3*it*mt*_+3*st*ht*tt+ft*nt,ut*ct+3*it*mt*et+3*st*ht*rt+ft*ot)}}function square(_e,_,et,tt,rt,nt,ot,at){const lt=_e-et*rt,ct=_-tt*rt,dt=_e+et*nt,st=_+tt*nt;let it,ut;ot?(it=tt,ut=-et):(it=-tt,ut=et);const ht=lt+it,ft=ct+ut,gt=dt+it,mt=st+ut;return at.push(ht,ft,gt,mt),2}function round(_e,_,et,tt,rt,nt,ot,at){const lt=et-_e,ct=tt-_;let dt=Math.atan2(lt,ct),st=Math.atan2(rt-_e,nt-_);at&&dt<st?dt+=Math.PI*2:!at&&dt>st&&(st+=Math.PI*2);let it=dt;const ut=st-dt,ht=Math.abs(ut),ft=Math.sqrt(lt*lt+ct*ct),gt=(15*ht*Math.sqrt(ft)/Math.PI>>0)+1,mt=ut/gt;if(it+=mt,at){ot.push(_e,_,et,tt);for(let yt=1,bt=it;yt<gt;yt++,bt+=mt)ot.push(_e,_,_e+Math.sin(bt)*ft,_+Math.cos(bt)*ft);ot.push(_e,_,rt,nt)}else{ot.push(et,tt,_e,_);for(let yt=1,bt=it;yt<gt;yt++,bt+=mt)ot.push(_e+Math.sin(bt)*ft,_+Math.cos(bt)*ft,_e,_);ot.push(rt,nt,_e,_)}return gt*2}function buildNonNativeLine(_e,_){const et=_e.shape;let tt=_e.points||et.points.slice();const rt=_.closePointEps;if(tt.length===0)return;const nt=_e.lineStyle,ot=new Point(tt[0],tt[1]),at=new Point(tt[tt.length-2],tt[tt.length-1]),lt=et.type!==SHAPES.POLY||et.closeStroke,ct=Math.abs(ot.x-at.x)<rt&&Math.abs(ot.y-at.y)<rt;if(lt){tt=tt.slice(),ct&&(tt.pop(),tt.pop(),at.set(tt[tt.length-2],tt[tt.length-1]));const Dt=(ot.x+at.x)*.5,Nt=(at.y+ot.y)*.5;tt.unshift(Dt,Nt),tt.push(Dt,Nt)}const dt=_.points,st=tt.length/2;let it=tt.length;const ut=dt.length/2,ht=nt.width/2,ft=ht*ht,gt=nt.miterLimit*nt.miterLimit;let mt=tt[0],yt=tt[1],bt=tt[2],vt=tt[3],xt=0,wt=0,St=-(yt-vt),Et=mt-bt,_t=0,Tt=0,Rt=Math.sqrt(St*St+Et*Et);St/=Rt,Et/=Rt,St*=ht,Et*=ht;const Ot=nt.alignment,At=(1-Ot)*2,Ct=Ot*2;lt||(nt.cap===LINE_CAP.ROUND?it+=round(mt-St*(At-Ct)*.5,yt-Et*(At-Ct)*.5,mt-St*At,yt-Et*At,mt+St*Ct,yt+Et*Ct,dt,!0)+2:nt.cap===LINE_CAP.SQUARE&&(it+=square(mt,yt,St,Et,At,Ct,!0,dt))),dt.push(mt-St*At,yt-Et*At,mt+St*Ct,yt+Et*Ct);for(let Dt=1;Dt<st-1;++Dt){mt=tt[(Dt-1)*2],yt=tt[(Dt-1)*2+1],bt=tt[Dt*2],vt=tt[Dt*2+1],xt=tt[(Dt+1)*2],wt=tt[(Dt+1)*2+1],St=-(yt-vt),Et=mt-bt,Rt=Math.sqrt(St*St+Et*Et),St/=Rt,Et/=Rt,St*=ht,Et*=ht,_t=-(vt-wt),Tt=bt-xt,Rt=Math.sqrt(_t*_t+Tt*Tt),_t/=Rt,Tt/=Rt,_t*=ht,Tt*=ht;const Nt=bt-mt,Bt=yt-vt,Ut=bt-xt,Vt=wt-vt,Jt=Nt*Ut+Bt*Vt,lr=Bt*Ut-Vt*Nt,nr=lr<0;if(Math.abs(lr)<.001*Math.abs(Jt)){dt.push(bt-St*At,vt-Et*At,bt+St*Ct,vt+Et*Ct),Jt>=0&&(nt.join===LINE_JOIN.ROUND?it+=round(bt,vt,bt-St*At,vt-Et*At,bt-_t*At,vt-Tt*At,dt,!1)+4:it+=2,dt.push(bt-_t*Ct,vt-Tt*Ct,bt+_t*At,vt+Tt*At));continue}const ir=(-St+mt)*(-Et+vt)-(-St+bt)*(-Et+yt),cr=(-_t+xt)*(-Tt+vt)-(-_t+bt)*(-Tt+wt),hr=(Nt*cr-Ut*ir)/lr,Zt=(Vt*ir-Bt*cr)/lr,Qt=(hr-bt)*(hr-bt)+(Zt-vt)*(Zt-vt),rr=bt+(hr-bt)*At,ar=vt+(Zt-vt)*At,pr=bt-(hr-bt)*Ct,ur=vt-(Zt-vt)*Ct,mr=Math.min(Nt*Nt+Bt*Bt,Ut*Ut+Vt*Vt),Or=nr?At:Ct,$r=mr+Or*Or*ft,Gr=Qt<=$r;let Br=nt.join;if(Br===LINE_JOIN.MITER&&Qt/ft>gt&&(Br=LINE_JOIN.BEVEL),Gr)switch(Br){case LINE_JOIN.MITER:{dt.push(rr,ar,pr,ur);break}case LINE_JOIN.BEVEL:{nr?dt.push(rr,ar,bt+St*Ct,vt+Et*Ct,rr,ar,bt+_t*Ct,vt+Tt*Ct):dt.push(bt-St*At,vt-Et*At,pr,ur,bt-_t*At,vt-Tt*At,pr,ur),it+=2;break}case LINE_JOIN.ROUND:{nr?(dt.push(rr,ar,bt+St*Ct,vt+Et*Ct),it+=round(bt,vt,bt+St*Ct,vt+Et*Ct,bt+_t*Ct,vt+Tt*Ct,dt,!0)+4,dt.push(rr,ar,bt+_t*Ct,vt+Tt*Ct)):(dt.push(bt-St*At,vt-Et*At,pr,ur),it+=round(bt,vt,bt-St*At,vt-Et*At,bt-_t*At,vt-Tt*At,dt,!1)+4,dt.push(bt-_t*At,vt-Tt*At,pr,ur));break}}else{switch(dt.push(bt-St*At,vt-Et*At,bt+St*Ct,vt+Et*Ct),Br){case LINE_JOIN.MITER:{nr?dt.push(pr,ur,pr,ur):dt.push(rr,ar,rr,ar),it+=2;break}case LINE_JOIN.ROUND:{nr?it+=round(bt,vt,bt+St*Ct,vt+Et*Ct,bt+_t*Ct,vt+Tt*Ct,dt,!0)+2:it+=round(bt,vt,bt-St*At,vt-Et*At,bt-_t*At,vt-Tt*At,dt,!1)+2;break}}dt.push(bt-_t*At,vt-Tt*At,bt+_t*Ct,vt+Tt*Ct),it+=2}}mt=tt[(st-2)*2],yt=tt[(st-2)*2+1],bt=tt[(st-1)*2],vt=tt[(st-1)*2+1],St=-(yt-vt),Et=mt-bt,Rt=Math.sqrt(St*St+Et*Et),St/=Rt,Et/=Rt,St*=ht,Et*=ht,dt.push(bt-St*At,vt-Et*At,bt+St*Ct,vt+Et*Ct),lt||(nt.cap===LINE_CAP.ROUND?it+=round(bt-St*(At-Ct)*.5,vt-Et*(At-Ct)*.5,bt-St*At,vt-Et*At,bt+St*Ct,vt+Et*Ct,dt,!1)+2:nt.cap===LINE_CAP.SQUARE&&(it+=square(bt,vt,St,Et,At,Ct,!1,dt)));const $t=_.indices,Mt=curves.epsilon*curves.epsilon;for(let Dt=ut;Dt<it+ut-2;++Dt)mt=dt[Dt*2],yt=dt[Dt*2+1],bt=dt[(Dt+1)*2],vt=dt[(Dt+1)*2+1],xt=dt[(Dt+2)*2],wt=dt[(Dt+2)*2+1],!(Math.abs(mt*(vt-wt)+bt*(wt-yt)+xt*(yt-vt))<Mt)&&$t.push(Dt,Dt+1,Dt+2)}function buildNativeLine(_e,_){let et=0;const tt=_e.shape,rt=_e.points||tt.points,nt=tt.type!==SHAPES.POLY||tt.closeStroke;if(rt.length===0)return;const ot=_.points,at=_.indices,lt=rt.length/2,ct=ot.length/2;let dt=ct;for(ot.push(rt[0],rt[1]),et=1;et<lt;et++)ot.push(rt[et*2],rt[et*2+1]),at.push(dt,dt+1),dt++;nt&&at.push(dt,ct)}function buildLine(_e,_){_e.lineStyle.native?buildNativeLine(_e,_):buildNonNativeLine(_e,_)}class QuadraticUtils{static curveLength(_,et,tt,rt,nt,ot){const at=_-2*tt+nt,lt=et-2*rt+ot,ct=2*tt-2*_,dt=2*rt-2*et,st=4*(at*at+lt*lt),it=4*(at*ct+lt*dt),ut=ct*ct+dt*dt,ht=2*Math.sqrt(st+it+ut),ft=Math.sqrt(st),gt=2*st*ft,mt=2*Math.sqrt(ut),yt=it/ft;return(gt*ht+ft*it*(ht-mt)+(4*ut*st-it*it)*Math.log((2*ft+yt+ht)/(yt+mt)))/(4*gt)}static curveTo(_,et,tt,rt,nt){const ot=nt[nt.length-2],at=nt[nt.length-1],lt=curves._segmentsCount(QuadraticUtils.curveLength(ot,at,_,et,tt,rt));let ct=0,dt=0;for(let st=1;st<=lt;++st){const it=st/lt;ct=ot+(_-ot)*it,dt=at+(et-at)*it,nt.push(ct+(_+(tt-_)*it-ct)*it,dt+(et+(rt-et)*it-dt)*it)}}}const FILL_COMMANDS={[SHAPES.POLY]:buildPoly,[SHAPES.CIRC]:buildCircle,[SHAPES.ELIP]:buildCircle,[SHAPES.RECT]:buildRectangle,[SHAPES.RREC]:buildRoundedRectangle},BATCH_POOL=[],DRAW_CALL_POOL=[];class GraphicsData{constructor(_,et=null,tt=null,rt=null){this.points=[],this.holes=[],this.shape=_,this.lineStyle=tt,this.fillStyle=et,this.matrix=rt,this.type=_.type}clone(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const tmpPoint=new Point,_GraphicsGeometry=class na extends BatchGeometry{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Bounds,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let _=0;_<this.drawCalls.length;_++)this.drawCalls[_].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[_]);this.drawCalls.length=0;for(let _=0;_<this.batches.length;_++){const et=this.batches[_];et.reset(),BATCH_POOL.push(et)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(_,et=null,tt=null,rt=null){const nt=new GraphicsData(_,et,tt,rt);return this.graphicsData.push(nt),this.dirty++,this}drawHole(_,et=null){if(!this.graphicsData.length)return null;const tt=new GraphicsData(_,null,null,et),rt=this.graphicsData[this.graphicsData.length-1];return tt.lineStyle=rt.lineStyle,rt.holes.push(tt),this.dirty++,this}destroy(){super.destroy();for(let _=0;_<this.graphicsData.length;++_)this.graphicsData[_].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(_){const et=this.graphicsData;for(let tt=0;tt<et.length;++tt){const rt=et[tt];if(rt.fillStyle.visible&&rt.shape&&(rt.matrix?rt.matrix.applyInverse(_,tmpPoint):tmpPoint.copyFrom(_),rt.shape.contains(tmpPoint.x,tmpPoint.y))){let nt=!1;if(rt.holes){for(let ot=0;ot<rt.holes.length;ot++)if(rt.holes[ot].shape.contains(tmpPoint.x,tmpPoint.y)){nt=!0;break}}if(!nt)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const _=this.uvs,et=this.graphicsData;let tt=null,rt=null;this.batches.length>0&&(tt=this.batches[this.batches.length-1],rt=tt.style);for(let lt=this.shapeIndex;lt<et.length;lt++){this.shapeIndex++;const ct=et[lt],dt=ct.fillStyle,st=ct.lineStyle;FILL_COMMANDS[ct.type].build(ct),ct.matrix&&this.transformPoints(ct.points,ct.matrix),(dt.visible||st.visible)&&this.processHoles(ct.holes);for(let it=0;it<2;it++){const ut=it===0?dt:st;if(!ut.visible)continue;const ht=ut.texture.baseTexture,ft=this.indices.length,gt=this.points.length/2;ht.wrapMode=WRAP_MODES.REPEAT,it===0?this.processFill(ct):this.processLine(ct);const mt=this.points.length/2-gt;mt!==0&&(tt&&!this._compareStyles(rt,ut)&&(tt.end(ft,gt),tt=null),tt||(tt=BATCH_POOL.pop()||new BatchPart,tt.begin(ut,ft,gt),this.batches.push(tt),rt=ut),this.addUvs(this.points,_,ut.texture,gt,mt,ut.matrix))}}const nt=this.indices.length,ot=this.points.length/2;if(tt&&tt.end(nt,ot),this.batches.length===0){this.batchable=!0;return}const at=ot>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&at===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=at?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(_,et){return!(!_||!et||_.texture.baseTexture!==et.texture.baseTexture||_.color+_.alpha!==et.color+et.alpha||!!_.native!=!!et.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let _=0,et=this.graphicsData.length;_<et;_++){const tt=this.graphicsData[_],rt=tt.fillStyle,nt=tt.lineStyle;if(rt&&!rt.texture.baseTexture.valid||nt&&!nt.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const _=this.batches;for(let et=0,tt=_.length;et<tt;et++){const rt=_[et];for(let nt=0;nt<rt.size;nt++){const ot=rt.start+nt;this.indicesUint16[ot]=this.indicesUint16[ot]-rt.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const _=this.batches;for(let et=0;et<_.length;et++)if(_[et].style.native)return!1;return this.points.length<na.BATCHABLE_SIZE*2}buildDrawCalls(){let _=++BaseTexture._globalBatch;for(let st=0;st<this.drawCalls.length;st++)this.drawCalls[st].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[st]);this.drawCalls.length=0;const et=this.colors,tt=this.textureIds;let rt=DRAW_CALL_POOL.pop();rt||(rt=new BatchDrawCall,rt.texArray=new BatchTextureArray),rt.texArray.count=0,rt.start=0,rt.size=0,rt.type=DRAW_MODES.TRIANGLES;let nt=0,ot=null,at=0,lt=!1,ct=DRAW_MODES.TRIANGLES,dt=0;this.drawCalls.push(rt);for(let st=0;st<this.batches.length;st++){const it=this.batches[st],ut=8,ht=it.style,ft=ht.texture.baseTexture;lt!==!!ht.native&&(lt=!!ht.native,ct=lt?DRAW_MODES.LINES:DRAW_MODES.TRIANGLES,ot=null,nt=ut,_++),ot!==ft&&(ot=ft,ft._batchEnabled!==_&&(nt===ut&&(_++,nt=0,rt.size>0&&(rt=DRAW_CALL_POOL.pop(),rt||(rt=new BatchDrawCall,rt.texArray=new BatchTextureArray),this.drawCalls.push(rt)),rt.start=dt,rt.size=0,rt.texArray.count=0,rt.type=ct),ft.touched=1,ft._batchEnabled=_,ft._batchLocation=nt,ft.wrapMode=WRAP_MODES.REPEAT,rt.texArray.elements[rt.texArray.count++]=ft,nt++)),rt.size+=it.size,dt+=it.size,at=ft._batchLocation,this.addColors(et,ht.color,ht.alpha,it.attribSize,it.attribStart),this.addTextureIds(tt,at,it.attribSize,it.attribStart)}BaseTexture._globalBatch=_,this.packAttributes()}packAttributes(){const _=this.points,et=this.uvs,tt=this.colors,rt=this.textureIds,nt=new ArrayBuffer(_.length*3*4),ot=new Float32Array(nt),at=new Uint32Array(nt);let lt=0;for(let ct=0;ct<_.length/2;ct++)ot[lt++]=_[ct*2],ot[lt++]=_[ct*2+1],ot[lt++]=et[ct*2],ot[lt++]=et[ct*2+1],at[lt++]=tt[ct],ot[lt++]=rt[ct];this._buffer.update(nt),this._indexBuffer.update(this.indicesUint16)}processFill(_){_.holes.length?buildPoly.triangulate(_,this):FILL_COMMANDS[_.type].triangulate(_,this)}processLine(_){buildLine(_,this);for(let et=0;et<_.holes.length;et++)buildLine(_.holes[et],this)}processHoles(_){for(let et=0;et<_.length;et++){const tt=_[et];FILL_COMMANDS[tt.type].build(tt),tt.matrix&&this.transformPoints(tt.points,tt.matrix)}}calculateBounds(){const _=this._bounds;_.clear(),_.addVertexData(this.points,0,this.points.length),_.pad(this.boundsPadding,this.boundsPadding)}transformPoints(_,et){for(let tt=0;tt<_.length/2;tt++){const rt=_[tt*2],nt=_[tt*2+1];_[tt*2]=et.a*rt+et.c*nt+et.tx,_[tt*2+1]=et.b*rt+et.d*nt+et.ty}}addColors(_,et,tt,rt,nt=0){const ot=Color.shared.setValue(et).toLittleEndianNumber(),at=Color.shared.setValue(ot).toPremultiplied(tt);_.length=Math.max(_.length,nt+rt);for(let lt=0;lt<rt;lt++)_[nt+lt]=at}addTextureIds(_,et,tt,rt=0){_.length=Math.max(_.length,rt+tt);for(let nt=0;nt<tt;nt++)_[rt+nt]=et}addUvs(_,et,tt,rt,nt,ot=null){let at=0;const lt=et.length,ct=tt.frame;for(;at<nt;){let st=_[(rt+at)*2],it=_[(rt+at)*2+1];if(ot){const ut=ot.a*st+ot.c*it+ot.tx;it=ot.b*st+ot.d*it+ot.ty,st=ut}at++,et.push(st/ct.width,it/ct.height)}const dt=tt.baseTexture;(ct.width<dt.width||ct.height<dt.height)&&this.adjustUvs(et,tt,lt,nt)}adjustUvs(_,et,tt,rt){const nt=et.baseTexture,ot=1e-6,at=tt+rt*2,lt=et.frame,ct=lt.width/nt.width,dt=lt.height/nt.height;let st=lt.x/lt.width,it=lt.y/lt.height,ut=Math.floor(_[tt]+ot),ht=Math.floor(_[tt+1]+ot);for(let ft=tt+2;ft<at;ft+=2)ut=Math.min(ut,Math.floor(_[ft]+ot)),ht=Math.min(ht,Math.floor(_[ft+1]+ot));st-=ut,it-=ht;for(let ft=tt;ft<at;ft+=2)_[ft]=(_[ft]+st)*ct,_[ft+1]=(_[ft+1]+it)*dt}};_GraphicsGeometry.BATCHABLE_SIZE=100;let GraphicsGeometry=_GraphicsGeometry;class FillStyle{constructor(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const _=new FillStyle;return _.color=this.color,_.alpha=this.alpha,_.texture=this.texture,_.matrix=this.matrix,_.visible=this.visible,_}reset(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class LineStyle extends FillStyle{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}clone(){const _=new LineStyle;return _.color=this.color,_.alpha=this.alpha,_.texture=this.texture,_.matrix=this.matrix,_.visible=this.visible,_.width=this.width,_.alignment=this.alignment,_.native=this.native,_.cap=this.cap,_.join=this.join,_.miterLimit=this.miterLimit,_}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}}const DEFAULT_SHADERS={},_Graphics=class ro extends Container{constructor(_=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new FillStyle,this._lineStyle=new LineStyle,this._matrix=null,this._holeMode=!1,this.state=State.for2d(),this._geometry=_||new GraphicsGeometry,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Color(16777215),this.blendMode=BLEND_MODES.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new ro(this._geometry)}set blendMode(_){this.state.blendMode=_}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(_){this._tintColor.setValue(_)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(_=null,et=0,tt,rt=.5,nt=!1){return typeof _=="number"&&(_={width:_,color:et,alpha:tt,alignment:rt,native:nt}),this.lineTextureStyle(_)}lineTextureStyle(_){const et={width:0,texture:Texture.WHITE,color:_!=null&&_.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10};_=Object.assign(et,_),this.normalizeColor(_),this.currentPath&&this.startPoly();const tt=_.width>0&&_.alpha>0;return tt?(_.matrix&&(_.matrix=_.matrix.clone(),_.matrix.invert()),Object.assign(this._lineStyle,{visible:tt},_)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const _=this.currentPath.points,et=this.currentPath.points.length;et>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(_[et-2],_[et-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(_,et){return this.startPoly(),this.currentPath.points[0]=_,this.currentPath.points[1]=et,this}lineTo(_,et){this.currentPath||this.moveTo(0,0);const tt=this.currentPath.points,rt=tt[tt.length-2],nt=tt[tt.length-1];return(rt!==_||nt!==et)&&tt.push(_,et),this}_initCurve(_=0,et=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[_,et]):this.moveTo(_,et)}quadraticCurveTo(_,et,tt,rt){this._initCurve();const nt=this.currentPath.points;return nt.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(_,et,tt,rt,nt),this}bezierCurveTo(_,et,tt,rt,nt,ot){return this._initCurve(),BezierUtils.curveTo(_,et,tt,rt,nt,ot,this.currentPath.points),this}arcTo(_,et,tt,rt,nt){this._initCurve(_,et);const ot=this.currentPath.points,at=ArcUtils.curveTo(_,et,tt,rt,nt,ot);if(at){const{cx:lt,cy:ct,radius:dt,startAngle:st,endAngle:it,anticlockwise:ut}=at;this.arc(lt,ct,dt,st,it,ut)}return this}arc(_,et,tt,rt,nt,ot=!1){if(rt===nt)return this;if(!ot&&nt<=rt?nt+=PI_2:ot&&rt<=nt&&(rt+=PI_2),nt-rt===0)return this;const at=_+Math.cos(rt)*tt,lt=et+Math.sin(rt)*tt,ct=this._geometry.closePointEps;let dt=this.currentPath?this.currentPath.points:null;if(dt){const st=Math.abs(dt[dt.length-2]-at),it=Math.abs(dt[dt.length-1]-lt);st<ct&&it<ct||dt.push(at,lt)}else this.moveTo(at,lt),dt=this.currentPath.points;return ArcUtils.arc(at,lt,_,et,tt,rt,nt,ot,dt),this}beginFill(_=0,et){return this.beginTextureFill({texture:Texture.WHITE,color:_,alpha:et})}normalizeColor(_){const et=Color.shared.setValue(_.color??0);_.color=et.toNumber(),_.alpha??(_.alpha=et.alpha)}beginTextureFill(_){const et={texture:Texture.WHITE,color:16777215,matrix:null};_=Object.assign(et,_),this.normalizeColor(_),this.currentPath&&this.startPoly();const tt=_.alpha>0;return tt?(_.matrix&&(_.matrix=_.matrix.clone(),_.matrix.invert()),Object.assign(this._fillStyle,{visible:tt},_)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(_,et,tt,rt){return this.drawShape(new Rectangle(_,et,tt,rt))}drawRoundedRect(_,et,tt,rt,nt){return this.drawShape(new RoundedRectangle(_,et,tt,rt,nt))}drawCircle(_,et,tt){return this.drawShape(new Circle(_,et,tt))}drawEllipse(_,et,tt,rt){return this.drawShape(new Ellipse(_,et,tt,rt))}drawPolygon(..._){let et,tt=!0;const rt=_[0];rt.points?(tt=rt.closeStroke,et=rt.points):Array.isArray(_[0])?et=_[0]:et=_;const nt=new Polygon(et);return nt.closeStroke=tt,this.drawShape(nt),this}drawShape(_){return this._holeMode?this._geometry.drawHole(_,this._matrix):this._geometry.drawShape(_,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const _=this._geometry.graphicsData;return _.length===1&&_[0].shape.type===SHAPES.RECT&&!_[0].matrix&&!_[0].holes.length&&!(_[0].lineStyle.visible&&_[0].lineStyle.width)}_render(_){this.finishPoly();const et=this._geometry;et.updateBatches(),et.batchable?(this.batchDirty!==et.batchDirty&&this._populateBatches(),this._renderBatched(_)):(_.batch.flush(),this._renderDirect(_))}_populateBatches(){const _=this._geometry,et=this.blendMode,tt=_.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=_.batchDirty,this.batches.length=tt,this.vertexData=new Float32Array(_.points);for(let rt=0;rt<tt;rt++){const nt=_.batches[rt],ot=nt.style.color,at=new Float32Array(this.vertexData.buffer,nt.attribStart*4*2,nt.attribSize*2),lt=new Float32Array(_.uvsFloat32.buffer,nt.attribStart*4*2,nt.attribSize*2),ct=new Uint16Array(_.indicesUint16.buffer,nt.start*2,nt.size),dt={vertexData:at,blendMode:et,indices:ct,uvs:lt,_batchRGB:Color.shared.setValue(ot).toRgbArray(),_tintRGB:ot,_texture:nt.style.texture,alpha:nt.style.alpha,worldAlpha:1};this.batches[rt]=dt}}_renderBatched(_){if(this.batches.length){_.batch.setObjectRenderer(_.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let et=0,tt=this.batches.length;et<tt;et++){const rt=this.batches[et];rt.worldAlpha=this.worldAlpha*rt.alpha,_.plugins[this.pluginName].render(rt)}}}_renderDirect(_){const et=this._resolveDirectShader(_),tt=this._geometry,rt=this.worldAlpha,nt=et.uniforms,ot=tt.drawCalls;nt.translationMatrix=this.transform.worldTransform,Color.shared.setValue(this._tintColor).premultiply(rt).toArray(nt.tint),_.shader.bind(et),_.geometry.bind(tt,et),_.state.set(this.state);for(let at=0,lt=ot.length;at<lt;at++)this._renderDrawCallDirect(_,tt.drawCalls[at])}_renderDrawCallDirect(_,et){const{texArray:tt,type:rt,size:nt,start:ot}=et,at=tt.count;for(let lt=0;lt<at;lt++)_.texture.bind(tt.elements[lt],lt);_.geometry.draw(rt,nt,ot)}_resolveDirectShader(_){let et=this.shader;const tt=this.pluginName;if(!et){if(!DEFAULT_SHADERS[tt]){const{maxTextures:rt}=_.plugins[tt],nt=new Int32Array(rt);for(let lt=0;lt<rt;lt++)nt[lt]=lt;const ot={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:nt},!0)},at=_.plugins[tt]._shader.program;DEFAULT_SHADERS[tt]=new Shader(at,ot)}et=DEFAULT_SHADERS[tt]}return et}_calculateBounds(){this.finishPoly();const _=this._geometry;if(!_.graphicsData.length)return;const{minX:et,minY:tt,maxX:rt,maxY:nt}=_.bounds;this._bounds.addFrame(this.transform,et,tt,rt,nt)}containsPoint(_){return this.worldTransform.applyInverse(_,ro._TEMP_POINT),this._geometry.containsPoint(ro._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let _=0;_<this.batches.length;_++){const et=this.batches[_];et._tintRGB=Color.shared.setValue(this._tintColor).multiply(et._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const _=this.transform._worldID;if(this._transformID===_)return;this._transformID=_;const et=this.transform.worldTransform,tt=et.a,rt=et.b,nt=et.c,ot=et.d,at=et.tx,lt=et.ty,ct=this._geometry.points,dt=this.vertexData;let st=0;for(let it=0;it<ct.length;it+=2){const ut=ct[it],ht=ct[it+1];dt[st++]=tt*ut+nt*ht+at,dt[st++]=ot*ht+rt*ut+lt}}closePath(){const _=this.currentPath;return _&&(_.closeStroke=!0,this.finishPoly()),this}setMatrix(_){return this._matrix=_,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(_){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(_)}};_Graphics.curves=curves,_Graphics._TEMP_POINT=new Point;let Graphics=_Graphics;class MeshBatchUvs{constructor(_,et){this.uvBuffer=_,this.uvMatrix=et,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(_){if(!_&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const et=this.uvBuffer.data;(!this.data||this.data.length!==et.length)&&(this.data=new Float32Array(et.length)),this.uvMatrix.multiplyUvs(et,this.data),this._updateID++}}const tempPoint$1=new Point,tempPolygon=new Polygon,_Mesh=class ga extends Container{constructor(_,et,tt,rt=DRAW_MODES.TRIANGLES){super(),this.geometry=_,this.shader=et,this.state=tt||State.for2d(),this.drawMode=rt,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=settings.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(_){this._geometry!==_&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=_,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(_){this.shader=_}get material(){return this.shader}set blendMode(_){this.state.blendMode=_}get blendMode(){return this.state.blendMode}set roundPixels(_){this._roundPixels!==_&&(this._transformID=-1),this._roundPixels=_}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(_){this.shader.tint=_}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(_){this.shader.texture=_}_render(_){const et=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===DRAW_MODES.TRIANGLES&&et.length<ga.BATCHABLE_SIZE*2?this._renderToBatch(_):this._renderDefault(_)}_renderDefault(_){const et=this.shader;et.alpha=this.worldAlpha,et.update&&et.update(),_.batch.flush(),et.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),_.shader.bind(et),_.state.set(this.state),_.geometry.bind(this.geometry,et),_.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(_){const et=this.geometry,tt=this.shader;tt.uvMatrix&&(tt.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=et.indexBuffer.data,this._tintRGB=tt._tintRGB,this._texture=tt.texture;const rt=this.material.pluginName;_.batch.setObjectRenderer(_.plugins[rt]),_.plugins[rt].render(this)}calculateVertices(){const _=this.geometry.buffers[0],et=_.data,tt=_._updateID;if(tt===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==et.length&&(this.vertexData=new Float32Array(et.length));const rt=this.transform.worldTransform,nt=rt.a,ot=rt.b,at=rt.c,lt=rt.d,ct=rt.tx,dt=rt.ty,st=this.vertexData;for(let it=0;it<st.length/2;it++){const ut=et[it*2],ht=et[it*2+1];st[it*2]=nt*ut+at*ht+ct,st[it*2+1]=ot*ut+lt*ht+dt}if(this._roundPixels){const it=settings.RESOLUTION;for(let ut=0;ut<st.length;++ut)st[ut]=Math.round(st[ut]*it)/it}this.vertexDirty=tt}calculateUvs(){const _=this.geometry.buffers[1],et=this.shader;et.uvMatrix.isSimple?this.uvs=_.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(_,et.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(_){if(!this.getBounds().contains(_.x,_.y))return!1;this.worldTransform.applyInverse(_,tempPoint$1);const et=this.geometry.getBuffer("aVertexPosition").data,tt=tempPolygon.points,rt=this.geometry.getIndex().data,nt=rt.length,ot=this.drawMode===4?3:1;for(let at=0;at+2<nt;at+=ot){const lt=rt[at]*2,ct=rt[at+1]*2,dt=rt[at+2]*2;if(tt[0]=et[lt],tt[1]=et[lt+1],tt[2]=et[ct],tt[3]=et[ct+1],tt[4]=et[dt],tt[5]=et[dt+1],tempPolygon.contains(tempPoint$1.x,tempPoint$1.y))return!0}return!1}destroy(_){super.destroy(_),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};_Mesh.BATCHABLE_SIZE=100;let Mesh=_Mesh;class MeshGeometry extends Geometry{constructor(_,et,tt){super();const rt=new Buffer(_),nt=new Buffer(et,!0),ot=new Buffer(tt,!0,!0);this.addAttribute("aVertexPosition",rt,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",nt,2,!1,TYPES.FLOAT).addIndex(ot),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var fragment$1=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class MeshMaterial extends Shader{constructor(_,et){const tt={uSampler:_,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};et=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},et),et.uniforms&&Object.assign(tt,et.uniforms),super(et.program||Program.from(vertex$1,fragment$1),tt),this._colorDirty=!1,this.uvMatrix=new TextureMatrix(_),this.batchable=et.program===void 0,this.pluginName=et.pluginName,this._tintColor=new Color(et.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=et.alpha}get texture(){return this.uniforms.uSampler}set texture(_){this.uniforms.uSampler!==_&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!_.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=_,this.uvMatrix.texture=_)}set alpha(_){_!==this._alpha&&(this._alpha=_,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(_){_!==this.tint&&(this._tintColor.setValue(_),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const _=this.texture.baseTexture.alphaMode;Color.shared.setValue(this._tintColor).premultiply(this._alpha,_).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class ParticleBuffer{constructor(_,et,tt){this.geometry=new Geometry,this.indexBuffer=null,this.size=tt,this.dynamicProperties=[],this.staticProperties=[];for(let rt=0;rt<_.length;++rt){let nt=_[rt];nt={attributeName:nt.attributeName,size:nt.size,uploadFunction:nt.uploadFunction,type:nt.type||TYPES.FLOAT,offset:nt.offset},et[rt]?this.dynamicProperties.push(nt):this.staticProperties.push(nt)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const _=this.geometry;let et=0;this.indexBuffer=new Buffer(createIndicesForQuads(this.size),!0,!0),_.addIndex(this.indexBuffer),this.dynamicStride=0;for(let ot=0;ot<this.dynamicProperties.length;++ot){const at=this.dynamicProperties[ot];at.offset=et,et+=at.size,this.dynamicStride+=at.size}const tt=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(tt),this.dynamicDataUint32=new Uint32Array(tt),this.dynamicBuffer=new Buffer(this.dynamicData,!1,!1);let rt=0;this.staticStride=0;for(let ot=0;ot<this.staticProperties.length;++ot){const at=this.staticProperties[ot];at.offset=rt,rt+=at.size,this.staticStride+=at.size}const nt=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(nt),this.staticDataUint32=new Uint32Array(nt),this.staticBuffer=new Buffer(this.staticData,!0,!1);for(let ot=0;ot<this.dynamicProperties.length;++ot){const at=this.dynamicProperties[ot];_.addAttribute(at.attributeName,this.dynamicBuffer,0,at.type===TYPES.UNSIGNED_BYTE,at.type,this.dynamicStride*4,at.offset*4)}for(let ot=0;ot<this.staticProperties.length;++ot){const at=this.staticProperties[ot];_.addAttribute(at.attributeName,this.staticBuffer,0,at.type===TYPES.UNSIGNED_BYTE,at.type,this.staticStride*4,at.offset*4)}}uploadDynamic(_,et,tt){for(let rt=0;rt<this.dynamicProperties.length;rt++){const nt=this.dynamicProperties[rt];nt.uploadFunction(_,et,tt,nt.type===TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,nt.offset)}this.dynamicBuffer._updateID++}uploadStatic(_,et,tt){for(let rt=0;rt<this.staticProperties.length;rt++){const nt=this.staticProperties[rt];nt.uploadFunction(_,et,tt,nt.type===TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,nt.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var fragment=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class ParticleRenderer extends ObjectRenderer{constructor(_){super(_),this.shader=null,this.properties=null,this.tempMatrix=new Matrix,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Shader.from(vertex,fragment,{}),this.state=State.for2d()}render(_){const et=_.children,tt=_._maxSize,rt=_._batchSize,nt=this.renderer;let ot=et.length;if(ot===0)return;ot>tt&&!_.autoResize&&(ot=tt);let at=_._buffers;at||(at=_._buffers=this.generateBuffers(_));const lt=et[0]._texture.baseTexture,ct=lt.alphaMode>0;this.state.blendMode=correctBlendMode(_.blendMode,ct),nt.state.set(this.state);const dt=nt.gl,st=_.worldTransform.copyTo(this.tempMatrix);st.prepend(nt.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=st.toArray(!0),this.shader.uniforms.uColor=Color.shared.setValue(_.tintRgb).premultiply(_.worldAlpha,ct).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=lt,this.renderer.shader.bind(this.shader);let it=!1;for(let ut=0,ht=0;ut<ot;ut+=rt,ht+=1){let ft=ot-ut;ft>rt&&(ft=rt),ht>=at.length&&at.push(this._generateOneMoreBuffer(_));const gt=at[ht];gt.uploadDynamic(et,ut,ft);const mt=_._bufferUpdateIDs[ht]||0;it=it||gt._updateID<mt,it&&(gt._updateID=_._updateID,gt.uploadStatic(et,ut,ft)),nt.geometry.bind(gt.geometry),dt.drawElements(dt.TRIANGLES,ft*6,dt.UNSIGNED_SHORT,0)}}generateBuffers(_){const et=[],tt=_._maxSize,rt=_._batchSize,nt=_._properties;for(let ot=0;ot<tt;ot+=rt)et.push(new ParticleBuffer(this.properties,nt,rt));return et}_generateOneMoreBuffer(_){const et=_._batchSize,tt=_._properties;return new ParticleBuffer(this.properties,tt,et)}uploadVertices(_,et,tt,rt,nt,ot){let at=0,lt=0,ct=0,dt=0;for(let st=0;st<tt;++st){const it=_[et+st],ut=it._texture,ht=it.scale.x,ft=it.scale.y,gt=ut.trim,mt=ut.orig;gt?(lt=gt.x-it.anchor.x*mt.width,at=lt+gt.width,dt=gt.y-it.anchor.y*mt.height,ct=dt+gt.height):(at=mt.width*(1-it.anchor.x),lt=mt.width*-it.anchor.x,ct=mt.height*(1-it.anchor.y),dt=mt.height*-it.anchor.y),rt[ot]=lt*ht,rt[ot+1]=dt*ft,rt[ot+nt]=at*ht,rt[ot+nt+1]=dt*ft,rt[ot+nt*2]=at*ht,rt[ot+nt*2+1]=ct*ft,rt[ot+nt*3]=lt*ht,rt[ot+nt*3+1]=ct*ft,ot+=nt*4}}uploadPosition(_,et,tt,rt,nt,ot){for(let at=0;at<tt;at++){const lt=_[et+at].position;rt[ot]=lt.x,rt[ot+1]=lt.y,rt[ot+nt]=lt.x,rt[ot+nt+1]=lt.y,rt[ot+nt*2]=lt.x,rt[ot+nt*2+1]=lt.y,rt[ot+nt*3]=lt.x,rt[ot+nt*3+1]=lt.y,ot+=nt*4}}uploadRotation(_,et,tt,rt,nt,ot){for(let at=0;at<tt;at++){const lt=_[et+at].rotation;rt[ot]=lt,rt[ot+nt]=lt,rt[ot+nt*2]=lt,rt[ot+nt*3]=lt,ot+=nt*4}}uploadUvs(_,et,tt,rt,nt,ot){for(let at=0;at<tt;++at){const lt=_[et+at]._texture._uvs;lt?(rt[ot]=lt.x0,rt[ot+1]=lt.y0,rt[ot+nt]=lt.x1,rt[ot+nt+1]=lt.y1,rt[ot+nt*2]=lt.x2,rt[ot+nt*2+1]=lt.y2,rt[ot+nt*3]=lt.x3,rt[ot+nt*3+1]=lt.y3,ot+=nt*4):(rt[ot]=0,rt[ot+1]=0,rt[ot+nt]=0,rt[ot+nt+1]=0,rt[ot+nt*2]=0,rt[ot+nt*2+1]=0,rt[ot+nt*3]=0,rt[ot+nt*3+1]=0,ot+=nt*4)}}uploadTint(_,et,tt,rt,nt,ot){for(let at=0;at<tt;++at){const lt=_[et+at],ct=Color.shared.setValue(lt._tintRGB).toPremultiplied(lt.alpha,lt.texture.baseTexture.alphaMode>0);rt[ot]=ct,rt[ot+nt]=ct,rt[ot+nt*2]=ct,rt[ot+nt*3]=ct,ot+=nt*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ParticleRenderer.extension={name:"particle",type:ExtensionType.RendererPlugin};extensions$1.add(ParticleRenderer);var TEXT_GRADIENT=(_e=>(_e[_e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",_e[_e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",_e))(TEXT_GRADIENT||{});const contextSettings={willReadFrequently:!0},_TextMetrics=class dr{static get experimentalLetterSpacingSupported(){let _=dr._experimentalLetterSpacingSupported;if(_!==void 0){const et=settings.ADAPTER.getCanvasRenderingContext2D().prototype;_=dr._experimentalLetterSpacingSupported="letterSpacing"in et||"textLetterSpacing"in et}return _}constructor(_,et,tt,rt,nt,ot,at,lt,ct){this.text=_,this.style=et,this.width=tt,this.height=rt,this.lines=nt,this.lineWidths=ot,this.lineHeight=at,this.maxLineWidth=lt,this.fontProperties=ct}static measureText(_,et,tt,rt=dr._canvas){tt=tt??et.wordWrap;const nt=et.toFontString(),ot=dr.measureFont(nt);ot.fontSize===0&&(ot.fontSize=et.fontSize,ot.ascent=et.fontSize);const at=rt.getContext("2d",contextSettings);at.font=nt;const lt=(tt?dr.wordWrap(_,et,rt):_).split(/(?:\r\n|\r|\n)/),ct=new Array(lt.length);let dt=0;for(let ht=0;ht<lt.length;ht++){const ft=dr._measureText(lt[ht],et.letterSpacing,at);ct[ht]=ft,dt=Math.max(dt,ft)}let st=dt+et.strokeThickness;et.dropShadow&&(st+=et.dropShadowDistance);const it=et.lineHeight||ot.fontSize+et.strokeThickness;let ut=Math.max(it,ot.fontSize+et.strokeThickness*2)+et.leading+(lt.length-1)*(it+et.leading);return et.dropShadow&&(ut+=et.dropShadowDistance),new dr(_,et,st,ut,lt,ct,it+et.leading,dt,ot)}static _measureText(_,et,tt){let rt=!1;dr.experimentalLetterSpacingSupported&&(dr.experimentalLetterSpacing?(tt.letterSpacing=`${et}px`,tt.textLetterSpacing=`${et}px`,rt=!0):(tt.letterSpacing="0px",tt.textLetterSpacing="0px"));let nt=tt.measureText(_).width;return nt>0&&(rt?nt-=et:nt+=(dr.graphemeSegmenter(_).length-1)*et),nt}static wordWrap(_,et,tt=dr._canvas){const rt=tt.getContext("2d",contextSettings);let nt=0,ot="",at="";const lt=Object.create(null),{letterSpacing:ct,whiteSpace:dt}=et,st=dr.collapseSpaces(dt),it=dr.collapseNewlines(dt);let ut=!st;const ht=et.wordWrapWidth+ct,ft=dr.tokenize(_);for(let gt=0;gt<ft.length;gt++){let mt=ft[gt];if(dr.isNewline(mt)){if(!it){at+=dr.addLine(ot),ut=!st,ot="",nt=0;continue}mt=" "}if(st){const bt=dr.isBreakingSpace(mt),vt=dr.isBreakingSpace(ot[ot.length-1]);if(bt&&vt)continue}const yt=dr.getFromCache(mt,ct,lt,rt);if(yt>ht)if(ot!==""&&(at+=dr.addLine(ot),ot="",nt=0),dr.canBreakWords(mt,et.breakWords)){const bt=dr.wordWrapSplit(mt);for(let vt=0;vt<bt.length;vt++){let xt=bt[vt],wt=xt,St=1;for(;bt[vt+St];){const _t=bt[vt+St];if(!dr.canBreakChars(wt,_t,mt,vt,et.breakWords))xt+=_t;else break;wt=_t,St++}vt+=St-1;const Et=dr.getFromCache(xt,ct,lt,rt);Et+nt>ht&&(at+=dr.addLine(ot),ut=!1,ot="",nt=0),ot+=xt,nt+=Et}}else{ot.length>0&&(at+=dr.addLine(ot),ot="",nt=0);const bt=gt===ft.length-1;at+=dr.addLine(mt,!bt),ut=!1,ot="",nt=0}else yt+nt>ht&&(ut=!1,at+=dr.addLine(ot),ot="",nt=0),(ot.length>0||!dr.isBreakingSpace(mt)||ut)&&(ot+=mt,nt+=yt)}return at+=dr.addLine(ot,!1),at}static addLine(_,et=!0){return _=dr.trimRight(_),_=et?`${_}
`:_,_}static getFromCache(_,et,tt,rt){let nt=tt[_];return typeof nt!="number"&&(nt=dr._measureText(_,et,rt)+et,tt[_]=nt),nt}static collapseSpaces(_){return _==="normal"||_==="pre-line"}static collapseNewlines(_){return _==="normal"}static trimRight(_){if(typeof _!="string")return"";for(let et=_.length-1;et>=0;et--){const tt=_[et];if(!dr.isBreakingSpace(tt))break;_=_.slice(0,-1)}return _}static isNewline(_){return typeof _!="string"?!1:dr._newlines.includes(_.charCodeAt(0))}static isBreakingSpace(_,et){return typeof _!="string"?!1:dr._breakingSpaces.includes(_.charCodeAt(0))}static tokenize(_){const et=[];let tt="";if(typeof _!="string")return et;for(let rt=0;rt<_.length;rt++){const nt=_[rt],ot=_[rt+1];if(dr.isBreakingSpace(nt,ot)||dr.isNewline(nt)){tt!==""&&(et.push(tt),tt=""),et.push(nt);continue}tt+=nt}return tt!==""&&et.push(tt),et}static canBreakWords(_,et){return et}static canBreakChars(_,et,tt,rt,nt){return!0}static wordWrapSplit(_){return dr.graphemeSegmenter(_)}static measureFont(_){if(dr._fonts[_])return dr._fonts[_];const et={ascent:0,descent:0,fontSize:0},tt=dr._canvas,rt=dr._context;rt.font=_;const nt=dr.METRICS_STRING+dr.BASELINE_SYMBOL,ot=Math.ceil(rt.measureText(nt).width);let at=Math.ceil(rt.measureText(dr.BASELINE_SYMBOL).width);const lt=Math.ceil(dr.HEIGHT_MULTIPLIER*at);if(at=at*dr.BASELINE_MULTIPLIER|0,ot===0||lt===0)return dr._fonts[_]=et,et;tt.width=ot,tt.height=lt,rt.fillStyle="#f00",rt.fillRect(0,0,ot,lt),rt.font=_,rt.textBaseline="alphabetic",rt.fillStyle="#000",rt.fillText(nt,0,at);const ct=rt.getImageData(0,0,ot,lt).data,dt=ct.length,st=ot*4;let it=0,ut=0,ht=!1;for(it=0;it<at;++it){for(let ft=0;ft<st;ft+=4)if(ct[ut+ft]!==255){ht=!0;break}if(!ht)ut+=st;else break}for(et.ascent=at-it,ut=dt-st,ht=!1,it=lt;it>at;--it){for(let ft=0;ft<st;ft+=4)if(ct[ut+ft]!==255){ht=!0;break}if(!ht)ut-=st;else break}return et.descent=it-at,et.fontSize=et.ascent+et.descent,dr._fonts[_]=et,et}static clearMetrics(_=""){_?delete dr._fonts[_]:dr._fonts={}}static get _canvas(){var _;if(!dr.__canvas){let et;try{const tt=new OffscreenCanvas(0,0);if((_=tt.getContext("2d",contextSettings))!=null&&_.measureText)return dr.__canvas=tt,tt;et=settings.ADAPTER.createCanvas()}catch{et=settings.ADAPTER.createCanvas()}et.width=et.height=10,dr.__canvas=et}return dr.__canvas}static get _context(){return dr.__context||(dr.__context=dr._canvas.getContext("2d",contextSettings)),dr.__context}};_TextMetrics.METRICS_STRING="|q",_TextMetrics.BASELINE_SYMBOL="M",_TextMetrics.BASELINE_MULTIPLIER=1.4,_TextMetrics.HEIGHT_MULTIPLIER=2,_TextMetrics.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const _e=new Intl.Segmenter;return _=>[..._e.segment(_)].map(et=>et.segment)}return _e=>[..._e]})(),_TextMetrics.experimentalLetterSpacing=!1,_TextMetrics._fonts={},_TextMetrics._newlines=[10,13],_TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let TextMetrics=_TextMetrics;const genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],_TextStyle=class Gn{constructor(_){this.styleID=0,this.reset(),deepCopyProperties(this,_,_)}clone(){const _={};return deepCopyProperties(_,this,Gn.defaultStyle),new Gn(_)}reset(){deepCopyProperties(this,Gn.defaultStyle,Gn.defaultStyle)}get align(){return this._align}set align(_){this._align!==_&&(this._align=_,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(_){this._breakWords!==_&&(this._breakWords=_,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(_){this._dropShadow!==_&&(this._dropShadow=_,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(_){this._dropShadowAlpha!==_&&(this._dropShadowAlpha=_,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(_){this._dropShadowAngle!==_&&(this._dropShadowAngle=_,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(_){this._dropShadowBlur!==_&&(this._dropShadowBlur=_,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(_){const et=getColor(_);this._dropShadowColor!==et&&(this._dropShadowColor=et,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(_){this._dropShadowDistance!==_&&(this._dropShadowDistance=_,this.styleID++)}get fill(){return this._fill}set fill(_){const et=getColor(_);this._fill!==et&&(this._fill=et,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(_){this._fillGradientType!==_&&(this._fillGradientType=_,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(_){areArraysEqual(this._fillGradientStops,_)||(this._fillGradientStops=_,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(_){this.fontFamily!==_&&(this._fontFamily=_,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(_){this._fontSize!==_&&(this._fontSize=_,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(_){this._fontStyle!==_&&(this._fontStyle=_,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(_){this._fontVariant!==_&&(this._fontVariant=_,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(_){this._fontWeight!==_&&(this._fontWeight=_,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(_){this._letterSpacing!==_&&(this._letterSpacing=_,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(_){this._lineHeight!==_&&(this._lineHeight=_,this.styleID++)}get leading(){return this._leading}set leading(_){this._leading!==_&&(this._leading=_,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(_){this._lineJoin!==_&&(this._lineJoin=_,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(_){this._miterLimit!==_&&(this._miterLimit=_,this.styleID++)}get padding(){return this._padding}set padding(_){this._padding!==_&&(this._padding=_,this.styleID++)}get stroke(){return this._stroke}set stroke(_){const et=getColor(_);this._stroke!==et&&(this._stroke=et,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(_){this._strokeThickness!==_&&(this._strokeThickness=_,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(_){this._textBaseline!==_&&(this._textBaseline=_,this.styleID++)}get trim(){return this._trim}set trim(_){this._trim!==_&&(this._trim=_,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(_){this._whiteSpace!==_&&(this._whiteSpace=_,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(_){this._wordWrap!==_&&(this._wordWrap=_,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(_){this._wordWrapWidth!==_&&(this._wordWrapWidth=_,this.styleID++)}toFontString(){const _=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let et=this.fontFamily;Array.isArray(this.fontFamily)||(et=this.fontFamily.split(","));for(let tt=et.length-1;tt>=0;tt--){let rt=et[tt].trim();!/([\"\'])[^\'\"]+\1/.test(rt)&&!genericFontFamilies.includes(rt)&&(rt=`"${rt}"`),et[tt]=rt}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${_} ${et.join(",")}`}};_TextStyle.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let TextStyle=_TextStyle;function getColor(_e){const _=Color.shared,et=tt=>{const rt=_.setValue(tt);return rt.alpha===1?rt.toHex():rt.toRgbaString()};return Array.isArray(_e)?_e.map(et):et(_e)}function areArraysEqual(_e,_){if(!Array.isArray(_e)||!Array.isArray(_)||_e.length!==_.length)return!1;for(let et=0;et<_e.length;++et)if(_e[et]!==_[et])return!1;return!0}function deepCopyProperties(_e,_,et){for(const tt in et)Array.isArray(_[tt])?_e[tt]=_[tt].slice():_e[tt]=_[tt]}const defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_Text=class yo extends Sprite{constructor(_,et,tt){let rt=!1;tt||(tt=settings.ADAPTER.createCanvas(),rt=!0),tt.width=3,tt.height=3;const nt=Texture.from(tt);nt.orig=new Rectangle,nt.trim=new Rectangle,super(nt),this._ownCanvas=rt,this.canvas=tt,this.context=tt.getContext("2d",{willReadFrequently:!0}),this._resolution=yo.defaultResolution??settings.RESOLUTION,this._autoResolution=yo.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=_,this.style=et,this.localStyleID=-1}static get experimentalLetterSpacing(){return TextMetrics.experimentalLetterSpacing}static set experimentalLetterSpacing(_){deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),TextMetrics.experimentalLetterSpacing=_}updateText(_){const et=this._style;if(this.localStyleID!==et.styleID&&(this.dirty=!0,this.localStyleID=et.styleID),!this.dirty&&_)return;this._font=this._style.toFontString();const tt=this.context,rt=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),nt=rt.width,ot=rt.height,at=rt.lines,lt=rt.lineHeight,ct=rt.lineWidths,dt=rt.maxLineWidth,st=rt.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,nt)+et.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,ot)+et.padding*2)*this._resolution),tt.scale(this._resolution,this._resolution),tt.clearRect(0,0,this.canvas.width,this.canvas.height),tt.font=this._font,tt.lineWidth=et.strokeThickness,tt.textBaseline=et.textBaseline,tt.lineJoin=et.lineJoin,tt.miterLimit=et.miterLimit;let it,ut;const ht=et.dropShadow?2:1;for(let ft=0;ft<ht;++ft){const gt=et.dropShadow&&ft===0,mt=gt?Math.ceil(Math.max(1,ot)+et.padding*2):0,yt=mt*this._resolution;if(gt){tt.fillStyle="black",tt.strokeStyle="black";const vt=et.dropShadowColor,xt=et.dropShadowBlur*this._resolution,wt=et.dropShadowDistance*this._resolution;tt.shadowColor=Color.shared.setValue(vt).setAlpha(et.dropShadowAlpha).toRgbaString(),tt.shadowBlur=xt,tt.shadowOffsetX=Math.cos(et.dropShadowAngle)*wt,tt.shadowOffsetY=Math.sin(et.dropShadowAngle)*wt+yt}else tt.fillStyle=this._generateFillStyle(et,at,rt),tt.strokeStyle=et.stroke,tt.shadowColor="black",tt.shadowBlur=0,tt.shadowOffsetX=0,tt.shadowOffsetY=0;let bt=(lt-st.fontSize)/2;lt-st.fontSize<0&&(bt=0);for(let vt=0;vt<at.length;vt++)it=et.strokeThickness/2,ut=et.strokeThickness/2+vt*lt+st.ascent+bt,et.align==="right"?it+=dt-ct[vt]:et.align==="center"&&(it+=(dt-ct[vt])/2),et.stroke&&et.strokeThickness&&this.drawLetterSpacing(at[vt],it+et.padding,ut+et.padding-mt,!0),et.fill&&this.drawLetterSpacing(at[vt],it+et.padding,ut+et.padding-mt)}this.updateTexture()}drawLetterSpacing(_,et,tt,rt=!1){const nt=this._style.letterSpacing;let ot=!1;if(TextMetrics.experimentalLetterSpacingSupported&&(TextMetrics.experimentalLetterSpacing?(this.context.letterSpacing=`${nt}px`,this.context.textLetterSpacing=`${nt}px`,ot=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),nt===0||ot){rt?this.context.strokeText(_,et,tt):this.context.fillText(_,et,tt);return}let at=et;const lt=TextMetrics.graphemeSegmenter(_);let ct=this.context.measureText(_).width,dt=0;for(let st=0;st<lt.length;++st){const it=lt[st];rt?this.context.strokeText(it,at,tt):this.context.fillText(it,at,tt);let ut="";for(let ht=st+1;ht<lt.length;++ht)ut+=lt[ht];dt=this.context.measureText(ut).width,at+=ct-dt+nt,ct=dt}}updateTexture(){const _=this.canvas;if(this._style.trim){const ot=trimCanvas(_);ot.data&&(_.width=ot.width,_.height=ot.height,this.context.putImageData(ot.data,0,0))}const et=this._texture,tt=this._style,rt=tt.trim?0:tt.padding,nt=et.baseTexture;et.trim.width=et._frame.width=_.width/this._resolution,et.trim.height=et._frame.height=_.height/this._resolution,et.trim.x=-rt,et.trim.y=-rt,et.orig.width=et._frame.width-rt*2,et.orig.height=et._frame.height-rt*2,this._onTextureUpdate(),nt.setRealSize(_.width,_.height,this._resolution),et.updateUvs(),this.dirty=!1}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._render(_)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(_,et){return this.updateText(!0),this._textureID===-1&&(_=!1),super.getBounds(_,et)}getLocalBounds(_){return this.updateText(!0),super.getLocalBounds.call(this,_)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(_,et,tt){const rt=_.fill;if(Array.isArray(rt)){if(rt.length===1)return rt[0]}else return rt;let nt;const ot=_.dropShadow?_.dropShadowDistance:0,at=_.padding||0,lt=this.canvas.width/this._resolution-ot-at*2,ct=this.canvas.height/this._resolution-ot-at*2,dt=rt.slice(),st=_.fillGradientStops.slice();if(!st.length){const it=dt.length+1;for(let ut=1;ut<it;++ut)st.push(ut/it)}if(dt.unshift(rt[0]),st.unshift(0),dt.push(rt[rt.length-1]),st.push(1),_.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){nt=this.context.createLinearGradient(lt/2,at,lt/2,ct+at);const it=tt.fontProperties.fontSize+_.strokeThickness;for(let ut=0;ut<et.length;ut++){const ht=tt.lineHeight*(ut-1)+it,ft=tt.lineHeight*ut;let gt=ft;ut>0&&ht>ft&&(gt=(ft+ht)/2);const mt=ft+it,yt=tt.lineHeight*(ut+1);let bt=mt;ut+1<et.length&&yt<mt&&(bt=(mt+yt)/2);const vt=(bt-gt)/ct;for(let xt=0;xt<dt.length;xt++){let wt=0;typeof st[xt]=="number"?wt=st[xt]:wt=xt/dt.length;let St=Math.min(1,Math.max(0,gt/ct+wt*vt));St=Number(St.toFixed(5)),nt.addColorStop(St,dt[xt])}}}else{nt=this.context.createLinearGradient(at,ct/2,lt+at,ct/2);const it=dt.length+1;let ut=1;for(let ht=0;ht<dt.length;ht++){let ft;typeof st[ht]=="number"?ft=st[ht]:ft=ut/it,nt.addColorStop(ft,dt[ht]),ut++}}return nt}destroy(_){typeof _=="boolean"&&(_={children:_}),_=Object.assign({},defaultDestroyOptions,_),super.destroy(_),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(_){this.updateText(!0);const et=sign(this.scale.x)||1;this.scale.x=et*_/this._texture.orig.width,this._width=_}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(_){this.updateText(!0);const et=sign(this.scale.y)||1;this.scale.y=et*_/this._texture.orig.height,this._height=_}get style(){return this._style}set style(_){_=_||{},_ instanceof TextStyle?this._style=_:this._style=new TextStyle(_),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(_){_=String(_??""),this._text!==_&&(this._text=_,this.dirty=!0)}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}};_Text.defaultAutoResolution=!0;let Text=_Text;class CountLimiter{constructor(_){this.maxItemsPerFrame=_,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function findMultipleBaseTextures(_e,_){var tt;let et=!1;if((tt=_e==null?void 0:_e._textures)!=null&&tt.length){for(let rt=0;rt<_e._textures.length;rt++)if(_e._textures[rt]instanceof Texture){const nt=_e._textures[rt].baseTexture;_.includes(nt)||(_.push(nt),et=!0)}}return et}function findBaseTexture(_e,_){if(_e.baseTexture instanceof BaseTexture){const et=_e.baseTexture;return _.includes(et)||_.push(et),!0}return!1}function findTexture(_e,_){if(_e._texture&&_e._texture instanceof Texture){const et=_e._texture.baseTexture;return _.includes(et)||_.push(et),!0}return!1}function drawText(_e,_){return _ instanceof Text?(_.updateText(!0),!0):!1}function calculateTextStyle(_e,_){if(_ instanceof TextStyle){const et=_.toFontString();return TextMetrics.measureFont(et),!0}return!1}function findText(_e,_){if(_e instanceof Text){_.includes(_e.style)||_.push(_e.style),_.includes(_e)||_.push(_e);const et=_e._texture.baseTexture;return _.includes(et)||_.push(et),!0}return!1}function findTextStyle(_e,_){return _e instanceof TextStyle?(_.includes(_e)||_.push(_e),!0):!1}const _BasePrepare=class ba{constructor(_){this.limiter=new CountLimiter(ba.uploadsPerFrame),this.renderer=_,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}upload(_){return new Promise(et=>{_&&this.add(_),this.queue.length?(this.completes.push(et),this.ticking||(this.ticking=!0,Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY))):et()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const _=this.queue[0];let et=!1;if(_&&!_._destroyed){for(let tt=0,rt=this.uploadHooks.length;tt<rt;tt++)if(this.uploadHooks[tt](this.uploadHookHelper,_)){this.queue.shift(),et=!0;break}}et||this.queue.shift()}if(this.queue.length)Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;const _=this.completes.slice(0);this.completes.length=0;for(let et=0,tt=_.length;et<tt;et++)_[et]()}}registerFindHook(_){return _&&this.addHooks.push(_),this}registerUploadHook(_){return _&&this.uploadHooks.push(_),this}add(_){for(let et=0,tt=this.addHooks.length;et<tt&&!this.addHooks[et](_,this.queue);et++);if(_ instanceof Container)for(let et=_.children.length-1;et>=0;et--)this.add(_.children[et]);return this}destroy(){this.ticking&&Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};_BasePrepare.uploadsPerFrame=4;let BasePrepare=_BasePrepare;Object.defineProperties(settings,{UPLOADS_PER_FRAME:{get(){return BasePrepare.uploadsPerFrame},set(_e){deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),BasePrepare.uploadsPerFrame=_e}}});function uploadBaseTextures(_e,_){return _ instanceof BaseTexture?(_._glTextures[_e.CONTEXT_UID]||_e.texture.bind(_),!0):!1}function uploadGraphics(_e,_){if(!(_ instanceof Graphics))return!1;const{geometry:et}=_;_.finishPoly(),et.updateBatches();const{batches:tt}=et;for(let rt=0;rt<tt.length;rt++){const{texture:nt}=tt[rt].style;nt&&uploadBaseTextures(_e,nt.baseTexture)}return et.batchable||_e.geometry.bind(et,_._resolveDirectShader(_e)),!0}function findGraphics(_e,_){return _e instanceof Graphics?(_.push(_e),!0):!1}class Prepare extends BasePrepare{constructor(_){super(_),this.uploadHookHelper=this.renderer,this.registerFindHook(findGraphics),this.registerUploadHook(uploadBaseTextures),this.registerUploadHook(uploadGraphics)}}Prepare.extension={name:"prepare",type:ExtensionType.RendererSystem};extensions$1.add(Prepare);var gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const tempMat=new Matrix;class TilingSpriteRenderer extends ObjectRenderer{constructor(_){super(_),_.runners.contextChange.add(this),this.quad=new QuadUv,this.state=State.for2d()}contextChange(){const _=this.renderer,et={globals:_.globalUniforms};this.simpleShader=Shader.from(gl1VertexSrc,fragmentSimpleSrc,et),this.shader=_.context.webGLVersion>1?Shader.from(gl2VertexSrc,gl2FragmentSrc,et):Shader.from(gl1VertexSrc,gl1FragmentSrc,et)}render(_){const et=this.renderer,tt=this.quad;let rt=tt.vertices;rt[0]=rt[6]=_._width*-_.anchor.x,rt[1]=rt[3]=_._height*-_.anchor.y,rt[2]=rt[4]=_._width*(1-_.anchor.x),rt[5]=rt[7]=_._height*(1-_.anchor.y);const nt=_.uvRespectAnchor?_.anchor.x:0,ot=_.uvRespectAnchor?_.anchor.y:0;rt=tt.uvs,rt[0]=rt[6]=-nt,rt[1]=rt[3]=-ot,rt[2]=rt[4]=1-nt,rt[5]=rt[7]=1-ot,tt.invalidate();const at=_._texture,lt=at.baseTexture,ct=lt.alphaMode>0,dt=_.tileTransform.localTransform,st=_.uvMatrix;let it=lt.isPowerOfTwo&&at.frame.width===lt.width&&at.frame.height===lt.height;it&&(lt._glTextures[et.CONTEXT_UID]?it=lt.wrapMode!==WRAP_MODES.CLAMP:lt.wrapMode===WRAP_MODES.CLAMP&&(lt.wrapMode=WRAP_MODES.REPEAT));const ut=it?this.simpleShader:this.shader,ht=at.width,ft=at.height,gt=_._width,mt=_._height;tempMat.set(dt.a*ht/gt,dt.b*ht/mt,dt.c*ft/gt,dt.d*ft/mt,dt.tx/gt,dt.ty/mt),tempMat.invert(),it?tempMat.prepend(st.mapCoord):(ut.uniforms.uMapCoord=st.mapCoord.toArray(!0),ut.uniforms.uClampFrame=st.uClampFrame,ut.uniforms.uClampOffset=st.uClampOffset),ut.uniforms.uTransform=tempMat.toArray(!0),ut.uniforms.uColor=Color.shared.setValue(_.tint).premultiply(_.worldAlpha,ct).toArray(ut.uniforms.uColor),ut.uniforms.translationMatrix=_.transform.worldTransform.toArray(!0),ut.uniforms.uSampler=at,et.shader.bind(ut),et.geometry.bind(tt),this.state.blendMode=correctBlendMode(_.blendMode,ct),et.state.set(this.state),et.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}TilingSpriteRenderer.extension={name:"tilingSprite",type:ExtensionType.RendererPlugin};extensions$1.add(TilingSpriteRenderer);const _Spritesheet=class Wn{constructor(_,et,tt){this.linkedSheets=[],(_ instanceof BaseTexture||_ instanceof Texture)&&(_={texture:_,data:et,resolutionFilename:tt});const{texture:rt,data:nt,resolutionFilename:ot=null,cachePrefix:at=""}=_;this.cachePrefix=at,this._texture=rt instanceof Texture?rt:null,this.baseTexture=rt instanceof BaseTexture?rt:this._texture.baseTexture,this.textures={},this.animations={},this.data=nt;const lt=this.baseTexture.resource;this.resolution=this._updateResolution(ot||(lt?lt.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(_=null){const{scale:et}=this.data.meta;let tt=getResolutionOfUrl(_,null);return tt===null&&(tt=typeof et=="number"?et:parseFloat(et??"1")),tt!==1&&this.baseTexture.setResolution(tt),tt}parse(){return new Promise(_=>{this._callback=_,this._batchIndex=0,this._frameKeys.length<=Wn.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(_){let et=_;const tt=Wn.BATCH_SIZE;for(;et-_<tt&&et<this._frameKeys.length;){const rt=this._frameKeys[et],nt=this._frames[rt],ot=nt.frame;if(ot){let at=null,lt=null;const ct=nt.trimmed!==!1&&nt.sourceSize?nt.sourceSize:nt.frame,dt=new Rectangle(0,0,Math.floor(ct.w)/this.resolution,Math.floor(ct.h)/this.resolution);nt.rotated?at=new Rectangle(Math.floor(ot.x)/this.resolution,Math.floor(ot.y)/this.resolution,Math.floor(ot.h)/this.resolution,Math.floor(ot.w)/this.resolution):at=new Rectangle(Math.floor(ot.x)/this.resolution,Math.floor(ot.y)/this.resolution,Math.floor(ot.w)/this.resolution,Math.floor(ot.h)/this.resolution),nt.trimmed!==!1&&nt.spriteSourceSize&&(lt=new Rectangle(Math.floor(nt.spriteSourceSize.x)/this.resolution,Math.floor(nt.spriteSourceSize.y)/this.resolution,Math.floor(ot.w)/this.resolution,Math.floor(ot.h)/this.resolution)),this.textures[rt]=new Texture(this.baseTexture,at,dt,lt,nt.rotated?2:0,nt.anchor,nt.borders),Texture.addToCache(this.textures[rt],this.cachePrefix+rt.toString())}et++}}_processAnimations(){const _=this.data.animations||{};for(const et in _){this.animations[et]=[];for(let tt=0;tt<_[et].length;tt++){const rt=_[et][tt];this.animations[et].push(this.textures[rt])}}}_parseComplete(){const _=this._callback;this._callback=null,this._batchIndex=0,_.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Wn.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Wn.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(_=!1){var et;for(const tt in this.textures)this.textures[tt].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,_&&((et=this._texture)==null||et.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};_Spritesheet.BATCH_SIZE=1e3;let Spritesheet=_Spritesheet;const validImages=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function getCacheableAssets(_e,_,et){const tt={};if(_e.forEach(rt=>{tt[rt]=_}),Object.keys(_.textures).forEach(rt=>{tt[`${_.cachePrefix}${rt}`]=_.textures[rt]}),!et){const rt=path.dirname(_e[0]);_.linkedSheets.forEach((nt,ot)=>{Object.assign(tt,getCacheableAssets([`${rt}/${_.data.meta.related_multi_packs[ot]}`],nt,!0))})}return tt}const spritesheetAsset={extension:ExtensionType.Asset,cache:{test:_e=>_e instanceof Spritesheet,getCacheableAssets:(_e,_)=>getCacheableAssets(_e,_,!1)},resolver:{test:_e=>{const _=_e.split("?")[0].split("."),et=_.pop(),tt=_.pop();return et==="json"&&validImages.includes(tt)},parse:_e=>{var et;const _=_e.split(".");return{resolution:parseFloat(((et=settings.RETINA_PREFIX.exec(_e))==null?void 0:et[1])??"1"),format:_[_.length-2],src:_e}}},loader:{name:"spritesheetLoader",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},async testParse(_e,_){return path.extname(_.src).toLowerCase()===".json"&&!!_e.frames},async parse(_e,_,et){var dt,st;const{texture:tt,imageFilename:rt,cachePrefix:nt}=(_==null?void 0:_.data)??{};let ot=path.dirname(_.src);ot&&ot.lastIndexOf("/")!==ot.length-1&&(ot+="/");let at;if(tt&&tt.baseTexture)at=tt;else{const it=copySearchParams(ot+(rt??_e.meta.image),_.src);at=(await et.load([it]))[it]}const lt=new Spritesheet({texture:at.baseTexture,data:_e,resolutionFilename:_.src,cachePrefix:nt});await lt.parse();const ct=(dt=_e==null?void 0:_e.meta)==null?void 0:dt.related_multi_packs;if(Array.isArray(ct)){const it=[];for(const ht of ct){if(typeof ht!="string")continue;let ft=ot+ht;(st=_.data)!=null&&st.ignoreMultiPack||(ft=copySearchParams(ft,_.src),it.push(et.load({src:ft,data:{ignoreMultiPack:!0}})))}const ut=await Promise.all(it);lt.linkedSheets=ut,ut.forEach(ht=>{ht.linkedSheets=[lt].concat(lt.linkedSheets.filter(ft=>ft!==ht))})}return lt},unload(_e){_e.destroy(!0)}}};extensions$1.add(spritesheetAsset);class BitmapFontData{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class TextFormat{static test(_){return typeof _=="string"&&_.startsWith("info face=")}static parse(_){const et=_.match(/^[a-z]+\s+.+$/gm),tt={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const nt in et){const ot=et[nt].match(/^[a-z]+/gm)[0],at=et[nt].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),lt={};for(const ct in at){const dt=at[ct].split("="),st=dt[0],it=dt[1].replace(/"/gm,""),ut=parseFloat(it),ht=isNaN(ut)?it:ut;lt[st]=ht}tt[ot].push(lt)}const rt=new BitmapFontData;return tt.info.forEach(nt=>rt.info.push({face:nt.face,size:parseInt(nt.size,10)})),tt.common.forEach(nt=>rt.common.push({lineHeight:parseInt(nt.lineHeight,10)})),tt.page.forEach(nt=>rt.page.push({id:parseInt(nt.id,10),file:nt.file})),tt.char.forEach(nt=>rt.char.push({id:parseInt(nt.id,10),page:parseInt(nt.page,10),x:parseInt(nt.x,10),y:parseInt(nt.y,10),width:parseInt(nt.width,10),height:parseInt(nt.height,10),xoffset:parseInt(nt.xoffset,10),yoffset:parseInt(nt.yoffset,10),xadvance:parseInt(nt.xadvance,10)})),tt.kerning.forEach(nt=>rt.kerning.push({first:parseInt(nt.first,10),second:parseInt(nt.second,10),amount:parseInt(nt.amount,10)})),tt.distanceField.forEach(nt=>rt.distanceField.push({distanceRange:parseInt(nt.distanceRange,10),fieldType:nt.fieldType})),rt}}class XMLFormat{static test(_){const et=_;return typeof _!="string"&&"getElementsByTagName"in _&&et.getElementsByTagName("page").length&&et.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(_){const et=new BitmapFontData,tt=_.getElementsByTagName("info"),rt=_.getElementsByTagName("common"),nt=_.getElementsByTagName("page"),ot=_.getElementsByTagName("char"),at=_.getElementsByTagName("kerning"),lt=_.getElementsByTagName("distanceField");for(let ct=0;ct<tt.length;ct++)et.info.push({face:tt[ct].getAttribute("face"),size:parseInt(tt[ct].getAttribute("size"),10)});for(let ct=0;ct<rt.length;ct++)et.common.push({lineHeight:parseInt(rt[ct].getAttribute("lineHeight"),10)});for(let ct=0;ct<nt.length;ct++)et.page.push({id:parseInt(nt[ct].getAttribute("id"),10)||0,file:nt[ct].getAttribute("file")});for(let ct=0;ct<ot.length;ct++){const dt=ot[ct];et.char.push({id:parseInt(dt.getAttribute("id"),10),page:parseInt(dt.getAttribute("page"),10)||0,x:parseInt(dt.getAttribute("x"),10),y:parseInt(dt.getAttribute("y"),10),width:parseInt(dt.getAttribute("width"),10),height:parseInt(dt.getAttribute("height"),10),xoffset:parseInt(dt.getAttribute("xoffset"),10),yoffset:parseInt(dt.getAttribute("yoffset"),10),xadvance:parseInt(dt.getAttribute("xadvance"),10)})}for(let ct=0;ct<at.length;ct++)et.kerning.push({first:parseInt(at[ct].getAttribute("first"),10),second:parseInt(at[ct].getAttribute("second"),10),amount:parseInt(at[ct].getAttribute("amount"),10)});for(let ct=0;ct<lt.length;ct++)et.distanceField.push({fieldType:lt[ct].getAttribute("fieldType"),distanceRange:parseInt(lt[ct].getAttribute("distanceRange"),10)});return et}}class XMLStringFormat{static test(_){return typeof _=="string"&&_.includes("<font>")?XMLFormat.test(settings.ADAPTER.parseXML(_)):!1}static parse(_){return XMLFormat.parse(settings.ADAPTER.parseXML(_))}}const formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(_e){for(let _=0;_<formats.length;_++)if(formats[_].test(_e))return formats[_];return null}function generateFillStyle(_e,_,et,tt,rt,nt){const ot=et.fill;if(Array.isArray(ot)){if(ot.length===1)return ot[0]}else return ot;let at;const lt=et.dropShadow?et.dropShadowDistance:0,ct=et.padding||0,dt=_e.width/tt-lt-ct*2,st=_e.height/tt-lt-ct*2,it=ot.slice(),ut=et.fillGradientStops.slice();if(!ut.length){const ht=it.length+1;for(let ft=1;ft<ht;++ft)ut.push(ft/ht)}if(it.unshift(ot[0]),ut.unshift(0),it.push(ot[ot.length-1]),ut.push(1),et.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){at=_.createLinearGradient(dt/2,ct,dt/2,st+ct);let ht=0;const ft=(nt.fontProperties.fontSize+et.strokeThickness)/st;for(let gt=0;gt<rt.length;gt++){const mt=nt.lineHeight*gt;for(let yt=0;yt<it.length;yt++){let bt=0;typeof ut[yt]=="number"?bt=ut[yt]:bt=yt/it.length;const vt=mt/st+bt*ft;let xt=Math.max(ht,vt);xt=Math.min(xt,1),at.addColorStop(xt,it[yt]),ht=xt}}}else{at=_.createLinearGradient(ct,st/2,dt+ct,st/2);const ht=it.length+1;let ft=1;for(let gt=0;gt<it.length;gt++){let mt;typeof ut[gt]=="number"?mt=ut[gt]:mt=ft/ht,at.addColorStop(mt,it[gt]),ft++}}return at}function drawGlyph(_e,_,et,tt,rt,nt,ot){const at=et.text,lt=et.fontProperties;_.translate(tt,rt),_.scale(nt,nt);const ct=ot.strokeThickness/2,dt=-(ot.strokeThickness/2);if(_.font=ot.toFontString(),_.lineWidth=ot.strokeThickness,_.textBaseline=ot.textBaseline,_.lineJoin=ot.lineJoin,_.miterLimit=ot.miterLimit,_.fillStyle=generateFillStyle(_e,_,ot,nt,[at],et),_.strokeStyle=ot.stroke,ot.dropShadow){const st=ot.dropShadowColor,it=ot.dropShadowBlur*nt,ut=ot.dropShadowDistance*nt;_.shadowColor=Color.shared.setValue(st).setAlpha(ot.dropShadowAlpha).toRgbaString(),_.shadowBlur=it,_.shadowOffsetX=Math.cos(ot.dropShadowAngle)*ut,_.shadowOffsetY=Math.sin(ot.dropShadowAngle)*ut}else _.shadowColor="black",_.shadowBlur=0,_.shadowOffsetX=0,_.shadowOffsetY=0;ot.stroke&&ot.strokeThickness&&_.strokeText(at,ct,dt+et.lineHeight-lt.descent),ot.fill&&_.fillText(at,ct,dt+et.lineHeight-lt.descent),_.setTransform(1,0,0,1,0,0),_.fillStyle="rgba(0, 0, 0, 0)"}function extractCharCode(_e){return _e.codePointAt?_e.codePointAt(0):_e.charCodeAt(0)}function splitTextToCharacters(_e){return Array.from?Array.from(_e):_e.split("")}function resolveCharacters(_e){typeof _e=="string"&&(_e=[_e]);const _=[];for(let et=0,tt=_e.length;et<tt;et++){const rt=_e[et];if(Array.isArray(rt)){if(rt.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${rt.length}.`);const nt=rt[0].charCodeAt(0),ot=rt[1].charCodeAt(0);if(ot<nt)throw new Error("[BitmapFont]: Invalid character range.");for(let at=nt,lt=ot;at<=lt;at++)_.push(String.fromCharCode(at))}else _.push(...splitTextToCharacters(rt))}if(_.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return _}const _BitmapFont=class rn{constructor(_,et,tt){var dt;const[rt]=_.info,[nt]=_.common,[ot]=_.page,[at]=_.distanceField,lt=getResolutionOfUrl(ot.file),ct={};this._ownsTextures=tt,this.font=rt.face,this.size=rt.size,this.lineHeight=nt.lineHeight/lt,this.chars={},this.pageTextures=ct;for(let st=0;st<_.page.length;st++){const{id:it,file:ut}=_.page[st];ct[it]=et instanceof Array?et[st]:et[ut],at!=null&&at.fieldType&&at.fieldType!=="none"&&(ct[it].baseTexture.alphaMode=ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,ct[it].baseTexture.mipmap=MIPMAP_MODES.OFF)}for(let st=0;st<_.char.length;st++){const{id:it,page:ut}=_.char[st];let{x:ht,y:ft,width:gt,height:mt,xoffset:yt,yoffset:bt,xadvance:vt}=_.char[st];ht/=lt,ft/=lt,gt/=lt,mt/=lt,yt/=lt,bt/=lt,vt/=lt;const xt=new Rectangle(ht+ct[ut].frame.x/lt,ft+ct[ut].frame.y/lt,gt,mt);this.chars[it]={xOffset:yt,yOffset:bt,xAdvance:vt,kerning:{},texture:new Texture(ct[ut].baseTexture,xt),page:ut}}for(let st=0;st<_.kerning.length;st++){let{first:it,second:ut,amount:ht}=_.kerning[st];it/=lt,ut/=lt,ht/=lt,this.chars[ut]&&(this.chars[ut].kerning[it]=ht)}this.distanceFieldRange=at==null?void 0:at.distanceRange,this.distanceFieldType=((dt=at==null?void 0:at.fieldType)==null?void 0:dt.toLowerCase())??"none"}destroy(){for(const _ in this.chars)this.chars[_].texture.destroy(),this.chars[_].texture=null;for(const _ in this.pageTextures)this._ownsTextures&&this.pageTextures[_].destroy(!0),this.pageTextures[_]=null;this.chars=null,this.pageTextures=null}static install(_,et,tt){let rt;if(_ instanceof BitmapFontData)rt=_;else{const ot=autoDetectFormat(_);if(!ot)throw new Error("Unrecognized data format for font.");rt=ot.parse(_)}et instanceof Texture&&(et=[et]);const nt=new rn(rt,et,tt);return rn.available[nt.font]=nt,nt}static uninstall(_){const et=rn.available[_];if(!et)throw new Error(`No font found named '${_}'`);et.destroy(),delete rn.available[_]}static from(_,et,tt){if(!_)throw new Error("[BitmapFont] Property `name` is required.");const{chars:rt,padding:nt,resolution:ot,textureWidth:at,textureHeight:lt,...ct}=Object.assign({},rn.defaultOptions,tt),dt=resolveCharacters(rt),st=et instanceof TextStyle?et:new TextStyle(et),it=at,ut=new BitmapFontData;ut.info[0]={face:st.fontFamily,size:st.fontSize},ut.common[0]={lineHeight:st.fontSize};let ht=0,ft=0,gt,mt,yt,bt=0;const vt=[];for(let wt=0;wt<dt.length;wt++){gt||(gt=settings.ADAPTER.createCanvas(),gt.width=at,gt.height=lt,mt=gt.getContext("2d"),yt=new BaseTexture(gt,{resolution:ot,...ct}),vt.push(new Texture(yt)),ut.page.push({id:vt.length-1,file:""}));const St=dt[wt],Et=TextMetrics.measureText(St,st,!1,gt),_t=Et.width,Tt=Math.ceil(Et.height),Rt=Math.ceil((st.fontStyle==="italic"?2:1)*_t);if(ft>=lt-Tt*ot){if(ft===0)throw new Error(`[BitmapFont] textureHeight ${lt}px is too small (fontFamily: '${st.fontFamily}', fontSize: ${st.fontSize}px, char: '${St}')`);--wt,gt=null,mt=null,yt=null,ft=0,ht=0,bt=0;continue}if(bt=Math.max(Tt+Et.fontProperties.descent,bt),Rt*ot+ht>=it){if(ht===0)throw new Error(`[BitmapFont] textureWidth ${at}px is too small (fontFamily: '${st.fontFamily}', fontSize: ${st.fontSize}px, char: '${St}')`);--wt,ft+=bt*ot,ft=Math.ceil(ft),ht=0,bt=0;continue}drawGlyph(gt,mt,Et,ht,ft,ot,st);const Ot=extractCharCode(Et.text);ut.char.push({id:Ot,page:vt.length-1,x:ht/ot,y:ft/ot,width:Rt,height:Tt,xoffset:0,yoffset:0,xadvance:_t-(st.dropShadow?st.dropShadowDistance:0)-(st.stroke?st.strokeThickness:0)}),ht+=(Rt+2*nt)*ot,ht=Math.ceil(ht)}if(!(tt!=null&&tt.skipKerning))for(let wt=0,St=dt.length;wt<St;wt++){const Et=dt[wt];for(let _t=0;_t<St;_t++){const Tt=dt[_t],Rt=mt.measureText(Et).width,Ot=mt.measureText(Tt).width,At=mt.measureText(Et+Tt).width-(Rt+Ot);At&&ut.kerning.push({first:extractCharCode(Et),second:extractCharCode(Tt),amount:At})}}const xt=new rn(ut,vt,!0);return rn.available[_]!==void 0&&rn.uninstall(_),rn.available[_]=xt,xt}};_BitmapFont.ALPHA=[["a","z"],["A","Z"]," "],_BitmapFont.NUMERIC=[["0","9"]],_BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],_BitmapFont.ASCII=[[" ","~"]],_BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:_BitmapFont.ALPHANUMERIC},_BitmapFont.available={};let BitmapFont=_BitmapFont;var msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[],_BitmapText=class xa extends Container{constructor(_,et={}){super();const{align:tt,tint:rt,maxWidth:nt,letterSpacing:ot,fontName:at,fontSize:lt}=Object.assign({},xa.styleDefaults,et);if(!BitmapFont.available[at])throw new Error(`Missing BitmapFont "${at}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=tt,this._tintColor=new Color(rt),this._font=void 0,this._fontName=at,this._fontSize=lt,this.text=_,this._maxWidth=nt,this._maxLineHeight=0,this._letterSpacing=ot,this._anchor=new ObservablePoint(()=>{this.dirty=!0},this,0,0),this._roundPixels=settings.ROUND_PIXELS,this.dirty=!0,this._resolution=settings.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var Rt;const _=BitmapFont.available[this._fontName],et=this.fontSize,tt=et/_.size,rt=new Point,nt=[],ot=[],at=[],lt=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",ct=splitTextToCharacters(lt),dt=this._maxWidth*_.size/et,st=_.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;let it=null,ut=0,ht=0,ft=0,gt=-1,mt=0,yt=0,bt=0,vt=0;for(let Ot=0;Ot<ct.length;Ot++){const At=ct[Ot],Ct=extractCharCode(At);if(/(?:\s)/.test(At)&&(gt=Ot,mt=ut,vt++),At==="\r"||At===`
`){ot.push(ut),at.push(-1),ht=Math.max(ht,ut),++ft,++yt,rt.x=0,rt.y+=_.lineHeight,it=null,vt=0;continue}const $t=_.chars[Ct];if(!$t)continue;it&&$t.kerning[it]&&(rt.x+=$t.kerning[it]);const Mt=charRenderDataPool.pop()||{texture:Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point};Mt.texture=$t.texture,Mt.line=ft,Mt.charCode=Ct,Mt.position.x=Math.round(rt.x+$t.xOffset+this._letterSpacing/2),Mt.position.y=Math.round(rt.y+$t.yOffset),Mt.prevSpaces=vt,nt.push(Mt),ut=Mt.position.x+Math.max($t.xAdvance-$t.xOffset,$t.texture.orig.width),rt.x+=$t.xAdvance+this._letterSpacing,bt=Math.max(bt,$t.yOffset+$t.texture.height),it=Ct,gt!==-1&&dt>0&&rt.x>dt&&(++yt,removeItems(nt,1+gt-yt,1+Ot-gt),Ot=gt,gt=-1,ot.push(mt),at.push(nt.length>0?nt[nt.length-1].prevSpaces:0),ht=Math.max(ht,mt),ft++,rt.x=0,rt.y+=_.lineHeight,it=null,vt=0)}const xt=ct[ct.length-1];xt!=="\r"&&xt!==`
`&&(/(?:\s)/.test(xt)&&(ut=mt),ot.push(ut),ht=Math.max(ht,ut),at.push(-1));const wt=[];for(let Ot=0;Ot<=ft;Ot++){let At=0;this._align==="right"?At=ht-ot[Ot]:this._align==="center"?At=(ht-ot[Ot])/2:this._align==="justify"&&(At=at[Ot]<0?0:(ht-ot[Ot])/at[Ot]),wt.push(At)}const St=nt.length,Et={},_t=[],Tt=this._activePagesMeshData;st.push(...Tt);for(let Ot=0;Ot<St;Ot++){const At=nt[Ot].texture,Ct=At.baseTexture.uid;if(!Et[Ct]){let $t=st.pop();if(!$t){const Dt=new MeshGeometry;let Nt,Bt;_.distanceFieldType==="none"?(Nt=new MeshMaterial(Texture.EMPTY),Bt=BLEND_MODES.NORMAL):(Nt=new MeshMaterial(Texture.EMPTY,{program:Program.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),Bt=BLEND_MODES.NORMAL_NPM);const Ut=new Mesh(Dt,Nt);Ut.blendMode=Bt,$t={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Ut,vertices:null,uvs:null,indices:null}}$t.index=0,$t.indexCount=0,$t.vertexCount=0,$t.uvsCount=0,$t.total=0;const{_textureCache:Mt}=this;Mt[Ct]=Mt[Ct]||new Texture(At.baseTexture),$t.mesh.texture=Mt[Ct],$t.mesh.tint=this._tintColor.value,_t.push($t),Et[Ct]=$t}Et[Ct].total++}for(let Ot=0;Ot<Tt.length;Ot++)_t.includes(Tt[Ot])||this.removeChild(Tt[Ot].mesh);for(let Ot=0;Ot<_t.length;Ot++)_t[Ot].mesh.parent!==this&&this.addChild(_t[Ot].mesh);this._activePagesMeshData=_t;for(const Ot in Et){const At=Et[Ot],Ct=At.total;if(!(((Rt=At.indices)==null?void 0:Rt.length)>6*Ct)||At.vertices.length<Mesh.BATCHABLE_SIZE*2)At.vertices=new Float32Array(4*2*Ct),At.uvs=new Float32Array(4*2*Ct),At.indices=new Uint16Array(6*Ct);else{const $t=At.total,Mt=At.vertices;for(let Dt=$t*4*2;Dt<Mt.length;Dt++)Mt[Dt]=0}At.mesh.size=6*Ct}for(let Ot=0;Ot<St;Ot++){const At=nt[Ot];let Ct=At.position.x+wt[At.line]*(this._align==="justify"?At.prevSpaces:1);this._roundPixels&&(Ct=Math.round(Ct));const $t=Ct*tt,Mt=At.position.y*tt,Dt=At.texture,Nt=Et[Dt.baseTexture.uid],Bt=Dt.frame,Ut=Dt._uvs,Vt=Nt.index++;Nt.indices[Vt*6+0]=0+Vt*4,Nt.indices[Vt*6+1]=1+Vt*4,Nt.indices[Vt*6+2]=2+Vt*4,Nt.indices[Vt*6+3]=0+Vt*4,Nt.indices[Vt*6+4]=2+Vt*4,Nt.indices[Vt*6+5]=3+Vt*4,Nt.vertices[Vt*8+0]=$t,Nt.vertices[Vt*8+1]=Mt,Nt.vertices[Vt*8+2]=$t+Bt.width*tt,Nt.vertices[Vt*8+3]=Mt,Nt.vertices[Vt*8+4]=$t+Bt.width*tt,Nt.vertices[Vt*8+5]=Mt+Bt.height*tt,Nt.vertices[Vt*8+6]=$t,Nt.vertices[Vt*8+7]=Mt+Bt.height*tt,Nt.uvs[Vt*8+0]=Ut.x0,Nt.uvs[Vt*8+1]=Ut.y0,Nt.uvs[Vt*8+2]=Ut.x1,Nt.uvs[Vt*8+3]=Ut.y1,Nt.uvs[Vt*8+4]=Ut.x2,Nt.uvs[Vt*8+5]=Ut.y2,Nt.uvs[Vt*8+6]=Ut.x3,Nt.uvs[Vt*8+7]=Ut.y3}this._textWidth=ht*tt,this._textHeight=(rt.y+_.lineHeight)*tt;for(const Ot in Et){const At=Et[Ot];if(this.anchor.x!==0||this.anchor.y!==0){let Dt=0;const Nt=this._textWidth*this.anchor.x,Bt=this._textHeight*this.anchor.y;for(let Ut=0;Ut<At.total;Ut++)At.vertices[Dt++]-=Nt,At.vertices[Dt++]-=Bt,At.vertices[Dt++]-=Nt,At.vertices[Dt++]-=Bt,At.vertices[Dt++]-=Nt,At.vertices[Dt++]-=Bt,At.vertices[Dt++]-=Nt,At.vertices[Dt++]-=Bt}this._maxLineHeight=bt*tt;const Ct=At.mesh.geometry.getBuffer("aVertexPosition"),$t=At.mesh.geometry.getBuffer("aTextureCoord"),Mt=At.mesh.geometry.getIndex();Ct.data=At.vertices,$t.data=At.uvs,Mt.data=At.indices,Ct.update(),$t.update(),Mt.update()}for(let Ot=0;Ot<nt.length;Ot++)charRenderDataPool.push(nt[Ot]);this._font=_,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0);const{distanceFieldRange:et,distanceFieldType:tt,size:rt}=BitmapFont.available[this._fontName];if(tt!=="none"){const{a:nt,b:ot,c:at,d:lt}=this.worldTransform,ct=Math.sqrt(nt*nt+ot*ot),dt=Math.sqrt(at*at+lt*lt),st=(Math.abs(ct)+Math.abs(dt))/2,it=this.fontSize/rt,ut=_._view.resolution;for(const ht of this._activePagesMeshData)ht.mesh.shader.uniforms.uFWidth=st*et*it*ut}super._render(_)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const _=BitmapFont.available[this._fontName];if(!_)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==_&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(_){if(this.tint!==_){this._tintColor.setValue(_);for(let et=0;et<this._activePagesMeshData.length;et++)this._activePagesMeshData[et].mesh.tint=_}}get align(){return this._align}set align(_){this._align!==_&&(this._align=_,this.dirty=!0)}get fontName(){return this._fontName}set fontName(_){if(!BitmapFont.available[_])throw new Error(`Missing BitmapFont "${_}"`);this._fontName!==_&&(this._fontName=_,this.dirty=!0)}get fontSize(){return this._fontSize??BitmapFont.available[this._fontName].size}set fontSize(_){this._fontSize!==_&&(this._fontSize=_,this.dirty=!0)}get anchor(){return this._anchor}set anchor(_){typeof _=="number"?this._anchor.set(_):this._anchor.copyFrom(_)}get text(){return this._text}set text(_){_=String(_??""),this._text!==_&&(this._text=_,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(_){this._maxWidth!==_&&(this._maxWidth=_,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(_){this._letterSpacing!==_&&(this._letterSpacing=_,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(_){_!==this._roundPixels&&(this._roundPixels=_,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}destroy(_){const{_textureCache:et}=this,tt=BitmapFont.available[this._fontName].distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;tt.push(...this._activePagesMeshData);for(const rt of this._activePagesMeshData)this.removeChild(rt.mesh);this._activePagesMeshData=[],tt.filter(rt=>et[rt.mesh.texture.baseTexture.uid]).forEach(rt=>{rt.mesh.texture=Texture.EMPTY});for(const rt in et)et[rt].destroy(),delete et[rt];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(_)}};_BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const validExtensions=[".xml",".fnt"],loadBitmapFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},name:"loadBitmapFont",test(_e){return validExtensions.includes(path.extname(_e).toLowerCase())},async testParse(_e){return TextFormat.test(_e)||XMLStringFormat.test(_e)},async parse(_e,_,et){const tt=TextFormat.test(_e)?TextFormat.parse(_e):XMLStringFormat.parse(_e),{src:rt}=_,{page:nt}=tt,ot=[];for(let ct=0;ct<nt.length;++ct){const dt=nt[ct].file;let st=path.join(path.dirname(rt),dt);st=copySearchParams(st,rt),ot.push(st)}const at=await et.load(ot),lt=ot.map(ct=>at[ct]);return BitmapFont.install(tt,lt,!0)},async load(_e,_){return(await settings.ADAPTER.fetch(_e)).text()},unload(_e){_e.destroy()}};extensions$1.add(loadBitmapFont);const _HTMLTextStyle=class wn extends TextStyle{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(_){return new wn(Object.keys(wn.defaultOptions).reduce((et,tt)=>({...et,[tt]:_[tt]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(_=>{URL.revokeObjectURL(_.src),_.refs--,_.refs===0&&(_.fontFace&&document.fonts.delete(_.fontFace),delete wn.availableFonts[_.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(_,et={}){const{availableFonts:tt}=wn;if(tt[_]){const rt=tt[_];return this._fonts.push(rt),rt.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return settings.ADAPTER.fetch(_).then(rt=>rt.blob()).then(async rt=>new Promise((nt,ot)=>{const at=URL.createObjectURL(rt),lt=new FileReader;lt.onload=()=>nt([at,lt.result]),lt.onerror=ot,lt.readAsDataURL(rt)})).then(async([rt,nt])=>{const ot=Object.assign({family:path.basename(_,path.extname(_)),weight:"normal",style:"normal",display:"auto",src:rt,dataSrc:nt,refs:1,originalUrl:_,fontFace:null},et);tt[_]=ot,this._fonts.push(ot),this.styleID++;const at=new FontFace(ot.family,`url(${ot.src})`,{weight:ot.weight,style:ot.style,display:ot.display});ot.fontFace=at,await at.load(),document.fonts.add(at),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(..._){const et=_.filter(tt=>!this._overrides.includes(tt));et.length>0&&(this._overrides.push(...et),this.styleID++)}removeOverride(..._){const et=_.filter(tt=>this._overrides.includes(tt));et.length>0&&(this._overrides=this._overrides.filter(tt=>!et.includes(tt)),this.styleID++)}toCSS(_){return[`transform: scale(${_})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((_,et)=>`${_}
            @font-face {
                font-family: "${et.family}";
                src: url('${et.dataSrc}');
                font-weight: ${et.weight};
                font-style: ${et.style};
                font-display: ${et.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(_){this._stylesheet!==_&&(this._stylesheet=_,this.styleID++)}normalizeColor(_){return Array.isArray(_)&&(_=rgb2hex(_)),typeof _=="number"?hex2string(_):_}dropShadowToCSS(){let _=this.normalizeColor(this.dropShadowColor);const et=this.dropShadowAlpha,tt=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),rt=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);_.startsWith("#")&&et<1&&(_+=(et*255|0).toString(16).padStart(2,"0"));const nt=`${tt}px ${rt}px`;return this.dropShadowBlur>0?`text-shadow: ${nt} ${this.dropShadowBlur}px ${_}`:`text-shadow: ${nt} ${_}`}reset(){Object.assign(this,wn.defaultOptions)}onBeforeDraw(){const{fontsDirty:_}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&_?new Promise(et=>setTimeout(et,100)):Promise.resolve()}get isSafari(){const{userAgent:_}=settings.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(_)}set fillGradientStops(_){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(_){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(_){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(_){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(_){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(_){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(_){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};_HTMLTextStyle.availableFonts={},_HTMLTextStyle.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let HTMLTextStyle=_HTMLTextStyle;const _HTMLText=class En extends Sprite{constructor(_="",et={}){super(Texture.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const tt=new Image,rt=Texture.from(tt,{scaleMode:settings.SCALE_MODE,resourceOptions:{autoLoad:!1}});rt.orig=new Rectangle,rt.trim=new Rectangle,this.texture=rt;const nt="http://www.w3.org/2000/svg",ot="http://www.w3.org/1999/xhtml",at=document.createElementNS(nt,"svg"),lt=document.createElementNS(nt,"foreignObject"),ct=document.createElementNS(ot,"div"),dt=document.createElementNS(ot,"style");lt.setAttribute("width","10000"),lt.setAttribute("height","10000"),lt.style.overflow="hidden",at.appendChild(lt),this.maxWidth=En.defaultMaxWidth,this.maxHeight=En.defaultMaxHeight,this._domElement=ct,this._styleElement=dt,this._svgRoot=at,this._foreignObject=lt,this._foreignObject.appendChild(dt),this._foreignObject.appendChild(ct),this._image=tt,this._loadImage=new Image,this._autoResolution=En.defaultAutoResolution,this._resolution=En.defaultResolution??settings.RESOLUTION,this.text=_,this.style=et}measureText(_){var dt,st;const{text:et,style:tt,resolution:rt}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},_);Object.assign(this._domElement,{innerHTML:et,style:tt.toCSS(rt)}),this._styleElement.textContent=tt.toGlobalCSS(),document.body.appendChild(this._svgRoot);const nt=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:ot,height:at}=nt;(ot>this.maxWidth||at>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const lt=Math.min(this.maxWidth,Math.ceil(ot)),ct=Math.min(this.maxHeight,Math.ceil(at));return this._svgRoot.setAttribute("width",lt.toString()),this._svgRoot.setAttribute("height",ct.toString()),et!==this._text&&(this._domElement.innerHTML=this._text),tt!==this._style&&(Object.assign(this._domElement,{style:(dt=this._style)==null?void 0:dt.toCSS(rt)}),this._styleElement.textContent=(st=this._style)==null?void 0:st.toGlobalCSS()),{width:lt+tt.padding*2,height:ct+tt.padding*2}}async updateText(_=!0){const{style:et,_image:tt,_loadImage:rt}=this;if(this.localStyleID!==et.styleID&&(this.dirty=!0,this.localStyleID=et.styleID),!this.dirty&&_)return;const{width:nt,height:ot}=this.measureText();tt.width=rt.width=Math.ceil(Math.max(1,nt)),tt.height=rt.height=Math.ceil(Math.max(1,ot)),this._updateID++;const at=this._updateID;await new Promise(lt=>{rt.onload=async()=>{if(at<this._updateID){lt();return}await et.onBeforeDraw(),tt.src=rt.src,rt.onload=null,rt.src="",this.updateTexture(),lt()};const ct=new XMLSerializer().serializeToString(this._svgRoot);rt.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(ct)}`})}get source(){return this._image}updateTexture(){const{style:_,texture:et,_image:tt,resolution:rt}=this,{padding:nt}=_,{baseTexture:ot}=et;et.trim.width=et._frame.width=tt.width/rt,et.trim.height=et._frame.height=tt.height/rt,et.trim.x=-nt,et.trim.y=-nt,et.orig.width=et._frame.width-nt*2,et.orig.height=et._frame.height-nt*2,this._onTextureUpdate(),ot.setRealSize(tt.width,tt.height,rt),this.dirty=!1}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._render(_)}_renderCanvas(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(_)}getLocalBounds(_){return this.updateText(!0),super.getLocalBounds(_)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(_){var tt,rt,nt,ot,at;typeof _=="boolean"&&(_={children:_}),_=Object.assign({},En.defaultDestroyOptions,_),super.destroy(_);const et=null;this.ownsStyle&&((tt=this._style)==null||tt.cleanFonts()),this._style=et,(rt=this._svgRoot)==null||rt.remove(),this._svgRoot=et,(nt=this._domElement)==null||nt.remove(),this._domElement=et,(ot=this._foreignObject)==null||ot.remove(),this._foreignObject=et,(at=this._styleElement)==null||at.remove(),this._styleElement=et,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=et,this._image.src="",this._image=et}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(_){this.updateText(!0);const et=sign(this.scale.x)||1;this.scale.x=et*_/this._image.width/this.resolution,this._width=_}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(_){this.updateText(!0);const et=sign(this.scale.y)||1;this.scale.y=et*_/this._image.height/this.resolution,this._height=_}get style(){return this._style}set style(_){this._style!==_&&(_=_||{},_ instanceof HTMLTextStyle?(this.ownsStyle=!1,this._style=_):_ instanceof TextStyle?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=HTMLTextStyle.from(_)):(this.ownsStyle=!0,this._style=new HTMLTextStyle(_)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(_){_=String(_===""||_===null||_===void 0?" ":_),_=this.sanitiseText(_),this._text!==_&&(this._text=_,this.dirty=!0)}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}sanitiseText(_){return _.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};_HTMLText.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_HTMLText.defaultMaxWidth=2024,_HTMLText.defaultMaxHeight=2024,_HTMLText.defaultAutoResolution=!0;var __defProp=Object.defineProperty,__pow=Math.pow,__defNormalProp=(_e,_,et)=>_ in _e?__defProp(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:et}):_e[_]=et,__publicField=(_e,_,et)=>(__defNormalProp(_e,typeof _!="symbol"?_+"":_,et),et),__async=(_e,_,et)=>new Promise((tt,rt)=>{var nt=lt=>{try{at(et.next(lt))}catch(ct){rt(ct)}},ot=lt=>{try{at(et.throw(lt))}catch(ct){rt(ct)}},at=lt=>lt.done?tt(lt.value):Promise.resolve(lt.value).then(nt,ot);at((et=et.apply(_e,_)).next())});const LOGICAL_WIDTH=2,LOGICAL_HEIGHT=2;var CubismConfig;(_e=>{_e.supportMoreMaskDivisions=!0,_e.setOpacityFromMotion=!1})(CubismConfig||(CubismConfig={}));const LOG_LEVEL_VERBOSE=0,LOG_LEVEL_WARNING=1,LOG_LEVEL_ERROR=2,LOG_LEVEL_NONE=999,config={LOG_LEVEL_VERBOSE,LOG_LEVEL_WARNING,LOG_LEVEL_ERROR,LOG_LEVEL_NONE,logLevel:LOG_LEVEL_WARNING,sound:!0,motionSync:!0,motionFadingDuration:500,idleMotionFadingDuration:2e3,expressionFadingDuration:500,preserveExpressionOnMotion:!0,cubism4:CubismConfig},logger={log(_e,..._){},warn(_e,..._){console.warn(`[${_e}]`,..._)},error(_e,..._){console.error(`[${_e}]`,..._)}};function clamp(_e,_,et){return _e<_?_:_e>et?et:_e}function rand(_e,_){return Math.random()*(_-_e)+_e}function copyProperty(_e,_,et,tt,rt){const nt=_[tt];nt!==null&&typeof nt===_e&&(et[rt]=nt)}function copyArray(_e,_,et,tt,rt){const nt=_[tt];Array.isArray(nt)&&(et[rt]=nt.filter(ot=>ot!==null&&typeof ot===_e))}function applyMixins(_e,_){_.forEach(et=>{Object.getOwnPropertyNames(et.prototype).forEach(tt=>{tt!=="constructor"&&Object.defineProperty(_e.prototype,tt,Object.getOwnPropertyDescriptor(et.prototype,tt))})})}function folderName(_e){let _=_e.lastIndexOf("/");return _!=-1&&(_e=_e.slice(0,_)),_=_e.lastIndexOf("/"),_!==-1&&(_e=_e.slice(_+1)),_e}function remove(_e,_){const et=_e.indexOf(_);et!==-1&&_e.splice(et,1)}class ExpressionManager extends EventEmitter{constructor(_,et){super(),__publicField(this,"tag"),__publicField(this,"settings"),__publicField(this,"expressions",[]),__publicField(this,"defaultExpression"),__publicField(this,"currentExpression"),__publicField(this,"reserveExpressionIndex",-1),__publicField(this,"destroyed",!1),this.settings=_,this.tag=`ExpressionManager(${_.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(_){return __async(this,null,function*(){if(!this.definitions[_]){logger.warn(this.tag,`Undefined expression at [${_}]`);return}if(this.expressions[_]===null){logger.warn(this.tag,`Cannot set expression at [${_}] because it's already failed in loading.`);return}if(this.expressions[_])return this.expressions[_];const et=yield this._loadExpression(_);return this.expressions[_]=et,et})}_loadExpression(_){throw new Error("Not implemented.")}setRandomExpression(){return __async(this,null,function*(){if(this.definitions.length){const _=[];for(let et=0;et<this.definitions.length;et++)this.expressions[et]!==null&&this.expressions[et]!==this.currentExpression&&et!==this.reserveExpressionIndex&&_.push(et);if(_.length){const et=Math.floor(Math.random()*_.length);return this.setExpression(et)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(_){return __async(this,null,function*(){if(typeof _!="number"&&(_=this.getExpressionIndex(_)),!(_>-1&&_<this.definitions.length)||_===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=_;const et=yield this.loadExpression(_);return!et||this.reserveExpressionIndex!==_?!1:(this.reserveExpressionIndex=-1,this.currentExpression=et,this._setExpression(et),!0)})}update(_,et){return this.isFinished()?!1:this.updateParameters(_,et)}destroy(){this.destroyed=!0,this.emit("destroy");const _=this;_.definitions=void 0,_.expressions=void 0}}const EPSILON=.01,MAX_SPEED=40/7.5,ACCELERATION_TIME=1/(.15*1e3);class FocusController{constructor(){__publicField(this,"targetX",0),__publicField(this,"targetY",0),__publicField(this,"x",0),__publicField(this,"y",0),__publicField(this,"vx",0),__publicField(this,"vy",0)}focus(_,et,tt=!1){this.targetX=clamp(_,-1,1),this.targetY=clamp(et,-1,1),tt&&(this.x=this.targetX,this.y=this.targetY)}update(_){const et=this.targetX-this.x,tt=this.targetY-this.y;if(Math.abs(et)<EPSILON&&Math.abs(tt)<EPSILON)return;const rt=Math.sqrt(__pow(et,2)+__pow(tt,2)),nt=MAX_SPEED/(1e3/_);let ot=nt*(et/rt)-this.vx,at=nt*(tt/rt)-this.vy;const lt=Math.sqrt(__pow(ot,2)+__pow(at,2)),ct=nt*ACCELERATION_TIME*_;lt>ct&&(ot*=ct/lt,at*=ct/lt),this.vx+=ot,this.vy+=at;const dt=Math.sqrt(__pow(this.vx,2)+__pow(this.vy,2)),st=.5*(Math.sqrt(__pow(ct,2)+8*ct*rt)-ct);dt>st&&(this.vx*=st/dt,this.vy*=st/dt),this.x+=this.vx,this.y+=this.vy}}class ModelSettings{constructor(_){__publicField(this,"json"),__publicField(this,"name"),__publicField(this,"url"),__publicField(this,"pose"),__publicField(this,"physics"),this.json=_;const et=_.url;if(typeof et!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=et,this.name=folderName(this.url)}resolveURL(_){return url.resolve(this.url,_)}replaceFiles(_){this.moc=_(this.moc,"moc"),this.pose!==void 0&&(this.pose=_(this.pose,"pose")),this.physics!==void 0&&(this.physics=_(this.physics,"physics"));for(let et=0;et<this.textures.length;et++)this.textures[et]=_(this.textures[et],`textures[${et}]`)}getDefinedFiles(){const _=[];return this.replaceFiles(et=>(_.push(et),et)),_}validateFiles(_){const et=(nt,ot)=>{const at=this.resolveURL(nt);if(!_.includes(at)){if(ot)throw new Error(`File "${nt}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(nt=>et(nt,!0)),this.getDefinedFiles().filter(nt=>et(nt,!1))}}var MotionPriority=(_e=>(_e[_e.NONE=0]="NONE",_e[_e.IDLE=1]="IDLE",_e[_e.NORMAL=2]="NORMAL",_e[_e.FORCE=3]="FORCE",_e))(MotionPriority||{});class MotionState{constructor(){__publicField(this,"tag"),__publicField(this,"debug",!1),__publicField(this,"currentPriority",0),__publicField(this,"reservePriority",0),__publicField(this,"currentGroup"),__publicField(this,"currentIndex"),__publicField(this,"reservedGroup"),__publicField(this,"reservedIndex"),__publicField(this,"reservedIdleGroup"),__publicField(this,"reservedIdleIndex")}reserve(_,et,tt){if(tt<=0)return logger.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(_===this.currentGroup&&et===this.currentIndex)return logger.log(this.tag,"Motion is already playing.",this.dump(_,et)),!1;if(_===this.reservedGroup&&et===this.reservedIndex||_===this.reservedIdleGroup&&et===this.reservedIdleIndex)return logger.log(this.tag,"Motion is already reserved.",this.dump(_,et)),!1;if(tt===1){if(this.currentPriority!==0)return logger.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(_,et)),!1;if(this.reservedIdleGroup!==void 0)return logger.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(_,et)),!1;this.setReservedIdle(_,et)}else{if(tt<3){if(tt<=this.currentPriority)return logger.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(_,et)),!1;if(tt<=this.reservePriority)return logger.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(_,et)),!1}this.setReserved(_,et,tt)}return!0}start(_,et,tt,rt){if(rt===1){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==0)return logger.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(et,tt)),!1}else{if(et!==this.reservedGroup||tt!==this.reservedIndex)return logger.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(et,tt)),!1;this.setReserved(void 0,void 0,0)}return _?(this.setCurrent(et,tt,rt),!0):!1}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(_,et,tt){this.currentPriority=tt,this.currentGroup=_,this.currentIndex=et}setReserved(_,et,tt){this.reservePriority=tt,this.reservedGroup=_,this.reservedIndex=et}setReservedIdle(_,et){this.reservedIdleGroup=_,this.reservedIdleIndex=et}isActive(_,et){return _===this.currentGroup&&et===this.currentIndex||_===this.reservedGroup&&et===this.reservedIndex||_===this.reservedIdleGroup&&et===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return!config.preserveExpressionOnMotion}dump(_,et){if(this.debug){const tt=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return`
<Requested> group = "${_}", index = ${et}
`+tt.map(rt=>"["+rt+"] "+this[rt]).join(`
`)}return""}}const TAG$2="SoundManager",VOLUME=.5;class SoundManager{static get volume(){return this._volume}static set volume(_){this._volume=(_>1?1:_<0?0:_)||0,this.audios.forEach(et=>et.volume=this._volume)}static add(_,et,tt,rt){const nt=new Audio(_);return nt.volume=this._volume,nt.preload="auto",nt.crossOrigin=rt,nt.addEventListener("ended",()=>{this.dispose(nt),et==null||et()}),nt.addEventListener("error",ot=>{this.dispose(nt),logger.warn(TAG$2,`Error occurred on "${_}"`,ot.error),tt==null||tt(ot.error)}),this.audios.push(nt),nt}static play(_){return new Promise((et,tt)=>{var rt;(rt=_.play())==null||rt.catch(nt=>{_.dispatchEvent(new ErrorEvent("error",{error:nt})),tt(nt)}),_.readyState===_.HAVE_ENOUGH_DATA?et():_.addEventListener("canplaythrough",et)})}static addContext(_){const et=new AudioContext;return this.contexts.push(et),et}static addAnalyzer(_,et){const tt=et.createMediaElementSource(_),rt=et.createAnalyser();return rt.fftSize=256,rt.minDecibels=-90,rt.maxDecibels=-10,rt.smoothingTimeConstant=.85,tt.connect(rt),rt.connect(et.destination),this.analysers.push(rt),rt}static analyze(_){if(_!=null){const et=new Float32Array(_.fftSize);let tt=0;_.getFloatTimeDomainData(et);for(const rt of et)tt+=rt*rt;return parseFloat(Math.sqrt(tt/et.length*20).toFixed(1))}else return parseFloat(Math.random().toFixed(1))}static dispose(_){_.pause(),_.removeAttribute("src"),remove(this.audios,_)}static destroy(){for(let _=this.contexts.length-1;_>=0;_--)this.contexts[_].close();for(let _=this.audios.length-1;_>=0;_--)this.dispose(this.audios[_])}}__publicField(SoundManager,"audios",[]);__publicField(SoundManager,"analysers",[]);__publicField(SoundManager,"contexts",[]);__publicField(SoundManager,"_volume",VOLUME);var MotionPreloadStrategy=(_e=>(_e.ALL="ALL",_e.IDLE="IDLE",_e.NONE="NONE",_e))(MotionPreloadStrategy||{});class MotionManager extends EventEmitter{constructor(_,et){super(),__publicField(this,"tag"),__publicField(this,"settings"),__publicField(this,"motionGroups",{}),__publicField(this,"state",new MotionState),__publicField(this,"currentAudio"),__publicField(this,"currentAnalyzer"),__publicField(this,"currentContext"),__publicField(this,"playing",!1),__publicField(this,"destroyed",!1),this.settings=_,this.tag=`MotionManager(${_.name})`,this.state.tag=this.tag}init(_){_!=null&&_.idleMotionGroup&&(this.groups.idle=_.idleMotionGroup),this.setupMotions(_),this.stopAllMotions()}setupMotions(_){for(const tt of Object.keys(this.definitions))this.motionGroups[tt]=[];let et;switch(_==null?void 0:_.motionPreload){case"NONE":return;case"ALL":et=Object.keys(this.definitions);break;case"IDLE":default:et=[this.groups.idle];break}for(const tt of et)if(this.definitions[tt])for(let rt=0;rt<this.definitions[tt].length;rt++)this.loadMotion(tt,rt).then()}loadMotion(_,et){return __async(this,null,function*(){var tt;if(!((tt=this.definitions[_])!=null&&tt[et])){logger.warn(this.tag,`Undefined motion at "${_}"[${et}]`);return}if(this.motionGroups[_][et]===null){logger.warn(this.tag,`Cannot start motion at "${_}"[${et}] because it's already failed in loading.`);return}if(this.motionGroups[_][et])return this.motionGroups[_][et];const rt=yield this._loadMotion(_,et);if(!this.destroyed)return this.motionGroups[_][et]=rt??null,rt})}_loadMotion(_,et){throw new Error("Not implemented.")}speak(_){return __async(this,arguments,function*(et,{volume:tt=VOLUME,expression:rt,resetExpression:nt=!0,crossOrigin:ot,onFinish:at,onError:lt}={}){let ct,dt,st;if(this.currentAudio&&!this.currentAudio.ended)return!1;let it;const ut=et&&et.startsWith("data:");if(console.log(at),et&&!ut){const ft=document.createElement("a");ft.href=et,et=ft.href,it=et}else it="data:audio/";const ht=et;if(ht)try{ct=SoundManager.add(ht,(ft=this)=>{console.log("Audio finished playing"),at==null||at(),nt&&rt&&ft.expressionManager&&ft.expressionManager.resetExpression(),ft.currentAudio=void 0},(ft,gt=this)=>{console.log("Error during audio playback:",ft),lt==null||lt(ft),nt&&rt&&gt.expressionManager&&gt.expressionManager.resetExpression(),gt.currentAudio=void 0},ot),this.currentAudio=ct,SoundManager.volume=tt,st=SoundManager.addContext(this.currentAudio),this.currentContext=st,dt=SoundManager.addAnalyzer(this.currentAudio,this.currentContext),this.currentAnalyzer=dt}catch(ft){return logger.warn(this.tag,"Failed to create audio",it,ft),!1}if(ct){let ft=!0;if(yield SoundManager.play(ct).catch(mt=>{logger.warn(this.tag,"Failed to play audio",ct.src,mt),ft=!1}),!ft)return!1}return this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),rt&&this.expressionManager&&this.expressionManager.setExpression(rt),this.playing=!0,!0})}startMotion(_,et){return __async(this,arguments,function*(tt,rt,nt=MotionPriority.NORMAL,{sound:ot=void 0,volume:at=VOLUME,expression:lt=void 0,resetExpression:ct=!0,crossOrigin:dt,onFinish:st,onError:it}={}){var ut;if(!this.state.reserve(tt,rt,nt)||this.currentAudio&&!this.currentAudio.ended&&nt!=MotionPriority.FORCE)return!1;const ht=(ut=this.definitions[tt])==null?void 0:ut[rt];if(!ht)return!1;this.currentAudio&&SoundManager.dispose(this.currentAudio);let ft,gt,mt,yt;const bt=ot&&ot.startsWith("data:");if(ot&&!bt){const wt=document.createElement("a");wt.href=ot,ot=wt.href,yt=ot}else yt=this.getSoundFile(ht),yt&&(yt=this.settings.resolveURL(yt));const vt=yt;if(vt)try{ft=SoundManager.add(vt,(wt=this)=>{console.log("Audio finished playing"),st==null||st(),console.log(st),ct&&lt&&wt.expressionManager&&wt.expressionManager.resetExpression(),wt.currentAudio=void 0},(wt,St=this)=>{console.log("Error during audio playback:",wt),it==null||it(wt),ct&&lt&&St.expressionManager&&St.expressionManager.resetExpression(),St.currentAudio=void 0},dt),this.currentAudio=ft,SoundManager.volume=at,mt=SoundManager.addContext(this.currentAudio),this.currentContext=mt,gt=SoundManager.addAnalyzer(this.currentAudio,this.currentContext),this.currentAnalyzer=gt}catch(wt){logger.warn(this.tag,"Failed to create audio",yt,wt)}const xt=yield this.loadMotion(tt,rt);return ft&&(yield SoundManager.play(ft).catch(St=>logger.warn(this.tag,"Failed to play audio",ft.src,St))),this.state.start(xt,tt,rt,nt)?(this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),logger.log(this.tag,"Start motion:",this.getMotionName(ht)),this.emit("motionStart",tt,rt,ft),lt&&this.expressionManager&&this.state.shouldOverrideExpression()&&this.expressionManager.setExpression(lt),this.playing=!0,this._startMotion(xt),!0):(ft&&(SoundManager.dispose(ft),this.currentAudio=void 0),!1)})}startRandomMotion(_,et){return __async(this,arguments,function*(tt,rt,{sound:nt,volume:ot=VOLUME,expression:at,resetExpression:lt=!0,crossOrigin:ct,onFinish:dt,onError:st}={}){const it=this.definitions[tt];if(it!=null&&it.length){const ut=[];for(let ht=0;ht<it.length;ht++)this.motionGroups[tt][ht]!==null&&!this.state.isActive(tt,ht)&&ut.push(ht);if(ut.length){const ht=ut[Math.floor(Math.random()*ut.length)];return this.startMotion(tt,ht,rt,{sound:nt,volume:ot,expression:at,resetExpression:lt,crossOrigin:ct,onFinish:dt,onError:st})}}return!1})}stopSpeaking(){this.currentAudio&&(SoundManager.dispose(this.currentAudio),this.currentAudio=void 0)}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.stopSpeaking()}update(_,et){var tt;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((tt=this.expressionManager)==null||tt.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,MotionPriority.IDLE)),this.updateParameters(_,et)}mouthSync(){return this.currentAnalyzer?SoundManager.analyze(this.currentAnalyzer):0}destroy(){var _;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(_=this.expressionManager)==null||_.destroy();const et=this;et.definitions=void 0,et.motionGroups=void 0}}const tempBounds={x:0,y:0,width:0,height:0};class InternalModel extends EventEmitter{constructor(){super(...arguments),__publicField(this,"focusController",new FocusController),__publicField(this,"pose"),__publicField(this,"physics"),__publicField(this,"originalWidth",0),__publicField(this,"originalHeight",0),__publicField(this,"width",0),__publicField(this,"height",0),__publicField(this,"localTransform",new Matrix),__publicField(this,"drawingMatrix",new Matrix),__publicField(this,"hitAreas",{}),__publicField(this,"textureFlipY",!1),__publicField(this,"viewport",[0,0,0,0]),__publicField(this,"destroyed",!1)}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const _=this,et=this.getSize();_.originalWidth=et[0],_.originalHeight=et[1];const tt=Object.assign({width:LOGICAL_WIDTH,height:LOGICAL_HEIGHT},this.getLayout());this.localTransform.scale(tt.width/LOGICAL_WIDTH,tt.height/LOGICAL_HEIGHT),_.width=this.originalWidth*this.localTransform.a,_.height=this.originalHeight*this.localTransform.d;const rt=tt.x!==void 0&&tt.x-tt.width/2||tt.centerX!==void 0&&tt.centerX||tt.left!==void 0&&tt.left-tt.width/2||tt.right!==void 0&&tt.right+tt.width/2||0,nt=tt.y!==void 0&&tt.y-tt.height/2||tt.centerY!==void 0&&tt.centerY||tt.top!==void 0&&tt.top-tt.height/2||tt.bottom!==void 0&&tt.bottom+tt.height/2||0;this.localTransform.translate(this.width*rt,-this.height*nt)}setupHitAreas(){const _=this.getHitAreaDefs().filter(et=>et.index>=0);for(const et of _)this.hitAreas[et.name]=et}hitTest(_,et){return Object.keys(this.hitAreas).filter(tt=>this.isHit(tt,_,et))}isHit(_,et,tt){if(!this.hitAreas[_])return!1;const rt=this.hitAreas[_].index,nt=this.getDrawableBounds(rt,tempBounds);return nt.x<=et&&et<=nt.x+nt.width&&nt.y<=tt&&tt<=nt.y+nt.height}getDrawableBounds(_,et){const tt=this.getDrawableVertices(_);let rt=tt[0],nt=tt[0],ot=tt[1],at=tt[1];for(let lt=0;lt<tt.length;lt+=2){const ct=tt[lt],dt=tt[lt+1];rt=Math.min(ct,rt),nt=Math.max(ct,nt),ot=Math.min(dt,ot),at=Math.max(dt,at)}return et??(et={}),et.x=rt,et.y=ot,et.width=nt-rt,et.height=at-ot,et}updateTransform(_){this.drawingMatrix.copyFrom(_).append(this.localTransform)}update(_,et){this.focusController.update(_)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}const TAG$1="XHRLoader";class NetworkError extends Error{constructor(_,et,tt,rt=!1){super(_),this.url=et,this.status=tt,this.aborted=rt}}const _XHRLoader=class qr{static createXHR(_,et,tt,rt,nt){const ot=new XMLHttpRequest;if(qr.allXhrSet.add(ot),_){let at=qr.xhrMap.get(_);at?at.add(ot):(at=new Set([ot]),qr.xhrMap.set(_,at)),_.listeners("destroy").includes(qr.cancelXHRs)||_.once("destroy",qr.cancelXHRs)}return ot.open("GET",et),ot.responseType=tt,ot.onload=()=>{(ot.status===200||ot.status===0)&&ot.response?rt(ot.response):ot.onerror()},ot.onerror=()=>{logger.warn(TAG$1,`Failed to load resource as ${ot.responseType} (Status ${ot.status}): ${et}`),nt(new NetworkError("Network error.",et,ot.status))},ot.onabort=()=>nt(new NetworkError("Aborted.",et,ot.status,!0)),ot.onloadend=()=>{var at;qr.allXhrSet.delete(ot),_&&((at=qr.xhrMap.get(_))==null||at.delete(ot))},ot}static cancelXHRs(){var _;(_=qr.xhrMap.get(this))==null||_.forEach(et=>{et.abort(),qr.allXhrSet.delete(et)}),qr.xhrMap.delete(this)}static release(){qr.allXhrSet.forEach(_=>_.abort()),qr.allXhrSet.clear(),qr.xhrMap=new WeakMap}};__publicField(_XHRLoader,"xhrMap",new WeakMap);__publicField(_XHRLoader,"allXhrSet",new Set);__publicField(_XHRLoader,"loader",(_e,_)=>new Promise((et,tt)=>{_XHRLoader.createXHR(_e.target,_e.settings?_e.settings.resolveURL(_e.url):_e.url,_e.type,nt=>{_e.result=nt,et()},tt).send()}));let XHRLoader=_XHRLoader;function runMiddlewares(_e,_){let et=-1;return tt(0);function tt(rt,nt){if(nt)return Promise.reject(nt);if(rt<=et)return Promise.reject(new Error("next() called multiple times"));et=rt;const ot=_e[rt];if(!ot)return Promise.resolve();try{return Promise.resolve(ot(_,tt.bind(null,rt+1)))}catch(at){return Promise.reject(at)}}}class Live2DLoader{static load(_){return runMiddlewares(this.middlewares,_).then(()=>_.result)}}__publicField(Live2DLoader,"middlewares",[XHRLoader.loader]);function createTexture(_e,_={}){var et;const tt={resourceOptions:{crossorigin:_.crossOrigin}};if(Texture.fromURL)return Texture.fromURL(_e,tt).catch(ot=>{if(ot instanceof Error)throw ot;const at=new Error("Texture loading error");throw at.event=ot,at});tt.resourceOptions.autoLoad=!1;const rt=Texture.from(_e,tt);if(rt.baseTexture.valid)return Promise.resolve(rt);const nt=rt.baseTexture.resource;return(et=nt._live2d_load)!=null||(nt._live2d_load=new Promise((ot,at)=>{const lt=ct=>{nt.source.removeEventListener("error",lt);const dt=new Error("Texture loading error");dt.event=ct,at(dt)};nt.source.addEventListener("error",lt),nt.load().then(()=>ot(rt)).catch(lt)})),nt._live2d_load}function noop(){}const TAG="Live2DFactory",urlToJSON=(_e,_)=>__async(void 0,null,function*(){if(typeof _e.source=="string"){const et=yield Live2DLoader.load({url:_e.source,type:"json",target:_e.live2dModel});et.url=_e.source,_e.source=et,_e.live2dModel.emit("settingsJSONLoaded",et)}return _()}),jsonToSettings=(_e,_)=>__async(void 0,null,function*(){if(_e.source instanceof ModelSettings)return _e.settings=_e.source,_();if(typeof _e.source=="object"){const et=Live2DFactory.findRuntime(_e.source);if(et){const tt=et.createModelSettings(_e.source);return _e.settings=tt,_e.live2dModel.emit("settingsLoaded",tt),_()}}throw new TypeError("Unknown settings format.")}),waitUntilReady=(_e,_)=>{if(_e.settings){const et=Live2DFactory.findRuntime(_e.settings);if(et)return et.ready().then(_)}return _()},setupOptionals=(_e,_)=>__async(void 0,null,function*(){yield _();const et=_e.internalModel;if(et){const tt=_e.settings,rt=Live2DFactory.findRuntime(tt);if(rt){const nt=[];tt.pose&&nt.push(Live2DLoader.load({settings:tt,url:tt.pose,type:"json",target:et}).then(ot=>{et.pose=rt.createPose(et.coreModel,ot),_e.live2dModel.emit("poseLoaded",et.pose)}).catch(ot=>{_e.live2dModel.emit("poseLoadError",ot),logger.warn(TAG,"Failed to load pose.",ot)})),tt.physics&&nt.push(Live2DLoader.load({settings:tt,url:tt.physics,type:"json",target:et}).then(ot=>{et.physics=rt.createPhysics(et.coreModel,ot),_e.live2dModel.emit("physicsLoaded",et.physics)}).catch(ot=>{_e.live2dModel.emit("physicsLoadError",ot),logger.warn(TAG,"Failed to load physics.",ot)})),nt.length&&(yield Promise.all(nt))}}}),setupEssentials=(_e,_)=>__async(void 0,null,function*(){if(_e.settings){const et=_e.live2dModel,tt=Promise.all(_e.settings.textures.map(rt=>{const nt=_e.settings.resolveURL(rt);return createTexture(nt,{crossOrigin:_e.options.crossOrigin})}));if(tt.catch(noop),yield _(),_e.internalModel)et.internalModel=_e.internalModel,et.emit("modelLoaded",_e.internalModel);else throw new TypeError("Missing internal model.");et.textures=yield tt,et.emit("textureLoaded",et.textures)}else throw new TypeError("Missing settings.")}),createInternalModel=(_e,_)=>__async(void 0,null,function*(){const et=_e.settings;if(et instanceof ModelSettings){const tt=Live2DFactory.findRuntime(et);if(!tt)throw new TypeError("Unknown model settings.");const rt=yield Live2DLoader.load({settings:et,url:et.moc,type:"arraybuffer",target:_e.live2dModel});if(!tt.isValidMoc(rt))throw new Error("Invalid moc data");const nt=tt.createCoreModel(rt);return _e.internalModel=tt.createInternalModel(nt,et,_e.options),_()}throw new TypeError("Missing settings.")}),_ZipLoader=class Tn{static unzip(_,et){return __async(this,null,function*(){const tt=yield Tn.getFilePaths(_),rt=[];for(const ot of et.getDefinedFiles()){const at=decodeURI(url.resolve(et.url,ot));tt.includes(at)&&rt.push(at)}const nt=yield Tn.getFiles(_,rt);for(let ot=0;ot<nt.length;ot++){const at=rt[ot],lt=nt[ot];Object.defineProperty(lt,"webkitRelativePath",{value:at})}return nt})}static createSettings(_){return __async(this,null,function*(){const tt=(yield Tn.getFilePaths(_)).find(at=>at.endsWith("model.json")||at.endsWith("model3.json"));if(!tt)throw new Error("Settings file not found");const rt=yield Tn.readText(_,tt);if(!rt)throw new Error("Empty settings file: "+tt);const nt=JSON.parse(rt);nt.url=tt;const ot=Tn.live2dFactory.findRuntime(nt);if(!ot)throw new Error("Unknown settings JSON");return ot.createModelSettings(nt)})}static zipReader(_,et){return __async(this,null,function*(){throw new Error("Not implemented")})}static getFilePaths(_){return __async(this,null,function*(){throw new Error("Not implemented")})}static getFiles(_,et){return __async(this,null,function*(){throw new Error("Not implemented")})}static readText(_,et){return __async(this,null,function*(){throw new Error("Not implemented")})}static releaseReader(_){}};__publicField(_ZipLoader,"live2dFactory");__publicField(_ZipLoader,"ZIP_PROTOCOL","zip://");__publicField(_ZipLoader,"uid",0);__publicField(_ZipLoader,"factory",(_e,_)=>__async(_ZipLoader,null,function*(){const et=_e.source;let tt,rt,nt;if(typeof et=="string"&&(et.endsWith(".zip")||et.startsWith(_ZipLoader.ZIP_PROTOCOL))?(et.startsWith(_ZipLoader.ZIP_PROTOCOL)?tt=et.slice(_ZipLoader.ZIP_PROTOCOL.length):tt=et,rt=yield Live2DLoader.load({url:tt,type:"blob",target:_e.live2dModel})):Array.isArray(et)&&et.length===1&&et[0]instanceof File&&et[0].name.endsWith(".zip")&&(rt=et[0],tt=URL.createObjectURL(rt),nt=et.settings),rt){if(!rt.size)throw new Error("Empty zip file");const ot=yield _ZipLoader.zipReader(rt,tt);nt||(nt=yield _ZipLoader.createSettings(ot)),nt._objectURL=_ZipLoader.ZIP_PROTOCOL+_ZipLoader.uid+"/"+nt.url;const at=yield _ZipLoader.unzip(ot,nt);at.settings=nt,_e.source=at,tt.startsWith("blob:")&&_e.live2dModel.once("modelLoaded",lt=>{lt.once("destroy",function(){URL.revokeObjectURL(tt)})}),_ZipLoader.releaseReader(ot)}return _()}));let ZipLoader=_ZipLoader;const _FileLoader=class no{static resolveURL(_,et){var tt;const rt=(tt=no.filesMap[_])==null?void 0:tt[et];if(rt===void 0)throw new Error("Cannot find this file from uploaded files: "+et);return rt}static upload(_,et){return __async(this,null,function*(){const tt={};for(const rt of et.getDefinedFiles()){const nt=decodeURI(url.resolve(et.url,rt)),ot=_.find(at=>at.webkitRelativePath===nt);ot&&(tt[rt]=URL.createObjectURL(ot))}no.filesMap[et._objectURL]=tt})}static createSettings(_){return __async(this,null,function*(){const et=_.find(at=>at.name.endsWith("model.json")||at.name.endsWith("model3.json"));if(!et)throw new TypeError("Settings file not found");const tt=yield no.readText(et),rt=JSON.parse(tt);rt.url=et.webkitRelativePath;const nt=Live2DFactory.findRuntime(rt);if(!nt)throw new Error("Unknown settings JSON");const ot=nt.createModelSettings(rt);return ot._objectURL=URL.createObjectURL(et),ot})}static readText(_){return __async(this,null,function*(){return new Promise((et,tt)=>{const rt=new FileReader;rt.onload=()=>et(rt.result),rt.onerror=tt,rt.readAsText(_,"utf8")})})}};__publicField(_FileLoader,"live2dFactory");__publicField(_FileLoader,"filesMap",{});__publicField(_FileLoader,"factory",(_e,_)=>__async(_FileLoader,null,function*(){if(Array.isArray(_e.source)&&_e.source[0]instanceof File){const et=_e.source;let tt=et.settings;if(!tt)tt=yield _FileLoader.createSettings(et);else if(!tt._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings');tt.validateFiles(et.map(rt=>encodeURI(rt.webkitRelativePath))),yield _FileLoader.upload(et,tt),tt.resolveURL=function(rt){return _FileLoader.resolveURL(this._objectURL,rt)},_e.source=tt,_e.live2dModel.once("modelLoaded",rt=>{rt.once("destroy",function(){const nt=this.settings._objectURL;if(URL.revokeObjectURL(nt),_FileLoader.filesMap[nt])for(const ot of Object.values(_FileLoader.filesMap[nt]))URL.revokeObjectURL(ot);delete _FileLoader.filesMap[nt]})})}return _()}));let FileLoader=_FileLoader;const _Live2DFactory=class zr{static registerRuntime(_){zr.runtimes.push(_),zr.runtimes.sort((et,tt)=>tt.version-et.version)}static findRuntime(_){for(const et of zr.runtimes)if(et.test(_))return et}static setupLive2DModel(_,et,tt){return __async(this,null,function*(){const rt=new Promise(at=>_.once("textureLoaded",at)),nt=new Promise(at=>_.once("modelLoaded",at)),ot=Promise.all([rt,nt]).then(()=>_.emit("ready"));yield runMiddlewares(zr.live2DModelMiddlewares,{live2dModel:_,source:et,options:tt||{}}),yield ot,_.emit("load")})}static loadMotion(_,et,tt){var rt,nt;const ot=at=>_.emit("motionLoadError",et,tt,at);try{const at=(rt=_.definitions[et])==null?void 0:rt[tt];if(!at)return Promise.resolve(void 0);_.listeners("destroy").includes(zr.releaseTasks)||_.once("destroy",zr.releaseTasks);let lt=zr.motionTasksMap.get(_);lt||(lt={},zr.motionTasksMap.set(_,lt));let ct=lt[et];ct||(ct=[],lt[et]=ct);const dt=_.getMotionFile(at);return(nt=ct[tt])!=null||(ct[tt]=Live2DLoader.load({url:dt,settings:_.settings,type:_.motionDataType,target:_}).then(st=>{var it;const ut=(it=zr.motionTasksMap.get(_))==null?void 0:it[et];ut&&delete ut[tt];const ht=_.createMotion(st,et,at);return _.emit("motionLoaded",et,tt,ht),ht}).catch(st=>{logger.warn(_.tag,`Failed to load motion: ${dt}
`,st),ot(st)})),ct[tt]}catch(at){logger.warn(_.tag,`Failed to load motion at "${et}"[${tt}]
`,at),ot(at)}return Promise.resolve(void 0)}static loadExpression(_,et){var tt;const rt=nt=>_.emit("expressionLoadError",et,nt);try{const nt=_.definitions[et];if(!nt)return Promise.resolve(void 0);_.listeners("destroy").includes(zr.releaseTasks)||_.once("destroy",zr.releaseTasks);let ot=zr.expressionTasksMap.get(_);ot||(ot=[],zr.expressionTasksMap.set(_,ot));const at=_.getExpressionFile(nt);return(tt=ot[et])!=null||(ot[et]=Live2DLoader.load({url:at,settings:_.settings,type:"json",target:_}).then(lt=>{const ct=zr.expressionTasksMap.get(_);ct&&delete ct[et];const dt=_.createExpression(lt,nt);return _.emit("expressionLoaded",et,dt),dt}).catch(lt=>{logger.warn(_.tag,`Failed to load expression: ${at}
`,lt),rt(lt)})),ot[et]}catch(nt){logger.warn(_.tag,`Failed to load expression at [${et}]
`,nt),rt(nt)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof MotionManager?zr.motionTasksMap.delete(this):zr.expressionTasksMap.delete(this)}};__publicField(_Live2DFactory,"runtimes",[]);__publicField(_Live2DFactory,"urlToJSON",urlToJSON);__publicField(_Live2DFactory,"jsonToSettings",jsonToSettings);__publicField(_Live2DFactory,"waitUntilReady",waitUntilReady);__publicField(_Live2DFactory,"setupOptionals",setupOptionals);__publicField(_Live2DFactory,"setupEssentials",setupEssentials);__publicField(_Live2DFactory,"createInternalModel",createInternalModel);__publicField(_Live2DFactory,"live2DModelMiddlewares",[ZipLoader.factory,FileLoader.factory,urlToJSON,jsonToSettings,waitUntilReady,setupOptionals,setupEssentials,createInternalModel]);__publicField(_Live2DFactory,"motionTasksMap",new WeakMap);__publicField(_Live2DFactory,"expressionTasksMap",new WeakMap);let Live2DFactory=_Live2DFactory;MotionManager.prototype._loadMotion=function(_e,_){return Live2DFactory.loadMotion(this,_e,_)};ExpressionManager.prototype._loadExpression=function(_e){return Live2DFactory.loadExpression(this,_e)};FileLoader.live2dFactory=Live2DFactory;ZipLoader.live2dFactory=Live2DFactory;const _Automator=class bo{constructor(_,{autoUpdate:et=!0,autoHitTest:tt=!0,autoFocus:rt=!0,autoInteract:nt,ticker:ot}={}){__publicField(this,"model"),__publicField(this,"destroyed",!1),__publicField(this,"_ticker"),__publicField(this,"_autoUpdate",!1),__publicField(this,"_autoHitTest",!1),__publicField(this,"_autoFocus",!1),ot||(bo.defaultTicker?ot=bo.defaultTicker:typeof PIXI<"u"&&(ot=PIXI.Ticker.shared)),nt!==void 0&&(tt=nt,rt=nt,logger.warn(_.tag,"options.autoInteract is deprecated since v0.5.0, use autoHitTest and autoFocus instead.")),this.model=_,this.ticker=ot,this.autoUpdate=et,this.autoHitTest=tt,this.autoFocus=rt,(tt||rt)&&(this.model.eventMode="static")}get ticker(){return this._ticker}set ticker(_){var et;this._ticker&&this._ticker.remove(onTickerUpdate,this),this._ticker=_,this._autoUpdate&&((et=this._ticker)==null||et.add(onTickerUpdate,this))}get autoUpdate(){return this._autoUpdate}set autoUpdate(_){var et;this.destroyed||(_?this._ticker?(this._ticker.add(onTickerUpdate,this),this._autoUpdate=!0):logger.warn(this.model.tag,"No Ticker to be used for automatic updates. Either set option.ticker when creating Live2DModel, or expose PIXI to global scope (window.PIXI = PIXI)."):((et=this._ticker)==null||et.remove(onTickerUpdate,this),this._autoUpdate=!1))}get autoHitTest(){return this._autoHitTest}set autoHitTest(_){_!==this.autoHitTest&&(_?this.model.on("pointertap",onTap,this):this.model.off("pointertap",onTap,this),this._autoHitTest=_)}get autoFocus(){return this._autoFocus}set autoFocus(_){_!==this.autoFocus&&(_?this.model.on("globalpointermove",onPointerMove,this):this.model.off("globalpointermove",onPointerMove,this),this._autoFocus=_)}get autoInteract(){return this._autoHitTest&&this._autoFocus}set autoInteract(_){this.autoHitTest=_,this.autoFocus=_}onTickerUpdate(){const _=this.ticker.deltaMS;this.model.update(_)}onTap(_){this.model.tap(_.global.x,_.global.y)}onPointerMove(_){this.model.focus(_.global.x,_.global.y)}destroy(){this.autoFocus=!1,this.autoHitTest=!1,this.autoUpdate=!1,this.ticker=void 0,this.destroyed=!0}};__publicField(_Automator,"defaultTicker");let Automator=_Automator;function onTickerUpdate(){this.onTickerUpdate()}function onTap(_e){this.onTap(_e)}function onPointerMove(_e){this.onPointerMove(_e)}class Live2DTransform extends Transform{}const tempPoint=new Point,tempMatrix$1=new Matrix;class Live2DModel extends Container{constructor(_){super(),__publicField(this,"tag","Live2DModel(uninitialized)"),__publicField(this,"internalModel"),__publicField(this,"textures",[]),__publicField(this,"transform",new Live2DTransform),__publicField(this,"anchor",new ObservablePoint(this.onAnchorChange,this,0,0)),__publicField(this,"glContextID",-1),__publicField(this,"elapsedTime",0),__publicField(this,"deltaTime",0),__publicField(this,"automator"),this.automator=new Automator(this,_),this.once("modelLoaded",()=>this.init(_))}static from(_,et){const tt=new this(et);return Live2DFactory.setupLive2DModel(tt,_,et).then(()=>tt)}static fromSync(_,et){const tt=new this(et);return Live2DFactory.setupLive2DModel(tt,_,et).then(et==null?void 0:et.onLoad).catch(et==null?void 0:et.onError),tt}static registerTicker(_){Automator.defaultTicker=_.shared}init(_){this.tag=`Live2DModel(${this.internalModel.settings.name})`}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(_,et,tt,{sound:rt=void 0,volume:nt=VOLUME,expression:ot=void 0,resetExpression:at=!0,crossOrigin:lt,onFinish:ct,onError:dt}={}){return et===void 0?this.internalModel.motionManager.startRandomMotion(_,tt,{sound:rt,volume:nt,expression:ot,resetExpression:at,crossOrigin:lt,onFinish:ct,onError:dt}):this.internalModel.motionManager.startMotion(_,et,tt,{sound:rt,volume:nt,expression:ot,resetExpression:at,crossOrigin:lt,onFinish:ct,onError:dt})}stopMotions(){return this.internalModel.motionManager.stopAllMotions()}speak(_,{volume:et=VOLUME,expression:tt,resetExpression:rt=!0,crossOrigin:nt,onFinish:ot,onError:at}={}){return this.internalModel.motionManager.speak(_,{volume:et,expression:tt,resetExpression:rt,crossOrigin:nt,onFinish:ot,onError:at})}stopSpeaking(){return this.internalModel.motionManager.stopSpeaking()}expression(_){return this.internalModel.motionManager.expressionManager?_===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(_):Promise.resolve(!1)}focus(_,et,tt=!1){tempPoint.x=_,tempPoint.y=et,this.toModelPosition(tempPoint,tempPoint,!0);const rt=tempPoint.x/this.internalModel.originalWidth*2-1,nt=tempPoint.y/this.internalModel.originalHeight*2-1,ot=Math.atan2(nt,rt);this.internalModel.focusController.focus(Math.cos(ot),-Math.sin(ot),tt)}tap(_,et){const tt=this.hitTest(_,et);tt.length&&(logger.log(this.tag,"Hit",tt),this.emit("hit",tt))}hitTest(_,et){return tempPoint.x=_,tempPoint.y=et,this.toModelPosition(tempPoint,tempPoint),this.internalModel.hitTest(tempPoint.x,tempPoint.y)}toModelPosition(_,et=_.clone(),tt){return tt||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(_,et),this.internalModel.localTransform.applyInverse(et,et),et}containsPoint(_){return this.getBounds(!0).contains(_.x,_.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}update(_){this.deltaTime+=_,this.elapsedTime+=_}_render(_){_.batch.reset(),_.geometry.reset(),_.shader.reset(),_.state.reset();let et=!1;this.glContextID!==_.CONTEXT_UID&&(this.glContextID=_.CONTEXT_UID,this.internalModel.updateWebGLContext(_.gl,this.glContextID),et=!0);for(let nt=0;nt<this.textures.length;nt++){const ot=this.textures[nt];ot.valid&&((et||!ot.baseTexture._glTextures[this.glContextID])&&(_.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),_.texture.bind(ot.baseTexture,0)),this.internalModel.bindTexture(nt,ot.baseTexture._glTextures[this.glContextID].texture),ot.baseTexture.touched=_.textureGC.count)}const tt=_.framebuffer.viewport;this.internalModel.viewport=[tt.x,tt.y,tt.width,tt.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const rt=tempMatrix$1.copyFrom(_.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(rt),this.internalModel.draw(_.gl),_.state.reset(),_.texture.reset()}destroy(_){this.emit("destroy"),_!=null&&_.texture&&this.textures.forEach(et=>et.destroy(_.baseTexture)),this.automator.destroy(),this.internalModel.destroy(),super.destroy(_)}}if(!window.Live2D)throw new Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");const originalUpdateParam=Live2DMotion.prototype.updateParam;Live2DMotion.prototype.updateParam=function(_e,_){originalUpdateParam.call(this,_e,_),_.isFinished()&&this.onFinishHandler&&(this.onFinishHandler(this),delete this.onFinishHandler)};class Live2DExpression extends AMotion{constructor(_){super(),__publicField(this,"params",[]),this.setFadeIn(_.fade_in>0?_.fade_in:config.expressionFadingDuration),this.setFadeOut(_.fade_out>0?_.fade_out:config.expressionFadingDuration),Array.isArray(_.params)&&_.params.forEach(et=>{const tt=et.calc||"add";if(tt==="add"){const rt=et.def||0;et.val-=rt}else if(tt==="mult"){const rt=et.def||1;et.val/=rt}this.params.push({calc:tt,val:et.val,id:et.id})})}updateParamExe(_,et,tt,rt){this.params.forEach(nt=>{_.setParamFloat(nt.id,nt.val*tt)})}}class Cubism2ExpressionManager extends ExpressionManager{constructor(_,et){var tt;super(_,et),__publicField(this,"queueManager",new MotionQueueManager),__publicField(this,"definitions"),this.definitions=(tt=this.settings.expressions)!=null?tt:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(_){return this.definitions.findIndex(et=>et.name===_)}getExpressionFile(_){return _.file}createExpression(_,et){return new Live2DExpression(_)}_setExpression(_){return this.queueManager.startMotion(_)}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(_,et){return this.queueManager.updateParam(_)}}class Cubism2MotionManager extends MotionManager{constructor(_,et){super(_,et),__publicField(this,"definitions"),__publicField(this,"groups",{idle:"idle"}),__publicField(this,"motionDataType","arraybuffer"),__publicField(this,"queueManager",new MotionQueueManager),__publicField(this,"lipSyncIds"),__publicField(this,"expressionManager"),this.definitions=this.settings.motions,this.init(et),this.lipSyncIds=["PARAM_MOUTH_OPEN_Y"]}init(_){super.init(_),this.settings.expressions&&(this.expressionManager=new Cubism2ExpressionManager(this.settings,_))}isFinished(){return this.queueManager.isFinished()}createMotion(_,et,tt){const rt=Live2DMotion.loadMotion(_),nt=et===this.groups.idle?config.idleMotionFadingDuration:config.motionFadingDuration;return rt.setFadeIn(tt.fade_in>0?tt.fade_in:nt),rt.setFadeOut(tt.fade_out>0?tt.fade_out:nt),rt}getMotionFile(_){return _.file}getMotionName(_){return _.file}getSoundFile(_){return _.sound}_startMotion(_,et){return _.onFinishHandler=et,this.queueManager.stopAllMotions(),this.queueManager.startMotion(_)}_stopAllMotions(){this.queueManager.stopAllMotions()}updateParameters(_,et){return this.queueManager.updateParam(_)}destroy(){super.destroy(),this.queueManager=void 0}}class Live2DEyeBlink{constructor(_){__publicField(this,"leftParam"),__publicField(this,"rightParam"),__publicField(this,"blinkInterval",4e3),__publicField(this,"closingDuration",100),__publicField(this,"closedDuration",50),__publicField(this,"openingDuration",150),__publicField(this,"eyeState",0),__publicField(this,"eyeParamValue",1),__publicField(this,"closedTimer",0),__publicField(this,"nextBlinkTimeLeft",this.blinkInterval),this.coreModel=_,this.leftParam=_.getParamIndex("PARAM_EYE_L_OPEN"),this.rightParam=_.getParamIndex("PARAM_EYE_R_OPEN")}setEyeParams(_){this.eyeParamValue=clamp(_,0,1),this.coreModel.setParamFloat(this.leftParam,this.eyeParamValue),this.coreModel.setParamFloat(this.rightParam,this.eyeParamValue)}update(_){switch(this.eyeState){case 0:this.nextBlinkTimeLeft-=_,this.nextBlinkTimeLeft<0&&(this.eyeState=1,this.nextBlinkTimeLeft=this.blinkInterval+this.closingDuration+this.closedDuration+this.openingDuration+rand(0,2e3));break;case 1:this.setEyeParams(this.eyeParamValue+_/this.closingDuration),this.eyeParamValue<=0&&(this.eyeState=2,this.closedTimer=0);break;case 2:this.closedTimer+=_,this.closedTimer>=this.closedDuration&&(this.eyeState=3);break;case 3:this.setEyeParams(this.eyeParamValue+_/this.openingDuration),this.eyeParamValue>=1&&(this.eyeState=0)}}}const tempMatrixArray=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Cubism2InternalModel extends InternalModel{constructor(_,et,tt){super(),__publicField(this,"settings"),__publicField(this,"coreModel"),__publicField(this,"motionManager"),__publicField(this,"eyeBlink"),__publicField(this,"eyeballXParamIndex"),__publicField(this,"eyeballYParamIndex"),__publicField(this,"angleXParamIndex"),__publicField(this,"angleYParamIndex"),__publicField(this,"angleZParamIndex"),__publicField(this,"bodyAngleXParamIndex"),__publicField(this,"breathParamIndex"),__publicField(this,"textureFlipY",!0),__publicField(this,"lipSync",!0),__publicField(this,"drawDataCount",0),__publicField(this,"disableCulling",!1),__publicField(this,"hasDrawn",!1),this.coreModel=_,this.settings=et,this.motionManager=new Cubism2MotionManager(et,tt),this.eyeBlink=new Live2DEyeBlink(_),this.eyeballXParamIndex=_.getParamIndex("PARAM_EYE_BALL_X"),this.eyeballYParamIndex=_.getParamIndex("PARAM_EYE_BALL_Y"),this.angleXParamIndex=_.getParamIndex("PARAM_ANGLE_X"),this.angleYParamIndex=_.getParamIndex("PARAM_ANGLE_Y"),this.angleZParamIndex=_.getParamIndex("PARAM_ANGLE_Z"),this.bodyAngleXParamIndex=_.getParamIndex("PARAM_BODY_ANGLE_X"),this.breathParamIndex=_.getParamIndex("PARAM_BREATH"),this.init()}init(){super.init(),this.settings.initParams&&this.settings.initParams.forEach(({id:nt,value:ot})=>this.coreModel.setParamFloat(nt,ot)),this.settings.initOpacities&&this.settings.initOpacities.forEach(({id:nt,value:ot})=>this.coreModel.setPartsOpacity(nt,ot)),this.coreModel.saveParam();const _=this.coreModel.getModelContext()._$aS;_!=null&&_.length&&(this.drawDataCount=_.length);let et=this.coreModel.drawParamWebGL.culling;Object.defineProperty(this.coreModel.drawParamWebGL,"culling",{set:nt=>et=nt,get:()=>this.disableCulling?!1:et});const tt=this.coreModel.getModelContext().clipManager,rt=tt.setupClip;tt.setupClip=(nt,ot)=>{rt.call(tt,nt,ot),ot.gl.viewport(...this.viewport)}}getSize(){return[this.coreModel.getCanvasWidth(),this.coreModel.getCanvasHeight()]}getLayout(){const _={};if(this.settings.layout)for(const[et,tt]of Object.entries(this.settings.layout)){let rt=et;et==="center_x"?rt="centerX":et==="center_y"&&(rt="centerY"),_[rt]=tt}return _}updateWebGLContext(_,et){const tt=this.coreModel.drawParamWebGL;tt.firstDraw=!0,tt.setGL(_),tt.glno=et;for(const[ot,at]of Object.entries(tt))at instanceof WebGLBuffer&&(tt[ot]=null);const rt=this.coreModel.getModelContext().clipManager;rt.curFrameNo=et;const nt=_.getParameter(_.FRAMEBUFFER_BINDING);rt.getMaskRenderTexture(),_.bindFramebuffer(_.FRAMEBUFFER,nt)}bindTexture(_,et){this.coreModel.setTexture(_,et)}getHitAreaDefs(){var _;return((_=this.settings.hitAreas)==null?void 0:_.map(et=>({id:et.id,name:et.name,index:this.coreModel.getDrawDataIndex(et.id)})))||[]}getDrawableIDs(){const _=this.coreModel.getModelContext(),et=[];for(let tt=0;tt<this.drawDataCount;tt++){const rt=_.getDrawData(tt);rt&&et.push(rt.getDrawDataID().id)}return et}getDrawableIndex(_){return this.coreModel.getDrawDataIndex(_)}getDrawableVertices(_){if(typeof _=="string"&&(_=this.coreModel.getDrawDataIndex(_),_===-1))throw new TypeError("Unable to find drawable ID: "+_);return this.coreModel.getTransformedPoints(_).slice()}hitTest(_,et){return this.hasDrawn||logger.warn("Trying to hit-test a Cubism 2 model that has not been rendered yet. The result will always be empty since the draw data is not ready."),super.hitTest(_,et)}update(_,et){var tt,rt,nt,ot;super.update(_,et);const at=this.coreModel;this.emit("beforeMotionUpdate");const lt=this.motionManager.update(this.coreModel,et);if(this.emit("afterMotionUpdate"),at.saveParam(),(tt=this.motionManager.expressionManager)==null||tt.update(at,et),lt||(rt=this.eyeBlink)==null||rt.update(_),this.updateFocus(),this.updateNaturalMovements(_,et),this.lipSync&&this.motionManager.currentAudio){let ct=this.motionManager.mouthSync(),dt=0;const st=1,it=1.2,ut=.7;ct>0&&(dt=.4),ct=Math.pow(ct,ut),ct=clamp(ct*it,dt,st);for(let ht=0;ht<this.motionManager.lipSyncIds.length;++ht)this.coreModel.setParamFloat(this.coreModel.getParamIndex(this.motionManager.lipSyncIds[ht]),ct)}(nt=this.physics)==null||nt.update(et),(ot=this.pose)==null||ot.update(_),this.emit("beforeModelUpdate"),at.update(),at.loadParam()}updateFocus(){this.coreModel.addToParamFloat(this.eyeballXParamIndex,this.focusController.x),this.coreModel.addToParamFloat(this.eyeballYParamIndex,this.focusController.y),this.coreModel.addToParamFloat(this.angleXParamIndex,this.focusController.x*30),this.coreModel.addToParamFloat(this.angleYParamIndex,this.focusController.y*30),this.coreModel.addToParamFloat(this.angleZParamIndex,this.focusController.x*this.focusController.y*-30),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,this.focusController.x*10)}updateNaturalMovements(_,et){const tt=et/1e3*2*Math.PI;this.coreModel.addToParamFloat(this.angleXParamIndex,15*Math.sin(tt/6.5345)*.5),this.coreModel.addToParamFloat(this.angleYParamIndex,8*Math.sin(tt/3.5345)*.5),this.coreModel.addToParamFloat(this.angleZParamIndex,10*Math.sin(tt/5.5345)*.5),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,4*Math.sin(tt/15.5345)*.5),this.coreModel.setParamFloat(this.breathParamIndex,.5+.5*Math.sin(tt/3.2345))}draw(_){const et=this.disableCulling;_.getParameter(_.FRAMEBUFFER_BINDING)&&(this.disableCulling=!0);const tt=this.drawingMatrix;tempMatrixArray[0]=tt.a,tempMatrixArray[1]=tt.b,tempMatrixArray[4]=tt.c,tempMatrixArray[5]=tt.d,tempMatrixArray[12]=tt.tx,tempMatrixArray[13]=tt.ty,this.coreModel.setMatrix(tempMatrixArray),this.coreModel.draw(),this.hasDrawn=!0,this.disableCulling=et}destroy(){super.destroy(),this.coreModel=void 0}}class Cubism2ModelSettings extends ModelSettings{constructor(_){if(super(_),__publicField(this,"moc"),__publicField(this,"textures"),__publicField(this,"layout"),__publicField(this,"hitAreas"),__publicField(this,"initParams"),__publicField(this,"initOpacities"),__publicField(this,"expressions"),__publicField(this,"motions",{}),!Cubism2ModelSettings.isValidJSON(_))throw new TypeError("Invalid JSON.");this.moc=_.model,copyArray("string",_,this,"textures","textures"),this.copy(_)}static isValidJSON(_){var et;return!!_&&typeof _.model=="string"&&((et=_.textures)==null?void 0:et.length)>0&&_.textures.every(tt=>typeof tt=="string")}copy(_){copyProperty("string",_,this,"name","name"),copyProperty("string",_,this,"pose","pose"),copyProperty("string",_,this,"physics","physics"),copyProperty("object",_,this,"layout","layout"),copyProperty("object",_,this,"motions","motions"),copyArray("object",_,this,"hit_areas","hitAreas"),copyArray("object",_,this,"expressions","expressions"),copyArray("object",_,this,"init_params","initParams"),copyArray("object",_,this,"init_opacities","initOpacities")}replaceFiles(_){super.replaceFiles(_);for(const[et,tt]of Object.entries(this.motions))for(let rt=0;rt<tt.length;rt++)tt[rt].file=_(tt[rt].file,`motions.${et}[${rt}].file`),tt[rt].sound!==void 0&&(tt[rt].sound=_(tt[rt].sound,`motions.${et}[${rt}].sound`));if(this.expressions)for(let et=0;et<this.expressions.length;et++)this.expressions[et].file=_(this.expressions[et].file,`expressions[${et}].file`)}}const SRC_TYPE_MAP={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE},TARGET_TYPE_MAP={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE};class Live2DPhysics{constructor(_,et){__publicField(this,"physicsHairs",[]),this.coreModel=_,et.physics_hair&&(this.physicsHairs=et.physics_hair.map(tt=>{const rt=new PhysicsHair;return rt.setup(tt.setup.length,tt.setup.regist,tt.setup.mass),tt.src.forEach(({id:nt,ptype:ot,scale:at,weight:lt})=>{const ct=SRC_TYPE_MAP[ot];ct&&rt.addSrcParam(ct,nt,at,lt)}),tt.targets.forEach(({id:nt,ptype:ot,scale:at,weight:lt})=>{const ct=TARGET_TYPE_MAP[ot];ct&&rt.addTargetParam(ct,nt,at,lt)}),rt}))}update(_){this.physicsHairs.forEach(et=>et.update(this.coreModel,_))}}class Live2DPartsParam{constructor(_){__publicField(this,"paramIndex",-1),__publicField(this,"partsIndex",-1),__publicField(this,"link",[]),this.id=_}initIndex(_){this.paramIndex=_.getParamIndex("VISIBLE:"+this.id),this.partsIndex=_.getPartsDataIndex(PartsDataID.getID(this.id)),_.setParamFloat(this.paramIndex,1)}}class Live2DPose{constructor(_,et){__publicField(this,"opacityAnimDuration",500),__publicField(this,"partsGroups",[]),this.coreModel=_,et.parts_visible&&(this.partsGroups=et.parts_visible.map(({group:tt})=>tt.map(({id:rt,link:nt})=>{const ot=new Live2DPartsParam(rt);return nt&&(ot.link=nt.map(at=>new Live2DPartsParam(at))),ot})),this.init())}init(){this.partsGroups.forEach(_=>{_.forEach(et=>{if(et.initIndex(this.coreModel),et.paramIndex>=0){const tt=this.coreModel.getParamFloat(et.paramIndex)!==0;this.coreModel.setPartsOpacity(et.partsIndex,tt?1:0),this.coreModel.setParamFloat(et.paramIndex,tt?1:0),et.link.length>0&&et.link.forEach(rt=>rt.initIndex(this.coreModel))}})})}normalizePartsOpacityGroup(_,et){const tt=this.coreModel,rt=.5,nt=.15;let ot=1,at=_.findIndex(({paramIndex:lt,partsIndex:ct})=>ct>=0&&tt.getParamFloat(lt)!==0);if(at>=0){const lt=tt.getPartsOpacity(_[at].partsIndex);ot=clamp(lt+et/this.opacityAnimDuration,0,1)}else at=0,ot=1;_.forEach(({partsIndex:lt},ct)=>{if(lt>=0)if(at==ct)tt.setPartsOpacity(lt,ot);else{let dt=tt.getPartsOpacity(lt),st;ot<rt?st=ot*(rt-1)/rt+1:st=(1-ot)*rt/(1-rt),(1-st)*(1-ot)>nt&&(st=1-nt/(1-ot)),dt>st&&(dt=st),tt.setPartsOpacity(lt,dt)}})}copyOpacity(_){const et=this.coreModel;_.forEach(({partsIndex:tt,link:rt})=>{if(tt>=0&&rt){const nt=et.getPartsOpacity(tt);rt.forEach(({partsIndex:ot})=>{ot>=0&&et.setPartsOpacity(ot,nt)})}})}update(_){this.partsGroups.forEach(et=>{this.normalizePartsOpacityGroup(et,_),this.copyOpacity(et)})}}Live2DFactory.registerRuntime({version:2,test(_e){return _e instanceof Cubism2ModelSettings||Cubism2ModelSettings.isValidJSON(_e)},ready(){return Promise.resolve()},isValidMoc(_e){if(_e.byteLength<3)return!1;const _=new Int8Array(_e,0,3);return String.fromCharCode(..._)==="moc"},createModelSettings(_e){return new Cubism2ModelSettings(_e)},createCoreModel(_e){const _=Live2DModelWebGL.loadModel(_e),et=Live2D.getError();if(et)throw et;return _},createInternalModel(_e,_,et){return new Cubism2InternalModel(_e,_,et)},createPose(_e,_){return new Live2DPose(_e,_)},createPhysics(_e,_){return new Live2DPhysics(_e,_)}});if(!window.Live2DCubismCore)throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");class CubismVector2{constructor(_,et){this.x=_||0,this.y=et||0}add(_){const et=new CubismVector2(0,0);return et.x=this.x+_.x,et.y=this.y+_.y,et}substract(_){const et=new CubismVector2(0,0);return et.x=this.x-_.x,et.y=this.y-_.y,et}multiply(_){const et=new CubismVector2(0,0);return et.x=this.x*_.x,et.y=this.y*_.y,et}multiplyByScaler(_){return this.multiply(new CubismVector2(_,_))}division(_){const et=new CubismVector2(0,0);return et.x=this.x/_.x,et.y=this.y/_.y,et}divisionByScalar(_){return this.division(new CubismVector2(_,_))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(_){return Math.sqrt((this.x-_.x)*(this.x-_.x)+(this.y-_.y)*(this.y-_.y))}dot(_){return this.x*_.x+this.y*_.y}normalize(){const _=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/_,this.y=this.y/_}isEqual(_){return this.x==_.x&&this.y==_.y}isNotEqual(_){return!this.isEqual(_)}}const _CubismMath=class io{static range(_,et,tt){return _<et?_=et:_>tt&&(_=tt),_}static sin(_){return Math.sin(_)}static cos(_){return Math.cos(_)}static abs(_){return Math.abs(_)}static sqrt(_){return Math.sqrt(_)}static cbrt(_){if(_===0)return _;let et=_;const tt=et<0;tt&&(et=-et);let rt;return et===1/0?rt=1/0:(rt=Math.exp(Math.log(et)/3),rt=(et/(rt*rt)+2*rt)/3),tt?-rt:rt}static getEasingSine(_){return _<0?0:_>1?1:.5-.5*this.cos(_*Math.PI)}static max(_,et){return _>et?_:et}static min(_,et){return _>et?et:_}static degreesToRadian(_){return _/180*Math.PI}static radianToDegrees(_){return _*180/Math.PI}static directionToRadian(_,et){const tt=Math.atan2(et.y,et.x),rt=Math.atan2(_.y,_.x);let nt=tt-rt;for(;nt<-Math.PI;)nt+=Math.PI*2;for(;nt>Math.PI;)nt-=Math.PI*2;return nt}static directionToDegrees(_,et){const tt=this.directionToRadian(_,et);let rt=this.radianToDegrees(tt);return et.x-_.x>0&&(rt=-rt),rt}static radianToDirection(_){const et=new CubismVector2;return et.x=this.sin(_),et.y=this.cos(_),et}static quadraticEquation(_,et,tt){return this.abs(_)<io.Epsilon?this.abs(et)<io.Epsilon?-tt:-tt/et:-(et+this.sqrt(et*et-4*_*tt))/(2*_)}static cardanoAlgorithmForBezier(_,et,tt,rt){if(this.sqrt(_)<io.Epsilon)return this.range(this.quadraticEquation(et,tt,rt),0,1);const nt=et/_,ot=tt/_,at=rt/_,lt=(3*ot-nt*nt)/3,ct=lt/3,dt=(2*nt*nt*nt-9*nt*ot+27*at)/27,st=dt/2,it=st*st+ct*ct*ct,ut=.5,ht=ut+.01;if(it<0){const bt=-lt/3,vt=bt*bt*bt,xt=this.sqrt(vt),wt=-dt/(2*xt),St=this.range(wt,-1,1),Et=Math.acos(St),Tt=2*this.cbrt(xt),Rt=Tt*this.cos(Et/3)-nt/3;if(this.abs(Rt-ut)<ht)return this.range(Rt,0,1);const Ot=Tt*this.cos((Et+2*Math.PI)/3)-nt/3;if(this.abs(Ot-ut)<ht)return this.range(Ot,0,1);const At=Tt*this.cos((Et+4*Math.PI)/3)-nt/3;return this.range(At,0,1)}if(it==0){let bt;st<0?bt=this.cbrt(-st):bt=-this.cbrt(st);const vt=2*bt-nt/3;if(this.abs(vt-ut)<ht)return this.range(vt,0,1);const xt=-bt-nt/3;return this.range(xt,0,1)}const ft=this.sqrt(it),gt=this.cbrt(ft-st),mt=this.cbrt(ft+st),yt=gt-mt-nt/3;return this.range(yt,0,1)}constructor(){}};_CubismMath.Epsilon=1e-5;let CubismMath=_CubismMath;class CubismMatrix44{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(_,et,tt){const rt=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),nt=4;for(let ot=0;ot<nt;++ot)for(let at=0;at<nt;++at)for(let lt=0;lt<nt;++lt)rt[at+ot*4]+=_[lt+ot*4]*et[at+lt*4];for(let ot=0;ot<16;++ot)tt[ot]=rt[ot]}loadIdentity(){const _=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(_)}setMatrix(_){for(let et=0;et<16;++et)this._tr[et]=_[et]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(_){return this._tr[0]*_+this._tr[12]}transformY(_){return this._tr[5]*_+this._tr[13]}invertTransformX(_){return(_-this._tr[12])/this._tr[0]}invertTransformY(_){return(_-this._tr[13])/this._tr[5]}translateRelative(_,et){const tt=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,_,et,0,1]);CubismMatrix44.multiply(tt,this._tr,this._tr)}translate(_,et){this._tr[12]=_,this._tr[13]=et}translateX(_){this._tr[12]=_}translateY(_){this._tr[13]=_}scaleRelative(_,et){const tt=new Float32Array([_,0,0,0,0,et,0,0,0,0,1,0,0,0,0,1]);CubismMatrix44.multiply(tt,this._tr,this._tr)}scale(_,et){this._tr[0]=_,this._tr[5]=et}multiplyByMatrix(_){CubismMatrix44.multiply(_.getArray(),this._tr,this._tr)}clone(){const _=new CubismMatrix44;for(let et=0;et<this._tr.length;et++)_._tr[et]=this._tr[et];return _}}class CubismRenderer{initialize(_){this._model=_}drawModel(){this.getModel()!=null&&(this.saveProfile(),this.doDrawModel(),this.restoreProfile())}setMvpMatrix(_){this._mvpMatrix4x4.setMatrix(_.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(_,et,tt,rt){_<0?_=0:_>1&&(_=1),et<0?et=0:et>1&&(et=1),tt<0?tt=0:tt>1&&(tt=1),rt<0?rt=0:rt>1&&(rt=1),this._modelColor.R=_,this._modelColor.G=et,this._modelColor.B=tt,this._modelColor.A=rt}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(_){this._isPremultipliedAlpha=_}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(_){this._isCulling=_}isCulling(){return this._isCulling}setAnisotropy(_){this._anisotropy=_}getAnisotropy(){return this._anisotropy}getModel(){return this._model}useHighPrecisionMask(_){this._useHighPrecisionMask=_}isUsingHighPrecisionMask(){return this._useHighPrecisionMask}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisotropy=0,this._modelColor=new CubismTextureColor,this._useHighPrecisionMask=!1,this._mvpMatrix4x4=new CubismMatrix44,this._mvpMatrix4x4.loadIdentity()}}var CubismBlendMode=(_e=>(_e[_e.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",_e[_e.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",_e[_e.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",_e))(CubismBlendMode||{});class CubismTextureColor{constructor(_=1,et=1,tt=1,rt=1){this.R=_,this.G=et,this.B=tt,this.A=rt}}let s_isStarted=!1,s_isInitialized=!1,s_option;const Constant={vertexOffset:0,vertexStep:2};class CubismFramework{static startUp(_){if(s_isStarted)return CubismLogInfo("CubismFramework.startUp() is already done."),s_isStarted;if(Live2DCubismCore._isStarted)return s_isStarted=!0,!0;if(Live2DCubismCore._isStarted=!0,s_option=_,s_option&&Live2DCubismCore.Logging.csmSetLogFunction(s_option.logFunction),s_isStarted=!0,s_isStarted){const et=Live2DCubismCore.Version.csmGetVersion(),tt=(et&4278190080)>>24,rt=(et&16711680)>>16,nt=et&65535,ot=et;CubismLogInfo("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+tt).slice(-2),("00"+rt).slice(-2),("0000"+nt).slice(-4),ot)}return CubismLogInfo("CubismFramework.startUp() is complete."),s_isStarted}static cleanUp(){s_isStarted=!1,s_isInitialized=!1,s_option=void 0}static initialize(_=0){if(!s_isStarted){CubismLogWarning("CubismFramework is not started.");return}if(s_isInitialized){CubismLogWarning("CubismFramework.initialize() skipped, already initialized.");return}Live2DCubismCore.Memory.initializeAmountOfMemory(_),s_isInitialized=!0,CubismLogInfo("CubismFramework.initialize() is complete.")}static dispose(){if(!s_isStarted){CubismLogWarning("CubismFramework is not started.");return}if(!s_isInitialized){CubismLogWarning("CubismFramework.dispose() skipped, not initialized.");return}CubismRenderer.staticRelease(),s_isInitialized=!1,CubismLogInfo("CubismFramework.dispose() is complete.")}static isStarted(){return s_isStarted}static isInitialized(){return s_isInitialized}static coreLogFunction(_){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(_)}static getLoggingLevel(){return s_option!=null?s_option.loggingLevel:5}constructor(){}}var LogLevel=(_e=>(_e[_e.LogLevel_Verbose=0]="LogLevel_Verbose",_e[_e.LogLevel_Debug=1]="LogLevel_Debug",_e[_e.LogLevel_Info=2]="LogLevel_Info",_e[_e.LogLevel_Warning=3]="LogLevel_Warning",_e[_e.LogLevel_Error=4]="LogLevel_Error",_e[_e.LogLevel_Off=5]="LogLevel_Off",_e))(LogLevel||{});const CSM_ASSERT=typeof process<"u"?()=>{}:_e=>console.assert(_e);function CubismLogDebug(_e,..._){CubismDebug.print(LogLevel.LogLevel_Debug,"[CSM][D]"+_e+`
`,_)}function CubismLogInfo(_e,..._){CubismDebug.print(LogLevel.LogLevel_Info,"[CSM][I]"+_e+`
`,_)}function CubismLogWarning(_e,..._){CubismDebug.print(LogLevel.LogLevel_Warning,"[CSM][W]"+_e+`
`,_)}function CubismLogError(_e,..._){CubismDebug.print(LogLevel.LogLevel_Error,"[CSM][E]"+_e+`
`,_)}class CubismDebug{static print(_,et,tt){if(_<CubismFramework.getLoggingLevel())return;const rt=CubismFramework.coreLogFunction;if(!rt)return;const nt=et.replace(/{(\d+)}/g,(ot,at)=>tt[at]);rt(nt)}static dumpBytes(_,et,tt){for(let rt=0;rt<tt;rt++)rt%16==0&&rt>0?this.print(_,`
`):rt%8==0&&rt>0&&this.print(_,"  "),this.print(_,"{0} ",[et[rt]&255]);this.print(_,`
`)}constructor(){}}class ACubismMotion{constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}release(){this._weight=0}updateParameters(_,et,tt){if(!et.isAvailable()||et.isFinished())return;if(!et.isStarted()){et.setIsStarted(!0),et.setStartTime(tt-this._offsetSeconds),et.setFadeInStartTime(tt);const at=this.getDuration();et.getEndTime()<0&&et.setEndTime(at<=0?-1:et.getStartTime()+at)}let rt=this._weight;const nt=this._fadeInSeconds==0?1:CubismMath.getEasingSine((tt-et.getFadeInStartTime())/this._fadeInSeconds),ot=this._fadeOutSeconds==0||et.getEndTime()<0?1:CubismMath.getEasingSine((et.getEndTime()-tt)/this._fadeOutSeconds);rt=rt*nt*ot,et.setState(tt,rt),CSM_ASSERT(0<=rt&&rt<=1),this.doUpdateParameters(_,tt,rt,et),et.getEndTime()>0&&et.getEndTime()<tt&&et.setIsFinished(!0)}setFadeInTime(_){this._fadeInSeconds=_}setFadeOutTime(_){this._fadeOutSeconds=_}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(_){this._weight=_}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(_){this._offsetSeconds=_}getFiredEvent(_,et){return this._firedEventValues}setFinishedMotionHandler(_){this._onFinishedMotion=_}getFinishedMotionHandler(){return this._onFinishedMotion}isExistModelOpacity(){return!1}getModelOpacityIndex(){return-1}getModelOpacityId(_){}getModelOpacityValue(){return 1}}const DefaultFadeTime=1;class CubismExpressionMotion extends ACubismMotion{static create(_){const et=new CubismExpressionMotion;return et.parse(_),et}doUpdateParameters(_,et,tt,rt){for(let nt=0;nt<this._parameters.length;++nt){const ot=this._parameters[nt];switch(ot.blendType){case 0:{_.addParameterValueById(ot.parameterId,ot.value,tt);break}case 1:{_.multiplyParameterValueById(ot.parameterId,ot.value,tt);break}case 2:{_.setParameterValueById(ot.parameterId,ot.value,tt);break}}}}parse(_){this.setFadeInTime(_.FadeInTime!=null?_.FadeInTime:DefaultFadeTime),this.setFadeOutTime(_.FadeOutTime!=null?_.FadeOutTime:DefaultFadeTime);const et=(_.Parameters||[]).length;for(let tt=0;tt<et;++tt){const rt=_.Parameters[tt],nt=rt.Id,ot=rt.Value;let at;!rt.Blend||rt.Blend==="Add"?at=0:rt.Blend==="Multiply"?at=1:rt.Blend==="Overwrite"?at=2:at=0;const lt={parameterId:nt,blendType:at,value:ot};this._parameters.push(lt)}}constructor(){super(),this._parameters=[]}}class CubismMotionQueueEntry{constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(_){this._fadeOutSeconds=_,this._isTriggeredFadeOut=!0}startFadeOut(_,et){const tt=et+_;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||tt<this._endTimeSeconds)&&(this._endTimeSeconds=tt)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(_){this._startTimeSeconds=_}setFadeInStartTime(_){this._fadeInStartTimeSeconds=_}setEndTime(_){this._endTimeSeconds=_}setIsFinished(_){this._finished=_}setIsStarted(_){this._started=_}isAvailable(){return this._available}setIsAvailable(_){this._available=_}setState(_,et){this._stateTimeSeconds=_,this._stateWeight=et}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(_){this._lastEventCheckSeconds=_}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}}class CubismMotionQueueManager{constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}release(){for(let _=0;_<this._motions.length;++_)this._motions[_]&&this._motions[_].release();this._motions=void 0}startMotion(_,et,tt){if(_==null)return InvalidMotionQueueEntryHandleValue;let rt;for(let nt=0;nt<this._motions.length;++nt)rt=this._motions[nt],rt!=null&&rt.setFadeOut(rt._motion.getFadeOutTime());return rt=new CubismMotionQueueEntry,rt._autoDelete=et,rt._motion=_,this._motions.push(rt),rt._motionQueueEntryHandle}isFinished(){let _=0;for(;_<this._motions.length;){const et=this._motions[_];if(et==null){this._motions.splice(_,1);continue}if(et._motion==null){et.release(),this._motions.splice(_,1);continue}if(!et.isFinished())return!1;_++}return!0}isFinishedByHandle(_){for(let et=0;et<this._motions.length;et++){const tt=this._motions[et];if(tt!=null&&tt._motionQueueEntryHandle==_&&!tt.isFinished())return!1}return!0}stopAllMotions(){for(let _=0;_<this._motions.length;_++){const et=this._motions[_];et!=null&&et.release()}this._motions=[]}getCubismMotionQueueEntry(_){return this._motions.find(et=>et!=null&&et._motionQueueEntryHandle==_)}setEventCallback(_,et=null){this._eventCallBack=_,this._eventCustomData=et}doUpdateMotion(_,et){let tt=!1,rt=0;for(;rt<this._motions.length;){const nt=this._motions[rt];if(nt==null){this._motions.splice(rt,1);continue}const ot=nt._motion;if(ot==null){nt.release(),this._motions.splice(rt,1);continue}ot.updateParameters(_,nt,et),tt=!0;const at=ot.getFiredEvent(nt.getLastCheckEventSeconds()-nt.getStartTime(),et-nt.getStartTime());for(let lt=0;lt<at.length;++lt)this._eventCallBack(this,at[lt],this._eventCustomData);nt.setLastCheckEventSeconds(et),nt.isFinished()?(nt.release(),this._motions.splice(rt,1)):(nt.isTriggeredFadeOut()&&nt.startFadeOut(nt.getFadeOutSeconds(),et),rt++)}return tt}}const InvalidMotionQueueEntryHandleValue=-1;class Cubism4ExpressionManager extends ExpressionManager{constructor(_,et){var tt;super(_,et),__publicField(this,"queueManager",new CubismMotionQueueManager),__publicField(this,"definitions"),this.definitions=(tt=_.expressions)!=null?tt:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(_){return this.definitions.findIndex(et=>et.Name===_)}getExpressionFile(_){return _.File}createExpression(_,et){return CubismExpressionMotion.create(_)}_setExpression(_){return this.queueManager.startMotion(_,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(_,et){return this.queueManager.doUpdateMotion(_,et)}}var CubismMotionCurveTarget=(_e=>(_e[_e.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",_e[_e.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",_e[_e.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",_e))(CubismMotionCurveTarget||{}),CubismMotionSegmentType=(_e=>(_e[_e.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",_e[_e.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",_e[_e.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",_e[_e.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",_e))(CubismMotionSegmentType||{});class CubismMotionPoint{constructor(_=0,et=0){this.time=_,this.value=et}}class CubismMotionSegment{constructor(){this.basePointIndex=0,this.segmentType=0}}class CubismMotionCurve{constructor(){this.id="",this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class CubismMotionEvent{constructor(){this.fireTime=0,this.value=""}}class CubismMotionData{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}}class CubismMotionJson{constructor(_){this._json=_}release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getEvaluationOptionFlag(_){return _==0?!!this._json.Meta.AreBeziersRestricted:!1}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(_){return this._json.Curves[_].Target}getMotionCurveId(_){return this._json.Curves[_].Id}getMotionCurveFadeInTime(_){return this._json.Curves[_].FadeInTime}getMotionCurveFadeOutTime(_){return this._json.Curves[_].FadeOutTime}getMotionCurveSegmentCount(_){return this._json.Curves[_].Segments.length}getMotionCurveSegment(_,et){return this._json.Curves[_].Segments[et]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(_){return this._json.UserData[_].Time}getEventValue(_){return this._json.UserData[_].Value}}var EvaluationOptionFlag=(_e=>(_e[_e.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",_e))(EvaluationOptionFlag||{});const EffectNameEyeBlink="EyeBlink",EffectNameLipSync="LipSync",TargetNameModel="Model",TargetNameParameter="Parameter",TargetNamePartOpacity="PartOpacity",IdNameOpacity="Opacity",UseOldBeziersCurveMotion=!1;function lerpPoints(_e,_,et){const tt=new CubismMotionPoint;return tt.time=_e.time+(_.time-_e.time)*et,tt.value=_e.value+(_.value-_e.value)*et,tt}function linearEvaluate(_e,_){let et=(_-_e[0].time)/(_e[1].time-_e[0].time);return et<0&&(et=0),_e[0].value+(_e[1].value-_e[0].value)*et}function bezierEvaluate(_e,_){let et=(_-_e[0].time)/(_e[3].time-_e[0].time);et<0&&(et=0);const tt=lerpPoints(_e[0],_e[1],et),rt=lerpPoints(_e[1],_e[2],et),nt=lerpPoints(_e[2],_e[3],et),ot=lerpPoints(tt,rt,et),at=lerpPoints(rt,nt,et);return lerpPoints(ot,at,et).value}function bezierEvaluateCardanoInterpretation(_e,_){const et=_,tt=_e[0].time,rt=_e[3].time,nt=_e[1].time,ot=_e[2].time,at=rt-3*ot+3*nt-tt,lt=3*ot-6*nt+3*tt,ct=3*nt-3*tt,dt=tt-et,st=CubismMath.cardanoAlgorithmForBezier(at,lt,ct,dt),it=lerpPoints(_e[0],_e[1],st),ut=lerpPoints(_e[1],_e[2],st),ht=lerpPoints(_e[2],_e[3],st),ft=lerpPoints(it,ut,st),gt=lerpPoints(ut,ht,st);return lerpPoints(ft,gt,st).value}function steppedEvaluate(_e,_){return _e[0].value}function inverseSteppedEvaluate(_e,_){return _e[1].value}function evaluateCurve(_e,_,et){const tt=_e.curves[_];let rt=-1;const nt=tt.baseSegmentIndex+tt.segmentCount;let ot=0;for(let lt=tt.baseSegmentIndex;lt<nt;++lt)if(ot=_e.segments[lt].basePointIndex+(_e.segments[lt].segmentType==CubismMotionSegmentType.CubismMotionSegmentType_Bezier?3:1),_e.points[ot].time>et){rt=lt;break}if(rt==-1)return _e.points[ot].value;const at=_e.segments[rt];return at.evaluate(_e.points.slice(at.basePointIndex),et)}class CubismMotion extends ACubismMotion{constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0,this._modelOpacity=1}static create(_,et){const tt=new CubismMotion;return tt.parse(_),tt._sourceFrameRate=tt._motionData.fps,tt._loopDurationSeconds=tt._motionData.duration,tt._onFinishedMotion=et,tt}doUpdateParameters(_,et,tt,rt){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=EffectNameEyeBlink),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=EffectNameLipSync),this._modelCurveIdOpacity==null&&(this._modelCurveIdOpacity=IdNameOpacity);let nt=et-rt.getStartTime();nt<0&&(nt=0);let ot=Number.MAX_VALUE,at=Number.MAX_VALUE;const lt=64;let ct=0,dt=0;this._eyeBlinkParameterIds.length>lt&&CubismLogDebug("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>lt&&CubismLogDebug("too many lip sync targets : {0}",this._lipSyncParameterIds.length);const st=this._fadeInSeconds<=0?1:CubismMath.getEasingSine((et-rt.getFadeInStartTime())/this._fadeInSeconds),it=this._fadeOutSeconds<=0||rt.getEndTime()<0?1:CubismMath.getEasingSine((rt.getEndTime()-et)/this._fadeOutSeconds);let ut,ht,ft,gt=nt;if(this._isLoop)for(;gt>this._motionData.duration;)gt-=this._motionData.duration;const mt=this._motionData.curves;for(ht=0;ht<this._motionData.curveCount&&mt[ht].type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model;++ht)ut=evaluateCurve(this._motionData,ht,gt),mt[ht].id==this._modelCurveIdEyeBlink?at=ut:mt[ht].id==this._modelCurveIdLipSync?ot=ut:mt[ht].id==this._modelCurveIdOpacity&&(this._modelOpacity=ut,_.setModelOapcity(this.getModelOpacityValue()));for(;ht<this._motionData.curveCount&&mt[ht].type==CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;++ht){if(ft=_.getParameterIndex(mt[ht].id),ft==-1)continue;const yt=_.getParameterValueByIndex(ft);if(ut=evaluateCurve(this._motionData,ht,gt),at!=Number.MAX_VALUE){for(let vt=0;vt<this._eyeBlinkParameterIds.length&&vt<lt;++vt)if(this._eyeBlinkParameterIds[vt]==mt[ht].id){ut*=at,dt|=1<<vt;break}}if(ot!=Number.MAX_VALUE){for(let vt=0;vt<this._lipSyncParameterIds.length&&vt<lt;++vt)if(this._lipSyncParameterIds[vt]==mt[ht].id){ut+=ot,ct|=1<<vt;break}}let bt;if(mt[ht].fadeInTime<0&&mt[ht].fadeOutTime<0)bt=yt+(ut-yt)*tt;else{let vt,xt;mt[ht].fadeInTime<0?vt=st:vt=mt[ht].fadeInTime==0?1:CubismMath.getEasingSine((et-rt.getFadeInStartTime())/mt[ht].fadeInTime),mt[ht].fadeOutTime<0?xt=it:xt=mt[ht].fadeOutTime==0||rt.getEndTime()<0?1:CubismMath.getEasingSine((rt.getEndTime()-et)/mt[ht].fadeOutTime);const wt=this._weight*vt*xt;bt=yt+(ut-yt)*wt}_.setParameterValueByIndex(ft,bt,1)}{if(at!=Number.MAX_VALUE)for(let yt=0;yt<this._eyeBlinkParameterIds.length&&yt<lt;++yt){const bt=_.getParameterValueById(this._eyeBlinkParameterIds[yt]);if(dt>>yt&1)continue;const vt=bt+(at-bt)*tt;_.setParameterValueById(this._eyeBlinkParameterIds[yt],vt)}if(ot!=Number.MAX_VALUE)for(let yt=0;yt<this._lipSyncParameterIds.length&&yt<lt;++yt){const bt=_.getParameterValueById(this._lipSyncParameterIds[yt]);if(ct>>yt&1)continue;const vt=bt+(ot-bt)*tt;_.setParameterValueById(this._lipSyncParameterIds[yt],vt)}}for(;ht<this._motionData.curveCount&&mt[ht].type==CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;++ht)if(ut=evaluateCurve(this._motionData,ht,gt),CubismConfig.setOpacityFromMotion)_.setPartOpacityById(mt[ht].id,ut);else{if(ft=_.getParameterIndex(mt[ht].id),ft==-1)continue;_.setParameterValueByIndex(ft,ut)}nt>=this._motionData.duration&&(this._isLoop?(rt.setStartTime(et),this._isLoopFadeIn&&rt.setFadeInStartTime(et)):(this._onFinishedMotion&&this._onFinishedMotion(this),rt.setIsFinished(!0))),this._lastWeight=tt}setIsLoop(_){this._isLoop=_}isLoop(){return this._isLoop}setIsLoopFadeIn(_){this._isLoopFadeIn=_}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(_,et){const tt=this._motionData.curves;for(let rt=0;rt<this._motionData.curveCount;++rt)if(_==tt[rt].id){tt[rt].fadeInTime=et;return}}setParameterFadeOutTime(_,et){const tt=this._motionData.curves;for(let rt=0;rt<this._motionData.curveCount;++rt)if(_==tt[rt].id){tt[rt].fadeOutTime=et;return}}getParameterFadeInTime(_){const et=this._motionData.curves;for(let tt=0;tt<this._motionData.curveCount;++tt)if(_==et[tt].id)return et[tt].fadeInTime;return-1}getParameterFadeOutTime(_){const et=this._motionData.curves;for(let tt=0;tt<this._motionData.curveCount;++tt)if(_==et[tt].id)return et[tt].fadeOutTime;return-1}setEffectIds(_,et){this._eyeBlinkParameterIds=_,this._lipSyncParameterIds=et}release(){this._motionData=void 0}parse(_){this._motionData=new CubismMotionData;const et=new CubismMotionJson(_);this._motionData.duration=et.getMotionDuration(),this._motionData.loop=et.isMotionLoop(),this._motionData.curveCount=et.getMotionCurveCount(),this._motionData.fps=et.getMotionFps(),this._motionData.eventCount=et.getEventCount();const tt=et.getEvaluationOptionFlag(EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted),rt=et.getMotionFadeInTime(),nt=et.getMotionFadeOutTime();rt!==void 0?this._fadeInSeconds=rt<0?1:rt:this._fadeInSeconds=1,nt!==void 0?this._fadeOutSeconds=nt<0?1:nt:this._fadeOutSeconds=1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map(()=>new CubismMotionCurve),this._motionData.segments=Array.from({length:et.getMotionTotalSegmentCount()}).map(()=>new CubismMotionSegment),this._motionData.events=Array.from({length:this._motionData.eventCount}).map(()=>new CubismMotionEvent),this._motionData.points=[];let ot=0,at=0;for(let lt=0;lt<this._motionData.curveCount;++lt){const ct=this._motionData.curves[lt];switch(et.getMotionCurveTarget(lt)){case TargetNameModel:ct.type=CubismMotionCurveTarget.CubismMotionCurveTarget_Model;break;case TargetNameParameter:ct.type=CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;break;case TargetNamePartOpacity:ct.type=CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;break;default:CubismLogWarning('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!')}ct.id=et.getMotionCurveId(lt),ct.baseSegmentIndex=at;const dt=et.getMotionCurveFadeInTime(lt),st=et.getMotionCurveFadeOutTime(lt);ct.fadeInTime=dt!==void 0?dt:-1,ct.fadeOutTime=st!==void 0?st:-1;for(let it=0;it<et.getMotionCurveSegmentCount(lt);){switch(it==0?(this._motionData.segments[at].basePointIndex=ot,this._motionData.points[ot]=new CubismMotionPoint(et.getMotionCurveSegment(lt,it),et.getMotionCurveSegment(lt,it+1)),ot+=1,it+=2):this._motionData.segments[at].basePointIndex=ot-1,et.getMotionCurveSegment(lt,it)){case CubismMotionSegmentType.CubismMotionSegmentType_Linear:{this._motionData.segments[at].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_Linear,this._motionData.segments[at].evaluate=linearEvaluate,this._motionData.points[ot]=new CubismMotionPoint(et.getMotionCurveSegment(lt,it+1),et.getMotionCurveSegment(lt,it+2)),ot+=1,it+=3;break}case CubismMotionSegmentType.CubismMotionSegmentType_Bezier:{this._motionData.segments[at].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_Bezier,tt||UseOldBeziersCurveMotion?this._motionData.segments[at].evaluate=bezierEvaluate:this._motionData.segments[at].evaluate=bezierEvaluateCardanoInterpretation,this._motionData.points[ot]=new CubismMotionPoint(et.getMotionCurveSegment(lt,it+1),et.getMotionCurveSegment(lt,it+2)),this._motionData.points[ot+1]=new CubismMotionPoint(et.getMotionCurveSegment(lt,it+3),et.getMotionCurveSegment(lt,it+4)),this._motionData.points[ot+2]=new CubismMotionPoint(et.getMotionCurveSegment(lt,it+5),et.getMotionCurveSegment(lt,it+6)),ot+=3,it+=7;break}case CubismMotionSegmentType.CubismMotionSegmentType_Stepped:{this._motionData.segments[at].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_Stepped,this._motionData.segments[at].evaluate=steppedEvaluate,this._motionData.points[ot]=new CubismMotionPoint(et.getMotionCurveSegment(lt,it+1),et.getMotionCurveSegment(lt,it+2)),ot+=1,it+=3;break}case CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped:{this._motionData.segments[at].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped,this._motionData.segments[at].evaluate=inverseSteppedEvaluate,this._motionData.points[ot]=new CubismMotionPoint(et.getMotionCurveSegment(lt,it+1),et.getMotionCurveSegment(lt,it+2)),ot+=1,it+=3;break}default:{CSM_ASSERT(0);break}}++ct.segmentCount,++at}this._motionData.curves.push(ct)}for(let lt=0;lt<et.getEventCount();++lt)this._motionData.events[lt].fireTime=et.getEventTime(lt),this._motionData.events[lt].value=et.getEventValue(lt);et.release()}getFiredEvent(_,et){this._firedEventValues.length=0;for(let tt=0;tt<this._motionData.eventCount;++tt)this._motionData.events[tt].fireTime>_&&this._motionData.events[tt].fireTime<=et&&this._firedEventValues.push(this._motionData.events[tt].value);return this._firedEventValues}isExistModelOpacity(){for(let _=0;_<this._motionData.curveCount;_++){const et=this._motionData.curves[_];if(et.type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model&&et.id===IdNameOpacity)return!0}return!1}getModelOpacityIndex(){if(this.isExistModelOpacity())for(let _=0;_<this._motionData.curveCount;_++){const et=this._motionData.curves[_];if(et.type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model&&et.id===IdNameOpacity)return _}return-1}getModelOpacityId(_){if(_!=-1){const et=this._motionData.curves[_];if(et.type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model&&et.id===IdNameOpacity)return et.id}}getModelOpacityValue(){return this._modelOpacity}}class Cubism4MotionManager extends MotionManager{constructor(_,et){var tt;super(_,et),__publicField(this,"definitions"),__publicField(this,"groups",{idle:"Idle"}),__publicField(this,"motionDataType","json"),__publicField(this,"queueManager",new CubismMotionQueueManager),__publicField(this,"expressionManager"),__publicField(this,"eyeBlinkIds"),__publicField(this,"lipSyncIds",["ParamMouthOpenY"]),this.definitions=(tt=_.motions)!=null?tt:{},this.eyeBlinkIds=_.getEyeBlinkParameters()||[];const rt=_.getLipSyncParameters();rt!=null&&rt.length&&(this.lipSyncIds=rt),this.init(et)}init(_){super.init(_),this.settings.expressions&&(this.expressionManager=new Cubism4ExpressionManager(this.settings,_)),this.queueManager.setEventCallback((et,tt,rt)=>{this.emit("motion:"+tt)})}isFinished(){return this.queueManager.isFinished()}_startMotion(_,et){return _.setFinishedMotionHandler(et),this.queueManager.stopAllMotions(),this.queueManager.startMotion(_,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(_,et,tt){const rt=CubismMotion.create(_),nt=new CubismMotionJson(_),ot=(et===this.groups.idle?config.idleMotionFadingDuration:config.motionFadingDuration)/1e3;return nt.getMotionFadeInTime()===void 0&&rt.setFadeInTime(tt.FadeInTime>0?tt.FadeInTime:ot),nt.getMotionFadeOutTime()===void 0&&rt.setFadeOutTime(tt.FadeOutTime>0?tt.FadeOutTime:ot),rt.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),rt}getMotionFile(_){return _.File}getMotionName(_){return _.File}getSoundFile(_){return _.Sound}updateParameters(_,et){return this.queueManager.doUpdateMotion(_,et)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}}const ParamAngleX="ParamAngleX",ParamAngleY="ParamAngleY",ParamAngleZ="ParamAngleZ",ParamEyeBallX="ParamEyeBallX",ParamEyeBallY="ParamEyeBallY",ParamMouthForm="ParamMouthForm",ParamBodyAngleX="ParamBodyAngleX",ParamBreath="ParamBreath";class CubismBreath{constructor(){this._breathParameters=[],this._currentTime=0}static create(){return new CubismBreath}setParameters(_){this._breathParameters=_}getParameters(){return this._breathParameters}updateParameters(_,et){this._currentTime+=et;const tt=this._currentTime*2*3.14159;for(let rt=0;rt<this._breathParameters.length;++rt){const nt=this._breathParameters[rt];_.addParameterValueById(nt.parameterId,nt.offset+nt.peak*Math.sin(tt/nt.cycle),nt.weight)}}}class BreathParameterData{constructor(_,et,tt,rt,nt){this.parameterId=_??void 0,this.offset=et??0,this.peak=tt??0,this.cycle=rt??0,this.weight=nt??0}}const _CubismEyeBlink=class vo{static create(_){return new vo(_)}setBlinkingInterval(_){this._blinkingIntervalSeconds=_}setBlinkingSetting(_,et,tt){this._closingSeconds=_,this._closedSeconds=et,this._openingSeconds=tt}setParameterIds(_){this._parameterIds=_}getParameterIds(){return this._parameterIds}updateParameters(_,et){this._userTimeSeconds+=et;let tt,rt=0;switch(this._blinkingState){case 2:rt=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,rt>=1&&(rt=1,this._blinkingState=3,this._stateStartTimeSeconds=this._userTimeSeconds),tt=1-rt;break;case 3:rt=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,rt>=1&&(this._blinkingState=4,this._stateStartTimeSeconds=this._userTimeSeconds),tt=0;break;case 4:rt=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,rt>=1&&(rt=1,this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming()),tt=rt;break;case 1:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=2,this._stateStartTimeSeconds=this._userTimeSeconds),tt=1;break;case 0:default:this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming(),tt=1;break}vo.CloseIfZero||(tt=-tt);for(let nt=0;nt<this._parameterIds.length;++nt)_.setParameterValueById(this._parameterIds[nt],tt)}constructor(_){var et,tt;this._blinkingState=0,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],_!=null&&(this._parameterIds=(tt=(et=_.getEyeBlinkParameters())==null?void 0:et.slice())!=null?tt:this._parameterIds)}determinNextBlinkingTiming(){const _=Math.random();return this._userTimeSeconds+_*(2*this._blinkingIntervalSeconds-1)}};_CubismEyeBlink.CloseIfZero=!0;let CubismEyeBlink=_CubismEyeBlink;class csmRect{constructor(_=0,et=0,tt=0,rt=0){this.x=_,this.y=et,this.width=tt,this.height=rt}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(_){this.x=_.x,this.y=_.y,this.width=_.width,this.height=_.height}expand(_,et){this.x-=_,this.y-=et,this.width+=_*2,this.height+=et*2}}const ColorChannelCount=4,ClippingMaskMaxCountOnDefault=36,ClippingMaskMaxCountOnMultiRenderTexture=32,ShaderCount=10;let s_instance,s_viewport,s_fbo;class CubismClippingManager_WebGL{getChannelFlagAsColor(_){return this._channelColors[_]}getMaskRenderTexture(){if(this._maskTexture&&this._maskTexture.textures!=null)this._maskTexture.frameNo=this._currentFrameNo;else{this._maskRenderTextures=[],this._maskColorBuffers=[];const _=this._clippingMaskBufferSize;for(let et=0;et<this._renderTextureCount;et++)this._maskColorBuffers.push(this.gl.createTexture()),this.gl.bindTexture(this.gl.TEXTURE_2D,this._maskColorBuffers[et]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,_,_,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this._maskRenderTextures.push(this.gl.createFramebuffer()),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTextures[et]),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._maskColorBuffers[et],0);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s_fbo),this._maskTexture=new CubismRenderTextureResource(this._currentFrameNo,this._maskRenderTextures)}return this._maskTexture.textures}setGL(_){this.gl=_}calcClippedDrawTotalBounds(_,et){let tt=Number.MAX_VALUE,rt=Number.MAX_VALUE,nt=Number.MIN_VALUE,ot=Number.MIN_VALUE;const at=et._clippedDrawableIndexList.length;for(let lt=0;lt<at;lt++){const ct=et._clippedDrawableIndexList[lt],dt=_.getDrawableVertexCount(ct),st=_.getDrawableVertices(ct);let it=Number.MAX_VALUE,ut=Number.MAX_VALUE,ht=-Number.MAX_VALUE,ft=-Number.MAX_VALUE;const gt=dt*Constant.vertexStep;for(let mt=Constant.vertexOffset;mt<gt;mt+=Constant.vertexStep){const yt=st[mt],bt=st[mt+1];yt<it&&(it=yt),yt>ht&&(ht=yt),bt<ut&&(ut=bt),bt>ft&&(ft=bt)}if(it!=Number.MAX_VALUE)if(it<tt&&(tt=it),ut<rt&&(rt=ut),ht>nt&&(nt=ht),ft>ot&&(ot=ft),tt==Number.MAX_VALUE)et._allClippedDrawRect.x=0,et._allClippedDrawRect.y=0,et._allClippedDrawRect.width=0,et._allClippedDrawRect.height=0,et._isUsing=!1;else{et._isUsing=!0;const mt=nt-tt,yt=ot-rt;et._allClippedDrawRect.x=tt,et._allClippedDrawRect.y=rt,et._allClippedDrawRect.width=mt,et._allClippedDrawRect.height=yt}}}constructor(){this._currentMaskRenderTexture=null,this._currentFrameNo=0,this._renderTextureCount=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new csmRect,this._tmpMatrix=new CubismMatrix44,this._tmpMatrixForMask=new CubismMatrix44,this._tmpMatrixForDraw=new CubismMatrix44;let _=new CubismTextureColor;_.R=1,_.G=0,_.B=0,_.A=0,this._channelColors.push(_),_=new CubismTextureColor,_.R=0,_.G=1,_.B=0,_.A=0,this._channelColors.push(_),_=new CubismTextureColor,_.R=0,_.G=0,_.B=1,_.A=0,this._channelColors.push(_),_=new CubismTextureColor,_.R=0,_.G=0,_.B=0,_.A=1,this._channelColors.push(_)}release(){var _;const et=this;for(let tt=0;tt<this._clippingContextListForMask.length;tt++)this._clippingContextListForMask[tt]&&((_=this._clippingContextListForMask[tt])==null||_.release());if(et._clippingContextListForMask=void 0,et._clippingContextListForDraw=void 0,this._maskTexture){for(let tt=0;tt<this._maskTexture.textures.length;tt++)this.gl.deleteFramebuffer(this._maskTexture.textures[tt]);this._maskTexture=void 0}if(et._channelColors=void 0,this._maskColorBuffers)for(let tt=0;tt<this._maskColorBuffers.length;tt++)this.gl.deleteTexture(this._maskColorBuffers[tt]);this._maskColorBuffers=void 0,this._maskRenderTextures=void 0,this._clearedFrameBufferflags=void 0}initialize(_,et,tt,rt,nt){nt%1!=0&&(CubismLogWarning("The number of render textures must be specified as an integer. The decimal point is rounded down and corrected to an integer."),nt=~~nt),nt<1&&CubismLogWarning("The number of render textures must be an integer greater than or equal to 1. Set the number of render textures to 1."),this._renderTextureCount=nt<1?1:nt,this._clearedFrameBufferflags=[];for(let ot=0;ot<et;ot++){if(rt[ot]<=0){this._clippingContextListForDraw.push(null);continue}let at=this.findSameClip(tt[ot],rt[ot]);at==null&&(at=new CubismClippingContext(this,tt[ot],rt[ot]),this._clippingContextListForMask.push(at)),at.addClippedDrawable(ot),this._clippingContextListForDraw.push(at)}}setupClippingContext(_,et){this._currentFrameNo++;let tt=0;for(let rt=0;rt<this._clippingContextListForMask.length;rt++){const nt=this._clippingContextListForMask[rt];this.calcClippedDrawTotalBounds(_,nt),nt._isUsing&&tt++}if(tt>0){this.setupLayoutBounds(et.isUsingHighPrecisionMask()?0:tt),et.isUsingHighPrecisionMask()||(this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._currentMaskRenderTexture=this.getMaskRenderTexture()[0],et.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),this._clearedFrameBufferflags||(this._clearedFrameBufferflags=[]);for(let rt=0;rt<this._renderTextureCount;rt++)this._clearedFrameBufferflags[rt]=!1;for(let rt=0;rt<this._clippingContextListForMask.length;rt++){const nt=this._clippingContextListForMask[rt],ot=nt._allClippedDrawRect,at=nt._layoutBounds,lt=.05;let ct=0,dt=0;const st=this.getMaskRenderTexture()[nt._bufferIndex];if(this._currentMaskRenderTexture!=st&&!et.isUsingHighPrecisionMask()&&(this._currentMaskRenderTexture=st,et.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),et.isUsingHighPrecisionMask()){const it=_.getPixelsPerUnit(),ut=nt.getClippingManager()._clippingMaskBufferSize,ht=at.width*ut,ft=at.height*ut;this._tmpBoundsOnModel.setRect(ot),this._tmpBoundsOnModel.width*it>ht?(this._tmpBoundsOnModel.expand(ot.width*lt,0),ct=at.width/this._tmpBoundsOnModel.width):ct=it/ht,this._tmpBoundsOnModel.height*it>ft?(this._tmpBoundsOnModel.expand(0,ot.height*lt),dt=at.height/this._tmpBoundsOnModel.height):dt=it/ft}else this._tmpBoundsOnModel.setRect(ot),this._tmpBoundsOnModel.expand(ot.width*lt,ot.height*lt),ct=at.width/this._tmpBoundsOnModel.width,dt=at.height/this._tmpBoundsOnModel.height;if(this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(at.x,at.y),this._tmpMatrix.scaleRelative(ct,dt),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(at.x,at.y),this._tmpMatrix.scaleRelative(ct,dt),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),nt._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),nt._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray()),!et.isUsingHighPrecisionMask()){const it=nt._clippingIdCount;for(let ut=0;ut<it;ut++){const ht=nt._clippingIdList[ut];_.getDrawableDynamicFlagVertexPositionsDidChange(ht)&&(et.setIsCulling(_.getDrawableCulling(ht)!=!1),this._clearedFrameBufferflags[nt._bufferIndex]||(this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this._clearedFrameBufferflags[nt._bufferIndex]=!0),et.setClippingContextBufferForMask(nt),et.drawMesh(_.getDrawableTextureIndex(ht),_.getDrawableVertexIndexCount(ht),_.getDrawableVertexCount(ht),_.getDrawableVertexIndices(ht),_.getDrawableVertices(ht),_.getDrawableVertexUvs(ht),_.getMultiplyColor(ht),_.getScreenColor(ht),_.getDrawableOpacity(ht),CubismBlendMode.CubismBlendMode_Normal,!1))}}}et.isUsingHighPrecisionMask()||(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s_fbo),et.setClippingContextBufferForMask(null),this.gl.viewport(s_viewport[0],s_viewport[1],s_viewport[2],s_viewport[3]))}}findSameClip(_,et){for(let tt=0;tt<this._clippingContextListForMask.length;tt++){const rt=this._clippingContextListForMask[tt],nt=rt._clippingIdCount;if(nt!=et)continue;let ot=0;for(let at=0;at<nt;at++){const lt=rt._clippingIdList[at];for(let ct=0;ct<nt;ct++)if(_[ct]==lt){ot++;break}}if(ot==nt)return rt}return null}setupLayoutBounds(_){const et=this._renderTextureCount<=1?ClippingMaskMaxCountOnDefault:ClippingMaskMaxCountOnMultiRenderTexture*this._renderTextureCount;if(_<=0||_>et){_>et&&CubismLogError(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,_-et,this._renderTextureCount,_);for(let ct=0;ct<this._clippingContextListForMask.length;ct++){const dt=this._clippingContextListForMask[ct];dt._layoutChannelNo=0,dt._layoutBounds.x=0,dt._layoutBounds.y=0,dt._layoutBounds.width=1,dt._layoutBounds.height=1,dt._bufferIndex=0}return}const tt=this._renderTextureCount<=1?9:8;let rt=_/this._renderTextureCount,nt=_%this._renderTextureCount;rt=~~rt,nt=~~nt;let ot=rt/ColorChannelCount,at=rt%ColorChannelCount;ot=~~ot,at=~~at;let lt=0;for(let ct=0;ct<this._renderTextureCount;ct++)for(let dt=0;dt<ColorChannelCount;dt++){let st=ot+(dt<at?1:0);const it=at+1>=ColorChannelCount?0:at+1;if(st<tt&&dt==it&&(st+=ct<nt?1:0),st!=0)if(st==1){const ut=this._clippingContextListForMask[lt++];ut._layoutChannelNo=dt,ut._layoutBounds.x=0,ut._layoutBounds.y=0,ut._layoutBounds.width=1,ut._layoutBounds.height=1,ut._bufferIndex=ct}else if(st==2)for(let ut=0;ut<st;ut++){let ht=ut%2;ht=~~ht;const ft=this._clippingContextListForMask[lt++];ft._layoutChannelNo=dt,ft._layoutBounds.x=ht*.5,ft._layoutBounds.y=0,ft._layoutBounds.width=.5,ft._layoutBounds.height=1,ft._bufferIndex=ct}else if(st<=4)for(let ut=0;ut<st;ut++){let ht=ut%2,ft=ut/2;ht=~~ht,ft=~~ft;const gt=this._clippingContextListForMask[lt++];gt._layoutChannelNo=dt,gt._layoutBounds.x=ht*.5,gt._layoutBounds.y=ft*.5,gt._layoutBounds.width=.5,gt._layoutBounds.height=.5,gt._bufferIndex=ct}else if(st<=tt)for(let ut=0;ut<st;ut++){let ht=ut%3,ft=ut/3;ht=~~ht,ft=~~ft;const gt=this._clippingContextListForMask[lt++];gt._layoutChannelNo=dt,gt._layoutBounds.x=ht/3,gt._layoutBounds.y=ft/3,gt._layoutBounds.width=1/3,gt._layoutBounds.height=1/3,gt._bufferIndex=ct}else if(CubismConfig.supportMoreMaskDivisions&&st<=16)for(let ut=0;ut<st;ut++){let ht=ut%4,ft=ut/4;ht=~~ht,ft=~~ft;const gt=this._clippingContextListForMask[lt++];gt._layoutChannelNo=dt,gt._layoutBounds.x=ht/4,gt._layoutBounds.y=ft/4,gt._layoutBounds.width=1/4,gt._layoutBounds.height=1/4,gt._bufferIndex=ct}else{CubismLogError(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,_-et,this._renderTextureCount,_);for(let ut=0;ut<st;ut++){const ht=this._clippingContextListForMask[lt++];ht._layoutChannelNo=0,ht._layoutBounds.x=0,ht._layoutBounds.y=0,ht._layoutBounds.width=1,ht._layoutBounds.height=1,ht._bufferIndex=0}}}}getColorBuffer(){return this._maskColorBuffers}getClippingContextListForDraw(){return this._clippingContextListForDraw}getClippingMaskCount(){return this._clippingContextListForMask.length}setClippingMaskBufferSize(_){this._clippingMaskBufferSize=_}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}getRenderTextureCount(){return this._renderTextureCount}}class CubismRenderTextureResource{constructor(_,et){this.frameNo=_,this.textures=et}}class CubismClippingContext{constructor(_,et,tt){this._isUsing=!1,this._owner=_,this._clippingIdList=et,this._clippingIdCount=tt,this._allClippedDrawRect=new csmRect,this._layoutBounds=new csmRect,this._clippedDrawableIndexList=[],this._matrixForMask=new CubismMatrix44,this._matrixForDraw=new CubismMatrix44,this._bufferIndex=0}release(){const _=this;_._layoutBounds=void 0,_._allClippedDrawRect=void 0,_._clippedDrawableIndexList=void 0}addClippedDrawable(_){this._clippedDrawableIndexList.push(_)}getClippingManager(){return this._owner}setGl(_){this._owner.setGL(_)}}class CubismRendererProfile_WebGL{setGlEnable(_,et){et?this.gl.enable(_):this.gl.disable(_)}setGlEnableVertexAttribArray(_,et){et?this.gl.enableVertexAttribArray(_):this.gl.disableVertexAttribArray(_)}save(){if(this.gl==null){CubismLogError(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._lastArrayBufferBinding=this.gl.getParameter(this.gl.ARRAY_BUFFER_BINDING),this._lastArrayBufferBinding=this.gl.getParameter(this.gl.ELEMENT_ARRAY_BUFFER_BINDING),this._lastProgram=this.gl.getParameter(this.gl.CURRENT_PROGRAM),this._lastActiveTexture=this.gl.getParameter(this.gl.ACTIVE_TEXTURE),this.gl.activeTexture(this.gl.TEXTURE1),this._lastTexture1Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this.gl.activeTexture(this.gl.TEXTURE0),this._lastTexture0Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._lastVertexAttribArrayEnabled[0]=this.gl.getVertexAttrib(0,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[1]=this.gl.getVertexAttrib(1,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[2]=this.gl.getVertexAttrib(2,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[3]=this.gl.getVertexAttrib(3,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastScissorTest=this.gl.isEnabled(this.gl.SCISSOR_TEST),this._lastStencilTest=this.gl.isEnabled(this.gl.STENCIL_TEST),this._lastDepthTest=this.gl.isEnabled(this.gl.DEPTH_TEST),this._lastCullFace=this.gl.isEnabled(this.gl.CULL_FACE),this._lastBlend=this.gl.isEnabled(this.gl.BLEND),this._lastFrontFace=this.gl.getParameter(this.gl.FRONT_FACE),this._lastColorMask=this.gl.getParameter(this.gl.COLOR_WRITEMASK),this._lastBlending[0]=this.gl.getParameter(this.gl.BLEND_SRC_RGB),this._lastBlending[1]=this.gl.getParameter(this.gl.BLEND_DST_RGB),this._lastBlending[2]=this.gl.getParameter(this.gl.BLEND_SRC_ALPHA),this._lastBlending[3]=this.gl.getParameter(this.gl.BLEND_DST_ALPHA),this._lastFBO=this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING),this._lastViewport=this.gl.getParameter(this.gl.VIEWPORT)}restore(){if(this.gl==null){CubismLogError(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this.gl.useProgram(this._lastProgram),this.setGlEnableVertexAttribArray(0,this._lastVertexAttribArrayEnabled[0]),this.setGlEnableVertexAttribArray(1,this._lastVertexAttribArrayEnabled[1]),this.setGlEnableVertexAttribArray(2,this._lastVertexAttribArrayEnabled[2]),this.setGlEnableVertexAttribArray(3,this._lastVertexAttribArrayEnabled[3]),this.setGlEnable(this.gl.SCISSOR_TEST,this._lastScissorTest),this.setGlEnable(this.gl.STENCIL_TEST,this._lastStencilTest),this.setGlEnable(this.gl.DEPTH_TEST,this._lastDepthTest),this.setGlEnable(this.gl.CULL_FACE,this._lastCullFace),this.setGlEnable(this.gl.BLEND,this._lastBlend),this.gl.frontFace(this._lastFrontFace),this.gl.colorMask(this._lastColorMask[0],this._lastColorMask[1],this._lastColorMask[2],this._lastColorMask[3]),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this._lastArrayBufferBinding),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this._lastElementArrayBufferBinding),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture1Binding2D),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture0Binding2D),this.gl.activeTexture(this._lastActiveTexture),this.gl.blendFuncSeparate(this._lastBlending[0],this._lastBlending[1],this._lastBlending[2],this._lastBlending[3])}setGl(_){this.gl=_}constructor(){this._lastVertexAttribArrayEnabled=new Array(4),this._lastColorMask=new Array(4),this._lastBlending=new Array(4),this._lastViewport=new Array(4)}}class CubismShader_WebGL{static getInstance(){return s_instance==null&&(s_instance=new CubismShader_WebGL),s_instance}static deleteInstance(){s_instance&&(s_instance.release(),s_instance=void 0)}constructor(){this._shaderSets=[]}release(){this.releaseShaderProgram()}setupShaderProgram(_,et,tt,rt,nt,ot,at,lt,ct,dt,st,it,ut,ht,ft){ut||CubismLogError("NoPremultipliedAlpha is not allowed"),this._shaderSets.length==0&&this.generateShaders();let gt,mt,yt,bt;const vt=_.getClippingContextBufferForMask();if(vt!=null){const xt=this._shaderSets[0];this.gl.useProgram(xt.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,et),this.gl.uniform1i(xt.samplerTexture0Location,0),at.vertex==null&&(at.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,at.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,rt,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(xt.attributePositionLocation),this.gl.vertexAttribPointer(xt.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),at.uv==null&&(at.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,at.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,ot,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(xt.attributeTexCoordLocation),this.gl.vertexAttribPointer(xt.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const wt=vt._layoutChannelNo,St=vt.getClippingManager().getChannelFlagAsColor(wt);this.gl.uniform4f(xt.uniformChannelFlagLocation,St.R,St.G,St.B,St.A),this.gl.uniformMatrix4fv(xt.uniformClipMatrixLocation,!1,vt._matrixForMask.getArray());const Et=vt._layoutBounds;this.gl.uniform4f(xt.uniformBaseColorLocation,Et.x*2-1,Et.y*2-1,Et.getRight()*2-1,Et.getBottom()*2-1),this.gl.uniform4f(xt.uniformMultiplyColorLocation,st.R,st.G,st.B,st.A),this.gl.uniform4f(xt.uniformScreenColorLocation,it.R,it.G,it.B,it.A),gt=this.gl.ZERO,mt=this.gl.ONE_MINUS_SRC_COLOR,yt=this.gl.ZERO,bt=this.gl.ONE_MINUS_SRC_ALPHA}else{const xt=_.getClippingContextBufferForDraw(),St=xt!=null?ft?2:1:0;let Et;switch(ct){case CubismBlendMode.CubismBlendMode_Normal:default:Et=this._shaderSets[1+St],gt=this.gl.ONE,mt=this.gl.ONE_MINUS_SRC_ALPHA,yt=this.gl.ONE,bt=this.gl.ONE_MINUS_SRC_ALPHA;break;case CubismBlendMode.CubismBlendMode_Additive:Et=this._shaderSets[4+St],gt=this.gl.ONE,mt=this.gl.ONE,yt=this.gl.ZERO,bt=this.gl.ONE;break;case CubismBlendMode.CubismBlendMode_Multiplicative:Et=this._shaderSets[7+St],gt=this.gl.DST_COLOR,mt=this.gl.ONE_MINUS_SRC_ALPHA,yt=this.gl.ZERO,bt=this.gl.ONE;break}if(this.gl.useProgram(Et.shaderProgram),at.vertex==null&&(at.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,at.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,rt,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(Et.attributePositionLocation),this.gl.vertexAttribPointer(Et.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),at.uv==null&&(at.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,at.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,ot,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(Et.attributeTexCoordLocation),this.gl.vertexAttribPointer(Et.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),xt!=null){this.gl.activeTexture(this.gl.TEXTURE1);const _t=xt.getClippingManager().getColorBuffer()[_.getClippingContextBufferForDraw()._bufferIndex];this.gl.bindTexture(this.gl.TEXTURE_2D,_t),this.gl.uniform1i(Et.samplerTexture1Location,1),this.gl.uniformMatrix4fv(Et.uniformClipMatrixLocation,!1,xt._matrixForDraw.getArray());const Tt=xt._layoutChannelNo,Rt=xt.getClippingManager().getChannelFlagAsColor(Tt);this.gl.uniform4f(Et.uniformChannelFlagLocation,Rt.R,Rt.G,Rt.B,Rt.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,et),this.gl.uniform1i(Et.samplerTexture0Location,0),this.gl.uniformMatrix4fv(Et.uniformMatrixLocation,!1,ht.getArray()),this.gl.uniform4f(Et.uniformBaseColorLocation,dt.R,dt.G,dt.B,dt.A),this.gl.uniform4f(Et.uniformMultiplyColorLocation,st.R,st.G,st.B,st.A),this.gl.uniform4f(Et.uniformScreenColorLocation,it.R,it.G,it.B,it.A)}at.index==null&&(at.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,at.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,nt,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(gt,mt,yt,bt)}releaseShaderProgram(){for(let _=0;_<this._shaderSets.length;_++)this.gl.deleteProgram(this._shaderSets[_].shaderProgram),this._shaderSets[_].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let _=0;_<ShaderCount;_++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram(vertexShaderSrcSetupMask,fragmentShaderSrcsetupMask),this._shaderSets[1].shaderProgram=this.loadShaderProgram(vertexShaderSrc,fragmentShaderSrcPremultipliedAlpha),this._shaderSets[2].shaderProgram=this.loadShaderProgram(vertexShaderSrcMasked,fragmentShaderSrcMaskPremultipliedAlpha),this._shaderSets[3].shaderProgram=this.loadShaderProgram(vertexShaderSrcMasked,fragmentShaderSrcMaskInvertedPremultipliedAlpha),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[0].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_multiplyColor"),this._shaderSets[0].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_screenColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[1].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_multiplyColor"),this._shaderSets[1].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_screenColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[2].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_multiplyColor"),this._shaderSets[2].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_screenColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[3].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_multiplyColor"),this._shaderSets[3].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_screenColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[4].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_multiplyColor"),this._shaderSets[4].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_screenColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[5].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_multiplyColor"),this._shaderSets[5].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_screenColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[6].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_multiplyColor"),this._shaderSets[6].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_screenColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[7].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_multiplyColor"),this._shaderSets[7].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_screenColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[8].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_multiplyColor"),this._shaderSets[8].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_screenColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor"),this._shaderSets[9].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_multiplyColor"),this._shaderSets[9].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_screenColor")}loadShaderProgram(_,et){const tt=this.gl.createProgram(),rt=this.compileShaderSource(this.gl.VERTEX_SHADER,_);if(!rt)return CubismLogError("Vertex shader compile error!"),0;const nt=this.compileShaderSource(this.gl.FRAGMENT_SHADER,et);return nt?(this.gl.attachShader(tt,rt),this.gl.attachShader(tt,nt),this.gl.linkProgram(tt),this.gl.getProgramParameter(tt,this.gl.LINK_STATUS)?(this.gl.deleteShader(rt),this.gl.deleteShader(nt),tt):(CubismLogError("Failed to link program: {0}",tt),this.gl.deleteShader(rt),this.gl.deleteShader(nt),tt&&this.gl.deleteProgram(tt),0)):(CubismLogError("Vertex shader compile error!"),0)}compileShaderSource(_,et){const tt=et,rt=this.gl.createShader(_);if(this.gl.shaderSource(rt,tt),this.gl.compileShader(rt),!rt){const ot=this.gl.getShaderInfoLog(rt);CubismLogError("Shader compile log: {0} ",ot)}return this.gl.getShaderParameter(rt,this.gl.COMPILE_STATUS)?rt:(this.gl.deleteShader(rt),null)}setGl(_){this.gl=_}}const vertexShaderSrcSetupMask="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",fragmentShaderSrcsetupMask="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",vertexShaderSrc="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",vertexShaderSrcMasked="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",fragmentShaderSrcPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 color = texColor * u_baseColor;   gl_FragColor = vec4(color.rgb, color.a);}",fragmentShaderSrcMaskPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",fragmentShaderSrcMaskInvertedPremultipliedAlpha="precision mediump float;varying vec2      v_texCoord;varying vec4      v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4      u_channelFlag;uniform vec4      u_baseColor;uniform vec4      u_multiplyColor;uniform vec4      u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * (1.0 - maskVal);   gl_FragColor = col_formask;}";class CubismRenderer_WebGL extends CubismRenderer{initialize(_,et=1){_.isUsingMasking()&&(this._clippingManager=new CubismClippingManager_WebGL,this._clippingManager.initialize(_,_.getDrawableCount(),_.getDrawableMasks(),_.getDrawableMaskCounts(),et));for(let tt=_.getDrawableCount()-1;tt>=0;tt--)this._sortedDrawableIndexList[tt]=0;super.initialize(_)}bindTexture(_,et){this._textures[_]=et}getBindedTextures(){return this._textures}setClippingMaskBufferSize(_){if(!this._model.isUsingMasking())return;const et=this._clippingManager.getRenderTextureCount();this._clippingManager.release(),this._clippingManager=new CubismClippingManager_WebGL,this._clippingManager.setClippingMaskBufferSize(_),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts(),et)}getClippingMaskBufferSize(){return this._model.isUsingMasking()?this._clippingManager.getClippingMaskBufferSize():-1}getRenderTextureCount(){return this._model.isUsingMasking()?this._clippingManager.getRenderTextureCount():-1}constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._rendererProfile=new CubismRendererProfile_WebGL,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}release(){var _,et,tt;const rt=this;this._clippingManager.release(),rt._clippingManager=void 0,(_=this.gl)==null||_.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,(et=this.gl)==null||et.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,(tt=this.gl)==null||tt.deleteBuffer(this._bufferData.index),this._bufferData.index=null,rt._bufferData=void 0,rt._textures=void 0}doDrawModel(){if(this.gl==null){CubismLogError(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._clippingManager!=null&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();const _=this.getModel().getDrawableCount(),et=this.getModel().getDrawableRenderOrders();for(let tt=0;tt<_;++tt){const rt=et[tt];this._sortedDrawableIndexList[rt]=tt}for(let tt=0;tt<_;++tt){const rt=this._sortedDrawableIndexList[tt];if(!this.getModel().getDrawableDynamicFlagIsVisible(rt))continue;const nt=this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw()[rt]:null;if(nt!=null&&this.isUsingHighPrecisionMask()){nt._isUsing&&(this.gl.viewport(0,0,this._clippingManager.getClippingMaskBufferSize(),this._clippingManager.getClippingMaskBufferSize()),this.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,nt.getClippingManager().getMaskRenderTexture()[nt._bufferIndex]),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT));{const ot=nt._clippingIdCount;for(let at=0;at<ot;at++){const lt=nt._clippingIdList[at];this._model.getDrawableDynamicFlagVertexPositionsDidChange(lt)&&(this.setIsCulling(this._model.getDrawableCulling(lt)!=!1),this.setClippingContextBufferForMask(nt),this.drawMesh(this.getModel().getDrawableTextureIndex(lt),this.getModel().getDrawableVertexIndexCount(lt),this.getModel().getDrawableVertexCount(lt),this.getModel().getDrawableVertexIndices(lt),this.getModel().getDrawableVertices(lt),this.getModel().getDrawableVertexUvs(lt),this.getModel().getMultiplyColor(lt),this.getModel().getScreenColor(lt),this.getModel().getDrawableOpacity(lt),CubismBlendMode.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s_fbo),this.setClippingContextBufferForMask(null),this.gl.viewport(s_viewport[0],s_viewport[1],s_viewport[2],s_viewport[3]),this.preDraw()}this.setClippingContextBufferForDraw(nt),this.setIsCulling(this.getModel().getDrawableCulling(rt)),this.drawMesh(this.getModel().getDrawableTextureIndex(rt),this.getModel().getDrawableVertexIndexCount(rt),this.getModel().getDrawableVertexCount(rt),this.getModel().getDrawableVertexIndices(rt),this.getModel().getDrawableVertices(rt),this.getModel().getDrawableVertexUvs(rt),this.getModel().getMultiplyColor(rt),this.getModel().getScreenColor(rt),this.getModel().getDrawableOpacity(rt),this.getModel().getDrawableBlendMode(rt),this.getModel().getDrawableInvertedMaskBit(rt))}}drawMesh(_,et,tt,rt,nt,ot,at,lt,ct,dt,st){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const it=this.getModelColor();this.getClippingContextBufferForMask()==null&&(it.A*=ct,this.isPremultipliedAlpha()&&(it.R*=it.A,it.G*=it.A,it.B*=it.A));let ut=null;this._textures[_]!=null&&(ut=this._textures[_]),CubismShader_WebGL.getInstance().setupShaderProgram(this,ut,tt,nt,rt,ot,this._bufferData,ct,dt,it,at,lt,this.isPremultipliedAlpha(),this.getMvpMatrix(),st),this.gl.drawElements(this.gl.TRIANGLES,et,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}saveProfile(){this._rendererProfile.save()}restoreProfile(){this._rendererProfile.restore()}static doStaticRelease(){CubismShader_WebGL.deleteInstance()}setRenderState(_,et){s_fbo=_,s_viewport=et}preDraw(){if(this.firstDraw&&(this.firstDraw=!1),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.getAnisotropy()>0&&this._extension)for(const _ of Object.entries(this._textures))this.gl.bindTexture(this.gl.TEXTURE_2D,_),this.gl.texParameterf(this.gl.TEXTURE_2D,this._extension.TEXTURE_MAX_ANISOTROPY_EXT,this.getAnisotropy())}setClippingContextBufferForMask(_){this._clippingContextBufferForMask=_}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(_){this._clippingContextBufferForDraw=_}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(_){this.gl=_,this._clippingManager&&this._clippingManager.setGL(_),CubismShader_WebGL.getInstance().setGl(_),this._rendererProfile.setGl(_),this._extension=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")}}CubismRenderer.staticRelease=()=>{CubismRenderer_WebGL.doStaticRelease()};const tempMatrix=new CubismMatrix44;class Cubism4InternalModel extends InternalModel{constructor(_,et,tt){super(),__publicField(this,"settings"),__publicField(this,"coreModel"),__publicField(this,"motionManager"),__publicField(this,"lipSync",!0),__publicField(this,"breath",CubismBreath.create()),__publicField(this,"eyeBlink"),__publicField(this,"userData"),__publicField(this,"renderer",new CubismRenderer_WebGL),__publicField(this,"idParamAngleX",ParamAngleX),__publicField(this,"idParamAngleY",ParamAngleY),__publicField(this,"idParamAngleZ",ParamAngleZ),__publicField(this,"idParamEyeBallX",ParamEyeBallX),__publicField(this,"idParamEyeBallY",ParamEyeBallY),__publicField(this,"idParamBodyAngleX",ParamBodyAngleX),__publicField(this,"idParamBreath",ParamBreath),__publicField(this,"idParamMouthForm",ParamMouthForm),__publicField(this,"pixelsPerUnit",1),__publicField(this,"centeringTransform",new Matrix),this.coreModel=_,this.settings=et,this.motionManager=new Cubism4MotionManager(et,tt),this.init()}init(){var _;super.init(),(_=this.settings.getEyeBlinkParameters())!=null&&_.length&&(this.eyeBlink=CubismEyeBlink.create(this.settings)),this.breath.setParameters([new BreathParameterData(this.idParamAngleX,0,15,6.5345,.5),new BreathParameterData(this.idParamAngleY,0,8,3.5345,.5),new BreathParameterData(this.idParamAngleZ,0,10,5.5345,.5),new BreathParameterData(this.idParamBodyAngleX,0,4,15.5345,.5),new BreathParameterData(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){const _={};if(this.settings.layout)for(const[et,tt]of Object.entries(this.settings.layout)){const rt=et.charAt(0).toLowerCase()+et.slice(1);_[rt]=tt}return _}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(_,et){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(_),this.renderer._clippingManager._currentFrameNo=et,this.renderer._clippingManager._maskTexture=void 0,CubismShader_WebGL.getInstance()._shaderSets=[]}bindTexture(_,et){this.renderer.bindTexture(_,et)}getHitAreaDefs(){var _,et;return(et=(_=this.settings.hitAreas)==null?void 0:_.map(tt=>({id:tt.Id,name:tt.Name,index:this.coreModel.getDrawableIndex(tt.Id)})))!=null?et:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(_){return this.coreModel.getDrawableIndex(_)}getDrawableVertices(_){if(typeof _=="string"&&(_=this.coreModel.getDrawableIndex(_),_===-1))throw new TypeError("Unable to find drawable ID: "+_);const et=this.coreModel.getDrawableVertices(_).slice();for(let tt=0;tt<et.length;tt+=2)et[tt]=et[tt]*this.pixelsPerUnit+this.originalWidth/2,et[tt+1]=-et[tt+1]*this.pixelsPerUnit+this.originalHeight/2;return et}updateTransform(_){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(_)}update(_,et){var tt,rt,nt,ot;super.update(_,et),_/=1e3,et/=1e3;const at=this.coreModel;this.emit("beforeMotionUpdate");const lt=this.motionManager.update(this.coreModel,et);if(this.emit("afterMotionUpdate"),at.saveParameters(),(tt=this.motionManager.expressionManager)==null||tt.update(at,et),lt||(rt=this.eyeBlink)==null||rt.updateParameters(at,_),this.updateFocus(),this.updateNaturalMovements(_*1e3,et*1e3),this.lipSync&&this.motionManager.currentAudio){let ct=this.motionManager.mouthSync(),dt=0;const st=1,it=1.2;ct>0&&(dt=.4),ct=clamp(ct*it,dt,st);for(let ut=0;ut<this.motionManager.lipSyncIds.length;++ut)at.addParameterValueById(this.motionManager.lipSyncIds[ut],ct,.8)}(nt=this.physics)==null||nt.evaluate(at,_),(ot=this.pose)==null||ot.updateParameters(at,_),this.emit("beforeModelUpdate"),at.update(),at.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,this.focusController.x*30),this.coreModel.addParameterValueById(this.idParamAngleY,this.focusController.y*30),this.coreModel.addParameterValueById(this.idParamAngleZ,this.focusController.x*this.focusController.y*-30),this.coreModel.addParameterValueById(this.idParamBodyAngleX,this.focusController.x*10)}updateFacialEmotion(_){this.coreModel.addParameterValueById(this.idParamMouthForm,_)}updateNaturalMovements(_,et){var tt;(tt=this.breath)==null||tt.updateParameters(this.coreModel,_/1e3)}draw(_){const et=this.drawingMatrix,tt=tempMatrix.getArray();tt[0]=et.a,tt[1]=et.b,tt[4]=-et.c,tt[5]=-et.d,tt[12]=et.tx,tt[13]=et.ty,this.renderer.setMvpMatrix(tempMatrix),this.renderer.setRenderState(_.getParameter(_.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}}class CubismModelSettingsJson{constructor(_){this.groups=_.Groups,this.hitAreas=_.HitAreas,this.layout=_.Layout,this.moc=_.FileReferences.Moc,this.expressions=_.FileReferences.Expressions,this.motions=_.FileReferences.Motions,this.textures=_.FileReferences.Textures,this.physics=_.FileReferences.Physics,this.pose=_.FileReferences.Pose}getEyeBlinkParameters(){var _,et;return(et=(_=this.groups)==null?void 0:_.find(tt=>tt.Name==="EyeBlink"))==null?void 0:et.Ids}getLipSyncParameters(){var _,et;return(et=(_=this.groups)==null?void 0:_.find(tt=>tt.Name==="LipSync"))==null?void 0:et.Ids}}class Cubism4ModelSettings extends ModelSettings{constructor(_){if(super(_),__publicField(this,"moc"),__publicField(this,"textures"),!Cubism4ModelSettings.isValidJSON(_))throw new TypeError("Invalid JSON.");Object.assign(this,new CubismModelSettingsJson(_))}static isValidJSON(_){var et;return!!(_!=null&&_.FileReferences)&&typeof _.FileReferences.Moc=="string"&&((et=_.FileReferences.Textures)==null?void 0:et.length)>0&&_.FileReferences.Textures.every(tt=>typeof tt=="string")}replaceFiles(_){if(super.replaceFiles(_),this.motions)for(const[et,tt]of Object.entries(this.motions))for(let rt=0;rt<tt.length;rt++)tt[rt].File=_(tt[rt].File,`motions.${et}[${rt}].File`),tt[rt].Sound!==void 0&&(tt[rt].Sound=_(tt[rt].Sound,`motions.${et}[${rt}].Sound`));if(this.expressions)for(let et=0;et<this.expressions.length;et++)this.expressions[et].File=_(this.expressions[et].File,`expressions[${et}].File`)}}applyMixins(Cubism4ModelSettings,[CubismModelSettingsJson]);let startupPromise,startupRetries=20;function cubism4Ready(){return CubismFramework.isStarted()?Promise.resolve():(startupPromise??(startupPromise=new Promise((_e,_)=>{function et(){try{startUpCubism4(),_e()}catch(tt){if(startupRetries--,startupRetries<0){const rt=new Error("Failed to start up Cubism 4 framework.");rt.cause=tt,_(rt);return}setTimeout(et,10)}}et()})),startupPromise)}function startUpCubism4(_e){_e=Object.assign({logFunction:console.log,loggingLevel:LogLevel.LogLevel_Verbose},_e),CubismFramework.startUp(_e),CubismFramework.initialize()}const Epsilon=.001,DefaultFadeInSeconds=.5;class CubismPose{static create(_){const et=new CubismPose;typeof _.FadeInTime=="number"&&(et._fadeTimeSeconds=_.FadeInTime,et._fadeTimeSeconds<=0&&(et._fadeTimeSeconds=DefaultFadeInSeconds));const tt=_.Groups,rt=tt.length;for(let nt=0;nt<rt;++nt){const ot=tt[nt],at=ot.length;let lt=0;for(let ct=0;ct<at;++ct){const dt=ot[ct],st=new PartData;st.partId=dt.Id;const it=dt.Link;if(it){const ut=it.length;for(let ht=0;ht<ut;++ht){const ft=new PartData;ft.partId=it[ht],st.link.push(ft)}}et._partGroups.push(st),++lt}et._partGroupCounts.push(lt)}return et}updateParameters(_,et){_!=this._lastModel&&this.reset(_),this._lastModel=_,et<0&&(et=0);let tt=0;for(let rt=0;rt<this._partGroupCounts.length;rt++){const nt=this._partGroupCounts[rt];this.doFade(_,et,tt,nt),tt+=nt}this.copyPartOpacities(_)}reset(_){let et=0;for(let tt=0;tt<this._partGroupCounts.length;++tt){const rt=this._partGroupCounts[tt];for(let nt=et;nt<et+rt;++nt){this._partGroups[nt].initialize(_);const ot=this._partGroups[nt].partIndex,at=this._partGroups[nt].parameterIndex;if(!(ot<0)){_.setPartOpacityByIndex(ot,nt==et?1:0),_.setParameterValueByIndex(at,nt==et?1:0);for(let lt=0;lt<this._partGroups[nt].link.length;++lt)this._partGroups[nt].link[lt].initialize(_)}}et+=rt}}copyPartOpacities(_){for(let et=0;et<this._partGroups.length;++et){const tt=this._partGroups[et];if(tt.link.length==0)continue;const rt=this._partGroups[et].partIndex,nt=_.getPartOpacityByIndex(rt);for(let ot=0;ot<tt.link.length;++ot){const lt=tt.link[ot].partIndex;lt<0||_.setPartOpacityByIndex(lt,nt)}}}doFade(_,et,tt,rt){let nt=-1,ot=1;const at=.5,lt=.15;for(let ct=tt;ct<tt+rt;++ct){const dt=this._partGroups[ct].partIndex,st=this._partGroups[ct].parameterIndex;if(_.getParameterValueByIndex(st)>Epsilon){if(nt>=0)break;nt=ct,ot=_.getPartOpacityByIndex(dt),ot+=et/this._fadeTimeSeconds,ot>1&&(ot=1)}}nt<0&&(nt=0,ot=1);for(let ct=tt;ct<tt+rt;++ct){const dt=this._partGroups[ct].partIndex;if(nt==ct)_.setPartOpacityByIndex(dt,ot);else{let st=_.getPartOpacityByIndex(dt),it;ot<at?it=ot*(at-1)/at+1:it=(1-ot)*at/(1-at),(1-it)*(1-ot)>lt&&(it=1-lt/(1-ot)),st>it&&(st=it),_.setPartOpacityByIndex(dt,st)}}}constructor(){this._fadeTimeSeconds=DefaultFadeInSeconds,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}}class PartData{constructor(_){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],_!=null&&this.assignment(_)}assignment(_){return this.partId=_.partId,this.link=_.link.map(et=>et.clone()),this}initialize(_){this.parameterIndex=_.getParameterIndex(this.partId),this.partIndex=_.getPartIndex(this.partId),_.setParameterValueByIndex(this.parameterIndex,1)}clone(){const _=new PartData;return _.partId=this.partId,_.parameterIndex=this.parameterIndex,_.partIndex=this.partIndex,_.link=this.link.map(et=>et.clone()),_}}class DrawableColorData{constructor(_=!1,et=new CubismTextureColor){this.isOverwritten=_,this.Color=et}}class PartColorData{constructor(_=!1,et=new CubismTextureColor){this.isOverwritten=_,this.Color=et}}class DrawableCullingData{constructor(_=!1,et=!1){this.isOverwritten=_,this.isCulling=et}}class CubismModel{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getPixelsPerUnit(){return this._model==null?0:this._model.canvasinfo.PixelsPerUnit}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const _=this._model.parameters.count,et=this._savedParameters.length;for(let tt=0;tt<_;++tt)tt<et?this._savedParameters[tt]=this._parameterValues[tt]:this._savedParameters.push(this._parameterValues[tt])}getMultiplyColor(_){return this.getOverwriteFlagForModelMultiplyColors()||this.getOverwriteFlagForDrawableMultiplyColors(_)?this._userMultiplyColors[_].Color:this.getDrawableMultiplyColor(_)}getScreenColor(_){return this.getOverwriteFlagForModelScreenColors()||this.getOverwriteFlagForDrawableScreenColors(_)?this._userScreenColors[_].Color:this.getDrawableScreenColor(_)}setMultiplyColorByTextureColor(_,et){this.setMultiplyColorByRGBA(_,et.R,et.G,et.B,et.A)}setMultiplyColorByRGBA(_,et,tt,rt,nt=1){this._userMultiplyColors[_].Color.R=et,this._userMultiplyColors[_].Color.G=tt,this._userMultiplyColors[_].Color.B=rt,this._userMultiplyColors[_].Color.A=nt}setScreenColorByTextureColor(_,et){this.setScreenColorByRGBA(_,et.R,et.G,et.B,et.A)}setScreenColorByRGBA(_,et,tt,rt,nt=1){this._userScreenColors[_].Color.R=et,this._userScreenColors[_].Color.G=tt,this._userScreenColors[_].Color.B=rt,this._userScreenColors[_].Color.A=nt}getPartMultiplyColor(_){return this._userPartMultiplyColors[_].Color}getPartScreenColor(_){return this._userPartScreenColors[_].Color}setPartColor(_,et,tt,rt,nt,ot,at){if(ot[_].Color.R=et,ot[_].Color.G=tt,ot[_].Color.B=rt,ot[_].Color.A=nt,ot[_].isOverwritten)for(let lt=0;lt<this._partChildDrawables[_].length;++lt){const ct=this._partChildDrawables[_][lt];at[ct].Color.R=et,at[ct].Color.G=tt,at[ct].Color.B=rt,at[ct].Color.A=nt}}setPartMultiplyColorByTextureColor(_,et){this.setPartMultiplyColorByRGBA(_,et.R,et.G,et.B,et.A)}setPartMultiplyColorByRGBA(_,et,tt,rt,nt){this.setPartColor(_,et,tt,rt,nt,this._userPartMultiplyColors,this._userMultiplyColors)}setPartScreenColorByTextureColor(_,et){this.setPartScreenColorByRGBA(_,et.R,et.G,et.B,et.A)}setPartScreenColorByRGBA(_,et,tt,rt,nt){this.setPartColor(_,et,tt,rt,nt,this._userPartScreenColors,this._userScreenColors)}getOverwriteFlagForModelMultiplyColors(){return this._isOverwrittenModelMultiplyColors}getOverwriteFlagForModelScreenColors(){return this._isOverwrittenModelScreenColors}setOverwriteFlagForModelMultiplyColors(_){this._isOverwrittenModelMultiplyColors=_}setOverwriteFlagForModelScreenColors(_){this._isOverwrittenModelScreenColors=_}getOverwriteFlagForDrawableMultiplyColors(_){return this._userMultiplyColors[_].isOverwritten}getOverwriteFlagForDrawableScreenColors(_){return this._userScreenColors[_].isOverwritten}setOverwriteFlagForDrawableMultiplyColors(_,et){this._userMultiplyColors[_].isOverwritten=et}setOverwriteFlagForDrawableScreenColors(_,et){this._userScreenColors[_].isOverwritten=et}getOverwriteColorForPartMultiplyColors(_){return this._userPartMultiplyColors[_].isOverwritten}getOverwriteColorForPartScreenColors(_){return this._userPartScreenColors[_].isOverwritten}setOverwriteColorForPartColors(_,et,tt,rt){tt[_].isOverwritten=et;for(let nt=0;nt<this._partChildDrawables[_].length;++nt){const ot=this._partChildDrawables[_][nt];rt[ot].isOverwritten=et,et&&(rt[ot].Color.R=tt[_].Color.R,rt[ot].Color.G=tt[_].Color.G,rt[ot].Color.B=tt[_].Color.B,rt[ot].Color.A=tt[_].Color.A)}}setOverwriteColorForPartMultiplyColors(_,et){this._userPartMultiplyColors[_].isOverwritten=et,this.setOverwriteColorForPartColors(_,et,this._userPartMultiplyColors,this._userMultiplyColors)}setOverwriteColorForPartScreenColors(_,et){this._userPartScreenColors[_].isOverwritten=et,this.setOverwriteColorForPartColors(_,et,this._userPartScreenColors,this._userScreenColors)}getDrawableCulling(_){if(this.getOverwriteFlagForModelCullings()||this.getOverwriteFlagForDrawableCullings(_))return this._userCullings[_].isCulling;const et=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(et[_])}setDrawableCulling(_,et){this._userCullings[_].isCulling=et}getOverwriteFlagForModelCullings(){return this._isOverwrittenCullings}setOverwriteFlagForModelCullings(_){this._isOverwrittenCullings=_}getOverwriteFlagForDrawableCullings(_){return this._userCullings[_].isOverwritten}setOverwriteFlagForDrawableCullings(_,et){this._userCullings[_].isOverwritten=et}getModelOapcity(){return this._modelOpacity}setModelOapcity(_){this._modelOpacity=_}getModel(){return this._model}getPartIndex(_){let et;const tt=this._model.parts.count;for(et=0;et<tt;++et)if(_==this._partIds[et])return et;return _ in this._notExistPartId?this._notExistPartId[_]:(et=tt+this._notExistPartId.length,this._notExistPartId[_]=et,this._notExistPartOpacities[et]=0,et)}getPartId(_){return this._model.parts.ids[_]}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(_,et){if(_ in this._notExistPartOpacities){this._notExistPartOpacities[_]=et;return}CSM_ASSERT(0<=_&&_<this.getPartCount()),this._partOpacities[_]=et}setPartOpacityById(_,et){const tt=this.getPartIndex(_);tt<0||this.setPartOpacityByIndex(tt,et)}getPartOpacityByIndex(_){return _ in this._notExistPartOpacities?this._notExistPartOpacities[_]:(CSM_ASSERT(0<=_&&_<this.getPartCount()),this._partOpacities[_])}getPartOpacityById(_){const et=this.getPartIndex(_);return et<0?0:this.getPartOpacityByIndex(et)}getParameterIndex(_){let et;const tt=this._model.parameters.count;for(et=0;et<tt;++et)if(_==this._parameterIds[et])return et;return _ in this._notExistParameterId?this._notExistParameterId[_]:(et=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[_]=et,this._notExistParameterValues[et]=0,et)}getParameterCount(){return this._model.parameters.count}getParameterType(_){return this._model.parameters.types[_]}getParameterMaximumValue(_){return this._model.parameters.maximumValues[_]}getParameterMinimumValue(_){return this._model.parameters.minimumValues[_]}getParameterDefaultValue(_){return this._model.parameters.defaultValues[_]}getParameterValueByIndex(_){return _ in this._notExistParameterValues?this._notExistParameterValues[_]:(CSM_ASSERT(0<=_&&_<this.getParameterCount()),this._parameterValues[_])}getParameterValueById(_){const et=this.getParameterIndex(_);return this.getParameterValueByIndex(et)}setParameterValueByIndex(_,et,tt=1){if(_ in this._notExistParameterValues){this._notExistParameterValues[_]=tt==1?et:this._notExistParameterValues[_]*(1-tt)+et*tt;return}CSM_ASSERT(0<=_&&_<this.getParameterCount()),this._model.parameters.maximumValues[_]<et&&(et=this._model.parameters.maximumValues[_]),this._model.parameters.minimumValues[_]>et&&(et=this._model.parameters.minimumValues[_]),this._parameterValues[_]=tt==1?et:this._parameterValues[_]=this._parameterValues[_]*(1-tt)+et*tt}setParameterValueById(_,et,tt=1){const rt=this.getParameterIndex(_);this.setParameterValueByIndex(rt,et,tt)}addParameterValueByIndex(_,et,tt=1){this.setParameterValueByIndex(_,this.getParameterValueByIndex(_)+et*tt)}addParameterValueById(_,et,tt=1){const rt=this.getParameterIndex(_);this.addParameterValueByIndex(rt,et,tt)}multiplyParameterValueById(_,et,tt=1){const rt=this.getParameterIndex(_);this.multiplyParameterValueByIndex(rt,et,tt)}multiplyParameterValueByIndex(_,et,tt=1){this.setParameterValueByIndex(_,this.getParameterValueByIndex(_)*(1+(et-1)*tt))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(_){const et=this._model.drawables.count;for(let tt=0;tt<et;++tt)if(this._drawableIds[tt]==_)return tt;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(_){return this._model.drawables.ids[_]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(_){return this.getDrawableTextureIndex(_)}getDrawableTextureIndex(_){return this._model.drawables.textureIndices[_]}getDrawableDynamicFlagVertexPositionsDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(et[_])}getDrawableVertexIndexCount(_){return this._model.drawables.indexCounts[_]}getDrawableVertexCount(_){return this._model.drawables.vertexCounts[_]}getDrawableVertices(_){return this.getDrawableVertexPositions(_)}getDrawableVertexIndices(_){return this._model.drawables.indices[_]}getDrawableVertexPositions(_){return this._model.drawables.vertexPositions[_]}getDrawableVertexUvs(_){return this._model.drawables.vertexUvs[_]}getDrawableOpacity(_){return this._model.drawables.opacities[_]}getDrawableMultiplyColor(_){const et=this._model.drawables.multiplyColors,tt=_*4,rt=new CubismTextureColor;return rt.R=et[tt],rt.G=et[tt+1],rt.B=et[tt+2],rt.A=et[tt+3],rt}getDrawableScreenColor(_){const et=this._model.drawables.screenColors,tt=_*4,rt=new CubismTextureColor;return rt.R=et[tt],rt.G=et[tt+1],rt.B=et[tt+2],rt.A=et[tt+3],rt}getDrawableParentPartIndex(_){return this._model.drawables.parentPartIndices[_]}getDrawableBlendMode(_){const et=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(et[_])?CubismBlendMode.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(et[_])?CubismBlendMode.CubismBlendMode_Multiplicative:CubismBlendMode.CubismBlendMode_Normal}getDrawableInvertedMaskBit(_){const et=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(et[_])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let _=0;_<this._model.drawables.count;++_)if(!(this._model.drawables.maskCounts[_]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(et[_])}getDrawableDynamicFlagVisibilityDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(et[_])}getDrawableDynamicFlagOpacityDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(et[_])}getDrawableDynamicFlagRenderOrderDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(et[_])}getDrawableDynamicFlagBlendColorDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasBlendColorDidChangeBit(et[_])}loadParameters(){let _=this._model.parameters.count;const et=this._savedParameters.length;_>et&&(_=et);for(let tt=0;tt<_;++tt)this._parameterValues[tt]=this._savedParameters[tt]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const et=this._model.parameters.ids,tt=this._model.parameters.count;for(let rt=0;rt<tt;++rt)this._parameterIds.push(et[rt])}const _=this._model.parts.count;{const et=this._model.parts.ids;for(let tt=0;tt<_;++tt)this._partIds.push(et[tt])}{const et=this._model.drawables.ids,tt=this._model.drawables.count,rt=new DrawableCullingData(!1,!1);for(let nt=0;nt<_;++nt){const ot=new CubismTextureColor(1,1,1,1),at=new CubismTextureColor(0,0,0,1),lt=new PartColorData(!1,ot),ct=new PartColorData(!1,at);this._userPartMultiplyColors.push(lt),this._userPartScreenColors.push(ct),this._partChildDrawables.push([])}for(let nt=0;nt<tt;++nt){const ot=new CubismTextureColor(1,1,1,1),at=new CubismTextureColor(0,0,0,1),lt=new DrawableColorData(!1,ot),ct=new DrawableColorData(!1,at);this._drawableIds.push(et[nt]),this._userMultiplyColors.push(lt),this._userScreenColors.push(ct),this._userCullings.push(rt);const dt=this.getDrawableParentPartIndex(nt);dt>=0&&this._partChildDrawables[dt].push(nt)}}}constructor(_){this._model=_,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._isOverwrittenModelMultiplyColors=!1,this._isOverwrittenModelScreenColors=!1,this._isOverwrittenCullings=!1,this._modelOpacity=1,this._userMultiplyColors=[],this._userScreenColors=[],this._userCullings=[],this._userPartMultiplyColors=[],this._userPartScreenColors=[],this._partChildDrawables=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}release(){this._model.release(),this._model=void 0}}class CubismMoc{static create(_,et){if(et&&!this.hasMocConsistency(_))throw new Error("Inconsistent MOC3.");const tt=Live2DCubismCore.Moc.fromArrayBuffer(_);if(tt){const rt=new CubismMoc(tt);return rt._mocVersion=Live2DCubismCore.Version.csmGetMocVersion(tt,_),rt}throw new Error("Failed to CubismMoc.create().")}createModel(){let _;const et=Live2DCubismCore.Model.fromMoc(this._moc);if(et)return _=new CubismModel(et),++this._modelCount,_;throw new Error("Unknown error")}deleteModel(_){_!=null&&--this._modelCount}constructor(_){this._moc=_,this._modelCount=0,this._mocVersion=0}release(){this._moc._release(),this._moc=void 0}getLatestMocVersion(){return Live2DCubismCore.Version.csmGetLatestMocVersion()}getMocVersion(){return this._mocVersion}static hasMocConsistency(_){return Live2DCubismCore.Moc.prototype.hasMocConsistency(_)===1}}var CubismPhysicsTargetType=(_e=>(_e[_e.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",_e))(CubismPhysicsTargetType||{}),CubismPhysicsSource=(_e=>(_e[_e.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",_e[_e.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",_e[_e.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",_e))(CubismPhysicsSource||{});class CubismPhysicsParticle{constructor(){this.initialPosition=new CubismVector2(0,0),this.position=new CubismVector2(0,0),this.lastPosition=new CubismVector2(0,0),this.lastGravity=new CubismVector2(0,0),this.force=new CubismVector2(0,0),this.velocity=new CubismVector2(0,0)}}class CubismPhysicsSubRig{constructor(){this.normalizationPosition={},this.normalizationAngle={}}}class CubismPhysicsInput{constructor(){this.source={}}}class CubismPhysicsOutput{constructor(){this.destination={},this.translationScale=new CubismVector2(0,0)}}class CubismPhysicsRig{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new CubismVector2(0,0),this.wind=new CubismVector2(0,0),this.fps=0}}class CubismPhysicsJson{constructor(_){this._json=_}release(){this._json=void 0}getGravity(){const _=new CubismVector2(0,0);return _.x=this._json.Meta.EffectiveForces.Gravity.X,_.y=this._json.Meta.EffectiveForces.Gravity.Y,_}getWind(){const _=new CubismVector2(0,0);return _.x=this._json.Meta.EffectiveForces.Wind.X,_.y=this._json.Meta.EffectiveForces.Wind.Y,_}getFps(){return this._json.Meta.Fps||0}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(_){return this._json.PhysicsSettings[_].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(_){return this._json.PhysicsSettings[_].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(_){return this._json.PhysicsSettings[_].Normalization.Position.Default}getNormalizationAngleMinimumValue(_){return this._json.PhysicsSettings[_].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(_){return this._json.PhysicsSettings[_].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(_){return this._json.PhysicsSettings[_].Normalization.Angle.Default}getInputCount(_){return this._json.PhysicsSettings[_].Input.length}getInputWeight(_,et){return this._json.PhysicsSettings[_].Input[et].Weight}getInputReflect(_,et){return this._json.PhysicsSettings[_].Input[et].Reflect}getInputType(_,et){return this._json.PhysicsSettings[_].Input[et].Type}getInputSourceId(_,et){return this._json.PhysicsSettings[_].Input[et].Source.Id}getOutputCount(_){return this._json.PhysicsSettings[_].Output.length}getOutputVertexIndex(_,et){return this._json.PhysicsSettings[_].Output[et].VertexIndex}getOutputAngleScale(_,et){return this._json.PhysicsSettings[_].Output[et].Scale}getOutputWeight(_,et){return this._json.PhysicsSettings[_].Output[et].Weight}getOutputDestinationId(_,et){return this._json.PhysicsSettings[_].Output[et].Destination.Id}getOutputType(_,et){return this._json.PhysicsSettings[_].Output[et].Type}getOutputReflect(_,et){return this._json.PhysicsSettings[_].Output[et].Reflect}getParticleCount(_){return this._json.PhysicsSettings[_].Vertices.length}getParticleMobility(_,et){return this._json.PhysicsSettings[_].Vertices[et].Mobility}getParticleDelay(_,et){return this._json.PhysicsSettings[_].Vertices[et].Delay}getParticleAcceleration(_,et){return this._json.PhysicsSettings[_].Vertices[et].Acceleration}getParticleRadius(_,et){return this._json.PhysicsSettings[_].Vertices[et].Radius}getParticlePosition(_,et){const tt=new CubismVector2(0,0);return tt.x=this._json.PhysicsSettings[_].Vertices[et].Position.X,tt.y=this._json.PhysicsSettings[_].Vertices[et].Position.Y,tt}}const PhysicsTypeTagX="X",PhysicsTypeTagY="Y",PhysicsTypeTagAngle="Angle",AirResistance=5,MaximumWeight=100,MovementThreshold=.001,MaxDeltaTime=5;class CubismPhysics{static create(_){const et=new CubismPhysics;return et.parse(_),et._physicsRig.gravity.y=0,et}static delete(_){_!=null&&_.release()}parse(_){this._physicsRig=new CubismPhysicsRig;const et=new CubismPhysicsJson(_);this._physicsRig.gravity=et.getGravity(),this._physicsRig.wind=et.getWind(),this._physicsRig.subRigCount=et.getSubRigCount(),this._physicsRig.fps=et.getFps(),this._currentRigOutputs=[],this._previousRigOutputs=[];let tt=0,rt=0,nt=0;for(let ot=0;ot<this._physicsRig.subRigCount;++ot){const at=new CubismPhysicsSubRig;at.normalizationPosition.minimum=et.getNormalizationPositionMinimumValue(ot),at.normalizationPosition.maximum=et.getNormalizationPositionMaximumValue(ot),at.normalizationPosition.defalut=et.getNormalizationPositionDefaultValue(ot),at.normalizationAngle.minimum=et.getNormalizationAngleMinimumValue(ot),at.normalizationAngle.maximum=et.getNormalizationAngleMaximumValue(ot),at.normalizationAngle.defalut=et.getNormalizationAngleDefaultValue(ot),at.inputCount=et.getInputCount(ot),at.baseInputIndex=tt,tt+=at.inputCount;for(let dt=0;dt<at.inputCount;++dt){const st=new CubismPhysicsInput;switch(st.sourceParameterIndex=-1,st.weight=et.getInputWeight(ot,dt),st.reflect=et.getInputReflect(ot,dt),et.getInputType(ot,dt)){case PhysicsTypeTagX:st.type=CubismPhysicsSource.CubismPhysicsSource_X,st.getNormalizedParameterValue=getInputTranslationXFromNormalizedParameterValue;break;case PhysicsTypeTagY:st.type=CubismPhysicsSource.CubismPhysicsSource_Y,st.getNormalizedParameterValue=getInputTranslationYFromNormalizedParamterValue;break;case PhysicsTypeTagAngle:st.type=CubismPhysicsSource.CubismPhysicsSource_Angle,st.getNormalizedParameterValue=getInputAngleFromNormalizedParameterValue;break}st.source.targetType=CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter,st.source.id=et.getInputSourceId(ot,dt),this._physicsRig.inputs.push(st)}at.outputCount=et.getOutputCount(ot),at.baseOutputIndex=rt;const lt=new PhysicsOutput,ct=new PhysicsOutput;for(let dt=0;dt<at.outputCount;++dt){lt.outputs[dt]=0,ct.outputs[dt]=0;let st=this._physicsRig.outputs[rt+dt];switch(st||(st=new CubismPhysicsOutput,this._physicsRig.outputs[rt+dt]=st),st.destinationParameterIndex=-1,st.vertexIndex=et.getOutputVertexIndex(ot,dt),st.angleScale=et.getOutputAngleScale(ot,dt),st.weight=et.getOutputWeight(ot,dt),st.destination.targetType=CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter,st.destination.id=et.getOutputDestinationId(ot,dt),et.getOutputType(ot,dt)){case PhysicsTypeTagX:st.type=CubismPhysicsSource.CubismPhysicsSource_X,st.getValue=getOutputTranslationX,st.getScale=getOutputScaleTranslationX;break;case PhysicsTypeTagY:st.type=CubismPhysicsSource.CubismPhysicsSource_Y,st.getValue=getOutputTranslationY,st.getScale=getOutputScaleTranslationY;break;case PhysicsTypeTagAngle:st.type=CubismPhysicsSource.CubismPhysicsSource_Angle,st.getValue=getOutputAngle,st.getScale=getOutputScaleAngle;break}st.reflect=et.getOutputReflect(ot,dt)}this._currentRigOutputs.push(lt),this._previousRigOutputs.push(ct),rt+=at.outputCount,at.particleCount=et.getParticleCount(ot),at.baseParticleIndex=nt,nt+=at.particleCount;for(let dt=0;dt<at.particleCount;++dt){const st=new CubismPhysicsParticle;st.mobility=et.getParticleMobility(ot,dt),st.delay=et.getParticleDelay(ot,dt),st.acceleration=et.getParticleAcceleration(ot,dt),st.radius=et.getParticleRadius(ot,dt),st.position=et.getParticlePosition(ot,dt),this._physicsRig.particles.push(st)}this._physicsRig.settings.push(at)}this.initialize(),et.release()}stabilization(_){var et,tt,rt,nt;let ot,at,lt,ct;const dt=new CubismVector2;let st,it,ut,ht,ft,gt,mt,yt;ft=_.getModel().parameters.values,gt=_.getModel().parameters.maximumValues,mt=_.getModel().parameters.minimumValues,yt=_.getModel().parameters.defaultValues,((tt=(et=this._parameterCaches)==null?void 0:et.length)!=null?tt:0)<_.getParameterCount()&&(this._parameterCaches=new Float32Array(_.getParameterCount())),((nt=(rt=this._parameterInputCaches)==null?void 0:rt.length)!=null?nt:0)<_.getParameterCount()&&(this._parameterInputCaches=new Float32Array(_.getParameterCount()));for(let bt=0;bt<_.getParameterCount();++bt)this._parameterCaches[bt]=ft[bt],this._parameterInputCaches[bt]=ft[bt];for(let bt=0;bt<this._physicsRig.subRigCount;++bt){ot={angle:0},dt.x=0,dt.y=0,st=this._physicsRig.settings[bt],it=this._physicsRig.inputs.slice(st.baseInputIndex),ut=this._physicsRig.outputs.slice(st.baseOutputIndex),ht=this._physicsRig.particles.slice(st.baseParticleIndex);for(let vt=0;vt<st.inputCount;++vt)at=it[vt].weight/MaximumWeight,it[vt].sourceParameterIndex==-1&&(it[vt].sourceParameterIndex=_.getParameterIndex(it[vt].source.id)),it[vt].getNormalizedParameterValue(dt,ot,ft[it[vt].sourceParameterIndex],mt[it[vt].sourceParameterIndex],gt[it[vt].sourceParameterIndex],yt[it[vt].sourceParameterIndex],st.normalizationPosition,st.normalizationAngle,it[vt].reflect,at),this._parameterCaches[it[vt].sourceParameterIndex]=ft[it[vt].sourceParameterIndex];lt=CubismMath.degreesToRadian(-ot.angle),dt.x=dt.x*CubismMath.cos(lt)-dt.y*CubismMath.sin(lt),dt.y=dt.x*CubismMath.sin(lt)+dt.y*CubismMath.cos(lt),updateParticlesForStabilization(ht,st.particleCount,dt,ot.angle,this._options.wind,MovementThreshold*st.normalizationPosition.maximum);for(let vt=0;vt<st.outputCount;++vt){const xt=ut[vt].vertexIndex;if(ut[vt].destinationParameterIndex==-1&&(ut[vt].destinationParameterIndex=_.getParameterIndex(ut[vt].destination.id)),xt<1||xt>=st.particleCount)continue;let wt=new CubismVector2;wt=ht[xt].position.substract(ht[xt-1].position),ct=ut[vt].getValue(wt,ht,xt,ut[vt].reflect,this._options.gravity),this._currentRigOutputs[bt].outputs[vt]=ct,this._previousRigOutputs[bt].outputs[vt]=ct;const St=ut[vt].destinationParameterIndex,Et=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(ft.subarray(St))):ft.slice(St);updateOutputParameterValue(Et,mt[St],gt[St],ct,ut[vt]);for(let _t=St,Tt=0;_t<this._parameterCaches.length;_t++,Tt++)ft[_t]=this._parameterCaches[_t]=Et[Tt]}}}evaluate(_,et){var tt,rt,nt,ot;let at,lt,ct,dt;const st=new CubismVector2;let it,ut,ht,ft;if(0>=et)return;let gt,mt,yt,bt,vt;if(this._currentRemainTime+=et,this._currentRemainTime>MaxDeltaTime&&(this._currentRemainTime=0),gt=_.getModel().parameters.values,mt=_.getModel().parameters.maximumValues,yt=_.getModel().parameters.minimumValues,bt=_.getModel().parameters.defaultValues,((rt=(tt=this._parameterCaches)==null?void 0:tt.length)!=null?rt:0)<_.getParameterCount()&&(this._parameterCaches=new Float32Array(_.getParameterCount())),((ot=(nt=this._parameterInputCaches)==null?void 0:nt.length)!=null?ot:0)<_.getParameterCount()){this._parameterInputCaches=new Float32Array(_.getParameterCount());for(let wt=0;wt<_.getParameterCount();++wt)this._parameterInputCaches[wt]=gt[wt]}for(this._physicsRig.fps>0?vt=1/this._physicsRig.fps:vt=et;this._currentRemainTime>=vt;){for(let St=0;St<this._physicsRig.subRigCount;++St){it=this._physicsRig.settings[St],ht=this._physicsRig.outputs.slice(it.baseOutputIndex);for(let Et=0;Et<it.outputCount;++Et)this._previousRigOutputs[St].outputs[Et]=this._currentRigOutputs[St].outputs[Et]}const wt=vt/this._currentRemainTime;for(let St=0;St<_.getParameterCount();++St)this._parameterCaches[St]=this._parameterInputCaches[St]*(1-wt)+gt[St]*wt,this._parameterInputCaches[St]=this._parameterCaches[St];for(let St=0;St<this._physicsRig.subRigCount;++St){at={angle:0},st.x=0,st.y=0,it=this._physicsRig.settings[St],ut=this._physicsRig.inputs.slice(it.baseInputIndex),ht=this._physicsRig.outputs.slice(it.baseOutputIndex),ft=this._physicsRig.particles.slice(it.baseParticleIndex);for(let Et=0;Et<it.inputCount;++Et)lt=ut[Et].weight/MaximumWeight,ut[Et].sourceParameterIndex==-1&&(ut[Et].sourceParameterIndex=_.getParameterIndex(ut[Et].source.id)),ut[Et].getNormalizedParameterValue(st,at,this._parameterCaches[ut[Et].sourceParameterIndex],yt[ut[Et].sourceParameterIndex],mt[ut[Et].sourceParameterIndex],bt[ut[Et].sourceParameterIndex],it.normalizationPosition,it.normalizationAngle,ut[Et].reflect,lt);ct=CubismMath.degreesToRadian(-at.angle),st.x=st.x*CubismMath.cos(ct)-st.y*CubismMath.sin(ct),st.y=st.x*CubismMath.sin(ct)+st.y*CubismMath.cos(ct),updateParticles(ft,it.particleCount,st,at.angle,this._options.wind,MovementThreshold*it.normalizationPosition.maximum,vt,AirResistance);for(let Et=0;Et<it.outputCount;++Et){const _t=ht[Et].vertexIndex;if(ht[Et].destinationParameterIndex==-1&&(ht[Et].destinationParameterIndex=_.getParameterIndex(ht[Et].destination.id)),_t<1||_t>=it.particleCount)continue;const Tt=new CubismVector2;Tt.x=ft[_t].position.x-ft[_t-1].position.x,Tt.y=ft[_t].position.y-ft[_t-1].position.y,dt=ht[Et].getValue(Tt,ft,_t,ht[Et].reflect,this._options.gravity),this._currentRigOutputs[St].outputs[Et]=dt;const Rt=ht[Et].destinationParameterIndex,Ot=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(this._parameterCaches.subarray(Rt))):this._parameterCaches.slice(Rt);updateOutputParameterValue(Ot,yt[Rt],mt[Rt],dt,ht[Et]);for(let At=Rt,Ct=0;At<this._parameterCaches.length;At++,Ct++)this._parameterCaches[At]=Ot[Ct]}}this._currentRemainTime-=vt}const xt=this._currentRemainTime/vt;this.interpolate(_,xt)}interpolate(_,et){let tt,rt,nt,ot,at;nt=_.getModel().parameters.values,ot=_.getModel().parameters.maximumValues,at=_.getModel().parameters.minimumValues;for(let lt=0;lt<this._physicsRig.subRigCount;++lt){rt=this._physicsRig.settings[lt],tt=this._physicsRig.outputs.slice(rt.baseOutputIndex);for(let ct=0;ct<rt.outputCount;++ct){if(tt[ct].destinationParameterIndex==-1)continue;const dt=tt[ct].destinationParameterIndex,st=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(nt.subarray(dt))):nt.slice(dt);updateOutputParameterValue(st,at[dt],ot[dt],this._previousRigOutputs[lt].outputs[ct]*(1-et)+this._currentRigOutputs[lt].outputs[ct]*et,tt[ct]);for(let it=dt,ut=0;it<nt.length;it++,ut++)nt[it]=st[ut]}}}setOptions(_){this._options=_}getOption(){return this._options}constructor(){this._options=new Options,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0,this._currentRigOutputs=[],this._previousRigOutputs=[],this._currentRemainTime=0}release(){this._physicsRig=void 0}initialize(){let _,et,tt;for(let rt=0;rt<this._physicsRig.subRigCount;++rt){et=this._physicsRig.settings[rt],_=this._physicsRig.particles.slice(et.baseParticleIndex),_[0].initialPosition=new CubismVector2(0,0),_[0].lastPosition=new CubismVector2(_[0].initialPosition.x,_[0].initialPosition.y),_[0].lastGravity=new CubismVector2(0,-1),_[0].lastGravity.y*=-1,_[0].velocity=new CubismVector2(0,0),_[0].force=new CubismVector2(0,0);for(let nt=1;nt<et.particleCount;++nt)tt=new CubismVector2(0,0),tt.y=_[nt].radius,_[nt].initialPosition=new CubismVector2(_[nt-1].initialPosition.x+tt.x,_[nt-1].initialPosition.y+tt.y),_[nt].position=new CubismVector2(_[nt].initialPosition.x,_[nt].initialPosition.y),_[nt].lastPosition=new CubismVector2(_[nt].initialPosition.x,_[nt].initialPosition.y),_[nt].lastGravity=new CubismVector2(0,-1),_[nt].lastGravity.y*=-1,_[nt].velocity=new CubismVector2(0,0),_[nt].force=new CubismVector2(0,0)}}}class Options{constructor(){this.gravity=new CubismVector2(0,0),this.wind=new CubismVector2(0,0)}}class PhysicsOutput{constructor(){this.outputs=[]}}function getInputTranslationXFromNormalizedParameterValue(_e,_,et,tt,rt,nt,ot,at,lt,ct){_e.x+=normalizeParameterValue(et,tt,rt,nt,ot.minimum,ot.maximum,ot.defalut,lt)*ct}function getInputTranslationYFromNormalizedParamterValue(_e,_,et,tt,rt,nt,ot,at,lt,ct){_e.y+=normalizeParameterValue(et,tt,rt,nt,ot.minimum,ot.maximum,ot.defalut,lt)*ct}function getInputAngleFromNormalizedParameterValue(_e,_,et,tt,rt,nt,ot,at,lt,ct){_.angle+=normalizeParameterValue(et,tt,rt,nt,at.minimum,at.maximum,at.defalut,lt)*ct}function getOutputTranslationX(_e,_,et,tt,rt){let nt=_e.x;return tt&&(nt*=-1),nt}function getOutputTranslationY(_e,_,et,tt,rt){let nt=_e.y;return tt&&(nt*=-1),nt}function getOutputAngle(_e,_,et,tt,rt){let nt;return et>=2?rt=_[et-1].position.substract(_[et-2].position):rt=rt.multiplyByScaler(-1),nt=CubismMath.directionToRadian(rt,_e),tt&&(nt*=-1),nt}function getRangeValue(_e,_){return Math.abs(Math.max(_e,_)-Math.min(_e,_))}function getDefaultValue(_e,_){return Math.min(_e,_)+getRangeValue(_e,_)/2}function getOutputScaleTranslationX(_e,_){return _e.x}function getOutputScaleTranslationY(_e,_){return _e.y}function getOutputScaleAngle(_e,_){return _}function updateParticles(_e,_,et,tt,rt,nt,ot,at){let lt,ct,dt,st,it=new CubismVector2(0,0),ut=new CubismVector2(0,0),ht=new CubismVector2(0,0),ft=new CubismVector2(0,0);_e[0].position=new CubismVector2(et.x,et.y),lt=CubismMath.degreesToRadian(tt),st=CubismMath.radianToDirection(lt),st.normalize();for(let gt=1;gt<_;++gt)_e[gt].force=st.multiplyByScaler(_e[gt].acceleration).add(rt),_e[gt].lastPosition=new CubismVector2(_e[gt].position.x,_e[gt].position.y),ct=_e[gt].delay*ot*30,it=_e[gt].position.substract(_e[gt-1].position),dt=CubismMath.directionToRadian(_e[gt].lastGravity,st)/at,it.x=CubismMath.cos(dt)*it.x-it.y*CubismMath.sin(dt),it.y=CubismMath.sin(dt)*it.x+it.y*CubismMath.cos(dt),_e[gt].position=_e[gt-1].position.add(it),ut=_e[gt].velocity.multiplyByScaler(ct),ht=_e[gt].force.multiplyByScaler(ct).multiplyByScaler(ct),_e[gt].position=_e[gt].position.add(ut).add(ht),ft=_e[gt].position.substract(_e[gt-1].position),ft.normalize(),_e[gt].position=_e[gt-1].position.add(ft.multiplyByScaler(_e[gt].radius)),CubismMath.abs(_e[gt].position.x)<nt&&(_e[gt].position.x=0),ct!=0&&(_e[gt].velocity=_e[gt].position.substract(_e[gt].lastPosition),_e[gt].velocity=_e[gt].velocity.divisionByScalar(ct),_e[gt].velocity=_e[gt].velocity.multiplyByScaler(_e[gt].mobility)),_e[gt].force=new CubismVector2(0,0),_e[gt].lastGravity=new CubismVector2(st.x,st.y)}function updateParticlesForStabilization(_e,_,et,tt,rt,nt){let ot,at,lt=new CubismVector2(0,0);_e[0].position=new CubismVector2(et.x,et.y),ot=CubismMath.degreesToRadian(tt),at=CubismMath.radianToDirection(ot),at.normalize();for(let ct=1;ct<_;++ct)_e[ct].force=at.multiplyByScaler(_e[ct].acceleration).add(rt),_e[ct].lastPosition=new CubismVector2(_e[ct].position.x,_e[ct].position.y),_e[ct].velocity=new CubismVector2(0,0),lt=_e[ct].force,lt.normalize(),lt=lt.multiplyByScaler(_e[ct].radius),_e[ct].position=_e[ct-1].position.add(lt),CubismMath.abs(_e[ct].position.x)<nt&&(_e[ct].position.x=0),_e[ct].force=new CubismVector2(0,0),_e[ct].lastGravity=new CubismVector2(at.x,at.y)}function updateOutputParameterValue(_e,_,et,tt,rt){let nt,ot,at;nt=rt.getScale(rt.translationScale,rt.angleScale),ot=tt*nt,ot<_?(ot<rt.valueBelowMinimum&&(rt.valueBelowMinimum=ot),ot=_):ot>et&&(ot>rt.valueExceededMaximum&&(rt.valueExceededMaximum=ot),ot=et),at=rt.weight/MaximumWeight,at>=1||(ot=_e[0]*(1-at)+ot*at),_e[0]=ot}function normalizeParameterValue(_e,_,et,tt,rt,nt,ot,at){let lt=0;const ct=CubismMath.max(et,_);ct<_e&&(_e=ct);const dt=CubismMath.min(et,_);dt>_e&&(_e=dt);const st=CubismMath.min(rt,nt),it=CubismMath.max(rt,nt),ut=ot,ht=getDefaultValue(dt,ct),ft=_e-ht;switch(Math.sign(ft)){case 1:{const gt=it-ut,mt=ct-ht;mt!=0&&(lt=ft*(gt/mt),lt+=ut);break}case-1:{const gt=st-ut,mt=dt-ht;mt!=0&&(lt=ft*(gt/mt),lt+=ut);break}case 0:{lt=ut;break}}return at?lt:lt*-1}Live2DFactory.registerRuntime({version:4,ready:cubism4Ready,test(_e){return _e instanceof Cubism4ModelSettings||Cubism4ModelSettings.isValidJSON(_e)},isValidMoc(_e){if(_e.byteLength<4)return!1;const _=new Int8Array(_e,0,4);return String.fromCharCode(..._)==="MOC3"},createModelSettings(_e){return new Cubism4ModelSettings(_e)},createCoreModel(_e,_){const et=CubismMoc.create(_e,!!(_!=null&&_.checkMocConsistency));try{const tt=et.createModel();return tt.__moc=et,tt}catch(tt){try{et.release()}catch{}throw tt}},createInternalModel(_e,_,et){const tt=new Cubism4InternalModel(_e,_,et),rt=_e;return rt.__moc&&(tt.__moc=rt.__moc,delete rt.__moc,tt.once("destroy",releaseMoc)),tt},createPhysics(_e,_){return CubismPhysics.create(_)},createPose(_e,_){return CubismPose.create(_)}});function releaseMoc(){var _e;(_e=this.__moc)==null||_e.release()}const DEFAULT_MODEL_STATE={currentModel:null},Live2DModelContext=reactExports.createContext(null),Live2DModelProvider=reactExports.memo(({children:_e})=>{const[_,et]=reactExports.useState(DEFAULT_MODEL_STATE.currentModel),tt=reactExports.useCallback(nt=>{et(ot=>ot?Object.assign(ot,nt):null)},[]),rt=reactExports.useMemo(()=>({currentModel:_,setCurrentModel:et,updateModelState:tt}),[_,tt]);return jsxRuntimeExports.jsx(Live2DModelContext.Provider,{value:rt,children:_e})});function useLive2DModel$1(){const _e=reactExports.useContext(Live2DModelContext);if(!_e)throw new Error("useLive2DModel must be used within a Live2DModelProvider");return _e}const SCALE_SPEED=.01,resetModelPosition=(_e,_,et,tt,rt)=>{if(!_e)return;const nt=Number(tt||0),ot=Number(rt||0),at=(_-_e.width)/2+nt,lt=(et-_e.height)/2+ot;_e.position.set(at,lt)},handleModelScale=(_e,_)=>{const et=_>0?-SCALE_SPEED:SCALE_SPEED,tt=_e.scale.x,rt=tt+et,ot=tt+(rt-tt)*.3;return _e.scale.set(ot),ot},setModelSize=(_e,_)=>{if(!_e||!_)return;const et=Number(window.devicePixelRatio||1);_e.scale.set(Number(_)),_e.filters&&_e.filters.forEach(tt=>{"resolution"in tt&&Object.defineProperty(tt,"resolution",{value:et})})},useLive2DResize=(_e,_,et,tt,rt)=>{const{updateModelScale:nt}=useLive2DConfig(),ot=reactExports.useRef(null),at=reactExports.useRef(null),lt=reactExports.useCallback(ct=>{if(!et.current||!(tt!=null&&tt.scrollToResize))return;ct.preventDefault();const dt=handleModelScale(et.current,ct.deltaY);(!at.current||Math.abs(dt-at.current)>1e-4)&&(ot.current&&clearTimeout(ot.current),ot.current=setTimeout(()=>{nt(dt),at.current=dt},500))},[et,tt==null?void 0:tt.scrollToResize,nt]);reactExports.useEffect(()=>{var dt;const ct=(dt=_e.current)==null?void 0:dt.querySelector("canvas");if(ct)return ct.addEventListener("wheel",lt,{passive:!1}),()=>ct.removeEventListener("wheel",lt)},[lt,_e]),reactExports.useEffect(()=>{const ct=new ResizeObserver(()=>{var dt;if(et.current&&_.current){const{width:st,height:it}=rt?{width:window.innerWidth,height:window.innerHeight}:((dt=_e.current)==null?void 0:dt.getBoundingClientRect())||{width:0,height:0};_.current.renderer.resize(st,it),_.current.renderer.clear(),resetModelPosition(et.current,st,it,tt==null?void 0:tt.initialXshift,tt==null?void 0:tt.initialYshift)}});return _e.current&&ct.observe(_e.current),()=>{ct.disconnect()}},[et,_e,rt,_]),reactExports.useEffect(()=>()=>{ot.current&&clearTimeout(ot.current)},[])},useLive2DModel=({isPet:_e,modelInfo:_})=>{const et=reactExports.useRef(null),tt=reactExports.useRef(null),rt=reactExports.useRef(null),nt=reactExports.useRef(null),ot=reactExports.useRef(void 0),{setCurrentModel:at}=useLive2DModel$1(),{setIsLoading:lt}=useLive2DConfig(),ct=reactExports.useRef(!1),{setAiState:dt,aiState:st}=useAiState(),[it,ut]=reactExports.useState(!1),ht=reactExports.useCallback(()=>{rt.current&&(rt.current.removeAllListeners(),at(null),tt.current&&(tt.current.stage.removeChild(rt.current),rt.current.destroy({children:!0,texture:!0,baseTexture:!0}),clearTextureCache(),rt.current=null)),ut(!1)},[at]),ft=reactExports.useCallback(()=>{tt.current&&(rt.current&&ht(),tt.current.stage.removeChildren(),clearTextureCache(),tt.current.renderer.clear(),tt.current.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),destroyTextureCache(),tt.current=null)},[ht]);reactExports.useEffect(()=>{if(!tt.current&&et.current){const xt=new Application({view:et.current,autoStart:!0,width:window.innerWidth,height:window.innerHeight,backgroundAlpha:0,antialias:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,powerPreference:"high-performance",resolution:window.devicePixelRatio||1,autoDensity:!0});xt.ticker.add(()=>{xt.renderer&&xt.renderer.render(xt.stage)}),tt.current=xt}return()=>{ft()}},[ft]);const gt=reactExports.useCallback(async xt=>{!tt.current||!_||(rt.current&&(rt.current.removeAllListeners(),tt.current.stage.removeChild(rt.current),rt.current.destroy({children:!0,texture:!0,baseTexture:!0}),clearTextureCache()),rt.current=xt,at(xt),tt.current.stage.addChild(xt),xt.interactive=!0,xt.cursor="pointer",ut(!0))},[at]),mt=reactExports.useCallback(()=>{var St;if(!rt.current)return;setModelSize(rt.current,ot.current);const{width:xt,height:wt}=_e?{width:window.innerWidth,height:window.innerHeight}:((St=nt.current)==null?void 0:St.getBoundingClientRect())||{width:0,height:0};resetModelPosition(rt.current,xt,wt,_==null?void 0:_.initialXshift,_==null?void 0:_.initialYshift)},[_==null?void 0:_.initialXshift,_==null?void 0:_.initialYshift]),yt=reactExports.useCallback(async()=>{if(!(!(_!=null&&_.url)||!tt.current)&&!ct.current){console.log("Loading model:",_.url);try{ct.current=!0,lt(!0),dt(AiStateEnum.LOADING);const xt=await Live2DModel.from(_.url,{autoHitTest:!0,autoFocus:_.pointerInteractive??!1,autoUpdate:!0,ticker:Ticker.shared,motionPreload:MotionPreloadStrategy.IDLE,idleMotionGroup:_.idleMotionGroupName});await gt(xt)}catch(xt){console.error("Failed to load Live2D model:",xt),toaster.create({title:`Failed to load Live2D model: ${xt}`,type:"error",duration:2e3})}finally{ct.current=!1,lt(!1),dt(AiStateEnum.IDLE)}}},[_==null?void 0:_.url,_==null?void 0:_.pointerInteractive,lt,gt]),bt=reactExports.useCallback(xt=>{if(!xt)return;xt.removeAllListeners("pointerenter"),xt.removeAllListeners("pointerleave"),xt.removeAllListeners("rightdown"),xt.removeAllListeners("pointerdown"),xt.removeAllListeners("pointermove"),xt.removeAllListeners("pointerup"),xt.removeAllListeners("pointerupoutside");let wt=!1,St=0,Et=0,_t=!1;const Tt=5;_e&&(xt.on("pointerenter",()=>{var Rt;(Rt=window.api)==null||Rt.updateComponentHover("live2d-model",!0)}),xt.on("pointerleave",()=>{var Rt;wt||(Rt=window.api)==null||Rt.updateComponentHover("live2d-model",!1)}),xt.on("rightdown",Rt=>{Rt.data.originalEvent.preventDefault(),window.api.showContextMenu()})),xt.on("pointerdown",Rt=>{Rt.button===0&&(wt=!0,_t=!0,St=Rt.global.x-xt.x,Et=Rt.global.y-xt.y)}),xt.on("pointermove",Rt=>{if(wt){const Ot=Rt.global.x-St,At=Rt.global.y-Et,Ct=Ot-xt.x,$t=At-xt.y;Math.hypot(Ct,$t)>Tt&&(_t=!1),xt.position.x=Ot,xt.position.y=At}}),xt.on("pointerup",Rt=>{wt&&(wt=!1,_t&&vt(xt,Rt.global.x,Rt.global.y))}),xt.on("pointerupoutside",()=>{wt=!1})},[_e]),vt=reactExports.useCallback((xt,wt,St)=>{if(!(_!=null&&_.tapMotions))return;const Et=xt.toLocal(new Point(wt,St));if(!xt.hitTest(Et.x,Et.y).find(Rt=>{var At;const Ot=(At=_==null?void 0:_.tapMotions)==null?void 0:At[Rt];return Ot?(console.log(`Found motion group for area ${Rt}:`,Ot),playRandomMotion(xt,Ot),!0):!1})&&Object.keys(_.tapMotions).length>0){const Rt=getMergedMotionGroup(_.tapMotions);playRandomMotion(xt,Rt)}},[_==null?void 0:_.tapMotions]);return reactExports.useEffect(()=>{var xt,wt,St,Et;st===AiStateEnum.IDLE&&(console.log("defaultEmotion: ",_==null?void 0:_.defaultEmotion),_!=null&&_.defaultEmotion?(wt=(xt=rt.current)==null?void 0:xt.internalModel.motionManager.expressionManager)==null||wt.setExpression(_.defaultEmotion):(Et=(St=rt.current)==null?void 0:St.internalModel.motionManager.expressionManager)==null||Et.resetExpression())},[rt.current,st,_==null?void 0:_.defaultEmotion]),reactExports.useEffect(()=>(_!=null&&_.url&&yt(),()=>{ht()}),[_==null?void 0:_.url,_==null?void 0:_.pointerInteractive,yt,ht]),reactExports.useEffect(()=>{ot.current=_==null?void 0:_.kScale},[_==null?void 0:_.kScale]),reactExports.useEffect(()=>{mt()},[it,mt]),reactExports.useEffect(()=>{rt.current&&it&&bt(rt.current)},[it,bt]),{canvasRef:et,appRef:tt,modelRef:rt,containerRef:nt}},playRandomMotion=(_e,_)=>{if(!_||Object.keys(_).length===0)return;const et=Object.values(_).reduce((rt,nt)=>rt+nt,0);let tt=Math.random()*et;Object.entries(_).find(([rt,nt])=>{if(tt-=nt,tt<=0){const ot=(audioTaskQueue.hasTask(),MotionPriority.NORMAL);return console.log(`Playing weighted motion: ${rt} (weight: ${nt}/${et}, priority: ${ot})`),_e.motion(rt,void 0,ot),!0}return!1})},getMergedMotionGroup=_e=>{const _={};return Object.values(_e).flatMap(et=>Object.entries(et)).reduce((et,[tt,rt])=>(et[tt]||(et[tt]={total:0,count:0}),et[tt].total+=rt,et[tt].count+=1,et),_),Object.entries(_).reduce((et,[tt,{total:rt,count:nt}])=>({...et,[tt]:rt/nt}),{})},DEFAULT_HISTORY={messages:[],historyList:[],currentHistoryUid:null,fullResponse:""},ChatHistoryContext=reactExports.createContext(null);function ChatHistoryProvider({children:_e}){const[_,et]=reactExports.useState(DEFAULT_HISTORY.messages),[tt,rt]=reactExports.useState(DEFAULT_HISTORY.historyList),[nt,ot]=reactExports.useState(DEFAULT_HISTORY.currentHistoryUid),[at,lt]=reactExports.useState(DEFAULT_HISTORY.fullResponse),[ct,dt]=reactExports.useState(!1),st=reactExports.useCallback(mt=>{const yt={id:Date.now().toString(),content:mt,role:"human",timestamp:new Date().toISOString()};et(bt=>[...bt,yt])},[]),it=reactExports.useCallback(mt=>{et(yt=>{const bt=yt[yt.length-1];if(bt&&bt.role==="ai"&&!ct){const xt={...bt,content:bt.content+mt,id:Date.now().toString()},wt=[...yt];return wt[wt.length-1]=xt,wt}const vt={id:Date.now().toString(),content:mt,role:"ai",timestamp:new Date().toISOString()};return[...yt,vt]}),ct&&dt(!1)},[ct]),ut=reactExports.useCallback((mt,yt)=>{mt||console.error("updateHistoryList: uid is null"),nt||console.error("updateHistoryList: currentHistoryUid is null"),rt(bt=>bt.map(vt=>vt.uid===mt?{...vt,latest_message:yt?{content:yt.content,role:yt.role,timestamp:yt.timestamp}:null,timestamp:(yt==null?void 0:yt.timestamp)||vt.timestamp}:vt))},[nt]),ht=reactExports.useCallback(mt=>{lt(yt=>yt+(mt||""))},[]),ft=reactExports.useCallback(()=>{lt(DEFAULT_HISTORY.fullResponse)},[]),gt=reactExports.useMemo(()=>({messages:_,historyList:tt,currentHistoryUid:nt,appendHumanMessage:st,appendAIMessage:it,setMessages:et,setHistoryList:rt,setCurrentHistoryUid:ot,updateHistoryList:ut,fullResponse:at,setFullResponse:lt,appendResponse:ht,clearResponse:ft,setForceNewMessage:dt}),[_,tt,nt,st,it,ut,at,ht,ft,dt]);return jsxRuntimeExports.jsx(ChatHistoryContext.Provider,{value:gt,children:_e})}function useChatHistory(){const _e=reactExports.useContext(ChatHistoryContext);if(!_e)throw new Error("useChatHistory must be used within a ChatHistoryProvider");return _e}const useInterrupt=()=>{const{aiState:_e,setAiState:_}=useAiState(),{sendMessage:et}=useWebSocket(),{fullResponse:tt,clearResponse:rt}=useChatHistory(),{currentModel:nt}=useLive2DModel$1(),{subtitleText:ot,setSubtitleText:at}=useSubtitle();return{interrupt:()=>{_e==="thinking-speaking"&&(console.log("Interrupting conversation chain"),et({type:"interrupt-signal",text:tt}),_("interrupted"),audioTaskQueue.clearQueue(),nt?nt.stopSpeaking():console.error("Live2D model is not initialized"),rt(),ot==="Thinking..."&&at(""),console.log("Interrupted!"))}}},useAudioTask=()=>{const{aiState:_e}=useAiState(),{setSubtitleText:_}=useSubtitle(),{appendResponse:et,appendAIMessage:tt}=useChatHistory(),{currentModel:rt}=useLive2DModel$1(),nt=reactExports.useRef({aiState:_e,currentModel:rt,setSubtitleText:_,appendResponse:et,appendAIMessage:tt});nt.current={aiState:_e,currentModel:rt,setSubtitleText:_,appendResponse:et,appendAIMessage:tt};const ot=(lt,ct)=>{const{aiState:dt,currentModel:st,setSubtitleText:it,appendResponse:ut,appendAIMessage:ht}=nt.current;if(dt==="interrupted"){console.error("Audio playback blocked. State:",dt),ct();return}const{audioBase64:ft,text:gt,expressions:mt}=lt;if(gt&&(ut(gt),ht(gt),ft&&it(gt)),!st){console.error("Model not initialized"),ct();return}try{(mt==null?void 0:mt[0])!==void 0&&st.expression(mt[0]),st.speak(`data:audio/wav;base64,${ft}`,{onFinish:()=>{console.log("Voiceline is over"),ct()},onError:yt=>{console.error("Audio playback error:",yt),ct()}})}catch(yt){console.error("Speak function error:",yt),toaster.create({title:`Speak function error: ${yt}`,type:"error",duration:2e3}),ct()}};return{addAudioTask:async lt=>{const{aiState:ct}=nt.current;if(ct==="interrupted"){console.log("Skipping audio task due to interrupted state");return}console.log(`Adding audio task ${lt.text} to queue`),audioTaskQueue.addTask(()=>new Promise(dt=>{ot(lt,dt)}).catch(dt=>{console.log("Audio task error:",dt)}))},appendResponse:et}},Live2D$1=reactExports.memo(({isPet:_e})=>{const{modelInfo:_,isLoading:et}=useLive2DConfig();useIpcHandlers({isPet:_e});const{canvasRef:tt,appRef:rt,modelRef:nt,containerRef:ot}=useLive2DModel({isPet:_e,modelInfo:_});return useLive2DResize(ot,rt,nt,_,_e),useInterrupt(),useAudioTask(),reactExports.useEffect(()=>(nt.current&&(window.live2d={expression:at=>{var lt;return(lt=nt.current)==null?void 0:lt.expression(at)},setExpression:at=>{var lt,ct;at!==void 0&&((ct=(lt=nt.current)==null?void 0:lt.internalModel.motionManager.expressionManager)==null||ct.setExpression(at))},setRandomExpression:()=>{var at,lt;return(lt=(at=nt.current)==null?void 0:at.internalModel.motionManager.expressionManager)==null?void 0:lt.setRandomExpression()},getExpressions:()=>{var at,lt;return(lt=(at=nt.current)==null?void 0:at.internalModel.motionManager.expressionManager)==null?void 0:lt.definitions.map(ct=>ct.name)}}),()=>{delete window.live2d}),[nt.current]),jsxRuntimeExports.jsx("div",{ref:ot,style:{width:_e?"100vw":"100%",height:_e?"100vh":"100%",pointerEvents:"auto",overflow:"hidden",opacity:et?0:1,transition:"opacity 0.3s ease-in-out"},children:jsxRuntimeExports.jsx("canvas",{id:"canvas",ref:tt,style:{width:"100%",height:"100%",pointerEvents:"auto",display:"block"}})})});Live2D$1.displayName="Live2D";function Canvas(){return jsxRuntimeExports.jsx(Background,{children:jsxRuntimeExports.jsxs(Box,{...canvasStyles.canvas.container,children:[jsxRuntimeExports.jsx(Live2D$1,{isPet:!1}),jsxRuntimeExports.jsx(WebSocketStatus,{}),jsxRuntimeExports.jsx(Subtitle,{})]})})}var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(_e,_){if(_e==null)return{};var et=_objectWithoutPropertiesLoose(_e,_),tt,rt;if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(_e);for(rt=0;rt<nt.length;rt++)tt=nt[rt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,tt)&&(et[tt]=_e[tt])}return et}function _objectWithoutPropertiesLoose(_e,_){if(_e==null)return{};var et={};for(var tt in _e)if(Object.prototype.hasOwnProperty.call(_e,tt)){if(_.indexOf(tt)>=0)continue;et[tt]=_e[tt]}return et}function _extends(){return _extends=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_];for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt])}return _e},_extends.apply(this,arguments)}function ownKeys(_e,_){var et=Object.keys(_e);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(_e);_&&(tt=tt.filter(function(rt){return Object.getOwnPropertyDescriptor(_e,rt).enumerable})),et.push.apply(et,tt)}return et}function _objectSpread(_e){for(var _=1;_<arguments.length;_++){var et=arguments[_]!=null?arguments[_]:{};_%2?ownKeys(Object(et),!0).forEach(function(tt){_defineProperty(_e,tt,et[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(et)):ownKeys(Object(et)).forEach(function(tt){Object.defineProperty(_e,tt,Object.getOwnPropertyDescriptor(et,tt))})}return _e}function _defineProperty(_e,_,et){return _=_toPropertyKey(_),_ in _e?Object.defineProperty(_e,_,{value:et,enumerable:!0,configurable:!0,writable:!0}):_e[_]=et,_e}function _toPropertyKey(_e){var _=_toPrimitive(_e,"string");return typeof _=="symbol"?_:_+""}function _toPrimitive(_e,_){if(typeof _e!="object"||!_e)return _e;var et=_e[Symbol.toPrimitive];if(et!==void 0){var tt=et.call(_e,_||"default");if(typeof tt!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function Tree2Element(_e){return _e&&_e.map((_,et)=>React.createElement(_.tag,_objectSpread({key:et},_.attr),Tree2Element(_.child)))}function GenIcon(_e){return _=>React.createElement(IconBase,_extends({attr:_objectSpread({},_e.attr)},_),Tree2Element(_e.child))}function IconBase(_e){var _=et=>{var{attr:tt,size:rt,title:nt}=_e,ot=_objectWithoutProperties(_e,_excluded),at=rt||et.size||"1em",lt;return et.className&&(lt=et.className),_e.className&&(lt=(lt?lt+" ":"")+_e.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},et.attr,tt,ot,{className:lt,style:_objectSpread(_objectSpread({color:_e.color||et.color},et.style),_e.style),height:at,width:at,xmlns:"http://www.w3.org/2000/svg"}),nt&&React.createElement("title",null,nt),_e.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,et=>_(et)):_(DefaultContext)}function FiCamera(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(_e)}function FiChevronDown(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(_e)}function FiChevronLeft(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(_e)}function FiChevronsDown(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"7 13 12 18 17 13"},child:[]},{tag:"polyline",attr:{points:"7 6 12 11 17 6"},child:[]}]})(_e)}function FiClock(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(_e)}function FiMaximize2(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 3 21 3 21 9"},child:[]},{tag:"polyline",attr:{points:"9 21 3 21 3 15"},child:[]},{tag:"line",attr:{x1:"21",y1:"3",x2:"14",y2:"10"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(_e)}function FiMinimize2(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"4 14 10 14 10 20"},child:[]},{tag:"polyline",attr:{points:"20 10 14 10 14 4"},child:[]},{tag:"line",attr:{x1:"14",y1:"10",x2:"21",y2:"3"},child:[]},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"},child:[]}]})(_e)}function FiMinus(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(_e)}function FiMonitor(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"8",y1:"21",x2:"16",y2:"21"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12",y2:"21"},child:[]}]})(_e)}function FiPlus(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(_e)}function FiSettings(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(_e)}function FiTrash2(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(_e)}function FiX(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(_e)}const isElectron$2=window.api!==void 0,commonStyles={scrollbar:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{bg:"whiteAlpha.100",borderRadius:"full"},"&::-webkit-scrollbar-thumb":{bg:"whiteAlpha.300",borderRadius:"full"}},panel:{border:"1px solid",borderColor:"whiteAlpha.200",borderRadius:"lg",bg:"blackAlpha.400"},title:{fontSize:"lg",fontWeight:"semibold",color:"white",mb:4}},sidebarStyles={sidebar:{container:_e=>({position:"absolute",left:0,top:0,height:"100%",width:"440px",bg:"gray.900",transform:_e?"translateX(calc(-100% + 24px))":"translateX(0)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",flexDirection:"column",gap:4,overflow:_e?"visible":"hidden",pb:"4"}),toggleButton:{position:"absolute",right:0,top:0,width:"24px",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"whiteAlpha.700",_hover:{color:"white"},bg:"transparent",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:1},content:{flex:1,width:"100%",display:"flex",flexDirection:"column",gap:4,overflow:"hidden"},header:{width:"100%",display:"flex",alignItems:"center",gap:1,p:2}},chatHistoryPanel:{container:{flex:1,overflow:"hidden",px:4,display:"flex",flexDirection:"column"},title:commonStyles.title,messageList:{...commonStyles.panel,p:4,width:"97%",flex:1,overflowY:"auto",css:{...commonStyles.scrollbar,scrollPaddingBottom:"1rem"},display:"flex",flexDirection:"column",gap:2}},systemLogPanel:{container:{width:"100%",overflow:"hidden",px:4,minH:"200px",marginTop:"auto"},title:commonStyles.title,logList:{...commonStyles.panel,p:4,height:"200px",overflowY:"auto",fontFamily:"mono",css:commonStyles.scrollbar},entry:{p:2,borderRadius:"md",_hover:{bg:"whiteAlpha.50"}}},chatBubble:{container:{display:"flex",position:"relative",_hover:{bg:"whiteAlpha.50"},py:1,px:2,borderRadius:"md"},message:{maxW:"90%",bg:"transparent",p:2},text:{fontSize:"xs",color:"whiteAlpha.900"},dot:{position:"absolute",w:"2",h:"2",borderRadius:"full",bg:"white",top:"2"}},historyDrawer:{listContainer:{flex:1,overflowY:"auto",px:4,py:2,css:commonStyles.scrollbar},historyItem:{mb:4,p:3,borderRadius:"md",bg:"whiteAlpha.50",cursor:"pointer",transition:"all 0.2s",_hover:{bg:"whiteAlpha.100"}},historyItemSelected:{bg:"whiteAlpha.200",borderLeft:"3px solid",borderColor:"blue.500"},historyHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},timestamp:{fontSize:"sm",color:"whiteAlpha.700",fontFamily:"mono"},deleteButton:{variant:"ghost",colorScheme:"red",size:"sm",color:"red.300",opacity:.8,_hover:{opacity:1,bg:"whiteAlpha.200"}},messagePreview:{fontSize:"sm",color:"whiteAlpha.900",noOfLines:2,overflow:"hidden",textOverflow:"ellipsis"},drawer:{content:{background:"var(--chakra-colors-gray-900)",maxWidth:"440px",marginTop:isElectron$2?"30px":"0",height:isElectron$2?"calc(100vh - 30px)":"100vh"},title:{color:"white"},closeButton:{color:"white"},actionButton:{color:"white",borderColor:"white",variant:"outline"}}},cameraPanel:{container:{width:"97%",overflow:"hidden",px:4,minH:"240px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},title:commonStyles.title,videoContainer:{...commonStyles.panel,width:"100%",height:"240px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",transition:"all 0.2s"},video:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)",borderRadius:"8px",display:"block"}},screenPanel:{container:{width:"97%",overflow:"hidden",px:4,minH:"240px"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},title:commonStyles.title,screenContainer:{...commonStyles.panel,width:"100%",height:"240px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",transition:"all 0.2s"},video:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px",display:"block"}},bottomTab:{container:{width:"97%",px:4,position:"relative",zIndex:0},tabs:{width:"100%",bg:"whiteAlpha.50",borderRadius:"lg",p:"1"},list:{borderBottom:"none",gap:"2"},trigger:{color:"whiteAlpha.700",display:"flex",alignItems:"center",gap:2,px:3,py:2,borderRadius:"md",_hover:{color:"white",bg:"whiteAlpha.50"},_selected:{color:"white",bg:"whiteAlpha.200"}}}};function LuBell(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"},child:[]},{tag:"path",attr:{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"},child:[]}]})(_e)}function LuHand(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2"},child:[]},{tag:"path",attr:{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2"},child:[]},{tag:"path",attr:{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8"},child:[]},{tag:"path",attr:{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"},child:[]}]})(_e)}function LuMicOff(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"2",x2:"22",y1:"2",y2:"22"},child:[]},{tag:"path",attr:{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"},child:[]},{tag:"path",attr:{d:"M5 10v2a7 7 0 0 0 12 5"},child:[]},{tag:"path",attr:{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33"},child:[]},{tag:"path",attr:{d:"M9 9v3a3 3 0 0 0 5.12 2.12"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"19",y2:"22"},child:[]}]})(_e)}function LuMic(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"},child:[]},{tag:"path",attr:{d:"M19 10v2a7 7 0 0 1-14 0v-2"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"19",y2:"22"},child:[]}]})(_e)}function LuSend(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"},child:[]},{tag:"path",attr:{d:"m21.854 2.147-10.94 10.939"},child:[]}]})(_e)}function LuX(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 6 6 18"},child:[]},{tag:"path",attr:{d:"m6 6 12 12"},child:[]}]})(_e)}const CloseButton=reactExports.forwardRef((_e,_)=>jsxRuntimeExports.jsx(IconButton,{variant:"ghost","aria-label":"Close",ref:_,..._e,children:_e.children??jsxRuntimeExports.jsx(LuX,{})})),isElectron$1=window.api!==void 0,settingStyles={settingUI:{container:{width:"100%",height:"100%",p:4,gap:4,position:"relative",overflowY:"auto",css:{"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{bg:"whiteAlpha.100",borderRadius:"full"},"&::-webkit-scrollbar-thumb":{bg:"whiteAlpha.300",borderRadius:"full"}}},header:{width:"100%",display:"flex",alignItems:"center",gap:1},title:{ml:4,fontSize:"lg",fontWeight:"bold"},tabs:{root:{width:"100%",variant:"plain",colorPalette:"gray"},content:{},trigger:{color:"whiteAlpha.600",_selected:{color:"white"},_hover:{color:"white"}},list:{display:"flex",justifyContent:"flex-start",width:"100%",borderBottom:"1px solid",borderColor:"whiteAlpha.200",mb:4,pl:0}},footer:{width:"100%",display:"flex",justifyContent:"flex-end",gap:2,mt:"auto",pt:4,borderTop:"1px solid",borderColor:"whiteAlpha.200"},drawerContent:{bg:"gray.900",maxWidth:"440px",height:isElectron$1?"calc(100vh - 30px)":"100vh",borderLeft:"1px solid",borderColor:"whiteAlpha.200"},drawerHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",position:"relative",px:6,py:4},drawerTitle:{color:"white",fontSize:"lg",fontWeight:"semibold"},closeButton:{position:"absolute",right:1,top:1,color:"white"}},general:{container:{align:"stretch",gap:6,p:4},field:{label:{color:"whiteAlpha.800"}},select:{root:{colorPalette:"gray",bg:"gray.800"},trigger:{bg:"gray.800"}},input:{bg:"gray.800"},buttonGroup:{gap:4,width:"100%"},button:{width:"50%",variant:"outline",bg:"blue",color:"white",_hover:{bg:"whiteAlpha.300"}},fieldLabel:{fontSize:"14px",color:"gray.600"}},common:{field:{orientation:"horizontal"},fieldLabel:{fontSize:"sm",color:"whiteAlpha.800",whiteSpace:"nowrap"},switch:{size:"md",colorPalette:"blue",variant:"solid"},numberInput:{root:{pattern:"[0-9]*\\.?[0-9]*",inputMode:"decimal"},input:{bg:"whiteAlpha.100",borderColor:"whiteAlpha.200",_hover:{bg:"whiteAlpha.200"}}},container:{gap:8,maxW:"sm",css:{"--field-label-width":"120px"}},input:{bg:"whiteAlpha.100",borderColor:"whiteAlpha.200",_hover:{bg:"whiteAlpha.200"}}},live2d:{container:{gap:8,maxW:"sm",css:{"--field-label-width":"120px"}},emotionMap:{title:{fontWeight:"bold",mb:4},entry:{mb:2},button:{colorPalette:"blue",mt:2},deleteButton:{colorPalette:"red"}}}},useGeneralSettings=({bgUrlContext:_e,confName:_,setConfName:et,baseUrl:tt,wsUrl:rt,onWsUrlChange:nt,onBaseUrlChange:ot,onSave:at,onCancel:lt})=>{var At;const{showSubtitle:ct,setShowSubtitle:dt}=useSubtitle(),{setUseCameraBackground:st}=_e||{},{startBackgroundCamera:it,stopBackgroundCamera:ut}=useCamera(),{configFiles:ht,getFilenameByName:ft}=useConfig(),{switchCharacter:gt}=useSwitchCharacter(),mt=()=>{if(!(_e!=null&&_e.backgroundUrl))return[];const $t=_e.backgroundUrl.replace(tt,"");return $t.startsWith("/bg/")?[$t]:[]},yt={language:["en"],customBgUrl:(At=_e==null?void 0:_e.backgroundUrl)!=null&&At.includes("/bg/")?"":(_e==null?void 0:_e.backgroundUrl)||"",selectedBgUrl:mt(),backgroundUrl:(_e==null?void 0:_e.backgroundUrl)||"",selectedCharacterPreset:[],useCameraBackground:(_e==null?void 0:_e.useCameraBackground)||!1,wsUrl:rt||defaultWsUrl,baseUrl:tt||defaultBaseUrl,showSubtitle:ct},[bt,vt]=reactExports.useState(yt),[xt,wt]=reactExports.useState(yt),St=_;reactExports.useEffect(()=>{dt(bt.showSubtitle);const Ct=bt.customBgUrl||bt.selectedBgUrl[0];if(Ct&&_e){const $t=Ct.startsWith("http")?Ct:`${tt}${Ct}`;_e.setBackgroundUrl($t)}nt(bt.wsUrl),ot(bt.baseUrl)},[bt]),reactExports.useEffect(()=>{if(_){const Ct={...bt,selectedCharacterPreset:[_]};vt(Ct),wt(Ct)}},[_]),reactExports.useEffect(()=>{if(!at||!lt)return;const Ct=at(()=>{_t()}),$t=lt(()=>{Tt()});return()=>{Ct==null||Ct(),$t==null||$t()}},[at,lt]);const Et=(Ct,$t)=>{vt(Mt=>({...Mt,[Ct]:$t})),Ct==="wsUrl"&&nt($t),Ct==="baseUrl"&&ot($t)},_t=()=>{wt(bt)},Tt=()=>{vt(xt),dt(xt.showSubtitle),_e&&(_e.setBackgroundUrl(xt.backgroundUrl),_e.setUseCameraBackground(xt.useCameraBackground)),nt(xt.wsUrl),ot(xt.baseUrl),St&&et(St),xt.useCameraBackground?it():ut()};return{settings:bt,handleSettingChange:Et,handleSave:_t,handleCancel:Tt,handleCameraToggle:async Ct=>{if(st)if(Ct)try{await it(),Et("useCameraBackground",!0),st(!0)}catch($t){console.error("Failed to start camera:",$t),Et("useCameraBackground",!1),st(!1)}else ut(),Et("useCameraBackground",!1),st(!1)},handleCharacterPresetChange:Ct=>{const $t=Ct[0],Mt=ht.find(Nt=>Nt.filename===$t),Dt=_?ft(_):"";Et("selectedCharacterPreset",Ct),Dt!==$t&&Mt&&gt($t)},showSubtitle:ct,setShowSubtitle:dt}},Field=reactExports.forwardRef((_e,_)=>{const{label:et,children:tt,helperText:rt,errorText:nt,optionalText:ot,...at}=_e;return jsxRuntimeExports.jsxs(FieldRoot,{ref:_,...at,children:[et&&jsxRuntimeExports.jsxs(FieldLabel,{children:[et,jsxRuntimeExports.jsx(FieldRequiredIndicator,{fallback:ot})]}),tt,rt&&jsxRuntimeExports.jsx(FieldHelperText,{children:rt}),nt&&jsxRuntimeExports.jsx(FieldErrorText,{children:nt})]})}),Switch=reactExports.forwardRef((_e,_)=>{const{inputProps:et,children:tt,rootRef:rt,trackLabel:nt,thumbLabel:ot,...at}=_e;return jsxRuntimeExports.jsxs(SwitchRoot,{ref:rt,...at,children:[jsxRuntimeExports.jsx(SwitchHiddenInput,{ref:_,...et}),jsxRuntimeExports.jsxs(SwitchControl,{children:[jsxRuntimeExports.jsx(SwitchThumb,{children:ot&&jsxRuntimeExports.jsx(SwitchThumbIndicator,{fallback:ot==null?void 0:ot.off,children:ot==null?void 0:ot.on})}),nt&&jsxRuntimeExports.jsx(SwitchIndicator,{fallback:nt.off,children:nt.on})]}),tt!=null&&jsxRuntimeExports.jsx(SwitchLabel,{children:tt})]})}),SelectTrigger=reactExports.forwardRef((_e,_)=>{const{children:et,clearable:tt,...rt}=_e;return jsxRuntimeExports.jsxs(SelectControl,{...rt,children:[jsxRuntimeExports.jsx(SelectTrigger$1,{ref:_,children:et}),jsxRuntimeExports.jsxs(SelectIndicatorGroup,{children:[tt&&jsxRuntimeExports.jsx(SelectClearTrigger,{}),jsxRuntimeExports.jsx(SelectIndicator,{})]})]})}),SelectClearTrigger=reactExports.forwardRef((_e,_)=>jsxRuntimeExports.jsx(SelectClearTrigger$1,{asChild:!0,..._e,ref:_,children:jsxRuntimeExports.jsx(CloseButton,{size:"xs",variant:"plain",focusVisibleRing:"inside",focusRingWidth:"2px",pointerEvents:"auto"})})),SelectContent=reactExports.forwardRef((_e,_)=>{const{portalled:et=!0,portalRef:tt,...rt}=_e;return jsxRuntimeExports.jsx(Portal,{disabled:!et,container:tt,children:jsxRuntimeExports.jsx(SelectPositioner,{children:jsxRuntimeExports.jsx(SelectContent$1,{...rt,ref:_})})})}),SelectItem=reactExports.forwardRef((_e,_)=>{const{item:et,children:tt,...rt}=_e;return jsxRuntimeExports.jsxs(SelectItem$1,{item:et,...rt,ref:_,children:[tt,jsxRuntimeExports.jsx(SelectItemIndicator,{})]},et.value)}),SelectValueText=reactExports.forwardRef((_e,_)=>{const{children:et,...tt}=_e;return jsxRuntimeExports.jsx(SelectValueText$1,{...tt,ref:_,children:jsxRuntimeExports.jsx(SelectContext,{children:rt=>{const nt=rt.selectedItems;return nt.length===0?_e.placeholder:et?et(nt):nt.length===1?rt.collection.stringifyItem(nt[0]):`${nt.length} selected`}})})}),SelectRoot=reactExports.forwardRef((_e,_)=>jsxRuntimeExports.jsx(SelectRoot$1,{..._e,ref:_,positioning:{sameWidth:!0,..._e.positioning},children:_e.asChild?_e.children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectHiddenSelect,{}),_e.children]})}));reactExports.forwardRef((_e,_)=>{const{children:et,label:tt,...rt}=_e;return jsxRuntimeExports.jsxs(SelectItemGroup,{...rt,ref:_,children:[jsxRuntimeExports.jsx(SelectItemGroupLabel,{children:tt}),et]})});function SelectField({label:_e,value:_,onChange:et,collection:tt,placeholder:rt}){return jsxRuntimeExports.jsx(Field,{...settingStyles.general.field,label:jsxRuntimeExports.jsx(Text$1,{...settingStyles.general.field.label,children:_e}),children:jsxRuntimeExports.jsxs(SelectRoot,{...settingStyles.general.select.root,collection:tt,value:_,onValueChange:nt=>et(nt.value),children:[jsxRuntimeExports.jsx(SelectTrigger,{...settingStyles.general.select.trigger,children:jsxRuntimeExports.jsx(SelectValueText,{placeholder:rt})}),jsxRuntimeExports.jsx(SelectContent,{children:tt.items.map(nt=>jsxRuntimeExports.jsx(SelectItem,{item:nt,children:nt.label},nt.value))})]})})}function NumberField({label:_e,value:_,onChange:et,min:tt,max:rt,step:nt,allowMouseWheel:ot}){return jsxRuntimeExports.jsx(Field,{...settingStyles.common.field,label:jsxRuntimeExports.jsx(Text$1,{...settingStyles.common.fieldLabel,children:_e}),children:jsxRuntimeExports.jsxs(NumberInputRoot,{...settingStyles.common.numberInput.root,value:_.toString(),onValueChange:at=>et(at.value),min:tt,max:rt,step:nt,allowMouseWheel:ot,children:[jsxRuntimeExports.jsx(NumberInputInput,{...settingStyles.common.numberInput.input}),jsxRuntimeExports.jsxs(NumberInputControl,{children:[jsxRuntimeExports.jsx(NumberInputIncrementTrigger,{}),jsxRuntimeExports.jsx(NumberInputDecrementTrigger,{})]})]})})}function SwitchField({label:_e,checked:_,onChange:et}){return jsxRuntimeExports.jsx(Field,{...settingStyles.common.field,label:jsxRuntimeExports.jsx(Text$1,{...settingStyles.common.fieldLabel,children:_e}),children:jsxRuntimeExports.jsx(Switch,{...settingStyles.common.switch,checked:_,onCheckedChange:tt=>et(tt.checked)})})}function InputField({label:_e,value:_,onChange:et,placeholder:tt}){return jsxRuntimeExports.jsx(Field,{...settingStyles.general.field,label:jsxRuntimeExports.jsx(Text$1,{...settingStyles.general.field.label,children:_e}),children:jsxRuntimeExports.jsx(Input,{...settingStyles.general.input,placeholder:tt,value:_,onChange:rt=>et(rt.target.value)})})}const useCollections=()=>{const{backgroundFiles:_e}=useBgUrl()||{},{configFiles:_}=useConfig(),et=createListCollection({items:[{label:"English",value:"en"},{label:"",value:"zh"}]}),tt=createListCollection({items:(_e==null?void 0:_e.map(nt=>({label:String(nt),value:`/bg/${nt}`})))||[]}),rt=createListCollection({items:_.map(nt=>({label:nt.name,value:nt.filename}))});return{languages:et,backgrounds:tt,characterPresets:rt}};function General({onSave:_e,onCancel:_}){const et=useBgUrl(),{confName:tt,setConfName:rt}=useConfig(),{wsUrl:nt,setWsUrl:ot,baseUrl:at,setBaseUrl:lt}=useWebSocket(),ct=useCollections(),{settings:dt,handleSettingChange:st,handleCameraToggle:it,handleCharacterPresetChange:ut,showSubtitle:ht,setShowSubtitle:ft}=useGeneralSettings({bgUrlContext:et,confName:tt,setConfName:rt,baseUrl:at,wsUrl:nt,onWsUrlChange:ot,onBaseUrlChange:lt,onSave:_e,onCancel:_});return jsxRuntimeExports.jsxs(Stack,{...settingStyles.common.container,children:[jsxRuntimeExports.jsx(SelectField,{label:"Language",value:dt.language,onChange:gt=>st("language",gt),collection:ct.languages,placeholder:"Select language"}),jsxRuntimeExports.jsx(SwitchField,{label:"Use Camera Background",checked:dt.useCameraBackground,onChange:it}),jsxRuntimeExports.jsx(SwitchField,{label:"Show Subtitle",checked:ht,onChange:ft}),!dt.useCameraBackground&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectField,{label:"Background Image",value:dt.selectedBgUrl,onChange:gt=>st("selectedBgUrl",gt),collection:ct.backgrounds,placeholder:"Select from available backgrounds"}),jsxRuntimeExports.jsx(InputField,{label:"Or enter a custom background URL",value:dt.customBgUrl,onChange:gt=>st("customBgUrl",gt),placeholder:"Enter image URL"})]}),jsxRuntimeExports.jsx(SelectField,{label:"Character Preset",value:dt.selectedCharacterPreset,onChange:ut,collection:ct.characterPresets,placeholder:tt||"Select character preset"}),jsxRuntimeExports.jsx(InputField,{label:"WebSocket URL",value:dt.wsUrl,onChange:gt=>st("wsUrl",gt),placeholder:"Enter WebSocket URL"}),jsxRuntimeExports.jsx(InputField,{label:"Base URL",value:dt.baseUrl,onChange:gt=>st("baseUrl",gt),placeholder:"Enter Base URL"})]})}const useLive2dSettings=()=>{const _e=useLive2DConfig(),_={url:"",kScale:625e-6,initialXshift:0,initialYshift:0,emotionMap:{},scrollToResize:!0},[et,tt]=reactExports.useState((_e==null?void 0:_e.modelInfo)||_),[rt,nt]=reactExports.useState((_e==null?void 0:_e.modelInfo)||_);return reactExports.useEffect(()=>{_e!=null&&_e.modelInfo&&JSON.stringify(_e.modelInfo)!==JSON.stringify(rt)&&(nt(_e.modelInfo),tt(_e.modelInfo))},[_e==null?void 0:_e.modelInfo]),reactExports.useEffect(()=>{_e&&et&&_e.setModelInfo(et)},[et.pointerInteractive,et.scrollToResize]),{modelInfo:et,handleInputChange:(ct,dt)=>{tt(st=>({...st,[ct]:dt}))},handleSave:()=>{_e&&et&&nt(et)},handleCancel:()=>{tt(rt),_e&&rt&&_e.setModelInfo(rt)}}};function live2D({onSave:_e,onCancel:_}){const{modelInfo:et,handleInputChange:tt,handleSave:rt,handleCancel:nt}=useLive2dSettings();return reactExports.useEffect(()=>{if(!_e||!_)return;const ot=_e(rt),at=_(nt);return()=>{ot==null||ot(),at==null||at()}},[_e,_]),jsxRuntimeExports.jsxs(Stack,{...settingStyles.common.container,children:[jsxRuntimeExports.jsx(SwitchField,{label:"Pointer Interactive",checked:et.pointerInteractive??true,onChange:ot=>tt("pointerInteractive",ot)}),jsxRuntimeExports.jsx(SwitchField,{label:"Enable Scroll to Resize",checked:et.scrollToResize??!0,onChange:ot=>tt("scrollToResize",ot)})]})}const useASRSettings=()=>{const{settings:_e,updateSettings:_,autoStopMic:et,setAutoStopMic:tt,autoStartMicOn:rt,setAutoStartMicOn:nt}=useVAD(),ot=reactExports.useRef(_e),at=reactExports.useRef(_e),lt=reactExports.useRef(et),ct=reactExports.useRef(rt),[dt,st]=reactExports.useState(et),[it,ut]=reactExports.useState(rt),[,ht]=React.useReducer(vt=>vt+1,0);reactExports.useEffect(()=>{st(et),ut(rt)},[et,rt]);const ft=(vt,xt)=>{if(xt===""||xt==="-")ot.current={...ot.current,[vt]:xt};else{const wt=Number(xt);isNaN(wt)||(ot.current={...ot.current,[vt]:wt})}ht()},gt=vt=>{st(vt),tt(vt)},mt=vt=>{ut(vt),nt(vt)},yt=()=>{_(ot.current),at.current=ot.current,lt.current=dt,ct.current=it},bt=()=>{ot.current=at.current,st(lt.current),ut(ct.current),tt(lt.current),nt(ct.current),ht()};return{localSettings:ot.current,autoStopMic:dt,autoStartMicOn:it,setAutoStopMic:gt,setAutoStartMicOn:mt,handleInputChange:ft,handleSave:yt,handleCancel:bt}};function ASR({onSave:_e,onCancel:_}){const{localSettings:et,autoStopMic:tt,autoStartMicOn:rt,setAutoStopMic:nt,setAutoStartMicOn:ot,handleInputChange:at,handleSave:lt,handleCancel:ct}=useASRSettings();return reactExports.useEffect(()=>{if(!_e||!_)return;const dt=_e(lt),st=_(ct);return()=>{dt==null||dt(),st==null||st()}},[_e,_,lt,ct]),jsxRuntimeExports.jsxs(Stack,{...settingStyles.common.container,children:[jsxRuntimeExports.jsx(SwitchField,{label:"Auto Stop Mic When AI Start Speaking",checked:tt,onChange:nt}),jsxRuntimeExports.jsx(SwitchField,{label:"Auto Start Mic When AI Interrupted",checked:rt,onChange:ot}),jsxRuntimeExports.jsx(NumberField,{label:"Speech Prob Threshold",value:et.positiveSpeechThreshold,onChange:dt=>at("positiveSpeechThreshold",dt),min:1,max:100}),jsxRuntimeExports.jsx(NumberField,{label:"Negative Speech Threshold",value:et.negativeSpeechThreshold,onChange:dt=>at("negativeSpeechThreshold",dt),min:0,max:100}),jsxRuntimeExports.jsx(NumberField,{label:"Redemption Frames",value:et.redemptionFrames,onChange:dt=>at("redemptionFrames",dt),min:1,max:100})]})}function TTS(){return jsxRuntimeExports.jsx(Box,{children:"TTS Settings Content"})}function useTriggerSpeak(){const{sendMessage:_e}=useWebSocket(),{captureAllMedia:_}=useMediaCapture();return{sendTriggerSignal:reactExports.useCallback(async tt=>{const rt=await _();_e({type:"ai-speak-signal",idle_time:tt,images:rt})},[_e,_])}}const defaultSettings={allowProactiveSpeak:!1,idleSecondsToSpeak:5,allowButtonTrigger:!1},ProactiveSpeakContext=reactExports.createContext(null);function ProactiveSpeakProvider({children:_e}){const[_,et]=useLocalStorage("proactiveSpeakSettings",defaultSettings),{aiState:tt}=useAiState(),{sendTriggerSignal:rt}=useTriggerSpeak(),nt=reactExports.useRef(null),ot=reactExports.useRef(null),at=reactExports.useCallback(()=>{nt.current&&(clearTimeout(nt.current),nt.current=null),ot.current=null},[]),lt=reactExports.useCallback(()=>{at(),_.allowProactiveSpeak&&(ot.current=Date.now(),nt.current=setTimeout(()=>{const st=(Date.now()-ot.current)/1e3;rt(st)},_.idleSecondsToSpeak*1e3))},[_.allowProactiveSpeak,_.idleSecondsToSpeak,rt,at]);reactExports.useEffect(()=>{tt===AiStateEnum.IDLE?lt():at()},[tt,lt,at]),reactExports.useEffect(()=>()=>{at()},[at]);const ct=reactExports.useCallback(st=>{et(st)},[et]),dt=reactExports.useMemo(()=>({settings:_,updateSettings:ct}),[_,ct]);return jsxRuntimeExports.jsx(ProactiveSpeakContext.Provider,{value:dt,children:_e})}function useProactiveSpeak(){const _e=reactExports.useContext(ProactiveSpeakContext);if(!_e)throw new Error("useProactiveSpeak must be used within a ProactiveSpeakProvider");return _e}function useAgentSettings({onSave:_e,onCancel:_}={}){const{settings:et,updateSettings:tt}=useProactiveSpeak(),[rt,nt]=reactExports.useState({allowProactiveSpeak:et.allowProactiveSpeak,idleSecondsToSpeak:et.idleSecondsToSpeak,allowButtonTrigger:et.allowButtonTrigger}),[ot,at]=reactExports.useState({...et});reactExports.useEffect(()=>{et&&(at(et),nt(et))},[et]);const lt=reactExports.useCallback(ut=>{nt(ht=>({...ht,allowProactiveSpeak:ut}))},[]),ct=reactExports.useCallback(ut=>{nt(ht=>({...ht,idleSecondsToSpeak:ut}))},[]),dt=reactExports.useCallback(ut=>{nt(ht=>({...ht,allowButtonTrigger:ut}))},[]),st=reactExports.useCallback(()=>{tt(rt),at(rt)},[tt,rt]),it=reactExports.useCallback(()=>{nt(ot),tt(ot)},[ot,tt]);return reactExports.useEffect(()=>{if(!_e||!_)return;const ut=_e(st),ht=_(it);return()=>{ut==null||ut(),ht==null||ht()}},[_e,_,st,it]),{settings:rt,handleAllowProactiveSpeakChange:lt,handleIdleSecondsChange:ct,handleAllowButtonTriggerChange:dt}}function Agent({onSave:_e,onCancel:_}){const{settings:et,handleAllowProactiveSpeakChange:tt,handleIdleSecondsChange:rt,handleAllowButtonTriggerChange:nt}=useAgentSettings({onSave:_e,onCancel:_});return jsxRuntimeExports.jsxs(Stack,{...settingStyles.common.container,children:[jsxRuntimeExports.jsx(SwitchField,{label:"Allow AI to Speak Proactively",checked:et.allowProactiveSpeak,onChange:tt}),et.allowProactiveSpeak&&jsxRuntimeExports.jsx(NumberField,{label:"Idle seconds allow AI to speak",value:et.idleSecondsToSpeak,onChange:ot=>rt(Number(ot)),min:0,step:.1,allowMouseWheel:!0}),jsxRuntimeExports.jsx(SwitchField,{label:"Prompt AI to Speak via Raise Hand Button",checked:et.allowButtonTrigger,onChange:nt})]})}function About(){return jsxRuntimeExports.jsx(Box,{children:"About Settings Content"})}function SettingUI({open:_e,onClose:_}){const[et,tt]=reactExports.useState([]),[rt,nt]=reactExports.useState([]),[ot,at]=reactExports.useState("general"),lt=reactExports.useCallback(ut=>(tt(ht=>[...ht,ut]),()=>{tt(ht=>ht.filter(ft=>ft!==ut))}),[]),ct=reactExports.useCallback(ut=>(nt(ht=>[...ht,ut]),()=>{nt(ht=>ht.filter(ft=>ft!==ut))}),[]),dt=reactExports.useCallback(()=>{et.forEach(ut=>ut()),_()},[et,_]),st=reactExports.useCallback(()=>{rt.forEach(ut=>ut()),_()},[rt,_]),it=reactExports.useMemo(()=>jsxRuntimeExports.jsxs(TabsContentGroup,{children:[jsxRuntimeExports.jsx(TabsContent,{value:"general",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(General,{onSave:lt,onCancel:ct})}),jsxRuntimeExports.jsx(TabsContent,{value:"live2d",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(live2D,{onSave:lt,onCancel:ct})}),jsxRuntimeExports.jsx(TabsContent,{value:"asr",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(ASR,{onSave:lt,onCancel:ct})}),jsxRuntimeExports.jsx(TabsContent,{value:"tts",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(TTS,{})}),jsxRuntimeExports.jsx(TabsContent,{value:"agent",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(Agent,{onSave:lt,onCancel:ct})}),jsxRuntimeExports.jsx(TabsContent,{value:"about",...settingStyles.settingUI.tabs.content,children:jsxRuntimeExports.jsx(About,{})})]}),[lt,ct]);return jsxRuntimeExports.jsxs(DrawerRoot$1,{open:_e,onOpenChange:ut=>ut.open?null:_(),placement:"start",children:[jsxRuntimeExports.jsx(DrawerBackdrop$1,{}),jsxRuntimeExports.jsxs(DrawerContent$1,{...settingStyles.settingUI.drawerContent,children:[jsxRuntimeExports.jsxs(DrawerHeader$1,{...settingStyles.settingUI.drawerHeader,children:[jsxRuntimeExports.jsx(DrawerTitle$1,{...settingStyles.settingUI.drawerTitle,children:"Settings"}),jsxRuntimeExports.jsx("div",{...settingStyles.settingUI.closeButton,children:jsxRuntimeExports.jsx(DrawerCloseTrigger$1,{asChild:!0,onClick:st,children:jsxRuntimeExports.jsx(CloseButton,{size:"sm",color:"white"})})})]}),jsxRuntimeExports.jsx(DrawerBody$1,{children:jsxRuntimeExports.jsxs(TabsRoot,{defaultValue:"general",value:ot,onValueChange:ut=>at(ut.value),...settingStyles.settingUI.tabs.root,children:[jsxRuntimeExports.jsxs(TabsList,{...settingStyles.settingUI.tabs.list,children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"general",...settingStyles.settingUI.tabs.trigger,children:"General"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"live2d",...settingStyles.settingUI.tabs.trigger,children:"Live2D"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"asr",...settingStyles.settingUI.tabs.trigger,children:"ASR"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"tts",...settingStyles.settingUI.tabs.trigger,children:"TTS"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"agent",...settingStyles.settingUI.tabs.trigger,children:"Agent"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"about",...settingStyles.settingUI.tabs.trigger,children:"About"})]}),it]})}),jsxRuntimeExports.jsxs(DrawerFooter$1,{children:[jsxRuntimeExports.jsx(Button,{colorPalette:"red",onClick:st,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{colorPalette:"blue",onClick:dt,children:"Save"})]})]})]})}function BubbleContent({content:_e,onContentChange:_}){const et=reactExports.useRef(_e);return reactExports.useEffect(()=>{_e!==et.current&&(et.current=_e,_==null||_())},[_e,_]),jsxRuntimeExports.jsx(Box,{...sidebarStyles.chatBubble.message,children:jsxRuntimeExports.jsx(Text$1,{...sidebarStyles.chatBubble.text,children:_e})})}function BubbleIndicator({isAI:_e}){return jsxRuntimeExports.jsx(Box,{...sidebarStyles.chatBubble.dot,left:_e?"-1":"auto",right:_e?"auto":"-1"})}function ChatBubble({message:_e,onUpdate:_}){const et=_e.role==="ai";return jsxRuntimeExports.jsxs(Box,{...sidebarStyles.chatBubble.container,justifyContent:et?"flex-start":"flex-end",children:[jsxRuntimeExports.jsx(BubbleContent,{content:_e.content,onContentChange:_}),jsxRuntimeExports.jsx(BubbleIndicator,{isAI:et})]})}function useChatHistoryPanel(){const{messages:_e}=useChatHistory(),_=reactExports.useRef(null),et=reactExports.useCallback(()=>{_.current&&(_.current.scrollTop=_.current.scrollHeight)},[]);return{messages:_e,messageListRef:_,handleMessageUpdate:et}}function EmptyState({message:_e}){return jsxRuntimeExports.jsx(Box,{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"whiteAlpha.500",children:jsxRuntimeExports.jsx(Text$1,{fontSize:"sm",children:_e})})}const MessageList=reactExports.memo(({messages:_e,messageListRef:_,onMessageUpdate:et})=>{const tt=reactExports.useRef(null),rt=reactExports.useCallback(()=>{if(_.current){const{scrollHeight:nt}=_.current,ot=_.current.clientHeight,at=nt-ot;_.current.scrollTo({top:at+100,behavior:"smooth"})}},[_]);return reactExports.useEffect(()=>{rt()},[_e,rt]),reactExports.useEffect(()=>{rt()},[rt]),jsxRuntimeExports.jsx(Box,{...sidebarStyles.chatHistoryPanel.messageList,ref:_,children:_e.map((nt,ot)=>jsxRuntimeExports.jsx(Box,{ref:ot===_e.length-1?tt:null,children:jsxRuntimeExports.jsx(ChatBubble,{message:nt,onUpdate:()=>{et&&et(nt),rt()}})},`${nt.role}-${nt.timestamp}-${nt.id}`))})});MessageList.displayName="MessageList";function ChatHistoryPanel(){const{messages:_e,messageListRef:_,handleMessageUpdate:et}=useChatHistoryPanel();return jsxRuntimeExports.jsxs(Box,{...sidebarStyles.chatHistoryPanel.container,children:[jsxRuntimeExports.jsx(Text$1,{...sidebarStyles.chatHistoryPanel.title,children:"Chat History"}),_e.length===0?jsxRuntimeExports.jsx(EmptyState,{message:"No messages yet. Start a conversation!"}):jsxRuntimeExports.jsx(MessageList,{messages:_e,messageListRef:_,onMessageUpdate:et})]})}const Tooltip=reactExports.forwardRef((_e,_)=>{const{showArrow:et,children:tt,disabled:rt,portalled:nt,content:ot,contentProps:at,portalRef:lt,...ct}=_e;return rt?tt:jsxRuntimeExports.jsxs(TooltipRoot,{...ct,children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:tt}),jsxRuntimeExports.jsx(Portal,{disabled:!nt,container:lt,children:jsxRuntimeExports.jsx(TooltipPositioner,{children:jsxRuntimeExports.jsxs(TooltipContent,{ref:_,...at,children:[et&&jsxRuntimeExports.jsx(TooltipArrow,{children:jsxRuntimeExports.jsx(TooltipArrowTip,{})}),ot]})})})]})}),useCameraPanel=()=>{const _e=reactExports.useRef(null),[_,et]=reactExports.useState(""),[tt,rt]=reactExports.useState(!1),{isStreaming:nt,stream:ot,startCamera:at,stopCamera:lt}=useCamera();return{videoRef:_e,error:_,isHovering:tt,isStreaming:nt,stream:ot,toggleCamera:async()=>{try{nt?lt():await at(),et("")}catch(it){let ut="Unable to access camera";it instanceof Error&&(ut=it.message),et(ut)}},handleMouseEnter:()=>rt(!0),handleMouseLeave:()=>rt(!1)}};function LiveIndicator(){return jsxRuntimeExports.jsxs(Box,{color:"red.500",display:"flex",alignItems:"center",gap:2,children:[jsxRuntimeExports.jsx(Box,{w:"8px",h:"8px",borderRadius:"full",bg:"red.500",animation:"pulse 2s infinite"}),jsxRuntimeExports.jsx(Text$1,{fontSize:"sm",children:"Live"})]})}function CameraPlaceholder(){return jsxRuntimeExports.jsxs(Box,{position:"absolute",display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[jsxRuntimeExports.jsx(FiCamera,{size:24}),jsxRuntimeExports.jsx(Text$1,{color:"whiteAlpha.600",fontSize:"sm",textAlign:"center",children:"Click to start camera"})]})}function VideoStream$1({videoRef:_e,isStreaming:_}){return jsxRuntimeExports.jsx("video",{ref:_e,autoPlay:!0,playsInline:!0,muted:!0,style:sidebarStyles.cameraPanel.video,..._?{}:{display:"none"}})}function CameraPanel(){const{videoRef:_e,error:_,isHovering:et,isStreaming:tt,stream:rt,toggleCamera:nt,handleMouseEnter:ot,handleMouseLeave:at}=useCameraPanel();return reactExports.useEffect(()=>{_e.current&&(_e.current.srcObject=rt)},[rt]),jsxRuntimeExports.jsxs(Box,{...sidebarStyles.cameraPanel.container,children:[jsxRuntimeExports.jsx(Box,{...sidebarStyles.cameraPanel.header,children:tt&&jsxRuntimeExports.jsx(LiveIndicator,{})}),jsxRuntimeExports.jsx(Tooltip,{showArrow:!0,content:tt?"Click to stop camera":"Click to start camera",open:et&&!_,children:jsxRuntimeExports.jsx(Box,{...sidebarStyles.cameraPanel.videoContainer,onClick:nt,onMouseEnter:ot,onMouseLeave:at,cursor:"pointer",position:"relative",_hover:{bg:"whiteAlpha.100"},children:_?jsxRuntimeExports.jsx(Text$1,{color:"red.300",fontSize:"sm",textAlign:"center",children:_}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(VideoStream$1,{videoRef:_e,isStreaming:tt}),!tt&&jsxRuntimeExports.jsx(CameraPlaceholder,{})]})})})]})}function useCaptureScreen(){const _e=reactExports.useRef(null),[_,et]=reactExports.useState(!1),{stream:tt,isStreaming:rt,error:nt,startCapture:ot,stopCapture:at}=useScreenCaptureContext(),lt=()=>{rt?at():ot()},ct=()=>et(!0),dt=()=>et(!1);return reactExports.useEffect(()=>{_e.current&&(_e.current.srcObject=tt)},[tt]),{videoRef:_e,error:nt,isHovering:_,isStreaming:rt,stream:tt,toggleCapture:lt,handleMouseEnter:ct,handleMouseLeave:dt}}function ScreenIndicator(){return jsxRuntimeExports.jsxs(Box,{color:"red.500",display:"flex",alignItems:"center",gap:2,children:[jsxRuntimeExports.jsx(Box,{w:"8px",h:"8px",borderRadius:"full",bg:"red.500",animation:"pulse 2s infinite"}),jsxRuntimeExports.jsx(Text$1,{fontSize:"sm",children:"Screen"})]})}function ScreenPlaceholder(){return jsxRuntimeExports.jsxs(Box,{position:"absolute",display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[jsxRuntimeExports.jsx(FiMonitor,{size:24}),jsxRuntimeExports.jsx(Text$1,{color:"whiteAlpha.600",fontSize:"sm",textAlign:"center",children:"Click to start screen capture"})]})}function VideoStream({videoRef:_e,isStreaming:_}){return jsxRuntimeExports.jsx("video",{ref:_e,autoPlay:!0,playsInline:!0,muted:!0,style:sidebarStyles.screenPanel.video,..._?{}:{display:"none"}})}function ScreenPanel(){const{videoRef:_e,error:_,isHovering:et,isStreaming:tt,toggleCapture:rt,handleMouseEnter:nt,handleMouseLeave:ot}=useCaptureScreen();return jsxRuntimeExports.jsxs(Box,{...sidebarStyles.screenPanel.container,children:[jsxRuntimeExports.jsx(Box,{...sidebarStyles.screenPanel.header,children:tt&&jsxRuntimeExports.jsx(ScreenIndicator,{})}),jsxRuntimeExports.jsx(Tooltip,{showArrow:!0,content:tt?"Click to stop screen capture":"Click to start screen capture",open:et&&!_,children:jsxRuntimeExports.jsx(Box,{...sidebarStyles.screenPanel.screenContainer,onClick:rt,onMouseEnter:nt,onMouseLeave:ot,cursor:"pointer",position:"relative",_hover:{bg:"whiteAlpha.100"},children:_?jsxRuntimeExports.jsx(Text$1,{color:"red.300",fontSize:"sm",textAlign:"center",children:_}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(VideoStream,{videoRef:_e,isStreaming:tt}),!tt&&jsxRuntimeExports.jsx(ScreenPlaceholder,{})]})})})]})}function BottomTab(){return jsxRuntimeExports.jsxs(TabsRoot,{defaultValue:"camera",variant:"plain",...sidebarStyles.bottomTab.container,children:[jsxRuntimeExports.jsxs(TabsList,{...sidebarStyles.bottomTab.list,children:[jsxRuntimeExports.jsxs(TabsTrigger,{value:"camera",...sidebarStyles.bottomTab.trigger,children:[jsxRuntimeExports.jsx(FiCamera,{}),"Camera"]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"screen",...sidebarStyles.bottomTab.trigger,children:[jsxRuntimeExports.jsx(FiMonitor,{}),"Screen"]})]}),jsxRuntimeExports.jsx(TabsContent,{value:"camera",children:jsxRuntimeExports.jsx(CameraPanel,{})}),jsxRuntimeExports.jsx(TabsContent,{value:"screen",children:jsxRuntimeExports.jsx(ScreenPanel,{})})]})}const minutesInMonth=43200,minutesInDay=1440,constructFromSymbol=Symbol.for("constructDateFrom");function constructFrom(_e,_){return typeof _e=="function"?_e(_):_e&&typeof _e=="object"&&constructFromSymbol in _e?_e[constructFromSymbol](_):_e instanceof Date?new _e.constructor(_):new Date(_)}function toDate(_e,_){return constructFrom(_e,_e)}let defaultOptions={};function getDefaultOptions(){return defaultOptions}function getTimezoneOffsetInMilliseconds(_e){const _=toDate(_e),et=new Date(Date.UTC(_.getFullYear(),_.getMonth(),_.getDate(),_.getHours(),_.getMinutes(),_.getSeconds(),_.getMilliseconds()));return et.setUTCFullYear(_.getFullYear()),+_e-+et}function normalizeDates(_e,..._){const et=constructFrom.bind(null,_e||_.find(tt=>typeof tt=="object"));return _.map(et)}function compareAsc(_e,_){const et=+toDate(_e)-+toDate(_);return et<0?-1:et>0?1:et}function constructNow(_e){return constructFrom(_e,Date.now())}function differenceInCalendarMonths(_e,_,et){const[tt,rt]=normalizeDates(et==null?void 0:et.in,_e,_),nt=tt.getFullYear()-rt.getFullYear(),ot=tt.getMonth()-rt.getMonth();return nt*12+ot}function getRoundingMethod(_e){return _=>{const tt=(_e?Math[_e]:Math.trunc)(_);return tt===0?0:tt}}function differenceInMilliseconds(_e,_){return+toDate(_e)-+toDate(_)}function endOfDay(_e,_){const et=toDate(_e);return et.setHours(23,59,59,999),et}function endOfMonth(_e,_){const et=toDate(_e),tt=et.getMonth();return et.setFullYear(et.getFullYear(),tt+1,0),et.setHours(23,59,59,999),et}function isLastDayOfMonth(_e,_){const et=toDate(_e);return+endOfDay(et)==+endOfMonth(et)}function differenceInMonths(_e,_,et){const[tt,rt,nt]=normalizeDates(et==null?void 0:et.in,_e,_e,_),ot=compareAsc(rt,nt),at=Math.abs(differenceInCalendarMonths(rt,nt));if(at<1)return 0;rt.getMonth()===1&&rt.getDate()>27&&rt.setDate(30),rt.setMonth(rt.getMonth()-ot*at);let lt=compareAsc(rt,nt)===-ot;isLastDayOfMonth(tt)&&at===1&&compareAsc(tt,nt)===1&&(lt=!1);const ct=ot*(at-+lt);return ct===0?0:ct}function differenceInSeconds(_e,_,et){const tt=differenceInMilliseconds(_e,_)/1e3;return getRoundingMethod(et==null?void 0:et.roundingMethod)(tt)}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance$1=(_e,_,et)=>{let tt;const rt=formatDistanceLocale[_e];return typeof rt=="string"?tt=rt:_===1?tt=rt.one:tt=rt.other.replace("{{count}}",_.toString()),et!=null&&et.addSuffix?et.comparison&&et.comparison>0?"in "+tt:tt+" ago":tt};function buildFormatLongFn(_e){return(_={})=>{const et=_.width?String(_.width):_e.defaultWidth;return _e.formats[et]||_e.formats[_e.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(_e,_,et,tt)=>formatRelativeLocale[_e];function buildLocalizeFn(_e){return(_,et)=>{const tt=et!=null&&et.context?String(et.context):"standalone";let rt;if(tt==="formatting"&&_e.formattingValues){const ot=_e.defaultFormattingWidth||_e.defaultWidth,at=et!=null&&et.width?String(et.width):ot;rt=_e.formattingValues[at]||_e.formattingValues[ot]}else{const ot=_e.defaultWidth,at=et!=null&&et.width?String(et.width):_e.defaultWidth;rt=_e.values[at]||_e.values[ot]}const nt=_e.argumentCallback?_e.argumentCallback(_):_;return rt[nt]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(_e,_)=>{const et=Number(_e),tt=et%100;if(tt>20||tt<10)switch(tt%10){case 1:return et+"st";case 2:return et+"nd";case 3:return et+"rd"}return et+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:_e=>_e-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(_e){return(_,et={})=>{const tt=et.width,rt=tt&&_e.matchPatterns[tt]||_e.matchPatterns[_e.defaultMatchWidth],nt=_.match(rt);if(!nt)return null;const ot=nt[0],at=tt&&_e.parsePatterns[tt]||_e.parsePatterns[_e.defaultParseWidth],lt=Array.isArray(at)?findIndex(at,st=>st.test(ot)):findKey(at,st=>st.test(ot));let ct;ct=_e.valueCallback?_e.valueCallback(lt):lt,ct=et.valueCallback?et.valueCallback(ct):ct;const dt=_.slice(ot.length);return{value:ct,rest:dt}}}function findKey(_e,_){for(const et in _e)if(Object.prototype.hasOwnProperty.call(_e,et)&&_(_e[et]))return et}function findIndex(_e,_){for(let et=0;et<_e.length;et++)if(_(_e[et]))return et}function buildMatchPatternFn(_e){return(_,et={})=>{const tt=_.match(_e.matchPattern);if(!tt)return null;const rt=tt[0],nt=_.match(_e.parsePattern);if(!nt)return null;let ot=_e.valueCallback?_e.valueCallback(nt[0]):nt[0];ot=et.valueCallback?et.valueCallback(ot):ot;const at=_.slice(rt.length);return{value:ot,rest:at}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:_e=>parseInt(_e,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:_e=>_e+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance:formatDistance$1,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function formatDistance(_e,_,et){const tt=getDefaultOptions(),rt=(et==null?void 0:et.locale)??tt.locale??enUS,nt=2520,ot=compareAsc(_e,_);if(isNaN(ot))throw new RangeError("Invalid time value");const at=Object.assign({},et,{addSuffix:et==null?void 0:et.addSuffix,comparison:ot}),[lt,ct]=normalizeDates(et==null?void 0:et.in,...ot>0?[_,_e]:[_e,_]),dt=differenceInSeconds(ct,lt),st=(getTimezoneOffsetInMilliseconds(ct)-getTimezoneOffsetInMilliseconds(lt))/1e3,it=Math.round((dt-st)/60);let ut;if(it<2)return et!=null&&et.includeSeconds?dt<5?rt.formatDistance("lessThanXSeconds",5,at):dt<10?rt.formatDistance("lessThanXSeconds",10,at):dt<20?rt.formatDistance("lessThanXSeconds",20,at):dt<40?rt.formatDistance("halfAMinute",0,at):dt<60?rt.formatDistance("lessThanXMinutes",1,at):rt.formatDistance("xMinutes",1,at):it===0?rt.formatDistance("lessThanXMinutes",1,at):rt.formatDistance("xMinutes",it,at);if(it<45)return rt.formatDistance("xMinutes",it,at);if(it<90)return rt.formatDistance("aboutXHours",1,at);if(it<minutesInDay){const ht=Math.round(it/60);return rt.formatDistance("aboutXHours",ht,at)}else{if(it<nt)return rt.formatDistance("xDays",1,at);if(it<minutesInMonth){const ht=Math.round(it/minutesInDay);return rt.formatDistance("xDays",ht,at)}else if(it<minutesInMonth*2)return ut=Math.round(it/minutesInMonth),rt.formatDistance("aboutXMonths",ut,at)}if(ut=differenceInMonths(ct,lt),ut<12){const ht=Math.round(it/minutesInMonth);return rt.formatDistance("xMonths",ht,at)}else{const ht=ut%12,ft=Math.trunc(ut/12);return ht<3?rt.formatDistance("aboutXYears",ft,at):ht<9?rt.formatDistance("overXYears",ft,at):rt.formatDistance("almostXYears",ft+1,at)}}function formatDistanceToNow(_e,_){return formatDistance(_e,constructNow(_e),_)}const DrawerContent=reactExports.forwardRef((_e,_)=>{const{children:et,portalled:tt=!0,portalRef:rt,offset:nt,...ot}=_e;return jsxRuntimeExports.jsx(Portal,{disabled:!tt,container:rt,children:jsxRuntimeExports.jsx(DrawerPositioner,{padding:nt,children:jsxRuntimeExports.jsx(DrawerContent$1,{ref:_,...ot,asChild:!1,children:et})})})}),DrawerCloseTrigger=reactExports.forwardRef((_e,_)=>jsxRuntimeExports.jsx(DrawerCloseTrigger$1,{position:"absolute",top:"2",insetEnd:"2",..._e,asChild:!0,children:jsxRuntimeExports.jsx(CloseButton,{size:"sm",ref:_})})),DrawerTrigger=DrawerTrigger$1,DrawerRoot=DrawerRoot$1,DrawerFooter=DrawerFooter$1,DrawerHeader=DrawerHeader$1,DrawerBody=DrawerBody$1,DrawerBackdrop=DrawerBackdrop$1,DrawerTitle=DrawerTitle$1,DrawerActionTrigger=DrawerActionTrigger$1,useHistoryDrawer=()=>{const[_e,_]=reactExports.useState(!1),{historyList:et,currentHistoryUid:tt,setCurrentHistoryUid:rt,setHistoryList:nt,messages:ot,updateHistoryList:at}=useChatHistory(),{sendMessage:lt}=useWebSocket();return{open:_e,setOpen:_,historyList:et,currentHistoryUid:tt,fetchAndSetHistory:it=>{if(!(!it||it===tt)){if(tt&&ot.length>0){const ut=ot[ot.length-1];at(tt,ut)}rt(it),lt({type:"fetch-and-set-history",history_uid:it})}},deleteHistory:it=>{if(it===tt){toaster.create({title:"Cannot delete current chat history",type:"warning",duration:2e3});return}lt({type:"delete-history",history_uid:it}),nt(et.filter(ut=>ut.uid!==it))},getLatestMessageContent:it=>{var ut;if(it.uid===tt&&ot.length>0){const ht=ot[ot.length-1];return{content:ht.content,timestamp:ht.timestamp}}return{content:((ut=it.latest_message)==null?void 0:ut.content)||"",timestamp:it.timestamp}}}},HistoryItem=reactExports.memo(({isSelected:_e,latestMessage:_,onSelect:et,onDelete:tt,isDeleteDisabled:rt})=>jsxRuntimeExports.jsxs(Box,{...sidebarStyles.historyDrawer.historyItem,..._e?sidebarStyles.historyDrawer.historyItemSelected:{},onClick:et,children:[jsxRuntimeExports.jsxs(Box,{...sidebarStyles.historyDrawer.historyHeader,children:[jsxRuntimeExports.jsx(Box,{...sidebarStyles.historyDrawer.timestamp,children:_.timestamp?formatDistanceToNow(new Date(_.timestamp),{addSuffix:!0}):"No messages"}),jsxRuntimeExports.jsx(Button,{onClick:tt,disabled:rt,...sidebarStyles.historyDrawer.deleteButton,children:jsxRuntimeExports.jsx(FiTrash2,{})})]}),_.content&&jsxRuntimeExports.jsx(Box,{...sidebarStyles.historyDrawer.messagePreview,children:_.content})]}));HistoryItem.displayName="HistoryItem";function HistoryDrawer({children:_e}){const{open:_,setOpen:et,historyList:tt,currentHistoryUid:rt,fetchAndSetHistory:nt,deleteHistory:ot,getLatestMessageContent:at}=useHistoryDrawer();return jsxRuntimeExports.jsxs(DrawerRoot,{open:_,onOpenChange:lt=>et(lt.open),placement:"start",children:[jsxRuntimeExports.jsx(DrawerBackdrop,{}),jsxRuntimeExports.jsx(DrawerTrigger,{asChild:!0,children:_e}),jsxRuntimeExports.jsxs(DrawerContent,{style:sidebarStyles.historyDrawer.drawer.content,children:[jsxRuntimeExports.jsxs(DrawerHeader,{children:[jsxRuntimeExports.jsx(DrawerTitle,{style:sidebarStyles.historyDrawer.drawer.title,children:"Chat History List"}),jsxRuntimeExports.jsx(DrawerCloseTrigger,{style:sidebarStyles.historyDrawer.drawer.closeButton})]}),jsxRuntimeExports.jsx(DrawerBody,{children:jsxRuntimeExports.jsx(Box,{...sidebarStyles.historyDrawer.listContainer,children:tt.map(lt=>jsxRuntimeExports.jsx(HistoryItem,{isSelected:rt===lt.uid,latestMessage:at(lt),onSelect:()=>nt(lt.uid),onDelete:ct=>{ct.stopPropagation(),ot(lt.uid)},isDeleteDisabled:rt===lt.uid},lt.uid))})}),jsxRuntimeExports.jsx(DrawerFooter,{children:jsxRuntimeExports.jsx(DrawerActionTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{...sidebarStyles.historyDrawer.drawer.actionButton,children:"Close"})})})]})]})}const useSidebar=()=>{const{open:_e,onOpen:_,onClose:et}=useDisclosure(),{sendMessage:tt}=useWebSocket(),{interrupt:rt}=useInterrupt(),{currentHistoryUid:nt,messages:ot,updateHistoryList:at}=useChatHistory();return{settingsOpen:_e,onSettingsOpen:_,onSettingsClose:et,createNewHistory:()=>{if(nt&&ot.length>0){const ct=ot[ot.length-1];at(nt,ct)}rt(),tt({type:"create-new-history"})}}},ToggleButton$1=reactExports.memo(({isCollapsed:_e,onToggle:_})=>jsxRuntimeExports.jsx(Box,{...sidebarStyles.sidebar.toggleButton,style:{transform:_e?"rotate(180deg)":"rotate(0deg)"},onClick:_,children:jsxRuntimeExports.jsx(FiChevronLeft,{})}));ToggleButton$1.displayName="ToggleButton";const HeaderButtons=reactExports.memo(({onSettingsOpen:_e,onNewHistory:_})=>jsxRuntimeExports.jsxs(Box,{display:"flex",gap:1,children:[jsxRuntimeExports.jsx(Button,{onClick:_e,children:jsxRuntimeExports.jsx(FiSettings,{})}),jsxRuntimeExports.jsx(HistoryDrawer,{children:jsxRuntimeExports.jsx(Button,{children:jsxRuntimeExports.jsx(FiClock,{})})}),jsxRuntimeExports.jsx(Button,{onClick:_,children:jsxRuntimeExports.jsx(FiPlus,{})})]}));HeaderButtons.displayName="HeaderButtons";const SidebarContent=reactExports.memo(({onSettingsOpen:_e,onNewHistory:_})=>jsxRuntimeExports.jsxs(Box,{...sidebarStyles.sidebar.content,children:[jsxRuntimeExports.jsx(Box,{...sidebarStyles.sidebar.header,children:jsxRuntimeExports.jsx(HeaderButtons,{onSettingsOpen:_e,onNewHistory:_})}),jsxRuntimeExports.jsx(ChatHistoryPanel,{}),jsxRuntimeExports.jsx(BottomTab,{})]}));SidebarContent.displayName="SidebarContent";function Sidebar({isCollapsed:_e=!1,onToggle:_}){const{settingsOpen:et,onSettingsOpen:tt,onSettingsClose:rt,createNewHistory:nt}=useSidebar();return jsxRuntimeExports.jsxs(Box,{...sidebarStyles.sidebar.container(_e),children:[jsxRuntimeExports.jsx(ToggleButton$1,{isCollapsed:_e,onToggle:_}),!_e&&!et&&jsxRuntimeExports.jsx(SidebarContent,{onSettingsOpen:tt,onNewHistory:nt}),!_e&&et&&jsxRuntimeExports.jsx(SettingUI,{open:et,onClose:rt,onToggle:_})]})}function BsMicFill(_e){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0z"},child:[]},{tag:"path",attr:{d:"M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5"},child:[]}]})(_e)}function BsMicMuteFill(_e){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13 8c0 .564-.094 1.107-.266 1.613l-.814-.814A4 4 0 0 0 12 8V7a.5.5 0 0 1 1 0zm-5 4c.818 0 1.578-.245 2.212-.667l.718.719a5 5 0 0 1-2.43.923V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 1 0v1a4 4 0 0 0 4 4m3-9v4.879L5.158 2.037A3.001 3.001 0 0 1 11 3"},child:[]},{tag:"path",attr:{d:"M9.486 10.607 5 6.12V8a3 3 0 0 0 4.486 2.607m-7.84-9.253 12 12 .708-.708-12-12z"},child:[]}]})(_e)}function BsPaperclip(_e){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0z"},child:[]}]})(_e)}function IoHandRightSharp(_e){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M82.42 209.08c15.06-6.62 32.38 1.31 38.5 17.62L156 312h11.27V80c0-17.6 13.3-32 29.55-32 16.26 0 29.55 14.4 29.55 32v151.75l14.78.25V32c0-17.6 13.3-32 29.55-32 16.3 0 29.55 14.4 29.55 32v199.75L315 232V64c0-17.6 13.3-32 29.55-32 16.26 0 29.55 14.4 29.55 32v183.75l14.78.25V128c0-17.6 13.3-32 29.55-32C434.7 96 448 110.4 448 128v216c0 75.8-37.13 168-169 168-40.8 0-79.42-7-100.66-21a121.41 121.41 0 0 1-33.72-33.31 138 138 0 0 1-16-31.78L66.16 250.77c-6.11-16.31 1.2-35.06 16.26-41.69z"},child:[]}]})(_e)}const InputGroup=reactExports.forwardRef((_e,_)=>{const{startElement:et,startElementProps:tt,endElement:rt,endElementProps:nt,children:ot,startOffset:at="6px",endOffset:lt="6px",...ct}=_e,dt=reactExports.Children.only(ot);return jsxRuntimeExports.jsxs(Group,{ref:_,...ct,children:[et&&jsxRuntimeExports.jsx(InputElement,{pointerEvents:"none",...tt,children:et}),reactExports.cloneElement(dt,{...et&&{ps:`calc(var(--input-height) - ${at})`},...rt&&{pe:`calc(var(--input-height) - ${lt})`},...ot.props}),rt&&jsxRuntimeExports.jsx(InputElement,{placement:"end",...nt,children:rt})]})}),footerStyles={footer:{container:_e=>({bg:_e?"transparent":"gray.800",borderTopRadius:_e?"none":"lg",transform:_e?"translateY(calc(100% - 24px))":"translateY(0)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",height:"100%",position:"relative",overflow:_e?"visible":"hidden",pb:"4"}),toggleButton:{height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"whiteAlpha.700",_hover:{color:"white"},bg:"transparent",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},actionButton:{borderRadius:"12px",width:"50px",height:"50px",minW:"50px"},input:{bg:"gray.700",border:"none",height:"80px",borderRadius:"12px",fontSize:"18px",pl:"12",pr:"4",color:"whiteAlpha.900",_placeholder:{color:"whiteAlpha.500"},_focus:{border:"none",bg:"gray.700"},resize:"none",minHeight:"80px",maxHeight:"80px",py:"0",display:"flex",alignItems:"center",paddingTop:"28px",lineHeight:"1.4"},attachButton:{position:"absolute",left:"1",top:"50%",transform:"translateY(-50%)",color:"whiteAlpha.700",zIndex:2,_hover:{bg:"transparent",color:"white"}}},aiIndicator:{container:{bg:"#7C5CFF",color:"white",width:"110px",height:"30px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",overflow:"hidden"},text:{fontSize:"12px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}};function AIStateIndicator(){const{aiState:_e}=useAiState(),_=footerStyles.aiIndicator;return jsxRuntimeExports.jsx(Box,{..._.container,children:jsxRuntimeExports.jsx(Text$1,{..._.text,children:_e})})}function useTextInput(){const[_e,_]=reactExports.useState(""),[et,tt]=reactExports.useState(!1),rt=useWebSocket(),{aiState:nt,setAiState:ot}=useAiState(),{interrupt:at}=useInterrupt(),{appendHumanMessage:lt}=useChatHistory(),{stopMic:ct,autoStopMic:dt}=useVAD(),{captureAllMedia:st}=useMediaCapture(),it=mt=>{_(mt.target.value)},ut=async()=>{if(!_e.trim()||!rt)return;nt==="thinking-speaking"&&at();const mt=await st();lt(_e.trim()),rt.sendMessage({type:"text-input",text:_e.trim(),images:mt}),ot("thinking-speaking"),dt&&ct(),_("")};return{inputText:_e,setInputText:it,handleSend:ut,handleKeyPress:mt=>{et||mt.key==="Enter"&&!mt.shiftKey&&(mt.preventDefault(),ut())},handleCompositionStart:()=>tt(!0),handleCompositionEnd:()=>tt(!1)}}const useFooter=()=>{const{inputText:_e,setInputText:_,handleKeyPress:et,handleCompositionStart:tt,handleCompositionEnd:rt}=useTextInput(),{interrupt:nt}=useInterrupt(),{startMic:ot,autoStartMicOn:at}=useVAD(),{handleMicToggle:lt,micOn:ct}=useMicToggle(),{setAiState:dt,aiState:st}=useAiState(),{sendTriggerSignal:it}=useTriggerSpeak(),{settings:ut}=useProactiveSpeak();return{inputValue:_e,handleInputChange:mt=>{_({target:{value:mt.target.value}}),dt(AiStateEnum.WAITING)},handleKeyPress:mt=>{et(mt)},handleCompositionStart:tt,handleCompositionEnd:rt,handleInterrupt:()=>{st===AiStateEnum.THINKING_SPEAKING?(nt(),at&&ot()):ut.allowButtonTrigger&&it(-1)},handleMicToggle:lt,micOn:ct}},ToggleButton=reactExports.memo(({isCollapsed:_e,onToggle:_})=>jsxRuntimeExports.jsx(Box,{...footerStyles.footer.toggleButton,onClick:_,color:"whiteAlpha.500",style:{transform:_e?"rotate(180deg)":"rotate(0deg)"},children:jsxRuntimeExports.jsx(FiChevronDown,{})}));ToggleButton.displayName="ToggleButton";const ActionButtons=reactExports.memo(({micOn:_e,onMicToggle:_,onInterrupt:et})=>jsxRuntimeExports.jsxs(HStack,{gap:2,children:[jsxRuntimeExports.jsx(IconButton,{bg:_e?"green.500":"red.500",...footerStyles.footer.actionButton,onClick:_,children:_e?jsxRuntimeExports.jsx(BsMicFill,{}):jsxRuntimeExports.jsx(BsMicMuteFill,{})}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"Raise hand",bg:"yellow.500",...footerStyles.footer.actionButton,onClick:et,children:jsxRuntimeExports.jsx(IoHandRightSharp,{size:"24"})})]}));ActionButtons.displayName="ActionButtons";const MessageInput=reactExports.memo(({value:_e,onChange:_,onKeyDown:et,onCompositionStart:tt,onCompositionEnd:rt})=>jsxRuntimeExports.jsx(InputGroup,{flex:1,children:jsxRuntimeExports.jsxs(Box,{position:"relative",width:"100%",children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"Attach file",variant:"ghost",...footerStyles.footer.attachButton,children:jsxRuntimeExports.jsx(BsPaperclip,{size:"24"})}),jsxRuntimeExports.jsx(Textarea,{value:_e,onChange:_,onKeyDown:et,onCompositionStart:tt,onCompositionEnd:rt,placeholder:"Type your message...",...footerStyles.footer.input})]})}));MessageInput.displayName="MessageInput";function Footer({isCollapsed:_e=!1,onToggle:_}){const{inputValue:et,handleInputChange:tt,handleKeyPress:rt,handleCompositionStart:nt,handleCompositionEnd:ot,handleInterrupt:at,handleMicToggle:lt,micOn:ct}=useFooter();return jsxRuntimeExports.jsxs(Box,{...footerStyles.footer.container(_e),children:[jsxRuntimeExports.jsx(ToggleButton,{isCollapsed:_e,onToggle:_}),jsxRuntimeExports.jsx(Box,{pt:"0",px:"4",children:jsxRuntimeExports.jsxs(HStack,{width:"100%",gap:4,children:[jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Box,{mb:"1.5",children:jsxRuntimeExports.jsx(AIStateIndicator,{})}),jsxRuntimeExports.jsx(ActionButtons,{micOn:ct,onMicToggle:lt,onInterrupt:at})]}),jsxRuntimeExports.jsx(MessageInput,{value:et,onChange:tt,onKeyDown:rt,onCompositionStart:nt,onCompositionEnd:ot})]})})]})}const isElectron=window.api!==void 0,getAppHeight=()=>typeof window<"u"&&/Mobi|Android/i.test(navigator.userAgent)?`${window.innerHeight}px`:isElectron?"calc(100vh - 30px)":"100vh",layoutStyles={appContainer:{width:"100vw",height:getAppHeight(),bg:"gray.900",color:"white",overflow:"hidden",position:"relative",display:"flex",flexDirection:{base:"column",md:"row"}},sidebar:{position:"relative",width:{base:"100%",md:"440px"},height:{base:"auto",md:"100%"},bg:"gray.800",borderRight:"1px solid",borderColor:"whiteAlpha.200",overflow:"hidden",flexShrink:0,transition:"all 0.2s"},mainContent:{flex:1,height:{base:"calc(100% - 120px)",md:"100%"},position:"relative",display:"flex",flexDirection:"column",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",overflow:"hidden"},canvas:{position:"relative",width:"100%",flex:1,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden",willChange:"transform"},footer:{width:"100%",height:{base:"100px",md:"120px"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",willChange:"transform",position:"relative",zIndex:1},toggleButton:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",height:"60px",bg:"whiteAlpha.100",_hover:{bg:"whiteAlpha.200"},borderLeftRadius:0,borderRightRadius:"md",zIndex:10},canvasHeight:_e=>({height:_e?"calc(100% - 24px)":"calc(100% - 120px)"}),sidebarToggleButton:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",height:"60px",bg:"gray.800",borderLeftRadius:0,borderRightRadius:"md",zIndex:10},collapsedFooter:{height:{base:"20px",md:"24px"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},windowsTitleBar:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"30px",backgroundColor:"gray.800",paddingX:"10px",css:{"-webkit-app-region":"drag"}},macTitleBar:{display:"flex",alignItems:"center",justifyContent:"center",height:"30px",backgroundColor:"gray.800",css:{"-webkit-app-region":"drag","-webkit-user-select":"none"}},titleBarTitle:{fontSize:"sm",color:"whiteAlpha.800",textAlign:"center"},titleBarButtons:{display:"flex",gap:"1"},titleBarButton:{size:"sm",variant:"ghost",color:"whiteAlpha.800",css:{"-webkit-app-region":"no-drag"},_hover:{backgroundColor:"whiteAlpha.200"}},closeButton:{size:"sm",variant:"ghost",color:"whiteAlpha.800",css:{"-webkit-app-region":"no-drag"},_hover:{backgroundColor:"red.500"}}};function WebSocketHandler({children:_e}){const[_,et]=reactExports.useState("CLOSED"),[tt,rt]=useLocalStorage("wsUrl",defaultWsUrl),[nt,ot]=useLocalStorage("baseUrl",defaultBaseUrl),{aiState:at,setAiState:lt}=useAiState(),{setModelInfo:ct}=useLive2DConfig(),{setSubtitleText:dt}=useSubtitle(),{clearResponse:st,setForceNewMessage:it}=useChatHistory(),{addAudioTask:ut}=useAudioTask(),ht=useBgUrl(),{confUid:ft,setConfName:gt,setConfUid:mt,setConfigFiles:yt}=useConfig(),[bt,vt]=reactExports.useState(void 0);reactExports.useEffect(()=>{bt&&(ct(bt),vt(void 0))},[bt,ct,ft]);const{setCurrentHistoryUid:xt,setMessages:wt,setHistoryList:St,appendHumanMessage:Et}=useChatHistory(),{startMic:_t,stopMic:Tt}=useVAD(),Rt=reactExports.useCallback(Ct=>{switch(Ct){case"start-mic":console.log("Starting microphone..."),_t();break;case"stop-mic":console.log("Stopping microphone..."),Tt();break;case"conversation-chain-start":lt("thinking-speaking"),audioTaskQueue.clearQueue(),st(),it(!0);break;case"conversation-chain-end":audioTaskQueue.addTask(()=>new Promise($t=>{lt(Mt=>Mt==="thinking-speaking"?"idle":Mt),$t()}));break;default:console.warn("Unknown control command:",Ct)}},[lt,st,it,_t,Tt]),Ot=reactExports.useCallback(Ct=>{var $t;switch(console.log("Received message from server:",Ct),Ct.type){case"control":Ct.text&&Rt(Ct.text);break;case"set-model-and-conf":if(lt("loading"),Ct.conf_name&&gt(Ct.conf_name),Ct.conf_uid&&(mt(Ct.conf_uid),console.log("confUid",Ct.conf_uid)),vt(Ct.model_info),Ct.model_info&&!Ct.model_info.url.startsWith("http")){const Mt=nt+Ct.model_info.url;Ct.model_info.url=Mt}lt("idle");break;case"full-text":Ct.text&&dt(Ct.text);break;case"config-files":Ct.configs&&yt(Ct.configs);break;case"config-switched":lt("idle"),dt("New Character Loaded"),toaster.create({title:"Character switched",type:"success",duration:2e3}),wsService.sendMessage({type:"fetch-history-list"}),wsService.sendMessage({type:"create-new-history"});break;case"background-files":Ct.files&&(ht==null||ht.setBackgroundFiles(Ct.files));break;case"audio":at==="interrupted"||at==="listening"?console.log("Audio playback intercepted. Sentence:",Ct.text):(console.log("actions",Ct.actions),ut({audioBase64:Ct.audio||"",volumes:Ct.volumes||[],sliceLength:Ct.slice_length||0,text:Ct.text||null,expressions:(($t=Ct.actions)==null?void 0:$t.expressions)||null}));break;case"history-data":Ct.messages&&wt(Ct.messages),toaster.create({title:"History loaded",type:"success",duration:2e3});break;case"new-history-created":if(lt("idle"),dt("New Conversation Started"),Ct.history_uid){xt(Ct.history_uid),wt([]);const Mt={uid:Ct.history_uid,latest_message:null,timestamp:new Date().toISOString()};St(Dt=>[Mt,...Dt]),toaster.create({title:"New chat history created",type:"success",duration:2e3})}break;case"history-deleted":toaster.create({title:Ct.success?"History deleted successfully":"Failed to delete history",type:Ct.success?"success":"error",duration:2e3});break;case"history-list":Ct.histories&&(St(Ct.histories),Ct.histories.length>0&&xt(Ct.histories[0].uid));break;case"user-input-transcription":console.log("user-input-transcription: ",Ct.text),Ct.text&&Et(Ct.text);break;case"error":toaster.create({title:Ct.message,type:"error",duration:2e3});break;default:console.warn("Unknown message type:",Ct.type)}},[at,ut,Et,nt,ht,lt,gt,mt,yt,xt,St,wt,ct,dt,_t,Tt]);reactExports.useEffect(()=>{wsService.connect(tt)},[tt]),reactExports.useEffect(()=>{const Ct=wsService.onStateChange(et),$t=wsService.onMessage(Ot);return()=>{Ct.unsubscribe(),$t.unsubscribe()}},[tt,Ot]);const At=reactExports.useMemo(()=>({sendMessage:wsService.sendMessage.bind(wsService),wsState:_,reconnect:()=>wsService.connect(tt),wsUrl:tt,setWsUrl:rt,baseUrl:nt,setBaseUrl:ot}),[_,tt,nt]);return jsxRuntimeExports.jsx(WebSocketContext.Provider,{value:At,children:_e})}function TitleBar(){var lt;const[_e,_]=reactExports.useState(!1),[et,tt]=reactExports.useState(!1),rt=((lt=window.electron)==null?void 0:lt.process.platform)==="darwin";reactExports.useEffect(()=>{var st,it;const ct=(ut,ht)=>{_(ht)},dt=(ut,ht)=>{tt(ht)};return(st=window.electron)==null||st.ipcRenderer.on("window-maximized-change",ct),(it=window.electron)==null||it.ipcRenderer.on("window-fullscreen-change",dt),()=>{var ut,ht;(ut=window.electron)==null||ut.ipcRenderer.removeAllListeners("window-maximized-change"),(ht=window.electron)==null||ht.ipcRenderer.removeAllListeners("window-fullscreen-change")}},[]);const nt=()=>{var ct,dt;et?(ct=window.electron)==null||ct.ipcRenderer.send("window-unfullscreen"):(dt=window.electron)==null||dt.ipcRenderer.send("window-maximize")},ot=()=>et?"Exit Full Screen":_e?"Restore":"Maximize",at=()=>et?jsxRuntimeExports.jsx(FiChevronsDown,{}):_e?jsxRuntimeExports.jsx(FiMinimize2,{}):jsxRuntimeExports.jsx(FiMaximize2,{});return rt?jsxRuntimeExports.jsx(Box,{...layoutStyles.macTitleBar,children:jsxRuntimeExports.jsx(Box,{...layoutStyles.titleBarTitle,children:"Open LLM VTuber"})}):jsxRuntimeExports.jsxs(Box,{...layoutStyles.windowsTitleBar,children:[jsxRuntimeExports.jsx(Box,{...layoutStyles.titleBarTitle,children:"Open LLM VTuber"}),jsxRuntimeExports.jsxs(Box,{...layoutStyles.titleBarButtons,children:[jsxRuntimeExports.jsx(IconButton,{...layoutStyles.titleBarButton,onClick:()=>{var ct;return(ct=window.electron)==null?void 0:ct.ipcRenderer.send("window-minimize")},"aria-label":"Minimize",children:jsxRuntimeExports.jsx(FiMinus,{})}),jsxRuntimeExports.jsx(IconButton,{...layoutStyles.titleBarButton,onClick:nt,"aria-label":ot(),children:at()}),jsxRuntimeExports.jsx(IconButton,{...layoutStyles.closeButton,onClick:()=>{var ct;return(ct=window.electron)==null?void 0:ct.ipcRenderer.send("window-close")},"aria-label":"Close",children:jsxRuntimeExports.jsx(FiX,{})})]})]})}function useInputSubtitle(){const{inputText:_e,setInputText:_,handleKeyPress:et,handleCompositionStart:tt,handleCompositionEnd:rt,handleSend:nt}=useTextInput(),{messages:ot}=useChatHistory(),{startMic:at,autoStartMicOn:lt}=useVAD(),{handleMicToggle:ct,micOn:dt}=useMicToggle(),{aiState:st,setAiState:it}=useAiState(),{interrupt:ut}=useInterrupt(),ht=ot.filter(bt=>bt.role==="ai").slice(-1).map(bt=>bt.content)[0],ft=ot.some(bt=>bt.role==="ai");return{inputValue:_e,handleInputChange:bt=>{_({target:{value:bt.target.value}}),it(AiStateEnum.WAITING)},handleKeyPress:bt=>{et(bt)},handleCompositionStart:tt,handleCompositionEnd:rt,handleInterrupt:()=>{ut(),lt&&at()},handleMicToggle:ct,lastAIMessage:ht,hasAIMessages:ft,aiState:st,micOn:dt,handleSend:nt}}function useDraggable({isPet:_e=!1,componentId:_}){const[et,tt]=reactExports.useState(!1),rt=reactExports.useRef({x:0,y:0}),nt=reactExports.useRef({x:0,y:0}),ot=reactExports.useRef(null);return{elementRef:ot,isDragging:et,handleMouseDown:dt=>{tt(!0),nt.current={x:dt.clientX-rt.current.x,y:dt.clientY-rt.current.y};const st=ut=>{if(!ot.current)return;const ht={x:ut.clientX-nt.current.x,y:ut.clientY-nt.current.y};rt.current=ht,ot.current.style.transform=`translateX(-50%) translate(${rt.current.x}px, ${rt.current.y}px)`},it=()=>{tt(!1),document.removeEventListener("mousemove",st,!0),document.removeEventListener("mouseup",it,!0)};document.addEventListener("mousemove",st,!0),document.addEventListener("mouseup",it,!0)},handleMouseEnter:()=>{var dt;_e&&((dt=window.api)==null||dt.updateComponentHover(_,!0))},handleMouseLeave:()=>{var dt;_e&&!et&&((dt=window.api)==null||dt.updateComponentHover(_,!1))}}}const inputSubtitleStyles={container:{display:"flex",alignItems:"flex-end",justifyContent:"center",maxW:"fit-content",position:"absolute",bottom:"120px",left:"50%",transform:"translateX(-50%)",zIndex:1e3,userSelect:"none",willChange:"transform",padding:0},box:{w:"400px",rounded:"xl",overflow:"hidden",boxShadow:"lg",bg:"blackAlpha.700",backdropFilter:"blur(8px)",css:{WebkitUserSelect:"none"}},messageStack:{p:"3",gap:1,alignItems:"stretch",justify:"flex-end"},messageText:{color:"white",fontSize:"sm",lineHeight:"1.5",transition:"all 0.3s"},statusBox:{bg:"blackAlpha.600",p:"3",borderTop:"1px",borderColor:"whiteAlpha.200"},statusText:{fontSize:"xs",color:"whiteAlpha.800",transition:"all 0.3s"},iconButton:{size:"xs",variant:"ghost",color:"whiteAlpha.800",_hover:{bg:"whiteAlpha.200"}},inputBox:{bg:"blackAlpha.600",borderTop:"1px",borderColor:"whiteAlpha.200"},input:{size:"sm",bg:"blackAlpha.500",color:"white",_placeholder:{color:"whiteAlpha.500"},borderColor:"whiteAlpha.300",_focus:{borderColor:"whiteAlpha.500",outline:"none"},flex:"1"},sendButton:{p:"1.5",bg:"blackAlpha.500",rounded:"lg",_hover:{bg:"blackAlpha.600"},transition:"colors",color:"whiteAlpha.800",size:"sm"},draggableContainer:_e=>({cursor:_e?"grabbing":"grab",transition:_e?"none":"transform 0.1s ease",_active:{cursor:"grabbing"}}),closeButton:{position:"absolute",top:0,right:0,size:"2xs",minW:"6",height:"6",padding:0,variant:"ghost",color:"whiteAlpha.400",bg:"transparent",_hover:{bg:"blackAlpha.300",color:"whiteAlpha.800"},zIndex:10}};function InputSubtitle({isPet:_e=!1}){const{inputValue:_,handleInputChange:et,handleKeyPress:tt,handleCompositionStart:rt,handleCompositionEnd:nt,handleInterrupt:ot,handleMicToggle:at,handleSend:lt,lastAIMessage:ct,hasAIMessages:dt,aiState:st,micOn:it}=useInputSubtitle(),{elementRef:ut,isDragging:ht,handleMouseDown:ft,handleMouseEnter:gt,handleMouseLeave:mt}=useDraggable({isPet:_e,componentId:"input-subtitle"}),[yt,bt]=reactExports.useState(!0),vt=reactExports.useCallback(()=>{var wt;_e&&((wt=window.api)==null||wt.updateComponentHover("input-subtitle",!1)),bt(!1)},[_e]),xt=()=>{bt(!0)};return reactExports.useEffect(()=>{var wt;if(_e){const St=(wt=window.api)==null?void 0:wt.onToggleInputSubtitle(()=>{yt?vt():xt()});return()=>St==null?void 0:St()}return()=>{}},[vt,_e,yt]),reactExports.useEffect(()=>(window.inputSubtitle={open:xt,close:vt},()=>{delete window.inputSubtitle}),[_e,vt]),yt?jsxRuntimeExports.jsx(Box,{ref:ut,...inputSubtitleStyles.container,...inputSubtitleStyles.draggableContainer(ht),onMouseDown:ft,onMouseEnter:gt,onMouseLeave:mt,children:jsxRuntimeExports.jsxs(Box,{...inputSubtitleStyles.box,children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"Close subtitle",onClick:vt,...inputSubtitleStyles.closeButton,children:jsxRuntimeExports.jsx(LuX,{size:12})}),dt&&jsxRuntimeExports.jsx(VStack,{minH:ct?"32px":"0px",...inputSubtitleStyles.messageStack,children:ct&&jsxRuntimeExports.jsx(Text$1,{...inputSubtitleStyles.messageText,children:ct})}),jsxRuntimeExports.jsx(Box,{...inputSubtitleStyles.statusBox,children:jsxRuntimeExports.jsxs(Flex,{align:"center",justify:"space-between",color:"whiteAlpha.700",children:[jsxRuntimeExports.jsxs(Flex,{align:"center",gap:"2",children:[jsxRuntimeExports.jsx(LuBell,{size:16}),jsxRuntimeExports.jsx(Text$1,{...inputSubtitleStyles.statusText,children:st})]}),jsxRuntimeExports.jsxs(Flex,{gap:"2",children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"Toggle microphone",onClick:at,...inputSubtitleStyles.iconButton,children:it?jsxRuntimeExports.jsx(LuMic,{size:16}):jsxRuntimeExports.jsx(LuMicOff,{size:16})}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"Interrupt",onClick:ot,...inputSubtitleStyles.iconButton,children:jsxRuntimeExports.jsx(LuHand,{size:16})})]})]})}),jsxRuntimeExports.jsx(Box,{...inputSubtitleStyles.inputBox,children:jsxRuntimeExports.jsxs(Stack,{direction:"row",gap:"2",p:"2",children:[jsxRuntimeExports.jsx(Input,{value:_,onChange:et,onKeyDown:tt,onCompositionStart:rt,onCompositionEnd:nt,placeholder:"Type your message...",...inputSubtitleStyles.input}),jsxRuntimeExports.jsx(Button,{onClick:lt,...inputSubtitleStyles.sendButton,children:jsxRuntimeExports.jsx(LuSend,{size:16})})]})})]})}):null}function App(){const[_e,_]=reactExports.useState(!0),[et,tt]=reactExports.useState(!1),[rt,nt]=reactExports.useState("window"),ot=window.api!==void 0;return reactExports.useEffect(()=>{ot&&window.electron.ipcRenderer.on("pre-mode-changed",(at,lt)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{window.electron.ipcRenderer.send("renderer-ready-for-mode-change",lt)})})})},[ot]),reactExports.useEffect(()=>{ot&&window.electron.ipcRenderer.on("mode-changed",(at,lt)=>{nt(lt),requestAnimationFrame(()=>{requestAnimationFrame(()=>{window.electron.ipcRenderer.send("mode-change-rendered")})})})},[ot]),reactExports.useEffect(()=>{const at=()=>{const lt=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${lt}px`)};return at(),window.addEventListener("resize",at),()=>window.removeEventListener("resize",at)},[]),jsxRuntimeExports.jsx(ChakraProvider,{value:defaultSystem,children:jsxRuntimeExports.jsx(Live2DModelProvider,{children:jsxRuntimeExports.jsx(CameraProvider,{children:jsxRuntimeExports.jsx(ScreenCaptureProvider,{children:jsxRuntimeExports.jsx(ChatHistoryProvider,{children:jsxRuntimeExports.jsx(AiStateProvider,{children:jsxRuntimeExports.jsx(ProactiveSpeakProvider,{children:jsxRuntimeExports.jsx(CharacterConfigProvider,{children:jsxRuntimeExports.jsx(Live2DConfigProvider,{children:jsxRuntimeExports.jsx(SubtitleProvider,{children:jsxRuntimeExports.jsx(VADProvider,{children:jsxRuntimeExports.jsx(BgUrlProvider,{children:jsxRuntimeExports.jsxs(WebSocketHandler,{children:[jsxRuntimeExports.jsx(Toaster,{}),rt==="window"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ot&&jsxRuntimeExports.jsx(TitleBar,{}),jsxRuntimeExports.jsxs(Flex,{...layoutStyles.appContainer,children:[jsxRuntimeExports.jsx(Box,{...layoutStyles.sidebar,...!_e&&{width:"24px"},children:jsxRuntimeExports.jsx(Sidebar,{isCollapsed:!_e,onToggle:()=>_(!_e)})}),jsxRuntimeExports.jsxs(Box,{...layoutStyles.mainContent,children:[jsxRuntimeExports.jsx(Canvas,{}),jsxRuntimeExports.jsx(Box,{...layoutStyles.footer,...et&&layoutStyles.collapsedFooter,children:jsxRuntimeExports.jsx(Footer,{isCollapsed:et,onToggle:()=>tt(!et)})})]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Live2D$1,{isPet:rt==="pet"}),rt==="pet"&&jsxRuntimeExports.jsx(InputSubtitle,{isPet:rt==="pet"})]})]})})})})})})})})})})})})})}const originalConsoleWarn=console.warn;console.warn=(..._e)=>{typeof _e[0]=="string"&&_e[0].includes("onnxruntime")||originalConsoleWarn.apply(console,_e)};typeof window<"u"&&createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
